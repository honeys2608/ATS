function jV(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DWe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var UF={exports:{}},nb={},zF={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),_V=Symbol.for("react.portal"),wV=Symbol.for("react.fragment"),NV=Symbol.for("react.strict_mode"),kV=Symbol.for("react.profiler"),SV=Symbol.for("react.provider"),CV=Symbol.for("react.context"),AV=Symbol.for("react.forward_ref"),EV=Symbol.for("react.suspense"),TV=Symbol.for("react.memo"),PV=Symbol.for("react.lazy"),TE=Symbol.iterator;function OV(e){return e===null||typeof e!="object"?null:(e=TE&&e[TE]||e["@@iterator"],typeof e=="function"?e:null)}var WF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VF=Object.assign,HF={};function hm(e,t,r){this.props=e,this.context=t,this.refs=HF,this.updater=r||WF}hm.prototype.isReactComponent={};hm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qF(){}qF.prototype=hm.prototype;function vk(e,t,r){this.props=e,this.context=t,this.refs=HF,this.updater=r||WF}var bk=vk.prototype=new qF;bk.constructor=vk;VF(bk,hm.prototype);bk.isPureReactComponent=!0;var PE=Array.isArray,GF=Object.prototype.hasOwnProperty,jk={current:null},JF={key:!0,ref:!0,__self:!0,__source:!0};function KF(e,t,r){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)GF.call(t,s)&&!JF.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:yp,type:e,key:i,ref:l,props:a,_owner:jk.current}}function RV(e,t){return{$$typeof:yp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _k(e){return typeof e=="object"&&e!==null&&e.$$typeof===yp}function LV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var OE=/\/+/g;function q1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LV(""+e.key):t.toString(36)}function Cg(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case yp:case _V:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+q1(l,0):s,PE(a)?(r="",e!=null&&(r=e.replace(OE,"$&/")+"/"),Cg(a,t,r,"",function(d){return d})):a!=null&&(_k(a)&&(a=RV(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(OE,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",PE(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+q1(i,o);l+=Cg(i,t,r,c,a)}else if(c=OV(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+q1(i,o++),l+=Cg(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ex(e,t,r){if(e==null)return e;var s=[],a=0;return Cg(e,s,"","",function(i){return t.call(r,i,a++)}),s}function IV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ma={current:null},Ag={transition:null},FV={ReactCurrentDispatcher:ma,ReactCurrentBatchConfig:Ag,ReactCurrentOwner:jk};function XF(){throw Error("act(...) is not supported in production builds of React.")}xr.Children={map:ex,forEach:function(e,t,r){ex(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ex(e,function(){t++}),t},toArray:function(e){return ex(e,function(t){return t})||[]},only:function(e){if(!_k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xr.Component=hm;xr.Fragment=wV;xr.Profiler=kV;xr.PureComponent=vk;xr.StrictMode=NV;xr.Suspense=EV;xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FV;xr.act=XF;xr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=VF({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=jk.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)GF.call(t,c)&&!JF.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:yp,type:e.type,key:a,ref:i,props:s,_owner:l}};xr.createContext=function(e){return e={$$typeof:CV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SV,_context:e},e.Consumer=e};xr.createElement=KF;xr.createFactory=function(e){var t=KF.bind(null,e);return t.type=e,t};xr.createRef=function(){return{current:null}};xr.forwardRef=function(e){return{$$typeof:AV,render:e}};xr.isValidElement=_k;xr.lazy=function(e){return{$$typeof:PV,_payload:{_status:-1,_result:e},_init:IV}};xr.memo=function(e,t){return{$$typeof:TV,type:e,compare:t===void 0?null:t}};xr.startTransition=function(e){var t=Ag.transition;Ag.transition={};try{e()}finally{Ag.transition=t}};xr.unstable_act=XF;xr.useCallback=function(e,t){return ma.current.useCallback(e,t)};xr.useContext=function(e){return ma.current.useContext(e)};xr.useDebugValue=function(){};xr.useDeferredValue=function(e){return ma.current.useDeferredValue(e)};xr.useEffect=function(e,t){return ma.current.useEffect(e,t)};xr.useId=function(){return ma.current.useId()};xr.useImperativeHandle=function(e,t,r){return ma.current.useImperativeHandle(e,t,r)};xr.useInsertionEffect=function(e,t){return ma.current.useInsertionEffect(e,t)};xr.useLayoutEffect=function(e,t){return ma.current.useLayoutEffect(e,t)};xr.useMemo=function(e,t){return ma.current.useMemo(e,t)};xr.useReducer=function(e,t,r){return ma.current.useReducer(e,t,r)};xr.useRef=function(e){return ma.current.useRef(e)};xr.useState=function(e){return ma.current.useState(e)};xr.useSyncExternalStore=function(e,t,r){return ma.current.useSyncExternalStore(e,t,r)};xr.useTransition=function(){return ma.current.useTransition()};xr.version="18.3.1";zF.exports=xr;var y=zF.exports;const we=$r(y),DV=jV({__proto__:null,default:we},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V=y,MV=Symbol.for("react.element"),BV=Symbol.for("react.fragment"),UV=Object.prototype.hasOwnProperty,zV=$V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WV={key:!0,ref:!0,__self:!0,__source:!0};function YF(e,t,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)UV.call(t,s)&&!WV.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:MV,type:e,key:i,ref:l,props:a,_owner:zV.current}}nb.Fragment=BV;nb.jsx=YF;nb.jsxs=YF;UF.exports=nb;var n=UF.exports,ZF={exports:{}},ei={},QF={exports:{}},eD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,R){var D=H.length;H.push(R);e:for(;0<D;){var Y=D-1>>>1,M=H[Y];if(0<a(M,R))H[Y]=R,H[D]=M,D=Y;else break e}}function r(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var R=H[0],D=H.pop();if(D!==R){H[0]=D;e:for(var Y=0,M=H.length,X=M>>>1;Y<X;){var ne=2*(Y+1)-1,J=H[ne],ue=ne+1,ke=H[ue];if(0>a(J,D))ue<M&&0>a(ke,J)?(H[Y]=ke,H[ue]=D,Y=ue):(H[Y]=J,H[ne]=D,Y=ne);else if(ue<M&&0>a(ke,D))H[Y]=ke,H[ue]=D,Y=ue;else break e}}return R}function a(H,R){var D=H.sortIndex-R.sortIndex;return D!==0?D:H.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,f=null,m=3,g=!1,x=!1,h=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(H){for(var R=r(d);R!==null;){if(R.callback===null)s(d);else if(R.startTime<=H)s(d),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(d)}}function N(H){if(h=!1,j(H),!x)if(r(c)!==null)x=!0,L(w);else{var R=r(d);R!==null&&Z(N,R.startTime-H)}}function w(H,R){x=!1,h&&(h=!1,v(C),C=-1),g=!0;var D=m;try{for(j(R),f=r(c);f!==null&&(!(f.expirationTime>R)||H&&!A());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,m=f.priorityLevel;var M=Y(f.expirationTime<=R);R=e.unstable_now(),typeof M=="function"?f.callback=M:f===r(c)&&s(c),j(R)}else s(c);f=r(c)}if(f!==null)var X=!0;else{var ne=r(d);ne!==null&&Z(N,ne.startTime-R),X=!1}return X}finally{f=null,m=D,g=!1}}var _=!1,k=null,C=-1,T=5,P=-1;function A(){return!(e.unstable_now()-P<T)}function S(){if(k!==null){var H=e.unstable_now();P=H;var R=!0;try{R=k(!0,H)}finally{R?E():(_=!1,k=null)}}else _=!1}var E;if(typeof b=="function")E=function(){b(S)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,I=O.port2;O.port1.onmessage=S,E=function(){I.postMessage(null)}}else E=function(){p(S,0)};function L(H){k=H,_||(_=!0,E())}function Z(H,R){C=p(function(){H(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,L(w))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var D=m;m=R;try{return H()}finally{m=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,R){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var D=m;m=H;try{return R()}finally{m=D}},e.unstable_scheduleCallback=function(H,R,D){var Y=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?Y+D:Y):D=Y,H){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=D+M,H={id:u++,callback:R,priorityLevel:H,startTime:D,expirationTime:M,sortIndex:-1},D>Y?(H.sortIndex=D,t(d,H),r(c)===null&&H===r(d)&&(h?(v(C),C=-1):h=!0,Z(N,D-Y))):(H.sortIndex=M,t(c,H),x||g||(x=!0,L(w))),H},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(H){var R=m;return function(){var D=m;m=R;try{return H.apply(this,arguments)}finally{m=D}}}})(eD);QF.exports=eD;var VV=QF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HV=y,Xa=VV;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tD=new Set,Y0={};function Yd(e,t){Nf(e,t),Nf(e+"Capture",t)}function Nf(e,t){for(Y0[e]=t,e=0;e<t.length;e++)tD.add(t[e])}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dw=Object.prototype.hasOwnProperty,qV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RE={},LE={};function GV(e){return dw.call(LE,e)?!0:dw.call(RE,e)?!1:qV.test(e)?LE[e]=!0:(RE[e]=!0,!1)}function JV(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KV(e,t,r,s){if(t===null||typeof t>"u"||JV(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ha(e,t,r,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ts={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ts[e]=new ha(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ts[t]=new ha(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ts[e]=new ha(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ts[e]=new ha(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ts[e]=new ha(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ts[e]=new ha(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ts[e]=new ha(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ts[e]=new ha(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ts[e]=new ha(e,5,!1,e.toLowerCase(),null,!1,!1)});var wk=/[\-:]([a-z])/g;function Nk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wk,Nk);Ts[t]=new ha(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wk,Nk);Ts[t]=new ha(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wk,Nk);Ts[t]=new ha(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ts[e]=new ha(e,1,!1,e.toLowerCase(),null,!1,!1)});Ts.xlinkHref=new ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ts[e]=new ha(e,1,!1,e.toLowerCase(),null,!0,!0)});function kk(e,t,r,s){var a=Ts.hasOwnProperty(t)?Ts[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KV(t,r,a,s)&&(r=null),s||a===null?GV(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var No=HV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tx=Symbol.for("react.element"),Mu=Symbol.for("react.portal"),Bu=Symbol.for("react.fragment"),Sk=Symbol.for("react.strict_mode"),uw=Symbol.for("react.profiler"),rD=Symbol.for("react.provider"),nD=Symbol.for("react.context"),Ck=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),mw=Symbol.for("react.suspense_list"),Ak=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),sD=Symbol.for("react.offscreen"),IE=Symbol.iterator;function Mm(e){return e===null||typeof e!="object"?null:(e=IE&&e[IE]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,G1;function u0(e){if(G1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);G1=t&&t[1]||""}return`
`+G1+e}var J1=!1;function K1(e,t){if(!e||J1)return"";J1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{J1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?u0(e):""}function XV(e){switch(e.tag){case 5:return u0(e.type);case 16:return u0("Lazy");case 13:return u0("Suspense");case 19:return u0("SuspenseList");case 0:case 2:case 15:return e=K1(e.type,!1),e;case 11:return e=K1(e.type.render,!1),e;case 1:return e=K1(e.type,!0),e;default:return""}}function hw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bu:return"Fragment";case Mu:return"Portal";case uw:return"Profiler";case Sk:return"StrictMode";case fw:return"Suspense";case mw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nD:return(e.displayName||"Context")+".Consumer";case rD:return(e._context.displayName||"Context")+".Provider";case Ck:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ak:return t=e.displayName||null,t!==null?t:hw(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return hw(e(t))}catch{}}return null}function YV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hw(t);case 8:return t===Sk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZV(e){var t=aD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rx(e){e._valueTracker||(e._valueTracker=ZV(e))}function iD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=aD(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Xg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pw(e,t){var r=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function FE(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=xc(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lD(e,t){t=t.checked,t!=null&&kk(e,"checked",t,!1)}function xw(e,t){lD(e,t);var r=xc(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gw(e,t.type,r):t.hasOwnProperty("defaultValue")&&gw(e,t.type,xc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function DE(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gw(e,t,r){(t!=="number"||Xg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var f0=Array.isArray;function lf(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+xc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function yw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $E(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(jt(92));if(f0(r)){if(1<r.length)throw Error(jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xc(r)}}function oD(e,t){var r=xc(t.value),s=xc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ME(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nx,dD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nx=nx||document.createElement("div"),nx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Z0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var w0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QV=["Webkit","ms","Moz","O"];Object.keys(w0).forEach(function(e){QV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),w0[t]=w0[e]})});function uD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||w0.hasOwnProperty(e)&&w0[e]?(""+t).trim():t+"px"}function fD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=uD(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var eH=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bw(e,t){if(t){if(eH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function jw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _w=null;function Ek(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ww=null,of=null,cf=null;function BE(e){if(e=jp(e)){if(typeof ww!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=ob(t),ww(e.stateNode,e.type,t))}}function mD(e){of?cf?cf.push(e):cf=[e]:of=e}function hD(){if(of){var e=of,t=cf;if(cf=of=null,BE(e),t)for(e=0;e<t.length;e++)BE(t[e])}}function pD(e,t){return e(t)}function xD(){}var X1=!1;function gD(e,t,r){if(X1)return e(t,r);X1=!0;try{return pD(e,t,r)}finally{X1=!1,(of!==null||cf!==null)&&(xD(),hD())}}function Q0(e,t){var r=e.stateNode;if(r===null)return null;var s=ob(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(jt(231,t,typeof r));return r}var Nw=!1;if(uo)try{var Bm={};Object.defineProperty(Bm,"passive",{get:function(){Nw=!0}}),window.addEventListener("test",Bm,Bm),window.removeEventListener("test",Bm,Bm)}catch{Nw=!1}function tH(e,t,r,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var N0=!1,Yg=null,Zg=!1,kw=null,rH={onError:function(e){N0=!0,Yg=e}};function nH(e,t,r,s,a,i,l,o,c){N0=!1,Yg=null,tH.apply(rH,arguments)}function sH(e,t,r,s,a,i,l,o,c){if(nH.apply(this,arguments),N0){if(N0){var d=Yg;N0=!1,Yg=null}else throw Error(jt(198));Zg||(Zg=!0,kw=d)}}function Zd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function UE(e){if(Zd(e)!==e)throw Error(jt(188))}function aH(e){var t=e.alternate;if(!t){if(t=Zd(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return UE(a),e;if(i===s)return UE(a),t;i=i.sibling}throw Error(jt(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error(jt(189))}}if(r.alternate!==s)throw Error(jt(190))}if(r.tag!==3)throw Error(jt(188));return r.stateNode.current===r?e:t}function vD(e){return e=aH(e),e!==null?bD(e):null}function bD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bD(e);if(t!==null)return t;e=e.sibling}return null}var jD=Xa.unstable_scheduleCallback,zE=Xa.unstable_cancelCallback,iH=Xa.unstable_shouldYield,lH=Xa.unstable_requestPaint,Fn=Xa.unstable_now,oH=Xa.unstable_getCurrentPriorityLevel,Tk=Xa.unstable_ImmediatePriority,_D=Xa.unstable_UserBlockingPriority,Qg=Xa.unstable_NormalPriority,cH=Xa.unstable_LowPriority,wD=Xa.unstable_IdlePriority,sb=null,kl=null;function dH(e){if(kl&&typeof kl.onCommitFiberRoot=="function")try{kl.onCommitFiberRoot(sb,e,void 0,(e.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:mH,uH=Math.log,fH=Math.LN2;function mH(e){return e>>>=0,e===0?32:31-(uH(e)/fH|0)|0}var sx=64,ax=4194304;function m0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ey(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=m0(o):(i&=l,i!==0&&(s=m0(i)))}else l=r&~a,l!==0?s=m0(l):i!==0&&(s=m0(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Yi(t),a=1<<r,s|=e[r],t&=~a;return s}function hH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pH(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Yi(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&s)&&(a[l]=hH(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Sw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ND(){var e=sx;return sx<<=1,!(sx&4194240)&&(sx=64),e}function Y1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yi(t),e[t]=r}function xH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Yi(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function Pk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Yi(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Dr=0;function kD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var SD,Ok,CD,AD,ED,Cw=!1,ix=[],ic=null,lc=null,oc=null,eh=new Map,th=new Map,qo=[],gH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WE(e,t){switch(e){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":eh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(t.pointerId)}}function Um(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=jp(t),t!==null&&Ok(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function yH(e,t,r,s,a){switch(t){case"focusin":return ic=Um(ic,e,t,r,s,a),!0;case"dragenter":return lc=Um(lc,e,t,r,s,a),!0;case"mouseover":return oc=Um(oc,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return eh.set(i,Um(eh.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,th.set(i,Um(th.get(i)||null,e,t,r,s,a)),!0}return!1}function TD(e){var t=rd(e.target);if(t!==null){var r=Zd(t);if(r!==null){if(t=r.tag,t===13){if(t=yD(r),t!==null){e.blockedOn=t,ED(e.priority,function(){CD(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Aw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);_w=s,r.target.dispatchEvent(s),_w=null}else return t=jp(r),t!==null&&Ok(t),e.blockedOn=r,!1;t.shift()}return!0}function VE(e,t,r){Eg(e)&&r.delete(t)}function vH(){Cw=!1,ic!==null&&Eg(ic)&&(ic=null),lc!==null&&Eg(lc)&&(lc=null),oc!==null&&Eg(oc)&&(oc=null),eh.forEach(VE),th.forEach(VE)}function zm(e,t){e.blockedOn===t&&(e.blockedOn=null,Cw||(Cw=!0,Xa.unstable_scheduleCallback(Xa.unstable_NormalPriority,vH)))}function rh(e){function t(a){return zm(a,e)}if(0<ix.length){zm(ix[0],e);for(var r=1;r<ix.length;r++){var s=ix[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ic!==null&&zm(ic,e),lc!==null&&zm(lc,e),oc!==null&&zm(oc,e),eh.forEach(t),th.forEach(t),r=0;r<qo.length;r++)s=qo[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<qo.length&&(r=qo[0],r.blockedOn===null);)TD(r),r.blockedOn===null&&qo.shift()}var df=No.ReactCurrentBatchConfig,ty=!0;function bH(e,t,r,s){var a=Dr,i=df.transition;df.transition=null;try{Dr=1,Rk(e,t,r,s)}finally{Dr=a,df.transition=i}}function jH(e,t,r,s){var a=Dr,i=df.transition;df.transition=null;try{Dr=4,Rk(e,t,r,s)}finally{Dr=a,df.transition=i}}function Rk(e,t,r,s){if(ty){var a=Aw(e,t,r,s);if(a===null)lj(e,t,s,ry,r),WE(e,s);else if(yH(a,e,t,r,s))s.stopPropagation();else if(WE(e,s),t&4&&-1<gH.indexOf(e)){for(;a!==null;){var i=jp(a);if(i!==null&&SD(i),i=Aw(e,t,r,s),i===null&&lj(e,t,s,ry,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else lj(e,t,s,null,r)}}var ry=null;function Aw(e,t,r,s){if(ry=null,e=Ek(s),e=rd(e),e!==null)if(t=Zd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yD(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ry=e,null}function PD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oH()){case Tk:return 1;case _D:return 4;case Qg:case cH:return 16;case wD:return 536870912;default:return 16}default:return 16}}var Xo=null,Lk=null,Tg=null;function OD(){if(Tg)return Tg;var e,t=Lk,r=t.length,s,a="value"in Xo?Xo.value:Xo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[i-s];s++);return Tg=a.slice(e,1<s?1-s:void 0)}function Pg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lx(){return!0}function HE(){return!1}function ti(e){function t(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lx:HE,this.isPropagationStopped=HE,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lx)},persist:function(){},isPersistent:lx}),t}var pm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ik=ti(pm),bp=kn({},pm,{view:0,detail:0}),_H=ti(bp),Z1,Q1,Wm,ab=kn({},bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wm&&(Wm&&e.type==="mousemove"?(Z1=e.screenX-Wm.screenX,Q1=e.screenY-Wm.screenY):Q1=Z1=0,Wm=e),Z1)},movementY:function(e){return"movementY"in e?e.movementY:Q1}}),qE=ti(ab),wH=kn({},ab,{dataTransfer:0}),NH=ti(wH),kH=kn({},bp,{relatedTarget:0}),ej=ti(kH),SH=kn({},pm,{animationName:0,elapsedTime:0,pseudoElement:0}),CH=ti(SH),AH=kn({},pm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EH=ti(AH),TH=kn({},pm,{data:0}),GE=ti(TH),PH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RH[e])?!!t[e]:!1}function Fk(){return LH}var IH=kn({},bp,{key:function(e){if(e.key){var t=PH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fk,charCode:function(e){return e.type==="keypress"?Pg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FH=ti(IH),DH=kn({},ab,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JE=ti(DH),$H=kn({},bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fk}),MH=ti($H),BH=kn({},pm,{propertyName:0,elapsedTime:0,pseudoElement:0}),UH=ti(BH),zH=kn({},ab,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WH=ti(zH),VH=[9,13,27,32],Dk=uo&&"CompositionEvent"in window,k0=null;uo&&"documentMode"in document&&(k0=document.documentMode);var HH=uo&&"TextEvent"in window&&!k0,RD=uo&&(!Dk||k0&&8<k0&&11>=k0),KE=" ",XE=!1;function LD(e,t){switch(e){case"keyup":return VH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ID(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uu=!1;function qH(e,t){switch(e){case"compositionend":return ID(t);case"keypress":return t.which!==32?null:(XE=!0,KE);case"textInput":return e=t.data,e===KE&&XE?null:e;default:return null}}function GH(e,t){if(Uu)return e==="compositionend"||!Dk&&LD(e,t)?(e=OD(),Tg=Lk=Xo=null,Uu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RD&&t.locale!=="ko"?null:t.data;default:return null}}var JH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JH[e.type]:t==="textarea"}function FD(e,t,r,s){mD(s),t=ny(t,"onChange"),0<t.length&&(r=new Ik("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var S0=null,nh=null;function KH(e){GD(e,0)}function ib(e){var t=Vu(e);if(iD(t))return e}function XH(e,t){if(e==="change")return t}var DD=!1;if(uo){var tj;if(uo){var rj="oninput"in document;if(!rj){var ZE=document.createElement("div");ZE.setAttribute("oninput","return;"),rj=typeof ZE.oninput=="function"}tj=rj}else tj=!1;DD=tj&&(!document.documentMode||9<document.documentMode)}function QE(){S0&&(S0.detachEvent("onpropertychange",$D),nh=S0=null)}function $D(e){if(e.propertyName==="value"&&ib(nh)){var t=[];FD(t,nh,e,Ek(e)),gD(KH,t)}}function YH(e,t,r){e==="focusin"?(QE(),S0=t,nh=r,S0.attachEvent("onpropertychange",$D)):e==="focusout"&&QE()}function ZH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ib(nh)}function QH(e,t){if(e==="click")return ib(t)}function eq(e,t){if(e==="input"||e==="change")return ib(t)}function tq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nl=typeof Object.is=="function"?Object.is:tq;function sh(e,t){if(nl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!dw.call(t,a)||!nl(e[a],t[a]))return!1}return!0}function e3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function t3(e,t){var r=e3(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=e3(r)}}function MD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BD(){for(var e=window,t=Xg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Xg(e.document)}return t}function $k(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rq(e){var t=BD(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&MD(r.ownerDocument.documentElement,r)){if(s!==null&&$k(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=t3(r,i);var l=t3(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nq=uo&&"documentMode"in document&&11>=document.documentMode,zu=null,Ew=null,C0=null,Tw=!1;function r3(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Tw||zu==null||zu!==Xg(s)||(s=zu,"selectionStart"in s&&$k(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),C0&&sh(C0,s)||(C0=s,s=ny(Ew,"onSelect"),0<s.length&&(t=new Ik("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=zu)))}function ox(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wu={animationend:ox("Animation","AnimationEnd"),animationiteration:ox("Animation","AnimationIteration"),animationstart:ox("Animation","AnimationStart"),transitionend:ox("Transition","TransitionEnd")},nj={},UD={};uo&&(UD=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function lb(e){if(nj[e])return nj[e];if(!Wu[e])return e;var t=Wu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in UD)return nj[e]=t[r];return e}var zD=lb("animationend"),WD=lb("animationiteration"),VD=lb("animationstart"),HD=lb("transitionend"),qD=new Map,n3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wc(e,t){qD.set(e,t),Yd(t,[e])}for(var sj=0;sj<n3.length;sj++){var aj=n3[sj],sq=aj.toLowerCase(),aq=aj[0].toUpperCase()+aj.slice(1);wc(sq,"on"+aq)}wc(zD,"onAnimationEnd");wc(WD,"onAnimationIteration");wc(VD,"onAnimationStart");wc("dblclick","onDoubleClick");wc("focusin","onFocus");wc("focusout","onBlur");wc(HD,"onTransitionEnd");Nf("onMouseEnter",["mouseout","mouseover"]);Nf("onMouseLeave",["mouseout","mouseover"]);Nf("onPointerEnter",["pointerout","pointerover"]);Nf("onPointerLeave",["pointerout","pointerover"]);Yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var h0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iq=new Set("cancel close invalid load scroll toggle".split(" ").concat(h0));function s3(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,sH(s,t,void 0,e),e.currentTarget=null}function GD(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;s3(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;s3(a,o,d),i=c}}}if(Zg)throw e=kw,Zg=!1,kw=null,e}function rn(e,t){var r=t[Iw];r===void 0&&(r=t[Iw]=new Set);var s=e+"__bubble";r.has(s)||(JD(t,e,2,!1),r.add(s))}function ij(e,t,r){var s=0;t&&(s|=4),JD(r,e,s,t)}var cx="_reactListening"+Math.random().toString(36).slice(2);function ah(e){if(!e[cx]){e[cx]=!0,tD.forEach(function(r){r!=="selectionchange"&&(iq.has(r)||ij(r,!1,e),ij(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cx]||(t[cx]=!0,ij("selectionchange",!1,t))}}function JD(e,t,r,s){switch(PD(t)){case 1:var a=bH;break;case 4:a=jH;break;default:a=Rk}r=a.bind(null,t,r,e),a=void 0,!Nw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function lj(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=rd(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}gD(function(){var d=i,u=Ek(r),f=[];e:{var m=qD.get(e);if(m!==void 0){var g=Ik,x=e;switch(e){case"keypress":if(Pg(r)===0)break e;case"keydown":case"keyup":g=FH;break;case"focusin":x="focus",g=ej;break;case"focusout":x="blur",g=ej;break;case"beforeblur":case"afterblur":g=ej;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=NH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=MH;break;case zD:case WD:case VD:g=CH;break;case HD:g=UH;break;case"scroll":g=_H;break;case"wheel":g=WH;break;case"copy":case"cut":case"paste":g=EH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=JE}var h=(t&4)!==0,p=!h&&e==="scroll",v=h?m!==null?m+"Capture":null:m;h=[];for(var b=d,j;b!==null;){j=b;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,v!==null&&(N=Q0(b,v),N!=null&&h.push(ih(b,N,j)))),p)break;b=b.return}0<h.length&&(m=new g(m,x,null,r,u),f.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==_w&&(x=r.relatedTarget||r.fromElement)&&(rd(x)||x[fo]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=d,x=x?rd(x):null,x!==null&&(p=Zd(x),x!==p||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(h=qE,N="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(h=JE,N="onPointerLeave",v="onPointerEnter",b="pointer"),p=g==null?m:Vu(g),j=x==null?m:Vu(x),m=new h(N,b+"leave",g,r,u),m.target=p,m.relatedTarget=j,N=null,rd(u)===d&&(h=new h(v,b+"enter",x,r,u),h.target=j,h.relatedTarget=p,N=h),p=N,g&&x)t:{for(h=g,v=x,b=0,j=h;j;j=xu(j))b++;for(j=0,N=v;N;N=xu(N))j++;for(;0<b-j;)h=xu(h),b--;for(;0<j-b;)v=xu(v),j--;for(;b--;){if(h===v||v!==null&&h===v.alternate)break t;h=xu(h),v=xu(v)}h=null}else h=null;g!==null&&a3(f,m,g,h,!1),x!==null&&p!==null&&a3(f,p,x,h,!0)}}e:{if(m=d?Vu(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var w=XH;else if(YE(m))if(DD)w=eq;else{w=ZH;var _=YH}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=QH);if(w&&(w=w(e,d))){FD(f,w,r,u);break e}_&&_(e,m,d),e==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&gw(m,"number",m.value)}switch(_=d?Vu(d):window,e){case"focusin":(YE(_)||_.contentEditable==="true")&&(zu=_,Ew=d,C0=null);break;case"focusout":C0=Ew=zu=null;break;case"mousedown":Tw=!0;break;case"contextmenu":case"mouseup":case"dragend":Tw=!1,r3(f,r,u);break;case"selectionchange":if(nq)break;case"keydown":case"keyup":r3(f,r,u)}var k;if(Dk)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Uu?LD(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(RD&&r.locale!=="ko"&&(Uu||C!=="onCompositionStart"?C==="onCompositionEnd"&&Uu&&(k=OD()):(Xo=u,Lk="value"in Xo?Xo.value:Xo.textContent,Uu=!0)),_=ny(d,C),0<_.length&&(C=new GE(C,e,null,r,u),f.push({event:C,listeners:_}),k?C.data=k:(k=ID(r),k!==null&&(C.data=k)))),(k=HH?qH(e,r):GH(e,r))&&(d=ny(d,"onBeforeInput"),0<d.length&&(u=new GE("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=k))}GD(f,t)})}function ih(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ny(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Q0(e,r),i!=null&&s.unshift(ih(e,i,a)),i=Q0(e,t),i!=null&&s.push(ih(e,i,a))),e=e.return}return s}function xu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function a3(e,t,r,s,a){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=Q0(r,i),c!=null&&l.unshift(ih(r,c,o))):a||(c=Q0(r,i),c!=null&&l.push(ih(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var lq=/\r\n?/g,oq=/\u0000|\uFFFD/g;function i3(e){return(typeof e=="string"?e:""+e).replace(lq,`
`).replace(oq,"")}function dx(e,t,r){if(t=i3(t),i3(e)!==t&&r)throw Error(jt(425))}function sy(){}var Pw=null,Ow=null;function Rw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lw=typeof setTimeout=="function"?setTimeout:void 0,cq=typeof clearTimeout=="function"?clearTimeout:void 0,l3=typeof Promise=="function"?Promise:void 0,dq=typeof queueMicrotask=="function"?queueMicrotask:typeof l3<"u"?function(e){return l3.resolve(null).then(e).catch(uq)}:Lw;function uq(e){setTimeout(function(){throw e})}function oj(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),rh(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);rh(t)}function cc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function o3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xm=Math.random().toString(36).slice(2),jl="__reactFiber$"+xm,lh="__reactProps$"+xm,fo="__reactContainer$"+xm,Iw="__reactEvents$"+xm,fq="__reactListeners$"+xm,mq="__reactHandles$"+xm;function rd(e){var t=e[jl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fo]||r[jl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=o3(e);e!==null;){if(r=e[jl])return r;e=o3(e)}return t}e=r,r=e.parentNode}return null}function jp(e){return e=e[jl]||e[fo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function ob(e){return e[lh]||null}var Fw=[],Hu=-1;function Nc(e){return{current:e}}function dn(e){0>Hu||(e.current=Fw[Hu],Fw[Hu]=null,Hu--)}function Yr(e,t){Hu++,Fw[Hu]=e.current,e.current=t}var gc={},Zs=Nc(gc),ka=Nc(!1),Sd=gc;function kf(e,t){var r=e.type.contextTypes;if(!r)return gc;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Sa(e){return e=e.childContextTypes,e!=null}function ay(){dn(ka),dn(Zs)}function c3(e,t,r){if(Zs.current!==gc)throw Error(jt(168));Yr(Zs,t),Yr(ka,r)}function KD(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(jt(108,YV(e)||"Unknown",a));return kn({},r,s)}function iy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gc,Sd=Zs.current,Yr(Zs,e),Yr(ka,ka.current),!0}function d3(e,t,r){var s=e.stateNode;if(!s)throw Error(jt(169));r?(e=KD(e,t,Sd),s.__reactInternalMemoizedMergedChildContext=e,dn(ka),dn(Zs),Yr(Zs,e)):dn(ka),Yr(ka,r)}var Kl=null,cb=!1,cj=!1;function XD(e){Kl===null?Kl=[e]:Kl.push(e)}function hq(e){cb=!0,XD(e)}function kc(){if(!cj&&Kl!==null){cj=!0;var e=0,t=Dr;try{var r=Kl;for(Dr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Kl=null,cb=!1}catch(a){throw Kl!==null&&(Kl=Kl.slice(e+1)),jD(Tk,kc),a}finally{Dr=t,cj=!1}}return null}var qu=[],Gu=0,ly=null,oy=0,mi=[],hi=0,Cd=null,Yl=1,Zl="";function qc(e,t){qu[Gu++]=oy,qu[Gu++]=ly,ly=e,oy=t}function YD(e,t,r){mi[hi++]=Yl,mi[hi++]=Zl,mi[hi++]=Cd,Cd=e;var s=Yl;e=Zl;var a=32-Yi(s)-1;s&=~(1<<a),r+=1;var i=32-Yi(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Yl=1<<32-Yi(t)+a|r<<a|s,Zl=i+e}else Yl=1<<i|r<<a|s,Zl=e}function Mk(e){e.return!==null&&(qc(e,1),YD(e,1,0))}function Bk(e){for(;e===ly;)ly=qu[--Gu],qu[Gu]=null,oy=qu[--Gu],qu[Gu]=null;for(;e===Cd;)Cd=mi[--hi],mi[hi]=null,Zl=mi[--hi],mi[hi]=null,Yl=mi[--hi],mi[hi]=null}var Ha=null,Va=null,mn=!1,Vi=null;function ZD(e,t){var r=xi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function u3(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ha=e,Va=cc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ha=e,Va=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Cd!==null?{id:Yl,overflow:Zl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ha=e,Va=null,!0):!1;default:return!1}}function Dw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $w(e){if(mn){var t=Va;if(t){var r=t;if(!u3(e,t)){if(Dw(e))throw Error(jt(418));t=cc(r.nextSibling);var s=Ha;t&&u3(e,t)?ZD(s,r):(e.flags=e.flags&-4097|2,mn=!1,Ha=e)}}else{if(Dw(e))throw Error(jt(418));e.flags=e.flags&-4097|2,mn=!1,Ha=e}}}function f3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ha=e}function ux(e){if(e!==Ha)return!1;if(!mn)return f3(e),mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rw(e.type,e.memoizedProps)),t&&(t=Va)){if(Dw(e))throw QD(),Error(jt(418));for(;t;)ZD(e,t),t=cc(t.nextSibling)}if(f3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Va=cc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Va=null}}else Va=Ha?cc(e.stateNode.nextSibling):null;return!0}function QD(){for(var e=Va;e;)e=cc(e.nextSibling)}function Sf(){Va=Ha=null,mn=!1}function Uk(e){Vi===null?Vi=[e]:Vi.push(e)}var pq=No.ReactCurrentBatchConfig;function Vm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(jt(309));var s=r.stateNode}if(!s)throw Error(jt(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(jt(284));if(!r._owner)throw Error(jt(290,e))}return e}function fx(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function m3(e){var t=e._init;return t(e._payload)}function e$(e){function t(v,b){if(e){var j=v.deletions;j===null?(v.deletions=[b],v.flags|=16):j.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function a(v,b){return v=mc(v,b),v.index=0,v.sibling=null,v}function i(v,b,j){return v.index=j,e?(j=v.alternate,j!==null?(j=j.index,j<b?(v.flags|=2,b):j):(v.flags|=2,b)):(v.flags|=1048576,b)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,b,j,N){return b===null||b.tag!==6?(b=xj(j,v.mode,N),b.return=v,b):(b=a(b,j),b.return=v,b)}function c(v,b,j,N){var w=j.type;return w===Bu?u(v,b,j.props.children,N,j.key):b!==null&&(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wo&&m3(w)===b.type)?(N=a(b,j.props),N.ref=Vm(v,b,j),N.return=v,N):(N=$g(j.type,j.key,j.props,null,v.mode,N),N.ref=Vm(v,b,j),N.return=v,N)}function d(v,b,j,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=gj(j,v.mode,N),b.return=v,b):(b=a(b,j.children||[]),b.return=v,b)}function u(v,b,j,N,w){return b===null||b.tag!==7?(b=pd(j,v.mode,N,w),b.return=v,b):(b=a(b,j),b.return=v,b)}function f(v,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xj(""+b,v.mode,j),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tx:return j=$g(b.type,b.key,b.props,null,v.mode,j),j.ref=Vm(v,null,b),j.return=v,j;case Mu:return b=gj(b,v.mode,j),b.return=v,b;case Wo:var N=b._init;return f(v,N(b._payload),j)}if(f0(b)||Mm(b))return b=pd(b,v.mode,j,null),b.return=v,b;fx(v,b)}return null}function m(v,b,j,N){var w=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return w!==null?null:o(v,b,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case tx:return j.key===w?c(v,b,j,N):null;case Mu:return j.key===w?d(v,b,j,N):null;case Wo:return w=j._init,m(v,b,w(j._payload),N)}if(f0(j)||Mm(j))return w!==null?null:u(v,b,j,N,null);fx(v,j)}return null}function g(v,b,j,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(j)||null,o(b,v,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tx:return v=v.get(N.key===null?j:N.key)||null,c(b,v,N,w);case Mu:return v=v.get(N.key===null?j:N.key)||null,d(b,v,N,w);case Wo:var _=N._init;return g(v,b,j,_(N._payload),w)}if(f0(N)||Mm(N))return v=v.get(j)||null,u(b,v,N,w,null);fx(b,N)}return null}function x(v,b,j,N){for(var w=null,_=null,k=b,C=b=0,T=null;k!==null&&C<j.length;C++){k.index>C?(T=k,k=null):T=k.sibling;var P=m(v,k,j[C],N);if(P===null){k===null&&(k=T);break}e&&k&&P.alternate===null&&t(v,k),b=i(P,b,C),_===null?w=P:_.sibling=P,_=P,k=T}if(C===j.length)return r(v,k),mn&&qc(v,C),w;if(k===null){for(;C<j.length;C++)k=f(v,j[C],N),k!==null&&(b=i(k,b,C),_===null?w=k:_.sibling=k,_=k);return mn&&qc(v,C),w}for(k=s(v,k);C<j.length;C++)T=g(k,v,C,j[C],N),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?C:T.key),b=i(T,b,C),_===null?w=T:_.sibling=T,_=T);return e&&k.forEach(function(A){return t(v,A)}),mn&&qc(v,C),w}function h(v,b,j,N){var w=Mm(j);if(typeof w!="function")throw Error(jt(150));if(j=w.call(j),j==null)throw Error(jt(151));for(var _=w=null,k=b,C=b=0,T=null,P=j.next();k!==null&&!P.done;C++,P=j.next()){k.index>C?(T=k,k=null):T=k.sibling;var A=m(v,k,P.value,N);if(A===null){k===null&&(k=T);break}e&&k&&A.alternate===null&&t(v,k),b=i(A,b,C),_===null?w=A:_.sibling=A,_=A,k=T}if(P.done)return r(v,k),mn&&qc(v,C),w;if(k===null){for(;!P.done;C++,P=j.next())P=f(v,P.value,N),P!==null&&(b=i(P,b,C),_===null?w=P:_.sibling=P,_=P);return mn&&qc(v,C),w}for(k=s(v,k);!P.done;C++,P=j.next())P=g(k,v,C,P.value,N),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),b=i(P,b,C),_===null?w=P:_.sibling=P,_=P);return e&&k.forEach(function(S){return t(v,S)}),mn&&qc(v,C),w}function p(v,b,j,N){if(typeof j=="object"&&j!==null&&j.type===Bu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case tx:e:{for(var w=j.key,_=b;_!==null;){if(_.key===w){if(w=j.type,w===Bu){if(_.tag===7){r(v,_.sibling),b=a(_,j.props.children),b.return=v,v=b;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wo&&m3(w)===_.type){r(v,_.sibling),b=a(_,j.props),b.ref=Vm(v,_,j),b.return=v,v=b;break e}r(v,_);break}else t(v,_);_=_.sibling}j.type===Bu?(b=pd(j.props.children,v.mode,N,j.key),b.return=v,v=b):(N=$g(j.type,j.key,j.props,null,v.mode,N),N.ref=Vm(v,b,j),N.return=v,v=N)}return l(v);case Mu:e:{for(_=j.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){r(v,b.sibling),b=a(b,j.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=gj(j,v.mode,N),b.return=v,v=b}return l(v);case Wo:return _=j._init,p(v,b,_(j._payload),N)}if(f0(j))return x(v,b,j,N);if(Mm(j))return h(v,b,j,N);fx(v,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(r(v,b.sibling),b=a(b,j),b.return=v,v=b):(r(v,b),b=xj(j,v.mode,N),b.return=v,v=b),l(v)):r(v,b)}return p}var Cf=e$(!0),t$=e$(!1),cy=Nc(null),dy=null,Ju=null,zk=null;function Wk(){zk=Ju=dy=null}function Vk(e){var t=cy.current;dn(cy),e._currentValue=t}function Mw(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function uf(e,t){dy=e,zk=Ju=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wa=!0),e.firstContext=null)}function Ni(e){var t=e._currentValue;if(zk!==e)if(e={context:e,memoizedValue:t,next:null},Ju===null){if(dy===null)throw Error(jt(308));Ju=e,dy.dependencies={lanes:0,firstContext:e}}else Ju=Ju.next=e;return t}var nd=null;function Hk(e){nd===null?nd=[e]:nd.push(e)}function r$(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Hk(t)):(r.next=a.next,a.next=r),t.interleaved=r,mo(e,s)}function mo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vo=!1;function qk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function no(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dc(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Nr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,mo(e,r)}return a=s.interleaved,a===null?(t.next=t,Hk(s)):(t.next=a.next,a.next=t),s.interleaved=t,mo(e,r)}function Og(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Pk(e,r)}}function h3(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function uy(e,t,r,s){var a=e.updateQueue;Vo=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;l=0,u=d=c=null,o=i;do{var m=o.lane,g=o.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,h=o;switch(m=t,g=r,h.tag){case 1:if(x=h.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=h.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=kn({},f,m);break e;case 2:Vo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=g,c=f):u=u.next=g,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ed|=l,e.lanes=l,e.memoizedState=f}}function p3(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(jt(191,a));a.call(s)}}}var _p={},Sl=Nc(_p),oh=Nc(_p),ch=Nc(_p);function sd(e){if(e===_p)throw Error(jt(174));return e}function Gk(e,t){switch(Yr(ch,t),Yr(oh,e),Yr(Sl,_p),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vw(t,e)}dn(Sl),Yr(Sl,t)}function Af(){dn(Sl),dn(oh),dn(ch)}function s$(e){sd(ch.current);var t=sd(Sl.current),r=vw(t,e.type);t!==r&&(Yr(oh,e),Yr(Sl,r))}function Jk(e){oh.current===e&&(dn(Sl),dn(oh))}var bn=Nc(0);function fy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dj=[];function Kk(){for(var e=0;e<dj.length;e++)dj[e]._workInProgressVersionPrimary=null;dj.length=0}var Rg=No.ReactCurrentDispatcher,uj=No.ReactCurrentBatchConfig,Ad=0,wn=null,Zn=null,us=null,my=!1,A0=!1,dh=0,xq=0;function Rs(){throw Error(jt(321))}function Xk(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nl(e[r],t[r]))return!1;return!0}function Yk(e,t,r,s,a,i){if(Ad=i,wn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rg.current=e===null||e.memoizedState===null?bq:jq,e=r(s,a),A0){i=0;do{if(A0=!1,dh=0,25<=i)throw Error(jt(301));i+=1,us=Zn=null,t.updateQueue=null,Rg.current=_q,e=r(s,a)}while(A0)}if(Rg.current=hy,t=Zn!==null&&Zn.next!==null,Ad=0,us=Zn=wn=null,my=!1,t)throw Error(jt(300));return e}function Zk(){var e=dh!==0;return dh=0,e}function yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?wn.memoizedState=us=e:us=us.next=e,us}function ki(){if(Zn===null){var e=wn.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=us===null?wn.memoizedState:us.next;if(t!==null)us=t,Zn=e;else{if(e===null)throw Error(jt(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},us===null?wn.memoizedState=us=e:us=us.next=e}return us}function uh(e,t){return typeof t=="function"?t(e):t}function fj(e){var t=ki(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var s=Zn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Ad&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=f,l=s):c=c.next=f,wn.lanes|=u,Ed|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,nl(s,t.memoizedState)||(wa=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,wn.lanes|=i,Ed|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mj(e){var t=ki(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);nl(i,t.memoizedState)||(wa=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function a$(){}function i$(e,t){var r=wn,s=ki(),a=t(),i=!nl(s.memoizedState,a);if(i&&(s.memoizedState=a,wa=!0),s=s.queue,Qk(c$.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||us!==null&&us.memoizedState.tag&1){if(r.flags|=2048,fh(9,o$.bind(null,r,s,a,t),void 0,null),gs===null)throw Error(jt(349));Ad&30||l$(r,t,a)}return a}function l$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function o$(e,t,r,s){t.value=r,t.getSnapshot=s,d$(t)&&u$(e)}function c$(e,t,r){return r(function(){d$(t)&&u$(e)})}function d$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nl(e,r)}catch{return!0}}function u$(e){var t=mo(e,1);t!==null&&Zi(t,e,1,-1)}function x3(e){var t=yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:e},t.queue=e,e=e.dispatch=vq.bind(null,wn,e),[t.memoizedState,e]}function fh(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function f$(){return ki().memoizedState}function Lg(e,t,r,s){var a=yl();wn.flags|=e,a.memoizedState=fh(1|t,r,void 0,s===void 0?null:s)}function db(e,t,r,s){var a=ki();s=s===void 0?null:s;var i=void 0;if(Zn!==null){var l=Zn.memoizedState;if(i=l.destroy,s!==null&&Xk(s,l.deps)){a.memoizedState=fh(t,r,i,s);return}}wn.flags|=e,a.memoizedState=fh(1|t,r,i,s)}function g3(e,t){return Lg(8390656,8,e,t)}function Qk(e,t){return db(2048,8,e,t)}function m$(e,t){return db(4,2,e,t)}function h$(e,t){return db(4,4,e,t)}function p$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function x$(e,t,r){return r=r!=null?r.concat([e]):null,db(4,4,p$.bind(null,t,e),r)}function eS(){}function g$(e,t){var r=ki();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Xk(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function y$(e,t){var r=ki();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Xk(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function v$(e,t,r){return Ad&21?(nl(r,t)||(r=ND(),wn.lanes|=r,Ed|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=r)}function gq(e,t){var r=Dr;Dr=r!==0&&4>r?r:4,e(!0);var s=uj.transition;uj.transition={};try{e(!1),t()}finally{Dr=r,uj.transition=s}}function b$(){return ki().memoizedState}function yq(e,t,r){var s=fc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},j$(e))_$(t,r);else if(r=r$(e,t,r,s),r!==null){var a=ca();Zi(r,e,s,a),w$(r,t,s)}}function vq(e,t,r){var s=fc(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(j$(e))_$(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,nl(o,l)){var c=t.interleaved;c===null?(a.next=a,Hk(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=r$(e,t,a,s),r!==null&&(a=ca(),Zi(r,e,s,a),w$(r,t,s))}}function j$(e){var t=e.alternate;return e===wn||t!==null&&t===wn}function _$(e,t){A0=my=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function w$(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Pk(e,r)}}var hy={readContext:Ni,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useInsertionEffect:Rs,useLayoutEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useMutableSource:Rs,useSyncExternalStore:Rs,useId:Rs,unstable_isNewReconciler:!1},bq={readContext:Ni,useCallback:function(e,t){return yl().memoizedState=[e,t===void 0?null:t],e},useContext:Ni,useEffect:g3,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Lg(4194308,4,p$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Lg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lg(4,2,e,t)},useMemo:function(e,t){var r=yl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=yl();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=yq.bind(null,wn,e),[s.memoizedState,e]},useRef:function(e){var t=yl();return e={current:e},t.memoizedState=e},useState:x3,useDebugValue:eS,useDeferredValue:function(e){return yl().memoizedState=e},useTransition:function(){var e=x3(!1),t=e[0];return e=gq.bind(null,e[1]),yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=wn,a=yl();if(mn){if(r===void 0)throw Error(jt(407));r=r()}else{if(r=t(),gs===null)throw Error(jt(349));Ad&30||l$(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,g3(c$.bind(null,s,i,e),[e]),s.flags|=2048,fh(9,o$.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=yl(),t=gs.identifierPrefix;if(mn){var r=Zl,s=Yl;r=(s&~(1<<32-Yi(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=dh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=xq++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jq={readContext:Ni,useCallback:g$,useContext:Ni,useEffect:Qk,useImperativeHandle:x$,useInsertionEffect:m$,useLayoutEffect:h$,useMemo:y$,useReducer:fj,useRef:f$,useState:function(){return fj(uh)},useDebugValue:eS,useDeferredValue:function(e){var t=ki();return v$(t,Zn.memoizedState,e)},useTransition:function(){var e=fj(uh)[0],t=ki().memoizedState;return[e,t]},useMutableSource:a$,useSyncExternalStore:i$,useId:b$,unstable_isNewReconciler:!1},_q={readContext:Ni,useCallback:g$,useContext:Ni,useEffect:Qk,useImperativeHandle:x$,useInsertionEffect:m$,useLayoutEffect:h$,useMemo:y$,useReducer:mj,useRef:f$,useState:function(){return mj(uh)},useDebugValue:eS,useDeferredValue:function(e){var t=ki();return Zn===null?t.memoizedState=e:v$(t,Zn.memoizedState,e)},useTransition:function(){var e=mj(uh)[0],t=ki().memoizedState;return[e,t]},useMutableSource:a$,useSyncExternalStore:i$,useId:b$,unstable_isNewReconciler:!1};function Bi(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bw(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:kn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ub={isMounted:function(e){return(e=e._reactInternals)?Zd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ca(),a=fc(e),i=no(s,a);i.payload=t,r!=null&&(i.callback=r),t=dc(e,i,a),t!==null&&(Zi(t,e,a,s),Og(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ca(),a=fc(e),i=no(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=dc(e,i,a),t!==null&&(Zi(t,e,a,s),Og(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ca(),s=fc(e),a=no(r,s);a.tag=2,t!=null&&(a.callback=t),t=dc(e,a,s),t!==null&&(Zi(t,e,s,r),Og(t,e,s))}};function y3(e,t,r,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!sh(r,s)||!sh(a,i):!0}function N$(e,t,r){var s=!1,a=gc,i=t.contextType;return typeof i=="object"&&i!==null?i=Ni(i):(a=Sa(t)?Sd:Zs.current,s=t.contextTypes,i=(s=s!=null)?kf(e,a):gc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ub,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function v3(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&ub.enqueueReplaceState(t,t.state,null)}function Uw(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qk(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ni(i):(i=Sa(t)?Sd:Zs.current,a.context=kf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Bw(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ub.enqueueReplaceState(a,a.state,null),uy(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ef(e,t){try{var r="",s=t;do r+=XV(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function hj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function zw(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wq=typeof WeakMap=="function"?WeakMap:Map;function k$(e,t,r){r=no(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){xy||(xy=!0,Zw=s),zw(e,t)},r}function S$(e,t,r){r=no(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){zw(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){zw(e,t),typeof s!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function b3(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new wq;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Dq.bind(null,e,t,r),t.then(e,e))}function j3(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _3(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=no(-1,1),t.tag=2,dc(r,t,1))),r.lanes|=1),e)}var Nq=No.ReactCurrentOwner,wa=!1;function na(e,t,r,s){t.child=e===null?t$(t,null,r,s):Cf(t,e.child,r,s)}function w3(e,t,r,s,a){r=r.render;var i=t.ref;return uf(t,a),s=Yk(e,t,r,s,i,a),r=Zk(),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ho(e,t,a)):(mn&&r&&Mk(t),t.flags|=1,na(e,t,s,a),t.child)}function N3(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!oS(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,C$(e,t,i,s,a)):(e=$g(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:sh,r(l,s)&&e.ref===t.ref)return ho(e,t,a)}return t.flags|=1,e=mc(i,s),e.ref=t.ref,e.return=t,t.child=e}function C$(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(sh(i,s)&&e.ref===t.ref)if(wa=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(wa=!0);else return t.lanes=e.lanes,ho(e,t,a)}return Ww(e,t,r,s,a)}function A$(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(Xu,Da),Da|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yr(Xu,Da),Da|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Yr(Xu,Da),Da|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Yr(Xu,Da),Da|=s;return na(e,t,a,r),t.child}function E$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ww(e,t,r,s,a){var i=Sa(r)?Sd:Zs.current;return i=kf(t,i),uf(t,a),r=Yk(e,t,r,s,i,a),s=Zk(),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ho(e,t,a)):(mn&&s&&Mk(t),t.flags|=1,na(e,t,r,a),t.child)}function k3(e,t,r,s,a){if(Sa(r)){var i=!0;iy(t)}else i=!1;if(uf(t,a),t.stateNode===null)Ig(e,t),N$(t,r,s),Uw(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ni(d):(d=Sa(r)?Sd:Zs.current,d=kf(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&v3(t,l,s,d),Vo=!1;var m=t.memoizedState;l.state=m,uy(t,s,l,a),c=t.memoizedState,o!==s||m!==c||ka.current||Vo?(typeof u=="function"&&(Bw(t,r,u,s),c=t.memoizedState),(o=Vo||y3(t,r,o,s,m,c,d))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,n$(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Bi(t.type,o),l.props=d,f=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ni(c):(c=Sa(r)?Sd:Zs.current,c=kf(t,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||m!==c)&&v3(t,l,s,c),Vo=!1,m=t.memoizedState,l.state=m,uy(t,s,l,a);var x=t.memoizedState;o!==f||m!==x||ka.current||Vo?(typeof g=="function"&&(Bw(t,r,g,s),x=t.memoizedState),(d=Vo||y3(t,r,d,s,m,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,x,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),l.props=s,l.state=x,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Vw(e,t,r,s,i,a)}function Vw(e,t,r,s,a,i){E$(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&d3(t,r,!1),ho(e,t,i);s=t.stateNode,Nq.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Cf(t,e.child,null,i),t.child=Cf(t,null,o,i)):na(e,t,o,i),t.memoizedState=s.state,a&&d3(t,r,!0),t.child}function T$(e){var t=e.stateNode;t.pendingContext?c3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&c3(e,t.context,!1),Gk(e,t.containerInfo)}function S3(e,t,r,s,a){return Sf(),Uk(a),t.flags|=256,na(e,t,r,s),t.child}var Hw={dehydrated:null,treeContext:null,retryLane:0};function qw(e){return{baseLanes:e,cachePool:null,transitions:null}}function P$(e,t,r){var s=t.pendingProps,a=bn.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Yr(bn,a&1),e===null)return $w(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=hb(l,s,0,null),e=pd(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=qw(r),t.memoizedState=Hw,e):tS(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return kq(e,t,l,s,o,a,r);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=mc(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=mc(o,i):(i=pd(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?qw(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Hw,s}return i=e.child,e=i.sibling,s=mc(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function tS(e,t){return t=hb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mx(e,t,r,s){return s!==null&&Uk(s),Cf(t,e.child,null,r),e=tS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kq(e,t,r,s,a,i,l){if(r)return t.flags&256?(t.flags&=-257,s=hj(Error(jt(422))),mx(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=hb({mode:"visible",children:s.children},a,0,null),i=pd(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Cf(t,e.child,null,l),t.child.memoizedState=qw(l),t.memoizedState=Hw,i);if(!(t.mode&1))return mx(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(jt(419)),s=hj(i,s,void 0),mx(e,t,l,s)}if(o=(l&e.childLanes)!==0,wa||o){if(s=gs,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,mo(e,a),Zi(s,e,a,-1))}return lS(),s=hj(Error(jt(421))),mx(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=$q.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Va=cc(a.nextSibling),Ha=t,mn=!0,Vi=null,e!==null&&(mi[hi++]=Yl,mi[hi++]=Zl,mi[hi++]=Cd,Yl=e.id,Zl=e.overflow,Cd=t),t=tS(t,s.children),t.flags|=4096,t)}function C3(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Mw(e.return,t,r)}function pj(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function O$(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(na(e,t,s.children,r),s=bn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&C3(e,r,t);else if(e.tag===19)C3(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Yr(bn,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&fy(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),pj(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&fy(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}pj(t,!0,r,null,i);break;case"together":pj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ig(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ho(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ed|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,r=mc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Sq(e,t,r){switch(t.tag){case 3:T$(t),Sf();break;case 5:s$(t);break;case 1:Sa(t.type)&&iy(t);break;case 4:Gk(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Yr(cy,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Yr(bn,bn.current&1),t.flags|=128,null):r&t.child.childLanes?P$(e,t,r):(Yr(bn,bn.current&1),e=ho(e,t,r),e!==null?e.sibling:null);Yr(bn,bn.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return O$(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Yr(bn,bn.current),s)break;return null;case 22:case 23:return t.lanes=0,A$(e,t,r)}return ho(e,t,r)}var R$,Gw,L$,I$;R$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gw=function(){};L$=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,sd(Sl.current);var i=null;switch(r){case"input":a=pw(e,a),s=pw(e,s),i=[];break;case"select":a=kn({},a,{value:void 0}),s=kn({},s,{value:void 0}),i=[];break;case"textarea":a=yw(e,a),s=yw(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=sy)}bw(r,s);var l;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Y0.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Y0.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&rn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};I$=function(e,t,r,s){r!==s&&(t.flags|=4)};function Hm(e,t){if(!mn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ls(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Cq(e,t,r){var s=t.pendingProps;switch(Bk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(t),null;case 1:return Sa(t.type)&&ay(),Ls(t),null;case 3:return s=t.stateNode,Af(),dn(ka),dn(Zs),Kk(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ux(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vi!==null&&(tN(Vi),Vi=null))),Gw(e,t),Ls(t),null;case 5:Jk(t);var a=sd(ch.current);if(r=t.type,e!==null&&t.stateNode!=null)L$(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(jt(166));return Ls(t),null}if(e=sd(Sl.current),ux(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[jl]=t,s[lh]=i,e=(t.mode&1)!==0,r){case"dialog":rn("cancel",s),rn("close",s);break;case"iframe":case"object":case"embed":rn("load",s);break;case"video":case"audio":for(a=0;a<h0.length;a++)rn(h0[a],s);break;case"source":rn("error",s);break;case"img":case"image":case"link":rn("error",s),rn("load",s);break;case"details":rn("toggle",s);break;case"input":FE(s,i),rn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},rn("invalid",s);break;case"textarea":$E(s,i),rn("invalid",s)}bw(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&dx(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&dx(s.textContent,o,e),a=["children",""+o]):Y0.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&rn("scroll",s)}switch(r){case"input":rx(s),DE(s,i,!0);break;case"textarea":rx(s),ME(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=sy)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[jl]=t,e[lh]=s,R$(e,t,!1,!1),t.stateNode=e;e:{switch(l=jw(r,s),r){case"dialog":rn("cancel",e),rn("close",e),a=s;break;case"iframe":case"object":case"embed":rn("load",e),a=s;break;case"video":case"audio":for(a=0;a<h0.length;a++)rn(h0[a],e);a=s;break;case"source":rn("error",e),a=s;break;case"img":case"image":case"link":rn("error",e),rn("load",e),a=s;break;case"details":rn("toggle",e),a=s;break;case"input":FE(e,s),a=pw(e,s),rn("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=kn({},s,{value:void 0}),rn("invalid",e);break;case"textarea":$E(e,s),a=yw(e,s),rn("invalid",e);break;default:a=s}bw(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?fD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dD(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Z0(e,c):typeof c=="number"&&Z0(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Y0.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rn("scroll",e):c!=null&&kk(e,i,c,l))}switch(r){case"input":rx(e),DE(e,s,!1);break;case"textarea":rx(e),ME(e);break;case"option":s.value!=null&&e.setAttribute("value",""+xc(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?lf(e,!!s.multiple,i,!1):s.defaultValue!=null&&lf(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=sy)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ls(t),null;case 6:if(e&&t.stateNode!=null)I$(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(jt(166));if(r=sd(ch.current),sd(Sl.current),ux(t)){if(s=t.stateNode,r=t.memoizedProps,s[jl]=t,(i=s.nodeValue!==r)&&(e=Ha,e!==null))switch(e.tag){case 3:dx(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dx(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[jl]=t,t.stateNode=s}return Ls(t),null;case 13:if(dn(bn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mn&&Va!==null&&t.mode&1&&!(t.flags&128))QD(),Sf(),t.flags|=98560,i=!1;else if(i=ux(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(jt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(jt(317));i[jl]=t}else Sf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ls(t),i=!1}else Vi!==null&&(tN(Vi),Vi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||bn.current&1?rs===0&&(rs=3):lS())),t.updateQueue!==null&&(t.flags|=4),Ls(t),null);case 4:return Af(),Gw(e,t),e===null&&ah(t.stateNode.containerInfo),Ls(t),null;case 10:return Vk(t.type._context),Ls(t),null;case 17:return Sa(t.type)&&ay(),Ls(t),null;case 19:if(dn(bn),i=t.memoizedState,i===null)return Ls(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)Hm(i,!1);else{if(rs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=fy(e),l!==null){for(t.flags|=128,Hm(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Yr(bn,bn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fn()>Tf&&(t.flags|=128,s=!0,Hm(i,!1),t.lanes=4194304)}else{if(!s)if(e=fy(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!mn)return Ls(t),null}else 2*Fn()-i.renderingStartTime>Tf&&r!==1073741824&&(t.flags|=128,s=!0,Hm(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fn(),t.sibling=null,r=bn.current,Yr(bn,s?r&1|2:r&1),t):(Ls(t),null);case 22:case 23:return iS(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Da&1073741824&&(Ls(t),t.subtreeFlags&6&&(t.flags|=8192)):Ls(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function Aq(e,t){switch(Bk(t),t.tag){case 1:return Sa(t.type)&&ay(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Af(),dn(ka),dn(Zs),Kk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jk(t),null;case 13:if(dn(bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));Sf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dn(bn),null;case 4:return Af(),null;case 10:return Vk(t.type._context),null;case 22:case 23:return iS(),null;case 24:return null;default:return null}}var hx=!1,Us=!1,Eq=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Ku(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){An(e,t,s)}else r.current=null}function Jw(e,t,r){try{r()}catch(s){An(e,t,s)}}var A3=!1;function Tq(e,t){if(Pw=ty,e=BD(),$k(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var g;f!==r||a!==0&&f.nodeType!==3||(o=l+a),f!==i||s!==0&&f.nodeType!==3||(c=l+s),f.nodeType===3&&(l+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===e)break t;if(m===r&&++d===a&&(o=l),m===i&&++u===s&&(c=l),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ow={focusedElem:e,selectionRange:r},ty=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var h=x.memoizedProps,p=x.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?h:Bi(t.type,h),p);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(N){An(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return x=A3,A3=!1,x}function E0(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Jw(t,r,i)}a=a.next}while(a!==s)}}function fb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Kw(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function F$(e){var t=e.alternate;t!==null&&(e.alternate=null,F$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jl],delete t[lh],delete t[Iw],delete t[fq],delete t[mq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function D$(e){return e.tag===5||e.tag===3||e.tag===4}function E3(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=sy));else if(s!==4&&(e=e.child,e!==null))for(Xw(e,t,r),e=e.sibling;e!==null;)Xw(e,t,r),e=e.sibling}function Yw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Yw(e,t,r),e=e.sibling;e!==null;)Yw(e,t,r),e=e.sibling}var ks=null,Ui=!1;function Ro(e,t,r){for(r=r.child;r!==null;)$$(e,t,r),r=r.sibling}function $$(e,t,r){if(kl&&typeof kl.onCommitFiberUnmount=="function")try{kl.onCommitFiberUnmount(sb,r)}catch{}switch(r.tag){case 5:Us||Ku(r,t);case 6:var s=ks,a=Ui;ks=null,Ro(e,t,r),ks=s,Ui=a,ks!==null&&(Ui?(e=ks,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ks.removeChild(r.stateNode));break;case 18:ks!==null&&(Ui?(e=ks,r=r.stateNode,e.nodeType===8?oj(e.parentNode,r):e.nodeType===1&&oj(e,r),rh(e)):oj(ks,r.stateNode));break;case 4:s=ks,a=Ui,ks=r.stateNode.containerInfo,Ui=!0,Ro(e,t,r),ks=s,Ui=a;break;case 0:case 11:case 14:case 15:if(!Us&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Jw(r,t,l),a=a.next}while(a!==s)}Ro(e,t,r);break;case 1:if(!Us&&(Ku(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){An(r,t,o)}Ro(e,t,r);break;case 21:Ro(e,t,r);break;case 22:r.mode&1?(Us=(s=Us)||r.memoizedState!==null,Ro(e,t,r),Us=s):Ro(e,t,r);break;default:Ro(e,t,r)}}function T3(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Eq),t.forEach(function(s){var a=Mq.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Ri(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:ks=o.stateNode,Ui=!1;break e;case 3:ks=o.stateNode.containerInfo,Ui=!0;break e;case 4:ks=o.stateNode.containerInfo,Ui=!0;break e}o=o.return}if(ks===null)throw Error(jt(160));$$(i,l,a),ks=null,Ui=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){An(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M$(t,e),t=t.sibling}function M$(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ri(t,e),ul(e),s&4){try{E0(3,e,e.return),fb(3,e)}catch(h){An(e,e.return,h)}try{E0(5,e,e.return)}catch(h){An(e,e.return,h)}}break;case 1:Ri(t,e),ul(e),s&512&&r!==null&&Ku(r,r.return);break;case 5:if(Ri(t,e),ul(e),s&512&&r!==null&&Ku(r,r.return),e.flags&32){var a=e.stateNode;try{Z0(a,"")}catch(h){An(e,e.return,h)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&lD(a,i),jw(o,l);var d=jw(o,i);for(l=0;l<c.length;l+=2){var u=c[l],f=c[l+1];u==="style"?fD(a,f):u==="dangerouslySetInnerHTML"?dD(a,f):u==="children"?Z0(a,f):kk(a,u,f,d)}switch(o){case"input":xw(a,i);break;case"textarea":oD(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?lf(a,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?lf(a,!!i.multiple,i.defaultValue,!0):lf(a,!!i.multiple,i.multiple?[]:"",!1))}a[lh]=i}catch(h){An(e,e.return,h)}}break;case 6:if(Ri(t,e),ul(e),s&4){if(e.stateNode===null)throw Error(jt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(h){An(e,e.return,h)}}break;case 3:if(Ri(t,e),ul(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{rh(t.containerInfo)}catch(h){An(e,e.return,h)}break;case 4:Ri(t,e),ul(e);break;case 13:Ri(t,e),ul(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(sS=Fn())),s&4&&T3(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Us=(d=Us)||u,Ri(t,e),Us=d):Ri(t,e),ul(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ot=e,u=e.child;u!==null;){for(f=Ot=u;Ot!==null;){switch(m=Ot,g=m.child,m.tag){case 0:case 11:case 14:case 15:E0(4,m,m.return);break;case 1:Ku(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(h){An(s,r,h)}}break;case 5:Ku(m,m.return);break;case 22:if(m.memoizedState!==null){O3(f);continue}}g!==null?(g.return=m,Ot=g):O3(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=uD("display",l))}catch(h){An(e,e.return,h)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(h){An(e,e.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ri(t,e),ul(e),s&4&&T3(e);break;case 21:break;default:Ri(t,e),ul(e)}}function ul(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(D$(r)){var s=r;break e}r=r.return}throw Error(jt(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Z0(a,""),s.flags&=-33);var i=E3(e);Yw(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=E3(e);Xw(e,o,l);break;default:throw Error(jt(161))}}catch(c){An(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pq(e,t,r){Ot=e,B$(e)}function B$(e,t,r){for(var s=(e.mode&1)!==0;Ot!==null;){var a=Ot,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||hx;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Us;o=hx;var d=Us;if(hx=l,(Us=c)&&!d)for(Ot=a;Ot!==null;)l=Ot,c=l.child,l.tag===22&&l.memoizedState!==null?R3(a):c!==null?(c.return=l,Ot=c):R3(a);for(;i!==null;)Ot=i,B$(i),i=i.sibling;Ot=a,hx=o,Us=d}P3(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ot=i):P3(e)}}function P3(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Us||fb(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Us)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Bi(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&p3(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}p3(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&rh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}Us||t.flags&512&&Kw(t)}catch(m){An(t,t.return,m)}}if(t===e){Ot=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function O3(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function R3(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fb(4,t)}catch(c){An(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){An(t,a,c)}}var i=t.return;try{Kw(t)}catch(c){An(t,i,c)}break;case 5:var l=t.return;try{Kw(t)}catch(c){An(t,l,c)}}}catch(c){An(t,t.return,c)}if(t===e){Ot=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ot=o;break}Ot=t.return}}var Oq=Math.ceil,py=No.ReactCurrentDispatcher,rS=No.ReactCurrentOwner,_i=No.ReactCurrentBatchConfig,Nr=0,gs=null,qn=null,Es=0,Da=0,Xu=Nc(0),rs=0,mh=null,Ed=0,mb=0,nS=0,T0=null,_a=null,sS=0,Tf=1/0,Gl=null,xy=!1,Zw=null,uc=null,px=!1,Yo=null,gy=0,P0=0,Qw=null,Fg=-1,Dg=0;function ca(){return Nr&6?Fn():Fg!==-1?Fg:Fg=Fn()}function fc(e){return e.mode&1?Nr&2&&Es!==0?Es&-Es:pq.transition!==null?(Dg===0&&(Dg=ND()),Dg):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:PD(e.type)),e):1}function Zi(e,t,r,s){if(50<P0)throw P0=0,Qw=null,Error(jt(185));vp(e,r,s),(!(Nr&2)||e!==gs)&&(e===gs&&(!(Nr&2)&&(mb|=r),rs===4&&Go(e,Es)),Ca(e,s),r===1&&Nr===0&&!(t.mode&1)&&(Tf=Fn()+500,cb&&kc()))}function Ca(e,t){var r=e.callbackNode;pH(e,t);var s=ey(e,e===gs?Es:0);if(s===0)r!==null&&zE(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&zE(r),t===1)e.tag===0?hq(L3.bind(null,e)):XD(L3.bind(null,e)),dq(function(){!(Nr&6)&&kc()}),r=null;else{switch(kD(s)){case 1:r=Tk;break;case 4:r=_D;break;case 16:r=Qg;break;case 536870912:r=wD;break;default:r=Qg}r=J$(r,U$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function U$(e,t){if(Fg=-1,Dg=0,Nr&6)throw Error(jt(327));var r=e.callbackNode;if(ff()&&e.callbackNode!==r)return null;var s=ey(e,e===gs?Es:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=yy(e,s);else{t=s;var a=Nr;Nr|=2;var i=W$();(gs!==e||Es!==t)&&(Gl=null,Tf=Fn()+500,hd(e,t));do try{Iq();break}catch(o){z$(e,o)}while(!0);Wk(),py.current=i,Nr=a,qn!==null?t=0:(gs=null,Es=0,t=rs)}if(t!==0){if(t===2&&(a=Sw(e),a!==0&&(s=a,t=eN(e,a))),t===1)throw r=mh,hd(e,0),Go(e,s),Ca(e,Fn()),r;if(t===6)Go(e,s);else{if(a=e.current.alternate,!(s&30)&&!Rq(a)&&(t=yy(e,s),t===2&&(i=Sw(e),i!==0&&(s=i,t=eN(e,i))),t===1))throw r=mh,hd(e,0),Go(e,s),Ca(e,Fn()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(jt(345));case 2:Gc(e,_a,Gl);break;case 3:if(Go(e,s),(s&130023424)===s&&(t=sS+500-Fn(),10<t)){if(ey(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ca(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Lw(Gc.bind(null,e,_a,Gl),t);break}Gc(e,_a,Gl);break;case 4:if(Go(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-Yi(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=Fn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Oq(s/1960))-s,10<s){e.timeoutHandle=Lw(Gc.bind(null,e,_a,Gl),s);break}Gc(e,_a,Gl);break;case 5:Gc(e,_a,Gl);break;default:throw Error(jt(329))}}}return Ca(e,Fn()),e.callbackNode===r?U$.bind(null,e):null}function eN(e,t){var r=T0;return e.current.memoizedState.isDehydrated&&(hd(e,t).flags|=256),e=yy(e,t),e!==2&&(t=_a,_a=r,t!==null&&tN(t)),e}function tN(e){_a===null?_a=e:_a.push.apply(_a,e)}function Rq(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!nl(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t){for(t&=~nS,t&=~mb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Yi(t),s=1<<r;e[r]=-1,t&=~s}}function L3(e){if(Nr&6)throw Error(jt(327));ff();var t=ey(e,0);if(!(t&1))return Ca(e,Fn()),null;var r=yy(e,t);if(e.tag!==0&&r===2){var s=Sw(e);s!==0&&(t=s,r=eN(e,s))}if(r===1)throw r=mh,hd(e,0),Go(e,t),Ca(e,Fn()),r;if(r===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gc(e,_a,Gl),Ca(e,Fn()),null}function aS(e,t){var r=Nr;Nr|=1;try{return e(t)}finally{Nr=r,Nr===0&&(Tf=Fn()+500,cb&&kc())}}function Td(e){Yo!==null&&Yo.tag===0&&!(Nr&6)&&ff();var t=Nr;Nr|=1;var r=_i.transition,s=Dr;try{if(_i.transition=null,Dr=1,e)return e()}finally{Dr=s,_i.transition=r,Nr=t,!(Nr&6)&&kc()}}function iS(){Da=Xu.current,dn(Xu)}function hd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cq(r)),qn!==null)for(r=qn.return;r!==null;){var s=r;switch(Bk(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ay();break;case 3:Af(),dn(ka),dn(Zs),Kk();break;case 5:Jk(s);break;case 4:Af();break;case 13:dn(bn);break;case 19:dn(bn);break;case 10:Vk(s.type._context);break;case 22:case 23:iS()}r=r.return}if(gs=e,qn=e=mc(e.current,null),Es=Da=t,rs=0,mh=null,nS=mb=Ed=0,_a=T0=null,nd!==null){for(t=0;t<nd.length;t++)if(r=nd[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}nd=null}return e}function z$(e,t){do{var r=qn;try{if(Wk(),Rg.current=hy,my){for(var s=wn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}my=!1}if(Ad=0,us=Zn=wn=null,A0=!1,dh=0,rS.current=null,r===null||r.return===null){rs=1,mh=t,qn=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Es,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=j3(l);if(g!==null){g.flags&=-257,_3(g,l,o,i,t),g.mode&1&&b3(i,d,t),t=g,c=d;var x=t.updateQueue;if(x===null){var h=new Set;h.add(c),t.updateQueue=h}else x.add(c);break e}else{if(!(t&1)){b3(i,d,t),lS();break e}c=Error(jt(426))}}else if(mn&&o.mode&1){var p=j3(l);if(p!==null){!(p.flags&65536)&&(p.flags|=256),_3(p,l,o,i,t),Uk(Ef(c,o));break e}}i=c=Ef(c,o),rs!==4&&(rs=2),T0===null?T0=[i]:T0.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=k$(i,c,t);h3(i,v);break e;case 1:o=c;var b=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(uc===null||!uc.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=S$(i,o,t);h3(i,N);break e}}i=i.return}while(i!==null)}H$(r)}catch(w){t=w,qn===r&&r!==null&&(qn=r=r.return);continue}break}while(!0)}function W$(){var e=py.current;return py.current=hy,e===null?hy:e}function lS(){(rs===0||rs===3||rs===2)&&(rs=4),gs===null||!(Ed&268435455)&&!(mb&268435455)||Go(gs,Es)}function yy(e,t){var r=Nr;Nr|=2;var s=W$();(gs!==e||Es!==t)&&(Gl=null,hd(e,t));do try{Lq();break}catch(a){z$(e,a)}while(!0);if(Wk(),Nr=r,py.current=s,qn!==null)throw Error(jt(261));return gs=null,Es=0,rs}function Lq(){for(;qn!==null;)V$(qn)}function Iq(){for(;qn!==null&&!iH();)V$(qn)}function V$(e){var t=G$(e.alternate,e,Da);e.memoizedProps=e.pendingProps,t===null?H$(e):qn=t,rS.current=null}function H$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Aq(r,t),r!==null){r.flags&=32767,qn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rs=6,qn=null;return}}else if(r=Cq(r,t,Da),r!==null){qn=r;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);rs===0&&(rs=5)}function Gc(e,t,r){var s=Dr,a=_i.transition;try{_i.transition=null,Dr=1,Fq(e,t,r,s)}finally{_i.transition=a,Dr=s}return null}function Fq(e,t,r,s){do ff();while(Yo!==null);if(Nr&6)throw Error(jt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(xH(e,i),e===gs&&(qn=gs=null,Es=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||px||(px=!0,J$(Qg,function(){return ff(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_i.transition,_i.transition=null;var l=Dr;Dr=1;var o=Nr;Nr|=4,rS.current=null,Tq(e,r),M$(r,e),rq(Ow),ty=!!Pw,Ow=Pw=null,e.current=r,Pq(r),lH(),Nr=o,Dr=l,_i.transition=i}else e.current=r;if(px&&(px=!1,Yo=e,gy=a),i=e.pendingLanes,i===0&&(uc=null),dH(r.stateNode),Ca(e,Fn()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(xy)throw xy=!1,e=Zw,Zw=null,e;return gy&1&&e.tag!==0&&ff(),i=e.pendingLanes,i&1?e===Qw?P0++:(P0=0,Qw=e):P0=0,kc(),null}function ff(){if(Yo!==null){var e=kD(gy),t=_i.transition,r=Dr;try{if(_i.transition=null,Dr=16>e?16:e,Yo===null)var s=!1;else{if(e=Yo,Yo=null,gy=0,Nr&6)throw Error(jt(331));var a=Nr;for(Nr|=4,Ot=e.current;Ot!==null;){var i=Ot,l=i.child;if(Ot.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ot=d;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:E0(8,u,i)}var f=u.child;if(f!==null)f.return=u,Ot=f;else for(;Ot!==null;){u=Ot;var m=u.sibling,g=u.return;if(F$(u),u===d){Ot=null;break}if(m!==null){m.return=g,Ot=m;break}Ot=g}}}var x=i.alternate;if(x!==null){var h=x.child;if(h!==null){x.child=null;do{var p=h.sibling;h.sibling=null,h=p}while(h!==null)}}Ot=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Ot=l;else e:for(;Ot!==null;){if(i=Ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:E0(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ot=v;break e}Ot=i.return}}var b=e.current;for(Ot=b;Ot!==null;){l=Ot;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,Ot=j;else e:for(l=b;Ot!==null;){if(o=Ot,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fb(9,o)}}catch(w){An(o,o.return,w)}if(o===l){Ot=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Ot=N;break e}Ot=o.return}}if(Nr=a,kc(),kl&&typeof kl.onPostCommitFiberRoot=="function")try{kl.onPostCommitFiberRoot(sb,e)}catch{}s=!0}return s}finally{Dr=r,_i.transition=t}}return!1}function I3(e,t,r){t=Ef(r,t),t=k$(e,t,1),e=dc(e,t,1),t=ca(),e!==null&&(vp(e,1,t),Ca(e,t))}function An(e,t,r){if(e.tag===3)I3(e,e,r);else for(;t!==null;){if(t.tag===3){I3(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(uc===null||!uc.has(s))){e=Ef(r,e),e=S$(t,e,1),t=dc(t,e,1),e=ca(),t!==null&&(vp(t,1,e),Ca(t,e));break}}t=t.return}}function Dq(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ca(),e.pingedLanes|=e.suspendedLanes&r,gs===e&&(Es&r)===r&&(rs===4||rs===3&&(Es&130023424)===Es&&500>Fn()-sS?hd(e,0):nS|=r),Ca(e,t)}function q$(e,t){t===0&&(e.mode&1?(t=ax,ax<<=1,!(ax&130023424)&&(ax=4194304)):t=1);var r=ca();e=mo(e,t),e!==null&&(vp(e,t,r),Ca(e,r))}function $q(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),q$(e,r)}function Mq(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(jt(314))}s!==null&&s.delete(t),q$(e,r)}var G$;G$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ka.current)wa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wa=!1,Sq(e,t,r);wa=!!(e.flags&131072)}else wa=!1,mn&&t.flags&1048576&&YD(t,oy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ig(e,t),e=t.pendingProps;var a=kf(t,Zs.current);uf(t,r),a=Yk(null,t,s,e,a,r);var i=Zk();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sa(s)?(i=!0,iy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qk(t),a.updater=ub,t.stateNode=a,a._reactInternals=t,Uw(t,s,e,r),t=Vw(null,t,s,!0,i,r)):(t.tag=0,mn&&i&&Mk(t),na(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ig(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Uq(s),e=Bi(s,e),a){case 0:t=Ww(null,t,s,e,r);break e;case 1:t=k3(null,t,s,e,r);break e;case 11:t=w3(null,t,s,e,r);break e;case 14:t=N3(null,t,s,Bi(s.type,e),r);break e}throw Error(jt(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bi(s,a),Ww(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bi(s,a),k3(e,t,s,a,r);case 3:e:{if(T$(t),e===null)throw Error(jt(387));s=t.pendingProps,i=t.memoizedState,a=i.element,n$(e,t),uy(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ef(Error(jt(423)),t),t=S3(e,t,s,r,a);break e}else if(s!==a){a=Ef(Error(jt(424)),t),t=S3(e,t,s,r,a);break e}else for(Va=cc(t.stateNode.containerInfo.firstChild),Ha=t,mn=!0,Vi=null,r=t$(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sf(),s===a){t=ho(e,t,r);break e}na(e,t,s,r)}t=t.child}return t;case 5:return s$(t),e===null&&$w(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Rw(s,a)?l=null:i!==null&&Rw(s,i)&&(t.flags|=32),E$(e,t),na(e,t,l,r),t.child;case 6:return e===null&&$w(t),null;case 13:return P$(e,t,r);case 4:return Gk(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Cf(t,null,s,r):na(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bi(s,a),w3(e,t,s,a,r);case 7:return na(e,t,t.pendingProps,r),t.child;case 8:return na(e,t,t.pendingProps.children,r),t.child;case 12:return na(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Yr(cy,s._currentValue),s._currentValue=l,i!==null)if(nl(i.value,l)){if(i.children===a.children&&!ka.current){t=ho(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=no(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Mw(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(jt(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Mw(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}na(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,uf(t,r),a=Ni(a),s=s(a),t.flags|=1,na(e,t,s,r),t.child;case 14:return s=t.type,a=Bi(s,t.pendingProps),a=Bi(s.type,a),N3(e,t,s,a,r);case 15:return C$(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bi(s,a),Ig(e,t),t.tag=1,Sa(s)?(e=!0,iy(t)):e=!1,uf(t,r),N$(t,s,a),Uw(t,s,a,r),Vw(null,t,s,!0,e,r);case 19:return O$(e,t,r);case 22:return A$(e,t,r)}throw Error(jt(156,t.tag))};function J$(e,t){return jD(e,t)}function Bq(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(e,t,r,s){return new Bq(e,t,r,s)}function oS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uq(e){if(typeof e=="function")return oS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ck)return 11;if(e===Ak)return 14}return 2}function mc(e,t){var r=e.alternate;return r===null?(r=xi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $g(e,t,r,s,a,i){var l=2;if(s=e,typeof e=="function")oS(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Bu:return pd(r.children,a,i,t);case Sk:l=8,a|=8;break;case uw:return e=xi(12,r,t,a|2),e.elementType=uw,e.lanes=i,e;case fw:return e=xi(13,r,t,a),e.elementType=fw,e.lanes=i,e;case mw:return e=xi(19,r,t,a),e.elementType=mw,e.lanes=i,e;case sD:return hb(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rD:l=10;break e;case nD:l=9;break e;case Ck:l=11;break e;case Ak:l=14;break e;case Wo:l=16,s=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=xi(l,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function pd(e,t,r,s){return e=xi(7,e,s,t),e.lanes=r,e}function hb(e,t,r,s){return e=xi(22,e,s,t),e.elementType=sD,e.lanes=r,e.stateNode={isHidden:!1},e}function xj(e,t,r){return e=xi(6,e,null,t),e.lanes=r,e}function gj(e,t,r){return t=xi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zq(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y1(0),this.expirationTimes=Y1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y1(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cS(e,t,r,s,a,i,l,o,c){return e=new zq(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qk(i),e}function Wq(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mu,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function K$(e){if(!e)return gc;e=e._reactInternals;e:{if(Zd(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var r=e.type;if(Sa(r))return KD(e,r,t)}return t}function X$(e,t,r,s,a,i,l,o,c){return e=cS(r,s,!0,e,a,i,l,o,c),e.context=K$(null),r=e.current,s=ca(),a=fc(r),i=no(s,a),i.callback=t??null,dc(r,i,a),e.current.lanes=a,vp(e,a,s),Ca(e,s),e}function pb(e,t,r,s){var a=t.current,i=ca(),l=fc(a);return r=K$(r),t.context===null?t.context=r:t.pendingContext=r,t=no(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=dc(a,t,l),e!==null&&(Zi(e,a,l,i),Og(e,a,l)),l}function vy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function F3(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function dS(e,t){F3(e,t),(e=e.alternate)&&F3(e,t)}function Vq(){return null}var Y$=typeof reportError=="function"?reportError:function(e){console.error(e)};function uS(e){this._internalRoot=e}xb.prototype.render=uS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));pb(e,t,null,null)};xb.prototype.unmount=uS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Td(function(){pb(null,e,null,null)}),t[fo]=null}};function xb(e){this._internalRoot=e}xb.prototype.unstable_scheduleHydration=function(e){if(e){var t=AD();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qo.length&&t!==0&&t<qo[r].priority;r++);qo.splice(r,0,e),r===0&&TD(e)}};function fS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function D3(){}function Hq(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=vy(l);i.call(d)}}var l=X$(t,s,e,0,null,!1,!1,"",D3);return e._reactRootContainer=l,e[fo]=l.current,ah(e.nodeType===8?e.parentNode:e),Td(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=vy(c);o.call(d)}}var c=cS(e,0,!1,null,null,!1,!1,"",D3);return e._reactRootContainer=c,e[fo]=c.current,ah(e.nodeType===8?e.parentNode:e),Td(function(){pb(t,c,r,s)}),c}function yb(e,t,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=vy(l);o.call(c)}}pb(t,l,e,a)}else l=Hq(r,t,e,a,s);return vy(l)}SD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=m0(t.pendingLanes);r!==0&&(Pk(t,r|1),Ca(t,Fn()),!(Nr&6)&&(Tf=Fn()+500,kc()))}break;case 13:Td(function(){var s=mo(e,1);if(s!==null){var a=ca();Zi(s,e,1,a)}}),dS(e,1)}};Ok=function(e){if(e.tag===13){var t=mo(e,134217728);if(t!==null){var r=ca();Zi(t,e,134217728,r)}dS(e,134217728)}};CD=function(e){if(e.tag===13){var t=fc(e),r=mo(e,t);if(r!==null){var s=ca();Zi(r,e,t,s)}dS(e,t)}};AD=function(){return Dr};ED=function(e,t){var r=Dr;try{return Dr=e,t()}finally{Dr=r}};ww=function(e,t,r){switch(t){case"input":if(xw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=ob(s);if(!a)throw Error(jt(90));iD(s),xw(s,a)}}}break;case"textarea":oD(e,r);break;case"select":t=r.value,t!=null&&lf(e,!!r.multiple,t,!1)}};pD=aS;xD=Td;var qq={usingClientEntryPoint:!1,Events:[jp,Vu,ob,mD,hD,aS]},qm={findFiberByHostInstance:rd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gq={bundleType:qm.bundleType,version:qm.version,rendererPackageName:qm.rendererPackageName,rendererConfig:qm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vD(e),e===null?null:e.stateNode},findFiberByHostInstance:qm.findFiberByHostInstance||Vq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xx.isDisabled&&xx.supportsFiber)try{sb=xx.inject(Gq),kl=xx}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qq;ei.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fS(t))throw Error(jt(200));return Wq(e,t,null,r)};ei.createRoot=function(e,t){if(!fS(e))throw Error(jt(299));var r=!1,s="",a=Y$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=cS(e,1,!1,null,null,r,!1,s,a),e[fo]=t.current,ah(e.nodeType===8?e.parentNode:e),new uS(t)};ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=vD(t),e=e===null?null:e.stateNode,e};ei.flushSync=function(e){return Td(e)};ei.hydrate=function(e,t,r){if(!gb(t))throw Error(jt(200));return yb(null,e,t,!0,r)};ei.hydrateRoot=function(e,t,r){if(!fS(e))throw Error(jt(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=Y$;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=X$(t,null,e,1,r??null,a,!1,i,l),e[fo]=t.current,ah(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new xb(t)};ei.render=function(e,t,r){if(!gb(t))throw Error(jt(200));return yb(null,e,t,!1,r)};ei.unmountComponentAtNode=function(e){if(!gb(e))throw Error(jt(40));return e._reactRootContainer?(Td(function(){yb(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0):!1};ei.unstable_batchedUpdates=aS;ei.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!gb(r))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return yb(e,t,r,!1,s)};ei.version="18.3.1-next-f1338f8080-20240426";function Z$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z$)}catch(e){console.error(e)}}Z$(),ZF.exports=ei;var Jq=ZF.exports,Q$,$3=Jq;Q$=$3.createRoot,$3.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hh.apply(this,arguments)}var Zo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zo||(Zo={}));const M3="popstate";function Kq(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:l,hash:o}=s.location;return rN("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:by(a)}return Yq(t,r,null,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function e8(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xq(){return Math.random().toString(36).substr(2,8)}function B3(e,t){return{usr:e.state,key:e.key,idx:t}}function rN(e,t,r,s){return r===void 0&&(r=null),hh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gm(t):t,{state:r,key:t&&t.key||s||Xq()})}function by(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function gm(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Yq(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,o=Zo.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(hh({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function f(){o=Zo.Pop;let p=u(),v=p==null?null:p-d;d=p,c&&c({action:o,location:h.location,delta:v})}function m(p,v){o=Zo.Push;let b=rN(h.location,p,v);d=u()+1;let j=B3(b,d),N=h.createHref(b);try{l.pushState(j,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(N)}i&&c&&c({action:o,location:h.location,delta:1})}function g(p,v){o=Zo.Replace;let b=rN(h.location,p,v);d=u();let j=B3(b,d),N=h.createHref(b);l.replaceState(j,"",N),i&&c&&c({action:o,location:h.location,delta:0})}function x(p){let v=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof p=="string"?p:by(p);return b=b.replace(/ $/,"%20"),Nn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let h={get action(){return o},get location(){return e(a,l)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(M3,f),c=p,()=>{a.removeEventListener(M3,f),c=null}},createHref(p){return t(a,p)},createURL:x,encodeLocation(p){let v=x(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(p){return l.go(p)}};return h}var U3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U3||(U3={}));function Zq(e,t,r){return r===void 0&&(r="/"),Qq(e,t,r)}function Qq(e,t,r,s){let a=typeof t=="string"?gm(t):t,i=Pf(a.pathname||"/",r);if(i==null)return null;let l=t8(e);eG(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=uG(i);o=cG(l[c],d)}return o}function t8(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Nn(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=hc([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Nn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),t8(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:lG(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of r8(i.path))a(i,l,c)}),t}function r8(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=r8(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function eG(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:oG(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const tG=/^:[\w-]+$/,rG=3,nG=2,sG=1,aG=10,iG=-2,z3=e=>e==="*";function lG(e,t){let r=e.split("/"),s=r.length;return r.some(z3)&&(s+=iG),t&&(s+=nG),r.filter(a=>!z3(a)).reduce((a,i)=>a+(tG.test(i)?rG:i===""?sG:aG),s)}function oG(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function cG(e,t,r){let{routesMeta:s}=e,a={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=nN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!f)return null;Object.assign(a,f.params),l.push({params:a,pathname:hc([i,f.pathname]),pathnameBase:pG(hc([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=hc([i,f.pathnameBase]))}return l}function nN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=dG(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((d,u,f)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let h=o[f]||"";l=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const x=o[f];return g&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function dG(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),e8(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function uG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return e8(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Pf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function fG(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?gm(e):e;return{pathname:r?r.startsWith("/")?r:mG(r,t):t,search:xG(s),hash:gG(a)}}function mG(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function yj(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function mS(e,t){let r=hG(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function hS(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=gm(e):(a=hh({},e),Nn(!a.pathname||!a.pathname.includes("?"),yj("?","pathname","search",a)),Nn(!a.pathname||!a.pathname.includes("#"),yj("#","pathname","hash",a)),Nn(!a.search||!a.search.includes("#"),yj("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let f=t.length-1;if(!s&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}o=f>=0?t[f]:"/"}let c=fG(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const hc=e=>e.join("/").replace(/\/\/+/g,"/"),pG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gG=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const n8=["post","put","patch","delete"];new Set(n8);const vG=["get",...n8];new Set(vG);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ph.apply(this,arguments)}const vb=y.createContext(null),s8=y.createContext(null),ko=y.createContext(null),bb=y.createContext(null),Fl=y.createContext({outlet:null,matches:[],isDataRoute:!1}),a8=y.createContext(null);function bG(e,t){let{relative:r}=t===void 0?{}:t;ym()||Nn(!1);let{basename:s,navigator:a}=y.useContext(ko),{hash:i,pathname:l,search:o}=jb(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:hc([s,l])),a.createHref({pathname:c,search:o,hash:i})}function ym(){return y.useContext(bb)!=null}function ys(){return ym()||Nn(!1),y.useContext(bb).location}function i8(e){y.useContext(ko).static||y.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=y.useContext(Fl);return e?IG():jG()}function jG(){ym()||Nn(!1);let e=y.useContext(vb),{basename:t,future:r,navigator:s}=y.useContext(ko),{matches:a}=y.useContext(Fl),{pathname:i}=ys(),l=JSON.stringify(mS(a,r.v7_relativeSplatPath)),o=y.useRef(!1);return i8(()=>{o.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let f=hS(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:hc([t,f.pathname])),(u.replace?s.replace:s.push)(f,u.state,u)},[t,s,l,i,e])}const _G=y.createContext(null);function wG(e){let t=y.useContext(Fl).outlet;return t&&y.createElement(_G.Provider,{value:e},t)}function Or(){let{matches:e}=y.useContext(Fl),t=e[e.length-1];return t?t.params:{}}function jb(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=y.useContext(ko),{matches:a}=y.useContext(Fl),{pathname:i}=ys(),l=JSON.stringify(mS(a,s.v7_relativeSplatPath));return y.useMemo(()=>hS(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function NG(e,t){return kG(e,t)}function kG(e,t,r,s){ym()||Nn(!1);let{navigator:a}=y.useContext(ko),{matches:i}=y.useContext(Fl),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=ys(),u;if(t){var f;let p=typeof t=="string"?gm(t):t;c==="/"||(f=p.pathname)!=null&&f.startsWith(c)||Nn(!1),u=p}else u=d;let m=u.pathname||"/",g=m;if(c!=="/"){let p=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(p.length).join("/")}let x=Zq(e,{pathname:g}),h=TG(x&&x.map(p=>Object.assign({},p,{params:Object.assign({},o,p.params),pathname:hc([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:hc([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,s);return t&&h?y.createElement(bb.Provider,{value:{location:ph({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zo.Pop}},h):h}function SG(){let e=LG(),t=yG(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,null)}const CG=y.createElement(SG,null);class AG extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(Fl.Provider,{value:this.props.routeContext},y.createElement(a8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EG(e){let{routeContext:t,match:r,children:s}=e,a=y.useContext(vb);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(Fl.Provider,{value:t},s)}function TG(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let u=l.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||Nn(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let f=l[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:g}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,f,m)=>{let g,x=!1,h=null,p=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,h=f.route.errorElement||CG,c&&(d<0&&m===0?(FG("route-fallback"),x=!0,p=null):d===m&&(x=!0,p=f.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,m+1)),b=()=>{let j;return g?j=h:x?j=p:f.route.Component?j=y.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=u,y.createElement(EG,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:j})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(AG,{location:r.location,revalidation:r.revalidation,component:h,error:g,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var l8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(l8||{}),o8=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(o8||{});function PG(e){let t=y.useContext(vb);return t||Nn(!1),t}function OG(e){let t=y.useContext(s8);return t||Nn(!1),t}function RG(e){let t=y.useContext(Fl);return t||Nn(!1),t}function c8(e){let t=RG(),r=t.matches[t.matches.length-1];return r.route.id||Nn(!1),r.route.id}function LG(){var e;let t=y.useContext(a8),r=OG(),s=c8();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function IG(){let{router:e}=PG(l8.UseNavigateStable),t=c8(o8.UseNavigateStable),r=y.useRef(!1);return i8(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ph({fromRouteId:t},i)))},[e,t])}const W3={};function FG(e,t,r){W3[e]||(W3[e]=!0)}function DG(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Bn(e){let{to:t,replace:r,state:s,relative:a}=e;ym()||Nn(!1);let{future:i,static:l}=y.useContext(ko),{matches:o}=y.useContext(Fl),{pathname:c}=ys(),d=Tt(),u=hS(t,mS(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(u);return y.useEffect(()=>d(JSON.parse(f),{replace:r,state:s,relative:a}),[d,f,a,r,s]),null}function po(e){return wG(e.context)}function Ae(e){Nn(!1)}function $G(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Zo.Pop,navigator:i,static:l=!1,future:o}=e;ym()&&Nn(!1);let c=t.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:i,static:l,future:ph({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof s=="string"&&(s=gm(s));let{pathname:u="/",search:f="",hash:m="",state:g=null,key:x="default"}=s,h=y.useMemo(()=>{let p=Pf(u,c);return p==null?null:{location:{pathname:p,search:f,hash:m,state:g,key:x},navigationType:a}},[c,u,f,m,g,x,a]);return h==null?null:y.createElement(ko.Provider,{value:d},y.createElement(bb.Provider,{children:r,value:h}))}function Lo(e){let{children:t,location:r}=e;return NG(sN(t),r)}new Promise(()=>{});function sN(e,t){t===void 0&&(t=[]);let r=[];return y.Children.forEach(e,(s,a)=>{if(!y.isValidElement(s))return;let i=[...t,a];if(s.type===y.Fragment){r.push.apply(r,sN(s.props.children,i));return}s.type!==Ae&&Nn(!1),!s.props.index||!s.props.children||Nn(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=sN(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jy.apply(this,arguments)}function d8(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function MG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BG(e,t){return e.button===0&&(!t||t==="_self")&&!MG(e)}function aN(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function UG(e,t){let r=aN(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const zG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WG=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],VG="6";try{window.__reactRouterVersion=VG}catch{}const HG=y.createContext({isTransitioning:!1}),qG="startTransition",V3=DV[qG];function Io(e){let{basename:t,children:r,future:s,window:a}=e,i=y.useRef();i.current==null&&(i.current=Kq({window:a,v5Compat:!0}));let l=i.current,[o,c]=y.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=y.useCallback(f=>{d&&V3?V3(()=>c(f)):c(f)},[c,d]);return y.useLayoutEffect(()=>l.listen(u),[l,u]),y.useEffect(()=>DG(s),[s]),y.createElement($G,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const GG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wr=y.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,m=d8(t,zG),{basename:g}=y.useContext(ko),x,h=!1;if(typeof d=="string"&&JG.test(d)&&(x=d,GG))try{let j=new URL(window.location.href),N=d.startsWith("//")?new URL(j.protocol+d):new URL(d),w=Pf(N.pathname,g);N.origin===j.origin&&w!=null?d=w+N.search+N.hash:h=!0}catch{}let p=bG(d,{relative:a}),v=XG(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:f});function b(j){s&&s(j),j.defaultPrevented||v(j)}return y.createElement("a",jy({},m,{href:x||p,onClick:h||i?s:b,ref:r,target:c}))}),cr=y.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:d,children:u}=t,f=d8(t,WG),m=jb(c,{relative:f.relative}),g=ys(),x=y.useContext(s8),{navigator:h,basename:p}=y.useContext(ko),v=x!=null&&YG(m)&&d===!0,b=h.encodeLocation?h.encodeLocation(m).pathname:m.pathname,j=g.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(j=j.toLowerCase(),N=N?N.toLowerCase():null,b=b.toLowerCase()),N&&p&&(N=Pf(N,p)||N);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=j===b||!l&&j.startsWith(b)&&j.charAt(w)==="/",k=N!=null&&(N===b||!l&&N.startsWith(b)&&N.charAt(b.length)==="/"),C={isActive:_,isPending:k,isTransitioning:v},T=_?s:void 0,P;typeof i=="function"?P=i(C):P=[i,_?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(C):o;return y.createElement(wr,jy({},f,{"aria-current":T,className:P,ref:r,style:A,to:c,viewTransition:d}),typeof u=="function"?u(C):u)});var iN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(iN||(iN={}));var H3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(H3||(H3={}));function KG(e){let t=y.useContext(vb);return t||Nn(!1),t}function XG(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Tt(),d=ys(),u=jb(e,{relative:l});return y.useCallback(f=>{if(BG(f,r)){f.preventDefault();let m=s!==void 0?s:by(d)===by(u);c(e,{replace:m,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,r,e,i,l,o])}function ea(e){let t=y.useRef(aN(e)),r=y.useRef(!1),s=ys(),a=y.useMemo(()=>UG(s.search,r.current?null:t.current),[s.search]),i=Tt(),l=y.useCallback((o,c)=>{const d=aN(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function YG(e,t){t===void 0&&(t={});let r=y.useContext(HG);r==null&&Nn(!1);let{basename:s}=KG(iN.useViewTransitionState),a=jb(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Pf(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=Pf(r.nextLocation.pathname,s)||r.nextLocation.pathname;return nN(a.pathname,l)!=null||nN(a.pathname,i)!=null}function u8(e,t){return function(){return e.apply(t,arguments)}}const{toString:ZG}=Object.prototype,{getPrototypeOf:pS}=Object,{iterator:_b,toStringTag:f8}=Symbol,wb=(e=>t=>{const r=ZG.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),cl=e=>(e=e.toLowerCase(),t=>wb(t)===e),Nb=e=>t=>typeof t===e,{isArray:vm}=Array,Of=Nb("undefined");function wp(e){return e!==null&&!Of(e)&&e.constructor!==null&&!Of(e.constructor)&&Aa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m8=cl("ArrayBuffer");function QG(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&m8(e.buffer),t}const eJ=Nb("string"),Aa=Nb("function"),h8=Nb("number"),Np=e=>e!==null&&typeof e=="object",tJ=e=>e===!0||e===!1,Mg=e=>{if(wb(e)!=="object")return!1;const t=pS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(f8 in e)&&!(_b in e)},rJ=e=>{if(!Np(e)||wp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},nJ=cl("Date"),sJ=cl("File"),aJ=cl("Blob"),iJ=cl("FileList"),lJ=e=>Np(e)&&Aa(e.pipe),oJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Aa(e.append)&&((t=wb(e))==="formdata"||t==="object"&&Aa(e.toString)&&e.toString()==="[object FormData]"))},cJ=cl("URLSearchParams"),[dJ,uJ,fJ,mJ]=["ReadableStream","Request","Response","Headers"].map(cl),hJ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),vm(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(wp(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function p8(e,t){if(wp(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const ad=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,x8=e=>!Of(e)&&e!==ad;function lN(){const{caseless:e,skipUndefined:t}=x8(this)&&this||{},r={},s=(a,i)=>{const l=e&&p8(r,i)||i;Mg(r[l])&&Mg(a)?r[l]=lN(r[l],a):Mg(a)?r[l]=lN({},a):vm(a)?r[l]=a.slice():(!t||!Of(a))&&(r[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&kp(arguments[a],s);return r}const pJ=(e,t,r,{allOwnKeys:s}={})=>(kp(t,(a,i)=>{r&&Aa(a)?e[i]=u8(a,r):e[i]=a},{allOwnKeys:s}),e),xJ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),gJ=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},yJ=(e,t,r,s)=>{let a,i,l;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&pS(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},vJ=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},bJ=e=>{if(!e)return null;if(vm(e))return e;let t=e.length;if(!h8(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},jJ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&pS(Uint8Array)),_J=(e,t)=>{const s=(e&&e[_b]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},wJ=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},NJ=cl("HTMLFormElement"),kJ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),q3=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),SJ=cl("RegExp"),g8=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};kp(r,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(s[i]=l||a)}),Object.defineProperties(e,s)},CJ=e=>{g8(e,(t,r)=>{if(Aa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Aa(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},AJ=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return vm(e)?s(e):s(String(e).split(t)),r},EJ=()=>{},TJ=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function PJ(e){return!!(e&&Aa(e.append)&&e[f8]==="FormData"&&e[_b])}const OJ=e=>{const t=new Array(10),r=(s,a)=>{if(Np(s)){if(t.indexOf(s)>=0)return;if(wp(s))return s;if(!("toJSON"in s)){t[a]=s;const i=vm(s)?[]:{};return kp(s,(l,o)=>{const c=r(l,a+1);!Of(c)&&(i[o]=c)}),t[a]=void 0,i}}return s};return r(e,0)},RJ=cl("AsyncFunction"),LJ=e=>e&&(Np(e)||Aa(e))&&Aa(e.then)&&Aa(e.catch),y8=((e,t)=>e?setImmediate:t?((r,s)=>(ad.addEventListener("message",({source:a,data:i})=>{a===ad&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),ad.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Aa(ad.postMessage)),IJ=typeof queueMicrotask<"u"?queueMicrotask.bind(ad):typeof process<"u"&&process.nextTick||y8,FJ=e=>e!=null&&Aa(e[_b]),Ze={isArray:vm,isArrayBuffer:m8,isBuffer:wp,isFormData:oJ,isArrayBufferView:QG,isString:eJ,isNumber:h8,isBoolean:tJ,isObject:Np,isPlainObject:Mg,isEmptyObject:rJ,isReadableStream:dJ,isRequest:uJ,isResponse:fJ,isHeaders:mJ,isUndefined:Of,isDate:nJ,isFile:sJ,isBlob:aJ,isRegExp:SJ,isFunction:Aa,isStream:lJ,isURLSearchParams:cJ,isTypedArray:jJ,isFileList:iJ,forEach:kp,merge:lN,extend:pJ,trim:hJ,stripBOM:xJ,inherits:gJ,toFlatObject:yJ,kindOf:wb,kindOfTest:cl,endsWith:vJ,toArray:bJ,forEachEntry:_J,matchAll:wJ,isHTMLForm:NJ,hasOwnProperty:q3,hasOwnProp:q3,reduceDescriptors:g8,freezeMethods:CJ,toObjectSet:AJ,toCamelCase:kJ,noop:EJ,toFiniteNumber:TJ,findKey:p8,global:ad,isContextDefined:x8,isSpecCompliantForm:PJ,toJSONObject:OJ,isAsyncFn:RJ,isThenable:LJ,setImmediate:y8,asap:IJ,isIterable:FJ};function dr(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}Ze.inherits(dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ze.toJSONObject(this.config),code:this.code,status:this.status}}});const v8=dr.prototype,b8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{b8[e]={value:e}});Object.defineProperties(dr,b8);Object.defineProperty(v8,"isAxiosError",{value:!0});dr.from=(e,t,r,s,a,i)=>{const l=Object.create(v8);Ze.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return dr.call(l,o,c,r,s,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const DJ=null;function oN(e){return Ze.isPlainObject(e)||Ze.isArray(e)}function j8(e){return Ze.endsWith(e,"[]")?e.slice(0,-2):e}function G3(e,t,r){return e?e.concat(t).map(function(a,i){return a=j8(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function $J(e){return Ze.isArray(e)&&!e.some(oN)}const MJ=Ze.toFlatObject(Ze,{},null,function(t){return/^is[A-Z]/.test(t)});function kb(e,t,r){if(!Ze.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ze.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,p){return!Ze.isUndefined(p[h])});const s=r.metaTokens,a=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Ze.isSpecCompliantForm(t);if(!Ze.isFunction(a))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(Ze.isDate(x))return x.toISOString();if(Ze.isBoolean(x))return x.toString();if(!c&&Ze.isBlob(x))throw new dr("Blob is not supported. Use a Buffer instead.");return Ze.isArrayBuffer(x)||Ze.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,h,p){let v=x;if(x&&!p&&typeof x=="object"){if(Ze.endsWith(h,"{}"))h=s?h:h.slice(0,-2),x=JSON.stringify(x);else if(Ze.isArray(x)&&$J(x)||(Ze.isFileList(x)||Ze.endsWith(h,"[]"))&&(v=Ze.toArray(x)))return h=j8(h),v.forEach(function(j,N){!(Ze.isUndefined(j)||j===null)&&t.append(l===!0?G3([h],N,i):l===null?h:h+"[]",d(j))}),!1}return oN(x)?!0:(t.append(G3(p,h,i),d(x)),!1)}const f=[],m=Object.assign(MJ,{defaultVisitor:u,convertValue:d,isVisitable:oN});function g(x,h){if(!Ze.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+h.join("."));f.push(x),Ze.forEach(x,function(v,b){(!(Ze.isUndefined(v)||v===null)&&a.call(t,v,Ze.isString(b)?b.trim():b,h,m))===!0&&g(v,h?h.concat(b):[b])}),f.pop()}}if(!Ze.isObject(e))throw new TypeError("data must be an object");return g(e),t}function J3(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function xS(e,t){this._pairs=[],e&&kb(e,this,t)}const _8=xS.prototype;_8.append=function(t,r){this._pairs.push([t,r])};_8.toString=function(t){const r=t?function(s){return t.call(this,s,J3)}:J3;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function BJ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function w8(e,t,r){if(!t)return e;const s=r&&r.encode||BJ;Ze.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=Ze.isURLSearchParams(t)?t.toString():new xS(t,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class K3{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ze.forEach(this.handlers,function(s){s!==null&&t(s)})}}const N8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UJ=typeof URLSearchParams<"u"?URLSearchParams:xS,zJ=typeof FormData<"u"?FormData:null,WJ=typeof Blob<"u"?Blob:null,VJ={isBrowser:!0,classes:{URLSearchParams:UJ,FormData:zJ,Blob:WJ},protocols:["http","https","file","blob","url","data"]},gS=typeof window<"u"&&typeof document<"u",cN=typeof navigator=="object"&&navigator||void 0,HJ=gS&&(!cN||["ReactNative","NativeScript","NS"].indexOf(cN.product)<0),qJ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GJ=gS&&window.location.href||"http://localhost",JJ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gS,hasStandardBrowserEnv:HJ,hasStandardBrowserWebWorkerEnv:qJ,navigator:cN,origin:GJ},Symbol.toStringTag,{value:"Module"})),qs={...JJ,...VJ};function KJ(e,t){return kb(e,new qs.classes.URLSearchParams,{visitor:function(r,s,a,i){return qs.isNode&&Ze.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function XJ(e){return Ze.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function YJ(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function k8(e){function t(r,s,a,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&Ze.isArray(a)?a.length:l,c?(Ze.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!o):((!a[l]||!Ze.isObject(a[l]))&&(a[l]=[]),t(r,s,a[l],i)&&Ze.isArray(a[l])&&(a[l]=YJ(a[l])),!o)}if(Ze.isFormData(e)&&Ze.isFunction(e.entries)){const r={};return Ze.forEachEntry(e,(s,a)=>{t(XJ(s),a,r,0)}),r}return null}function ZJ(e,t,r){if(Ze.isString(e))try{return(t||JSON.parse)(e),Ze.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Sp={transitional:N8,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=Ze.isObject(t);if(i&&Ze.isHTMLForm(t)&&(t=new FormData(t)),Ze.isFormData(t))return a?JSON.stringify(k8(t)):t;if(Ze.isArrayBuffer(t)||Ze.isBuffer(t)||Ze.isStream(t)||Ze.isFile(t)||Ze.isBlob(t)||Ze.isReadableStream(t))return t;if(Ze.isArrayBufferView(t))return t.buffer;if(Ze.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return KJ(t,this.formSerializer).toString();if((o=Ze.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return kb(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),ZJ(t)):t}],transformResponse:[function(t){const r=this.transitional||Sp.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Ze.isResponse(t)||Ze.isReadableStream(t))return t;if(t&&Ze.isString(t)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?dr.from(o,dr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qs.classes.FormData,Blob:qs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ze.forEach(["delete","get","head","post","put","patch"],e=>{Sp.headers[e]={}});const QJ=Ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eK=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||t[r]&&QJ[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},X3=Symbol("internals");function Gm(e){return e&&String(e).trim().toLowerCase()}function Bg(e){return e===!1||e==null?e:Ze.isArray(e)?e.map(Bg):String(e)}function tK(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const rK=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vj(e,t,r,s,a){if(Ze.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!Ze.isString(t)){if(Ze.isString(s))return t.indexOf(s)!==-1;if(Ze.isRegExp(s))return s.test(t)}}function nK(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function sK(e,t){const r=Ze.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,l){return this[s].call(this,t,a,i,l)},configurable:!0})})}let Ea=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(o,c,d){const u=Gm(c);if(!u)throw new Error("header name must be a non-empty string");const f=Ze.findKey(a,u);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=Bg(o))}const l=(o,c)=>Ze.forEach(o,(d,u)=>i(d,u,c));if(Ze.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(Ze.isString(t)&&(t=t.trim())&&!rK(t))l(eK(t),r);else if(Ze.isObject(t)&&Ze.isIterable(t)){let o={},c,d;for(const u of t){if(!Ze.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?Ze.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Gm(t),t){const s=Ze.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return tK(a);if(Ze.isFunction(r))return r.call(this,a,s);if(Ze.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Gm(t),t){const s=Ze.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||vj(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(l){if(l=Gm(l),l){const o=Ze.findKey(s,l);o&&(!r||vj(s,s[o],o,r))&&(delete s[o],a=!0)}}return Ze.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||vj(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return Ze.forEach(this,(a,i)=>{const l=Ze.findKey(s,i);if(l){r[l]=Bg(a),delete r[i];return}const o=t?nK(i):String(i).trim();o!==i&&delete r[i],r[o]=Bg(a),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ze.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&Ze.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[X3]=this[X3]={accessors:{}}).accessors,a=this.prototype;function i(l){const o=Gm(l);s[o]||(sK(a,l),s[o]=!0)}return Ze.isArray(t)?t.forEach(i):i(t),this}};Ea.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ze.reduceDescriptors(Ea.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});Ze.freezeMethods(Ea);function bj(e,t){const r=this||Sp,s=t||r,a=Ea.from(s.headers);let i=s.data;return Ze.forEach(e,function(o){i=o.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function S8(e){return!!(e&&e.__CANCEL__)}function bm(e,t,r){dr.call(this,e??"canceled",dr.ERR_CANCELED,t,r),this.name="CanceledError"}Ze.inherits(bm,dr,{__CANCEL__:!0});function C8(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new dr("Request failed with status code "+r.status,[dr.ERR_BAD_REQUEST,dr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function aK(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function iK(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];l||(l=d),r[a]=c,s[a]=d;let f=i,m=0;for(;f!==a;)m+=r[f++],f=f%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-l<t)return;const g=u&&d-u;return g?Math.round(m*1e3/g):void 0}}function lK(e,t){let r=0,s=1e3/t,a,i;const l=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-r;f>=s?l(d,u):(a=d,i||(i=setTimeout(()=>{i=null,l(a)},s-f)))},()=>a&&l(a)]}const _y=(e,t,r=3)=>{let s=0;const a=iK(50,250);return lK(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-s,d=a(c),u=l<=o;s=l;const f={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},r)},Y3=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Z3=e=>(...t)=>Ze.asap(()=>e(...t)),oK=qs.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,qs.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(qs.origin),qs.navigator&&/(msie|trident)/i.test(qs.navigator.userAgent)):()=>!0,cK=qs.hasStandardBrowserEnv?{write(e,t,r,s,a,i){const l=[e+"="+encodeURIComponent(t)];Ze.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Ze.isString(s)&&l.push("path="+s),Ze.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dK(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function uK(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function A8(e,t,r){let s=!dK(t);return e&&(s||r==!1)?uK(e,t):t}const Q3=e=>e instanceof Ea?{...e}:e;function Pd(e,t){t=t||{};const r={};function s(d,u,f,m){return Ze.isPlainObject(d)&&Ze.isPlainObject(u)?Ze.merge.call({caseless:m},d,u):Ze.isPlainObject(u)?Ze.merge({},u):Ze.isArray(u)?u.slice():u}function a(d,u,f,m){if(Ze.isUndefined(u)){if(!Ze.isUndefined(d))return s(void 0,d,f,m)}else return s(d,u,f,m)}function i(d,u){if(!Ze.isUndefined(u))return s(void 0,u)}function l(d,u){if(Ze.isUndefined(u)){if(!Ze.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function o(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,f)=>a(Q3(d),Q3(u),f,!0)};return Ze.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||a,m=f(e[u],t[u],u);Ze.isUndefined(m)&&f!==o||(r[u]=m)}),r}const E8=e=>{const t=Pd({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=Ea.from(l),t.url=w8(A8(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ze.isFormData(r)){if(qs.hasStandardBrowserEnv||qs.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ze.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&l.set(u,f)})}}if(qs.hasStandardBrowserEnv&&(s&&Ze.isFunction(s)&&(s=s(t)),s||s!==!1&&oK(t.url))){const c=a&&i&&cK.read(i);c&&l.set(a,c)}return t},fK=typeof XMLHttpRequest<"u",mK=fK&&function(e){return new Promise(function(r,s){const a=E8(e);let i=a.data;const l=Ea.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,u,f,m,g,x;function h(){g&&g(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function v(){if(!p)return;const j=Ea.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:j,config:e,request:p};C8(function(k){r(k),h()},function(k){s(k),h()},w),p=null}"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(s(new dr("Request aborted",dr.ECONNABORTED,e,p)),p=null)},p.onerror=function(N){const w=N&&N.message?N.message:"Network Error",_=new dr(w,dr.ERR_NETWORK,e,p);_.event=N||null,s(_),p=null},p.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const w=a.transitional||N8;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),s(new dr(N,w.clarifyTimeoutError?dr.ETIMEDOUT:dr.ECONNABORTED,e,p)),p=null},i===void 0&&l.setContentType(null),"setRequestHeader"in p&&Ze.forEach(l.toJSON(),function(N,w){p.setRequestHeader(w,N)}),Ze.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),o&&o!=="json"&&(p.responseType=a.responseType),d&&([m,x]=_y(d,!0),p.addEventListener("progress",m)),c&&p.upload&&([f,g]=_y(c),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=j=>{p&&(s(!j||j.type?new bm(null,e,p):j),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const b=aK(a.url);if(b&&qs.protocols.indexOf(b)===-1){s(new dr("Unsupported protocol "+b+":",dr.ERR_BAD_REQUEST,e));return}p.send(i||null)})},hK=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(d){if(!a){a=!0,o();const u=d instanceof Error?d:this.reason;s.abort(u instanceof dr?u:new bm(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new dr(`timeout ${t} of ms exceeded`,dr.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>Ze.asap(o),c}},pK=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},xK=async function*(e,t){for await(const r of gK(e))yield*pK(r,t)},gK=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},eT=(e,t,r,s)=>{const a=xK(e,t);let i=0,l,o=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){o(),c.close();return}let f=u.byteLength;if(r){let m=i+=f;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},tT=64*1024,{isFunction:gx}=Ze,yK=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ze.global),{ReadableStream:rT,TextEncoder:nT}=Ze.global,sT=(e,...t)=>{try{return!!e(...t)}catch{return!1}},vK=e=>{e=Ze.merge.call({skipUndefined:!0},yK,e);const{fetch:t,Request:r,Response:s}=e,a=t?gx(t):typeof fetch=="function",i=gx(r),l=gx(s);if(!a)return!1;const o=a&&gx(rT),c=a&&(typeof nT=="function"?(x=>h=>x.encode(h))(new nT):async x=>new Uint8Array(await new r(x).arrayBuffer())),d=i&&o&&sT(()=>{let x=!1;const h=new r(qs.origin,{body:new rT,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!h}),u=l&&o&&sT(()=>Ze.isReadableStream(new s("").body)),f={stream:u&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(h,p)=>{let v=h&&h[x];if(v)return v.call(h);throw new dr(`Response type '${x}' is not supported`,dr.ERR_NOT_SUPPORT,p)})});const m=async x=>{if(x==null)return 0;if(Ze.isBlob(x))return x.size;if(Ze.isSpecCompliantForm(x))return(await new r(qs.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(Ze.isArrayBufferView(x)||Ze.isArrayBuffer(x))return x.byteLength;if(Ze.isURLSearchParams(x)&&(x=x+""),Ze.isString(x))return(await c(x)).byteLength},g=async(x,h)=>{const p=Ze.toFiniteNumber(x.getContentLength());return p??m(h)};return async x=>{let{url:h,method:p,data:v,signal:b,cancelToken:j,timeout:N,onDownloadProgress:w,onUploadProgress:_,responseType:k,headers:C,withCredentials:T="same-origin",fetchOptions:P}=E8(x),A=t||fetch;k=k?(k+"").toLowerCase():"text";let S=hK([b,j&&j.toAbortSignal()],N),E=null;const O=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let I;try{if(_&&d&&p!=="get"&&p!=="head"&&(I=await g(C,v))!==0){let Y=new r(h,{method:"POST",body:v,duplex:"half"}),M;if(Ze.isFormData(v)&&(M=Y.headers.get("content-type"))&&C.setContentType(M),Y.body){const[X,ne]=Y3(I,_y(Z3(_)));v=eT(Y.body,tT,X,ne)}}Ze.isString(T)||(T=T?"include":"omit");const L=i&&"credentials"in r.prototype,Z={...P,signal:S,method:p.toUpperCase(),headers:C.normalize().toJSON(),body:v,duplex:"half",credentials:L?T:void 0};E=i&&new r(h,Z);let H=await(i?A(E,P):A(h,Z));const R=u&&(k==="stream"||k==="response");if(u&&(w||R&&O)){const Y={};["status","statusText","headers"].forEach(J=>{Y[J]=H[J]});const M=Ze.toFiniteNumber(H.headers.get("content-length")),[X,ne]=w&&Y3(M,_y(Z3(w),!0))||[];H=new s(eT(H.body,tT,X,()=>{ne&&ne(),O&&O()}),Y)}k=k||"text";let D=await f[Ze.findKey(f,k)||"text"](H,x);return!R&&O&&O(),await new Promise((Y,M)=>{C8(Y,M,{data:D,headers:Ea.from(H.headers),status:H.status,statusText:H.statusText,config:x,request:E})})}catch(L){throw O&&O(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new dr("Network Error",dr.ERR_NETWORK,x,E),{cause:L.cause||L}):dr.from(L,L&&L.code,x,E)}}},bK=new Map,T8=e=>{let t=e?e.env:{};const{fetch:r,Request:s,Response:a}=t,i=[s,a,r];let l=i.length,o=l,c,d,u=bK;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:vK(t)),u=d;return d};T8();const dN={http:DJ,xhr:mK,fetch:{get:T8}};Ze.forEach(dN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const aT=e=>`- ${e}`,jK=e=>Ze.isFunction(e)||e===null||e===!1,P8={getAdapter:(e,t)=>{e=Ze.isArray(e)?e:[e];const{length:r}=e;let s,a;const i={};for(let l=0;l<r;l++){s=e[l];let o;if(a=s,!jK(s)&&(a=dN[(o=String(s)).toLowerCase()],a===void 0))throw new dr(`Unknown adapter '${o}'`);if(a&&(Ze.isFunction(a)||(a=a.get(t))))break;i[o||"#"+l]=a}if(!a){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(aT).join(`
`):" "+aT(l[0]):"as no adapter specified";throw new dr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:dN};function jj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bm(null,e)}function iT(e){return jj(e),e.headers=Ea.from(e.headers),e.data=bj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),P8.getAdapter(e.adapter||Sp.adapter,e)(e).then(function(s){return jj(e),s.data=bj.call(e,e.transformResponse,s),s.headers=Ea.from(s.headers),s},function(s){return S8(s)||(jj(e),s&&s.response&&(s.response.data=bj.call(e,e.transformResponse,s.response),s.response.headers=Ea.from(s.response.headers))),Promise.reject(s)})}const O8="1.12.2",Sb={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sb[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const lT={};Sb.transitional=function(t,r,s){function a(i,l){return"[Axios v"+O8+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new dr(a(l," has been removed"+(r?" in "+r:"")),dr.ERR_DEPRECATED);return r&&!lT[l]&&(lT[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,o):!0}};Sb.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function _K(e,t,r){if(typeof e!="object")throw new dr("options must be an object",dr.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new dr("option "+i+" must be "+c,dr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new dr("Unknown option "+i,dr.ERR_BAD_OPTION)}}const Ug={assertOptions:_K,validators:Sb},fl=Ug.validators;let xd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new K3,response:new K3}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Pd(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&Ug.assertOptions(s,{silentJSONParsing:fl.transitional(fl.boolean),forcedJSONParsing:fl.transitional(fl.boolean),clarifyTimeoutError:fl.transitional(fl.boolean)},!1),a!=null&&(Ze.isFunction(a)?r.paramsSerializer={serialize:a}:Ug.assertOptions(a,{encode:fl.function,serialize:fl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ug.assertOptions(r,{baseUrl:fl.spelling("baseURL"),withXsrfToken:fl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&Ze.merge(i.common,i[r.method]);i&&Ze.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=Ea.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(c=c&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let u,f=0,m;if(!c){const x=[iT.bind(this),void 0];for(x.unshift(...o),x.push(...d),m=x.length,u=Promise.resolve(r);f<m;)u=u.then(x[f++],x[f++]);return u}m=o.length;let g=r;for(;f<m;){const x=o[f++],h=o[f++];try{g=x(g)}catch(p){h.call(this,p);break}}try{u=iT.call(this,g)}catch(x){return Promise.reject(x)}for(f=0,m=d.length;f<m;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Pd(this.defaults,t);const r=A8(t.baseURL,t.url,t.allowAbsoluteUrls);return w8(r,t.params,t.paramsSerializer)}};Ze.forEach(["delete","get","head","options"],function(t){xd.prototype[t]=function(r,s){return this.request(Pd(s||{},{method:t,url:r,data:(s||{}).data}))}});Ze.forEach(["post","put","patch"],function(t){function r(s){return function(i,l,o){return this.request(Pd(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}xd.prototype[t]=r(),xd.prototype[t+"Form"]=r(!0)});let wK=class R8{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(a);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new bm(i,l,o),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new R8(function(a){t=a}),cancel:t}}};function NK(e){return function(r){return e.apply(null,r)}}function kK(e){return Ze.isObject(e)&&e.isAxiosError===!0}const uN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uN).forEach(([e,t])=>{uN[t]=e});function L8(e){const t=new xd(e),r=u8(xd.prototype.request,t);return Ze.extend(r,xd.prototype,t,{allOwnKeys:!0}),Ze.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return L8(Pd(e,a))},r}const $n=L8(Sp);$n.Axios=xd;$n.CanceledError=bm;$n.CancelToken=wK;$n.isCancel=S8;$n.VERSION=O8;$n.toFormData=kb;$n.AxiosError=dr;$n.Cancel=$n.CanceledError;$n.all=function(t){return Promise.all(t)};$n.spread=NK;$n.isAxiosError=kK;$n.mergeConfig=Pd;$n.AxiosHeaders=Ea;$n.formToJSON=e=>k8(Ze.isHTMLForm(e)?new FormData(e):e);$n.getAdapter=P8.getAdapter;$n.HttpStatusCode=uN;$n.default=$n;const{Axios:BWe,AxiosError:UWe,CanceledError:zWe,isCancel:WWe,CancelToken:VWe,VERSION:HWe,all:qWe,Cancel:GWe,isAxiosError:JWe,spread:KWe,toFormData:XWe,AxiosHeaders:YWe,HttpStatusCode:ZWe,formToJSON:QWe,getAdapter:eVe,mergeConfig:tVe}=$n,SK=e=>e?e.includes("127.0.0.1")?e.replace("127.0.0.1","localhost"):e.includes("localhost")?e.replace("localhost","127.0.0.1"):"":"",G=$n.create({baseURL:"https://ats-10-iyol.onrender.com",withCredentials:!1});G.interceptors.request.use(e=>{const t=localStorage.getItem("access_token")||localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));G.interceptors.response.use(e=>e,async e=>{var s;if(!(e!=null&&e.response)&&((e==null?void 0:e.code)==="ERR_NETWORK"||String((e==null?void 0:e.message)||"").toLowerCase().includes("network error"))&&(e==null?void 0:e.config)&&!e.config.__localHostRetried&&typeof e.config.url=="string"){const a=e.config.baseURL||G.defaults.baseURL||"",i=SK(a);if(i)return e.config.__localHostRetried=!0,e.config.baseURL=i,G.request(e.config)}return((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const id=G;var I8={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oT=we.createContext&&we.createContext(I8),CK=["attr","size","title"];function AK(e,t){if(e==null)return{};var r=EK(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function EK(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wy.apply(this,arguments)}function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(s){TK(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function TK(e,t,r){return t=PK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PK(e){var t=OK(e,"string");return typeof t=="symbol"?t:t+""}function OK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F8(e){return e&&e.map((t,r)=>we.createElement(t.tag,Ny({key:r},t.attr),F8(t.child)))}function Kn(e){return t=>we.createElement(RK,wy({attr:Ny({},e.attr)},t),F8(e.child))}function RK(e){var t=r=>{var{attr:s,size:a,title:i}=e,l=AK(e,CK),o=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),we.createElement("svg",wy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,l,{className:c,style:Ny(Ny({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&we.createElement("title",null,i),e.children)};return oT!==void 0?we.createElement(oT.Consumer,null,r=>t(r)):t(I8)}function yS(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}function dT(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function ky(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"},child:[]},{tag:"path",attr:{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"},child:[]}]})(e)}function fN(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"},child:[]}]})(e)}function LK(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"},child:[]}]})(e)}const IK={admin:"/dashboard",super_admin:"/super-admin/dashboard",recruiter:"/recruiter/dashboard",employee:"/employee/dashboard",candidate:"/candidate/dashboard",account_manager:"/account-manager/dashboard",client:"/client/dashboard",consultant:"/consultant/dashboard",vendor:"/vendor/dashboard",finance_officer:"/finance","finance officer":"/finance"},uT=e=>String(e).trim().toLowerCase().replace(/\s+/g,"_");function FK({onLogin:e}){const[t,r]=y.useState(""),[s,a]=y.useState(""),[i,l]=y.useState(""),[o,c]=y.useState(!1),d=y.useRef(null),u=y.useRef(null),f=Tt();y.useEffect(()=>{var x;(x=d.current)==null||x.focus()},[]);const m=()=>t.trim()?s.trim()?s.length<3?"Password must be at least 3 characters":null:"Password is required":"Email or username is required",g=async x=>{var p,v,b,j,N,w,_,k,C,T,P,A,S,E,O,I,L,Z,H,R,D;x.preventDefault(),l("");const h=m();if(h){l(h),setTimeout(()=>{var Y,M;return(M=(Y=u.current)==null?void 0:Y.focus)==null?void 0:M.call(Y)},50);return}c(!0);try{const Y=await G.post("/auth/login",{email:t,password:s}),M=((p=Y==null?void 0:Y.data)==null?void 0:p.access_token)||((v=Y==null?void 0:Y.data)==null?void 0:v.accessToken)||((b=Y==null?void 0:Y.data)==null?void 0:b.token),X=((j=Y==null?void 0:Y.data)==null?void 0:j.user)||(Y==null?void 0:Y.data)||null,ne=((N=Y==null?void 0:Y.data)==null?void 0:N.role)||((_=(w=Y==null?void 0:Y.data)==null?void 0:w.user)==null?void 0:_.role)||X&&X.role||"employee";if(!M)throw new Error("No token received from server");localStorage.setItem("access_token",M),localStorage.setItem("role",uT(ne)),X&&typeof X=="object"&&localStorage.setItem("user",JSON.stringify(X)),G.defaults.headers.common.Authorization=`Bearer ${M}`,typeof e=="function"&&e();const J=uT(ne),ue=IK[J]||"/dashboard";f(ue,{replace:!0})}catch(Y){if(console.error("Login error:",{message:Y.message,status:(k=Y.response)==null?void 0:k.status,data:(C=Y.response)==null?void 0:C.data}),((T=Y.response)==null?void 0:T.status)===403){const X=(A=(P=Y.response)==null?void 0:P.data)==null?void 0:A.detail;if(typeof X=="object"&&(X!=null&&X.unverified)){f("/verify-account",{state:{user_id:X.user_id,verification_method:X.verification_method,email:t}});return}}const M=((E=(S=Y==null?void 0:Y.response)==null?void 0:S.data)==null?void 0:E.message)||((I=(O=Y==null?void 0:Y.response)==null?void 0:O.data)==null?void 0:I.detail)||(typeof((Z=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:Z.detail)=="object"?(D=(R=(H=Y==null?void 0:Y.response)==null?void 0:H.data)==null?void 0:R.detail)==null?void 0:D.message:null)||(Y==null?void 0:Y.message)||"Login failed - please try again";l(M),setTimeout(()=>{var X,ne;return(ne=(X=u.current)==null?void 0:X.focus)==null?void 0:ne.call(X)},50)}finally{c(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(wr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(wr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(wr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(wr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>f("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:x=>x.stopPropagation(),role:"presentation",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Login"}),n.jsxs("form",{onSubmit:g,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ky,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{ref:d,value:t,onChange:x=>r(x.target.value),className:`\r
                  w-full pl-10 pr-4 py-3 rounded-lg\r
                  bg-[#0b0f1f] border border-[#20243a] text-white\r
                  focus:outline-none\r
                  focus:ring-2 focus:ring-emerald-400\r
                  focus:border-emerald-400\r
                `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(fN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"password",value:s,onChange:x=>a(x.target.value),className:`\r
                  w-full pl-10 pr-4 py-3 rounded-lg\r
                  bg-[#0b0f1f] border border-[#20243a] text-white\r
                  focus:outline-none\r
                  focus:ring-2 focus:ring-emerald-400\r
                  focus:border-emerald-400\r
                `,placeholder:"Enter password"})]})]}),i&&n.jsx("div",{ref:u,tabIndex:-1,className:"bg-red-900/40 border border-red-500/40 text-red-200 px-4 py-3 rounded-lg text-sm",children:i}),n.jsxs("button",{type:"submit",disabled:o,className:`\r
              w-full flex items-center justify-center gap-2\r
              bg-purple-600\r
              text-white py-3 rounded-lg font-semibold\r
              hover:bg-purple-700 transition\r
              disabled:opacity-60\r
            `,children:[o?"Signing in...":"Login",!o&&n.jsx(yS,{})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[n.jsx(wr,{to:"/forgot-password",className:"text-emerald-300",children:"Forgot password?"}),n.jsx(wr,{to:"/register",className:"text-gray-300",children:"Register"})]})]})]})})]})})})]})}function DK(){const[e,t]=y.useState("form"),[r,s]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,f]=y.useState(""),[m]=y.useState("email"),[g,x]=y.useState(""),[h,p]=y.useState(""),[v,b]=y.useState(!1),[j,N]=y.useState(null),w=Tt(),_=y.useRef(null),k=()=>r.trim()?a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?m==="phone"&&!/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,9}$/.test(l.replace(/\s/g,""))?"Enter a valid phone number":c?c.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(c)?/[a-z]/.test(c)?/[0-9]/.test(c)?/[@$!%*#?_&]/.test(c)?c!==u?"Passwords do not match":null:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password is required":"Enter a valid email address":"Email is required":"Username is required",C=async A=>{var O,I,L,Z,H,R;A.preventDefault(),p("");const S=k();if(S){p(S);return}const E={full_name:r.trim(),email:a.trim(),phone:m==="phone"?l.trim():null,password:c,confirm_password:u,verification_method:m};try{b(!0);const D=await G.post("/auth/candidate/register",E),Y=((O=D==null?void 0:D.data)==null?void 0:O.user_id)||((I=D==null?void 0:D.data)==null?void 0:I.id);N(Y),t("otp"),p("")}catch(D){console.error("Register error:",D);const Y=((Z=(L=D==null?void 0:D.response)==null?void 0:L.data)==null?void 0:Z.detail)||((R=(H=D==null?void 0:D.response)==null?void 0:H.data)==null?void 0:R.message)||"Registration failed";p(typeof Y=="string"?Y:JSON.stringify(Y))}finally{b(!1)}},T=async A=>{var S,E,O,I;if(A.preventDefault(),p(""),!g.trim()){p("Please enter the OTP");return}if(g.trim().length<4){p("OTP must be at least 4 digits");return}try{b(!0);const L=await G.post("/auth/verify-otp-registration",{user_id:j,otp:g.trim()});t("success"),p(""),setTimeout(()=>{w("/login")},2e3)}catch(L){console.error("OTP verification error:",L);const Z=((E=(S=L==null?void 0:L.response)==null?void 0:S.data)==null?void 0:E.detail)||((I=(O=L==null?void 0:L.response)==null?void 0:O.data)==null?void 0:I.message)||"Invalid or expired OTP";p(Z)}finally{b(!1)}},P=async()=>{var A;p("");try{b(!0),await G.post("/auth/resend-otp",{user_id:j,verification_method:m}),p(""),x(""),(A=_.current)==null||A.focus()}catch(S){console.error("Resend OTP error:",S),p("Failed to resend OTP. Please try again.")}finally{b(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(wr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(wr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(wr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(wr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>w("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:A=>A.stopPropagation(),role:"presentation",children:[e==="form"&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Register"}),h&&n.jsx("div",{className:"mb-4 text-sm text-red-200 bg-red-900/40 border border-red-500/40 px-3 py-2 rounded",children:h}),n.jsxs("form",{className:"space-y-4",onSubmit:C,children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(LK,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{value:r,onChange:A=>s(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ky,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"email",value:a,onChange:A=>i(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),m==="phone"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone (optional)"}),n.jsxs("div",{className:"relative",children:[n.jsx(ky,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"tel",value:l,onChange:A=>o(A.target.value),className:`
                        w-full pl-10 pr-4 py-3 rounded-lg
                        bg-[#0b0f1f] border border-[#20243a] text-white
                        focus:ring-2 focus:ring-emerald-400
                        focus:border-emerald-400
                      `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(fN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"password",value:c,onChange:A=>d(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(fN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"password",value:u,onChange:A=>f(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("button",{type:"submit",disabled:v,className:`
                  w-full flex items-center justify-center gap-2
                  bg-purple-600
                  text-white py-3 rounded-lg font-semibold
                  hover:bg-purple-700 transition
                  disabled:opacity-60
                `,children:[v?"Creating account...":"Register",!v&&n.jsx(yS,{})]}),n.jsxs("div",{className:"text-center text-sm mt-4 text-gray-300",children:["Already have an account?"," ",n.jsx(wr,{to:"/login",className:"text-emerald-300 font-medium",children:"Login"})]})]})]}),e==="otp"&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Verify ",m==="email"?"Email":"Phone"]}),n.jsxs("p",{className:"text-gray-400 mb-6",children:["We sent a code to your"," ",m==="email"?a:l]}),h&&n.jsx("div",{className:"mb-4 text-sm text-red-200 bg-red-900/40 border border-red-500/40 px-3 py-2 rounded",children:h}),n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enter OTP Code"}),n.jsx("input",{ref:_,type:"text",value:g,onChange:A=>x(A.target.value.replace(/[^0-9]/g,"").slice(0,6)),maxLength:"6",className:`
                    w-full px-4 py-3 rounded-lg text-center text-2xl tracking-widest
                    bg-[#0b0f1f] border border-[#20243a] text-white
                    focus:ring-2 focus:ring-emerald-400
                    focus:border-emerald-400
                  `,placeholder:"000000"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[g.length,"/6 digits entered"]})]}),n.jsxs("button",{type:"submit",disabled:v||g.length<4,className:`
                  w-full flex items-center justify-center gap-2
                  bg-purple-600
                  text-white py-3 rounded-lg font-semibold
                  hover:bg-purple-700 transition
                  disabled:opacity-60
                `,children:[v?"Verifying...":"Verify OTP",!v&&n.jsx(dT,{})]}),n.jsx("button",{type:"button",onClick:P,disabled:v,className:`
                  w-full text-sm text-emerald-300 font-medium
                  py-2 rounded-lg hover:bg-white/5 transition
                  disabled:opacity-60
                `,children:"Resend OTP"})]})]}),e==="success"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"bg-emerald-500/20 p-4 rounded-full",children:n.jsx(dT,{className:"text-4xl text-emerald-300"})})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Account Created!"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Your account has been verified. Redirecting to login..."}),n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-300 mx-auto"})]})]})})]})})})]})}var Cp=e=>e.type==="checkbox",ld=e=>e instanceof Date,ja=e=>e==null;const D8=e=>typeof e=="object";var Gn=e=>!ja(e)&&!Array.isArray(e)&&D8(e)&&!ld(e),$K=e=>Gn(e)&&e.target?Cp(e.target)?e.target.checked:e.target.value:e,MK=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,BK=(e,t)=>e.has(MK(t)),UK=e=>{const t=e.constructor&&e.constructor.prototype;return Gn(t)&&t.hasOwnProperty("isPrototypeOf")},vS=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ls(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(vS&&(e instanceof Blob||s))&&(r||Gn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!UK(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=ls(e[a]));else return e;return t}var Cb=e=>/^\w*$/.test(e),In=e=>e===void 0,bS=e=>Array.isArray(e)?e.filter(Boolean):[],jS=e=>bS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Dt=(e,t,r)=>{if(!t||!Gn(e))return r;const s=(Cb(t)?[t]:jS(t)).reduce((a,i)=>ja(a)?a:a[i],e);return In(s)||s===e?In(e[t])?r:e[t]:s},vl=e=>typeof e=="boolean",Vr=(e,t,r)=>{let s=-1;const a=Cb(t)?[t]:jS(t),i=a.length,l=i-1;for(;++s<i;){const o=a[s];let c=r;if(s!==l){const d=e[o];c=Gn(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const fT={BLUR:"blur",FOCUS_OUT:"focusout"},Hi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},zl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zK=we.createContext(null);zK.displayName="HookFormContext";var WK=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Hi.all&&(t._proxyFormState[l]=!s||Hi.all),e[l]}});return a};const VK=typeof window<"u"?we.useLayoutEffect:we.useEffect;var Ba=e=>typeof e=="string",HK=(e,t,r,s,a)=>Ba(e)?(s&&t.watch.add(e),Dt(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),Dt(r,i))):(s&&(t.watchAll=!0),r),mN=e=>ja(e)||!D8(e);function Jo(e,t,r=new WeakSet){if(mN(e)||mN(t))return Object.is(e,t);if(ld(e)&&ld(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=t[i];if(ld(l)&&ld(o)||Gn(l)&&Gn(o)||Array.isArray(l)&&Array.isArray(o)?!Jo(l,o,r):!Object.is(l,o))return!1}}return!0}var _S=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},O0=e=>Array.isArray(e)?e:[e],mT=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function $8(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&Gn(a)&&i){const l=$8(a,i);Gn(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var ra=e=>Gn(e)&&!Object.keys(e).length,wS=e=>e.type==="file",qi=e=>typeof e=="function",Sy=e=>{if(!vS)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},M8=e=>e.type==="select-multiple",NS=e=>e.type==="radio",qK=e=>NS(e)||Cp(e),_j=e=>Sy(e)&&e.isConnected;function GK(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=In(e)?s++:e[t[s++]];return e}function JK(e){for(const t in e)if(e.hasOwnProperty(t)&&!In(e[t]))return!1;return!0}function zn(e,t){const r=Array.isArray(t)?t:Cb(t)?[t]:jS(t),s=r.length===1?e:GK(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(Gn(s)&&ra(s)||Array.isArray(s)&&JK(s))&&zn(e,r.slice(0,-1)),e}var KK=e=>{for(const t in e)if(qi(e[t]))return!0;return!1};function B8(e){return Array.isArray(e)||Gn(e)&&!KK(e)}function hN(e,t={}){for(const r in e){const s=e[r];B8(s)?(t[r]=Array.isArray(s)?[]:{},hN(s,t[r])):In(s)||(t[r]=!0)}return t}function Iu(e,t,r){r||(r=hN(t));for(const s in e){const a=e[s];if(B8(a))In(t)||mN(r[s])?r[s]=hN(a,Array.isArray(a)?[]:{}):Iu(a,ja(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!Jo(a,i)}}return r}const hT={value:!1,isValid:!1},pT={value:!0,isValid:!0};var U8=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!In(e[0].attributes.value)?In(e[0].value)||e[0].value===""?pT:{value:e[0].value,isValid:!0}:pT:hT}return hT},z8=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>In(e)?e:t?e===""?NaN:e&&+e:r&&Ba(e)?new Date(e):s?s(e):e;const xT={isValid:!1,value:null};var W8=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,xT):xT;function gT(e){const t=e.ref;return wS(t)?t.files:NS(t)?W8(e.refs).value:M8(t)?[...t.selectedOptions].map(({value:r})=>r):Cp(t)?U8(e.refs).value:z8(In(t.value)?e.ref.value:t.value,e)}var XK=(e,t,r,s)=>{const a={};for(const i of e){const l=Dt(t,i);l&&Vr(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Cy=e=>e instanceof RegExp,Jm=e=>In(e)?e:Cy(e)?e.source:Gn(e)?Cy(e.value)?e.value.source:e.value:e,yT=e=>({isOnSubmit:!e||e===Hi.onSubmit,isOnBlur:e===Hi.onBlur,isOnChange:e===Hi.onChange,isOnAll:e===Hi.all,isOnTouch:e===Hi.onTouched});const vT="AsyncFunction";var YK=e=>!!e&&!!e.validate&&!!(qi(e.validate)&&e.validate.constructor.name===vT||Gn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===vT)),ZK=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bT=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const R0=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=Dt(e,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(R0(o,t))break}else if(Gn(o)&&R0(o,t))break}}};function jT(e,t,r){const s=Dt(e,r);if(s||Cb(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=Dt(t,i),o=Dt(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:r}}var QK=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return ra(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||Hi.all))},eX=(e,t,r)=>!e||!t||e===t||O0(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),tX=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,rX=(e,t)=>!bS(Dt(e,t)).length&&zn(e,t),nX=(e,t,r)=>{const s=O0(Dt(e,r));return Vr(s,"root",t[r]),Vr(e,r,s),e};function _T(e,t,r="validate"){if(Ba(e)||Array.isArray(e)&&e.every(Ba)||vl(e)&&!e)return{type:r,message:Ba(e)?e:"",ref:t}}var gu=e=>Gn(e)&&!Cy(e)?e:{value:e,message:""},wT=async(e,t,r,s,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:f,max:m,pattern:g,validate:x,name:h,valueAsNumber:p,mount:v}=e._f,b=Dt(r,h);if(!v||t.has(h))return{};const j=o?o[0]:l,N=S=>{a&&j.reportValidity&&(j.setCustomValidity(vl(S)?"":S||""),j.reportValidity())},w={},_=NS(l),k=Cp(l),C=_||k,T=(p||wS(l))&&In(l.value)&&In(b)||Sy(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,P=_S.bind(null,h,s,w),A=(S,E,O,I=zl.maxLength,L=zl.minLength)=>{const Z=S?E:O;w[h]={type:S?I:L,message:Z,ref:l,...P(S?I:L,Z)}};if(i?!Array.isArray(b)||!b.length:c&&(!C&&(T||ja(b))||vl(b)&&!b||k&&!U8(o).isValid||_&&!W8(o).isValid)){const{value:S,message:E}=Ba(c)?{value:!!c,message:c}:gu(c);if(S&&(w[h]={type:zl.required,message:E,ref:j,...P(zl.required,E)},!s))return N(E),w}if(!T&&(!ja(f)||!ja(m))){let S,E;const O=gu(m),I=gu(f);if(!ja(b)&&!isNaN(b)){const L=l.valueAsNumber||b&&+b;ja(O.value)||(S=L>O.value),ja(I.value)||(E=L<I.value)}else{const L=l.valueAsDate||new Date(b),Z=D=>new Date(new Date().toDateString()+" "+D),H=l.type=="time",R=l.type=="week";Ba(O.value)&&b&&(S=H?Z(b)>Z(O.value):R?b>O.value:L>new Date(O.value)),Ba(I.value)&&b&&(E=H?Z(b)<Z(I.value):R?b<I.value:L<new Date(I.value))}if((S||E)&&(A(!!S,O.message,I.message,zl.max,zl.min),!s))return N(w[h].message),w}if((d||u)&&!T&&(Ba(b)||i&&Array.isArray(b))){const S=gu(d),E=gu(u),O=!ja(S.value)&&b.length>+S.value,I=!ja(E.value)&&b.length<+E.value;if((O||I)&&(A(O,S.message,E.message),!s))return N(w[h].message),w}if(g&&!T&&Ba(b)){const{value:S,message:E}=gu(g);if(Cy(S)&&!b.match(S)&&(w[h]={type:zl.pattern,message:E,ref:l,...P(zl.pattern,E)},!s))return N(E),w}if(x){if(qi(x)){const S=await x(b,r),E=_T(S,j);if(E&&(w[h]={...E,...P(zl.validate,E.message)},!s))return N(E.message),w}else if(Gn(x)){let S={};for(const E in x){if(!ra(S)&&!s)break;const O=_T(await x[E](b,r),j,E);O&&(S={...O,...P(E,O.message)},N(O.message),s&&(w[h]=S))}if(!ra(S)&&(w[h]={ref:j,...S},!s))return w}}return N(!0),w};const sX={mode:Hi.onSubmit,reValidateMode:Hi.onChange,shouldFocusError:!0};function aX(e={}){let t={...sX,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:qi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=Gn(t.defaultValues)||Gn(t.values)?ls(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ls(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:mT(),state:mT()},g=t.criteriaMode===Hi.all,x=pe=>ye=>{clearTimeout(d),d=setTimeout(pe,ye)},h=async pe=>{if(!t.disabled&&(u.isValid||f.isValid||pe)){const ye=t.resolver?ra((await k()).errors):await T(s,!0);ye!==r.isValid&&m.state.next({isValid:ye})}},p=(pe,ye)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((pe||Array.from(o.mount)).forEach(Pe=>{Pe&&(ye?Vr(r.validatingFields,Pe,ye):zn(r.validatingFields,Pe))}),m.state.next({validatingFields:r.validatingFields,isValidating:!ra(r.validatingFields)}))},v=(pe,ye=[],Pe,et,We=!0,qe=!0)=>{if(et&&Pe&&!t.disabled){if(l.action=!0,qe&&Array.isArray(Dt(s,pe))){const ot=Pe(Dt(s,pe),et.argA,et.argB);We&&Vr(s,pe,ot)}if(qe&&Array.isArray(Dt(r.errors,pe))){const ot=Pe(Dt(r.errors,pe),et.argA,et.argB);We&&Vr(r.errors,pe,ot),rX(r.errors,pe)}if((u.touchedFields||f.touchedFields)&&qe&&Array.isArray(Dt(r.touchedFields,pe))){const ot=Pe(Dt(r.touchedFields,pe),et.argA,et.argB);We&&Vr(r.touchedFields,pe,ot)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Iu(a,i)),m.state.next({name:pe,isDirty:A(pe,ye),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Vr(i,pe,ye)},b=(pe,ye)=>{Vr(r.errors,pe,ye),m.state.next({errors:r.errors})},j=pe=>{r.errors=pe,m.state.next({errors:r.errors,isValid:!1})},N=(pe,ye,Pe,et)=>{const We=Dt(s,pe);if(We){const qe=Dt(i,pe,In(Pe)?Dt(a,pe):Pe);In(qe)||et&&et.defaultChecked||ye?Vr(i,pe,ye?qe:gT(We._f)):O(pe,qe),l.mount&&!l.action&&h()}},w=(pe,ye,Pe,et,We)=>{let qe=!1,ot=!1;const Ct={name:pe};if(!t.disabled){if(!Pe||et){(u.isDirty||f.isDirty)&&(ot=r.isDirty,r.isDirty=Ct.isDirty=A(),qe=ot!==Ct.isDirty);const He=Jo(Dt(a,pe),ye);ot=!!Dt(r.dirtyFields,pe),He?zn(r.dirtyFields,pe):Vr(r.dirtyFields,pe,!0),Ct.dirtyFields=r.dirtyFields,qe=qe||(u.dirtyFields||f.dirtyFields)&&ot!==!He}if(Pe){const He=Dt(r.touchedFields,pe);He||(Vr(r.touchedFields,pe,Pe),Ct.touchedFields=r.touchedFields,qe=qe||(u.touchedFields||f.touchedFields)&&He!==Pe)}qe&&We&&m.state.next(Ct)}return qe?Ct:{}},_=(pe,ye,Pe,et)=>{const We=Dt(r.errors,pe),qe=(u.isValid||f.isValid)&&vl(ye)&&r.isValid!==ye;if(t.delayError&&Pe?(c=x(()=>b(pe,Pe)),c(t.delayError)):(clearTimeout(d),c=null,Pe?Vr(r.errors,pe,Pe):zn(r.errors,pe)),(Pe?!Jo(We,Pe):We)||!ra(et)||qe){const ot={...et,...qe&&vl(ye)?{isValid:ye}:{},errors:r.errors,name:pe};r={...r,...ot},m.state.next(ot)}},k=async pe=>{p(pe,!0);const ye=await t.resolver(i,t.context,XK(pe||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return p(pe),ye},C=async pe=>{const{errors:ye}=await k(pe);if(pe)for(const Pe of pe){const et=Dt(ye,Pe);et?Vr(r.errors,Pe,et):zn(r.errors,Pe)}else r.errors=ye;return ye},T=async(pe,ye,Pe={valid:!0})=>{for(const et in pe){const We=pe[et];if(We){const{_f:qe,...ot}=We;if(qe){const Ct=o.array.has(qe.name),He=We._f&&YK(We._f);He&&u.validatingFields&&p([qe.name],!0);const mt=await wT(We,o.disabled,i,g,t.shouldUseNativeValidation&&!ye,Ct);if(He&&u.validatingFields&&p([qe.name]),mt[qe.name]&&(Pe.valid=!1,ye))break;!ye&&(Dt(mt,qe.name)?Ct?nX(r.errors,mt,qe.name):Vr(r.errors,qe.name,mt[qe.name]):zn(r.errors,qe.name))}!ra(ot)&&await T(ot,ye,Pe)}}return Pe.valid},P=()=>{for(const pe of o.unMount){const ye=Dt(s,pe);ye&&(ye._f.refs?ye._f.refs.every(Pe=>!_j(Pe)):!_j(ye._f.ref))&&ke(pe)}o.unMount=new Set},A=(pe,ye)=>!t.disabled&&(pe&&ye&&Vr(i,pe,ye),!Jo(D(),a)),S=(pe,ye,Pe)=>HK(pe,o,{...l.mount?i:In(ye)?a:Ba(pe)?{[pe]:ye}:ye},Pe,ye),E=pe=>bS(Dt(l.mount?i:a,pe,t.shouldUnregister?Dt(a,pe,[]):[])),O=(pe,ye,Pe={})=>{const et=Dt(s,pe);let We=ye;if(et){const qe=et._f;qe&&(!qe.disabled&&Vr(i,pe,z8(ye,qe)),We=Sy(qe.ref)&&ja(ye)?"":ye,M8(qe.ref)?[...qe.ref.options].forEach(ot=>ot.selected=We.includes(ot.value)):qe.refs?Cp(qe.ref)?qe.refs.forEach(ot=>{(!ot.defaultChecked||!ot.disabled)&&(Array.isArray(We)?ot.checked=!!We.find(Ct=>Ct===ot.value):ot.checked=We===ot.value||!!We)}):qe.refs.forEach(ot=>ot.checked=ot.value===We):wS(qe.ref)?qe.ref.value="":(qe.ref.value=We,qe.ref.type||m.state.next({name:pe,values:ls(i)})))}(Pe.shouldDirty||Pe.shouldTouch)&&w(pe,We,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&R(pe)},I=(pe,ye,Pe)=>{for(const et in ye){if(!ye.hasOwnProperty(et))return;const We=ye[et],qe=pe+"."+et,ot=Dt(s,qe);(o.array.has(pe)||Gn(We)||ot&&!ot._f)&&!ld(We)?I(qe,We,Pe):O(qe,We,Pe)}},L=(pe,ye,Pe={})=>{const et=Dt(s,pe),We=o.array.has(pe),qe=ls(ye);Vr(i,pe,qe),We?(m.array.next({name:pe,values:ls(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&Pe.shouldDirty&&m.state.next({name:pe,dirtyFields:Iu(a,i),isDirty:A(pe,qe)})):et&&!et._f&&!ja(qe)?I(pe,qe,Pe):O(pe,qe,Pe),bT(pe,o)&&m.state.next({...r,name:pe}),m.state.next({name:l.mount?pe:void 0,values:ls(i)})},Z=async pe=>{l.mount=!0;const ye=pe.target;let Pe=ye.name,et=!0;const We=Dt(s,Pe),qe=He=>{et=Number.isNaN(He)||ld(He)&&isNaN(He.getTime())||Jo(He,Dt(i,Pe,He))},ot=yT(t.mode),Ct=yT(t.reValidateMode);if(We){let He,mt;const rt=ye.type?gT(We._f):$K(pe),wt=pe.type===fT.BLUR||pe.type===fT.FOCUS_OUT,At=!ZK(We._f)&&!t.resolver&&!Dt(r.errors,Pe)&&!We._f.deps||tX(wt,Dt(r.touchedFields,Pe),r.isSubmitted,Ct,ot),$t=bT(Pe,o,wt);Vr(i,Pe,rt),wt?(!ye||!ye.readOnly)&&(We._f.onBlur&&We._f.onBlur(pe),c&&c(0)):We._f.onChange&&We._f.onChange(pe);const Wt=w(Pe,rt,wt),lr=!ra(Wt)||$t;if(!wt&&m.state.next({name:Pe,type:pe.type,values:ls(i)}),At)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?wt&&h():wt||h()),lr&&m.state.next({name:Pe,...$t?{}:Wt});if(!wt&&$t&&m.state.next({...r}),t.resolver){const{errors:sr}=await k([Pe]);if(qe(rt),et){const De=jT(r.errors,s,Pe),yt=jT(sr,s,De.name||Pe);He=yt.error,Pe=yt.name,mt=ra(sr)}}else p([Pe],!0),He=(await wT(We,o.disabled,i,g,t.shouldUseNativeValidation))[Pe],p([Pe]),qe(rt),et&&(He?mt=!1:(u.isValid||f.isValid)&&(mt=await T(s,!0)));et&&(We._f.deps&&(!Array.isArray(We._f.deps)||We._f.deps.length>0)&&R(We._f.deps),_(Pe,mt,He,Wt))}},H=(pe,ye)=>{if(Dt(r.errors,ye)&&pe.focus)return pe.focus(),1},R=async(pe,ye={})=>{let Pe,et;const We=O0(pe);if(t.resolver){const qe=await C(In(pe)?pe:We);Pe=ra(qe),et=pe?!We.some(ot=>Dt(qe,ot)):Pe}else pe?(et=(await Promise.all(We.map(async qe=>{const ot=Dt(s,qe);return await T(ot&&ot._f?{[qe]:ot}:ot)}))).every(Boolean),!(!et&&!r.isValid)&&h()):et=Pe=await T(s);return m.state.next({...!Ba(pe)||(u.isValid||f.isValid)&&Pe!==r.isValid?{}:{name:pe},...t.resolver||!pe?{isValid:Pe}:{},errors:r.errors}),ye.shouldFocus&&!et&&R0(s,H,pe?We:o.mount),et},D=(pe,ye)=>{let Pe={...l.mount?i:a};return ye&&(Pe=$8(ye.dirtyFields?r.dirtyFields:r.touchedFields,Pe)),In(pe)?Pe:Ba(pe)?Dt(Pe,pe):pe.map(et=>Dt(Pe,et))},Y=(pe,ye)=>({invalid:!!Dt((ye||r).errors,pe),isDirty:!!Dt((ye||r).dirtyFields,pe),error:Dt((ye||r).errors,pe),isValidating:!!Dt(r.validatingFields,pe),isTouched:!!Dt((ye||r).touchedFields,pe)}),M=pe=>{pe&&O0(pe).forEach(ye=>zn(r.errors,ye)),m.state.next({errors:pe?r.errors:{}})},X=(pe,ye,Pe)=>{const et=(Dt(s,pe,{_f:{}})._f||{}).ref,We=Dt(r.errors,pe)||{},{ref:qe,message:ot,type:Ct,...He}=We;Vr(r.errors,pe,{...He,...ye,ref:et}),m.state.next({name:pe,errors:r.errors,isValid:!1}),Pe&&Pe.shouldFocus&&et&&et.focus&&et.focus()},ne=(pe,ye)=>qi(pe)?m.state.subscribe({next:Pe=>"values"in Pe&&pe(S(void 0,ye),Pe)}):S(pe,ye,!0),J=pe=>m.state.subscribe({next:ye=>{eX(pe.name,ye.name,pe.exact)&&QK(ye,pe.formState||u,Ce,pe.reRenderRoot)&&pe.callback({values:{...i},...r,...ye,defaultValues:a})}}).unsubscribe,ue=pe=>(l.mount=!0,f={...f,...pe.formState},J({...pe,formState:f})),ke=(pe,ye={})=>{for(const Pe of pe?O0(pe):o.mount)o.mount.delete(Pe),o.array.delete(Pe),ye.keepValue||(zn(s,Pe),zn(i,Pe)),!ye.keepError&&zn(r.errors,Pe),!ye.keepDirty&&zn(r.dirtyFields,Pe),!ye.keepTouched&&zn(r.touchedFields,Pe),!ye.keepIsValidating&&zn(r.validatingFields,Pe),!t.shouldUnregister&&!ye.keepDefaultValue&&zn(a,Pe);m.state.next({values:ls(i)}),m.state.next({...r,...ye.keepDirty?{isDirty:A()}:{}}),!ye.keepIsValid&&h()},ve=({disabled:pe,name:ye})=>{(vl(pe)&&l.mount||pe||o.disabled.has(ye))&&(pe?o.disabled.add(ye):o.disabled.delete(ye))},je=(pe,ye={})=>{let Pe=Dt(s,pe);const et=vl(ye.disabled)||vl(t.disabled);return Vr(s,pe,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:pe}},name:pe,mount:!0,...ye}}),o.mount.add(pe),Pe?ve({disabled:vl(ye.disabled)?ye.disabled:t.disabled,name:pe}):N(pe,!0,ye.value),{...et?{disabled:ye.disabled||t.disabled}:{},...t.progressive?{required:!!ye.required,min:Jm(ye.min),max:Jm(ye.max),minLength:Jm(ye.minLength),maxLength:Jm(ye.maxLength),pattern:Jm(ye.pattern)}:{},name:pe,onChange:Z,onBlur:Z,ref:We=>{if(We){je(pe,ye),Pe=Dt(s,pe);const qe=In(We.value)&&We.querySelectorAll&&We.querySelectorAll("input,select,textarea")[0]||We,ot=qK(qe),Ct=Pe._f.refs||[];if(ot?Ct.find(He=>He===qe):qe===Pe._f.ref)return;Vr(s,pe,{_f:{...Pe._f,...ot?{refs:[...Ct.filter(_j),qe,...Array.isArray(Dt(a,pe))?[{}]:[]],ref:{type:qe.type,name:pe}}:{ref:qe}}}),N(pe,!1,void 0,qe)}else Pe=Dt(s,pe,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||ye.shouldUnregister)&&!(BK(o.array,pe)&&l.action)&&o.unMount.add(pe)}}},ie=()=>t.shouldFocusError&&R0(s,H,o.mount),se=pe=>{vl(pe)&&(m.state.next({disabled:pe}),R0(s,(ye,Pe)=>{const et=Dt(s,Pe);et&&(ye.disabled=et._f.disabled||pe,Array.isArray(et._f.refs)&&et._f.refs.forEach(We=>{We.disabled=et._f.disabled||pe}))},0,!1))},z=(pe,ye)=>async Pe=>{let et;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let We=ls(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:qe,values:ot}=await k();r.errors=qe,We=ls(ot)}else await T(s);if(o.disabled.size)for(const qe of o.disabled)zn(We,qe);if(zn(r.errors,"root"),ra(r.errors)){m.state.next({errors:{}});try{await pe(We,Pe)}catch(qe){et=qe}}else ye&&await ye({...r.errors},Pe),ie(),setTimeout(ie);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ra(r.errors)&&!et,submitCount:r.submitCount+1,errors:r.errors}),et)throw et},Te=(pe,ye={})=>{Dt(s,pe)&&(In(ye.defaultValue)?L(pe,ls(Dt(a,pe))):(L(pe,ye.defaultValue),Vr(a,pe,ls(ye.defaultValue))),ye.keepTouched||zn(r.touchedFields,pe),ye.keepDirty||(zn(r.dirtyFields,pe),r.isDirty=ye.defaultValue?A(pe,ls(Dt(a,pe))):A()),ye.keepError||(zn(r.errors,pe),u.isValid&&h()),m.state.next({...r}))},fe=(pe,ye={})=>{const Pe=pe?ls(pe):a,et=ls(Pe),We=ra(pe),qe=We?a:et;if(ye.keepDefaultValues||(a=Pe),!ye.keepValues){if(ye.keepDirtyValues){const ot=new Set([...o.mount,...Object.keys(Iu(a,i))]);for(const Ct of Array.from(ot))Dt(r.dirtyFields,Ct)?Vr(qe,Ct,Dt(i,Ct)):L(Ct,Dt(qe,Ct))}else{if(vS&&In(pe))for(const ot of o.mount){const Ct=Dt(s,ot);if(Ct&&Ct._f){const He=Array.isArray(Ct._f.refs)?Ct._f.refs[0]:Ct._f.ref;if(Sy(He)){const mt=He.closest("form");if(mt){mt.reset();break}}}}if(ye.keepFieldsRef)for(const ot of o.mount)L(ot,Dt(qe,ot));else s={}}i=t.shouldUnregister?ye.keepDefaultValues?ls(a):{}:ls(qe),m.array.next({values:{...qe}}),m.state.next({values:{...qe}})}o={mount:ye.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!ye.keepIsValid||!!ye.keepDirtyValues||!t.shouldUnregister&&!ra(qe),l.watch=!!t.shouldUnregister,m.state.next({submitCount:ye.keepSubmitCount?r.submitCount:0,isDirty:We?!1:ye.keepDirty?r.isDirty:!!(ye.keepDefaultValues&&!Jo(pe,a)),isSubmitted:ye.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:We?{}:ye.keepDirtyValues?ye.keepDefaultValues&&i?Iu(a,i):r.dirtyFields:ye.keepDefaultValues&&pe?Iu(a,pe):ye.keepDirty?r.dirtyFields:{},touchedFields:ye.keepTouched?r.touchedFields:{},errors:ye.keepErrors?r.errors:{},isSubmitSuccessful:ye.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ie=(pe,ye)=>fe(qi(pe)?pe(i):pe,ye),ce=(pe,ye={})=>{const Pe=Dt(s,pe),et=Pe&&Pe._f;if(et){const We=et.refs?et.refs[0]:et.ref;We.focus&&(We.focus(),ye.shouldSelect&&qi(We.select)&&We.select())}},Ce=pe=>{r={...r,...pe}},at={control:{register:je,unregister:ke,getFieldState:Y,handleSubmit:z,setError:X,_subscribe:J,_runSchema:k,_focusError:ie,_getWatch:S,_getDirty:A,_setValid:h,_setFieldArray:v,_setDisabledField:ve,_setErrors:j,_getFieldArray:E,_reset:fe,_resetDefaultValues:()=>qi(t.defaultValues)&&t.defaultValues().then(pe=>{Ie(pe,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:se,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(pe){l=pe},get _defaultValues(){return a},get _names(){return o},set _names(pe){o=pe},get _formState(){return r},get _options(){return t},set _options(pe){t={...t,...pe}}},subscribe:ue,trigger:R,register:je,handleSubmit:z,watch:ne,setValue:L,getValues:D,reset:Ie,resetField:Te,clearErrors:M,unregister:ke,setError:X,setFocus:ce,getFieldState:Y};return{...at,formControl:at}}function iX(e={}){const t=we.useRef(void 0),r=we.useRef(void 0),[s,a]=we.useState({isDirty:!1,isValidating:!1,isLoading:qi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:qi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!qi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=aX(e);t.current={...o,formState:s}}const i=t.current.control;return i._options=e,VK(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),we.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),we.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),we.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),we.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),we.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),we.useEffect(()=>{var l;e.values&&!Jo(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),we.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=WK(s,i),t.current}const NT=(e,t,r)=>{if(e&&"reportValidity"in e){const s=Dt(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},pN=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?NT(s.ref,r,e):s&&s.refs&&s.refs.forEach(a=>NT(a,r,e))}},kT=(e,t)=>{t.shouldUseNativeValidation&&pN(e,t);const r={};for(const s in e){const a=Dt(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(lX(t.names||Object.keys(e),s)){const l=Object.assign({},Dt(r,s));Vr(l,"root",i),Vr(r,s,l)}else Vr(r,s,i)}return r},lX=(e,t)=>{const r=ST(t);return e.some(s=>ST(s).match(`^${r}\\.\\d+`))};function ST(e){return e.replace(/\]|\[/g,"")}function gt(e,t,r){function s(o,c){var d;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(d=o._zod).traits??(d.traits=new Set),o._zod.traits.add(e),t(o,c);for(const u in l.prototype)u in o||Object.defineProperty(o,u,{value:l.prototype[u].bind(o)});o._zod.constr=l,o._zod.def=c}const a=(r==null?void 0:r.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function l(o){var c;const d=r!=null&&r.Parent?new i:this;s(d,o),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(l,"init",{value:s}),Object.defineProperty(l,Symbol.hasInstance,{value:o=>{var c,d;return r!=null&&r.Parent&&o instanceof r.Parent?!0:(d=(c=o==null?void 0:o._zod)==null?void 0:c.traits)==null?void 0:d.has(e)}}),Object.defineProperty(l,"name",{value:e}),l}class mf extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class V8 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const H8={};function Od(e){return H8}function oX(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,a])=>t.indexOf(+s)===-1).map(([s,a])=>a)}function xN(e,t){return typeof t=="bigint"?t.toString():t}function kS(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function SS(e){return e==null}function CS(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const CT=Symbol("evaluating");function Zr(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==CT)return s===void 0&&(s=CT,s=r()),s},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function Qd(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function eu(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function AT(e){return JSON.stringify(e)}const q8="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ay(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const cX=kS(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xh(e){if(Ay(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ay(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function G8(e){return xh(e)?{...e}:Array.isArray(e)?[...e]:e}const dX=new Set(["string","number","symbol"]);function Ab(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sc(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(s._zod.parent=e),s}function ir(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function uX(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function fX(e,t){const r=e._zod.def,s=eu(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return Qd(this,"shape",a),a},checks:[]});return Sc(e,s)}function mX(e,t){const r=e._zod.def,s=eu(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return Qd(this,"shape",a),a},checks:[]});return Sc(e,s)}function hX(e,t){if(!xh(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=eu(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return Qd(this,"shape",i),i},checks:[]});return Sc(e,a)}function pX(e,t){if(!xh(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return Qd(this,"shape",s),s},checks:e._zod.def.checks};return Sc(e,r)}function xX(e,t){const r=eu(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return Qd(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return Sc(e,r)}function gX(e,t,r){const s=eu(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const l in r){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);r[l]&&(i[l]=e?new e({type:"optional",innerType:a[l]}):a[l])}else for(const l in a)i[l]=e?new e({type:"optional",innerType:a[l]}):a[l];return Qd(this,"shape",i),i},checks:[]});return Sc(t,s)}function yX(e,t,r){const s=eu(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const l in r){if(!(l in i))throw new Error(`Unrecognized key: "${l}"`);r[l]&&(i[l]=new e({type:"nonoptional",innerType:a[l]}))}else for(const l in a)i[l]=new e({type:"nonoptional",innerType:a[l]});return Qd(this,"shape",i),i},checks:[]});return Sc(t,s)}function Yu(e,t=0){var r;if(e.aborted===!0)return!0;for(let s=t;s<e.issues.length;s++)if(((r=e.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function J8(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function yx(e){return typeof e=="string"?e:e==null?void 0:e.message}function Rd(e,t,r){var a,i,l,o,c,d;const s={...e,path:e.path??[]};if(!e.message){const u=yx((l=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:l.call(i,e))??yx((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??yx((c=r.customError)==null?void 0:c.call(r,e))??yx((d=r.localeError)==null?void 0:d.call(r,e))??"Invalid input";s.message=u}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function AS(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function gh(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const K8=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,xN,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ES=gt("$ZodError",K8),Eb=gt("$ZodError",K8,{Parent:Error});function vX(e,t=r=>r.message){const r={},s=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:r}}function bX(e,t=r=>r.message){const r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>s({issues:l}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let l=r,o=0;for(;o<i.path.length;){const c=i.path[o];o===i.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(t(i))):l[c]=l[c]||{_errors:[]},l=l[c],o++}}};return s(e),r}const Tb=e=>(t,r,s,a)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},l=t._zod.run({value:r,issues:[]},i);if(l instanceof Promise)throw new mf;if(l.issues.length){const o=new((a==null?void 0:a.Err)??e)(l.issues.map(c=>Rd(c,i,Od())));throw q8(o,a==null?void 0:a.callee),o}return l.value},jX=Tb(Eb),Pb=e=>async(t,r,s,a)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let l=t._zod.run({value:r,issues:[]},i);if(l instanceof Promise&&(l=await l),l.issues.length){const o=new((a==null?void 0:a.Err)??e)(l.issues.map(c=>Rd(c,i,Od())));throw q8(o,a==null?void 0:a.callee),o}return l.value},_X=Pb(Eb),Ob=e=>(t,r,s)=>{const a=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new mf;return i.issues.length?{success:!1,error:new(e??ES)(i.issues.map(l=>Rd(l,a,Od())))}:{success:!0,data:i.value}},wX=Ob(Eb),Rb=e=>async(t,r,s)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(l=>Rd(l,a,Od())))}:{success:!0,data:i.value}},NX=Rb(Eb),kX=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Tb(e)(t,r,a)},SX=e=>(t,r,s)=>Tb(e)(t,r,s),CX=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Pb(e)(t,r,a)},AX=e=>async(t,r,s)=>Pb(e)(t,r,s),EX=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ob(e)(t,r,a)},TX=e=>(t,r,s)=>Ob(e)(t,r,s),PX=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Rb(e)(t,r,a)},OX=e=>async(t,r,s)=>Rb(e)(t,r,s),RX=/^[cC][^\s-]{8,}$/,LX=/^[0-9a-z]+$/,IX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,FX=/^[0-9a-vA-V]{20}$/,DX=/^[A-Za-z0-9]{27}$/,$X=/^[a-zA-Z0-9_-]{21}$/,MX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,BX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ET=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,UX=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,zX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function WX(){return new RegExp(zX,"u")}const VX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,qX=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,GX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JX=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,X8=/^[A-Za-z0-9_-]*$/,KX=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,XX=/^\+(?:[0-9]){6,14}[0-9]$/,Y8="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",YX=new RegExp(`^${Y8}$`);function Z8(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ZX(e){return new RegExp(`^${Z8(e)}$`)}function QX(e){const t=Z8({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${Y8}T(?:${s})$`)}const eY=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},tY=/^[^A-Z]*$/,rY=/^[^a-z]*$/,Dl=gt("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),nY=gt("$ZodCheckMaxLength",(e,t)=>{var r;Dl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!SS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const a=s.value;if(a.length<=t.maximum)return;const l=AS(a);s.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),sY=gt("$ZodCheckMinLength",(e,t)=>{var r;Dl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!SS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const a=s.value;if(a.length>=t.minimum)return;const l=AS(a);s.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),aY=gt("$ZodCheckLengthEquals",(e,t)=>{var r;Dl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!SS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=s=>{const a=s.value,i=a.length;if(i===t.length)return;const l=AS(a),o=i>t.length;s.issues.push({origin:l,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Lb=gt("$ZodCheckStringFormat",(e,t)=>{var r,s;Dl.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),iY=gt("$ZodCheckRegex",(e,t)=>{Lb.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),lY=gt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=tY),Lb.init(e,t)}),oY=gt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=rY),Lb.init(e,t)}),cY=gt("$ZodCheckIncludes",(e,t)=>{Dl.init(e,t);const r=Ab(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),dY=gt("$ZodCheckStartsWith",(e,t)=>{Dl.init(e,t);const r=new RegExp(`^${Ab(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),uY=gt("$ZodCheckEndsWith",(e,t)=>{Dl.init(e,t);const r=new RegExp(`.*${Ab(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),fY=gt("$ZodCheckOverwrite",(e,t)=>{Dl.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class mY{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(l=>l),a=Math.min(...s.map(l=>l.length-l.trimStart().length)),i=s.map(l=>l.slice(a)).map(l=>" ".repeat(this.indent*2)+l);for(const l of i)this.content.push(l)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const hY={major:4,minor:1,patch:12},as=gt("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=hY;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const l of i._zod.onattach)l(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,c,d)=>{let u=Yu(o),f;for(const m of c){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(u)continue;const g=o.issues.length,x=m._zod.check(o);if(x instanceof Promise&&(d==null?void 0:d.async)===!1)throw new mf;if(f||x instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await x,o.issues.length!==g&&(u||(u=Yu(o,g)))});else{if(o.issues.length===g)continue;u||(u=Yu(o,g))}}return f?f.then(()=>o):o},l=(o,c,d)=>{if(Yu(o))return o.aborted=!0,o;const u=i(c,s,d);if(u instanceof Promise){if(d.async===!1)throw new mf;return u.then(f=>e._zod.parse(f,d))}return e._zod.parse(u,d)};e._zod.run=(o,c)=>{if(c.skipChecks)return e._zod.parse(o,c);if(c.direction==="backward"){const u=e._zod.parse({value:o.value,issues:[]},{...c,skipChecks:!0});return u instanceof Promise?u.then(f=>l(f,o,c)):l(u,o,c)}const d=e._zod.parse(o,c);if(d instanceof Promise){if(c.async===!1)throw new mf;return d.then(u=>i(u,s,c))}return i(d,s,c)}}e["~standard"]={validate:i=>{var l;try{const o=wX(e,i);return o.success?{value:o.data}:{issues:(l=o.error)==null?void 0:l.issues}}catch{return NX(e,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),TS=gt("$ZodString",(e,t)=>{var r;as.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??eY(e._zod.bag),e._zod.parse=(s,a)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),xn=gt("$ZodStringFormat",(e,t)=>{Lb.init(e,t),TS.init(e,t)}),pY=gt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=BX),xn.init(e,t)}),xY=gt("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ET(s))}else t.pattern??(t.pattern=ET());xn.init(e,t)}),gY=gt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=UX),xn.init(e,t)}),yY=gt("$ZodURL",(e,t)=>{xn.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),a=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:KX.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),vY=gt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=WX()),xn.init(e,t)}),bY=gt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=$X),xn.init(e,t)}),jY=gt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=RX),xn.init(e,t)}),_Y=gt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=LX),xn.init(e,t)}),wY=gt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=IX),xn.init(e,t)}),NY=gt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=FX),xn.init(e,t)}),kY=gt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=DX),xn.init(e,t)}),SY=gt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=QX(t)),xn.init(e,t)}),CY=gt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=YX),xn.init(e,t)}),AY=gt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ZX(t)),xn.init(e,t)}),EY=gt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=MX),xn.init(e,t)}),TY=gt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=VX),xn.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),PY=gt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=HX),xn.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),OY=gt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=qX),xn.init(e,t)}),RY=gt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=GX),xn.init(e,t),e._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[a,i]=s;if(!i)throw new Error;const l=Number(i);if(`${l}`!==i)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Q8(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const LY=gt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=JX),xn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Q8(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function IY(e){if(!X8.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Q8(r)}const FY=gt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=X8),xn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{IY(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),DY=gt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=XX),xn.init(e,t)});function $Y(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const a=JSON.parse(atob(s));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const MY=gt("$ZodJWT",(e,t)=>{xn.init(e,t),e._zod.check=r=>{$Y(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),BY=gt("$ZodUnknown",(e,t)=>{as.init(e,t),e._zod.parse=r=>r}),UY=gt("$ZodNever",(e,t)=>{as.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function TT(e,t,r){e.issues.length&&t.issues.push(...J8(r,e.issues)),t.value[r]=e.value}const zY=gt("$ZodArray",(e,t)=>{as.init(e,t),e._zod.parse=(r,s)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let l=0;l<a.length;l++){const o=a[l],c=t.element._zod.run({value:o,issues:[]},s);c instanceof Promise?i.push(c.then(d=>TT(d,r,l))):TT(c,r,l)}return i.length?Promise.all(i).then(()=>r):r}});function Ey(e,t,r,s){e.issues.length&&t.issues.push(...J8(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}function e7(e){var s,a,i,l;const t=Object.keys(e.shape);for(const o of t)if(!((l=(i=(a=(s=e.shape)==null?void 0:s[o])==null?void 0:a._zod)==null?void 0:i.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const r=uX(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function t7(e,t,r,s,a,i){const l=[],o=a.keySet,c=a.catchall._zod,d=c.def.type;for(const u of Object.keys(t)){if(o.has(u))continue;if(d==="never"){l.push(u);continue}const f=c.run({value:t[u],issues:[]},s);f instanceof Promise?e.push(f.then(m=>Ey(m,r,u,t))):Ey(f,r,u,t)}return l.length&&r.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const WY=gt("$ZodObject",(e,t)=>{as.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const o=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...o};return Object.defineProperty(t,"shape",{value:c}),c}})}const s=kS(()=>e7(t));Zr(e._zod,"propValues",()=>{const o=t.shape,c={};for(const d in o){const u=o[d]._zod;if(u.values){c[d]??(c[d]=new Set);for(const f of u.values)c[d].add(f)}}return c});const a=Ay,i=t.catchall;let l;e._zod.parse=(o,c)=>{l??(l=s.value);const d=o.value;if(!a(d))return o.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),o;o.value={};const u=[],f=l.shape;for(const m of l.keys){const x=f[m]._zod.run({value:d[m],issues:[]},c);x instanceof Promise?u.push(x.then(h=>Ey(h,o,m,d))):Ey(x,o,m,d)}return i?t7(u,d,o,c,s.value,e):u.length?Promise.all(u).then(()=>o):o}}),VY=gt("$ZodObjectJIT",(e,t)=>{WY.init(e,t);const r=e._zod.parse,s=kS(()=>e7(t)),a=m=>{const g=new mY(["shape","payload","ctx"]),x=s.value,h=j=>{const N=AT(j);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};g.write("const input = payload.value;");const p=Object.create(null);let v=0;for(const j of x.keys)p[j]=`key_${v++}`;g.write("const newResult = {};");for(const j of x.keys){const N=p[j],w=AT(j);g.write(`const ${N} = ${h(j)};`),g.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${w}, ...iss.path] : [${w}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${w} in input) {
            newResult[${w}] = undefined;
          }
        } else {
          newResult[${w}] = ${N}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const b=g.compile();return(j,N)=>b(m,j,N)};let i;const l=Ay,o=!H8.jitless,d=o&&cX.value,u=t.catchall;let f;e._zod.parse=(m,g)=>{f??(f=s.value);const x=m.value;return l(x)?o&&d&&(g==null?void 0:g.async)===!1&&g.jitless!==!0?(i||(i=a(t.shape)),m=i(m,g),u?t7([],x,m,g,f,e):m):r(m,g):(m.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),m)}});function PT(e,t,r,s){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const a=e.filter(i=>!Yu(i));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(l=>Rd(l,s,Od())))}),t)}const HY=gt("$ZodUnion",(e,t)=>{as.init(e,t),Zr(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),Zr(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),Zr(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),Zr(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>CS(i.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return s(a,i);let l=!1;const o=[];for(const c of t.options){const d=c._zod.run({value:a.value,issues:[]},i);if(d instanceof Promise)o.push(d),l=!0;else{if(d.issues.length===0)return d;o.push(d)}}return l?Promise.all(o).then(c=>PT(c,a,e,i)):PT(o,a,e,i)}}),qY=gt("$ZodIntersection",(e,t)=>{as.init(e,t),e._zod.parse=(r,s)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},s),l=t.right._zod.run({value:a,issues:[]},s);return i instanceof Promise||l instanceof Promise?Promise.all([i,l]).then(([c,d])=>OT(r,c,d)):OT(r,i,l)}});function gN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(xh(e)&&xh(t)){const r=Object.keys(t),s=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of s){const l=gN(e[i],t[i]);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};a[i]=l.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const a=e[s],i=t[s],l=gN(a,i);if(!l.valid)return{valid:!1,mergeErrorPath:[s,...l.mergeErrorPath]};r.push(l.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function OT(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Yu(e))return e;const s=gN(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const GY=gt("$ZodEnum",(e,t)=>{as.init(e,t);const r=oX(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(a=>dX.has(typeof a)).map(a=>typeof a=="string"?Ab(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const l=a.value;return s.has(l)||a.issues.push({code:"invalid_value",values:r,input:l,inst:e}),a}}),JY=gt("$ZodTransform",(e,t)=>{as.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new V8(e.constructor.name);const a=t.transform(r.value,r);if(s.async)return(a instanceof Promise?a:Promise.resolve(a)).then(l=>(r.value=l,r));if(a instanceof Promise)throw new mf;return r.value=a,r}});function RT(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const KY=gt("$ZodOptional",(e,t)=>{as.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Zr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Zr(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${CS(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>RT(i,r.value)):RT(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),XY=gt("$ZodNullable",(e,t)=>{as.init(e,t),Zr(e._zod,"optin",()=>t.innerType._zod.optin),Zr(e._zod,"optout",()=>t.innerType._zod.optout),Zr(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${CS(r.source)}|null)$`):void 0}),Zr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),YY=gt("$ZodDefault",(e,t)=>{as.init(e,t),e._zod.optin="optional",Zr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>LT(i,t)):LT(a,t)}});function LT(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ZY=gt("$ZodPrefault",(e,t)=>{as.init(e,t),e._zod.optin="optional",Zr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),QY=gt("$ZodNonOptional",(e,t)=>{as.init(e,t),Zr(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>IT(i,e)):IT(a,e)}});function IT(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const eZ=gt("$ZodCatch",(e,t)=>{as.init(e,t),Zr(e._zod,"optin",()=>t.innerType._zod.optin),Zr(e._zod,"optout",()=>t.innerType._zod.optout),Zr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(l=>Rd(l,s,Od()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>Rd(i,s,Od()))},input:r.value}),r.issues=[]),r)}}),tZ=gt("$ZodPipe",(e,t)=>{as.init(e,t),Zr(e._zod,"values",()=>t.in._zod.values),Zr(e._zod,"optin",()=>t.in._zod.optin),Zr(e._zod,"optout",()=>t.out._zod.optout),Zr(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{if(s.direction==="backward"){const i=t.out._zod.run(r,s);return i instanceof Promise?i.then(l=>vx(l,t.in,s)):vx(i,t.in,s)}const a=t.in._zod.run(r,s);return a instanceof Promise?a.then(i=>vx(i,t.out,s)):vx(a,t.out,s)}});function vx(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const rZ=gt("$ZodReadonly",(e,t)=>{as.init(e,t),Zr(e._zod,"propValues",()=>t.innerType._zod.propValues),Zr(e._zod,"values",()=>t.innerType._zod.values),Zr(e._zod,"optin",()=>t.innerType._zod.optin),Zr(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(FT):FT(a)}});function FT(e){return e.value=Object.freeze(e.value),e}const nZ=gt("$ZodCustom",(e,t)=>{Dl.init(e,t),as.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,a=t.fn(s);if(a instanceof Promise)return a.then(i=>DT(i,r,s,e));DT(a,r,s,e)}});function DT(e,t,r,s){if(!e){const a={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(a.params=s._zod.def.params),t.issues.push(gh(a))}}class sZ{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const a={...s,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function aZ(){return new sZ}const bx=aZ();function iZ(e,t){return new e({type:"string",...ir(t)})}function lZ(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ir(t)})}function $T(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ir(t)})}function oZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ir(t)})}function cZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ir(t)})}function dZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ir(t)})}function uZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ir(t)})}function fZ(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ir(t)})}function mZ(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ir(t)})}function hZ(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ir(t)})}function pZ(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ir(t)})}function xZ(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ir(t)})}function gZ(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ir(t)})}function yZ(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ir(t)})}function vZ(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ir(t)})}function bZ(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ir(t)})}function jZ(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ir(t)})}function _Z(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ir(t)})}function wZ(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ir(t)})}function NZ(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ir(t)})}function kZ(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ir(t)})}function SZ(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ir(t)})}function CZ(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ir(t)})}function AZ(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ir(t)})}function EZ(e,t){return new e({type:"string",format:"date",check:"string_format",...ir(t)})}function TZ(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ir(t)})}function PZ(e,t){return new e({type:"string",format:"duration",check:"string_format",...ir(t)})}function OZ(e){return new e({type:"unknown"})}function RZ(e,t){return new e({type:"never",...ir(t)})}function r7(e,t){return new nY({check:"max_length",...ir(t),maximum:e})}function Ty(e,t){return new sY({check:"min_length",...ir(t),minimum:e})}function n7(e,t){return new aY({check:"length_equals",...ir(t),length:e})}function LZ(e,t){return new iY({check:"string_format",format:"regex",...ir(t),pattern:e})}function IZ(e){return new lY({check:"string_format",format:"lowercase",...ir(e)})}function FZ(e){return new oY({check:"string_format",format:"uppercase",...ir(e)})}function DZ(e,t){return new cY({check:"string_format",format:"includes",...ir(t),includes:e})}function $Z(e,t){return new dY({check:"string_format",format:"starts_with",...ir(t),prefix:e})}function MZ(e,t){return new uY({check:"string_format",format:"ends_with",...ir(t),suffix:e})}function Ap(e){return new fY({check:"overwrite",tx:e})}function BZ(e){return Ap(t=>t.normalize(e))}function UZ(){return Ap(e=>e.trim())}function zZ(){return Ap(e=>e.toLowerCase())}function WZ(){return Ap(e=>e.toUpperCase())}function VZ(e,t,r){return new e({type:"array",element:t,...ir(r)})}function HZ(e,t,r){return new e({type:"custom",check:"custom",fn:t,...ir(r)})}function qZ(e){const t=GZ(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(gh(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(gh(a))}},e(r.value,r)));return t}function GZ(e,t){const r=new Dl({check:"custom",...ir(t)});return r._zod.check=e,r}function MT(e,t){try{var r=e()}catch(s){return t(s)}return r&&r.then?r.then(void 0,t):r}function JZ(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!r[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var c=r[l].types,d=c&&c[s.code];r[l]=_S(l,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r}function KZ(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!r[l])if(s.code==="invalid_union"&&s.errors.length>0){var o=s.errors[0][0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if(s.code==="invalid_union"&&s.errors.forEach(function(u){return u.forEach(function(f){return e.push(f)})}),t){var c=r[l].types,d=c&&c[s.code];r[l]=_S(l,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r}function XZ(e,t,r){if(r===void 0&&(r={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(e))return function(s,a,i){try{return Promise.resolve(MT(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(l){return i.shouldUseNativeValidation&&pN({},i),{errors:{},values:r.raw?Object.assign({},s):l}})},function(l){if(function(o){return Array.isArray(o==null?void 0:o.issues)}(l))return{values:{},errors:kT(JZ(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(e))return function(s,a,i){try{return Promise.resolve(MT(function(){return Promise.resolve((r.mode==="sync"?jX:_X)(e,s,t)).then(function(l){return i.shouldUseNativeValidation&&pN({},i),{errors:{},values:r.raw?Object.assign({},s):l}})},function(l){if(function(o){return o instanceof ES}(l))return{values:{},errors:kT(KZ(l.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const YZ=gt("ZodISODateTime",(e,t)=>{SY.init(e,t),Sn.init(e,t)});function ZZ(e){return AZ(YZ,e)}const QZ=gt("ZodISODate",(e,t)=>{CY.init(e,t),Sn.init(e,t)});function eQ(e){return EZ(QZ,e)}const tQ=gt("ZodISOTime",(e,t)=>{AY.init(e,t),Sn.init(e,t)});function rQ(e){return TZ(tQ,e)}const nQ=gt("ZodISODuration",(e,t)=>{EY.init(e,t),Sn.init(e,t)});function sQ(e){return PZ(nQ,e)}const aQ=(e,t)=>{ES.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>bX(e,r)},flatten:{value:r=>vX(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,xN,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,xN,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ei=gt("ZodError",aQ,{Parent:Error}),iQ=Tb(Ei),lQ=Pb(Ei),oQ=Ob(Ei),cQ=Rb(Ei),dQ=kX(Ei),uQ=SX(Ei),fQ=CX(Ei),mQ=AX(Ei),hQ=EX(Ei),pQ=TX(Ei),xQ=PX(Ei),gQ=OX(Ei),vs=gt("ZodType",(e,t)=>(as.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(eu(t,{checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),e.clone=(r,s)=>Sc(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>iQ(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>oQ(e,r,s),e.parseAsync=async(r,s)=>lQ(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>cQ(e,r,s),e.spa=e.safeParseAsync,e.encode=(r,s)=>dQ(e,r,s),e.decode=(r,s)=>uQ(e,r,s),e.encodeAsync=async(r,s)=>fQ(e,r,s),e.decodeAsync=async(r,s)=>mQ(e,r,s),e.safeEncode=(r,s)=>hQ(e,r,s),e.safeDecode=(r,s)=>pQ(e,r,s),e.safeEncodeAsync=async(r,s)=>xQ(e,r,s),e.safeDecodeAsync=async(r,s)=>gQ(e,r,s),e.refine=(r,s)=>e.check(cee(r,s)),e.superRefine=r=>e.check(dee(r)),e.overwrite=r=>e.check(Ap(r)),e.optional=()=>zT(e),e.nullable=()=>WT(e),e.nullish=()=>zT(WT(e)),e.nonoptional=r=>ree(e,r),e.array=()=>UQ(e),e.or=r=>HQ([e,r]),e.and=r=>GQ(e,r),e.transform=r=>VT(e,XQ(r)),e.default=r=>QQ(e,r),e.prefault=r=>tee(e,r),e.catch=r=>see(e,r),e.pipe=r=>VT(e,r),e.readonly=()=>lee(e),e.describe=r=>{const s=e.clone();return bx.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){var r;return(r=bx.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return bx.get(e);const s=e.clone();return bx.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),s7=gt("_ZodString",(e,t)=>{TS.init(e,t),vs.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(LZ(...s)),e.includes=(...s)=>e.check(DZ(...s)),e.startsWith=(...s)=>e.check($Z(...s)),e.endsWith=(...s)=>e.check(MZ(...s)),e.min=(...s)=>e.check(Ty(...s)),e.max=(...s)=>e.check(r7(...s)),e.length=(...s)=>e.check(n7(...s)),e.nonempty=(...s)=>e.check(Ty(1,...s)),e.lowercase=s=>e.check(IZ(s)),e.uppercase=s=>e.check(FZ(s)),e.trim=()=>e.check(UZ()),e.normalize=(...s)=>e.check(BZ(...s)),e.toLowerCase=()=>e.check(zZ()),e.toUpperCase=()=>e.check(WZ())}),yQ=gt("ZodString",(e,t)=>{TS.init(e,t),s7.init(e,t),e.email=r=>e.check(lZ(bQ,r)),e.url=r=>e.check(fZ(jQ,r)),e.jwt=r=>e.check(CZ(FQ,r)),e.emoji=r=>e.check(mZ(_Q,r)),e.guid=r=>e.check($T(BT,r)),e.uuid=r=>e.check(oZ(jx,r)),e.uuidv4=r=>e.check(cZ(jx,r)),e.uuidv6=r=>e.check(dZ(jx,r)),e.uuidv7=r=>e.check(uZ(jx,r)),e.nanoid=r=>e.check(hZ(wQ,r)),e.guid=r=>e.check($T(BT,r)),e.cuid=r=>e.check(pZ(NQ,r)),e.cuid2=r=>e.check(xZ(kQ,r)),e.ulid=r=>e.check(gZ(SQ,r)),e.base64=r=>e.check(NZ(RQ,r)),e.base64url=r=>e.check(kZ(LQ,r)),e.xid=r=>e.check(yZ(CQ,r)),e.ksuid=r=>e.check(vZ(AQ,r)),e.ipv4=r=>e.check(bZ(EQ,r)),e.ipv6=r=>e.check(jZ(TQ,r)),e.cidrv4=r=>e.check(_Z(PQ,r)),e.cidrv6=r=>e.check(wZ(OQ,r)),e.e164=r=>e.check(SZ(IQ,r)),e.datetime=r=>e.check(ZZ(r)),e.date=r=>e.check(eQ(r)),e.time=r=>e.check(rQ(r)),e.duration=r=>e.check(sQ(r))});function vQ(e){return iZ(yQ,e)}const Sn=gt("ZodStringFormat",(e,t)=>{xn.init(e,t),s7.init(e,t)}),bQ=gt("ZodEmail",(e,t)=>{gY.init(e,t),Sn.init(e,t)}),BT=gt("ZodGUID",(e,t)=>{pY.init(e,t),Sn.init(e,t)}),jx=gt("ZodUUID",(e,t)=>{xY.init(e,t),Sn.init(e,t)}),jQ=gt("ZodURL",(e,t)=>{yY.init(e,t),Sn.init(e,t)}),_Q=gt("ZodEmoji",(e,t)=>{vY.init(e,t),Sn.init(e,t)}),wQ=gt("ZodNanoID",(e,t)=>{bY.init(e,t),Sn.init(e,t)}),NQ=gt("ZodCUID",(e,t)=>{jY.init(e,t),Sn.init(e,t)}),kQ=gt("ZodCUID2",(e,t)=>{_Y.init(e,t),Sn.init(e,t)}),SQ=gt("ZodULID",(e,t)=>{wY.init(e,t),Sn.init(e,t)}),CQ=gt("ZodXID",(e,t)=>{NY.init(e,t),Sn.init(e,t)}),AQ=gt("ZodKSUID",(e,t)=>{kY.init(e,t),Sn.init(e,t)}),EQ=gt("ZodIPv4",(e,t)=>{TY.init(e,t),Sn.init(e,t)}),TQ=gt("ZodIPv6",(e,t)=>{PY.init(e,t),Sn.init(e,t)}),PQ=gt("ZodCIDRv4",(e,t)=>{OY.init(e,t),Sn.init(e,t)}),OQ=gt("ZodCIDRv6",(e,t)=>{RY.init(e,t),Sn.init(e,t)}),RQ=gt("ZodBase64",(e,t)=>{LY.init(e,t),Sn.init(e,t)}),LQ=gt("ZodBase64URL",(e,t)=>{FY.init(e,t),Sn.init(e,t)}),IQ=gt("ZodE164",(e,t)=>{DY.init(e,t),Sn.init(e,t)}),FQ=gt("ZodJWT",(e,t)=>{MY.init(e,t),Sn.init(e,t)}),DQ=gt("ZodUnknown",(e,t)=>{BY.init(e,t),vs.init(e,t)});function UT(){return OZ(DQ)}const $Q=gt("ZodNever",(e,t)=>{UY.init(e,t),vs.init(e,t)});function MQ(e){return RZ($Q,e)}const BQ=gt("ZodArray",(e,t)=>{zY.init(e,t),vs.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(Ty(r,s)),e.nonempty=r=>e.check(Ty(1,r)),e.max=(r,s)=>e.check(r7(r,s)),e.length=(r,s)=>e.check(n7(r,s)),e.unwrap=()=>e.element});function UQ(e,t){return VZ(BQ,e,t)}const zQ=gt("ZodObject",(e,t)=>{VY.init(e,t),vs.init(e,t),Zr(e,"shape",()=>t.shape),e.keyof=()=>JQ(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:UT()}),e.loose=()=>e.clone({...e._zod.def,catchall:UT()}),e.strict=()=>e.clone({...e._zod.def,catchall:MQ()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>hX(e,r),e.safeExtend=r=>pX(e,r),e.merge=r=>xX(e,r),e.pick=r=>fX(e,r),e.omit=r=>mX(e,r),e.partial=(...r)=>gX(a7,e,r[0]),e.required=(...r)=>yX(i7,e,r[0])});function WQ(e,t){const r={type:"object",shape:e??{},...ir(t)};return new zQ(r)}const VQ=gt("ZodUnion",(e,t)=>{HY.init(e,t),vs.init(e,t),e.options=t.options});function HQ(e,t){return new VQ({type:"union",options:e,...ir(t)})}const qQ=gt("ZodIntersection",(e,t)=>{qY.init(e,t),vs.init(e,t)});function GQ(e,t){return new qQ({type:"intersection",left:e,right:t})}const yN=gt("ZodEnum",(e,t)=>{GY.init(e,t),vs.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,a)=>{const i={};for(const l of s)if(r.has(l))i[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new yN({...t,checks:[],...ir(a),entries:i})},e.exclude=(s,a)=>{const i={...t.entries};for(const l of s)if(r.has(l))delete i[l];else throw new Error(`Key ${l} not found in enum`);return new yN({...t,checks:[],...ir(a),entries:i})}});function JQ(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new yN({type:"enum",entries:r,...ir(t)})}const KQ=gt("ZodTransform",(e,t)=>{JY.init(e,t),vs.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new V8(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(gh(i,r.value,t));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=e),r.issues.push(gh(l))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function XQ(e){return new KQ({type:"transform",transform:e})}const a7=gt("ZodOptional",(e,t)=>{KY.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zT(e){return new a7({type:"optional",innerType:e})}const YQ=gt("ZodNullable",(e,t)=>{XY.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function WT(e){return new YQ({type:"nullable",innerType:e})}const ZQ=gt("ZodDefault",(e,t)=>{YY.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function QQ(e,t){return new ZQ({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():G8(t)}})}const eee=gt("ZodPrefault",(e,t)=>{ZY.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tee(e,t){return new eee({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():G8(t)}})}const i7=gt("ZodNonOptional",(e,t)=>{QY.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ree(e,t){return new i7({type:"nonoptional",innerType:e,...ir(t)})}const nee=gt("ZodCatch",(e,t)=>{eZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function see(e,t){return new nee({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const aee=gt("ZodPipe",(e,t)=>{tZ.init(e,t),vs.init(e,t),e.in=t.in,e.out=t.out});function VT(e,t){return new aee({type:"pipe",in:e,out:t})}const iee=gt("ZodReadonly",(e,t)=>{rZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lee(e){return new iee({type:"readonly",innerType:e})}const oee=gt("ZodCustom",(e,t)=>{nZ.init(e,t),vs.init(e,t)});function cee(e,t={}){return HZ(oee,e,t)}function dee(e){return qZ(e)}const uee=e=>G.post("/auth/forgot-password",{email:e}),fee=WQ({email:vQ().min(1,"Email is required").email("Invalid email format")});function mee(){var f;const[e,t]=y.useState(null),[r,s]=y.useState(null),a=Tt(),{register:i,handleSubmit:l,formState:{errors:o,isSubmitting:c}}=iX({resolver:XZ(fee)}),d=async m=>{var g,x,h,p;t(null),s(null);try{await uee({email:m.email}),s("If the email exists, an OTP has been sent to your inbox.")}catch(v){const b=((x=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:x.detail)||((p=(h=v==null?void 0:v.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to process request";t(b)}},u=(f=o==null?void 0:o.email)!=null&&f.message?String(o.email.message):null;return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(wr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(wr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(wr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(wr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>a("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:m=>m.stopPropagation(),role:"presentation",children:[n.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Enter your email and well send you an OTP."}),(e||u)&&n.jsx("div",{className:"mb-4 bg-red-900/40 border border-red-500/40 text-red-200 px-4 py-3 rounded-lg text-sm",children:e||u}),r&&n.jsx("div",{className:"mb-4 bg-emerald-900/30 border border-emerald-500/30 text-emerald-200 px-4 py-3 rounded-lg text-sm",children:r}),n.jsxs("form",{onSubmit:l(d),className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ky,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{...i("email"),autoFocus:!0,type:"email",placeholder:"",className:`
                        w-full pl-10 pr-4 py-3 rounded-lg
                        bg-[#0b0f1f] border text-white
                        focus:outline-none focus:ring-2
                        ${o.email?"border-red-500/40 focus:ring-red-400 focus:border-red-400":"border-[#20243a] focus:ring-emerald-400 focus:border-emerald-400"}
                      `})]})]}),n.jsxs("button",{type:"submit",disabled:c,className:`
                    w-full flex items-center justify-center gap-2
                    bg-purple-600
                    text-white py-3 rounded-lg font-semibold
                    hover:bg-purple-700 transition
                    disabled:opacity-60
                  `,children:[c?"Sending...":"Send OTP",!c&&n.jsx(yS,{})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[n.jsx(wr,{to:"/login",className:"text-emerald-300",children:"Back to login"}),n.jsx(wr,{to:"/register",className:"text-gray-300",children:"Register"})]})]})]})})]})})})]})}const hee="text-purple-500",pee="text-emerald-400";function wj(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState(!0),[i,l]=y.useState(null);return y.useEffect(()=>{(async()=>{a(!0),l(null);try{const c=await G.get("/public/careers/jobs");r(c.data||[])}catch{try{const d=await G.get("/v1/jobs");r(d.data||[])}catch(d){l(d)}}finally{a(!1)}})()},[]),n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx("a",{href:"#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx("a",{href:"#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx("a",{href:"#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(wr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("section",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsxs("div",{className:"relative px-8 py-16 md:px-16 text-center text-white",children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-[#d9c9ff]",children:["Hiring shouldn't feel ",n.jsx("span",{className:pee,children:"chaotic"}),"."]}),n.jsx("p",{className:"mt-4 text-lg text-gray-300",children:"ATS-HR brings clarity, confidence, and purpose to the way careers grow."}),n.jsx("div",{className:"mt-6 inline-flex items-center px-5 py-2 rounded-full bg-white text-gray-700 text-sm font-medium",children:"Because careers deserve thoughtful systems."}),n.jsx("div",{className:"mt-10 flex justify-center",children:n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg px-8 py-6 max-w-2xl w-full",children:[n.jsx("div",{className:`text-sm font-semibold ${hee}`,children:"Purpose"}),n.jsx("p",{className:"mt-3 text-gray-700",children:"ATS-HR exists to bring clarity and trust to hiring and career journeys."})]})})]})]})})}),n.jsx("section",{className:"py-12",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"bg-[#0b1224] rounded-3xl px-8 py-12 shadow-2xl",children:[n.jsxs("section",{id:"what-we-do",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff] text-center",children:"What We Do"}),n.jsx("p",{className:"mt-3 text-gray-300 max-w-3xl mx-auto text-center",children:"ATS-HR delivers a platform that simplifies recruiting workflows while building confidence for candidates."}),n.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Features"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Structured hiring pipelines with clear stage visibility."}),n.jsx("li",{children:"Smart matching and filters to surface the right talent faster."}),n.jsx("li",{children:"Collaborative feedback, notes, and interview scheduling in one place."})]})]}),n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"What We Solve"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Recruiters get organized workflows and better decision-making."}),n.jsx("li",{children:"Candidates experience transparent, human-first hiring."}),n.jsx("li",{children:"Teams move faster with shared context and clarity."})]})]})]})]}),n.jsxs("section",{id:"who-we-are",className:"mt-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff] text-center",children:"Who We Are"}),n.jsx("p",{className:"mt-3 text-gray-300 max-w-3xl mx-auto text-center",children:"We are a mission-driven team focused on trust, fairness, and clarity in hiring."}),n.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purpose & Mission"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Our mission is to make hiring feel thoughtful and transparent."}),n.jsx("li",{children:"We help teams and candidates build momentum together through clarity and structure."})]})]}),n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Values & Trust"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"We lead with clarity and respect every candidate experience."}),n.jsx("li",{children:"We build systems that earn long-term trust, not just short-term efficiency."})]})]})]})]}),n.jsxs("section",{id:"jobs",className:"mt-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff]",children:"Open Opportunities"}),s?n.jsx("div",{className:"mt-6 text-gray-300",children:"Loading openings..."}):i?n.jsx("div",{className:"mt-6 text-gray-300",children:"We could not load openings right now. Please try again later."}):t.length===0?n.jsx("div",{className:"mt-6 text-gray-300",children:"No active openings right now. Please check back soon."}):n.jsx("div",{className:"mt-6 grid gap-6 md:grid-cols-2",children:t.map(o=>n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-purple-700",children:o.title}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-sm",children:[o.location&&n.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold",children:o.location}),o.job_type&&n.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold",children:o.job_type})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>{if(!localStorage.getItem("access_token")){e("/register");return}e(`/careers/job/${o.id}`)},className:"inline-flex items-center px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Apply"})})]},o.id))})]})]})})}),n.jsx("footer",{className:"mt-12 bg-[#0b1224] border-t border-white/10",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 text-sm text-gray-300 flex flex-col md:flex-row items-center justify-between gap-3",children:[n.jsx("div",{children:" ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{children:"Privacy Policy"}),n.jsx("span",{children:"Terms"}),n.jsx("span",{children:"Contact"})]})]})})]})}const vN=e=>Array.isArray(e)?e:[],Is=(...e)=>{for(const t of e)if(t!=null&&String(t).trim()!=="")return t;return""},xee=e=>vN(e).map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||"").filter(Boolean),gee=(e={})=>{var a,i;const t=String(Is(e.id,e.job_id,e.requirement_id)).trim(),r=Is(e.min_experience,e.minimum_experience,e.experience_min),s=Is(e.max_experience,e.maximum_experience,e.experience_max);return{...e,id:t,job_id:String(Is(e.job_id,e.id,e.requirement_id)).trim(),requirement_id:String(Is(e.requirement_id,e.id,e.job_id)).trim(),title:Is(e.title,e.job_title,e.requirement_title),location:Is(e.location,e.job_location,e.city),department:Is(e.department,e.practice,e.domain),skills:xee(Is(e.skills,e.skills_mandatory,e.required_skills)||[]),status:String(Is(e.status,e.workflow_status,e.stage,"active")).trim().toLowerCase(),mode:String(Is(e.mode,e.work_mode,e.work_type)).trim().toLowerCase(),min_experience:r,max_experience:s,experience:r!==""||s!==""?`${r||0} - ${s||"Any"} yrs`:"",no_of_positions:Number(Is(e.no_of_positions,e.positions_count,e.openings)||1),budget:Is(e.budget,e.salary_range,e.ctc_range),client_name:Is(e.client_name,(a=e.client)==null?void 0:a.client_name,(i=e.client)==null?void 0:i.name,e.company_name),account_manager:e.account_manager||e.am||null,created_at:Is(e.created_at,e.assigned_at,e.updated_at),updated_at:Is(e.updated_at,e.created_at)}},yee=(e={})=>{var s,a;const t=vN((e==null?void 0:e.jobs)||((s=e==null?void 0:e.data)==null?void 0:s.jobs)||(e==null?void 0:e.data)||e);return t.length>0?t:vN((e==null?void 0:e.requirements)||((a=e==null?void 0:e.data)==null?void 0:a.requirements)).map(gee)},PS=e=>G.get(`/v1/jobs/${e}`),vee=e=>G.post("/v1/jobs",e),bee=(e,t)=>G.put(`/v1/jobs/${e}`,t),Ep=async()=>{var r,s;const e=[()=>G.get("/v1/recruiter/assigned-jobs"),()=>G.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),()=>G.get("/v1/workflow/recruiter/requirements")];let t=null;for(const a of e)try{const i=await a(),l=yee(i==null?void 0:i.data);return{...i,data:{...(i==null?void 0:i.data)||{},jobs:l,total:Number(((r=i==null?void 0:i.data)==null?void 0:r.total)||l.length)}}}catch(i){t=i;const l=(s=i==null?void 0:i.response)==null?void 0:s.status;if(![403,404].includes(l))throw i}throw t||new Error("Failed to load assigned jobs")},jee=()=>G.get("/v1/jobs/submissions"),_ee=e=>G.get(`/v1/recruiter/jobs/${e}/submissions`),l7=(e,t)=>G.post(`/v1/jobs/${e}/jd`,t,{headers:{"Content-Type":"multipart/form-data"}}),o7=async(e,t=[])=>{for(const r of t)await G.post("/v1/am/assign-recruiter",{job_id:e,recruiter_id:r});return!0},wee=(e,t)=>G.post(`/v1/jobs/${e}/submissions`,{candidate_id:t}),Nee=e=>G.post(`/v1/jobs/${e}/match`),kee=e=>G.get(`/v1/recruiter/assigned-jobs/${e}`),See=e=>G.get(`/v1/recruiter/assigned-jobs/${e}/candidate-pool`),Cee=(e,t)=>G.post(`/v1/recruiter/assigned-jobs/${e}/send-candidates-to-am`,{candidate_ids:t});function Nj(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function bN(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function c7(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function Aee(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function HT(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function _x(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Eee(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Tee(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function d7(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function Pee(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function qT(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"9",y1:"15",x2:"15",y2:"15"},child:[]}]})(e)}function GT(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function kj(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(e)}function u7(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function JT(e){return Kn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Sj(){const{id:e}=Or(),[t,r]=y.useState(null),[s,a]=y.useState(!0),i=Tt();return y.useEffect(()=>{let l=!0;return(async()=>{var o;try{const c=await PS(e);if(!l)return;r(((o=c.data)==null?void 0:o.data)??c.data??null)}catch(c){console.error("Failed to fetch job",c)}finally{a(!1)}})(),()=>{l=!1}},[e]),s?n.jsx("div",{className:"p-6 text-center",children:"Loading job details..."}):t?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[n.jsxs("button",{onClick:()=>i(-1),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-700 mb-4",children:[n.jsx(bN,{})," Back"]}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.title}),n.jsx("p",{className:"text-gray-600 mt-2",children:t.company_name||"Company"})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(u7,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Location"})]}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.location||"Remote"})]}),t.salary_range&&n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(Tee,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Salary Range"})]}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.salary_range})]}),t.min_experience||t.max_experience?n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(Eee,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Experience"})]}),n.jsxs("p",{className:"text-gray-900 font-medium",children:[t.min_experience||0," - ",t.max_experience||"N/A"," years"]})]}):null]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"About the Role"}),n.jsx("div",{className:"text-gray-700 leading-relaxed prose prose-sm max-w-none",children:typeof t.description=="string"&&t.description.includes("<")?n.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}}):n.jsx("p",{children:t.description||"No description available"})})]}),t.skills&&t.skills.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(c7,{})," Required Skills"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(t.skills)?t.skills:[]).map((l,o)=>n.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:l},o))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[t.department&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Department"}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.department})]}),t.job_type&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Job Type"}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.job_type})]}),t.apply_by&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Apply By"}),n.jsx("p",{className:"text-gray-900 font-medium",children:new Date(t.apply_by).toLocaleDateString()})]}),t.sla_days&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"SLA Days"}),n.jsxs("p",{className:"text-gray-900 font-medium",children:[t.sla_days," days"]})]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:()=>i(-1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:"Go Back"})})]})]}):n.jsx("div",{className:"p-6 text-center text-red-600",children:"Job not found"})}const Oee=y.createContext(null),Cl=()=>y.useContext(Oee);function Ree(){const[e,t]=y.useState({full_name:"",email:"",password:"",confirm_password:""}),[r,s]=y.useState(!1),[a,i]=y.useState(""),l=Tt(),{login:o}=Cl();async function c(d){var u,f,m,g,x,h;if(d.preventDefault(),s(!0),i(""),e.password!==e.confirm_password){i("Passwords do not match"),s(!1);return}try{const p=await G.post("/auth/candidate/register",{full_name:e.full_name,email:e.email,password:e.password,confirm_password:e.confirm_password});(u=p.data)!=null&&u.access_token&&((f=p.data)!=null&&f.user)?(localStorage.setItem("access_token",p.data.access_token),localStorage.setItem("user",JSON.stringify(p.data.user)),localStorage.setItem("role","candidate"),G.defaults.headers.common.Authorization=`Bearer ${p.data.access_token}`,alert("Account created successfully!"),l("/candidate/profile")):i("Registration successful but token missing")}catch(p){console.error("Registration error:",p),i(((g=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:g.detail)||((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.message)||"Registration failed")}finally{s(!1)}}return n.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Candidate Register"}),a&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),n.jsxs("form",{onSubmit:c,className:"space-y-3",children:[n.jsx("input",{required:!0,placeholder:"Full Name",value:e.full_name,onChange:d=>t({...e,full_name:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"email",placeholder:"Email",value:e.email,onChange:d=>t({...e,email:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"password",placeholder:"Password",value:e.password,onChange:d=>t({...e,password:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"password",placeholder:"Confirm Password",value:e.confirm_password,onChange:d=>t({...e,confirm_password:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("button",{type:"submit",disabled:r,className:"w-full bg-indigo-600 text-white p-2 rounded font-medium disabled:bg-gray-400",children:r?"Creating account...":"Register"})]}),n.jsxs("p",{className:"text-sm mt-4 text-center",children:["Already have an account?"," ",n.jsx("a",{href:"/login",className:"text-indigo-600 font-medium",children:"Login"})]})]})}function Lee(){const[e,t]=y.useState({email:"",password:""}),[r,s]=y.useState(!1),[a,i]=y.useState(""),[l]=ea(),o=Tt(),{setTokenAndUser:c}=Cl?Cl():{setTokenAndUser:null},d=l.get("applyJob"),u=l.get("redirect");async function f(m){var g,x,h,p,v,b;m.preventDefault(),s(!0),i("");try{const j=await G.post("/auth/login",e),N=(g=j==null?void 0:j.data)==null?void 0:g.access_token,w=(x=j==null?void 0:j.data)==null?void 0:x.user;if(!N){i("Login succeeded but no token returned from server."),s(!1);return}localStorage.setItem("access_token",N),w&&localStorage.setItem("user",JSON.stringify(w)),localStorage.setItem("role","candidate"),G.defaults.headers.common.Authorization=`Bearer ${N}`;try{typeof c=="function"&&c(N,w)}catch(_){console.warn("setTokenAndUser threw:",_)}u?u.startsWith("/")?o(u):o("/candidate/dashboard"):o(d?`/candidate/dashboard?applyJob=${encodeURIComponent(d)}`:"/candidate/dashboard")}catch(j){console.error("Candidate login failed:",j),i(((p=(h=j==null?void 0:j.response)==null?void 0:h.data)==null?void 0:p.detail)||((b=(v=j==null?void 0:j.response)==null?void 0:v.data)==null?void 0:b.message)||"Login failed")}finally{s(!1)}}return n.jsxs("div",{className:"max-w-sm mx-auto p-6 bg-white rounded shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Candidate Login"}),a&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),n.jsxs("form",{onSubmit:f,className:"space-y-3",children:[n.jsx("input",{required:!0,value:e.email,onChange:m=>t({...e,email:m.target.value}),placeholder:"Email",className:"w-full border p-2 rounded disabled:bg-gray-100",type:"email",disabled:r}),n.jsx("input",{required:!0,value:e.password,onChange:m=>t({...e,password:m.target.value}),type:"password",placeholder:"Password",className:"w-full border p-2 rounded disabled:bg-gray-100",disabled:r}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{disabled:r,type:"submit",className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded font-medium disabled:bg-gray-400",children:r?"Signing in...":"Sign in"}),n.jsx("button",{type:"button",onClick:()=>o("/candidate/register"),className:"flex-1 px-3 py-2 border rounded hover:bg-gray-50 font-medium",disabled:r,children:"Register"})]})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Admin? Use the"," ",n.jsx("a",{href:"/login",className:"text-indigo-600 underline",children:"admin login"})]})]})}function f7(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=f7(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function or(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=f7(e))&&(s&&(s+=" "),s+=t);return s}var Iee=Array.isArray,Pa=Iee,Fee=typeof Qp=="object"&&Qp&&Qp.Object===Object&&Qp,m7=Fee,Dee=m7,$ee=typeof self=="object"&&self&&self.Object===Object&&self,Mee=Dee||$ee||Function("return this")(),$l=Mee,Bee=$l,Uee=Bee.Symbol,Tp=Uee,KT=Tp,h7=Object.prototype,zee=h7.hasOwnProperty,Wee=h7.toString,Km=KT?KT.toStringTag:void 0;function Vee(e){var t=zee.call(e,Km),r=e[Km];try{e[Km]=void 0;var s=!0}catch{}var a=Wee.call(e);return s&&(t?e[Km]=r:delete e[Km]),a}var Hee=Vee,qee=Object.prototype,Gee=qee.toString;function Jee(e){return Gee.call(e)}var Kee=Jee,XT=Tp,Xee=Hee,Yee=Kee,Zee="[object Null]",Qee="[object Undefined]",YT=XT?XT.toStringTag:void 0;function ete(e){return e==null?e===void 0?Qee:Zee:YT&&YT in Object(e)?Xee(e):Yee(e)}var So=ete;function tte(e){return e!=null&&typeof e=="object"}var Co=tte,rte=So,nte=Co,ste="[object Symbol]";function ate(e){return typeof e=="symbol"||nte(e)&&rte(e)==ste}var jm=ate,ite=Pa,lte=jm,ote=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cte=/^\w*$/;function dte(e,t){if(ite(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||lte(e)?!0:cte.test(e)||!ote.test(e)||t!=null&&e in Object(t)}var OS=dte;function ute(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cc=ute;const _m=$r(Cc);var fte=So,mte=Cc,hte="[object AsyncFunction]",pte="[object Function]",xte="[object GeneratorFunction]",gte="[object Proxy]";function yte(e){if(!mte(e))return!1;var t=fte(e);return t==pte||t==xte||t==hte||t==gte}var RS=yte;const Qt=$r(RS);var vte=$l,bte=vte["__core-js_shared__"],jte=bte,Cj=jte,ZT=function(){var e=/[^.]+$/.exec(Cj&&Cj.keys&&Cj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _te(e){return!!ZT&&ZT in e}var wte=_te,Nte=Function.prototype,kte=Nte.toString;function Ste(e){if(e!=null){try{return kte.call(e)}catch{}try{return e+""}catch{}}return""}var p7=Ste,Cte=RS,Ate=wte,Ete=Cc,Tte=p7,Pte=/[\\^$.*+?()[\]{}|]/g,Ote=/^\[object .+?Constructor\]$/,Rte=Function.prototype,Lte=Object.prototype,Ite=Rte.toString,Fte=Lte.hasOwnProperty,Dte=RegExp("^"+Ite.call(Fte).replace(Pte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $te(e){if(!Ete(e)||Ate(e))return!1;var t=Cte(e)?Dte:Ote;return t.test(Tte(e))}var Mte=$te;function Bte(e,t){return e==null?void 0:e[t]}var Ute=Bte,zte=Mte,Wte=Ute;function Vte(e,t){var r=Wte(e,t);return zte(r)?r:void 0}var tu=Vte,Hte=tu,qte=Hte(Object,"create"),Ib=qte,QT=Ib;function Gte(){this.__data__=QT?QT(null):{},this.size=0}var Jte=Gte;function Kte(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Xte=Kte,Yte=Ib,Zte="__lodash_hash_undefined__",Qte=Object.prototype,ere=Qte.hasOwnProperty;function tre(e){var t=this.__data__;if(Yte){var r=t[e];return r===Zte?void 0:r}return ere.call(t,e)?t[e]:void 0}var rre=tre,nre=Ib,sre=Object.prototype,are=sre.hasOwnProperty;function ire(e){var t=this.__data__;return nre?t[e]!==void 0:are.call(t,e)}var lre=ire,ore=Ib,cre="__lodash_hash_undefined__";function dre(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ore&&t===void 0?cre:t,this}var ure=dre,fre=Jte,mre=Xte,hre=rre,pre=lre,xre=ure;function wm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}wm.prototype.clear=fre;wm.prototype.delete=mre;wm.prototype.get=hre;wm.prototype.has=pre;wm.prototype.set=xre;var gre=wm;function yre(){this.__data__=[],this.size=0}var vre=yre;function bre(e,t){return e===t||e!==e&&t!==t}var LS=bre,jre=LS;function _re(e,t){for(var r=e.length;r--;)if(jre(e[r][0],t))return r;return-1}var Fb=_re,wre=Fb,Nre=Array.prototype,kre=Nre.splice;function Sre(e){var t=this.__data__,r=wre(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():kre.call(t,r,1),--this.size,!0}var Cre=Sre,Are=Fb;function Ere(e){var t=this.__data__,r=Are(t,e);return r<0?void 0:t[r][1]}var Tre=Ere,Pre=Fb;function Ore(e){return Pre(this.__data__,e)>-1}var Rre=Ore,Lre=Fb;function Ire(e,t){var r=this.__data__,s=Lre(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var Fre=Ire,Dre=vre,$re=Cre,Mre=Tre,Bre=Rre,Ure=Fre;function Nm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Nm.prototype.clear=Dre;Nm.prototype.delete=$re;Nm.prototype.get=Mre;Nm.prototype.has=Bre;Nm.prototype.set=Ure;var Db=Nm,zre=tu,Wre=$l,Vre=zre(Wre,"Map"),IS=Vre,e5=gre,Hre=Db,qre=IS;function Gre(){this.size=0,this.__data__={hash:new e5,map:new(qre||Hre),string:new e5}}var Jre=Gre;function Kre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Xre=Kre,Yre=Xre;function Zre(e,t){var r=e.__data__;return Yre(t)?r[typeof t=="string"?"string":"hash"]:r.map}var $b=Zre,Qre=$b;function ene(e){var t=Qre(this,e).delete(e);return this.size-=t?1:0,t}var tne=ene,rne=$b;function nne(e){return rne(this,e).get(e)}var sne=nne,ane=$b;function ine(e){return ane(this,e).has(e)}var lne=ine,one=$b;function cne(e,t){var r=one(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var dne=cne,une=Jre,fne=tne,mne=sne,hne=lne,pne=dne;function km(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}km.prototype.clear=une;km.prototype.delete=fne;km.prototype.get=mne;km.prototype.has=hne;km.prototype.set=pne;var FS=km,x7=FS,xne="Expected a function";function DS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(xne);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var l=e.apply(this,s);return r.cache=i.set(a,l)||i,l};return r.cache=new(DS.Cache||x7),r}DS.Cache=x7;var g7=DS;const gne=$r(g7);var yne=g7,vne=500;function bne(e){var t=yne(e,function(s){return r.size===vne&&r.clear(),s}),r=t.cache;return t}var jne=bne,_ne=jne,wne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nne=/\\(\\)?/g,kne=_ne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wne,function(r,s,a,i){t.push(a?i.replace(Nne,"$1"):s||r)}),t}),Sne=kne;function Cne(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var $S=Cne,t5=Tp,Ane=$S,Ene=Pa,Tne=jm,r5=t5?t5.prototype:void 0,n5=r5?r5.toString:void 0;function y7(e){if(typeof e=="string")return e;if(Ene(e))return Ane(e,y7)+"";if(Tne(e))return n5?n5.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Pne=y7,One=Pne;function Rne(e){return e==null?"":One(e)}var v7=Rne,Lne=Pa,Ine=OS,Fne=Sne,Dne=v7;function $ne(e,t){return Lne(e)?e:Ine(e,t)?[e]:Fne(Dne(e))}var b7=$ne,Mne=jm;function Bne(e){if(typeof e=="string"||Mne(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Mb=Bne,Une=b7,zne=Mb;function Wne(e,t){t=Une(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[zne(t[r++])];return r&&r==s?e:void 0}var MS=Wne,Vne=MS;function Hne(e,t,r){var s=e==null?void 0:Vne(e,t);return s===void 0?r:s}var j7=Hne;const qa=$r(j7);function qne(e){return e==null}var Gne=qne;const ar=$r(Gne);var Jne=So,Kne=Pa,Xne=Co,Yne="[object String]";function Zne(e){return typeof e=="string"||!Kne(e)&&Xne(e)&&Jne(e)==Yne}var Qne=Zne;const Ld=$r(Qne);var _7={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=Symbol.for("react.element"),US=Symbol.for("react.portal"),Bb=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),zb=Symbol.for("react.profiler"),Wb=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),ese=Symbol.for("react.server_context"),Hb=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Gb=Symbol.for("react.suspense_list"),Jb=Symbol.for("react.memo"),Kb=Symbol.for("react.lazy"),tse=Symbol.for("react.offscreen"),w7;w7=Symbol.for("react.module.reference");function Ti(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BS:switch(e=e.type,e){case Bb:case zb:case Ub:case qb:case Gb:return e;default:switch(e=e&&e.$$typeof,e){case ese:case Vb:case Hb:case Kb:case Jb:case Wb:return e;default:return t}}case US:return t}}}Mr.ContextConsumer=Vb;Mr.ContextProvider=Wb;Mr.Element=BS;Mr.ForwardRef=Hb;Mr.Fragment=Bb;Mr.Lazy=Kb;Mr.Memo=Jb;Mr.Portal=US;Mr.Profiler=zb;Mr.StrictMode=Ub;Mr.Suspense=qb;Mr.SuspenseList=Gb;Mr.isAsyncMode=function(){return!1};Mr.isConcurrentMode=function(){return!1};Mr.isContextConsumer=function(e){return Ti(e)===Vb};Mr.isContextProvider=function(e){return Ti(e)===Wb};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BS};Mr.isForwardRef=function(e){return Ti(e)===Hb};Mr.isFragment=function(e){return Ti(e)===Bb};Mr.isLazy=function(e){return Ti(e)===Kb};Mr.isMemo=function(e){return Ti(e)===Jb};Mr.isPortal=function(e){return Ti(e)===US};Mr.isProfiler=function(e){return Ti(e)===zb};Mr.isStrictMode=function(e){return Ti(e)===Ub};Mr.isSuspense=function(e){return Ti(e)===qb};Mr.isSuspenseList=function(e){return Ti(e)===Gb};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bb||e===zb||e===Ub||e===qb||e===Gb||e===tse||typeof e=="object"&&e!==null&&(e.$$typeof===Kb||e.$$typeof===Jb||e.$$typeof===Wb||e.$$typeof===Vb||e.$$typeof===Hb||e.$$typeof===w7||e.getModuleId!==void 0)};Mr.typeOf=Ti;_7.exports=Mr;var rse=_7.exports,nse=So,sse=Co,ase="[object Number]";function ise(e){return typeof e=="number"||sse(e)&&nse(e)==ase}var N7=ise;const lse=$r(N7);var ose=N7;function cse(e){return ose(e)&&e!=+e}var dse=cse;const Sm=$r(dse);var ia=function(t){return t===0?0:t>0?1:-1},od=function(t){return Ld(t)&&t.indexOf("%")===t.length-1},bt=function(t){return lse(t)&&!Sm(t)},use=function(t){return ar(t)},ns=function(t){return bt(t)||Ld(t)},fse=0,ru=function(t){var r=++fse;return"".concat(t||"").concat(r)},la=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(t)&&!Ld(t))return s;var i;if(od(t)){var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Sm(i)&&(i=s),a&&i>r&&(i=r),i},Ko=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},mse=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},es=function(t,r){return bt(t)&&bt(r)?function(s){return t+s*(r-t)}:function(){return r}};function Py(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):qa(s,t))===r})}var hse=function(t,r){return bt(t)&&bt(r)?t-r:Ld(t)&&Ld(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function hf(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function jN(e){"@babel/helpers - typeof";return jN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jN(e)}var pse=["viewBox","children"],xse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s5=["points","pathLength"],Aj={svg:pse,polygon:s5,polyline:s5},zS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Oy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(y.isValidElement(t)&&(s=t.props),!_m(s))return null;var a={};return Object.keys(s).forEach(function(i){zS.includes(i)&&(a[i]=r||function(l){return s[i](s,l)})}),a},gse=function(t,r,s){return function(a){return t(r,s,a),null}},Id=function(t,r,s){if(!_m(t)||jN(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var l=t[i];zS.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=gse(l,r,s))}),a},yse=["children"],vse=["children"];function a5(e,t){if(e==null)return{};var r=bse(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function bse(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function _N(e){"@babel/helpers - typeof";return _N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_N(e)}var i5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},so=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},l5=null,Ej=null,WS=function e(t){if(t===l5&&Array.isArray(Ej))return Ej;var r=[];return y.Children.forEach(t,function(s){ar(s)||(rse.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),Ej=r,l5=t,r};function Ga(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return so(a)}):s=[so(t)],WS(e).forEach(function(a){var i=qa(a,"type.displayName")||qa(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function $a(e,t){var r=Ga(e,t);return r&&r[0]}var o5=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!bt(s)||s<=0||!bt(a)||a<=0)},jse=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_se=function(t){return t&&t.type&&Ld(t.type)&&jse.indexOf(t.type)>=0},k7=function(t){return t&&_N(t)==="object"&&"clipDot"in t},wse=function(t,r,s,a){var i,l=(i=Aj==null?void 0:Aj[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Qt(t)&&(a&&l.includes(r)||xse.includes(r))||s&&zS.includes(r)},Ht=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(y.isValidElement(t)&&(a=t.props),!_m(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;wse((o=a)===null||o===void 0?void 0:o[l],l,r,s)&&(i[l]=a[l])}),i},wN=function e(t,r){if(t===r)return!0;var s=y.Children.count(t);if(s!==y.Children.count(r))return!1;if(s===0)return!0;if(s===1)return c5(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],l=r[a];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!c5(i,l))return!1}return!0},c5=function(t,r){if(ar(t)&&ar(r))return!0;if(!ar(t)&&!ar(r)){var s=t.props||{},a=s.children,i=a5(s,yse),l=r.props||{},o=l.children,c=a5(l,vse);return a&&o?hf(i,c)&&wN(a,o):!a&&!o?hf(i,c):!1}return!1},d5=function(t,r){var s=[],a={};return WS(t).forEach(function(i,l){if(_se(i))s.push(i);else if(i){var o=so(i.type),c=r[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var f=d(i,o,l);s.push(f),a[o]=!0}}}),s},Nse=function(t){var r=t&&t.type;return r&&i5[r]?i5[r]:null},kse=function(t,r){return WS(r).indexOf(t)},Sse=["children","width","height","viewBox","className","style","title","desc"];function NN(){return NN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},NN.apply(this,arguments)}function Cse(e,t){if(e==null)return{};var r=Ase(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ase(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function kN(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,l=e.style,o=e.title,c=e.desc,d=Cse(e,Sse),u=a||{width:r,height:s,x:0,y:0},f=or("recharts-surface",i);return we.createElement("svg",NN({},Ht(d,!0,"svg"),{className:f,width:r,height:s,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),we.createElement("title",null,o),we.createElement("desc",null,c),t)}var Ese=["children","className"];function SN(){return SN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},SN.apply(this,arguments)}function Tse(e,t){if(e==null)return{};var r=Pse(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Pse(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var pr=we.forwardRef(function(e,t){var r=e.children,s=e.className,a=Tse(e,Ese),i=or("recharts-layer",s);return we.createElement("g",SN({className:i},Ht(a,!0),{ref:t}),r)}),Qi=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function Ose(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var Rse=Ose,Lse=Rse;function Ise(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:Lse(e,t,r)}var Fse=Ise,Dse="\\ud800-\\udfff",$se="\\u0300-\\u036f",Mse="\\ufe20-\\ufe2f",Bse="\\u20d0-\\u20ff",Use=$se+Mse+Bse,zse="\\ufe0e\\ufe0f",Wse="\\u200d",Vse=RegExp("["+Wse+Dse+Use+zse+"]");function Hse(e){return Vse.test(e)}var S7=Hse;function qse(e){return e.split("")}var Gse=qse,C7="\\ud800-\\udfff",Jse="\\u0300-\\u036f",Kse="\\ufe20-\\ufe2f",Xse="\\u20d0-\\u20ff",Yse=Jse+Kse+Xse,Zse="\\ufe0e\\ufe0f",Qse="["+C7+"]",CN="["+Yse+"]",AN="\\ud83c[\\udffb-\\udfff]",eae="(?:"+CN+"|"+AN+")",A7="[^"+C7+"]",E7="(?:\\ud83c[\\udde6-\\uddff]){2}",T7="[\\ud800-\\udbff][\\udc00-\\udfff]",tae="\\u200d",P7=eae+"?",O7="["+Zse+"]?",rae="(?:"+tae+"(?:"+[A7,E7,T7].join("|")+")"+O7+P7+")*",nae=O7+P7+rae,sae="(?:"+[A7+CN+"?",CN,E7,T7,Qse].join("|")+")",aae=RegExp(AN+"(?="+AN+")|"+sae+nae,"g");function iae(e){return e.match(aae)||[]}var lae=iae,oae=Gse,cae=S7,dae=lae;function uae(e){return cae(e)?dae(e):oae(e)}var fae=uae,mae=Fse,hae=S7,pae=fae,xae=v7;function gae(e){return function(t){t=xae(t);var r=hae(t)?pae(t):void 0,s=r?r[0]:t.charAt(0),a=r?mae(r,1).join(""):t.slice(1);return s[e]()+a}}var yae=gae,vae=yae,bae=vae("toUpperCase"),jae=bae;const Xb=$r(jae);function Xr(e){return function(){return e}}const R7=Math.cos,Ry=Math.sin,dl=Math.sqrt,Ly=Math.PI,Yb=2*Ly,EN=Math.PI,TN=2*EN,Jc=1e-6,_ae=TN-Jc;function L7(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function wae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return L7;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class Nae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?L7:wae(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,l){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=a-r,u=l-t,f=o-r,m=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Jc)if(!(Math.abs(f*c-d*u)>Jc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=s-l,x=a-o,h=c*c+d*d,p=g*g+x*x,v=Math.sqrt(h),b=Math.sqrt(m),j=i*Math.tan((EN-Math.acos((h+m-p)/(2*v*b)))/2),N=j/b,w=j/v;Math.abs(N-1)>Jc&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*g>u*x)},${this._x1=t+w*c},${this._y1=r+w*d}`}}arc(t,r,s,a,i,l){if(t=+t,r=+r,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(a),c=s*Math.sin(a),d=t+o,u=r+c,f=1^l,m=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Jc||Math.abs(this._y1-u)>Jc)&&this._append`L${d},${u}`,s&&(m<0&&(m=m%TN+TN),m>_ae?this._append`A${s},${s},0,1,${f},${t-o},${r-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:m>Jc&&this._append`A${s},${s},0,${+(m>=EN)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function VS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new Nae(t)}function HS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function I7(e){this._context=e}I7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zb(e){return new I7(e)}function F7(e){return e[0]}function D7(e){return e[1]}function $7(e,t){var r=Xr(!0),s=null,a=Zb,i=null,l=VS(o);e=typeof e=="function"?e:e===void 0?F7:Xr(e),t=typeof t=="function"?t:t===void 0?D7:Xr(t);function o(c){var d,u=(c=HS(c)).length,f,m=!1,g;for(s==null&&(i=a(g=l())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,d,c),+t(f,d,c));if(g)return i=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Xr(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Xr(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Xr(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),o):a},o.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),o):s},o}function wx(e,t,r){var s=null,a=Xr(!0),i=null,l=Zb,o=null,c=VS(d);e=typeof e=="function"?e:e===void 0?F7:Xr(+e),t=typeof t=="function"?t:Xr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?D7:Xr(+r);function d(f){var m,g,x,h=(f=HS(f)).length,p,v=!1,b,j=new Array(h),N=new Array(h);for(i==null&&(o=l(b=c())),m=0;m<=h;++m){if(!(m<h&&a(p=f[m],m,f))===v)if(v=!v)g=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=m-1;x>=g;--x)o.point(j[x],N[x]);o.lineEnd(),o.areaEnd()}v&&(j[m]=+e(p,m,f),N[m]=+t(p,m,f),o.point(s?+s(p,m,f):j[m],r?+r(p,m,f):N[m]))}if(b)return o=null,b+""||null}function u(){return $7().defined(a).curve(l).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xr(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xr(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Xr(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xr(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xr(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xr(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Xr(!!f),d):a},d.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),d):l},d.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),d):i},d}class M7{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function kae(e){return new M7(e,!0)}function Sae(e){return new M7(e,!1)}const qS={draw(e,t){const r=dl(t/Ly);e.moveTo(r,0),e.arc(0,0,r,0,Yb)}},Cae={draw(e,t){const r=dl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},B7=dl(1/3),Aae=B7*2,Eae={draw(e,t){const r=dl(t/Aae),s=r*B7;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},Tae={draw(e,t){const r=dl(t),s=-r/2;e.rect(s,s,r,r)}},Pae=.8908130915292852,U7=Ry(Ly/10)/Ry(7*Ly/10),Oae=Ry(Yb/10)*U7,Rae=-R7(Yb/10)*U7,Lae={draw(e,t){const r=dl(t*Pae),s=Oae*r,a=Rae*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const l=Yb*i/5,o=R7(l),c=Ry(l);e.lineTo(c*r,-o*r),e.lineTo(o*s-c*a,c*s+o*a)}e.closePath()}},Tj=dl(3),Iae={draw(e,t){const r=-dl(t/(Tj*3));e.moveTo(0,r*2),e.lineTo(-Tj*r,-r),e.lineTo(Tj*r,-r),e.closePath()}},ri=-.5,ni=dl(3)/2,PN=1/dl(12),Fae=(PN/2+1)*3,Dae={draw(e,t){const r=dl(t/Fae),s=r/2,a=r*PN,i=s,l=r*PN+r,o=-i,c=l;e.moveTo(s,a),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(ri*s-ni*a,ni*s+ri*a),e.lineTo(ri*i-ni*l,ni*i+ri*l),e.lineTo(ri*o-ni*c,ni*o+ri*c),e.lineTo(ri*s+ni*a,ri*a-ni*s),e.lineTo(ri*i+ni*l,ri*l-ni*i),e.lineTo(ri*o+ni*c,ri*c-ni*o),e.closePath()}};function $ae(e,t){let r=null,s=VS(a);e=typeof e=="function"?e:Xr(e||qS),t=typeof t=="function"?t:Xr(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Xr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Xr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Iy(){}function Fy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function z7(e){this._context=e}z7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mae(e){return new z7(e)}function W7(e){this._context=e}W7.prototype={areaStart:Iy,areaEnd:Iy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bae(e){return new W7(e)}function V7(e){this._context=e}V7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uae(e){return new V7(e)}function H7(e){this._context=e}H7.prototype={areaStart:Iy,areaEnd:Iy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zae(e){return new H7(e)}function u5(e){return e<0?-1:1}function f5(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),l=(r-e._y1)/(a||s<0&&-0),o=(i*a+l*s)/(s+a);return(u5(i)+u5(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function m5(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Pj(e,t,r){var s=e._x0,a=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,a+o*t,i-o,l-o*r,i,l)}function Dy(e){this._context=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pj(this,this._t0,m5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pj(this,m5(this,r=f5(this,e,t)),r);break;default:Pj(this,this._t0,r=f5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function q7(e){this._context=new G7(e)}(q7.prototype=Object.create(Dy.prototype)).point=function(e,t){Dy.prototype.point.call(this,t,e)};function G7(e){this._context=e}G7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function Wae(e){return new Dy(e)}function Vae(e){return new q7(e)}function J7(e){this._context=e}J7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=h5(e),a=h5(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function h5(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(a[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Hae(e){return new J7(e)}function Qb(e,t){this._context=e,this._t=t}Qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function qae(e){return new Qb(e,.5)}function Gae(e){return new Qb(e,0)}function Jae(e){return new Qb(e,1)}function Rf(e,t){if((l=e.length)>1)for(var r=1,s,a,i=e[t[0]],l,o=i.length;r<l;++r)for(a=i,i=e[t[r]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function ON(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Kae(e,t){return e[t]}function Xae(e){const t=[];return t.key=e,t}function Yae(){var e=Xr([]),t=ON,r=Rf,s=Kae;function a(i){var l=Array.from(e.apply(this,arguments),Xae),o,c=l.length,d=-1,u;for(const f of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(f,l[o].key,d,i)]).data=f;for(o=0,u=HS(t(l));o<c;++o)l[u[o]].index=o;return r(l,u),l}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Xr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Xr(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?ON:typeof i=="function"?i:Xr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Rf,a):r},a}function Zae(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,l;a<i;++a){for(l=r=0;r<s;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<s;++r)e[r][a][1]/=l}Rf(e,t)}}function Qae(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var l=0,o=0;l<a;++l)o+=e[l][r][1]||0;s[r][1]+=s[r][0]=-o/2}Rf(e,t)}}function eie(e,t){if(!(!((l=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],f=u[s][1]||0,m=u[s-1][1]||0,g=(f-m)/2,x=0;x<o;++x){var h=e[t[x]],p=h[s][1]||0,v=h[s-1][1]||0;g+=p-v}c+=f,d+=g*f}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,Rf(e,t)}}function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}var tie=["type","size","sizeType"];function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},RN.apply(this,arguments)}function p5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function x5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(r),!0).forEach(function(s){rie(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function rie(e,t,r){return t=nie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nie(e){var t=sie(e,"string");return yh(t)=="symbol"?t:t+""}function sie(e,t){if(yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(yh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aie(e,t){if(e==null)return{};var r=iie(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function iie(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var K7={symbolCircle:qS,symbolCross:Cae,symbolDiamond:Eae,symbolSquare:Tae,symbolStar:Lae,symbolTriangle:Iae,symbolWye:Dae},lie=Math.PI/180,oie=function(t){var r="symbol".concat(Xb(t));return K7[r]||qS},cie=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*lie;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},die=function(t,r){K7["symbol".concat(Xb(t))]=r},GS=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,l=t.sizeType,o=l===void 0?"area":l,c=aie(t,tie),d=x5(x5({},c),{},{type:s,size:i,sizeType:o}),u=function(){var p=oie(s),v=$ae().type(p).size(cie(i,o,s));return v()},f=d.className,m=d.cx,g=d.cy,x=Ht(d,!0);return m===+m&&g===+g&&i===+i?we.createElement("path",RN({},x,{className:or("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(g,")"),d:u()})):null};GS.registerSymbol=die;function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},LN.apply(this,arguments)}function g5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function uie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g5(Object(r),!0).forEach(function(s){vh(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function fie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mie(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Y7(s.key),s)}}function hie(e,t,r){return t&&mie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pie(e,t,r){return t=$y(t),xie(e,X7()?Reflect.construct(t,r||[],$y(e).constructor):t.apply(e,r))}function xie(e,t){if(t&&(Lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gie(e)}function gie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X7=function(){return!!e})()}function $y(e){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$y(e)}function yie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IN(e,t)}function IN(e,t){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},IN(e,t)}function vh(e,t,r){return t=Y7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7(e){var t=vie(e,"string");return Lf(t)=="symbol"?t:t+""}function vie(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var si=32,JS=function(e){function t(){return fie(this,t),pie(this,t,arguments)}return yie(t,e),hie(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=si/2,l=si/6,o=si/3,c=s.inactive?a:s.color;if(s.type==="plainline")return we.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:si,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return we.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(si,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return we.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(si/8,"h").concat(si,"v").concat(si*3/4,"h").concat(-si,"z"),className:"recharts-legend-icon"});if(we.isValidElement(s.legendIcon)){var d=uie({},s);return delete d.legendIcon,we.cloneElement(s.legendIcon,d)}return we.createElement(GS,{fill:c,cx:i,cy:i,size:si,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:si,height:si},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,x){var h=g.formatter||c,p=or(vh(vh({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var v=Qt(g.value)?null:g.value;Qi(!Qt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=g.inactive?d:g.color;return we.createElement("li",LN({className:p,style:f,key:"legend-item-".concat(x)},Id(s.props,g,x)),we.createElement(kN,{width:l,height:l,viewBox:u,style:m},s.renderIcon(g)),we.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},h?h(v,g,x):v))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,l=s.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return we.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(y.PureComponent);vh(JS,"displayName","Legend");vh(JS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var bie=Db;function jie(){this.__data__=new bie,this.size=0}var _ie=jie;function wie(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Nie=wie;function kie(e){return this.__data__.get(e)}var Sie=kie;function Cie(e){return this.__data__.has(e)}var Aie=Cie,Eie=Db,Tie=IS,Pie=FS,Oie=200;function Rie(e,t){var r=this.__data__;if(r instanceof Eie){var s=r.__data__;if(!Tie||s.length<Oie-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pie(s)}return r.set(e,t),this.size=r.size,this}var Lie=Rie,Iie=Db,Fie=_ie,Die=Nie,$ie=Sie,Mie=Aie,Bie=Lie;function Cm(e){var t=this.__data__=new Iie(e);this.size=t.size}Cm.prototype.clear=Fie;Cm.prototype.delete=Die;Cm.prototype.get=$ie;Cm.prototype.has=Mie;Cm.prototype.set=Bie;var Z7=Cm,Uie="__lodash_hash_undefined__";function zie(e){return this.__data__.set(e,Uie),this}var Wie=zie;function Vie(e){return this.__data__.has(e)}var Hie=Vie,qie=FS,Gie=Wie,Jie=Hie;function My(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new qie;++t<r;)this.add(e[t])}My.prototype.add=My.prototype.push=Gie;My.prototype.has=Jie;var Q7=My;function Kie(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var eM=Kie;function Xie(e,t){return e.has(t)}var tM=Xie,Yie=Q7,Zie=eM,Qie=tM,ele=1,tle=2;function rle(e,t,r,s,a,i){var l=r&ele,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var f=-1,m=!0,g=r&tle?new Yie:void 0;for(i.set(e,t),i.set(t,e);++f<o;){var x=e[f],h=t[f];if(s)var p=l?s(h,x,f,t,e,i):s(x,h,f,e,t,i);if(p!==void 0){if(p)continue;m=!1;break}if(g){if(!Zie(t,function(v,b){if(!Qie(g,b)&&(x===v||a(x,v,r,s,i)))return g.push(b)})){m=!1;break}}else if(!(x===h||a(x,h,r,s,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var rM=rle,nle=$l,sle=nle.Uint8Array,ale=sle;function ile(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var lle=ile;function ole(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var KS=ole,y5=Tp,v5=ale,cle=LS,dle=rM,ule=lle,fle=KS,mle=1,hle=2,ple="[object Boolean]",xle="[object Date]",gle="[object Error]",yle="[object Map]",vle="[object Number]",ble="[object RegExp]",jle="[object Set]",_le="[object String]",wle="[object Symbol]",Nle="[object ArrayBuffer]",kle="[object DataView]",b5=y5?y5.prototype:void 0,Oj=b5?b5.valueOf:void 0;function Sle(e,t,r,s,a,i,l){switch(r){case kle:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nle:return!(e.byteLength!=t.byteLength||!i(new v5(e),new v5(t)));case ple:case xle:case vle:return cle(+e,+t);case gle:return e.name==t.name&&e.message==t.message;case ble:case _le:return e==t+"";case yle:var o=ule;case jle:var c=s&mle;if(o||(o=fle),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;s|=hle,l.set(e,t);var u=dle(o(e),o(t),s,a,i,l);return l.delete(e),u;case wle:if(Oj)return Oj.call(e)==Oj.call(t)}return!1}var Cle=Sle;function Ale(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var nM=Ale,Ele=nM,Tle=Pa;function Ple(e,t,r){var s=t(e);return Tle(e)?s:Ele(s,r(e))}var Ole=Ple;function Rle(e,t){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var l=e[r];t(l,r,e)&&(i[a++]=l)}return i}var Lle=Rle;function Ile(){return[]}var Fle=Ile,Dle=Lle,$le=Fle,Mle=Object.prototype,Ble=Mle.propertyIsEnumerable,j5=Object.getOwnPropertySymbols,Ule=j5?function(e){return e==null?[]:(e=Object(e),Dle(j5(e),function(t){return Ble.call(e,t)}))}:$le,zle=Ule;function Wle(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var Vle=Wle,Hle=So,qle=Co,Gle="[object Arguments]";function Jle(e){return qle(e)&&Hle(e)==Gle}var Kle=Jle,_5=Kle,Xle=Co,sM=Object.prototype,Yle=sM.hasOwnProperty,Zle=sM.propertyIsEnumerable,Qle=_5(function(){return arguments}())?_5:function(e){return Xle(e)&&Yle.call(e,"callee")&&!Zle.call(e,"callee")},XS=Qle,By={exports:{}};function eoe(){return!1}var toe=eoe;By.exports;(function(e,t){var r=$l,s=toe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||s;e.exports=d})(By,By.exports);var aM=By.exports,roe=9007199254740991,noe=/^(?:0|[1-9]\d*)$/;function soe(e,t){var r=typeof e;return t=t??roe,!!t&&(r=="number"||r!="symbol"&&noe.test(e))&&e>-1&&e%1==0&&e<t}var YS=soe,aoe=9007199254740991;function ioe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=aoe}var ZS=ioe,loe=So,ooe=ZS,coe=Co,doe="[object Arguments]",uoe="[object Array]",foe="[object Boolean]",moe="[object Date]",hoe="[object Error]",poe="[object Function]",xoe="[object Map]",goe="[object Number]",yoe="[object Object]",voe="[object RegExp]",boe="[object Set]",joe="[object String]",_oe="[object WeakMap]",woe="[object ArrayBuffer]",Noe="[object DataView]",koe="[object Float32Array]",Soe="[object Float64Array]",Coe="[object Int8Array]",Aoe="[object Int16Array]",Eoe="[object Int32Array]",Toe="[object Uint8Array]",Poe="[object Uint8ClampedArray]",Ooe="[object Uint16Array]",Roe="[object Uint32Array]",sn={};sn[koe]=sn[Soe]=sn[Coe]=sn[Aoe]=sn[Eoe]=sn[Toe]=sn[Poe]=sn[Ooe]=sn[Roe]=!0;sn[doe]=sn[uoe]=sn[woe]=sn[foe]=sn[Noe]=sn[moe]=sn[hoe]=sn[poe]=sn[xoe]=sn[goe]=sn[yoe]=sn[voe]=sn[boe]=sn[joe]=sn[_oe]=!1;function Loe(e){return coe(e)&&ooe(e.length)&&!!sn[loe(e)]}var Ioe=Loe;function Foe(e){return function(t){return e(t)}}var iM=Foe,Uy={exports:{}};Uy.exports;(function(e,t){var r=m7,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(Uy,Uy.exports);var Doe=Uy.exports,$oe=Ioe,Moe=iM,w5=Doe,N5=w5&&w5.isTypedArray,Boe=N5?Moe(N5):$oe,lM=Boe,Uoe=Vle,zoe=XS,Woe=Pa,Voe=aM,Hoe=YS,qoe=lM,Goe=Object.prototype,Joe=Goe.hasOwnProperty;function Koe(e,t){var r=Woe(e),s=!r&&zoe(e),a=!r&&!s&&Voe(e),i=!r&&!s&&!a&&qoe(e),l=r||s||a||i,o=l?Uoe(e.length,String):[],c=o.length;for(var d in e)(t||Joe.call(e,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Hoe(d,c)))&&o.push(d);return o}var Xoe=Koe,Yoe=Object.prototype;function Zoe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Yoe;return e===r}var Qoe=Zoe;function ece(e,t){return function(r){return e(t(r))}}var oM=ece,tce=oM,rce=tce(Object.keys,Object),nce=rce,sce=Qoe,ace=nce,ice=Object.prototype,lce=ice.hasOwnProperty;function oce(e){if(!sce(e))return ace(e);var t=[];for(var r in Object(e))lce.call(e,r)&&r!="constructor"&&t.push(r);return t}var cce=oce,dce=RS,uce=ZS;function fce(e){return e!=null&&uce(e.length)&&!dce(e)}var Pp=fce,mce=Xoe,hce=cce,pce=Pp;function xce(e){return pce(e)?mce(e):hce(e)}var e1=xce,gce=Ole,yce=zle,vce=e1;function bce(e){return gce(e,vce,yce)}var jce=bce,k5=jce,_ce=1,wce=Object.prototype,Nce=wce.hasOwnProperty;function kce(e,t,r,s,a,i){var l=r&_ce,o=k5(e),c=o.length,d=k5(t),u=d.length;if(c!=u&&!l)return!1;for(var f=c;f--;){var m=o[f];if(!(l?m in t:Nce.call(t,m)))return!1}var g=i.get(e),x=i.get(t);if(g&&x)return g==t&&x==e;var h=!0;i.set(e,t),i.set(t,e);for(var p=l;++f<c;){m=o[f];var v=e[m],b=t[m];if(s)var j=l?s(b,v,m,t,e,i):s(v,b,m,e,t,i);if(!(j===void 0?v===b||a(v,b,r,s,i):j)){h=!1;break}p||(p=m=="constructor")}if(h&&!p){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(h=!1)}return i.delete(e),i.delete(t),h}var Sce=kce,Cce=tu,Ace=$l,Ece=Cce(Ace,"DataView"),Tce=Ece,Pce=tu,Oce=$l,Rce=Pce(Oce,"Promise"),Lce=Rce,Ice=tu,Fce=$l,Dce=Ice(Fce,"Set"),cM=Dce,$ce=tu,Mce=$l,Bce=$ce(Mce,"WeakMap"),Uce=Bce,FN=Tce,DN=IS,$N=Lce,MN=cM,BN=Uce,dM=So,Am=p7,S5="[object Map]",zce="[object Object]",C5="[object Promise]",A5="[object Set]",E5="[object WeakMap]",T5="[object DataView]",Wce=Am(FN),Vce=Am(DN),Hce=Am($N),qce=Am(MN),Gce=Am(BN),Kc=dM;(FN&&Kc(new FN(new ArrayBuffer(1)))!=T5||DN&&Kc(new DN)!=S5||$N&&Kc($N.resolve())!=C5||MN&&Kc(new MN)!=A5||BN&&Kc(new BN)!=E5)&&(Kc=function(e){var t=dM(e),r=t==zce?e.constructor:void 0,s=r?Am(r):"";if(s)switch(s){case Wce:return T5;case Vce:return S5;case Hce:return C5;case qce:return A5;case Gce:return E5}return t});var Jce=Kc,Rj=Z7,Kce=rM,Xce=Cle,Yce=Sce,P5=Jce,O5=Pa,R5=aM,Zce=lM,Qce=1,L5="[object Arguments]",I5="[object Array]",Nx="[object Object]",ede=Object.prototype,F5=ede.hasOwnProperty;function tde(e,t,r,s,a,i){var l=O5(e),o=O5(t),c=l?I5:P5(e),d=o?I5:P5(t);c=c==L5?Nx:c,d=d==L5?Nx:d;var u=c==Nx,f=d==Nx,m=c==d;if(m&&R5(e)){if(!R5(t))return!1;l=!0,u=!1}if(m&&!u)return i||(i=new Rj),l||Zce(e)?Kce(e,t,r,s,a,i):Xce(e,t,c,r,s,a,i);if(!(r&Qce)){var g=u&&F5.call(e,"__wrapped__"),x=f&&F5.call(t,"__wrapped__");if(g||x){var h=g?e.value():e,p=x?t.value():t;return i||(i=new Rj),a(h,p,r,s,i)}}return m?(i||(i=new Rj),Yce(e,t,r,s,a,i)):!1}var rde=tde,nde=rde,D5=Co;function uM(e,t,r,s,a){return e===t?!0:e==null||t==null||!D5(e)&&!D5(t)?e!==e&&t!==t:nde(e,t,r,s,uM,a)}var QS=uM,sde=Z7,ade=QS,ide=1,lde=2;function ode(e,t,r,s){var a=r.length,i=a,l=!s;if(e==null)return!i;for(e=Object(e);a--;){var o=r[a];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=r[a];var c=o[0],d=e[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in e))return!1}else{var f=new sde;if(s)var m=s(d,u,c,e,t,f);if(!(m===void 0?ade(u,d,ide|lde,s,f):m))return!1}}return!0}var cde=ode,dde=Cc;function ude(e){return e===e&&!dde(e)}var fM=ude,fde=fM,mde=e1;function hde(e){for(var t=mde(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,fde(a)]}return t}var pde=hde;function xde(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var mM=xde,gde=cde,yde=pde,vde=mM;function bde(e){var t=yde(e);return t.length==1&&t[0][2]?vde(t[0][0],t[0][1]):function(r){return r===e||gde(r,e,t)}}var jde=bde;function _de(e,t){return e!=null&&t in Object(e)}var wde=_de,Nde=b7,kde=XS,Sde=Pa,Cde=YS,Ade=ZS,Ede=Mb;function Tde(e,t,r){t=Nde(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var l=Ede(t[s]);if(!(i=e!=null&&r(e,l)))break;e=e[l]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&Ade(a)&&Cde(l,a)&&(Sde(e)||kde(e)))}var Pde=Tde,Ode=wde,Rde=Pde;function Lde(e,t){return e!=null&&Rde(e,t,Ode)}var Ide=Lde,Fde=QS,Dde=j7,$de=Ide,Mde=OS,Bde=fM,Ude=mM,zde=Mb,Wde=1,Vde=2;function Hde(e,t){return Mde(e)&&Bde(t)?Ude(zde(e),t):function(r){var s=Dde(r,e);return s===void 0&&s===t?$de(r,e):Fde(t,s,Wde|Vde)}}var qde=Hde;function Gde(e){return e}var Em=Gde;function Jde(e){return function(t){return t==null?void 0:t[e]}}var Kde=Jde,Xde=MS;function Yde(e){return function(t){return Xde(t,e)}}var Zde=Yde,Qde=Kde,eue=Zde,tue=OS,rue=Mb;function nue(e){return tue(e)?Qde(rue(e)):eue(e)}var sue=nue,aue=jde,iue=qde,lue=Em,oue=Pa,cue=sue;function due(e){return typeof e=="function"?e:e==null?lue:typeof e=="object"?oue(e)?iue(e[0],e[1]):aue(e):cue(e)}var Ml=due;function uue(e,t,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var hM=uue;function fue(e){return e!==e}var mue=fue;function hue(e,t,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var pue=hue,xue=hM,gue=mue,yue=pue;function vue(e,t,r){return t===t?yue(e,t,r):xue(e,gue,r)}var bue=vue,jue=bue;function _ue(e,t){var r=e==null?0:e.length;return!!r&&jue(e,t,0)>-1}var wue=_ue;function Nue(e,t,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(t,e[s]))return!0;return!1}var kue=Nue;function Sue(){}var Cue=Sue,Lj=cM,Aue=Cue,Eue=KS,Tue=1/0,Pue=Lj&&1/Eue(new Lj([,-0]))[1]==Tue?function(e){return new Lj(e)}:Aue,Oue=Pue,Rue=Q7,Lue=wue,Iue=kue,Fue=tM,Due=Oue,$ue=KS,Mue=200;function Bue(e,t,r){var s=-1,a=Lue,i=e.length,l=!0,o=[],c=o;if(r)l=!1,a=Iue;else if(i>=Mue){var d=t?null:Due(e);if(d)return $ue(d);l=!1,a=Fue,c=new Rue}else c=t?[]:o;e:for(;++s<i;){var u=e[s],f=t?t(u):u;if(u=r||u!==0?u:0,l&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),o.push(u)}else a(c,f,r)||(c!==o&&c.push(f),o.push(u))}return o}var Uue=Bue,zue=Ml,Wue=Uue;function Vue(e,t){return e&&e.length?Wue(e,zue(t)):[]}var Hue=Vue;const $5=$r(Hue);function pM(e,t,r){return t===!0?$5(e,r):Qt(t)?$5(e,t):e}function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}var que=["ref"];function M5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M5(Object(r),!0).forEach(function(s){t1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Gue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B5(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gM(s.key),s)}}function Jue(e,t,r){return t&&B5(e.prototype,t),r&&B5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kue(e,t,r){return t=zy(t),Xue(e,xM()?Reflect.construct(t,r||[],zy(e).constructor):t.apply(e,r))}function Xue(e,t){if(t&&(If(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yue(e)}function Yue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xM=function(){return!!e})()}function zy(e){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zy(e)}function Zue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UN(e,t)}function UN(e,t){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},UN(e,t)}function t1(e,t,r){return t=gM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gM(e){var t=Que(e,"string");return If(t)=="symbol"?t:t+""}function Que(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(If(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function efe(e,t){if(e==null)return{};var r=tfe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function tfe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function rfe(e){return e.value}function nfe(e,t){if(we.isValidElement(e))return we.cloneElement(e,t);if(typeof e=="function")return we.createElement(e,t);t.ref;var r=efe(t,que);return we.createElement(JS,r)}var U5=1,gd=function(e){function t(){var r;Gue(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Kue(this,t,[].concat(a)),t1(r,"lastBoundingBox",{width:-1,height:-1}),r}return Zue(t,e),Jue(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>U5||Math.abs(a.height-this.lastBoundingBox.height)>U5)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,f,m;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(l==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();f={left:((d||0)-g.width)/2}}else f=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(o==="middle"){var x=this.getBBoxSnapshot();m={top:((u||0)-x.height)/2}}else m=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Wl(Wl({},f),m)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,f=Wl(Wl({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return we.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){s.wrapperNode=g}},nfe(i,Wl(Wl({},this.props),{},{payload:pM(u,d,rfe)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Wl(Wl({},this.defaultProps),s.props),l=i.layout;return l==="vertical"&&bt(s.props.height)?{height:s.props.height}:l==="horizontal"?{width:s.props.width||a}:null}}])}(y.PureComponent);t1(gd,"displayName","Legend");t1(gd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var z5=Tp,sfe=XS,afe=Pa,W5=z5?z5.isConcatSpreadable:void 0;function ife(e){return afe(e)||sfe(e)||!!(W5&&e&&e[W5])}var lfe=ife,ofe=nM,cfe=lfe;function yM(e,t,r,s,a){var i=-1,l=e.length;for(r||(r=cfe),a||(a=[]);++i<l;){var o=e[i];t>0&&r(o)?t>1?yM(o,t-1,r,s,a):ofe(a,o):s||(a[a.length]=o)}return a}var vM=yM;function dfe(e){return function(t,r,s){for(var a=-1,i=Object(t),l=s(t),o=l.length;o--;){var c=l[e?o:++a];if(r(i[c],c,i)===!1)break}return t}}var ufe=dfe,ffe=ufe,mfe=ffe(),hfe=mfe,pfe=hfe,xfe=e1;function gfe(e,t){return e&&pfe(e,t,xfe)}var bM=gfe,yfe=Pp;function vfe(e,t){return function(r,s){if(r==null)return r;if(!yfe(r))return e(r,s);for(var a=r.length,i=t?a:-1,l=Object(r);(t?i--:++i<a)&&s(l[i],i,l)!==!1;);return r}}var bfe=vfe,jfe=bM,_fe=bfe,wfe=_fe(jfe),eC=wfe,Nfe=eC,kfe=Pp;function Sfe(e,t){var r=-1,s=kfe(e)?Array(e.length):[];return Nfe(e,function(a,i,l){s[++r]=t(a,i,l)}),s}var jM=Sfe;function Cfe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Afe=Cfe,V5=jm;function Efe(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,i=V5(e),l=t!==void 0,o=t===null,c=t===t,d=V5(t);if(!o&&!d&&!i&&e>t||i&&l&&c&&!o&&!d||s&&l&&c||!r&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&r&&a&&!s&&!i||o&&r&&a||!l&&a||!c)return-1}return 0}var Tfe=Efe,Pfe=Tfe;function Ofe(e,t,r){for(var s=-1,a=e.criteria,i=t.criteria,l=a.length,o=r.length;++s<l;){var c=Pfe(a[s],i[s]);if(c){if(s>=o)return c;var d=r[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Rfe=Ofe,Ij=$S,Lfe=MS,Ife=Ml,Ffe=jM,Dfe=Afe,$fe=iM,Mfe=Rfe,Bfe=Em,Ufe=Pa;function zfe(e,t,r){t.length?t=Ij(t,function(i){return Ufe(i)?function(l){return Lfe(l,i.length===1?i[0]:i)}:i}):t=[Bfe];var s=-1;t=Ij(t,$fe(Ife));var a=Ffe(e,function(i,l,o){var c=Ij(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return Dfe(a,function(i,l){return Mfe(i,l,r)})}var Wfe=zfe;function Vfe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Hfe=Vfe,qfe=Hfe,H5=Math.max;function Gfe(e,t,r){return t=H5(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=H5(s.length-t,0),l=Array(i);++a<i;)l[a]=s[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=s[a];return o[t]=r(l),qfe(e,this,o)}}var Jfe=Gfe;function Kfe(e){return function(){return e}}var Xfe=Kfe,Yfe=tu,Zfe=function(){try{var e=Yfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_M=Zfe,Qfe=Xfe,q5=_M,eme=Em,tme=q5?function(e,t){return q5(e,"toString",{configurable:!0,enumerable:!1,value:Qfe(t),writable:!0})}:eme,rme=tme,nme=800,sme=16,ame=Date.now;function ime(e){var t=0,r=0;return function(){var s=ame(),a=sme-(s-r);if(r=s,a>0){if(++t>=nme)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var lme=ime,ome=rme,cme=lme,dme=cme(ome),ume=dme,fme=Em,mme=Jfe,hme=ume;function pme(e,t){return hme(mme(e,t,fme),e+"")}var xme=pme,gme=LS,yme=Pp,vme=YS,bme=Cc;function jme(e,t,r){if(!bme(r))return!1;var s=typeof t;return(s=="number"?yme(r)&&vme(t,r.length):s=="string"&&t in r)?gme(r[t],e):!1}var r1=jme,_me=vM,wme=Wfe,Nme=xme,G5=r1,kme=Nme(function(e,t){if(e==null)return[];var r=t.length;return r>1&&G5(e,t[0],t[1])?t=[]:r>2&&G5(t[0],t[1],t[2])&&(t=[t[0]]),wme(e,_me(t,1),[])}),Sme=kme;const tC=$r(Sme);function bh(e){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(e)}function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},zN.apply(this,arguments)}function Cme(e,t){return Pme(e)||Tme(e,t)||Eme(e,t)||Ame()}function Ame(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eme(e,t){if(e){if(typeof e=="string")return J5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J5(e,t)}}function J5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Tme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Pme(e){if(Array.isArray(e))return e}function K5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(r),!0).forEach(function(s){Ome(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ome(e,t,r){return t=Rme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rme(e){var t=Lme(e,"string");return bh(t)=="symbol"?t:t+""}function Lme(e,t){if(bh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(bh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ime(e){return Array.isArray(e)&&ns(e[0])&&ns(e[1])?e.join(" ~ "):e}var Fme=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,l=t.itemStyle,o=l===void 0?{}:l,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,m=t.itemSorter,g=t.wrapperClassName,x=t.labelClassName,h=t.label,p=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,j=function(){if(u&&u.length){var S={padding:0,margin:0},E=(m?tC(u,m):u).map(function(O,I){if(O.type==="none")return null;var L=Fj({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},o),Z=O.formatter||f||Ime,H=O.value,R=O.name,D=H,Y=R;if(Z&&D!=null&&Y!=null){var M=Z(H,R,O,I,u);if(Array.isArray(M)){var X=Cme(M,2);D=X[0],Y=X[1]}else D=M}return we.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:L},ns(Y)?we.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,ns(Y)?we.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,we.createElement("span",{className:"recharts-tooltip-item-value"},D),we.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return we.createElement("ul",{className:"recharts-tooltip-item-list",style:S},E)}return null},N=Fj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Fj({margin:0},d),_=!ar(h),k=_?h:"",C=or("recharts-default-tooltip",g),T=or("recharts-tooltip-label",x);_&&p&&u!==void 0&&u!==null&&(k=p(h,u));var P=b?{role:"status","aria-live":"assertive"}:{};return we.createElement("div",zN({className:C,style:N},P),we.createElement("p",{className:T,style:w},we.isValidElement(k)?k:"".concat(k)),j())};function jh(e){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}function kx(e,t,r){return t=Dme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dme(e){var t=$me(e,"string");return jh(t)=="symbol"?t:t+""}function $me(e,t){if(jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xm="recharts-tooltip-wrapper",Mme={visibility:"hidden"};function Bme(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return or(Xm,kx(kx(kx(kx({},"".concat(Xm,"-right"),bt(r)&&t&&bt(t.x)&&r>=t.x),"".concat(Xm,"-left"),bt(r)&&t&&bt(t.x)&&r<t.x),"".concat(Xm,"-bottom"),bt(s)&&t&&bt(t.y)&&s>=t.y),"".concat(Xm,"-top"),bt(s)&&t&&bt(t.y)&&s<t.y))}function X5(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&bt(i[s]))return i[s];var u=r[s]-o-a,f=r[s]+a;if(t[s])return l[s]?u:f;if(l[s]){var m=u,g=c[s];return m<g?Math.max(f,c[s]):Math.max(u,c[s])}var x=f+o,h=c[s]+d;return x>h?Math.max(u,c[s]):Math.max(f,c[s])}function Ume(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function zme(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,d,u,f;return l.height>0&&l.width>0&&r?(u=X5({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),f=X5({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=Ume({translateX:u,translateY:f,useTranslate3d:o})):d=Mme,{cssProperties:d,cssClasses:Bme({translateX:u,translateY:f,coordinate:r})}}function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(s){VN(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Wme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vme(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NM(s.key),s)}}function Hme(e,t,r){return t&&Vme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qme(e,t,r){return t=Wy(t),Gme(e,wM()?Reflect.construct(t,r||[],Wy(e).constructor):t.apply(e,r))}function Gme(e,t){if(t&&(Ff(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jme(e)}function Jme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wM=function(){return!!e})()}function Wy(e){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wy(e)}function Kme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WN(e,t)}function WN(e,t){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},WN(e,t)}function VN(e,t,r){return t=NM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NM(e){var t=Xme(e,"string");return Ff(t)=="symbol"?t:t+""}function Xme(e,t){if(Ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ff(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Q5=1,Yme=function(e){function t(){var r;Wme(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=qme(this,t,[].concat(a)),VN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),VN(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return Kme(t,e),Hme(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>Q5||Math.abs(s.height-this.state.lastBoundingBox.height)>Q5)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,f=a.hasPayload,m=a.isAnimationActive,g=a.offset,x=a.position,h=a.reverseDirection,p=a.useTranslate3d,v=a.viewBox,b=a.wrapperStyle,j=zme({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:g,position:x,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),N=j.cssClasses,w=j.cssProperties,_=Z5(Z5({transition:m&&i?"transform ".concat(o,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return we.createElement("div",{tabIndex:-1,className:N,style:_,ref:function(C){s.wrapperNode=C}},d)}}])}(y.PureComponent),Zme=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ac={isSsr:Zme()};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(s){rC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Qme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e0e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SM(s.key),s)}}function t0e(e,t,r){return t&&e0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r0e(e,t,r){return t=Vy(t),n0e(e,kM()?Reflect.construct(t,r||[],Vy(e).constructor):t.apply(e,r))}function n0e(e,t){if(t&&(Df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(e)}function s0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kM=function(){return!!e})()}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vy(e)}function a0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HN(e,t)}function HN(e,t){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},HN(e,t)}function rC(e,t,r){return t=SM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SM(e){var t=i0e(e,"string");return Df(t)=="symbol"?t:t+""}function i0e(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Df(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function l0e(e){return e.dataKey}function o0e(e,t){return we.isValidElement(e)?we.cloneElement(e,t):typeof e=="function"?we.createElement(e,t):we.createElement(Fme,t)}var Qn=function(e){function t(){return Qme(this,t),r0e(this,t,arguments)}return a0e(t,e),t0e(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,f=a.filterNull,m=a.isAnimationActive,g=a.offset,x=a.payload,h=a.payloadUniqBy,p=a.position,v=a.reverseDirection,b=a.useTranslate3d,j=a.viewBox,N=a.wrapperStyle,w=x??[];f&&w.length&&(w=pM(x.filter(function(k){return k.value!=null&&(k.hide!==!0||s.props.includeHidden)}),h,l0e));var _=w.length>0;return we.createElement(Yme,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:m,active:i,coordinate:u,hasPayload:_,offset:g,position:p,reverseDirection:v,useTranslate3d:b,viewBox:j,wrapperStyle:N},o0e(d,t6(t6({},this.props),{},{payload:w})))}}])}(y.PureComponent);rC(Qn,"displayName","Tooltip");rC(Qn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ac.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var c0e=$l,d0e=function(){return c0e.Date.now()},u0e=d0e,f0e=/\s/;function m0e(e){for(var t=e.length;t--&&f0e.test(e.charAt(t)););return t}var h0e=m0e,p0e=h0e,x0e=/^\s+/;function g0e(e){return e&&e.slice(0,p0e(e)+1).replace(x0e,"")}var y0e=g0e,v0e=y0e,r6=Cc,b0e=jm,n6=NaN,j0e=/^[-+]0x[0-9a-f]+$/i,_0e=/^0b[01]+$/i,w0e=/^0o[0-7]+$/i,N0e=parseInt;function k0e(e){if(typeof e=="number")return e;if(b0e(e))return n6;if(r6(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=r6(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=v0e(e);var r=_0e.test(e);return r||w0e.test(e)?N0e(e.slice(2),r?2:8):j0e.test(e)?n6:+e}var CM=k0e,S0e=Cc,Dj=u0e,s6=CM,C0e="Expected a function",A0e=Math.max,E0e=Math.min;function T0e(e,t,r){var s,a,i,l,o,c,d=0,u=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(C0e);t=s6(t)||0,S0e(r)&&(u=!!r.leading,f="maxWait"in r,i=f?A0e(s6(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function g(_){var k=s,C=a;return s=a=void 0,d=_,l=e.apply(C,k),l}function x(_){return d=_,o=setTimeout(v,t),u?g(_):l}function h(_){var k=_-c,C=_-d,T=t-k;return f?E0e(T,i-C):T}function p(_){var k=_-c,C=_-d;return c===void 0||k>=t||k<0||f&&C>=i}function v(){var _=Dj();if(p(_))return b(_);o=setTimeout(v,h(_))}function b(_){return o=void 0,m&&s?g(_):(s=a=void 0,l)}function j(){o!==void 0&&clearTimeout(o),d=0,s=c=a=o=void 0}function N(){return o===void 0?l:b(Dj())}function w(){var _=Dj(),k=p(_);if(s=arguments,a=this,c=_,k){if(o===void 0)return x(c);if(f)return clearTimeout(o),o=setTimeout(v,t),g(c)}return o===void 0&&(o=setTimeout(v,t)),l}return w.cancel=j,w.flush=N,w}var P0e=T0e,O0e=P0e,R0e=Cc,L0e="Expected a function";function I0e(e,t,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(L0e);return R0e(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),O0e(e,t,{leading:s,maxWait:t,trailing:a})}var F0e=I0e;const AM=$r(F0e);function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Sx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(s){D0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D0e(e,t,r){return t=$0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $0e(e){var t=M0e(e,"string");return _h(t)=="symbol"?t:t+""}function M0e(e,t){if(_h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(_h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B0e(e,t){return V0e(e)||W0e(e,t)||z0e(e,t)||U0e()}function U0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0e(e,t){if(e){if(typeof e=="string")return i6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i6(e,t)}}function i6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function W0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function V0e(e){if(Array.isArray(e))return e}var Gi=y.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,l=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,m=e.maxHeight,g=e.children,x=e.debounce,h=x===void 0?0:x,p=e.id,v=e.className,b=e.onResize,j=e.style,N=j===void 0?{}:j,w=y.useRef(null),_=y.useRef();_.current=b,y.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=y.useState({containerWidth:a.width,containerHeight:a.height}),C=B0e(k,2),T=C[0],P=C[1],A=y.useCallback(function(E,O){P(function(I){var L=Math.round(E),Z=Math.round(O);return I.containerWidth===L&&I.containerHeight===Z?I:{containerWidth:L,containerHeight:Z}})},[]);y.useEffect(function(){var E=function(R){var D,Y=R[0].contentRect,M=Y.width,X=Y.height;A(M,X),(D=_.current)===null||D===void 0||D.call(_,M,X)};h>0&&(E=AM(E,h,{trailing:!0,leading:!1}));var O=new ResizeObserver(E),I=w.current.getBoundingClientRect(),L=I.width,Z=I.height;return A(L,Z),O.observe(w.current),function(){O.disconnect()}},[A,h]);var S=y.useMemo(function(){var E=T.containerWidth,O=T.containerHeight;if(E<0||O<0)return null;Qi(od(l)||od(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),Qi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=od(l)?E:l,L=od(c)?O:c;r&&r>0&&(I?L=I/r:L&&(I=L*r),m&&L>m&&(L=m)),Qi(I>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,L,l,c,u,f,r);var Z=!Array.isArray(g)&&so(g.type).endsWith("Chart");return we.Children.map(g,function(H){return we.isValidElement(H)?y.cloneElement(H,Sx({width:I,height:L},Z?{style:Sx({height:"100%",width:"100%",maxHeight:L,maxWidth:I},H.props.style)}:{})):H})},[r,g,c,m,f,u,T,l]);return we.createElement("div",{id:p?"".concat(p):void 0,className:or("recharts-responsive-container",v),style:Sx(Sx({},N),{},{width:l,height:c,minWidth:u,minHeight:f,maxHeight:m}),ref:w},S)}),Fd=function(t){return null};Fd.displayName="Cell";function wh(e){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(e)}function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(r),!0).forEach(function(s){H0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function H0e(e,t,r){return t=q0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q0e(e){var t=G0e(e,"string");return wh(t)=="symbol"?t:t+""}function G0e(e,t){if(wh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(wh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yu={widthCache:{},cacheCount:0},J0e=2e3,K0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},o6="recharts_measurement_span";function X0e(e){var t=qN({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var L0=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ac.isSsr)return{width:0,height:0};var s=X0e(r),a=JSON.stringify({text:t,copyStyle:s});if(yu.widthCache[a])return yu.widthCache[a];try{var i=document.getElementById(o6);i||(i=document.createElement("span"),i.setAttribute("id",o6),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=qN(qN({},K0e),s);Object.assign(i.style,l),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return yu.widthCache[a]=c,++yu.cacheCount>J0e&&(yu.cacheCount=0,yu.widthCache={}),c}catch{return{width:0,height:0}}},Y0e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Nh(e){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}function Hy(e,t){return the(e)||ehe(e,t)||Q0e(e,t)||Z0e()}function Z0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q0e(e,t){if(e){if(typeof e=="string")return c6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c6(e,t)}}function c6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function ehe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function the(e){if(Array.isArray(e))return e}function rhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,she(s.key),s)}}function nhe(e,t,r){return t&&d6(e.prototype,t),r&&d6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function she(e){var t=ahe(e,"string");return Nh(t)=="symbol"?t:t+""}function ahe(e,t){if(Nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Nh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var u6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ihe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,lhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ohe=Object.keys(EM),Zu="NaN";function che(e,t){return e*EM[t]}var Cx=function(){function e(t,r){rhe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!ihe.test(r)&&(this.num=NaN,this.unit=""),ohe.includes(r)&&(this.num=che(t,r),this.unit="px")}return nhe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=lhe.exec(r))!==null&&s!==void 0?s:[],i=Hy(a,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])}();function TM(e){if(e.includes(Zu))return Zu;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=u6.exec(t))!==null&&r!==void 0?r:[],a=Hy(s,4),i=a[1],l=a[2],o=a[3],c=Cx.parse(i??""),d=Cx.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Zu;t=t.replace(u6,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=f6.exec(t))!==null&&f!==void 0?f:[],g=Hy(m,4),x=g[1],h=g[2],p=g[3],v=Cx.parse(x??""),b=Cx.parse(p??""),j=h==="+"?v.add(b):v.subtract(b);if(j.isNaN())return Zu;t=t.replace(f6,j.toString())}return t}var m6=/\(([^()]*)\)/;function dhe(e){for(var t=e;t.includes("(");){var r=m6.exec(t),s=Hy(r,2),a=s[1];t=t.replace(m6,TM(a))}return t}function uhe(e){var t=e.replace(/\s+/g,"");return t=dhe(t),t=TM(t),t}function fhe(e){try{return uhe(e)}catch{return Zu}}function $j(e){var t=fhe(e.slice(5,-1));return t===Zu?"":t}var mhe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],hhe=["dx","dy","angle","className","breakAll"];function GN(){return GN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},GN.apply(this,arguments)}function h6(e,t){if(e==null)return{};var r=phe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function phe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function p6(e,t){return vhe(e)||yhe(e,t)||ghe(e,t)||xhe()}function xhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ghe(e,t){if(e){if(typeof e=="string")return x6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x6(e,t)}}function x6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function yhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function vhe(e){if(Array.isArray(e))return e}var PM=/[ \f\n\r\t\v\u2028\u2029]+/,OM=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];ar(r)||(s?i=r.toString().split(""):i=r.toString().split(PM));var l=i.map(function(c){return{word:c,width:L0(c,a).width}}),o=s?0:L0("",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},bhe=function(t,r,s,a,i){var l=t.maxLines,o=t.children,c=t.style,d=t.breakAll,u=bt(l),f=o,m=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(L,Z){var H=Z.word,R=Z.width,D=L[L.length-1];if(D&&(a==null||i||D.width+R+s<Number(a)))D.words.push(H),D.width+=R+s;else{var Y={words:[H],width:R};L.push(Y)}return L},[])},g=m(r),x=function(I){return I.reduce(function(L,Z){return L.width>Z.width?L:Z})};if(!u)return g;for(var h="",p=function(I){var L=f.slice(0,I),Z=OM({breakAll:d,style:c,children:L+h}).wordsWithComputedWidth,H=m(Z),R=H.length>l||x(H).width>Number(a);return[R,H]},v=0,b=f.length-1,j=0,N;v<=b&&j<=f.length-1;){var w=Math.floor((v+b)/2),_=w-1,k=p(_),C=p6(k,2),T=C[0],P=C[1],A=p(w),S=p6(A,1),E=S[0];if(!T&&!E&&(v=w+1),T&&E&&(b=w-1),!T&&E){N=P;break}j++}return N||g},g6=function(t){var r=ar(t)?[]:t.toString().split(PM);return[{words:r}]},jhe=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,l=t.breakAll,o=t.maxLines;if((r||s)&&!Ac.isSsr){var c,d,u=OM({breakAll:l,children:a,style:i});if(u){var f=u.wordsWithComputedWidth,m=u.spaceWidth;c=f,d=m}else return g6(a);return bhe({breakAll:l,children:a,maxLines:o,style:i},c,d,r,s)}return g6(a)},y6="#808080",Dd=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,l=t.lineHeight,o=l===void 0?"1em":l,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,m=t.textAnchor,g=m===void 0?"start":m,x=t.verticalAnchor,h=x===void 0?"end":x,p=t.fill,v=p===void 0?y6:p,b=h6(t,mhe),j=y.useMemo(function(){return jhe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),N=b.dx,w=b.dy,_=b.angle,k=b.className,C=b.breakAll,T=h6(b,hhe);if(!ns(s)||!ns(i))return null;var P=s+(bt(N)?N:0),A=i+(bt(w)?w:0),S;switch(h){case"start":S=$j("calc(".concat(d,")"));break;case"middle":S=$j("calc(".concat((j.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:S=$j("calc(".concat(j.length-1," * -").concat(o,")"));break}var E=[];if(f){var O=j[0].width,I=b.width;E.push("scale(".concat((bt(I)?I/O:1)/O,")"))}return _&&E.push("rotate(".concat(_,", ").concat(P,", ").concat(A,")")),E.length&&(T.transform=E.join(" ")),we.createElement("text",GN({},Ht(T,!0),{x:P,y:A,className:or("recharts-text",k),textAnchor:g,fill:v.includes("url")?y6:v}),j.map(function(L,Z){var H=L.words.join(C?"":" ");return we.createElement("tspan",{x:P,dy:Z===0?S:o,key:"".concat(H,"-").concat(Z)},H)}))};function pc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _he(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nC(e){let t,r,s;e.length!==2?(t=pc,r=(o,c)=>pc(e(o),c),s=(o,c)=>e(o)-c):(t=e===pc||e===_he?e:whe,r=e,s=e);function a(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(o[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(o[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function l(o,c,d=0,u=o.length){const f=a(o,c,d,u-1);return f>d&&s(o[f-1],c)>-s(o[f],c)?f-1:f}return{left:a,center:l,right:i}}function whe(){return 0}function RM(e){return e===null?NaN:+e}function*Nhe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const khe=nC(pc),Op=khe.right;nC(RM).center;class v6 extends Map{constructor(t,r=Ahe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(b6(this,t))}has(t){return super.has(b6(this,t))}set(t,r){return super.set(She(this,t),r)}delete(t){return super.delete(Che(this,t))}}function b6({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function She({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function Che({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function Ahe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ehe(e=pc){if(e===pc)return LM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function LM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const The=Math.sqrt(50),Phe=Math.sqrt(10),Ohe=Math.sqrt(2);function qy(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),l=i>=The?10:i>=Phe?5:i>=Ohe?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=r&&r<2?qy(e,t,r*2):[o,c,d]}function JN(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,l]=s?qy(t,e,r):qy(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(s)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function KN(e,t,r){return t=+t,e=+e,r=+r,qy(e,t,r)[2]}function XN(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?KN(t,e,r):KN(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function j6(e,t){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function _6(e,t){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function IM(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?LM:Ehe(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(t-d*f/c+m)),x=Math.min(s,Math.floor(t+(c-d)*f/c+m));IM(e,t,g,x,a)}const i=e[t];let l=r,o=s;for(Ym(e,r,t),a(e[s],i)>0&&Ym(e,r,s);l<o;){for(Ym(e,l,o),++l,--o;a(e[l],i)<0;)++l;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?Ym(e,r,o):(++o,Ym(e,o,s)),o<=t&&(r=o+1),t<=o&&(s=o-1)}return e}function Ym(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function Rhe(e,t,r){if(e=Float64Array.from(Nhe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return _6(e);if(t>=1)return j6(e);var s,a=(s-1)*t,i=Math.floor(a),l=j6(IM(e,i).subarray(0,i+1)),o=_6(e.subarray(i+1));return l+(o-l)*(a-i)}}function Lhe(e,t,r=RM){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),l=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return l+(o-l)*(a-i)}}function Ihe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function Pi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ao(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const YN=Symbol("implicit");function sC(){var e=new v6,t=[],r=[],s=YN;function a(i){let l=e.get(i);if(l===void 0){if(s!==YN)return s;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new v6;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return sC(t,r).unknown(s)},Pi.apply(a,arguments),a}function kh(){var e=sC().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var m=t().length,g=a<s,x=g?a:s,h=g?s:a;i=(h-x)/Math.max(1,m-c+d*2),o&&(i=Math.floor(i)),x+=(h-x-i*(m-c))*u,l=i*(1-c),o&&(x=Math.round(x),l=Math.round(l));var p=Ihe(m).map(function(v){return x+i*v});return r(g?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([s,a]=m,s=+s,a=+a,f()):[s,a]},e.rangeRound=function(m){return[s,a]=m,s=+s,a=+a,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(m){return arguments.length?(o=!!m,f()):o},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,f()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),f()):u},e.copy=function(){return kh(t(),[s,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Pi.apply(f(),arguments)}function FM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return FM(t())},e}function I0(){return FM(kh.apply(null,arguments).paddingInner(1))}function aC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function DM(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Rp(){}var Sh=.7,Gy=1/Sh,pf="\\s*([+-]?\\d+)\\s*",Ch="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fhe=/^#([0-9a-f]{3,8})$/,Dhe=new RegExp(`^rgb\\(${pf},${pf},${pf}\\)$`),$he=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),Mhe=new RegExp(`^rgba\\(${pf},${pf},${pf},${Ch}\\)$`),Bhe=new RegExp(`^rgba\\(${Al},${Al},${Al},${Ch}\\)$`),Uhe=new RegExp(`^hsl\\(${Ch},${Al},${Al}\\)$`),zhe=new RegExp(`^hsla\\(${Ch},${Al},${Al},${Ch}\\)$`),w6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aC(Rp,Ah,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:N6,formatHex:N6,formatHex8:Whe,formatHsl:Vhe,formatRgb:k6,toString:k6});function N6(){return this.rgb().formatHex()}function Whe(){return this.rgb().formatHex8()}function Vhe(){return $M(this).formatHsl()}function k6(){return this.rgb().formatRgb()}function Ah(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Fhe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?S6(t):r===3?new Na(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ax(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ax(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Dhe.exec(e))?new Na(t[1],t[2],t[3],1):(t=$he.exec(e))?new Na(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mhe.exec(e))?Ax(t[1],t[2],t[3],t[4]):(t=Bhe.exec(e))?Ax(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uhe.exec(e))?E6(t[1],t[2]/100,t[3]/100,1):(t=zhe.exec(e))?E6(t[1],t[2]/100,t[3]/100,t[4]):w6.hasOwnProperty(e)?S6(w6[e]):e==="transparent"?new Na(NaN,NaN,NaN,0):null}function S6(e){return new Na(e>>16&255,e>>8&255,e&255,1)}function Ax(e,t,r,s){return s<=0&&(e=t=r=NaN),new Na(e,t,r,s)}function Hhe(e){return e instanceof Rp||(e=Ah(e)),e?(e=e.rgb(),new Na(e.r,e.g,e.b,e.opacity)):new Na}function ZN(e,t,r,s){return arguments.length===1?Hhe(e):new Na(e,t,r,s??1)}function Na(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}aC(Na,ZN,DM(Rp,{brighter(e){return e=e==null?Gy:Math.pow(Gy,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sh:Math.pow(Sh,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Na(yd(this.r),yd(this.g),yd(this.b),Jy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C6,formatHex:C6,formatHex8:qhe,formatRgb:A6,toString:A6}));function C6(){return`#${cd(this.r)}${cd(this.g)}${cd(this.b)}`}function qhe(){return`#${cd(this.r)}${cd(this.g)}${cd(this.b)}${cd((isNaN(this.opacity)?1:this.opacity)*255)}`}function A6(){const e=Jy(this.opacity);return`${e===1?"rgb(":"rgba("}${yd(this.r)}, ${yd(this.g)}, ${yd(this.b)}${e===1?")":`, ${e})`}`}function Jy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cd(e){return e=yd(e),(e<16?"0":"")+e.toString(16)}function E6(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,r,s)}function $M(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof Rp||(e=Ah(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(r-s)/o+(r<s)*6:r===i?l=(s-t)/o+2:l=(t-r)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Ji(l,o,c,e.opacity)}function Ghe(e,t,r,s){return arguments.length===1?$M(e):new Ji(e,t,r,s??1)}function Ji(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}aC(Ji,Ghe,DM(Rp,{brighter(e){return e=e==null?Gy:Math.pow(Gy,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sh:Math.pow(Sh,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new Na(Mj(e>=240?e-240:e+120,a,s),Mj(e,a,s),Mj(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Ji(T6(this.h),Ex(this.s),Ex(this.l),Jy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jy(this.opacity);return`${e===1?"hsl(":"hsla("}${T6(this.h)}, ${Ex(this.s)*100}%, ${Ex(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T6(e){return e=(e||0)%360,e<0?e+360:e}function Ex(e){return Math.max(0,Math.min(1,e||0))}function Mj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const iC=e=>()=>e;function Jhe(e,t){return function(r){return e+r*t}}function Khe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function Xhe(e){return(e=+e)==1?MM:function(t,r){return r-t?Khe(t,r,e):iC(isNaN(t)?r:t)}}function MM(e,t){var r=t-e;return r?Jhe(e,r):iC(isNaN(e)?t:e)}const P6=function e(t){var r=Xhe(t);function s(a,i){var l=r((a=ZN(a)).r,(i=ZN(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),d=MM(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function Yhe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function Zhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qhe(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),l;for(l=0;l<s;++l)a[l]=Tm(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=a[l](o);return i}}function epe(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function Ky(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function tpe(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Tm(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var QN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bj=new RegExp(QN.source,"g");function rpe(e){return function(){return e}}function npe(e){return function(t){return e(t)+""}}function spe(e,t){var r=QN.lastIndex=Bj.lastIndex=0,s,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=QN.exec(e))&&(a=Bj.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:Ky(s,a)})),r=Bj.lastIndex;return r<t.length&&(i=t.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?npe(c[0].x):rpe(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)o[(f=c[u]).i]=f.x(d);return o.join("")})}function Tm(e,t){var r=typeof t,s;return t==null||r==="boolean"?iC(t):(r==="number"?Ky:r==="string"?(s=Ah(t))?(t=s,P6):spe:t instanceof Ah?P6:t instanceof Date?epe:Zhe(t)?Yhe:Array.isArray(t)?Qhe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tpe:Ky)(e,t)}function lC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ape(e,t){t===void 0&&(t=e,e=Tm);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function ipe(e){return function(){return e}}function Xy(e){return+e}var O6=[0,1];function oa(e){return e}function e2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ipe(isNaN(t)?NaN:.5)}function lpe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function ope(e,t,r){var s=e[0],a=e[1],i=t[0],l=t[1];return a<s?(s=e2(a,s),i=r(l,i)):(s=e2(s,a),i=r(i,l)),function(o){return i(s(o))}}function cpe(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)a[l]=e2(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(o){var c=Op(e,o,1,s)-1;return i[c](a[c](o))}}function Lp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function n1(){var e=O6,t=O6,r=Tm,s,a,i,l=oa,o,c,d;function u(){var m=Math.min(e.length,t.length);return l!==oa&&(l=lpe(e[0],e[m-1])),o=m>2?cpe:ope,c=d=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=o(e.map(s),t,r)))(s(l(m)))}return f.invert=function(m){return l(a((d||(d=o(t,e.map(s),Ky)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Xy),u()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=lC,u()},f.clamp=function(m){return arguments.length?(l=m?!0:oa,u()):l!==oa},f.interpolate=function(m){return arguments.length?(r=m,u()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,g){return s=m,a=g,u()}}function oC(){return n1()(oa,oa)}function dpe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yy(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function $f(e){return e=Yy(Math.abs(e)),e?e[1]:NaN}function upe(e,t){return function(r,s){for(var a=r.length,i=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function fpe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var mpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eh(e){if(!(t=mpe.exec(e)))throw new Error("invalid format: "+e);var t;return new cC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Eh.prototype=cC.prototype;function cC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hpe(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var BM;function ppe(e,t){var r=Yy(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(BM=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Yy(e,Math.max(0,t+i-1))[0]}function R6(e,t){var r=Yy(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const L6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dpe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>R6(e*100,t),r:R6,s:ppe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I6(e){return e}var F6=Array.prototype.map,D6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function xpe(e){var t=e.grouping===void 0||e.thousands===void 0?I6:upe(F6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?I6:fpe(F6.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=Eh(f);var m=f.fill,g=f.align,x=f.sign,h=f.symbol,p=f.zero,v=f.width,b=f.comma,j=f.precision,N=f.trim,w=f.type;w==="n"?(b=!0,w="g"):L6[w]||(j===void 0&&(j=12),N=!0,w="g"),(p||m==="0"&&g==="=")&&(p=!0,m="0",g="=");var _=h==="$"?r:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=h==="$"?s:/[%p]/.test(w)?l:"",C=L6[w],T=/[defgprs%]/.test(w);j=j===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function P(A){var S=_,E=k,O,I,L;if(w==="c")E=C(A)+E,A="";else{A=+A;var Z=A<0||1/A<0;if(A=isNaN(A)?c:C(Math.abs(A),j),N&&(A=hpe(A)),Z&&+A==0&&x!=="+"&&(Z=!1),S=(Z?x==="("?x:o:x==="-"||x==="("?"":x)+S,E=(w==="s"?D6[8+BM/3]:"")+E+(Z&&x==="("?")":""),T){for(O=-1,I=A.length;++O<I;)if(L=A.charCodeAt(O),48>L||L>57){E=(L===46?a+A.slice(O+1):A.slice(O))+E,A=A.slice(0,O);break}}}b&&!p&&(A=t(A,1/0));var H=S.length+A.length+E.length,R=H<v?new Array(v-H+1).join(m):"";switch(b&&p&&(A=t(R+A,R.length?v-E.length:1/0),R=""),g){case"<":A=S+A+E+R;break;case"=":A=S+R+A+E;break;case"^":A=R.slice(0,H=R.length>>1)+S+A+E+R.slice(H);break;default:A=R+S+A+E;break}return i(A)}return P.toString=function(){return f+""},P}function u(f,m){var g=d((f=Eh(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor($f(m)/3)))*3,h=Math.pow(10,-x),p=D6[8+x/3];return function(v){return g(h*v)+p}}return{format:d,formatPrefix:u}}var Tx,dC,UM;gpe({thousands:",",grouping:[3],currency:["$",""]});function gpe(e){return Tx=xpe(e),dC=Tx.format,UM=Tx.formatPrefix,Tx}function ype(e){return Math.max(0,-$f(Math.abs(e)))}function vpe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($f(t)/3)))*3-$f(Math.abs(e)))}function bpe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$f(t)-$f(e))+1}function zM(e,t,r,s){var a=XN(e,t,r),i;switch(s=Eh(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=vpe(a,l))&&(s.precision=i),UM(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=bpe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=ype(a))&&(s.precision=i-(s.type==="%")*2);break}}return dC(s)}function Ec(e){var t=e.domain;return e.ticks=function(r){var s=t();return JN(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return zM(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,l=s[a],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=KN(l,o,r),d===c)return s[a]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function Zy(){var e=oC();return e.copy=function(){return Lp(e,Zy())},Pi.apply(e,arguments),Ec(e)}function WM(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,Xy),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return WM(e).unknown(t)},e=arguments.length?Array.from(e,Xy):[0,1],Ec(r)}function VM(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],l;return i<a&&(l=r,r=s,s=l,l=a,a=i,i=l),e[r]=t.floor(a),e[s]=t.ceil(i),e}function $6(e){return Math.log(e)}function M6(e){return Math.exp(e)}function jpe(e){return-Math.log(-e)}function _pe(e){return-Math.exp(-e)}function wpe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Npe(e){return e===10?wpe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function kpe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function B6(e){return(t,r)=>-e(-t,r)}function uC(e){const t=e($6,M6),r=t.domain;let s=10,a,i;function l(){return a=kpe(s),i=Npe(s),r()[0]<0?(a=B6(a),i=B6(i),e(jpe,_pe)):e($6,M6),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let m=a(d),g=a(u),x,h;const p=o==null?10:+o;let v=[];if(!(s%1)&&g-m<p){if(m=Math.floor(m),g=Math.ceil(g),d>0){for(;m<=g;++m)for(x=1;x<s;++x)if(h=m<0?x/i(-m):x*i(m),!(h<d)){if(h>u)break;v.push(h)}}else for(;m<=g;++m)for(x=s-1;x>=1;--x)if(h=m>0?x/i(-m):x*i(m),!(h<d)){if(h>u)break;v.push(h)}v.length*2<p&&(v=JN(d,u,p))}else v=JN(m,g,Math.min(g-m,p)).map(i);return f?v.reverse():v},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Eh(c)).precision==null&&(c.trim=!0),c=dC(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let f=u/i(Math.round(a(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>r(VM(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function HM(){const e=uC(n1()).domain([1,10]);return e.copy=()=>Lp(e,HM()).base(e.base()),Pi.apply(e,arguments),e}function U6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function z6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fC(e){var t=1,r=e(U6(t),z6(t));return r.constant=function(s){return arguments.length?e(U6(t=+s),z6(t)):t},Ec(r)}function qM(){var e=fC(n1());return e.copy=function(){return Lp(e,qM()).constant(e.constant())},Pi.apply(e,arguments)}function W6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Spe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cpe(e){return e<0?-e*e:e*e}function mC(e){var t=e(oa,oa),r=1;function s(){return r===1?e(oa,oa):r===.5?e(Spe,Cpe):e(W6(r),W6(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Ec(t)}function hC(){var e=mC(n1());return e.copy=function(){return Lp(e,hC()).exponent(e.exponent())},Pi.apply(e,arguments),e}function Ape(){return hC.apply(null,arguments).exponent(.5)}function V6(e){return Math.sign(e)*e*e}function Epe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GM(){var e=oC(),t=[0,1],r=!1,s;function a(i){var l=Epe(e(i));return isNaN(l)?s:r?Math.round(l):l}return a.invert=function(i){return e.invert(V6(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Xy)).map(V6)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return GM(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Pi.apply(a,arguments),Ec(a)}function JM(){var e=[],t=[],r=[],s;function a(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=Lhe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Op(r,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(pc),a()},i.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return JM().domain(e).range(t).unknown(s)},Pi.apply(i,arguments)}function KM(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Op(s,c,0,r)]:i}function o(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return KM().domain([e,t]).range(a).unknown(i)},Pi.apply(Ec(l),arguments)}function XM(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[Op(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return XM().domain(e).range(t).unknown(r)},Pi.apply(a,arguments)}const Uj=new Date,zj=new Date;function is(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},a.filter=i=>is(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),r&&(a.count=(i,l)=>(Uj.setTime(+i),zj.setTime(+l),e(Uj),e(zj),Math.floor(r(Uj,zj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?l=>s(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const Qy=is(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Qy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?is(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Qy);Qy.range;const Ql=1e3,gi=Ql*60,eo=gi*60,xo=eo*24,pC=xo*7,H6=xo*30,Wj=xo*365,dd=is(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ql)},(e,t)=>(t-e)/Ql,e=>e.getUTCSeconds());dd.range;const xC=is(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ql)},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getMinutes());xC.range;const gC=is(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getUTCMinutes());gC.range;const yC=is(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ql-e.getMinutes()*gi)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getHours());yC.range;const vC=is(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCHours());vC.range;const Ip=is(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gi)/xo,e=>e.getDate()-1);Ip.range;const s1=is(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xo,e=>e.getUTCDate()-1);s1.range;const YM=is(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xo,e=>Math.floor(e/xo));YM.range;function nu(e){return is(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*gi)/pC)}const a1=nu(0),ev=nu(1),Tpe=nu(2),Ppe=nu(3),Mf=nu(4),Ope=nu(5),Rpe=nu(6);a1.range;ev.range;Tpe.range;Ppe.range;Mf.range;Ope.range;Rpe.range;function su(e){return is(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/pC)}const i1=su(0),tv=su(1),Lpe=su(2),Ipe=su(3),Bf=su(4),Fpe=su(5),Dpe=su(6);i1.range;tv.range;Lpe.range;Ipe.range;Bf.range;Fpe.range;Dpe.range;const bC=is(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bC.range;const jC=is(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jC.range;const go=is(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());go.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:is(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});go.range;const yo=is(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:is(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});yo.range;function ZM(e,t,r,s,a,i){const l=[[dd,1,Ql],[dd,5,5*Ql],[dd,15,15*Ql],[dd,30,30*Ql],[i,1,gi],[i,5,5*gi],[i,15,15*gi],[i,30,30*gi],[a,1,eo],[a,3,3*eo],[a,6,6*eo],[a,12,12*eo],[s,1,xo],[s,2,2*xo],[r,1,pC],[t,1,H6],[t,3,3*H6],[e,1,Wj]];function o(d,u,f){const m=u<d;m&&([d,u]=[u,d]);const g=f&&typeof f.range=="function"?f:c(d,u,f),x=g?g.range(d,+u+1):[];return m?x.reverse():x}function c(d,u,f){const m=Math.abs(u-d)/f,g=nC(([,,p])=>p).right(l,m);if(g===l.length)return e.every(XN(d/Wj,u/Wj,f));if(g===0)return Qy.every(Math.max(XN(d,u,f),1));const[x,h]=l[m/l[g-1][2]<l[g][2]/m?g-1:g];return x.every(h)}return[o,c]}const[$pe,Mpe]=ZM(yo,jC,i1,YM,vC,gC),[Bpe,Upe]=ZM(go,bC,a1,Ip,yC,xC);function Vj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function zpe(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=Qm(a),u=e0(a),f=Qm(i),m=e0(i),g=Qm(l),x=e0(l),h=Qm(o),p=e0(o),v=Qm(c),b=e0(c),j={a:Z,A:H,b:R,B:D,c:null,d:Y6,e:Y6,f:uxe,g:jxe,G:wxe,H:oxe,I:cxe,j:dxe,L:QM,m:fxe,M:mxe,p:Y,q:M,Q:eP,s:tP,S:hxe,u:pxe,U:xxe,V:gxe,w:yxe,W:vxe,x:null,X:null,y:bxe,Y:_xe,Z:Nxe,"%":Q6},N={a:X,A:ne,b:J,B:ue,c:null,d:Z6,e:Z6,f:Axe,g:$xe,G:Bxe,H:kxe,I:Sxe,j:Cxe,L:t9,m:Exe,M:Txe,p:ke,q:ve,Q:eP,s:tP,S:Pxe,u:Oxe,U:Rxe,V:Lxe,w:Ixe,W:Fxe,x:null,X:null,y:Dxe,Y:Mxe,Z:Uxe,"%":Q6},w={a:P,A,b:S,B:E,c:O,d:K6,e:K6,f:sxe,g:J6,G:G6,H:X6,I:X6,j:exe,L:nxe,m:Qpe,M:txe,p:T,q:Zpe,Q:ixe,s:lxe,S:rxe,u:Gpe,U:Jpe,V:Kpe,w:qpe,W:Xpe,x:I,X:L,y:J6,Y:G6,Z:Ype,"%":axe};j.x=_(r,j),j.X=_(s,j),j.c=_(t,j),N.x=_(r,N),N.X=_(s,N),N.c=_(t,N);function _(je,ie){return function(se){var z=[],Te=-1,fe=0,Ie=je.length,ce,Ce,Ye;for(se instanceof Date||(se=new Date(+se));++Te<Ie;)je.charCodeAt(Te)===37&&(z.push(je.slice(fe,Te)),(Ce=q6[ce=je.charAt(++Te)])!=null?ce=je.charAt(++Te):Ce=ce==="e"?" ":"0",(Ye=ie[ce])&&(ce=Ye(se,Ce)),z.push(ce),fe=Te+1);return z.push(je.slice(fe,Te)),z.join("")}}function k(je,ie){return function(se){var z=Zm(1900,void 0,1),Te=C(z,je,se+="",0),fe,Ie;if(Te!=se.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(ie&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(fe=Hj(Zm(z.y,0,1)),Ie=fe.getUTCDay(),fe=Ie>4||Ie===0?tv.ceil(fe):tv(fe),fe=s1.offset(fe,(z.V-1)*7),z.y=fe.getUTCFullYear(),z.m=fe.getUTCMonth(),z.d=fe.getUTCDate()+(z.w+6)%7):(fe=Vj(Zm(z.y,0,1)),Ie=fe.getDay(),fe=Ie>4||Ie===0?ev.ceil(fe):ev(fe),fe=Ip.offset(fe,(z.V-1)*7),z.y=fe.getFullYear(),z.m=fe.getMonth(),z.d=fe.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Ie="Z"in z?Hj(Zm(z.y,0,1)).getUTCDay():Vj(Zm(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Ie+5)%7:z.w+z.U*7-(Ie+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Hj(z)):Vj(z)}}function C(je,ie,se,z){for(var Te=0,fe=ie.length,Ie=se.length,ce,Ce;Te<fe;){if(z>=Ie)return-1;if(ce=ie.charCodeAt(Te++),ce===37){if(ce=ie.charAt(Te++),Ce=w[ce in q6?ie.charAt(Te++):ce],!Ce||(z=Ce(je,se,z))<0)return-1}else if(ce!=se.charCodeAt(z++))return-1}return z}function T(je,ie,se){var z=d.exec(ie.slice(se));return z?(je.p=u.get(z[0].toLowerCase()),se+z[0].length):-1}function P(je,ie,se){var z=g.exec(ie.slice(se));return z?(je.w=x.get(z[0].toLowerCase()),se+z[0].length):-1}function A(je,ie,se){var z=f.exec(ie.slice(se));return z?(je.w=m.get(z[0].toLowerCase()),se+z[0].length):-1}function S(je,ie,se){var z=v.exec(ie.slice(se));return z?(je.m=b.get(z[0].toLowerCase()),se+z[0].length):-1}function E(je,ie,se){var z=h.exec(ie.slice(se));return z?(je.m=p.get(z[0].toLowerCase()),se+z[0].length):-1}function O(je,ie,se){return C(je,t,ie,se)}function I(je,ie,se){return C(je,r,ie,se)}function L(je,ie,se){return C(je,s,ie,se)}function Z(je){return l[je.getDay()]}function H(je){return i[je.getDay()]}function R(je){return c[je.getMonth()]}function D(je){return o[je.getMonth()]}function Y(je){return a[+(je.getHours()>=12)]}function M(je){return 1+~~(je.getMonth()/3)}function X(je){return l[je.getUTCDay()]}function ne(je){return i[je.getUTCDay()]}function J(je){return c[je.getUTCMonth()]}function ue(je){return o[je.getUTCMonth()]}function ke(je){return a[+(je.getUTCHours()>=12)]}function ve(je){return 1+~~(je.getUTCMonth()/3)}return{format:function(je){var ie=_(je+="",j);return ie.toString=function(){return je},ie},parse:function(je){var ie=k(je+="",!1);return ie.toString=function(){return je},ie},utcFormat:function(je){var ie=_(je+="",N);return ie.toString=function(){return je},ie},utcParse:function(je){var ie=k(je+="",!0);return ie.toString=function(){return je},ie}}}var q6={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,Wpe=/^%/,Vpe=/[\\^$*+?|[\]().{}]/g;function Ar(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function Hpe(e){return e.replace(Vpe,"\\$&")}function Qm(e){return new RegExp("^(?:"+e.map(Hpe).join("|")+")","i")}function e0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function qpe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function Gpe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function Jpe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function Kpe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function Xpe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function G6(e,t,r){var s=bs.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function J6(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function Ype(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Zpe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function Qpe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function K6(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function exe(e,t,r){var s=bs.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function X6(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function txe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function rxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function nxe(e,t,r){var s=bs.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function sxe(e,t,r){var s=bs.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function axe(e,t,r){var s=Wpe.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function ixe(e,t,r){var s=bs.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function lxe(e,t,r){var s=bs.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function Y6(e,t){return Ar(e.getDate(),t,2)}function oxe(e,t){return Ar(e.getHours(),t,2)}function cxe(e,t){return Ar(e.getHours()%12||12,t,2)}function dxe(e,t){return Ar(1+Ip.count(go(e),e),t,3)}function QM(e,t){return Ar(e.getMilliseconds(),t,3)}function uxe(e,t){return QM(e,t)+"000"}function fxe(e,t){return Ar(e.getMonth()+1,t,2)}function mxe(e,t){return Ar(e.getMinutes(),t,2)}function hxe(e,t){return Ar(e.getSeconds(),t,2)}function pxe(e){var t=e.getDay();return t===0?7:t}function xxe(e,t){return Ar(a1.count(go(e)-1,e),t,2)}function e9(e){var t=e.getDay();return t>=4||t===0?Mf(e):Mf.ceil(e)}function gxe(e,t){return e=e9(e),Ar(Mf.count(go(e),e)+(go(e).getDay()===4),t,2)}function yxe(e){return e.getDay()}function vxe(e,t){return Ar(ev.count(go(e)-1,e),t,2)}function bxe(e,t){return Ar(e.getFullYear()%100,t,2)}function jxe(e,t){return e=e9(e),Ar(e.getFullYear()%100,t,2)}function _xe(e,t){return Ar(e.getFullYear()%1e4,t,4)}function wxe(e,t){var r=e.getDay();return e=r>=4||r===0?Mf(e):Mf.ceil(e),Ar(e.getFullYear()%1e4,t,4)}function Nxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ar(t/60|0,"0",2)+Ar(t%60,"0",2)}function Z6(e,t){return Ar(e.getUTCDate(),t,2)}function kxe(e,t){return Ar(e.getUTCHours(),t,2)}function Sxe(e,t){return Ar(e.getUTCHours()%12||12,t,2)}function Cxe(e,t){return Ar(1+s1.count(yo(e),e),t,3)}function t9(e,t){return Ar(e.getUTCMilliseconds(),t,3)}function Axe(e,t){return t9(e,t)+"000"}function Exe(e,t){return Ar(e.getUTCMonth()+1,t,2)}function Txe(e,t){return Ar(e.getUTCMinutes(),t,2)}function Pxe(e,t){return Ar(e.getUTCSeconds(),t,2)}function Oxe(e){var t=e.getUTCDay();return t===0?7:t}function Rxe(e,t){return Ar(i1.count(yo(e)-1,e),t,2)}function r9(e){var t=e.getUTCDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function Lxe(e,t){return e=r9(e),Ar(Bf.count(yo(e),e)+(yo(e).getUTCDay()===4),t,2)}function Ixe(e){return e.getUTCDay()}function Fxe(e,t){return Ar(tv.count(yo(e)-1,e),t,2)}function Dxe(e,t){return Ar(e.getUTCFullYear()%100,t,2)}function $xe(e,t){return e=r9(e),Ar(e.getUTCFullYear()%100,t,2)}function Mxe(e,t){return Ar(e.getUTCFullYear()%1e4,t,4)}function Bxe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bf(e):Bf.ceil(e),Ar(e.getUTCFullYear()%1e4,t,4)}function Uxe(){return"+0000"}function Q6(){return"%"}function eP(e){return+e}function tP(e){return Math.floor(+e/1e3)}var vu,n9,s9;zxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zxe(e){return vu=zpe(e),n9=vu.format,vu.parse,s9=vu.utcFormat,vu.utcParse,vu}function Wxe(e){return new Date(e)}function Vxe(e){return e instanceof Date?+e:+new Date(+e)}function _C(e,t,r,s,a,i,l,o,c,d){var u=oC(),f=u.invert,m=u.domain,g=d(".%L"),x=d(":%S"),h=d("%I:%M"),p=d("%I %p"),v=d("%a %d"),b=d("%b %d"),j=d("%B"),N=d("%Y");function w(_){return(c(_)<_?g:o(_)<_?x:l(_)<_?h:i(_)<_?p:s(_)<_?a(_)<_?v:b:r(_)<_?j:N)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?m(Array.from(_,Vxe)):m().map(Wxe)},u.ticks=function(_){var k=m();return e(k[0],k[k.length-1],_??10)},u.tickFormat=function(_,k){return k==null?w:d(k)},u.nice=function(_){var k=m();return(!_||typeof _.range!="function")&&(_=t(k[0],k[k.length-1],_??10)),_?m(VM(k,_)):u},u.copy=function(){return Lp(u,_C(e,t,r,s,a,i,l,o,c,d))},u}function Hxe(){return Pi.apply(_C(Bpe,Upe,go,bC,a1,Ip,yC,xC,dd,n9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qxe(){return Pi.apply(_C($pe,Mpe,yo,jC,i1,s1,vC,gC,dd,s9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function l1(){var e=0,t=1,r,s,a,i,l=oa,o=!1,c;function d(f){return f==null||isNaN(f=+f)?c:l(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(f){return arguments.length?(o=!!f,d):o},d.interpolator=function(f){return arguments.length?(l=f,d):l};function u(f){return function(m){var g,x;return arguments.length?([g,x]=m,l=f(g,x),d):[l(0),l(1)]}}return d.range=u(Tm),d.rangeRound=u(lC),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),s=f(t),a=r===s?0:1/(s-r),d}}function Tc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function a9(){var e=Ec(l1()(oa));return e.copy=function(){return Tc(e,a9())},Ao.apply(e,arguments)}function i9(){var e=uC(l1()).domain([1,10]);return e.copy=function(){return Tc(e,i9()).base(e.base())},Ao.apply(e,arguments)}function l9(){var e=fC(l1());return e.copy=function(){return Tc(e,l9()).constant(e.constant())},Ao.apply(e,arguments)}function wC(){var e=mC(l1());return e.copy=function(){return Tc(e,wC()).exponent(e.exponent())},Ao.apply(e,arguments)}function Gxe(){return wC.apply(null,arguments).exponent(.5)}function o9(){var e=[],t=oa;function r(s){if(s!=null&&!isNaN(s=+s))return t((Op(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(pc),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>Rhe(e,i/s))},r.copy=function(){return o9(t).domain(e)},Ao.apply(r,arguments)}function o1(){var e=0,t=.5,r=1,s=1,a,i,l,o,c,d=oa,u,f=!1,m;function g(h){return isNaN(h=+h)?m:(h=.5+((h=+u(h))-i)*(s*h<s*i?o:c),d(f?Math.max(0,Math.min(1,h)):h))}g.domain=function(h){return arguments.length?([e,t,r]=h,a=u(e=+e),i=u(t=+t),l=u(r=+r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,g):[e,t,r]},g.clamp=function(h){return arguments.length?(f=!!h,g):f},g.interpolator=function(h){return arguments.length?(d=h,g):d};function x(h){return function(p){var v,b,j;return arguments.length?([v,b,j]=p,d=ape(h,[v,b,j]),g):[d(0),d(.5),d(1)]}}return g.range=x(Tm),g.rangeRound=x(lC),g.unknown=function(h){return arguments.length?(m=h,g):m},function(h){return u=h,a=h(e),i=h(t),l=h(r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,g}}function c9(){var e=Ec(o1()(oa));return e.copy=function(){return Tc(e,c9())},Ao.apply(e,arguments)}function d9(){var e=uC(o1()).domain([.1,1,10]);return e.copy=function(){return Tc(e,d9()).base(e.base())},Ao.apply(e,arguments)}function u9(){var e=fC(o1());return e.copy=function(){return Tc(e,u9()).constant(e.constant())},Ao.apply(e,arguments)}function NC(){var e=mC(o1());return e.copy=function(){return Tc(e,NC()).exponent(e.exponent())},Ao.apply(e,arguments)}function Jxe(){return NC.apply(null,arguments).exponent(.5)}const rP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kh,scaleDiverging:c9,scaleDivergingLog:d9,scaleDivergingPow:NC,scaleDivergingSqrt:Jxe,scaleDivergingSymlog:u9,scaleIdentity:WM,scaleImplicit:YN,scaleLinear:Zy,scaleLog:HM,scaleOrdinal:sC,scalePoint:I0,scalePow:hC,scaleQuantile:JM,scaleQuantize:KM,scaleRadial:GM,scaleSequential:a9,scaleSequentialLog:i9,scaleSequentialPow:wC,scaleSequentialQuantile:o9,scaleSequentialSqrt:Gxe,scaleSequentialSymlog:l9,scaleSqrt:Ape,scaleSymlog:qM,scaleThreshold:XM,scaleTime:Hxe,scaleUtc:qxe,tickFormat:zM},Symbol.toStringTag,{value:"Module"}));var Kxe=jm;function Xxe(e,t,r){for(var s=-1,a=e.length;++s<a;){var i=e[s],l=t(i);if(l!=null&&(o===void 0?l===l&&!Kxe(l):r(l,o)))var o=l,c=i}return c}var c1=Xxe;function Yxe(e,t){return e>t}var f9=Yxe,Zxe=c1,Qxe=f9,ege=Em;function tge(e){return e&&e.length?Zxe(e,ege,Qxe):void 0}var rge=tge;const Qo=$r(rge);function nge(e,t){return e<t}var m9=nge,sge=c1,age=m9,ige=Em;function lge(e){return e&&e.length?sge(e,ige,age):void 0}var oge=lge;const d1=$r(oge);var cge=$S,dge=Ml,uge=jM,fge=Pa;function mge(e,t){var r=fge(e)?cge:uge;return r(e,dge(t))}var hge=mge,pge=vM,xge=hge;function gge(e,t){return pge(xge(e,t),1)}var yge=gge;const vge=$r(yge);var bge=QS;function jge(e,t){return bge(e,t)}var _ge=jge;const $d=$r(_ge);var Pm=1e9,wge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SC,hn=!0,Si="[DecimalError] ",vd=Si+"Invalid argument: ",kC=Si+"Exponent out of range: ",Om=Math.floor,Xc=Math.pow,Nge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ua,cs=1e7,an=7,h9=9007199254740991,rv=Om(h9/an),Rt={};Rt.absoluteValue=Rt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Rt.comparedTo=Rt.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};Rt.decimalPlaces=Rt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*an;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Rt.dividedBy=Rt.div=function(e){return ao(this,new this.constructor(e))};Rt.dividedToIntegerBy=Rt.idiv=function(e){var t=this,r=t.constructor;return qr(ao(t,new r(e),0,1),r.precision)};Rt.equals=Rt.eq=function(e){return!this.cmp(e)};Rt.exponent=function(){return Jn(this)};Rt.greaterThan=Rt.gt=function(e){return this.cmp(e)>0};Rt.greaterThanOrEqualTo=Rt.gte=function(e){return this.cmp(e)>=0};Rt.isInteger=Rt.isint=function(){return this.e>this.d.length-2};Rt.isNegative=Rt.isneg=function(){return this.s<0};Rt.isPositive=Rt.ispos=function(){return this.s>0};Rt.isZero=function(){return this.s===0};Rt.lessThan=Rt.lt=function(e){return this.cmp(e)<0};Rt.lessThanOrEqualTo=Rt.lte=function(e){return this.cmp(e)<1};Rt.logarithm=Rt.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ua))throw Error(Si+"NaN");if(r.s<1)throw Error(Si+(r.s?"NaN":"-Infinity"));return r.eq(Ua)?new s(0):(hn=!1,t=ao(Th(r,i),Th(e,i),i),hn=!0,qr(t,a))};Rt.minus=Rt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?g9(t,e):p9(t,(e.s=-e.s,e))};Rt.modulo=Rt.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Si+"NaN");return r.s?(hn=!1,t=ao(r,e,0,1).times(e),hn=!0,r.minus(t)):qr(new s(r),a)};Rt.naturalExponential=Rt.exp=function(){return x9(this)};Rt.naturalLogarithm=Rt.ln=function(){return Th(this)};Rt.negated=Rt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Rt.plus=Rt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?p9(t,e):g9(t,(e.s=-e.s,e))};Rt.precision=Rt.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vd+e);if(t=Jn(a)+1,s=a.d.length-1,r=s*an+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};Rt.squareRoot=Rt.sqrt=function(){var e,t,r,s,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Si+"NaN")}for(e=Jn(o),hn=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=_l(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Om((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=l=r+3;;)if(i=s,s=i.plus(ao(o,i,l+2)).times(.5),_l(i.d).slice(0,l)===(t=_l(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(qr(i,r+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return hn=!0,qr(s,r)};Rt.times=Rt.mul=function(e){var t,r,s,a,i,l,o,c,d,u=this,f=u.constructor,m=u.d,g=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=m.length,d=g.length,c<d&&(i=m,m=g,g=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)o=i[a]+g[s]*m[a-s-1]+t,i[a--]=o%cs|0,t=o/cs|0;i[a]=(i[a]+t)%cs|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,hn?qr(e,f.precision):e};Rt.toDecimalPlaces=Rt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(Rl(e,0,Pm),t===void 0?t=s.rounding:Rl(t,0,8),qr(r,e+Jn(r)+1,t))};Rt.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=Md(s,!0):(Rl(e,0,Pm),t===void 0?t=a.rounding:Rl(t,0,8),s=qr(new a(s),e+1,t),r=Md(s,!0,e+1)),r};Rt.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?Md(a):(Rl(e,0,Pm),t===void 0?t=i.rounding:Rl(t,0,8),s=qr(new i(a),e+Jn(a)+1,t),r=Md(s.abs(),!1,e+Jn(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Rt.toInteger=Rt.toint=function(){var e=this,t=e.constructor;return qr(new t(e),Jn(e)+1,t.rounding)};Rt.toNumber=function(){return+this};Rt.toPower=Rt.pow=function(e){var t,r,s,a,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Ua);if(o=new c(o),!o.s){if(e.s<1)throw Error(Si+"Infinity");return o}if(o.eq(Ua))return o;if(s=c.precision,e.eq(Ua))return qr(o,s);if(t=e.e,r=e.d.length-1,l=t>=r,i=o.s,l){if((r=u<0?-u:u)<=h9){for(a=new c(Ua),t=Math.ceil(s/an+4),hn=!1;r%2&&(a=a.times(o),sP(a.d,t)),r=Om(r/2),r!==0;)o=o.times(o),sP(o.d,t);return hn=!0,e.s<0?new c(Ua).div(a):qr(a,s)}}else if(i<0)throw Error(Si+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,hn=!1,a=e.times(Th(o,s+d)),hn=!0,a=x9(a),a.s=i,a};Rt.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=Jn(a),s=Md(a,r<=i.toExpNeg||r>=i.toExpPos)):(Rl(e,1,Pm),t===void 0?t=i.rounding:Rl(t,0,8),a=qr(new i(a),e,t),r=Jn(a),s=Md(a,e<=r||r<=i.toExpNeg,e)),s};Rt.toSignificantDigits=Rt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Rl(e,1,Pm),t===void 0?t=s.rounding:Rl(t,0,8)),qr(new s(r),e,t)};Rt.toString=Rt.valueOf=Rt.val=Rt.toJSON=Rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jn(e),r=e.constructor;return Md(e,t<=r.toExpNeg||t>=r.toExpPos)};function p9(e,t){var r,s,a,i,l,o,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),hn?qr(t,f):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),i=l-a,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,a=l,o=c.length),l=Math.ceil(f/an),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/cs|0,c[i]%=cs;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,hn?qr(t,f):t}function Rl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vd+e)}function _l(e){var t,r,s,a=e.length-1,i="",l=e[0];if(a>0){for(i+=l,t=1;t<a;t++)s=e[t]+"",r=an-s.length,r&&(i+=Ho(r)),i+=s;l=e[t],s=l+"",r=an-s.length,r&&(i+=Ho(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var ao=function(){function e(s,a){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*a+l,s[o]=i%cs|0,l=i/cs|0;return l&&s.unshift(l),s}function t(s,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=a[o]){c=s[o]>a[o]?1:-1;break}return c}function r(s,a,i){for(var l=0;i--;)s[i]-=l,l=s[i]<a[i]?1:0,s[i]=l*cs+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,l){var o,c,d,u,f,m,g,x,h,p,v,b,j,N,w,_,k,C,T=s.constructor,P=s.s==a.s?1:-1,A=s.d,S=a.d;if(!s.s)return new T(s);if(!a.s)throw Error(Si+"Division by zero");for(c=s.e-a.e,k=S.length,w=A.length,g=new T(P),x=g.d=[],d=0;S[d]==(A[d]||0);)++d;if(S[d]>(A[d]||0)&&--c,i==null?b=i=T.precision:l?b=i+(Jn(s)-Jn(a))+1:b=i,b<0)return new T(0);if(b=b/an+2|0,d=0,k==1)for(u=0,S=S[0],b++;(d<w||u)&&b--;d++)j=u*cs+(A[d]||0),x[d]=j/S|0,u=j%S|0;else{for(u=cs/(S[0]+1)|0,u>1&&(S=e(S,u),A=e(A,u),k=S.length,w=A.length),N=k,h=A.slice(0,k),p=h.length;p<k;)h[p++]=0;C=S.slice(),C.unshift(0),_=S[0],S[1]>=cs/2&&++_;do u=0,o=t(S,h,k,p),o<0?(v=h[0],k!=p&&(v=v*cs+(h[1]||0)),u=v/_|0,u>1?(u>=cs&&(u=cs-1),f=e(S,u),m=f.length,p=h.length,o=t(f,h,m,p),o==1&&(u--,r(f,k<m?C:S,m))):(u==0&&(o=u=1),f=S.slice()),m=f.length,m<p&&f.unshift(0),r(h,f,p),o==-1&&(p=h.length,o=t(S,h,k,p),o<1&&(u++,r(h,k<p?C:S,p))),p=h.length):o===0&&(u++,h=[0]),x[d++]=u,o&&h[0]?h[p++]=A[N]||0:(h=[A[N]],p=1);while((N++<w||h[0]!==void 0)&&b--)}return x[0]||x.shift(),g.e=c,qr(g,l?i+Jn(g)+1:i)}}();function x9(e,t){var r,s,a,i,l,o,c=0,d=0,u=e.constructor,f=u.precision;if(Jn(e)>16)throw Error(kC+Jn(e));if(!e.s)return new u(Ua);for(hn=!1,o=f,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(Xc(2,d))/Math.LN10*2+5|0,o+=s,r=a=i=new u(Ua),u.precision=o;;){if(a=qr(a.times(e),o),r=r.times(++c),l=i.plus(ao(a,r,o)),_l(l.d).slice(0,o)===_l(i.d).slice(0,o)){for(;d--;)i=qr(i.times(i),o);return u.precision=f,t==null?(hn=!0,qr(i,f)):i}i=l}}function Jn(e){for(var t=e.e*an,r=e.d[0];r>=10;r/=10)t++;return t}function qj(e,t,r){if(t>e.LN10.sd())throw hn=!0,r&&(e.precision=r),Error(Si+"LN10 precision limit exceeded");return qr(new e(e.LN10),t)}function Ho(e){for(var t="";e--;)t+="0";return t}function Th(e,t){var r,s,a,i,l,o,c,d,u,f=1,m=10,g=e,x=g.d,h=g.constructor,p=h.precision;if(g.s<1)throw Error(Si+(g.s?"NaN":"-Infinity"));if(g.eq(Ua))return new h(0);if(t==null?(hn=!1,d=p):d=t,g.eq(10))return t==null&&(hn=!0),qj(h,d);if(d+=m,h.precision=d,r=_l(x),s=r.charAt(0),i=Jn(g),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)g=g.times(e),r=_l(g.d),s=r.charAt(0),f++;i=Jn(g),s>1?(g=new h("0."+r),i++):g=new h(s+"."+r.slice(1))}else return c=qj(h,d+2,p).times(i+""),g=Th(new h(s+"."+r.slice(1)),d-m).plus(c),h.precision=p,t==null?(hn=!0,qr(g,p)):g;for(o=l=g=ao(g.minus(Ua),g.plus(Ua),d),u=qr(g.times(g),d),a=3;;){if(l=qr(l.times(u),d),c=o.plus(ao(l,new h(a),d)),_l(c.d).slice(0,d)===_l(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(qj(h,d+2,p).times(i+""))),o=ao(o,new h(f),d),h.precision=p,t==null?(hn=!0,qr(o,p)):o;o=c,a+=2}}function nP(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=Om(r/an),e.d=[],s=(r+1)%an,r<0&&(s+=an),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=an;s<a;)e.d.push(+t.slice(s,s+=an));t=t.slice(s),s=an-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),hn&&(e.e>rv||e.e<-rv))throw Error(kC+r)}else e.s=0,e.e=0,e.d=[0];return e}function qr(e,t,r){var s,a,i,l,o,c,d,u,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=an,a=t,d=f[u=0];else{if(u=Math.ceil((s+1)/an),i=f.length,u>=i)return e;for(d=i=f[u],l=1;i>=10;i/=10)l++;s%=an,a=s-an+l}if(r!==void 0&&(i=Xc(10,l-a-1),o=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(s>0?a>0?d/Xc(10,l-a):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Jn(e),f.length=1,t=t-i-1,f[0]=Xc(10,(an-t%an)%an),e.e=Om(-t/an)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=Xc(10,an-s),f[u]=a>0?(d/Xc(10,l-a)%Xc(10,a)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==cs&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=cs)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(hn&&(e.e>rv||e.e<-rv))throw Error(kC+Jn(e));return e}function g9(e,t){var r,s,a,i,l,o,c,d,u,f,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),hn?qr(t,g):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(r=c,l=-l,o=f.length):(r=f,s=d,o=c.length),a=Math.max(Math.ceil(g/an),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){u=c[a]<f[a];break}l=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>l;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=cs-1;--c[i],c[a]+=cs}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,hn?qr(t,g):t):new m(0)}function Md(e,t,r){var s,a=Jn(e),i=_l(e.d),l=i.length;return t?(r&&(s=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Ho(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ho(-a-1)+i,r&&(s=r-l)>0&&(i+=Ho(s))):a>=l?(i+=Ho(a+1-l),r&&(s=r-a-1)>0&&(i=i+"."+Ho(s))):((s=a+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-l)>0&&(a+1===l&&(i+="."),i+=Ho(s))),e.s<0?"-"+i:i}function sP(e,t){if(e.length>t)return e.length=t,!0}function y9(e){var t,r,s;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vd+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return nP(l,i.toString())}else if(typeof i!="string")throw Error(vd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,Nge.test(i))nP(l,i);else throw Error(vd+i)}if(a.prototype=Rt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=y9,a.config=a.set=kge,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function kge(e){if(!e||typeof e!="object")throw Error(Si+"Object expected");var t,r,s,a=["precision",1,Pm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(Om(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(vd+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(vd+r+": "+s);return this}var SC=y9(wge);Ua=new SC(1);const Ur=SC;function Sge(e){return Tge(e)||Ege(e)||Age(e)||Cge()}function Cge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Age(e,t){if(e){if(typeof e=="string")return t2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t2(e,t)}}function Ege(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Tge(e){if(Array.isArray(e))return t2(e)}function t2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Pge=function(t){return t},v9={},b9=function(t){return t===v9},aP=function(t){return function r(){return arguments.length===0||arguments.length===1&&b9(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Oge=function e(t,r){return t===1?r:aP(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==v9}).length;return l>=t?r.apply(void 0,a):e(t-l,aP(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(f){return b9(f)?c.shift():f});return r.apply(void 0,Sge(u).concat(c))}))})},u1=function(t){return Oge(t.length,t)},r2=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},Rge=u1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Lge=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return Pge;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},n2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},j9=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r&&i.every(function(o,c){return o===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function Ige(e){var t;return e===0?t=1:t=Math.floor(new Ur(e).abs().log(10).toNumber())+1,t}function Fge(e,t,r){for(var s=new Ur(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var Dge=u1(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),$ge=u1(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),Mge=u1(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const f1={rangeStep:Fge,getDigitCount:Ige,interpolateNumber:Dge,uninterpolateNumber:$ge,uninterpolateTruncation:Mge};function s2(e){return zge(e)||Uge(e)||_9(e)||Bge()}function Bge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uge(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zge(e){if(Array.isArray(e))return a2(e)}function Ph(e,t){return Hge(e)||Vge(e,t)||_9(e,t)||Wge()}function Wge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _9(e,t){if(e){if(typeof e=="string")return a2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(e,t)}}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Vge(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(s=(o=l.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw i}}return r}}function Hge(e){if(Array.isArray(e))return e}function w9(e){var t=Ph(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function N9(e,t,r){if(e.lte(0))return new Ur(0);var s=f1.getDigitCount(e.toNumber()),a=new Ur(10).pow(s),i=e.div(a),l=s!==1?.05:.1,o=new Ur(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return t?c:new Ur(Math.ceil(c))}function qge(e,t,r){var s=1,a=new Ur(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new Ur(10).pow(f1.getDigitCount(e)-1),a=new Ur(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Ur(Math.floor(e)))}else e===0?a=new Ur(Math.floor((t-1)/2)):r||(a=new Ur(Math.floor(e)));var l=Math.floor((t-1)/2),o=Lge(Rge(function(c){return a.add(new Ur(c-l).mul(s)).toNumber()}),r2);return o(0,t)}function k9(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ur(0),tickMin:new Ur(0),tickMax:new Ur(0)};var i=N9(new Ur(t).sub(e).div(r-1),s,a),l;e<=0&&t>=0?l=new Ur(0):(l=new Ur(e).add(t).div(2),l=l.sub(new Ur(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),c=Math.ceil(new Ur(t).sub(l).div(i).toNumber()),d=o+c+1;return d>r?k9(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,o=t>0?o:o+(r-d)),{step:i,tickMin:l.sub(new Ur(o).mul(i)),tickMax:l.add(new Ur(c).mul(i))})}function Gge(e){var t=Ph(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=w9([r,s]),c=Ph(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(s2(r2(0,a-1).map(function(){return 1/0}))):[].concat(s2(r2(0,a-1).map(function(){return-1/0})),[u]);return r>s?n2(f):f}if(d===u)return qge(d,a,i);var m=k9(d,u,l,i),g=m.step,x=m.tickMin,h=m.tickMax,p=f1.rangeStep(x,h.add(new Ur(.1).mul(g)),g);return r>s?n2(p):p}function Jge(e,t){var r=Ph(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=w9([s,a]),o=Ph(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),f=N9(new Ur(d).sub(c).div(u-1),i,0),m=[].concat(s2(f1.rangeStep(new Ur(c),new Ur(d).sub(new Ur(.99).mul(f)),f)),[d]);return s>a?n2(m):m}var Kge=j9(Gge),Xge=j9(Jge),Yge="Invariant failed";function Bd(e,t){throw new Error(Yge)}var Zge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},nv.apply(this,arguments)}function Qge(e,t){return nye(e)||rye(e,t)||tye(e,t)||eye()}function eye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tye(e,t){if(e){if(typeof e=="string")return iP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iP(e,t)}}function iP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function rye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function nye(e){if(Array.isArray(e))return e}function sye(e,t){if(e==null)return{};var r=aye(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function aye(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function iye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lye(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,A9(s.key),s)}}function oye(e,t,r){return t&&lye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cye(e,t,r){return t=sv(t),dye(e,S9()?Reflect.construct(t,r||[],sv(e).constructor):t.apply(e,r))}function dye(e,t){if(t&&(Uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uye(e)}function uye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S9=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sv(e)}function fye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i2(e,t)}function i2(e,t){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},i2(e,t)}function C9(e,t,r){return t=A9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A9(e){var t=mye(e,"string");return Uf(t)=="symbol"?t:t+""}function mye(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Uf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fp=function(e){function t(){return iye(this,t),cye(this,t,arguments)}return fye(t,e),oye(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,l=s.width,o=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,f=s.yAxis,m=sye(s,Zge),g=Ht(m,!1);this.props.direction==="x"&&u.type!=="number"&&Bd();var x=c.map(function(h){var p=d(h,o),v=p.x,b=p.y,j=p.value,N=p.errorVal;if(!N)return null;var w=[],_,k;if(Array.isArray(N)){var C=Qge(N,2);_=C[0],k=C[1]}else _=k=N;if(i==="vertical"){var T=u.scale,P=b+a,A=P+l,S=P-l,E=T(j-_),O=T(j+k);w.push({x1:O,y1:A,x2:O,y2:S}),w.push({x1:E,y1:P,x2:O,y2:P}),w.push({x1:E,y1:A,x2:E,y2:S})}else if(i==="horizontal"){var I=f.scale,L=v+a,Z=L-l,H=L+l,R=I(j-_),D=I(j+k);w.push({x1:Z,y1:D,x2:H,y2:D}),w.push({x1:L,y1:R,x2:L,y2:D}),w.push({x1:Z,y1:R,x2:H,y2:R})}return we.createElement(pr,nv({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},g),w.map(function(Y){return we.createElement("line",nv({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return we.createElement(pr,{className:"recharts-errorBars"},x)}}])}(we.Component);C9(Fp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});C9(Fp,"displayName","ErrorBar");function Oh(e){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Dc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(s){hye(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hye(e,t,r){return t=pye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pye(e){var t=xye(e,"string");return Oh(t)=="symbol"?t:t+""}function xye(e,t){if(Oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Oh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E9=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,l=$a(r,gd);if(!l)return null;var o=gd.defaultProps,c=o!==void 0?Dc(Dc({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(s||[]).reduce(function(u,f){var m=f.item,g=f.props,x=g.sectors||g.data||[];return u.concat(x.map(function(h){return{type:l.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):d=(s||[]).map(function(u){var f=u.item,m=f.type.defaultProps,g=m!==void 0?Dc(Dc({},m),f.props):{},x=g.dataKey,h=g.name,p=g.legendType,v=g.hide;return{inactive:v,dataKey:x,type:c.iconType||p||"square",color:CC(f),value:h||x,payload:g}}),Dc(Dc(Dc({},c),gd.getWithHeight(l,a)),{},{payload:d,item:l})};function Rh(e){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function oP(e){return bye(e)||vye(e)||yye(e)||gye()}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yye(e,t){if(e){if(typeof e=="string")return l2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l2(e,t)}}function vye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bye(e){if(Array.isArray(e))return l2(e)}function l2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(s){xf(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xf(e,t,r){return t=jye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jye(e){var t=_ye(e,"string");return Rh(t)=="symbol"?t:t+""}function _ye(e,t){if(Rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Rh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dn(e,t,r){return ar(e)||ar(t)?r:ns(t)?qa(e,t,r):Qt(t)?t(e):r}function F0(e,t,r,s){var a=vge(e,function(o){return Dn(o,t)});if(r==="number"){var i=a.filter(function(o){return bt(o)||parseFloat(o)});return i.length?[d1(i),Qo(i)]:[1/0,-1/0]}var l=s?a.filter(function(o){return!ar(o)}):a;return l.map(function(o){return ns(o)||o instanceof Date?o:""})}var wye=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,f=a[d].coordinate,m=d>=o-1?a[0].coordinate:a[d+1].coordinate,g=void 0;if(ia(f-u)!==ia(m-f)){var x=[];if(ia(m-f)===ia(c[1]-c[0])){g=m;var h=f+c[1]-c[0];x[0]=Math.min(h,(h+u)/2),x[1]=Math.max(h,(h+u)/2)}else{g=u;var p=m+c[1]-c[0];x[0]=Math.min(f,(p+f)/2),x[1]=Math.max(f,(p+f)/2)}var v=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){l=a[d].index;break}}else{var b=Math.min(u,m),j=Math.max(u,m);if(t>(b+f)/2&&t<=(j+f)/2){l=a[d].index;break}}}else for(var N=0;N<o;N++)if(N===0&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<o-1&&t>(s[N].coordinate+s[N-1].coordinate)/2&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N===o-1&&t>(s[N].coordinate+s[N-1].coordinate)/2){l=s[N].index;break}return l},CC=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},Nye=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,f=Object.keys(u),m=0,g=f.length;m<g;m++){var x=u[f[m]],h=x.items,p=x.cateAxisId,v=h.filter(function(k){return so(k.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,j=b!==void 0?En(En({},b),v[0].props):v[0].props,N=j.barSize,w=j[p];l[w]||(l[w]=[]);var _=ar(N)?r:N;l[w].push({item:v[0],stackList:v.slice(1),barSize:ar(_)?void 0:la(_,s,0)})}}return l},kye=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,o=t.maxBarSize,c=l.length;if(c<1)return null;var d=la(r,a,0,!0),u,f=[];if(l[0].barSize===+l[0].barSize){var m=!1,g=a/c,x=l.reduce(function(N,w){return N+w.barSize||0},0);x+=(c-1)*d,x>=a&&(x-=(c-1)*d,d=0),x>=a&&g>0&&(m=!0,g*=.9,x=c*g);var h=(a-x)/2>>0,p={offset:h-d,size:0};u=l.reduce(function(N,w){var _={item:w.item,position:{offset:p.offset+p.size+d,size:m?g:w.barSize}},k=[].concat(oP(N),[_]);return p=k[k.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){k.push({item:C,position:p})}),k},f)}else{var v=la(s,a,0,!0);a-2*v-(c-1)*d<=0&&(d=0);var b=(a-2*v-(c-1)*d)/c;b>1&&(b>>=0);var j=o===+o?Math.min(b,o):b;u=l.reduce(function(N,w,_){var k=[].concat(oP(N),[{item:w.item,position:{offset:v+(b+d)*_+(b-j)/2,size:j}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){k.push({item:C,position:k[k.length-1].position})}),k},f)}return u},Sye=function(t,r,s,a){var i=s.children,l=s.width,o=s.margin,c=l-(o.left||0)-(o.right||0),d=E9({children:i,legendWidth:c});if(d){var u=a||{},f=u.width,m=u.height,g=d.align,x=d.verticalAlign,h=d.layout;if((h==="vertical"||h==="horizontal"&&x==="middle")&&g!=="center"&&bt(t[g]))return En(En({},t),{},xf({},g,t[g]+(f||0)));if((h==="horizontal"||h==="vertical"&&g==="center")&&x!=="middle"&&bt(t[x]))return En(En({},t),{},xf({},x,t[x]+(m||0)))}return t},Cye=function(t,r,s){return ar(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},T9=function(t,r,s,a,i){var l=r.props.children,o=Ga(l,Fp).filter(function(d){return Cye(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Dn(u,s);if(ar(f))return d;var m=Array.isArray(f)?[d1(f),Qo(f)]:[f,f],g=c.reduce(function(x,h){var p=Dn(u,h,0),v=m[0]-Math.abs(Array.isArray(p)?p[0]:p),b=m[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,x[0]),Math.max(b,x[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},Aye=function(t,r,s,a,i){var l=r.map(function(o){return T9(t,o,s,i,a)}).filter(function(o){return!ar(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},P9=function(t,r,s,a,i){var l=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&T9(t,c,d,a)||F0(t,d,s,i)});if(s==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},O9=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},R9=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,l,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(l=!0),c.coordinate});return i||o.push(r),l||o.push(s),o},to=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,l=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ia(o[0]-o[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:a(m)+d,value:f,offset:d}});return u.filter(function(f){return!Sm(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:a(f)+d,value:f,index:m,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+d,value:f,offset:d}}):a.domain().map(function(f,m){return{coordinate:a(f)+d,value:i?i[f]:f,index:m,offset:d}})},Gj=new WeakMap,Px=function(t,r){if(typeof r!="function")return t;Gj.has(t)||Gj.set(t,new WeakMap);var s=Gj.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},L9=function(t,r,s){var a=t.scale,i=t.type,l=t.layout,o=t.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:kh(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Zy(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:I0(),realScaleType:"point"}:i==="category"?{scale:kh(),realScaleType:"band"}:{scale:Zy(),realScaleType:"linear"};if(Ld(a)){var c="scale".concat(Xb(a));return{scale:(rP[c]||I0)(),realScaleType:rP[c]?c:"point"}}return Qt(a)?{scale:a}:{scale:I0(),realScaleType:"point"}},dP=1e-4,I9=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-dP,l=Math.max(a[0],a[1])+dP,o=t(r[0]),c=t(r[s-1]);(o<i||o>l||c<i||c>l)&&t.domain([r[0],r[s-1]])}},Eye=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},Tye=function(t,r){if(!r||r.length!==2||!bt(r[0])||!bt(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!bt(t[0])||t[0]<s)&&(i[0]=s),(!bt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},Pye=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0,o=0;o<r;++o){var c=Sm(t[o][s][1])?t[o][s][0]:t[o][s][1];c>=0?(t[o][s][0]=i,t[o][s][1]=i+c,i=t[o][s][1]):(t[o][s][0]=l,t[o][s][1]=l+c,l=t[o][s][1])}},Oye=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0;l<r;++l){var o=Sm(t[l][s][1])?t[l][s][0]:t[l][s][1];o>=0?(t[l][s][0]=i,t[l][s][1]=i+o,i=t[l][s][1]):(t[l][s][0]=0,t[l][s][1]=0)}},Rye={sign:Pye,expand:Zae,none:Rf,silhouette:Qae,wiggle:eie,positive:Oye},Lye=function(t,r,s){var a=r.map(function(o){return o.props.dataKey}),i=Rye[s],l=Yae().keys(a).value(function(o,c){return+Dn(o,c,0)}).order(ON).offset(i);return l(t)},Iye=function(t,r,s,a,i,l){if(!t)return null;var o=l?r.reverse():r,c={},d=o.reduce(function(f,m){var g,x=(g=m.type)!==null&&g!==void 0&&g.defaultProps?En(En({},m.type.defaultProps),m.props):m.props,h=x.stackId,p=x.hide;if(p)return f;var v=x[s],b=f[v]||{hasStack:!1,stackGroups:{}};if(ns(h)){var j=b.stackGroups[h]||{numericAxisId:s,cateAxisId:a,items:[]};j.items.push(m),b.hasStack=!0,b.stackGroups[h]=j}else b.stackGroups[ru("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[m]};return En(En({},f),{},xf({},v,b))},c),u={};return Object.keys(d).reduce(function(f,m){var g=d[m];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(h,p){var v=g.stackGroups[p];return En(En({},h),{},xf({},p,{numericAxisId:s,cateAxisId:a,items:v.items,stackedData:Lye(t,v.items,i)}))},x)}return En(En({},f),{},xf({},m,g))},u)},F9=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Kge(d,i,o);return t.domain([d1(u),Qo(u)]),{niceTicks:u}}if(i&&a==="number"){var f=t.domain(),m=Xge(f,i,o);return{niceTicks:m}}return null};function av(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ar(a[t.dataKey])){var o=Py(r,"value",a[t.dataKey]);if(o)return o.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=Dn(a,ar(l)?t.dataKey:l);return ar(c)?null:t.scale(c)}var uP=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,l=t.entry,o=t.index;if(r.type==="category")return s[o]?s[o].coordinate+a:null;var c=Dn(l,r.dataKey,r.domain[o]);return ar(c)?null:r.scale(c)-i/2+a},Fye=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},Dye=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(ns(i)){var l=r[i];if(l){var o=l.items.indexOf(t);return o>=0?l.stackedData[o]:null}}return null},$ye=function(t){return t.reduce(function(r,s){return[d1(s.concat([r[0]]).filter(bt)),Qo(s.concat([r[1]]).filter(bt))]},[1/0,-1/0])},D9=function(t,r,s){return Object.keys(t).reduce(function(a,i){var l=t[i],o=l.stackedData,c=o.reduce(function(d,u){var f=$ye(u.slice(r,s+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},fP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o2=function(t,r,s){if(Qt(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(bt(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(fP.test(t[0])){var i=+fP.exec(t[0])[1];a[0]=r[0]-i}else Qt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(bt(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(mP.test(t[1])){var l=+mP.exec(t[1])[1];a[1]=r[1]+l}else Qt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},iv=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=tC(r,function(f){return f.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0},hP=function(t,r,s){return!t||!t.length||$d(t,qa(s,"type.defaultProps.domain"))?r:t},$9=function(t,r){var s=t.type.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,l=s.unit,o=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return En(En({},Ht(t,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:CC(t),value:Dn(r,a),type:c,payload:r,chartType:d,hide:u})};function Lh(e){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(s){M9(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function M9(e,t,r){return t=Mye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mye(e){var t=Bye(e,"string");return Lh(t)=="symbol"?t:t+""}function Bye(e,t){if(Lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uye(e,t){return Hye(e)||Vye(e,t)||Wye(e,t)||zye()}function zye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wye(e,t){if(e){if(typeof e=="string")return xP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xP(e,t)}}function xP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Vye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Hye(e){if(Array.isArray(e))return e}var lv=Math.PI/180,qye=function(t){return t*180/Math.PI},Qr=function(t,r,s,a){return{x:t+Math.cos(-lv*a)*s,y:r+Math.sin(-lv*a)*s}},B9=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},Gye=function(t,r,s,a,i){var l=t.width,o=t.height,c=t.startAngle,d=t.endAngle,u=la(t.cx,l,l/2),f=la(t.cy,o,o/2),m=B9(l,o,s),g=la(t.innerRadius,m,0),x=la(t.outerRadius,m,m*.8),h=Object.keys(r);return h.reduce(function(p,v){var b=r[v],j=b.domain,N=b.reversed,w;if(ar(b.range))a==="angleAxis"?w=[c,d]:a==="radiusAxis"&&(w=[g,x]),N&&(w=[w[1],w[0]]);else{w=b.range;var _=w,k=Uye(_,2);c=k[0],d=k[1]}var C=L9(b,i),T=C.realScaleType,P=C.scale;P.domain(j).range(w),I9(P);var A=F9(P,Jl(Jl({},b),{},{realScaleType:T})),S=Jl(Jl(Jl({},b),A),{},{range:w,radius:x,realScaleType:T,scale:P,cx:u,cy:f,innerRadius:g,outerRadius:x,startAngle:c,endAngle:d});return Jl(Jl({},p),{},M9({},v,S))},{})},Jye=function(t,r){var s=t.x,a=t.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-l,2))},Kye=function(t,r){var s=t.x,a=t.y,i=r.cx,l=r.cy,o=Jye({x:s,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(s-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:qye(d),angleInRadian:d}},Xye=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),l=Math.min(a,i);return{startAngle:r-l*360,endAngle:s-l*360}},Yye=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),l=Math.floor(a/360),o=Math.min(i,l);return t+o*360},gP=function(t,r){var s=t.x,a=t.y,i=Kye({x:s,y:a},r),l=i.radius,o=i.angle,c=r.innerRadius,d=r.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=Xye(r),f=u.startAngle,m=u.endAngle,g=o,x;if(f<=m){for(;g>m;)g-=360;for(;g<f;)g+=360;x=g>=f&&g<=m}else{for(;g>f;)g-=360;for(;g<m;)g+=360;x=g>=m&&g<=f}return x?Jl(Jl({},r),{},{radius:l,angle:Yye(g,r)}):null},U9=function(t){return!y.isValidElement(t)&&!Qt(t)&&typeof t!="boolean"?t.className:""};function Ih(e){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ih(e)}var Zye=["offset"];function Qye(e){return nve(e)||rve(e)||tve(e)||eve()}function eve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tve(e,t){if(e){if(typeof e=="string")return c2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c2(e,t)}}function rve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nve(e){if(Array.isArray(e))return c2(e)}function c2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function sve(e,t){if(e==null)return{};var r=ave(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ave(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(s){ive(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ive(e,t,r){return t=lve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lve(e){var t=ove(e,"string");return Ih(t)=="symbol"?t:t+""}function ove(e,t){if(Ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ih(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fh.apply(this,arguments)}var cve=function(t){var r=t.value,s=t.formatter,a=ar(t.children)?r:t.children;return Qt(s)?s(a):a},dve=function(t,r){var s=ia(r-t),a=Math.min(Math.abs(r-t),360);return s*a},uve=function(t,r,s){var a=t.position,i=t.viewBox,l=t.offset,o=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,m=c.outerRadius,g=c.startAngle,x=c.endAngle,h=c.clockWise,p=(f+m)/2,v=dve(g,x),b=v>=0?1:-1,j,N;a==="insideStart"?(j=g+b*l,N=h):a==="insideEnd"?(j=x-b*l,N=!h):a==="end"&&(j=x+b*l,N=h),N=v<=0?N:!N;var w=Qr(d,u,p,j),_=Qr(d,u,p,j+(N?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(N?0:1,`,
    `).concat(_.x,",").concat(_.y),C=ar(t.id)?ru("recharts-radial-line-"):t.id;return we.createElement("text",Fh({},s,{dominantBaseline:"central",className:or("recharts-radial-bar-label",o)}),we.createElement("defs",null,we.createElement("path",{id:C,d:k})),we.createElement("textPath",{xlinkHref:"#".concat(C)},r))},fve=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,m=(u+f)/2;if(a==="outside"){var g=Qr(l,o,d+s,m),x=g.x,h=g.y;return{x,y:h,textAnchor:x>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,v=Qr(l,o,p,m),b=v.x,j=v.y;return{x:b,y:j,textAnchor:"middle",verticalAnchor:"middle"}},mve=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,l=r,o=l.x,c=l.y,d=l.width,u=l.height,f=u>=0?1:-1,m=f*a,g=f>0?"end":"start",x=f>0?"start":"end",h=d>=0?1:-1,p=h*a,v=h>0?"end":"start",b=h>0?"start":"end";if(i==="top"){var j={x:o+d/2,y:c-f*a,textAnchor:"middle",verticalAnchor:g};return Yn(Yn({},j),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var N={x:o+d/2,y:c+u+m,textAnchor:"middle",verticalAnchor:x};return Yn(Yn({},N),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var w={x:o-p,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Yn(Yn({},w),s?{width:Math.max(w.x-s.x,0),height:u}:{})}if(i==="right"){var _={x:o+d+p,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Yn(Yn({},_),s?{width:Math.max(s.x+s.width-_.x,0),height:u}:{})}var k=s?{width:d,height:u}:{};return i==="insideLeft"?Yn({x:o+p,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},k):i==="insideRight"?Yn({x:o+d-p,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},k):i==="insideTop"?Yn({x:o+d/2,y:c+m,textAnchor:"middle",verticalAnchor:x},k):i==="insideBottom"?Yn({x:o+d/2,y:c+u-m,textAnchor:"middle",verticalAnchor:g},k):i==="insideTopLeft"?Yn({x:o+p,y:c+m,textAnchor:b,verticalAnchor:x},k):i==="insideTopRight"?Yn({x:o+d-p,y:c+m,textAnchor:v,verticalAnchor:x},k):i==="insideBottomLeft"?Yn({x:o+p,y:c+u-m,textAnchor:b,verticalAnchor:g},k):i==="insideBottomRight"?Yn({x:o+d-p,y:c+u-m,textAnchor:v,verticalAnchor:g},k):_m(i)&&(bt(i.x)||od(i.x))&&(bt(i.y)||od(i.y))?Yn({x:o+la(i.x,d),y:c+la(i.y,u),textAnchor:"end",verticalAnchor:"end"},k):Yn({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},hve=function(t){return"cx"in t&&bt(t.cx)};function fs(e){var t=e.offset,r=t===void 0?5:t,s=sve(e,Zye),a=Yn({offset:r},s),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,f=u===void 0?"":u,m=a.textBreakAll;if(!i||ar(o)&&ar(c)&&!y.isValidElement(d)&&!Qt(d))return null;if(y.isValidElement(d))return y.cloneElement(d,a);var g;if(Qt(d)){if(g=y.createElement(d,a),y.isValidElement(g))return g}else g=cve(a);var x=hve(i),h=Ht(a,!0);if(x&&(l==="insideStart"||l==="insideEnd"||l==="end"))return uve(a,g,h);var p=x?fve(a):mve(a);return we.createElement(Dd,Fh({className:or("recharts-label",f)},h,p,{breakAll:m}),g)}fs.displayName="Label";var z9=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,l=t.endAngle,o=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,m=t.y,g=t.top,x=t.left,h=t.width,p=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(bt(h)&&bt(p)){if(bt(f)&&bt(m))return{x:f,y:m,width:h,height:p};if(bt(g)&&bt(x))return{x:g,y:x,width:h,height:p}}return bt(f)&&bt(m)?{x:f,y:m,width:0,height:0}:bt(r)&&bt(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:v}:t.viewBox?t.viewBox:{}},pve=function(t,r){return t?t===!0?we.createElement(fs,{key:"label-implicit",viewBox:r}):ns(t)?we.createElement(fs,{key:"label-implicit",viewBox:r,value:t}):y.isValidElement(t)?t.type===fs?y.cloneElement(t,{key:"label-implicit",viewBox:r}):we.createElement(fs,{key:"label-implicit",content:t,viewBox:r}):Qt(t)?we.createElement(fs,{key:"label-implicit",content:t,viewBox:r}):_m(t)?we.createElement(fs,Fh({viewBox:r},t,{key:"label-implicit"})):null:null},xve=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=z9(t),l=Ga(a,fs).map(function(c,d){return y.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return l;var o=pve(t.label,r||i);return[o].concat(Qye(l))};fs.parseViewBox=z9;fs.renderCallByParent=xve;function gve(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var yve=gve;const vve=$r(yve);function Dh(e){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}var bve=["valueAccessor"],jve=["data","dataKey","clockWise","id","textBreakAll"];function _ve(e){return Sve(e)||kve(e)||Nve(e)||wve()}function wve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nve(e,t){if(e){if(typeof e=="string")return d2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d2(e,t)}}function kve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sve(e){if(Array.isArray(e))return d2(e)}function d2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ov.apply(this,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(s){Cve(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Cve(e,t,r){return t=Ave(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ave(e){var t=Eve(e,"string");return Dh(t)=="symbol"?t:t+""}function Eve(e,t){if(Dh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Dh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jP(e,t){if(e==null)return{};var r=Tve(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Tve(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Pve=function(t){return Array.isArray(t.value)?vve(t.value):t.value};function El(e){var t=e.valueAccessor,r=t===void 0?Pve:t,s=jP(e,bve),a=s.data,i=s.dataKey,l=s.clockWise,o=s.id,c=s.textBreakAll,d=jP(s,jve);return!a||!a.length?null:we.createElement(pr,{className:"recharts-label-list"},a.map(function(u,f){var m=ar(i)?r(u,f):Dn(u&&u.payload,i),g=ar(o)?{}:{id:"".concat(o,"-").concat(f)};return we.createElement(fs,ov({},Ht(u,!0),d,g,{parentViewBox:u.parentViewBox,value:m,textBreakAll:c,viewBox:fs.parseViewBox(ar(l)?u:bP(bP({},u),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}El.displayName="LabelList";function Ove(e,t){return e?e===!0?we.createElement(El,{key:"labelList-implicit",data:t}):we.isValidElement(e)||Qt(e)?we.createElement(El,{key:"labelList-implicit",data:t,content:e}):_m(e)?we.createElement(El,ov({data:t},e,{key:"labelList-implicit"})):null:null}function Rve(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Ga(s,El).map(function(l,o){return y.cloneElement(l,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var i=Ove(e.label,t);return[i].concat(_ve(a))}El.renderCallByParent=Rve;function $h(e){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u2.apply(this,arguments)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function wP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(s){Lve(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Lve(e,t,r){return t=Ive(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ive(e){var t=Fve(e,"string");return $h(t)=="symbol"?t:t+""}function Fve(e,t){if($h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if($h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dve=function(t,r){var s=ia(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},Ox=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,l=t.sign,o=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(o?1:-1)+a,f=Math.asin(c/u)/lv,m=d?i:i+l*f,g=Qr(r,s,u,m),x=Qr(r,s,a,m),h=d?i-l*f:i,p=Qr(r,s,u*Math.cos(f*lv),h);return{center:g,circleTangency:x,lineTangency:p,theta:f}},W9=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.startAngle,o=t.endAngle,c=Dve(l,o),d=l+c,u=Qr(r,s,i,l),f=Qr(r,s,i,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var g=Qr(r,s,a,l),x=Qr(r,s,a,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(r,",").concat(s," Z");return m},$ve=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=ia(u-d),m=Ox({cx:r,cy:s,radius:i,angle:d,sign:f,cornerRadius:l,cornerIsExternal:c}),g=m.circleTangency,x=m.lineTangency,h=m.theta,p=Ox({cx:r,cy:s,radius:i,angle:u,sign:-f,cornerRadius:l,cornerIsExternal:c}),v=p.circleTangency,b=p.lineTangency,j=p.theta,N=c?Math.abs(d-u):Math.abs(d-u)-h-j;if(N<0)return o?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):W9({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var w="M ".concat(x.x,",").concat(x.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var _=Ox({cx:r,cy:s,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),k=_.circleTangency,C=_.lineTangency,T=_.theta,P=Ox({cx:r,cy:s,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),A=P.circleTangency,S=P.lineTangency,E=P.theta,O=c?Math.abs(d-u):Math.abs(d-u)-T-E;if(O<0&&l===0)return"".concat(w,"L").concat(r,",").concat(s,"Z");w+="L".concat(S.x,",").concat(S.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(r,",").concat(s,"Z");return w},Mve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},AC=function(t){var r=wP(wP({},Mve),t),s=r.cx,a=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,m=r.className;if(l<i||u===f)return null;var g=or("recharts-sector",m),x=l-i,h=la(o,x,0,!0),p;return h>0&&Math.abs(u-f)<360?p=$ve({cx:s,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(h,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):p=W9({cx:s,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:f}),we.createElement("path",u2({},Ht(r,!0),{className:g,d:p,role:"img"}))};function Mh(e){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mh(e)}function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},f2.apply(this,arguments)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function kP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(s){Bve(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Bve(e,t,r){return t=Uve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uve(e){var t=zve(e,"string");return Mh(t)=="symbol"?t:t+""}function zve(e,t){if(Mh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Mh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SP={curveBasisClosed:Bae,curveBasisOpen:Uae,curveBasis:Mae,curveBumpX:kae,curveBumpY:Sae,curveLinearClosed:zae,curveLinear:Zb,curveMonotoneX:Wae,curveMonotoneY:Vae,curveNatural:Hae,curveStep:qae,curveStepAfter:Jae,curveStepBefore:Gae},Rx=function(t){return t.x===+t.x&&t.y===+t.y},t0=function(t){return t.x},r0=function(t){return t.y},Wve=function(t,r){if(Qt(t))return t;var s="curve".concat(Xb(t));return(s==="curveMonotone"||s==="curveBump")&&r?SP["".concat(s).concat(r==="vertical"?"Y":"X")]:SP[s]||Zb},Vve=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,l=t.baseLine,o=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=Wve(s,o),f=d?i.filter(function(h){return Rx(h)}):i,m;if(Array.isArray(l)){var g=d?l.filter(function(h){return Rx(h)}):l,x=f.map(function(h,p){return kP(kP({},h),{},{base:g[p]})});return o==="vertical"?m=wx().y(r0).x1(t0).x0(function(h){return h.base.x}):m=wx().x(t0).y1(r0).y0(function(h){return h.base.y}),m.defined(Rx).curve(u),m(x)}return o==="vertical"&&bt(l)?m=wx().y(r0).x1(t0).x0(l):bt(l)?m=wx().x(t0).y1(r0).y0(l):m=$7().x(t0).y(r0),m.defined(Rx).curve(u),m(f)},bd=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var l=s&&s.length?Vve(t):a;return y.createElement("path",f2({},Ht(t,!1),Oy(t),{className:or("recharts-curve",r),d:l,ref:i}))},V9={exports:{}},Hve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qve=Hve,Gve=qve;function H9(){}function q9(){}q9.resetWarningCache=H9;var Jve=function(){function e(s,a,i,l,o,c){if(c!==Gve){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q9,resetWarningCache:H9};return r.PropTypes=r,r};V9.exports=Jve();var Kve=V9.exports;const Pr=$r(Kve);var Xve=Object.getOwnPropertyNames,Yve=Object.getOwnPropertySymbols,Zve=Object.prototype.hasOwnProperty;function CP(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function Lx(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,l=i.get(r),o=i.get(s);if(l&&o)return l===s&&o===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function Qve(e){return e!=null?e[Symbol.toStringTag]:void 0}function AP(e){return Xve(e).concat(Yve(e))}var ebe=Object.hasOwn||function(e,t){return Zve.call(e,t)};function au(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var tbe="__v",rbe="__o",nbe="_owner",EP=Object.getOwnPropertyDescriptor,TP=Object.keys;function sbe(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function abe(e,t){return au(e.getTime(),t.getTime())}function ibe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function lbe(e,t){return e===t}function PP(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=t.entries(),u=!1,f=0;(o=d.next())&&!o.done;){if(a[f]){f++;continue}var m=l.value,g=o.value;if(r.equals(m[0],g[0],c,f,e,t,r)&&r.equals(m[1],g[1],m[0],g[0],e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1;c++}return!0}var obe=au;function cbe(e,t,r){var s=TP(e),a=s.length;if(TP(t).length!==a)return!1;for(;a-- >0;)if(!G9(e,t,r,s[a]))return!1;return!0}function n0(e,t,r){var s=AP(e),a=s.length;if(AP(t).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=s[a],!G9(e,t,r,i)||(l=EP(e,i),o=EP(t,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function dbe(e,t){return au(e.valueOf(),t.valueOf())}function ube(e,t){return e.source===t.source&&e.flags===t.flags}function OP(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var c=t.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&r.equals(l.value,o.value,l.value,o.value,e,t,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function fbe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function mbe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function G9(e,t,r,s){return(s===nbe||s===rbe||s===tbe)&&(e.$$typeof||t.$$typeof)?!0:ebe(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var hbe="[object Arguments]",pbe="[object Boolean]",xbe="[object Date]",gbe="[object Error]",ybe="[object Map]",vbe="[object Number]",bbe="[object Object]",jbe="[object RegExp]",_be="[object Set]",wbe="[object String]",Nbe="[object URL]",kbe=Array.isArray,RP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,LP=Object.assign,Sbe=Object.prototype.toString.call.bind(Object.prototype.toString);function Cbe(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual,g=e.unknownTagComparators;return function(h,p,v){if(h===p)return!0;if(h==null||p==null)return!1;var b=typeof h;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?l(h,p,v):b==="function"?a(h,p,v):!1;var j=h.constructor;if(j!==p.constructor)return!1;if(j===Object)return o(h,p,v);if(kbe(h))return t(h,p,v);if(RP!=null&&RP(h))return f(h,p,v);if(j===Date)return r(h,p,v);if(j===RegExp)return d(h,p,v);if(j===Map)return i(h,p,v);if(j===Set)return u(h,p,v);var N=Sbe(h);if(N===xbe)return r(h,p,v);if(N===jbe)return d(h,p,v);if(N===ybe)return i(h,p,v);if(N===_be)return u(h,p,v);if(N===bbe)return typeof h.then!="function"&&typeof p.then!="function"&&o(h,p,v);if(N===Nbe)return m(h,p,v);if(N===gbe)return s(h,p,v);if(N===hbe)return o(h,p,v);if(N===pbe||N===vbe||N===wbe)return c(h,p,v);if(g){var w=g[N];if(!w){var _=Qve(h);_&&(w=g[_])}if(w)return w(h,p,v)}return!1}}function Abe(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?n0:sbe,areDatesEqual:abe,areErrorsEqual:ibe,areFunctionsEqual:lbe,areMapsEqual:s?CP(PP,n0):PP,areNumbersEqual:obe,areObjectsEqual:s?n0:cbe,arePrimitiveWrappersEqual:dbe,areRegExpsEqual:ube,areSetsEqual:s?CP(OP,n0):OP,areTypedArraysEqual:s?n0:fbe,areUrlsEqual:mbe,unknownTagComparators:void 0};if(r&&(a=LP({},a,r(a))),t){var i=Lx(a.areArraysEqual),l=Lx(a.areMapsEqual),o=Lx(a.areObjectsEqual),c=Lx(a.areSetsEqual);a=LP({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function Ebe(e){return function(t,r,s,a,i,l,o){return e(t,r,o)}}function Tbe(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),f=u.cache,m=f===void 0?t?new WeakMap:void 0:f,g=u.meta;return r(c,d,{cache:m,equals:a,meta:g,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,l)}}var Pbe=Pc();Pc({strict:!0});Pc({circular:!0});Pc({circular:!0,strict:!0});Pc({createInternalComparator:function(){return au}});Pc({strict:!0,createInternalComparator:function(){return au}});Pc({circular:!0,createInternalComparator:function(){return au}});Pc({circular:!0,createInternalComparator:function(){return au},strict:!0});function Pc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,l=i===void 0?!1:i,o=Abe(e),c=Cbe(o),d=s?s(c):Ebe(c);return Tbe({circular:r,comparator:c,createState:a,equals:d,strict:l})}function Obe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function IP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Obe(a)};requestAnimationFrame(s)}function m2(e){"@babel/helpers - typeof";return m2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m2(e)}function Rbe(e){return Dbe(e)||Fbe(e)||Ibe(e)||Lbe()}function Lbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ibe(e,t){if(e){if(typeof e=="string")return FP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FP(e,t)}}function FP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Fbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dbe(e){if(Array.isArray(e))return e}function $be(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=Rbe(l),c=o[0],d=o.slice(1);if(typeof c=="number"){IP(a.bind(null,d),c);return}a(c),IP(a.bind(null,d));return}m2(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Bh(e){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(s){J9(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J9(e,t,r){return t=Mbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mbe(e){var t=Bbe(e,"string");return Bh(t)==="symbol"?t:String(t)}function Bbe(e,t){if(Bh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Bh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ube=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},zbe=function(t){return t},Wbe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},D0=function(t,r){return Object.keys(r).reduce(function(s,a){return $P($P({},s),{},J9({},a,t(a,r[a])))},{})},MP=function(t,r,s){return t.map(function(a){return"".concat(Wbe(a)," ").concat(r,"ms ").concat(s)}).join(",")};function Vbe(e,t){return Gbe(e)||qbe(e,t)||K9(e,t)||Hbe()}function Hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Gbe(e){if(Array.isArray(e))return e}function Jbe(e){return Ybe(e)||Xbe(e)||K9(e)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K9(e,t){if(e){if(typeof e=="string")return h2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(e,t)}}function Xbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ybe(e){if(Array.isArray(e))return h2(e)}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var cv=1e-4,X9=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Y9=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},BP=function(t,r){return function(s){var a=X9(t,r);return Y9(a,s)}},Zbe=function(t,r){return function(s){var a=X9(t,r),i=[].concat(Jbe(a.map(function(l,o){return l*o}).slice(1)),[0]);return Y9(i,s)}},UP=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),u=Vbe(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var f=BP(a,l),m=BP(i,o),g=Zbe(a,l),x=function(v){return v>1?1:v<0?0:v},h=function(v){for(var b=v>1?1:v,j=b,N=0;N<8;++N){var w=f(j)-b,_=g(j);if(Math.abs(w-b)<cv||_<cv)return m(j);j=x(j-w/_)}return m(j)};return h.isStepper=!1,h},Qbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,l=t.dt,o=l===void 0?17:l,c=function(u,f,m){var g=-(u-f)*s,x=m*i,h=m+(g-x)*o/1e3,p=m*o/1e3+u;return Math.abs(p-f)<cv&&Math.abs(h)<cv?[f,0]:[p,h]};return c.isStepper=!0,c.dt=o,c},e1e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return UP(a);case"spring":return Qbe();default:if(a.split("(")[0]==="cubic-bezier")return UP(a)}return typeof a=="function"?a:null};function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}function zP(e){return n1e(e)||r1e(e)||Z9(e)||t1e()}function t1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n1e(e){if(Array.isArray(e))return x2(e)}function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(s){p2(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function p2(e,t,r){return t=s1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s1e(e){var t=a1e(e,"string");return Uh(t)==="symbol"?t:String(t)}function a1e(e,t){if(Uh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Uh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i1e(e,t){return c1e(e)||o1e(e,t)||Z9(e,t)||l1e()}function l1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z9(e,t){if(e){if(typeof e=="string")return x2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x2(e,t)}}function x2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function o1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function c1e(e){if(Array.isArray(e))return e}var dv=function(t,r,s){return t+(r-t)*s},g2=function(t){var r=t.from,s=t.to;return r!==s},d1e=function e(t,r,s){var a=D0(function(i,l){if(g2(l)){var o=t(l.from,l.to,l.velocity),c=i1e(o,2),d=c[0],u=c[1];return Ns(Ns({},l),{},{from:d,velocity:u})}return l},r);return s<1?D0(function(i,l){return g2(l)?Ns(Ns({},l),{},{velocity:dv(l.velocity,a[i].velocity,s),from:dv(l.from,a[i].from,s)}):l},r):e(t,a,s-1)};const u1e=function(e,t,r,s,a){var i=Ube(e,t),l=i.reduce(function(p,v){return Ns(Ns({},p),{},p2({},v,[e[v],t[v]]))},{}),o=i.reduce(function(p,v){return Ns(Ns({},p),{},p2({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,u,f=function(){return null},m=function(){return D0(function(v,b){return b.from},o)},g=function(){return!Object.values(o).filter(g2).length},x=function(v){d||(d=v);var b=v-d,j=b/r.dt;o=d1e(r,o,j),a(Ns(Ns(Ns({},e),t),m())),d=v,g()||(c=requestAnimationFrame(f))},h=function(v){u||(u=v);var b=(v-u)/s,j=D0(function(w,_){return dv.apply(void 0,zP(_).concat([r(b)]))},l);if(a(Ns(Ns(Ns({},e),t),j)),b<1)c=requestAnimationFrame(f);else{var N=D0(function(w,_){return dv.apply(void 0,zP(_).concat([r(1)]))},l);a(Ns(Ns(Ns({},e),t),N))}};return f=r.isStepper?x:h,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}var f1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function m1e(e,t){if(e==null)return{};var r=h1e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function h1e(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Jj(e){return y1e(e)||g1e(e)||x1e(e)||p1e()}function p1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x1e(e,t){if(e){if(typeof e=="string")return y2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y2(e,t)}}function g1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y1e(e){if(Array.isArray(e))return y2(e)}function y2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function VP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Li(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(r),!0).forEach(function(s){p0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function p0(e,t,r){return t=Q9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b1e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Q9(s.key),s)}}function j1e(e,t,r){return t&&b1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q9(e){var t=_1e(e,"string");return zf(t)==="symbol"?t:String(t)}function _1e(e,t){if(zf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(zf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}function v2(e,t){return v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},v2(e,t)}function N1e(e){var t=k1e();return function(){var s=uv(e),a;if(t){var i=uv(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return b2(this,a)}}function b2(e,t){if(t&&(zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2(e)}function j2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uv(e){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uv(e)}var sl=function(e){w1e(r,e);var t=N1e(r);function r(s,a){var i;v1e(this,r),i=t.call(this,s,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,f=l.steps,m=l.children,g=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(j2(i)),i.changeStyle=i.changeStyle.bind(j2(i)),!o||g<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:u}),b2(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof m=="function")return i.state={style:d},b2(i);i.state={style:c?p0({},c,d):d}}else i.state={style:{}};return i}return j1e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,m=this.state.style;if(o){if(!l){var g={style:c?p0({},c,u):u};this.state&&m&&(c&&m[c]!==u||!c&&m!==u)&&this.setState(g);return}if(!(Pbe(a.to,u)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=x||d?f:a.to;if(this.state&&m){var p={style:c?p0({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(p)}this.runAnimation(Li(Li({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,f=a.onAnimationEnd,m=a.onAnimationStart,g=u1e(l,o,e1e(d),c,this.changeStyle),x=function(){i.stopJSAnimation=g()};this.manager.start([m,u,x,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,f=d.duration,m=f===void 0?0:f,g=function(h,p,v){if(v===0)return h;var b=p.duration,j=p.easing,N=j===void 0?"ease":j,w=p.style,_=p.properties,k=p.onAnimationEnd,C=v>0?l[v-1]:p,T=_||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(Jj(h),[i.runJSAnimation.bind(i,{from:C.style,to:w,duration:b,easing:N}),b]);var P=MP(T,b,N),A=Li(Li(Li({},C.style),w),{},{transition:P});return[].concat(Jj(h),[A,b,k]).filter(zbe)};return this.manager.start([c].concat(Jj(l.reduce(g,[u,Math.max(m,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=$be());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,f=a.onAnimationEnd,m=a.steps,g=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var h=o?p0({},o,c):c,p=MP(Object.keys(h),l,d);x.start([u,i,Li(Li({},h),{},{transition:p}),l,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=m1e(a,f1e),d=y.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var f=function(g){var x=g.props,h=x.style,p=h===void 0?{}:h,v=x.className,b=y.cloneElement(g,Li(Li({},c),{},{style:Li(Li({},p),u),className:v}));return b};return d===1?f(y.Children.only(i)):we.createElement("div",null,y.Children.map(i,function(m){return f(m)}))}}]),r}(y.PureComponent);sl.displayName="Animate";sl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};sl.propTypes={from:Pr.oneOfType([Pr.object,Pr.string]),to:Pr.oneOfType([Pr.object,Pr.string]),attributeName:Pr.string,duration:Pr.number,begin:Pr.number,easing:Pr.oneOfType([Pr.string,Pr.func]),steps:Pr.arrayOf(Pr.shape({duration:Pr.number.isRequired,style:Pr.object.isRequired,easing:Pr.oneOfType([Pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pr.func]),properties:Pr.arrayOf("string"),onAnimationEnd:Pr.func})),children:Pr.oneOfType([Pr.node,Pr.func]),isActive:Pr.bool,canBegin:Pr.bool,onAnimationEnd:Pr.func,shouldReAnimate:Pr.bool,onAnimationStart:Pr.func,onAnimationReStart:Pr.func};function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fv.apply(this,arguments)}function S1e(e,t){return T1e(e)||E1e(e,t)||A1e(e,t)||C1e()}function C1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A1e(e,t){if(e){if(typeof e=="string")return HP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HP(e,t)}}function HP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function E1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function T1e(e){if(Array.isArray(e))return e}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function GP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(s){P1e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function P1e(e,t,r){return t=O1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O1e(e){var t=R1e(e,"string");return zh(t)=="symbol"?t:t+""}function R1e(e,t){if(zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(zh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JP=function(t,r,s,a,i){var l=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(l>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=i[m]>l?l:i[m];u="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+s-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+o*f[1])),u+="L ".concat(t+s,",").concat(r+a-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+s-c*f[2],",").concat(r+a)),u+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-o*f[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var x=Math.min(l,i);u="M ".concat(t,",").concat(r+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(r,`
            L `).concat(t+s-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s,",").concat(r+o*x,`
            L `).concat(t+s,",").concat(r+a-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s-c*x,",").concat(r+a,`
            L `).concat(t+c*x,",").concat(r+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(r+a-o*x," Z")}else u="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},L1e=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,l=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),f=Math.min(l,l+c),m=Math.max(l,l+c);return s>=d&&s<=u&&a>=f&&a<=m}return!1},I1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EC=function(t){var r=GP(GP({},I1e),t),s=y.useRef(),a=y.useState(-1),i=S1e(a,2),l=i[0],o=i[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&o(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,m=r.radius,g=r.className,x=r.animationEasing,h=r.animationDuration,p=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=or("recharts-rectangle",g);return b?we.createElement(sl,{canBegin:l>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:h,animationEasing:x,isActive:b},function(N){var w=N.width,_=N.height,k=N.x,C=N.y;return we.createElement(sl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:v,easing:x},we.createElement("path",fv({},Ht(r,!0),{className:j,d:JP(k,C,w,_,m),ref:s})))}):we.createElement("path",fv({},Ht(r,!0),{className:j,d:JP(c,d,u,f,m)}))},F1e=["points","className","baseLinePoints","connectNulls"];function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qu.apply(this,arguments)}function D1e(e,t){if(e==null)return{};var r=$1e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function $1e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function KP(e){return z1e(e)||U1e(e)||B1e(e)||M1e()}function M1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1e(e,t){if(e){if(typeof e=="string")return _2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _2(e,t)}}function U1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function z1e(e){if(Array.isArray(e))return _2(e)}function _2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var XP=function(t){return t&&t.x===+t.x&&t.y===+t.y},W1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){XP(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),XP(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},$0=function(t,r){var s=W1e(t);r&&(s=[s.reduce(function(i,l){return[].concat(KP(i),KP(l))},[])]);var a=s.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},V1e=function(t,r,s){var a=$0(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat($0(r.reverse(),s).slice(1))},H1e=function(t){var r=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,l=D1e(t,F1e);if(!r||!r.length)return null;var o=or("recharts-polygon",s);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=V1e(r,a,i);return we.createElement("g",{className:o},we.createElement("path",Qu({},Ht(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?we.createElement("path",Qu({},Ht(l,!0),{fill:"none",d:$0(r,i)})):null,c?we.createElement("path",Qu({},Ht(l,!0),{fill:"none",d:$0(a,i)})):null)}var u=$0(r,i);return we.createElement("path",Qu({},Ht(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},w2.apply(this,arguments)}var Dp=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,l=or("recharts-dot",i);return r===+r&&s===+s&&a===+a?y.createElement("circle",w2({},Ht(t,!1),Oy(t),{className:l,cx:r,cy:s,r:a})):null};function Wh(e){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}var q1e=["x","y","top","left","width","height","className"];function N2(){return N2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},N2.apply(this,arguments)}function YP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function G1e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(r),!0).forEach(function(s){J1e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J1e(e,t,r){return t=K1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K1e(e){var t=X1e(e,"string");return Wh(t)=="symbol"?t:t+""}function X1e(e,t){if(Wh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Wh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y1e(e,t){if(e==null)return{};var r=Z1e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Z1e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Q1e=function(t,r,s,a,i,l){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(l,",").concat(r,"h").concat(s)},eje=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,l=t.top,o=l===void 0?0:l,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,m=t.height,g=m===void 0?0:m,x=t.className,h=Y1e(t,q1e),p=G1e({x:s,y:i,top:o,left:d,width:f,height:g},h);return!bt(s)||!bt(i)||!bt(f)||!bt(g)||!bt(o)||!bt(d)?null:we.createElement("path",N2({},Ht(p,!0),{className:or("recharts-cross",x),d:Q1e(s,i,f,g,o,d)}))},tje=c1,rje=f9,nje=Ml;function sje(e,t){return e&&e.length?tje(e,nje(t),rje):void 0}var aje=sje;const ije=$r(aje);var lje=c1,oje=Ml,cje=m9;function dje(e,t){return e&&e.length?lje(e,oje(t),cje):void 0}var uje=dje;const fje=$r(uje);var mje=["cx","cy","angle","ticks","axisLine"],hje=["ticks","tick","angle","tickFormatter","stroke"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function M0(){return M0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},M0.apply(this,arguments)}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(r),!0).forEach(function(s){m1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function QP(e,t){if(e==null)return{};var r=pje(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function pje(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function xje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tB(s.key),s)}}function gje(e,t,r){return t&&eO(e.prototype,t),r&&eO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yje(e,t,r){return t=mv(t),vje(e,eB()?Reflect.construct(t,r||[],mv(e).constructor):t.apply(e,r))}function vje(e,t){if(t&&(Wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bje(e)}function bje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eB=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mv(e)}function jje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k2(e,t)}function k2(e,t){return k2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},k2(e,t)}function m1(e,t,r){return t=tB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tB(e){var t=_je(e,"string");return Wf(t)=="symbol"?t:t+""}function _je(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Wf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var h1=function(e){function t(){return xje(this,t),yje(this,t,arguments)}return jje(t,e),gje(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return Qr(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=ije(o,function(u){return u.coordinate||0}),d=fje(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=s.axisLine,d=QP(s,mje),u=o.reduce(function(x,h){return[Math.min(x[0],h.coordinate),Math.max(x[1],h.coordinate)]},[1/0,-1/0]),f=Qr(a,i,u[0],l),m=Qr(a,i,u[1],l),g=$c($c($c({},Ht(d,!1)),{},{fill:"none"},Ht(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return we.createElement("line",M0({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=QP(a,hje),f=this.getTickTextAnchor(),m=Ht(u,!1),g=Ht(l,!1),x=i.map(function(h,p){var v=s.getTickValueCoord(h),b=$c($c($c($c({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},m),{},{stroke:"none",fill:d},g),{},{index:p},v),{},{payload:h});return we.createElement(pr,M0({className:or("recharts-polar-radius-axis-tick",U9(l)),key:"tick-".concat(h.coordinate)},Id(s.props,h,p)),t.renderTickItem(l,b,c?c(h.value,p):h.value))});return we.createElement(pr,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,l=s.tick;return!a||!a.length?null:we.createElement(pr,{className:or("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),fs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var l;return we.isValidElement(s)?l=we.cloneElement(s,a):Qt(s)?l=s(a):l=we.createElement(Dd,M0({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(y.PureComponent);m1(h1,"displayName","PolarRadiusAxis");m1(h1,"axisType","radiusAxis");m1(h1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qc.apply(this,arguments)}function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(s){p1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nB(s.key),s)}}function Nje(e,t,r){return t&&rO(e.prototype,t),r&&rO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kje(e,t,r){return t=hv(t),Sje(e,rB()?Reflect.construct(t,r||[],hv(e).constructor):t.apply(e,r))}function Sje(e,t){if(t&&(Vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cje(e)}function Cje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rB=function(){return!!e})()}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hv(e)}function Aje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S2(e,t)}function S2(e,t){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},S2(e,t)}function p1(e,t,r){return t=nB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nB(e){var t=Eje(e,"string");return Vf(t)=="symbol"?t:t+""}function Eje(e,t){if(Vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Vf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tje=Math.PI/180,nO=1e-5,x1=function(e){function t(){return wje(this,t),kje(this,t,arguments)}return Aje(t,e),Nje(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,f=Qr(i,l,o,s.coordinate),m=Qr(i,l,o+(c==="inner"?-1:1)*u,s.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*Tje),l;return i>nO?l=a==="outer"?"start":"end":i<-nO?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.radius,o=s.axisLine,c=s.axisLineType,d=Mc(Mc({},Ht(this.props,!1)),{},{fill:"none"},Ht(o,!1));if(c==="circle")return we.createElement(Dp,Qc({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,f=u.map(function(m){return Qr(a,i,l,m.coordinate)});return we.createElement(H1e,Qc({className:"recharts-polar-angle-axis-line"},d,{points:f}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Ht(this.props,!1),f=Ht(l,!1),m=Mc(Mc({},u),{},{fill:"none"},Ht(o,!1)),g=i.map(function(x,h){var p=s.getTickLineCoord(x),v=s.getTickTextAnchor(x),b=Mc(Mc(Mc({textAnchor:v},u),{},{stroke:"none",fill:d},f),{},{index:h,payload:x,x:p.x2,y:p.y2});return we.createElement(pr,Qc({className:or("recharts-polar-angle-axis-tick",U9(l)),key:"tick-".concat(x.coordinate)},Id(s.props,x,h)),o&&we.createElement("line",Qc({className:"recharts-polar-angle-axis-tick-line"},m,p)),l&&t.renderTickItem(l,b,c?c(x.value,h):x.value))});return we.createElement(pr,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,l=s.axisLine;return i<=0||!a||!a.length?null:we.createElement(pr,{className:or("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var l;return we.isValidElement(s)?l=we.cloneElement(s,a):Qt(s)?l=s(a):l=we.createElement(Dd,Qc({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(y.PureComponent);p1(x1,"displayName","PolarAngleAxis");p1(x1,"axisType","angleAxis");p1(x1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Pje=oM,Oje=Pje(Object.getPrototypeOf,Object),Rje=Oje,Lje=So,Ije=Rje,Fje=Co,Dje="[object Object]",$je=Function.prototype,Mje=Object.prototype,sB=$je.toString,Bje=Mje.hasOwnProperty,Uje=sB.call(Object);function zje(e){if(!Fje(e)||Lje(e)!=Dje)return!1;var t=Ije(e);if(t===null)return!0;var r=Bje.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&sB.call(r)==Uje}var Wje=zje;const Vje=$r(Wje);var Hje=So,qje=Co,Gje="[object Boolean]";function Jje(e){return e===!0||e===!1||qje(e)&&Hje(e)==Gje}var Kje=Jje;const Xje=$r(Kje);function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pv.apply(this,arguments)}function Yje(e,t){return t_e(e)||e_e(e,t)||Qje(e,t)||Zje()}function Zje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qje(e,t){if(e){if(typeof e=="string")return sO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sO(e,t)}}function sO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function e_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function t_e(e){if(Array.isArray(e))return e}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(s){r_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function r_e(e,t,r){return t=n_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n_e(e){var t=s_e(e,"string");return Vh(t)=="symbol"?t:t+""}function s_e(e,t){if(Vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Vh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lO=function(t,r,s,a,i){var l=s-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+s,",").concat(r),o+="L ".concat(t+s-l/2,",").concat(r+i),o+="L ".concat(t+s-l/2-a,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},a_e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},i_e=function(t){var r=iO(iO({},a_e),t),s=y.useRef(),a=y.useState(-1),i=Yje(a,2),l=i[0],o=i[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var j=s.current.getTotalLength();j&&o(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,m=r.height,g=r.className,x=r.animationEasing,h=r.animationDuration,p=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||m!==+m||u===0&&f===0||m===0)return null;var b=or("recharts-trapezoid",g);return v?we.createElement(sl,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:m,x:c,y:d},duration:h,animationEasing:x,isActive:v},function(j){var N=j.upperWidth,w=j.lowerWidth,_=j.height,k=j.x,C=j.y;return we.createElement(sl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:x},we.createElement("path",pv({},Ht(r,!0),{className:b,d:lO(k,C,N,w,_),ref:s})))}):we.createElement("g",null,we.createElement("path",pv({},Ht(r,!0),{className:b,d:lO(c,d,u,f,m)})))},l_e=["option","shapeType","propTransformer","activeClassName","isActive"];function Hh(e){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(e)}function o_e(e,t){if(e==null)return{};var r=c_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function c_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(s){d_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function d_e(e,t,r){return t=u_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u_e(e){var t=f_e(e,"string");return Hh(t)=="symbol"?t:t+""}function f_e(e,t){if(Hh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m_e(e,t){return xv(xv({},t),e)}function h_e(e,t){return e==="symbols"}function cO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return we.createElement(EC,r);case"trapezoid":return we.createElement(i_e,r);case"sector":return we.createElement(AC,r);case"symbols":if(h_e(t))return we.createElement(GS,r);break;default:return null}}function p_e(e){return y.isValidElement(e)?e.props:e}function aB(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?m_e:s,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,c=o_e(e,l_e),d;if(y.isValidElement(t))d=y.cloneElement(t,xv(xv({},c),p_e(t)));else if(Qt(t))d=t(c);else if(Vje(t)&&!Xje(t)){var u=a(t,c);d=we.createElement(cO,{shapeType:r,elementProps:u})}else{var f=c;d=we.createElement(cO,{shapeType:r,elementProps:f})}return o?we.createElement(pr,{className:l},d):d}function g1(e,t){return t!=null&&"trapezoids"in e.props}function y1(e,t){return t!=null&&"sectors"in e.props}function qh(e,t){return t!=null&&"points"in e.props}function x_e(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function g_e(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function y_e(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function v_e(e,t){var r;return g1(e,t)?r=x_e:y1(e,t)?r=g_e:qh(e,t)&&(r=y_e),r}function b_e(e,t){var r;return g1(e,t)?r="trapezoids":y1(e,t)?r="sectors":qh(e,t)&&(r="points"),r}function j_e(e,t){if(g1(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(y1(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return qh(e,t)?t.payload:{}}function __e(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=b_e(r,t),i=j_e(r,t),l=s.filter(function(c,d){var u=$d(i,c),f=r.props[a].filter(function(x){var h=v_e(r,t);return h(x,t)}),m=r.props[a].indexOf(f[f.length-1]),g=d===m;return u&&g}),o=s.indexOf(l[l.length-1]);return o}var zg;function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ef.apply(this,arguments)}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(s){pi(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function w_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,lB(s.key),s)}}function N_e(e,t,r){return t&&uO(e.prototype,t),r&&uO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k_e(e,t,r){return t=gv(t),S_e(e,iB()?Reflect.construct(t,r||[],gv(e).constructor):t.apply(e,r))}function S_e(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C_e(e)}function C_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iB=function(){return!!e})()}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gv(e)}function A_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C2(e,t)}function C2(e,t){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},C2(e,t)}function pi(e,t,r){return t=lB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lB(e){var t=E_e(e,"string");return Hf(t)=="symbol"?t:t+""}function E_e(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var al=function(e){function t(r){var s;return w_e(this,t),s=k_e(this,t,[r]),pi(s,"pieRef",null),pi(s,"sectorRefs",[]),pi(s,"id",ru("recharts-pie-")),pi(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Qt(a)&&a()}),pi(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Qt(a)&&a()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return A_e(t,e),N_e(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=Ht(this.props,!1),f=Ht(l,!1),m=Ht(o,!1),g=l&&l.offsetRadius||20,x=s.map(function(h,p){var v=(h.startAngle+h.endAngle)/2,b=Qr(h.cx,h.cy,h.outerRadius+g,v),j=Kr(Kr(Kr(Kr({},u),h),{},{stroke:"none"},f),{},{index:p,textAnchor:t.getTextAnchor(b.x,h.cx)},b),N=Kr(Kr(Kr(Kr({},u),h),{},{fill:"none",stroke:h.fill},m),{},{index:p,points:[Qr(h.cx,h.cy,h.outerRadius,v),b]}),w=c;return ar(c)&&ar(d)?w="value":ar(c)&&(w=d),we.createElement(pr,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},o&&t.renderLabelLineItem(o,N,"line"),t.renderLabelItem(l,j,Dn(h,w)))});return we.createElement(pr,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var f=a.isActiveIndex(u),m=c&&a.hasActiveIndex()?c:null,g=f?l:m,x=Kr(Kr({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return we.createElement(pr,ef({ref:function(p){p&&!a.sectorRefs.includes(p)&&a.sectorRefs.push(p)},tabIndex:-1,className:"recharts-pie-sector"},Id(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),we.createElement(aB,ef({option:g,isActive:f,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,f=this.state,m=f.prevSectors,g=f.prevIsAnimationActive;return we.createElement(sl,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var h=x.t,p=[],v=i&&i[0],b=v.startAngle;return i.forEach(function(j,N){var w=m&&m[N],_=N>0?qa(j,"paddingAngle",0):0;if(w){var k=es(w.endAngle-w.startAngle,j.endAngle-j.startAngle),C=Kr(Kr({},j),{},{startAngle:b+_,endAngle:b+k(h)+_});p.push(C),b=C.endAngle}else{var T=j.endAngle,P=j.startAngle,A=es(0,T-P),S=A(h),E=Kr(Kr({},j),{},{startAngle:b+_,endAngle:b+S+_});p.push(E),b=E.endAngle}}),we.createElement(pr,null,s.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!$d(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,f=a.innerRadius,m=a.outerRadius,g=a.isAnimationActive,x=this.state.isAnimationFinished;if(i||!l||!l.length||!bt(d)||!bt(u)||!bt(f)||!bt(m))return null;var h=or("recharts-pie",o);return we.createElement(pr,{tabIndex:this.props.rootTabIndex,className:h,ref:function(v){s.pieRef=v}},this.renderSectors(),c&&this.renderLabels(l),fs.renderCallByParent(this.props,null,!1),(!g||x)&&El.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(we.isValidElement(s))return we.cloneElement(s,a);if(Qt(s))return s(a);var l=or("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return we.createElement(bd,ef({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(s,a,i){if(we.isValidElement(s))return we.cloneElement(s,a);var l=i;if(Qt(s)&&(l=s(a),we.isValidElement(l)))return l;var o=or("recharts-pie-label-text",typeof s!="boolean"&&!Qt(s)?s.className:"");return we.createElement(Dd,ef({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(y.PureComponent);zg=al;pi(al,"displayName","Pie");pi(al,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ac.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});pi(al,"parseDeltaAngle",function(e,t){var r=ia(t-e),s=Math.min(Math.abs(t-e),360);return r*s});pi(al,"getRealPieData",function(e){var t=e.data,r=e.children,s=Ht(e,!1),a=Ga(r,Fd);return t&&t.length?t.map(function(i,l){return Kr(Kr(Kr({payload:i},s),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return Kr(Kr({},s),i.props)}):[]});pi(al,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,a=t.width,i=t.height,l=B9(a,i),o=s+la(e.cx,a,a/2),c=r+la(e.cy,i,i/2),d=la(e.innerRadius,l,0),u=la(e.outerRadius,l,l*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:f}});pi(al,"getComposedData",function(e){var t=e.item,r=e.offset,s=t.type.defaultProps!==void 0?Kr(Kr({},t.type.defaultProps),t.props):t.props,a=zg.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,l=s.startAngle,o=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,f=s.valueKey,m=s.tooltipType,g=Math.abs(s.minAngle),x=zg.parseCoordinateOfPie(s,r),h=zg.parseDeltaAngle(l,o),p=Math.abs(h),v=d;ar(d)&&ar(f)?(Qi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):ar(d)&&(Qi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var b=a.filter(function(C){return Dn(C,v,0)!==0}).length,j=(p>=360?b:b-1)*c,N=p-b*g-j,w=a.reduce(function(C,T){var P=Dn(T,v,0);return C+(bt(P)?P:0)},0),_;if(w>0){var k;_=a.map(function(C,T){var P=Dn(C,v,0),A=Dn(C,u,T),S=(bt(P)?P:0)/w,E;T?E=k.endAngle+ia(h)*c*(P!==0?1:0):E=l;var O=E+ia(h)*((P!==0?g:0)+S*N),I=(E+O)/2,L=(x.innerRadius+x.outerRadius)/2,Z=[{name:A,value:P,payload:C,dataKey:v,type:m}],H=Qr(x.cx,x.cy,L,I);return k=Kr(Kr(Kr({percent:S,cornerRadius:i,name:A,tooltipPayload:Z,midAngle:I,middleRadius:L,tooltipPosition:H},C),x),{},{value:Dn(C,v),startAngle:E,endAngle:O,payload:C,paddingAngle:ia(h)*c}),k})}return Kr(Kr({},x),{},{sectors:_,data:a})});var T_e=Math.ceil,P_e=Math.max;function O_e(e,t,r,s){for(var a=-1,i=P_e(T_e((t-e)/(r||1)),0),l=Array(i);i--;)l[s?i:++a]=e,e+=r;return l}var R_e=O_e,L_e=CM,fO=1/0,I_e=17976931348623157e292;function F_e(e){if(!e)return e===0?e:0;if(e=L_e(e),e===fO||e===-fO){var t=e<0?-1:1;return t*I_e}return e===e?e:0}var oB=F_e,D_e=R_e,$_e=r1,Kj=oB;function M_e(e){return function(t,r,s){return s&&typeof s!="number"&&$_e(t,r,s)&&(r=s=void 0),t=Kj(t),r===void 0?(r=t,t=0):r=Kj(r),s=s===void 0?t<r?1:-1:Kj(s),D_e(t,r,s,e)}}var B_e=M_e,U_e=B_e,z_e=U_e(),W_e=z_e;const yv=$r(W_e);function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function hO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(s){cB(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function cB(e,t,r){return t=V_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V_e(e){var t=H_e(e,"string");return Gh(t)=="symbol"?t:t+""}function H_e(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Gh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_e=["Webkit","Moz","O","ms"],G_e=function(t,r){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=q_e.reduce(function(i,l){return hO(hO({},i),{},cB({},l+s,r))},{});return a[t]=r,a};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vv.apply(this,arguments)}function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(r),!0).forEach(function(s){Fa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uB(s.key),s)}}function K_e(e,t,r){return t&&xO(e.prototype,t),r&&xO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X_e(e,t,r){return t=bv(t),Y_e(e,dB()?Reflect.construct(t,r||[],bv(e).constructor):t.apply(e,r))}function Y_e(e,t){if(t&&(qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z_e(e)}function Z_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dB=function(){return!!e})()}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bv(e)}function Q_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t)}function A2(e,t){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},A2(e,t)}function Fa(e,t,r){return t=uB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uB(e){var t=ewe(e,"string");return qf(t)=="symbol"?t:t+""}function ewe(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var twe=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,l=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=I0().domain(yv(0,c)).range([i,i+l-o]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},gO=function(t){return t.changedTouches&&!!t.changedTouches.length},Gf=function(e){function t(r){var s;return J_e(this,t),s=X_e(this,t,[r]),Fa(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Fa(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Fa(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),s.detachDragEndListener()}),Fa(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Fa(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Fa(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Fa(s,"handleSlideDragStart",function(a){var i=gO(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return Q_e(t,e),K_e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,f=Math.min(a,i),m=Math.max(a,i),g=t.getIndexInRange(l,f),x=t.getIndexInRange(l,m);return{startIndex:g-g%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=Dn(i[s],o,s);return Qt(l)?l(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,m=c.startIndex,g=c.endIndex,x=c.onChange,h=s.pageX-i;h>0?h=Math.min(h,d+u-f-o,d+u-f-l):h<0&&(h=Math.max(h,d-l,d-o));var p=this.getIndex({startX:l+h,endX:o+h});(p.startIndex!==m||p.endIndex!==g)&&x&&x(p),this.setState({startX:l+h,endX:o+h,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=gO(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,f=u.x,m=u.width,g=u.travellerWidth,x=u.onChange,h=u.gap,p=u.data,v={startX:this.state.startX,endX:this.state.endX},b=s.pageX-i;b>0?b=Math.min(b,f+m-g-d):b<0&&(b=Math.max(b,f-d)),v[l]=d+b;var j=this.getIndex(v),N=j.startIndex,w=j.endIndex,_=function(){var C=p.length-1;return l==="startX"&&(o>c?N%h===0:w%h===0)||o<c&&w===C||l==="endX"&&(o>c?w%h===0:N%h===0)||o>c&&w===C};this.setState(Fa(Fa({},l,d+b),"brushMoveStartX",s.pageX),function(){x&&_()&&x(j)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],f=o.indexOf(u);if(f!==-1){var m=f+s;if(!(m===-1||m>=o.length)){var g=o[m];a==="startX"&&g>=d||a==="endX"&&g<=c||this.setState(Fa({},a,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.fill,d=s.stroke;return we.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.data,d=s.children,u=s.padding,f=y.Children.only(d);return f?we.cloneElement(f,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,m=c.traveller,g=c.ariaLabel,x=c.data,h=c.startIndex,p=c.endIndex,v=Math.max(s,this.props.x),b=Xj(Xj({},Ht(this.props,!1)),{},{x:v,y:d,width:u,height:f}),j=g||"Min value: ".concat((i=x[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=x[p])===null||l===void 0?void 0:l.name);return we.createElement(pr,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,b))}},{key:"renderSlide",value:function(s,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,f=Math.max(Math.abs(a-s)-d,0);return we.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:f,height:o})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,l=s.y,o=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,f=u.startX,m=u.endX,g=5,x={pointerEvents:"none",fill:d};return we.createElement(pr,{className:"recharts-brush-texts"},we.createElement(Dd,vv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-g,y:l+o/2},x),this.getTextOfTick(a)),we.createElement(Dd,vv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+g,y:l+o/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,l=s.children,o=s.x,c=s.y,d=s.width,u=s.height,f=s.alwaysShowText,m=this.state,g=m.startX,x=m.endX,h=m.isTextActive,p=m.isSlideMoving,v=m.isTravellerMoving,b=m.isTravellerFocused;if(!a||!a.length||!bt(o)||!bt(c)||!bt(d)||!bt(u)||d<=0||u<=0)return null;var j=or("recharts-brush",i),N=we.Children.count(l)===1,w=G_e("userSelect","none");return we.createElement(pr,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(h||p||v||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,l=s.width,o=s.height,c=s.stroke,d=Math.floor(i+o/2)-1;return we.createElement(we.Fragment,null,we.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),we.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),we.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return we.isValidElement(s)?i=we.cloneElement(s,a):Qt(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,l=s.width,o=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,f=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Xj({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?twe({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var m=a.scale.domain().map(function(g){return a.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);s[c]>a?o=c:l=c}return a>=s[o]?o:l}}])}(y.PureComponent);Fa(Gf,"displayName","Brush");Fa(Gf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var rwe=eC;function nwe(e,t){var r;return rwe(e,function(s,a,i){return r=t(s,a,i),!r}),!!r}var swe=nwe,awe=eM,iwe=Ml,lwe=swe,owe=Pa,cwe=r1;function dwe(e,t,r){var s=owe(e)?awe:lwe;return r&&cwe(e,t,r)&&(t=void 0),s(e,iwe(t))}var uwe=dwe;const fwe=$r(uwe);var Tl=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},yO=_M;function mwe(e,t,r){t=="__proto__"&&yO?yO(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var hwe=mwe,pwe=hwe,xwe=bM,gwe=Ml;function ywe(e,t){var r={};return t=gwe(t),xwe(e,function(s,a,i){pwe(r,a,t(s,a,i))}),r}var vwe=ywe;const bwe=$r(vwe);function jwe(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var _we=jwe,wwe=eC;function Nwe(e,t){var r=!0;return wwe(e,function(s,a,i){return r=!!t(s,a,i),r}),r}var kwe=Nwe,Swe=_we,Cwe=kwe,Awe=Ml,Ewe=Pa,Twe=r1;function Pwe(e,t,r){var s=Ewe(e)?Swe:Cwe;return r&&Twe(e,t,r)&&(t=void 0),s(e,Awe(t))}var Owe=Pwe;const fB=$r(Owe);var Rwe=["x","y"];function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E2.apply(this,arguments)}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function s0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(s){Lwe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Lwe(e,t,r){return t=Iwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iwe(e){var t=Fwe(e,"string");return Jh(t)=="symbol"?t:t+""}function Fwe(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dwe(e,t){if(e==null)return{};var r=$we(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function $we(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Mwe(e,t){var r=e.x,s=e.y,a=Dwe(e,Rwe),i="".concat(r),l=parseInt(i,10),o="".concat(s),c=parseInt(o,10),d="".concat(t.height||a.height),u=parseInt(d,10),f="".concat(t.width||a.width),m=parseInt(f,10);return s0(s0(s0(s0(s0({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:m,name:t.name,radius:t.radius})}function bO(e){return we.createElement(aB,E2({shapeType:"rectangle",propTransformer:Mwe,activeClassName:"recharts-active-bar"},e))}var Bwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=bt(s)||use(s);return i?t(s,a):(i||Bd(),r)}},Uwe=["value","background"],mB;function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function zwe(e,t){if(e==null)return{};var r=Wwe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Wwe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jv.apply(this,arguments)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(s){ec(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _O(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pB(s.key),s)}}function Hwe(e,t,r){return t&&_O(e.prototype,t),r&&_O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qwe(e,t,r){return t=_v(t),Gwe(e,hB()?Reflect.construct(t,r||[],_v(e).constructor):t.apply(e,r))}function Gwe(e,t){if(t&&(Jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jwe(e)}function Jwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hB=function(){return!!e})()}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_v(e)}function Kwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T2(e,t)}function T2(e,t){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},T2(e,t)}function ec(e,t,r){return t=pB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pB(e){var t=Xwe(e,"string");return Jf(t)=="symbol"?t:t+""}function Xwe(e,t){if(Jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vo=function(e){function t(){var r;Vwe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=qwe(this,t,[].concat(a)),ec(r,"state",{isAnimationFinished:!1}),ec(r,"id",ru("recharts-bar-")),ec(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),ec(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return Kwe(t,e),Hwe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Ht(this.props,!1);return s&&s.map(function(f,m){var g=m===c,x=g?d:l,h=Wn(Wn(Wn({},u),f),{},{isActive:g,option:x,index:m,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return we.createElement(pr,jv({className:"recharts-bar-rectangle"},Id(a.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),we.createElement(bO,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,f=a.animationId,m=this.state.prevData;return we.createElement(sl,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,h=i.map(function(p,v){var b=m&&m[v];if(b){var j=es(b.x,p.x),N=es(b.y,p.y),w=es(b.width,p.width),_=es(b.height,p.height);return Wn(Wn({},p),{},{x:j(x),y:N(x),width:w(x),height:_(x)})}if(l==="horizontal"){var k=es(0,p.height),C=k(x);return Wn(Wn({},p),{},{y:p.y+p.height-C,height:C})}var T=es(0,p.width),P=T(x);return Wn(Wn({},p),{},{width:P})});return we.createElement(pr,null,s.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!$d(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=Ht(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,m=zwe(d,Uwe);if(!f)return null;var g=Wn(Wn(Wn(Wn(Wn({},m),{},{fill:"#eee"},f),c),Id(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return we.createElement(bO,jv({key:"background-bar-".concat(u),option:s.props.background,isActive:u===o},g))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Ga(u,Fp);if(!f)return null;var m=d==="vertical"?l[0].height/2:l[0].width/2,g=function(p,v){var b=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:b,errorVal:Dn(p,v)}},x={clipPath:s?"url(#clipPath-".concat(a,")"):null};return we.createElement(pr,x,f.map(function(h){return we.cloneElement(h,{key:"error-bar-".concat(a,"-").concat(h.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,l=s.className,o=s.xAxis,c=s.yAxis,d=s.left,u=s.top,f=s.width,m=s.height,g=s.isAnimationActive,x=s.background,h=s.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=or("recharts-bar",l),b=o&&o.allowDataOverflow,j=c&&c.allowDataOverflow,N=b||j,w=ar(h)?this.id:h;return we.createElement(pr,{className:v},b||j?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(w)},we.createElement("rect",{x:b?d:d-f/2,y:j?u:u-m/2,width:b?f:f*2,height:j?m:m*2}))):null,we.createElement(pr,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!g||p)&&El.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(y.PureComponent);mB=vo;ec(vo,"displayName","Bar");ec(vo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ac.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ec(vo,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,m=e.offset,g=Eye(s,r);if(!g)return null;var x=t.layout,h=r.type.defaultProps,p=h!==void 0?Wn(Wn({},h),r.props):r.props,v=p.dataKey,b=p.children,j=p.minPointSize,N=x==="horizontal"?l:i,w=d?N.scale.domain():null,_=Fye({numericAxis:N}),k=Ga(b,Fd),C=f.map(function(T,P){var A,S,E,O,I,L;d?A=Tye(d[u+P],w):(A=Dn(T,v),Array.isArray(A)||(A=[_,A]));var Z=Bwe(j,mB.defaultProps.minPointSize)(A[1],P);if(x==="horizontal"){var H,R=[l.scale(A[0]),l.scale(A[1])],D=R[0],Y=R[1];S=uP({axis:i,ticks:o,bandSize:a,offset:g.offset,entry:T,index:P}),E=(H=Y??D)!==null&&H!==void 0?H:void 0,O=g.size;var M=D-Y;if(I=Number.isNaN(M)?0:M,L={x:S,y:l.y,width:O,height:l.height},Math.abs(Z)>0&&Math.abs(I)<Math.abs(Z)){var X=ia(I||Z)*(Math.abs(Z)-Math.abs(I));E-=X,I+=X}}else{var ne=[i.scale(A[0]),i.scale(A[1])],J=ne[0],ue=ne[1];if(S=J,E=uP({axis:l,ticks:c,bandSize:a,offset:g.offset,entry:T,index:P}),O=ue-J,I=g.size,L={x:i.x,y:E,width:i.width,height:I},Math.abs(Z)>0&&Math.abs(O)<Math.abs(Z)){var ke=ia(O||Z)*(Math.abs(Z)-Math.abs(O));O+=ke}}return Wn(Wn(Wn({},T),{},{x:S,y:E,width:O,height:I,value:d?A:A[1],payload:T,background:L},k&&k[P]&&k[P].props),{},{tooltipPayload:[$9(r,T)],tooltipPosition:{x:S+O/2,y:E+I/2}})});return Wn({data:C,layout:x},m)});function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function Ywe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xB(s.key),s)}}function Zwe(e,t,r){return t&&wO(e.prototype,t),r&&wO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(s){v1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function v1(e,t,r){return t=xB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xB(e){var t=Qwe(e,"string");return Kh(t)=="symbol"?t:t+""}function Qwe(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Kh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TC=function(t,r,s,a,i){var l=t.width,o=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:s.left,leftMirror:s.left,right:l-s.right,rightMirror:l-s.right,top:s.top,topMirror:s.top,bottom:o-s.bottom,bottomMirror:o-s.bottom},m=!!$a(d,vo);return u.reduce(function(g,x){var h=r[x],p=h.orientation,v=h.domain,b=h.padding,j=b===void 0?{}:b,N=h.mirror,w=h.reversed,_="".concat(p).concat(N?"Mirror":""),k,C,T,P,A;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var S=v[1]-v[0],E=1/0,O=h.categoricalDomain.sort(hse);if(O.forEach(function(ne,J){J>0&&(E=Math.min((ne||0)-(O[J-1]||0),E))}),Number.isFinite(E)){var I=E/S,L=h.layout==="vertical"?s.height:s.width;if(h.padding==="gap"&&(k=I*L/2),h.padding==="no-gap"){var Z=la(t.barCategoryGap,I*L),H=I*L/2;k=H-Z-(H-Z)/L*Z}}}a==="xAxis"?C=[s.left+(j.left||0)+(k||0),s.left+s.width-(j.right||0)-(k||0)]:a==="yAxis"?C=c==="horizontal"?[s.top+s.height-(j.bottom||0),s.top+(j.top||0)]:[s.top+(j.top||0)+(k||0),s.top+s.height-(j.bottom||0)-(k||0)]:C=h.range,w&&(C=[C[1],C[0]]);var R=L9(h,i,m),D=R.scale,Y=R.realScaleType;D.domain(v).range(C),I9(D);var M=F9(D,zi(zi({},h),{},{realScaleType:Y}));a==="xAxis"?(A=p==="top"&&!N||p==="bottom"&&N,T=s.left,P=f[_]-A*h.height):a==="yAxis"&&(A=p==="left"&&!N||p==="right"&&N,T=f[_]-A*h.width,P=s.top);var X=zi(zi(zi({},h),M),{},{realScaleType:Y,x:T,y:P,scale:D,width:a==="xAxis"?s.width:h.width,height:a==="yAxis"?s.height:h.height});return X.bandSize=iv(X,M),!h.hide&&a==="xAxis"?f[_]+=(A?-1:1)*X.height:h.hide||(f[_]+=(A?-1:1)*X.width),zi(zi({},g),{},v1({},x,X))},{})},gB=function(t,r){var s=t.x,a=t.y,i=r.x,l=r.y;return{x:Math.min(s,i),y:Math.min(a,l),width:Math.abs(i-s),height:Math.abs(l-a)}},eNe=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return gB({x:r,y:s},{x:a,y:i})},yB=function(){function e(t){Ywe(this,e),this.scale=t}return Zwe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();v1(yB,"EPS",1e-4);var PC=function(t){var r=Object.keys(t).reduce(function(s,a){return zi(zi({},s),{},v1({},a,yB.create(t[a])))},{});return zi(zi({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return bwe(a,function(c,d){return r[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return fB(a,function(i,l){return r[l].isInRange(i)})}})};function tNe(e){return(e%180+180)%180}var rNe=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=tNe(a),l=i*Math.PI/180,o=Math.atan(s/r),c=l>o&&l<Math.PI-o?s/Math.sin(l):r/Math.cos(l);return Math.abs(c)},nNe=Ml,sNe=Pp,aNe=e1;function iNe(e){return function(t,r,s){var a=Object(t);if(!sNe(t)){var i=nNe(r);t=aNe(t),r=function(o){return i(a[o],o,a)}}var l=e(t,r,s);return l>-1?a[i?t[l]:l]:void 0}}var lNe=iNe,oNe=oB;function cNe(e){var t=oNe(e),r=t%1;return t===t?r?t-r:t:0}var dNe=cNe,uNe=hM,fNe=Ml,mNe=dNe,hNe=Math.max;function pNe(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:mNe(r);return a<0&&(a=hNe(s+a,0)),uNe(e,fNe(t),a)}var xNe=pNe,gNe=lNe,yNe=xNe,vNe=gNe(yNe),bNe=vNe;const jNe=$r(bNe);var _Ne=gne(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),OC=y.createContext(void 0),RC=y.createContext(void 0),vB=y.createContext(void 0),bB=y.createContext({}),jB=y.createContext(void 0),_B=y.createContext(0),wB=y.createContext(0),kO=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,l=t.clipPathId,o=t.children,c=t.width,d=t.height,u=_Ne(i);return we.createElement(OC.Provider,{value:s},we.createElement(RC.Provider,{value:a},we.createElement(bB.Provider,{value:i},we.createElement(vB.Provider,{value:u},we.createElement(jB.Provider,{value:l},we.createElement(_B.Provider,{value:d},we.createElement(wB.Provider,{value:c},o)))))))},wNe=function(){return y.useContext(jB)},NB=function(t){var r=y.useContext(OC);r==null&&Bd();var s=r[t];return s==null&&Bd(),s},NNe=function(){var t=y.useContext(OC);return Ko(t)},kNe=function(){var t=y.useContext(RC),r=jNe(t,function(s){return fB(s.domain,Number.isFinite)});return r||Ko(t)},kB=function(t){var r=y.useContext(RC);r==null&&Bd();var s=r[t];return s==null&&Bd(),s},SNe=function(){var t=y.useContext(vB);return t},CNe=function(){return y.useContext(bB)},LC=function(){return y.useContext(wB)},IC=function(){return y.useContext(_B)};function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function ANe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ENe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,CB(s.key),s)}}function TNe(e,t,r){return t&&ENe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PNe(e,t,r){return t=wv(t),ONe(e,SB()?Reflect.construct(t,r||[],wv(e).constructor):t.apply(e,r))}function ONe(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RNe(e)}function RNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SB=function(){return!!e})()}function wv(e){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wv(e)}function LNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P2(e,t)}function P2(e,t){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},P2(e,t)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(s){FC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function FC(e,t,r){return t=CB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CB(e){var t=INe(e,"string");return Kf(t)=="symbol"?t:t+""}function INe(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Kf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FNe(e,t){return BNe(e)||MNe(e,t)||$Ne(e,t)||DNe()}function DNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ne(e,t){if(e){if(typeof e=="string")return AO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AO(e,t)}}function AO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function MNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function BNe(e){if(Array.isArray(e))return e}function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},O2.apply(this,arguments)}var UNe=function(t,r){var s;return we.isValidElement(t)?s=we.cloneElement(t,r):Qt(t)?s=t(r):s=we.createElement("line",O2({},r,{className:"recharts-reference-line-line"})),s},zNe=function(t,r,s,a,i,l,o,c,d){var u=i.x,f=i.y,m=i.width,g=i.height;if(s){var x=d.y,h=t.y.apply(x,{position:l});if(Tl(d,"discard")&&!t.y.isInRange(h))return null;var p=[{x:u+m,y:h},{x:u,y:h}];return c==="left"?p.reverse():p}if(r){var v=d.x,b=t.x.apply(v,{position:l});if(Tl(d,"discard")&&!t.x.isInRange(b))return null;var j=[{x:b,y:f+g},{x:b,y:f}];return o==="top"?j.reverse():j}if(a){var N=d.segment,w=N.map(function(_){return t.apply(_,{position:l})});return Tl(d,"discard")&&fwe(w,function(_){return!t.isInRange(_)})?null:w}return null};function WNe(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,c=e.alwaysShow,d=wNe(),u=NB(a),f=kB(i),m=SNe();if(!d||!m)return null;Qi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=PC({x:u.scale,y:f.scale}),x=ns(t),h=ns(r),p=s&&s.length===2,v=zNe(g,x,h,p,m,e.position,u.orientation,f.orientation,e);if(!v)return null;var b=FNe(v,2),j=b[0],N=j.x,w=j.y,_=b[1],k=_.x,C=_.y,T=Tl(e,"hidden")?"url(#".concat(d,")"):void 0,P=CO(CO({clipPath:T},Ht(e,!0)),{},{x1:N,y1:w,x2:k,y2:C});return we.createElement(pr,{className:or("recharts-reference-line",o)},UNe(l,P),fs.renderCallByParent(e,eNe({x1:N,y1:w,x2:k,y2:C})))}var DC=function(e){function t(){return ANe(this,t),PNe(this,t,arguments)}return LNe(t,e),TNe(t,[{key:"render",value:function(){return we.createElement(WNe,this.props)}}])}(we.Component);FC(DC,"displayName","ReferenceLine");FC(DC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},R2.apply(this,arguments)}function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function EO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function TO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(r),!0).forEach(function(s){b1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function VNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HNe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,EB(s.key),s)}}function qNe(e,t,r){return t&&HNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GNe(e,t,r){return t=Nv(t),JNe(e,AB()?Reflect.construct(t,r||[],Nv(e).constructor):t.apply(e,r))}function JNe(e,t){if(t&&(Xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KNe(e)}function KNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AB=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nv(e)}function XNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L2(e,t)}function L2(e,t){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},L2(e,t)}function b1(e,t,r){return t=EB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EB(e){var t=YNe(e,"string");return Xf(t)=="symbol"?t:t+""}function YNe(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZNe=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,l=PC({x:a.scale,y:i.scale}),o=l.apply({x:r,y:s},{bandAware:!0});return Tl(t,"discard")&&!l.isInRange(o)?null:o},j1=function(e){function t(){return VNe(this,t),GNe(this,t,arguments)}return XNe(t,e),qNe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,l=s.r,o=s.alwaysShow,c=s.clipPathId,d=ns(a),u=ns(i);if(Qi(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=ZNe(this.props);if(!f)return null;var m=f.x,g=f.y,x=this.props,h=x.shape,p=x.className,v=Tl(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=TO(TO({clipPath:v},Ht(this.props,!0)),{},{cx:m,cy:g});return we.createElement(pr,{className:or("recharts-reference-dot",p)},t.renderDot(h,b),fs.renderCallByParent(this.props,{x:m-l,y:g-l,width:2*l,height:2*l}))}}])}(we.Component);b1(j1,"displayName","ReferenceDot");b1(j1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});b1(j1,"renderDot",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Qt(e)?r=e(t):r=we.createElement(Dp,R2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function I2(){return I2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},I2.apply(this,arguments)}function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function OO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(s){_1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function QNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e2e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,PB(s.key),s)}}function t2e(e,t,r){return t&&e2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r2e(e,t,r){return t=kv(t),n2e(e,TB()?Reflect.construct(t,r||[],kv(e).constructor):t.apply(e,r))}function n2e(e,t){if(t&&(Yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s2e(e)}function s2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TB=function(){return!!e})()}function kv(e){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kv(e)}function a2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F2(e,t)}function F2(e,t){return F2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},F2(e,t)}function _1(e,t,r){return t=PB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PB(e){var t=i2e(e,"string");return Yf(t)=="symbol"?t:t+""}function i2e(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var l2e=function(t,r,s,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var m=PC({x:u.scale,y:f.scale}),g={x:t?m.x.apply(l,{position:"start"}):m.x.rangeMin,y:s?m.y.apply(c,{position:"start"}):m.y.rangeMin},x={x:r?m.x.apply(o,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Tl(i,"discard")&&(!m.isInRange(g)||!m.isInRange(x))?null:gB(g,x)},w1=function(e){function t(){return QNe(this,t),r2e(this,t,arguments)}return a2e(t,e),t2e(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,l=s.y1,o=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;Qi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ns(a),m=ns(i),g=ns(l),x=ns(o),h=this.props.shape;if(!f&&!m&&!g&&!x&&!h)return null;var p=l2e(f,m,g,x,this.props);if(!p&&!h)return null;var v=Tl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return we.createElement(pr,{className:or("recharts-reference-area",c)},t.renderRect(h,OO(OO({clipPath:v},Ht(this.props,!0)),p)),fs.renderCallByParent(this.props,p))}}])}(we.Component);_1(w1,"displayName","ReferenceArea");_1(w1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_1(w1,"renderRect",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Qt(e)?r=e(t):r=we.createElement(EC,I2({},t,{className:"recharts-reference-area-rect"})),r});function OB(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function o2e(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return rNe(s,r)}function c2e(e,t,r){var s=r==="width",a=e.x,i=e.y,l=e.width,o=e.height;return t===1?{start:s?a:i,end:s?a+l:i+o}:{start:s?a+l:i+o,end:s?a:i}}function Sv(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function d2e(e,t){return OB(e,t+1)}function u2e(e,t,r,s,a){for(var i=(s||[]).slice(),l=t.start,o=t.end,c=0,d=1,u=l,f=function(){var x=s==null?void 0:s[c];if(x===void 0)return{v:OB(s,d)};var h=c,p,v=function(){return p===void 0&&(p=r(x,h)),p},b=x.coordinate,j=c===0||Sv(e,b,v,u,o);j||(c=0,u=l,d+=1),j&&(u=b+e*(v()/2+a),c+=d)},m;d<=i.length;)if(m=f(),m)return m.v;return[]}function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(s){f2e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function f2e(e,t,r){return t=m2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m2e(e){var t=h2e(e,"string");return Xh(t)=="symbol"?t:t+""}function h2e(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p2e(e,t,r,s,a){for(var i=(s||[]).slice(),l=i.length,o=t.start,c=t.end,d=function(m){var g=i[m],x,h=function(){return x===void 0&&(x=r(g,m)),x};if(m===l-1){var p=e*(g.coordinate+e*h()/2-c);i[m]=g=$s($s({},g),{},{tickCoord:p>0?g.coordinate-p*e:g.coordinate})}else i[m]=g=$s($s({},g),{},{tickCoord:g.coordinate});var v=Sv(e,g.tickCoord,h,o,c);v&&(c=g.tickCoord-e*(h()/2+a),i[m]=$s($s({},g),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function x2e(e,t,r,s,a,i){var l=(s||[]).slice(),o=l.length,c=t.start,d=t.end;if(i){var u=s[o-1],f=r(u,o-1),m=e*(u.coordinate+e*f/2-d);l[o-1]=u=$s($s({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var g=Sv(e,u.tickCoord,function(){return f},c,d);g&&(d=u.tickCoord-e*(f/2+a),l[o-1]=$s($s({},u),{},{isShow:!0}))}for(var x=i?o-1:o,h=function(b){var j=l[b],N,w=function(){return N===void 0&&(N=r(j,b)),N};if(b===0){var _=e*(j.coordinate-e*w()/2-c);l[b]=j=$s($s({},j),{},{tickCoord:_<0?j.coordinate-_*e:j.coordinate})}else l[b]=j=$s($s({},j),{},{tickCoord:j.coordinate});var k=Sv(e,j.tickCoord,w,c,d);k&&(c=j.tickCoord+e*(w()/2+a),l[b]=$s($s({},j),{},{isShow:!0}))},p=0;p<x;p++)h(p);return l}function $C(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!a||!a.length||!s)return[];if(bt(c)||Ac.isSsr)return d2e(a,typeof c=="number"&&bt(c)?c:0);var m=[],g=o==="top"||o==="bottom"?"width":"height",x=u&&g==="width"?L0(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(j,N){var w=Qt(d)?d(j.value,N):j.value;return g==="width"?o2e(L0(w,{fontSize:t,letterSpacing:r}),x,f):L0(w,{fontSize:t,letterSpacing:r})[g]},p=a.length>=2?ia(a[1].coordinate-a[0].coordinate):1,v=c2e(i,p,g);return c==="equidistantPreserveStart"?u2e(p,v,h,a,l):(c==="preserveStart"||c==="preserveStartEnd"?m=x2e(p,v,h,a,l,c==="preserveStartEnd"):m=p2e(p,v,h,a,l),m.filter(function(b){return b.isShow}))}var g2e=["viewBox"],y2e=["viewBox"],v2e=["ticks"];function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},tf.apply(this,arguments)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(s){MC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Yj(e,t){if(e==null)return{};var r=b2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function b2e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function j2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,LB(s.key),s)}}function _2e(e,t,r){return t&&IO(e.prototype,t),r&&IO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function w2e(e,t,r){return t=Cv(t),N2e(e,RB()?Reflect.construct(t,r||[],Cv(e).constructor):t.apply(e,r))}function N2e(e,t){if(t&&(Zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k2e(e)}function k2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RB=function(){return!!e})()}function Cv(e){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cv(e)}function S2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},D2(e,t)}function MC(e,t,r){return t=LB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LB(e){var t=C2e(e,"string");return Zf(t)=="symbol"?t:t+""}function C2e(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rm=function(e){function t(r){var s;return j2e(this,t),s=w2e(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return S2e(t,e),_2e(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,l=Yj(s,g2e),o=this.props,c=o.viewBox,d=Yj(o,y2e);return!hf(i,c)||!hf(l,d)||!hf(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,f=a.mirror,m=a.tickMargin,g,x,h,p,v,b,j=f?-1:1,N=s.tickSize||u,w=bt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":g=x=s.coordinate,p=l+ +!f*c,h=p-j*N,b=h-j*m,v=w;break;case"left":h=p=s.coordinate,x=i+ +!f*o,g=x-j*N,v=g-j*m,b=w;break;case"right":h=p=s.coordinate,x=i+ +f*o,g=x+j*N,v=g+j*m,b=w;break;default:g=x=s.coordinate,p=l+ +f*c,h=p+j*N,b=h+j*m,v=w;break}return{line:{x1:g,y1:h,x2:x,y2:p},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,f=Xn(Xn(Xn({},Ht(this.props,!1)),Ht(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);f=Xn(Xn({},f),{},{x1:a,y1:i+m*o,x2:a+l,y2:i+m*o})}else{var g=+(c==="left"&&!d||c==="right"&&d);f=Xn(Xn({},f),{},{x1:a+g*l,y1:i,x2:a+g*l,y2:i+o})}return we.createElement("line",tf({},f,{className:or("recharts-cartesian-axis-line",qa(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,f=o.tickFormatter,m=o.unit,g=$C(Xn(Xn({},this.props),{},{ticks:s}),a,i),x=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=Ht(this.props,!1),v=Ht(u,!1),b=Xn(Xn({},p),{},{fill:"none"},Ht(c,!1)),j=g.map(function(N,w){var _=l.getTickLineCoord(N),k=_.line,C=_.tick,T=Xn(Xn(Xn(Xn({textAnchor:x,verticalAnchor:h},p),{},{stroke:"none",fill:d},v),C),{},{index:w,payload:N,visibleTicksCount:g.length,tickFormatter:f});return we.createElement(pr,tf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Id(l.props,N,w)),c&&we.createElement("line",tf({},b,k,{className:or("recharts-cartesian-axis-tick-line",qa(c,"className"))})),u&&t.renderTickItem(u,T,"".concat(Qt(f)?f(N.value,w):N.value).concat(m||"")))});return we.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var f=this.props,m=f.ticks,g=Yj(f,v2e),x=m;return Qt(c)&&(x=m&&m.length>0?c(this.props):c(g)),l<=0||o<=0||!x||!x.length?null:we.createElement(pr,{className:or("recharts-cartesian-axis",d),ref:function(p){s.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),fs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var l,o=or(a.className,"recharts-cartesian-axis-tick-value");return we.isValidElement(s)?l=we.cloneElement(s,Xn(Xn({},a),{},{className:o})):Qt(s)?l=s(Xn(Xn({},a),{},{className:o})):l=we.createElement(Dd,tf({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(y.Component);MC(Rm,"displayName","CartesianAxis");MC(Rm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var A2e=["x1","y1","x2","y2","key"],E2e=["offset"];function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(s){T2e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function T2e(e,t,r){return t=P2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P2e(e){var t=O2e(e,"string");return Ud(t)=="symbol"?t:t+""}function O2e(e,t){if(Ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ud(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ud.apply(this,arguments)}function DO(e,t){if(e==null)return{};var r=R2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function R2e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var L2e=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,l=t.width,o=t.height,c=t.ry;return we.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function IB(e,t){var r;if(we.isValidElement(e))r=we.cloneElement(e,t);else if(Qt(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,l=t.y2,o=t.key,c=DO(t,A2e),d=Ht(c,!1);d.offset;var u=DO(d,E2e);r=we.createElement("line",ud({},u,{x1:s,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function I2e(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=zs(zs({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return IB(a,d)});return we.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function F2e(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=zs(zs({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return IB(a,d)});return we.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function D2e(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=o.map(function(m){return Math.round(m+a-a)}).sort(function(m,g){return m-g});a!==u[0]&&u.unshift(0);var f=u.map(function(m,g){var x=!u[g+1],h=x?a+l-m:u[g+1]-m;if(h<=0)return null;var p=g%t.length;return we.createElement("rect",{key:"react-".concat(g),y:m,x:s,height:h,width:i,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function $2e(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,l=e.y,o=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var u=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,g){return m-g});i!==u[0]&&u.unshift(0);var f=u.map(function(m,g){var x=!u[g+1],h=x?i+o-m:u[g+1]-m;if(h<=0)return null;var p=g%s.length;return we.createElement("rect",{key:"react-".concat(g),x:m,y:l,width:h,height:c,stroke:"none",fill:s[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var M2e=function(t,r){var s=t.xAxis,a=t.width,i=t.height,l=t.offset;return R9($C(zs(zs(zs({},Rm.defaultProps),s),{},{ticks:to(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,r)},B2e=function(t,r){var s=t.yAxis,a=t.width,i=t.height,l=t.offset;return R9($C(zs(zs(zs({},Rm.defaultProps),s),{},{ticks:to(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,r)},bu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function tc(e){var t,r,s,a,i,l,o=LC(),c=IC(),d=CNe(),u=zs(zs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:bu.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:bu.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:bu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:bu.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:bu.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:bu.verticalFill,x:bt(e.x)?e.x:d.left,y:bt(e.y)?e.y:d.top,width:bt(e.width)?e.width:d.width,height:bt(e.height)?e.height:d.height}),f=u.x,m=u.y,g=u.width,x=u.height,h=u.syncWithTicks,p=u.horizontalValues,v=u.verticalValues,b=NNe(),j=kNe();if(!bt(g)||g<=0||!bt(x)||x<=0||!bt(f)||f!==+f||!bt(m)||m!==+m)return null;var N=u.verticalCoordinatesGenerator||M2e,w=u.horizontalCoordinatesGenerator||B2e,_=u.horizontalPoints,k=u.verticalPoints;if((!_||!_.length)&&Qt(w)){var C=p&&p.length,T=w({yAxis:j?zs(zs({},j),{},{ticks:C?p:j.ticks}):void 0,width:o,height:c,offset:d},C?!0:h);Qi(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ud(T),"]")),Array.isArray(T)&&(_=T)}if((!k||!k.length)&&Qt(N)){var P=v&&v.length,A=N({xAxis:b?zs(zs({},b),{},{ticks:P?v:b.ticks}):void 0,width:o,height:c,offset:d},P?!0:h);Qi(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ud(A),"]")),Array.isArray(A)&&(k=A)}return we.createElement("g",{className:"recharts-cartesian-grid"},we.createElement(L2e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),we.createElement(I2e,ud({},u,{offset:d,horizontalPoints:_,xAxis:b,yAxis:j})),we.createElement(F2e,ud({},u,{offset:d,verticalPoints:k,xAxis:b,yAxis:j})),we.createElement(D2e,ud({},u,{horizontalPoints:_})),we.createElement($2e,ud({},u,{verticalPoints:k})))}tc.displayName="CartesianGrid";var U2e=["type","layout","connectNulls","ref"],z2e=["key"];function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function $O(e,t){if(e==null)return{};var r=W2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function W2e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},B0.apply(this,arguments)}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(r),!0).forEach(function(s){Wi(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ju(e){return G2e(e)||q2e(e)||H2e(e)||V2e()}function V2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H2e(e,t){if(e){if(typeof e=="string")return $2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $2(e,t)}}function q2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G2e(e){if(Array.isArray(e))return $2(e)}function $2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function J2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,DB(s.key),s)}}function K2e(e,t,r){return t&&BO(e.prototype,t),r&&BO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X2e(e,t,r){return t=Av(t),Y2e(e,FB()?Reflect.construct(t,r||[],Av(e).constructor):t.apply(e,r))}function Y2e(e,t){if(t&&(Qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z2e(e)}function Z2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!e})()}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Av(e)}function Q2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M2(e,t)}function M2(e,t){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},M2(e,t)}function Wi(e,t,r){return t=DB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=eke(e,"string");return Qf(t)=="symbol"?t:t+""}function eke(e,t){if(Qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zd=function(e){function t(){var r;J2e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=X2e(this,t,[].concat(a)),Wi(r,"state",{isAnimationFinished:!0,totalLength:0}),Wi(r,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Wi(r,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(v,b){return v+b});if(!d)return r.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),f=l%d,m=o-l,g=[],x=0,h=0;x<c.length;h+=c[x],++x)if(h+c[x]>f){g=[].concat(ju(c.slice(0,x)),[f-h]);break}var p=g.length%2===0?[0,m]:[m];return[].concat(ju(t.repeat(c,u)),ju(g),p).map(function(v){return"".concat(v,"px")}).join(", ")}),Wi(r,"id",ru("recharts-line-")),Wi(r,"pathRef",function(l){r.mainCurve=l}),Wi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Wi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Q2e(t,e),K2e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Ga(u,Fp);if(!f)return null;var m=function(h,p){return{x:h.x,y:h.y,value:h.value,errorVal:Dn(h.payload,p)}},g={clipPath:s?"url(#clipPath-".concat(a,")"):null};return we.createElement(pr,g,f.map(function(x){return we.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,f=Ht(this.props,!1),m=Ht(c,!0),g=d.map(function(h,p){var v=Ra(Ra(Ra({key:"dot-".concat(p),r:3},f),m),{},{index:p,cx:h.x,cy:h.y,value:h.value,dataKey:u,payload:h.payload,points:d});return t.renderDotItem(c,v)}),x={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return we.createElement(pr,B0({className:"recharts-line-dots",key:"dots"},x),g)}},{key:"renderCurveStatically",value:function(s,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var f=$O(o,U2e),m=Ra(Ra(Ra({},Ht(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},l),{},{type:c,layout:d,connectNulls:u});return we.createElement(bd,B0({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,f=l.animationDuration,m=l.animationEasing,g=l.animationId,x=l.animateNewValues,h=l.width,p=l.height,v=this.state,b=v.prevPoints,j=v.totalLength;return we.createElement(sl,{begin:u,duration:f,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(b){var _=b.length/o.length,k=o.map(function(S,E){var O=Math.floor(E*_);if(b[O]){var I=b[O],L=es(I.x,S.x),Z=es(I.y,S.y);return Ra(Ra({},S),{},{x:L(w),y:Z(w)})}if(x){var H=es(h*2,S.x),R=es(p/2,S.y);return Ra(Ra({},S),{},{x:H(w),y:R(w)})}return Ra(Ra({},S),{},{x:S.x,y:S.y})});return i.renderCurveStatically(k,s,a)}var C=es(0,j),T=C(w),P;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(S){return parseFloat(S)});P=i.getStrokeDasharray(T,j,A)}else P=i.generateSimpleStrokeDasharray(j,T);return i.renderCurveStatically(o,s,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(s,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!$d(d,l))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,f=a.top,m=a.left,g=a.width,x=a.height,h=a.isAnimationActive,p=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,j=or("recharts-line",c),N=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,_=N||w,k=ar(p)?this.id:p,C=(s=Ht(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},T=C.r,P=T===void 0?3:T,A=C.strokeWidth,S=A===void 0?2:A,E=k7(l)?l:{},O=E.clipDot,I=O===void 0?!0:O,L=P*2+S;return we.createElement(pr,{className:j},N||w?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(k)},we.createElement("rect",{x:N?m:m-g/2,y:w?f:f-x/2,width:N?g:g*2,height:w?x:x*2})),!I&&we.createElement("clipPath",{id:"clipPath-dots-".concat(k)},we.createElement("rect",{x:m-L/2,y:f-L/2,width:g+L,height:x+L}))):null,!b&&this.renderCurve(_,k),this.renderErrorBar(_,k),(b||l)&&this.renderDots(_,I,k),(!h||v)&&El.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(ju(s),[0]):s,l=[],o=0;o<a;++o)l=[].concat(ju(l),ju(i));return l}},{key:"renderDotItem",value:function(s,a){var i;if(we.isValidElement(s))i=we.cloneElement(s,a);else if(Qt(s))i=s(a);else{var l=a.key,o=$O(a,z2e),c=or("recharts-line-dot",typeof s!="boolean"?s.className:"");i=we.createElement(Dp,B0({key:l},o,{className:c}))}return i}}])}(y.PureComponent);Wi(zd,"displayName","Line");Wi(zd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ac.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Wi(zd,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,o=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,f=c.map(function(m,g){var x=Dn(m,l);return u==="horizontal"?{x:av({axis:r,ticks:a,bandSize:o,entry:m,index:g}),y:ar(x)?null:s.scale(x),value:x,payload:m}:{x:ar(x)?null:r.scale(x),y:av({axis:s,ticks:i,bandSize:o,entry:m,index:g}),value:x,payload:m}});return Ra({points:f,layout:u},d)});var tke=["layout","type","stroke","connectNulls","isRange","ref"],rke=["key"],$B;function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function MB(e,t){if(e==null)return{};var r=nke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function nke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fd.apply(this,arguments)}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(s){wl(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ske(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,UB(s.key),s)}}function ake(e,t,r){return t&&zO(e.prototype,t),r&&zO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ike(e,t,r){return t=Ev(t),lke(e,BB()?Reflect.construct(t,r||[],Ev(e).constructor):t.apply(e,r))}function lke(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oke(e)}function oke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BB=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ev(e)}function cke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B2(e,t)}function B2(e,t){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},B2(e,t)}function wl(e,t,r){return t=UB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=dke(e,"string");return em(t)=="symbol"?t:t+""}function dke(e,t){if(em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bo=function(e){function t(){var r;ske(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=ike(this,t,[].concat(a)),wl(r,"state",{isAnimationFinished:!0}),wl(r,"id",ru("recharts-area-")),wl(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Qt(l)&&l()}),wl(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Qt(l)&&l()}),r}return cke(t,e),ake(t,[{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,m=Ht(this.props,!1),g=Ht(d,!0),x=u.map(function(p,v){var b=Bo(Bo(Bo({key:"dot-".concat(v),r:3},m),g),{},{index:v,cx:p.x,cy:p.y,dataKey:f,value:p.value,payload:p.payload,points:u});return t.renderDotItem(d,b)}),h={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return we.createElement(pr,fd({className:"recharts-area-dots"},h),x)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].x,d=l[l.length-1].x,u=s*Math.abs(c-d),f=Qo(l.map(function(m){return m.y||0}));return bt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Qo(i.map(function(m){return m.y||0})),f)),bt(f)?we.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].y,d=l[l.length-1].y,u=s*Math.abs(c-d),f=Qo(l.map(function(m){return m.x||0}));return bt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Qo(i.map(function(m){return m.x||0})),f)),bt(f)?we.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,l){var o=this.props,c=o.layout,d=o.type,u=o.stroke,f=o.connectNulls,m=o.isRange;o.ref;var g=MB(o,tke);return we.createElement(pr,{clipPath:i?"url(#clipPath-".concat(l,")"):null},we.createElement(bd,fd({},Ht(g,!0),{points:s,connectNulls:f,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&we.createElement(bd,fd({},Ht(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:s})),u!=="none"&&m&&we.createElement(bd,fd({},Ht(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.baseLine,d=l.isAnimationActive,u=l.animationBegin,f=l.animationDuration,m=l.animationEasing,g=l.animationId,x=this.state,h=x.prevPoints,p=x.prevBaseLine;return we.createElement(sl,{begin:u,duration:f,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var b=v.t;if(h){var j=h.length/o.length,N=o.map(function(C,T){var P=Math.floor(T*j);if(h[P]){var A=h[P],S=es(A.x,C.x),E=es(A.y,C.y);return Bo(Bo({},C),{},{x:S(b),y:E(b)})}return C}),w;if(bt(c)&&typeof c=="number"){var _=es(p,c);w=_(b)}else if(ar(c)||Sm(c)){var k=es(p,0);w=k(b)}else w=c.map(function(C,T){var P=Math.floor(T*j);if(p[P]){var A=p[P],S=es(A.x,C.x),E=es(A.y,C.y);return Bo(Bo({},C),{},{x:S(b),y:E(b)})}return C});return i.renderAreaStatically(N,w,s,a)}return we.createElement(pr,null,we.createElement("defs",null,we.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),we.createElement(pr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(o,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,l=i.points,o=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,m=d.totalLength;return c&&l&&l.length&&(!u&&m>0||!$d(u,l)||!$d(f,o))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(l,o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.top,u=a.left,f=a.xAxis,m=a.yAxis,g=a.width,x=a.height,h=a.isAnimationActive,p=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,j=or("recharts-area",c),N=f&&f.allowDataOverflow,w=m&&m.allowDataOverflow,_=N||w,k=ar(p)?this.id:p,C=(s=Ht(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},T=C.r,P=T===void 0?3:T,A=C.strokeWidth,S=A===void 0?2:A,E=k7(l)?l:{},O=E.clipDot,I=O===void 0?!0:O,L=P*2+S;return we.createElement(pr,{className:j},N||w?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(k)},we.createElement("rect",{x:N?u:u-g/2,y:w?d:d-x/2,width:N?g:g*2,height:w?x:x*2})),!I&&we.createElement("clipPath",{id:"clipPath-dots-".concat(k)},we.createElement("rect",{x:u-L/2,y:d-L/2,width:g+L,height:x+L}))):null,b?null:this.renderArea(_,k),(l||b)&&this.renderDots(_,I,k),(!h||v)&&El.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(y.PureComponent);$B=bo;wl(bo,"displayName","Area");wl(bo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ac.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});wl(bo,"getBaseValue",function(e,t,r,s){var a=e.layout,i=e.baseValue,l=t.props.baseValue,o=l??i;if(bt(o)&&typeof o=="number")return o;var c=a==="horizontal"?s:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return o==="dataMin"?f:o==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]});wl(bo,"getComposedData",function(e){var t=e.props,r=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,m=e.offset,g=t.layout,x=d&&d.length,h=$B.getBaseValue(t,r,s,a),p=g==="horizontal",v=!1,b=f.map(function(N,w){var _;x?_=d[u+w]:(_=Dn(N,c),Array.isArray(_)?v=!0:_=[h,_]);var k=_[1]==null||x&&Dn(N,c)==null;return p?{x:av({axis:s,ticks:i,bandSize:o,entry:N,index:w}),y:k?null:a.scale(_[1]),value:_,payload:N}:{x:k?null:s.scale(_[1]),y:av({axis:a,ticks:l,bandSize:o,entry:N,index:w}),value:_,payload:N}}),j;return x||v?j=b.map(function(N){var w=Array.isArray(N.value)?N.value[0]:null;return p?{x:N.x,y:w!=null&&N.y!=null?a.scale(w):null}:{x:w!=null?s.scale(w):null,y:N.y}}):j=p?a.scale(h):s.scale(h),Bo({points:b,baseLine:j,layout:g,isRange:v},m)});wl(bo,"renderDotItem",function(e,t){var r;if(we.isValidElement(e))r=we.cloneElement(e,t);else if(Qt(e))r=e(t);else{var s=or("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=MB(t,rke);r=we.createElement(Dp,fd({},i,{key:a,className:s}))}return r});function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function uke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,VB(s.key),s)}}function mke(e,t,r){return t&&fke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hke(e,t,r){return t=Tv(t),pke(e,zB()?Reflect.construct(t,r||[],Tv(e).constructor):t.apply(e,r))}function pke(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(e)}function xke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zB=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tv(e)}function gke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U2(e,t)}function U2(e,t){return U2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},U2(e,t)}function WB(e,t,r){return t=VB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VB(e){var t=yke(e,"string");return tm(t)=="symbol"?t:t+""}function yke(e,t){if(tm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z2.apply(this,arguments)}function vke(e){var t=e.xAxisId,r=LC(),s=IC(),a=NB(t);return a==null?null:y.createElement(Rm,z2({},a,{className:or("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return to(l,!0)}}))}var yi=function(e){function t(){return uke(this,t),hke(this,t,arguments)}return gke(t,e),mke(t,[{key:"render",value:function(){return y.createElement(vke,this.props)}}])}(y.Component);WB(yi,"displayName","XAxis");WB(yi,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function bke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,GB(s.key),s)}}function _ke(e,t,r){return t&&jke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wke(e,t,r){return t=Pv(t),Nke(e,HB()?Reflect.construct(t,r||[],Pv(e).constructor):t.apply(e,r))}function Nke(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kke(e)}function kke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HB=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pv(e)}function Ske(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W2(e,t)}function W2(e,t){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},W2(e,t)}function qB(e,t,r){return t=GB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GB(e){var t=Cke(e,"string");return rm(t)=="symbol"?t:t+""}function Cke(e,t){if(rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(rm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V2.apply(this,arguments)}var Ake=function(t){var r=t.yAxisId,s=LC(),a=IC(),i=kB(r);return i==null?null:y.createElement(Rm,V2({},i,{className:or("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(o){return to(o,!0)}}))},vi=function(e){function t(){return bke(this,t),wke(this,t,arguments)}return Ske(t,e),_ke(t,[{key:"render",value:function(){return y.createElement(Ake,this.props)}}])}(y.Component);qB(vi,"displayName","YAxis");qB(vi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function WO(e){return Oke(e)||Pke(e)||Tke(e)||Eke()}function Eke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tke(e,t){if(e){if(typeof e=="string")return H2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H2(e,t)}}function Pke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Oke(e){if(Array.isArray(e))return H2(e)}function H2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var q2=function(t,r,s,a,i){var l=Ga(t,DC),o=Ga(t,j1),c=[].concat(WO(l),WO(o)),d=Ga(t,w1),u="".concat(a,"Id"),f=a[0],m=r;if(c.length&&(m=c.reduce(function(h,p){if(p.props[u]===s&&Tl(p.props,"extendDomain")&&bt(p.props[f])){var v=p.props[f];return[Math.min(h[0],v),Math.max(h[1],v)]}return h},m)),d.length){var g="".concat(f,"1"),x="".concat(f,"2");m=d.reduce(function(h,p){if(p.props[u]===s&&Tl(p.props,"extendDomain")&&bt(p.props[g])&&bt(p.props[x])){var v=p.props[g],b=p.props[x];return[Math.min(h[0],v,b),Math.max(h[1],v,b)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,p){return bt(p)?[Math.min(h[0],p),Math.max(h[1],p)]:h},m)),m},JB={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,f||c,m),x=r?r+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,x=new Array(g);m<g;m++)x[m]=f[m].fn;return x},o.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(d,u,f,m,g,x){var h=r?r+d:d;if(!this._events[h])return!1;var p=this._events[h],v=arguments.length,b,j;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,f),!0;case 4:return p.fn.call(p.context,u,f,m),!0;case 5:return p.fn.call(p.context,u,f,m,g),!0;case 6:return p.fn.call(p.context,u,f,m,g,x),!0}for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];p.fn.apply(p.context,b)}else{var N=p.length,w;for(j=0;j<N;j++)switch(p[j].once&&this.removeListener(d,p[j].fn,void 0,!0),v){case 1:p[j].fn.call(p[j].context);break;case 2:p[j].fn.call(p[j].context,u);break;case 3:p[j].fn.call(p[j].context,u,f);break;case 4:p[j].fn.call(p[j].context,u,f,m);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];p[j].fn.apply(p[j].context,b)}}return!0},o.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},o.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},o.prototype.removeListener=function(d,u,f,m){var g=r?r+d:d;if(!this._events[g])return this;if(!u)return l(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!m||x.once)&&(!f||x.context===f)&&l(this,g);else{for(var h=0,p=[],v=x.length;h<v;h++)(x[h].fn!==u||m&&!x[h].once||f&&x[h].context!==f)&&p.push(x[h]);p.length?this._events[g]=p.length===1?p[0]:p:l(this,g)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(JB);var Rke=JB.exports;const Lke=$r(Rke);var Zj=new Lke,Qj="recharts.syncMouseEvents";function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function Ike(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,KB(s.key),s)}}function Dke(e,t,r){return t&&Fke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e_(e,t,r){return t=KB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=$ke(e,"string");return Yh(t)=="symbol"?t:t+""}function $ke(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mke=function(){function e(){Ike(this,e),e_(this,"activeIndex",0),e_(this,"coordinateList",[]),e_(this,"layout","horizontal")}return Dke(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,l=r.container,o=l===void 0?null:l,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,m=r.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,f=i+c+d,m=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function Bke(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&bt(s)&&bt(a))return!0}return!1}function Uke(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function XB(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,l=Qr(t,r,s,a),o=Qr(t,r,s,i);return{points:[l,o],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function zke(e,t,r){var s,a,i,l;if(e==="horizontal")s=t.x,i=s,a=r.top,l=r.top+r.height;else if(e==="vertical")a=t.y,l=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,m=Qr(o,c,d,f),g=Qr(o,c,u,f);s=m.x,a=m.y,i=g.x,l=g.y}else return XB(t);return[{x:s,y:a},{x:i,y:l}]}function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ix(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(s){Wke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Wke(e,t,r){return t=Vke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vke(e){var t=Hke(e,"string");return Zh(t)=="symbol"?t:t+""}function Hke(e,t){if(Zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qke(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,g=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!g||!i||!l||m!=="ScatterChart"&&a!=="axis")return null;var x,h=bd;if(m==="ScatterChart")x=l,h=eje;else if(m==="BarChart")x=Uke(f,l,c,u),h=EC;else if(f==="radial"){var p=XB(l),v=p.cx,b=p.cy,j=p.radius,N=p.startAngle,w=p.endAngle;x={cx:v,cy:b,startAngle:N,endAngle:w,innerRadius:j,outerRadius:j},h=AC}else x={points:zke(f,l,c)},h=bd;var _=Ix(Ix(Ix(Ix({stroke:"#ccc",pointerEvents:"none"},c),x),Ht(g,!1)),{},{payload:o,payloadIndex:d,className:or("recharts-tooltip-cursor",g.className)});return y.isValidElement(g)?y.cloneElement(g,_):y.createElement(h,_)}var Gke=["item"],Jke=["children","className","width","height","style","compact","title","desc"];function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}function rf(){return rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},rf.apply(this,arguments)}function HO(e,t){return Yke(e)||Xke(e,t)||ZB(e,t)||Kke()}function Kke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Yke(e){if(Array.isArray(e))return e}function qO(e,t){if(e==null)return{};var r=Zke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Zke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Qke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eSe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,QB(s.key),s)}}function tSe(e,t,r){return t&&eSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rSe(e,t,r){return t=Ov(t),nSe(e,YB()?Reflect.construct(t,r||[],Ov(e).constructor):t.apply(e,r))}function nSe(e,t){if(t&&(nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sSe(e)}function sSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YB=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ov(e)}function aSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},G2(e,t)}function sm(e){return oSe(e)||lSe(e)||ZB(e)||iSe()}function iSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZB(e,t){if(e){if(typeof e=="string")return J2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J2(e,t)}}function lSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oSe(e){if(Array.isArray(e))return J2(e)}function J2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(s){Zt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zt(e,t,r){return t=QB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QB(e){var t=cSe(e,"string");return nm(t)=="symbol"?t:t+""}function cSe(e,t){if(nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(nm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dSe={xAxis:["bottom","top"],yAxis:["left","right"]},uSe={width:"100%",height:"100%"},eU={x:0,y:0};function Fx(e){return e}var fSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},mSe=function(t,r,s,a){var i=r.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,o=a.radius;return lt(lt(lt({},a),Qr(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return lt(lt(lt({},a),Qr(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return eU},N1=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,l=(s??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(sm(o),sm(d)):o},[]);return l.length>0?l:t&&t.length&&bt(a)&&bt(i)?t.slice(a,i+1):[]};function tU(e){return e==="number"?[0,"auto"]:void 0}var K2=function(t,r,s,a){var i=t.graphicalItems,l=t.tooltipAxis,o=N1(r,t);return s<0||!i||!i.length||s>=o.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(l.dataKey&&!l.allowDuplicatedCategory){var g=f===void 0?o:f;m=Py(g,l.dataKey,a)}else m=f&&f[s]||o[s];return m?[].concat(sm(c),[$9(d,m)]):c},[])},JO=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},l=fSe(i,s),o=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=wye(l,o,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,m=K2(t,r,u,f),g=mSe(s,o,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:m,activeCoordinate:g}}return null},hSe=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,m=t.stackOffset,g=O9(u,i);return s.reduce(function(x,h){var p,v=h.type.defaultProps!==void 0?lt(lt({},h.type.defaultProps),h.props):h.props,b=v.type,j=v.dataKey,N=v.allowDataOverflow,w=v.allowDuplicatedCategory,_=v.scale,k=v.ticks,C=v.includeHidden,T=v[l];if(x[T])return x;var P=N1(t.data,{graphicalItems:a.filter(function(M){var X,ne=l in M.props?M.props[l]:(X=M.type.defaultProps)===null||X===void 0?void 0:X[l];return ne===T}),dataStartIndex:c,dataEndIndex:d}),A=P.length,S,E,O;Bke(v.domain,N,b)&&(S=o2(v.domain,null,N),g&&(b==="number"||_!=="auto")&&(O=F0(P,j,"category")));var I=tU(b);if(!S||S.length===0){var L,Z=(L=v.domain)!==null&&L!==void 0?L:I;if(j){if(S=F0(P,j,b),b==="category"&&g){var H=mse(S);w&&H?(E=S,S=yv(0,A)):w||(S=hP(Z,S,h).reduce(function(M,X){return M.indexOf(X)>=0?M:[].concat(sm(M),[X])},[]))}else if(b==="category")w?S=S.filter(function(M){return M!==""&&!ar(M)}):S=hP(Z,S,h).reduce(function(M,X){return M.indexOf(X)>=0||X===""||ar(X)?M:[].concat(sm(M),[X])},[]);else if(b==="number"){var R=Aye(P,a.filter(function(M){var X,ne,J=l in M.props?M.props[l]:(X=M.type.defaultProps)===null||X===void 0?void 0:X[l],ue="hide"in M.props?M.props.hide:(ne=M.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return J===T&&(C||!ue)}),j,i,u);R&&(S=R)}g&&(b==="number"||_!=="auto")&&(O=F0(P,j,"category"))}else g?S=yv(0,A):o&&o[T]&&o[T].hasStack&&b==="number"?S=m==="expand"?[0,1]:D9(o[T].stackGroups,c,d):S=P9(P,a.filter(function(M){var X=l in M.props?M.props[l]:M.type.defaultProps[l],ne="hide"in M.props?M.props.hide:M.type.defaultProps.hide;return X===T&&(C||!ne)}),b,u,!0);if(b==="number")S=q2(f,S,T,i,k),Z&&(S=o2(Z,S,N));else if(b==="category"&&Z){var D=Z,Y=S.every(function(M){return D.indexOf(M)>=0});Y&&(S=D)}}return lt(lt({},x),{},Zt({},T,lt(lt({},v),{},{axisType:i,domain:S,categoricalDomain:O,duplicateDomain:E,originalDomain:(p=v.domain)!==null&&p!==void 0?p:I,isCategorical:g,layout:u})))},{})},pSe=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,m=N1(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),g=m.length,x=O9(u,i),h=-1;return s.reduce(function(p,v){var b=v.type.defaultProps!==void 0?lt(lt({},v.type.defaultProps),v.props):v.props,j=b[l],N=tU("number");if(!p[j]){h++;var w;return x?w=yv(0,g):o&&o[j]&&o[j].hasStack?(w=D9(o[j].stackGroups,c,d),w=q2(f,w,j,i)):(w=o2(N,P9(m,s.filter(function(_){var k,C,T=l in _.props?_.props[l]:(k=_.type.defaultProps)===null||k===void 0?void 0:k[l],P="hide"in _.props?_.props.hide:(C=_.type.defaultProps)===null||C===void 0?void 0:C.hide;return T===j&&!P}),"number",u),a.defaultProps.allowDataOverflow),w=q2(f,w,j,i)),lt(lt({},p),{},Zt({},j,lt(lt({axisType:i},a.defaultProps),{},{hide:!0,orientation:qa(dSe,"".concat(i,".").concat(h%2),null),domain:w,originalDomain:N,isCategorical:x,layout:u})))}return p},{})},xSe=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(a,"Id"),m=Ga(u,i),g={};return m&&m.length?g=hSe(t,{axes:m,graphicalItems:l,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(g=pSe(t,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),g},gSe=function(t){var r=Ko(t),s=to(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:tC(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:iv(r,s)}},KO=function(t){var r=t.children,s=t.defaultShowTooltip,a=$a(r,Gf),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!s}},ySe=function(t){return!t||!t.length?!1:t.some(function(r){var s=so(r&&r.type);return s&&s.indexOf("Bar")>=0})},XO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},vSe=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,d=s.width,u=s.height,f=s.children,m=s.margin||{},g=$a(f,Gf),x=$a(f,gd),h=Object.keys(c).reduce(function(w,_){var k=c[_],C=k.orientation;return!k.mirror&&!k.hide?lt(lt({},w),{},Zt({},C,w[C]+k.width)):w},{left:m.left||0,right:m.right||0}),p=Object.keys(l).reduce(function(w,_){var k=l[_],C=k.orientation;return!k.mirror&&!k.hide?lt(lt({},w),{},Zt({},C,qa(w,"".concat(C))+k.height)):w},{top:m.top||0,bottom:m.bottom||0}),v=lt(lt({},p),h),b=v.bottom;g&&(v.bottom+=g.props.height||Gf.defaultProps.height),x&&r&&(v=Sye(v,a,s,r));var j=d-v.left-v.right,N=u-v.top-v.bottom;return lt(lt({brushBottom:b},v),{},{width:Math.max(j,0),height:Math.max(N,0)})},bSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},k1=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,l=t.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,m=function(v,b){var j=b.graphicalItems,N=b.stackGroups,w=b.offset,_=b.updateId,k=b.dataStartIndex,C=b.dataEndIndex,T=v.barSize,P=v.layout,A=v.barGap,S=v.barCategoryGap,E=v.maxBarSize,O=XO(P),I=O.numericAxisName,L=O.cateAxisName,Z=ySe(j),H=[];return j.forEach(function(R,D){var Y=N1(v.data,{graphicalItems:[R],dataStartIndex:k,dataEndIndex:C}),M=R.type.defaultProps!==void 0?lt(lt({},R.type.defaultProps),R.props):R.props,X=M.dataKey,ne=M.maxBarSize,J=M["".concat(I,"Id")],ue=M["".concat(L,"Id")],ke={},ve=c.reduce(function(ye,Pe){var et=b["".concat(Pe.axisType,"Map")],We=M["".concat(Pe.axisType,"Id")];et&&et[We]||Pe.axisType==="zAxis"||Bd();var qe=et[We];return lt(lt({},ye),{},Zt(Zt({},Pe.axisType,qe),"".concat(Pe.axisType,"Ticks"),to(qe)))},ke),je=ve[L],ie=ve["".concat(L,"Ticks")],se=N&&N[J]&&N[J].hasStack&&Dye(R,N[J].stackGroups),z=so(R.type).indexOf("Bar")>=0,Te=iv(je,ie),fe=[],Ie=Z&&Nye({barSize:T,stackGroups:N,totalSize:bSe(ve,L)});if(z){var ce,Ce,Ye=ar(ne)?E:ne,at=(ce=(Ce=iv(je,ie,!0))!==null&&Ce!==void 0?Ce:Ye)!==null&&ce!==void 0?ce:0;fe=kye({barGap:A,barCategoryGap:S,bandSize:at!==Te?at:Te,sizeList:Ie[ue],maxBarSize:Ye}),at!==Te&&(fe=fe.map(function(ye){return lt(lt({},ye),{},{position:lt(lt({},ye.position),{},{offset:ye.position.offset-at/2})})}))}var pe=R&&R.type&&R.type.getComposedData;pe&&H.push({props:lt(lt({},pe(lt(lt({},ve),{},{displayedData:Y,props:v,dataKey:X,item:R,bandSize:Te,barPosition:fe,offset:w,stackedData:se,layout:P,dataStartIndex:k,dataEndIndex:C}))),{},Zt(Zt(Zt({key:R.key||"item-".concat(D)},I,ve[I]),L,ve[L]),"animationId",_)),childIndex:kse(R,v.children),item:R})}),H},g=function(v,b){var j=v.props,N=v.dataStartIndex,w=v.dataEndIndex,_=v.updateId;if(!o5({props:j}))return null;var k=j.children,C=j.layout,T=j.stackOffset,P=j.data,A=j.reverseStackOrder,S=XO(C),E=S.numericAxisName,O=S.cateAxisName,I=Ga(k,s),L=Iye(P,I,"".concat(E,"Id"),"".concat(O,"Id"),T,A),Z=c.reduce(function(M,X){var ne="".concat(X.axisType,"Map");return lt(lt({},M),{},Zt({},ne,xSe(j,lt(lt({},X),{},{graphicalItems:I,stackGroups:X.axisType===E&&L,dataStartIndex:N,dataEndIndex:w}))))},{}),H=vSe(lt(lt({},Z),{},{props:j,graphicalItems:I}),b==null?void 0:b.legendBBox);Object.keys(Z).forEach(function(M){Z[M]=u(j,Z[M],H,M.replace("Map",""),r)});var R=Z["".concat(O,"Map")],D=gSe(R),Y=m(j,lt(lt({},Z),{},{dataStartIndex:N,dataEndIndex:w,updateId:_,graphicalItems:I,stackGroups:L,offset:H}));return lt(lt({formattedGraphicalItems:Y,graphicalItems:I,offset:H,stackGroups:L},D),Z)},x=function(p){function v(b){var j,N,w;return Qke(this,v),w=rSe(this,v,[b]),Zt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zt(w,"accessibilityManager",new Mke),Zt(w,"handleLegendBBoxUpdate",function(_){if(_){var k=w.state,C=k.dataStartIndex,T=k.dataEndIndex,P=k.updateId;w.setState(lt({legendBBox:_},g({props:w.props,dataStartIndex:C,dataEndIndex:T,updateId:P},lt(lt({},w.state),{},{legendBBox:_}))))}}),Zt(w,"handleReceiveSyncEvent",function(_,k,C){if(w.props.syncId===_){if(C===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(k)}}),Zt(w,"handleBrushChange",function(_){var k=_.startIndex,C=_.endIndex;if(k!==w.state.dataStartIndex||C!==w.state.dataEndIndex){var T=w.state.updateId;w.setState(function(){return lt({dataStartIndex:k,dataEndIndex:C},g({props:w.props,dataStartIndex:k,dataEndIndex:C,updateId:T},w.state))}),w.triggerSyncEvent({dataStartIndex:k,dataEndIndex:C})}}),Zt(w,"handleMouseEnter",function(_){var k=w.getMouseInfo(_);if(k){var C=lt(lt({},k),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var T=w.props.onMouseEnter;Qt(T)&&T(C,_)}}),Zt(w,"triggeredAfterMouseMove",function(_){var k=w.getMouseInfo(_),C=k?lt(lt({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var T=w.props.onMouseMove;Qt(T)&&T(C,_)}),Zt(w,"handleItemMouseEnter",function(_){w.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Zt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Zt(w,"handleMouseMove",function(_){_.persist(),w.throttleTriggeredAfterMouseMove(_)}),Zt(w,"handleMouseLeave",function(_){w.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var C=w.props.onMouseLeave;Qt(C)&&C(k,_)}),Zt(w,"handleOuterEvent",function(_){var k=Nse(_),C=qa(w.props,"".concat(k));if(k&&Qt(C)){var T,P;/.*touch.*/i.test(k)?P=w.getMouseInfo(_.changedTouches[0]):P=w.getMouseInfo(_),C((T=P)!==null&&T!==void 0?T:{},_)}}),Zt(w,"handleClick",function(_){var k=w.getMouseInfo(_);if(k){var C=lt(lt({},k),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var T=w.props.onClick;Qt(T)&&T(C,_)}}),Zt(w,"handleMouseDown",function(_){var k=w.props.onMouseDown;if(Qt(k)){var C=w.getMouseInfo(_);k(C,_)}}),Zt(w,"handleMouseUp",function(_){var k=w.props.onMouseUp;if(Qt(k)){var C=w.getMouseInfo(_);k(C,_)}}),Zt(w,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Zt(w,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseDown(_.changedTouches[0])}),Zt(w,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseUp(_.changedTouches[0])}),Zt(w,"handleDoubleClick",function(_){var k=w.props.onDoubleClick;if(Qt(k)){var C=w.getMouseInfo(_);k(C,_)}}),Zt(w,"handleContextMenu",function(_){var k=w.props.onContextMenu;if(Qt(k)){var C=w.getMouseInfo(_);k(C,_)}}),Zt(w,"triggerSyncEvent",function(_){w.props.syncId!==void 0&&Zj.emit(Qj,w.props.syncId,_,w.eventEmitterSymbol)}),Zt(w,"applySyncEvent",function(_){var k=w.props,C=k.layout,T=k.syncMethod,P=w.state.updateId,A=_.dataStartIndex,S=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)w.setState(lt({dataStartIndex:A,dataEndIndex:S},g({props:w.props,dataStartIndex:A,dataEndIndex:S,updateId:P},w.state)));else if(_.activeTooltipIndex!==void 0){var E=_.chartX,O=_.chartY,I=_.activeTooltipIndex,L=w.state,Z=L.offset,H=L.tooltipTicks;if(!Z)return;if(typeof T=="function")I=T(H,_);else if(T==="value"){I=-1;for(var R=0;R<H.length;R++)if(H[R].value===_.activeLabel){I=R;break}}var D=lt(lt({},Z),{},{x:Z.left,y:Z.top}),Y=Math.min(E,D.x+D.width),M=Math.min(O,D.y+D.height),X=H[I]&&H[I].value,ne=K2(w.state,w.props.data,I),J=H[I]?{x:C==="horizontal"?H[I].coordinate:Y,y:C==="horizontal"?M:H[I].coordinate}:eU;w.setState(lt(lt({},_),{},{activeLabel:X,activeCoordinate:J,activePayload:ne,activeTooltipIndex:I}))}else w.setState(_)}),Zt(w,"renderCursor",function(_){var k,C=w.state,T=C.isTooltipActive,P=C.activeCoordinate,A=C.activePayload,S=C.offset,E=C.activeTooltipIndex,O=C.tooltipAxisBandSize,I=w.getTooltipEventType(),L=(k=_.props.active)!==null&&k!==void 0?k:T,Z=w.props.layout,H=_.key||"_recharts-cursor";return we.createElement(qke,{key:H,activeCoordinate:P,activePayload:A,activeTooltipIndex:E,chartName:r,element:_,isActive:L,layout:Z,offset:S,tooltipAxisBandSize:O,tooltipEventType:I})}),Zt(w,"renderPolarAxis",function(_,k,C){var T=qa(_,"type.axisType"),P=qa(w.state,"".concat(T,"Map")),A=_.type.defaultProps,S=A!==void 0?lt(lt({},A),_.props):_.props,E=P&&P[S["".concat(T,"Id")]];return y.cloneElement(_,lt(lt({},E),{},{className:or(T,E.className),key:_.key||"".concat(k,"-").concat(C),ticks:to(E,!0)}))}),Zt(w,"renderPolarGrid",function(_){var k=_.props,C=k.radialLines,T=k.polarAngles,P=k.polarRadius,A=w.state,S=A.radiusAxisMap,E=A.angleAxisMap,O=Ko(S),I=Ko(E),L=I.cx,Z=I.cy,H=I.innerRadius,R=I.outerRadius;return y.cloneElement(_,{polarAngles:Array.isArray(T)?T:to(I,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(P)?P:to(O,!0).map(function(D){return D.coordinate}),cx:L,cy:Z,innerRadius:H,outerRadius:R,key:_.key||"polar-grid",radialLines:C})}),Zt(w,"renderLegend",function(){var _=w.state.formattedGraphicalItems,k=w.props,C=k.children,T=k.width,P=k.height,A=w.props.margin||{},S=T-(A.left||0)-(A.right||0),E=E9({children:C,formattedGraphicalItems:_,legendWidth:S,legendContent:d});if(!E)return null;var O=E.item,I=qO(E,Gke);return y.cloneElement(O,lt(lt({},I),{},{chartWidth:T,chartHeight:P,margin:A,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Zt(w,"renderTooltip",function(){var _,k=w.props,C=k.children,T=k.accessibilityLayer,P=$a(C,Qn);if(!P)return null;var A=w.state,S=A.isTooltipActive,E=A.activeCoordinate,O=A.activePayload,I=A.activeLabel,L=A.offset,Z=(_=P.props.active)!==null&&_!==void 0?_:S;return y.cloneElement(P,{viewBox:lt(lt({},L),{},{x:L.left,y:L.top}),active:Z,label:I,payload:Z?O:[],coordinate:E,accessibilityLayer:T})}),Zt(w,"renderBrush",function(_){var k=w.props,C=k.margin,T=k.data,P=w.state,A=P.offset,S=P.dataStartIndex,E=P.dataEndIndex,O=P.updateId;return y.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Px(w.handleBrushChange,_.props.onChange),data:T,x:bt(_.props.x)?_.props.x:A.left,y:bt(_.props.y)?_.props.y:A.top+A.height+A.brushBottom-(C.bottom||0),width:bt(_.props.width)?_.props.width:A.width,startIndex:S,endIndex:E,updateId:"brush-".concat(O)})}),Zt(w,"renderReferenceElement",function(_,k,C){if(!_)return null;var T=w,P=T.clipPathId,A=w.state,S=A.xAxisMap,E=A.yAxisMap,O=A.offset,I=_.type.defaultProps||{},L=_.props,Z=L.xAxisId,H=Z===void 0?I.xAxisId:Z,R=L.yAxisId,D=R===void 0?I.yAxisId:R;return y.cloneElement(_,{key:_.key||"".concat(k,"-").concat(C),xAxis:S[H],yAxis:E[D],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:P})}),Zt(w,"renderActivePoints",function(_){var k=_.item,C=_.activePoint,T=_.basePoint,P=_.childIndex,A=_.isRange,S=[],E=k.props.key,O=k.item.type.defaultProps!==void 0?lt(lt({},k.item.type.defaultProps),k.item.props):k.item.props,I=O.activeDot,L=O.dataKey,Z=lt(lt({index:P,dataKey:L,cx:C.x,cy:C.y,r:4,fill:CC(k.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Ht(I,!1)),Oy(I));return S.push(v.renderActiveDot(I,Z,"".concat(E,"-activePoint-").concat(P))),T?S.push(v.renderActiveDot(I,lt(lt({},Z),{},{cx:T.x,cy:T.y}),"".concat(E,"-basePoint-").concat(P))):A&&S.push(null),S}),Zt(w,"renderGraphicChild",function(_,k,C){var T=w.filterFormatItem(_,k,C);if(!T)return null;var P=w.getTooltipEventType(),A=w.state,S=A.isTooltipActive,E=A.tooltipAxis,O=A.activeTooltipIndex,I=A.activeLabel,L=w.props.children,Z=$a(L,Qn),H=T.props,R=H.points,D=H.isRange,Y=H.baseLine,M=T.item.type.defaultProps!==void 0?lt(lt({},T.item.type.defaultProps),T.item.props):T.item.props,X=M.activeDot,ne=M.hide,J=M.activeBar,ue=M.activeShape,ke=!!(!ne&&S&&Z&&(X||J||ue)),ve={};P!=="axis"&&Z&&Z.props.trigger==="click"?ve={onClick:Px(w.handleItemMouseEnter,_.props.onClick)}:P!=="axis"&&(ve={onMouseLeave:Px(w.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Px(w.handleItemMouseEnter,_.props.onMouseEnter)});var je=y.cloneElement(_,lt(lt({},T.props),ve));function ie(Pe){return typeof E.dataKey=="function"?E.dataKey(Pe.payload):null}if(ke)if(O>=0){var se,z;if(E.dataKey&&!E.allowDuplicatedCategory){var Te=typeof E.dataKey=="function"?ie:"payload.".concat(E.dataKey.toString());se=Py(R,Te,I),z=D&&Y&&Py(Y,Te,I)}else se=R==null?void 0:R[O],z=D&&Y&&Y[O];if(ue||J){var fe=_.props.activeIndex!==void 0?_.props.activeIndex:O;return[y.cloneElement(_,lt(lt(lt({},T.props),ve),{},{activeIndex:fe})),null,null]}if(!ar(se))return[je].concat(sm(w.renderActivePoints({item:T,activePoint:se,basePoint:z,childIndex:O,isRange:D})))}else{var Ie,ce=(Ie=w.getItemByXY(w.state.activeCoordinate))!==null&&Ie!==void 0?Ie:{graphicalItem:je},Ce=ce.graphicalItem,Ye=Ce.item,at=Ye===void 0?_:Ye,pe=Ce.childIndex,ye=lt(lt(lt({},T.props),ve),{},{activeIndex:pe});return[y.cloneElement(at,ye),null,null]}return D?[je,null,null]:[je,null]}),Zt(w,"renderCustomized",function(_,k,C){return y.cloneElement(_,lt(lt({key:"recharts-customized-".concat(C)},w.props),w.state))}),Zt(w,"renderMap",{CartesianGrid:{handler:Fx,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Fx},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Fx},YAxis:{handler:Fx},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((j=b.id)!==null&&j!==void 0?j:ru("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=AM(w.triggeredAfterMouseMove,(N=b.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return aSe(v,p),tSe(v,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,w=j.data,_=j.height,k=j.layout,C=$a(N,Qn);if(C){var T=C.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,A=K2(this.state,w,T,P),S=this.state.tooltipTicks[T].coordinate,E=(this.state.offset.top+_)/2,O=k==="horizontal",I=O?{x:S,y:E}:{y:S,x:E},L=this.state.formattedGraphicalItems.find(function(H){var R=H.item;return R.type.name==="Scatter"});L&&(I=lt(lt({},I),L.props.points[T].tooltipPosition),A=L.props.points[T].tooltipPayload);var Z={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:P,activePayload:A,activeCoordinate:I};this.setState(Z),this.renderCursor(C),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var w,_;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(j){wN([$a(j.children,Qn)],[$a(this.props.children,Qn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=$a(this.props.children,Qn);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return o.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),_=Y0e(w),k={chartX:Math.round(j.pageX-_.left),chartY:Math.round(j.pageY-_.top)},C=w.width/N.offsetWidth||1,T=this.inRange(k.chartX,k.chartY,C);if(!T)return null;var P=this.state,A=P.xAxisMap,S=P.yAxisMap,E=this.getTooltipEventType(),O=JO(this.state,this.props.data,this.props.layout,T);if(E!=="axis"&&A&&S){var I=Ko(A).scale,L=Ko(S).scale,Z=I&&I.invert?I.invert(k.chartX):null,H=L&&L.invert?L.invert(k.chartY):null;return lt(lt({},k),{},{xValue:Z,yValue:H},O)}return O?lt(lt({},k),O):null}},{key:"inRange",value:function(j,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,k=j/w,C=N/w;if(_==="horizontal"||_==="vertical"){var T=this.state.offset,P=k>=T.left&&k<=T.left+T.width&&C>=T.top&&C<=T.top+T.height;return P?{x:k,y:C}:null}var A=this.state,S=A.angleAxisMap,E=A.radiusAxisMap;if(S&&E){var O=Ko(S);return gP({x:k,y:C},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),w=$a(j,Qn),_={};w&&N==="axis"&&(w.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=Oy(this.props,this.handleOuterEvent);return lt(lt({},k),_)}},{key:"addListener",value:function(){Zj.on(Qj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Zj.removeListener(Qj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,w){for(var _=this.state.formattedGraphicalItems,k=0,C=_.length;k<C;k++){var T=_[k];if(T.item===j||T.props.key===j.key||N===so(T.item.type)&&w===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,w=N.left,_=N.top,k=N.height,C=N.width;return we.createElement("defs",null,we.createElement("clipPath",{id:j},we.createElement("rect",{x:w,y:_,height:k,width:C})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,w){var _=HO(w,2),k=_[0],C=_[1];return lt(lt({},N),{},Zt({},k,C.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,w){var _=HO(w,2),k=_[0],C=_[1];return lt(lt({},N),{},Zt({},k,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,w=N.formattedGraphicalItems,_=N.activeItem;if(w&&w.length)for(var k=0,C=w.length;k<C;k++){var T=w[k],P=T.props,A=T.item,S=A.type.defaultProps!==void 0?lt(lt({},A.type.defaultProps),A.props):A.props,E=so(A.type);if(E==="Bar"){var O=(P.data||[]).find(function(H){return L1e(j,H)});if(O)return{graphicalItem:T,payload:O}}else if(E==="RadialBar"){var I=(P.data||[]).find(function(H){return gP(j,H)});if(I)return{graphicalItem:T,payload:I}}else if(g1(T,_)||y1(T,_)||qh(T,_)){var L=__e({graphicalItem:T,activeTooltipItem:_,itemData:S.data}),Z=S.activeIndex===void 0?L:S.activeIndex;return{graphicalItem:lt(lt({},T),{},{childIndex:Z}),payload:qh(T,_)?S.data[L]:T.props.data[L]}}}return null}},{key:"render",value:function(){var j=this;if(!o5(this))return null;var N=this.props,w=N.children,_=N.className,k=N.width,C=N.height,T=N.style,P=N.compact,A=N.title,S=N.desc,E=qO(N,Jke),O=Ht(E,!1);if(P)return we.createElement(kO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement(kN,rf({},O,{width:k,height:C,title:A,desc:S}),this.renderClipPath(),d5(w,this.renderMap)));if(this.props.accessibilityLayer){var I,L;O.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,O.role=(L=this.props.role)!==null&&L!==void 0?L:"application",O.onKeyDown=function(H){j.accessibilityManager.keyboardEvent(H)},O.onFocus=function(){j.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return we.createElement(kO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement("div",rf({className:or("recharts-wrapper",_),style:lt({position:"relative",cursor:"default",width:k,height:C},T)},Z,{ref:function(R){j.container=R}}),we.createElement(kN,rf({},O,{width:k,height:C,title:A,desc:S,style:uSe}),this.renderClipPath(),d5(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Zt(x,"displayName",r),Zt(x,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Zt(x,"getDerivedStateFromProps",function(p,v){var b=p.dataKey,j=p.data,N=p.children,w=p.width,_=p.height,k=p.layout,C=p.stackOffset,T=p.margin,P=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var S=KO(p);return lt(lt(lt({},S),{},{updateId:0},g(lt(lt({props:p},S),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:j,prevWidth:w,prevHeight:_,prevLayout:k,prevStackOffset:C,prevMargin:T,prevChildren:N})}if(b!==v.prevDataKey||j!==v.prevData||w!==v.prevWidth||_!==v.prevHeight||k!==v.prevLayout||C!==v.prevStackOffset||!hf(T,v.prevMargin)){var E=KO(p),O={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},I=lt(lt({},JO(v,j,k)),{},{updateId:v.updateId+1}),L=lt(lt(lt({},E),O),I);return lt(lt(lt({},L),g(lt({props:p},L),v)),{},{prevDataKey:b,prevData:j,prevWidth:w,prevHeight:_,prevLayout:k,prevStackOffset:C,prevMargin:T,prevChildren:N})}if(!wN(N,v.prevChildren)){var Z,H,R,D,Y=$a(N,Gf),M=Y&&(Z=(H=Y.props)===null||H===void 0?void 0:H.startIndex)!==null&&Z!==void 0?Z:P,X=Y&&(R=(D=Y.props)===null||D===void 0?void 0:D.endIndex)!==null&&R!==void 0?R:A,ne=M!==P||X!==A,J=!ar(j),ue=J&&!ne?v.updateId:v.updateId+1;return lt(lt({updateId:ue},g(lt(lt({props:p},v),{},{updateId:ue,dataStartIndex:M,dataEndIndex:X}),v)),{},{prevChildren:N,dataStartIndex:M,dataEndIndex:X})}return null}),Zt(x,"renderActiveDot",function(p,v,b){var j;return y.isValidElement(p)?j=y.cloneElement(p,v):Qt(p)?j=p(v):j=we.createElement(Dp,v),we.createElement(pr,{className:"recharts-active-dot",key:b},j)});var h=y.forwardRef(function(v,b){return we.createElement(x,rf({},v,{ref:b}))});return h.displayName=x.displayName,h},X2=k1({chartName:"LineChart",GraphicalChild:zd,axisComponents:[{axisType:"xAxis",AxisComp:yi},{axisType:"yAxis",AxisComp:vi}],formatAxisMap:TC}),Y2=k1({chartName:"BarChart",GraphicalChild:vo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yi},{axisType:"yAxis",AxisComp:vi}],formatAxisMap:TC}),Z2=k1({chartName:"PieChart",GraphicalChild:al,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:x1},{axisType:"radiusAxis",AxisComp:h1}],formatAxisMap:Gye,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),YO=k1({chartName:"AreaChart",GraphicalChild:bo,axisComponents:[{axisType:"xAxis",AxisComp:yi},{axisType:"yAxis",AxisComp:vi}],formatAxisMap:TC});function Fo({title:e,value:t,color:r="purple"}){const s={purple:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",border:"border-purple-300",value:"from-purple-600 to-purple-500"},blue:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",border:"border-blue-300",value:"from-blue-600 to-blue-500"},green:{bg:"bg-gradient-to-br from-emerald-50 to-emerald-100",border:"border-emerald-300",value:"from-emerald-600 to-emerald-500"},yellow:{bg:"bg-gradient-to-br from-amber-50 to-amber-100",border:"border-amber-300",value:"from-amber-600 to-amber-500"}},a=s[r]||s.purple;return n.jsxs("div",{className:`border-2 p-4 rounded-lg shadow-md ${a.bg} ${a.border} hover:shadow-lg transition`,children:[n.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:e}),n.jsx("p",{className:`text-3xl font-bold bg-gradient-to-r ${a.value} bg-clip-text text-transparent mt-2`,children:t})]})}function ZO({label:e,value:t,color:r="text-gray-900"}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:e}),n.jsx("p",{className:`text-2xl font-bold ${r} mt-2`,children:t})]})}function QO({alert:e}){const t={high:{dot:"bg-red-500",text:"text-red-700",bg:"bg-red-50"},medium:{dot:"bg-yellow-500",text:"text-yellow-700",bg:"bg-yellow-50"},low:{dot:"bg-gray-400",text:"text-gray-700",bg:"bg-gray-50"}},r=t[e==null?void 0:e.severity]||t.low;return n.jsxs("div",{className:`p-4 border border-gray-200 rounded-lg ${r.bg} flex items-start space-x-3`,children:[n.jsx("div",{className:"pt-1",children:n.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${r.dot}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`font-semibold text-sm ${r.text}`,children:e.title||e.message||"Alert"}),e.message&&n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:e.message})]}),e.created_at&&n.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-2",children:new Date(e.created_at).toLocaleDateString()})]})}function jSe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function _Se(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}const a0={Applied:"#9CA3AF",Screening:"#3B82F6",Interview:"#4F46E5",Offer:"#FBBF24",Hired:"#10B981"};function wSe(){const[e,t]=y.useState({}),[r,s]=y.useState({}),[a,i]=y.useState({}),[l,o]=y.useState([]),[c,d]=y.useState(""),[u,f]=y.useState(null),[m,g]=y.useState(!0);if(y.useEffect(()=>{let I=!0;return g(!0),f(null),Promise.allSettled([G.get("/v1/invoices/dashboard/metrics"),G.get("/v1/dashboard/metrics"),G.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(L=>{var ne,J;if(!I)return;const Z=L[0],H=L[1],R=L[2],D=Z.status==="fulfilled"?Z.value.data||{}:{},Y=H.status==="fulfilled"?H.value.data||{}:{};if(s(D),i(Y),R.status==="fulfilled"){const ue=(J=(ne=R.value)==null?void 0:ne.data)==null?void 0:J.logs;o(Array.isArray(ue)?ue:[]),d("")}else o([]),d("Failed to load recruiter workflow activity.");const M={total_jobs_open:Y.total_jobs_open??D.total_jobs_open??0,total_candidates:Y.total_candidates??D.total_candidates??0,interviews_scheduled:Y.interviews_scheduled??D.interviews_scheduled??0,offers_pending:Y.offers_pending??D.offers_pending??0,employees_onboarding:Y.employees_onboarding??D.employees_onboarding??0,revenue_projected:Y.revenue_projected??D.revenue_projected??0,revenue_realized:Y.revenue_realized??D.revenue_realized??0,utilization_rate:Y.utilization_rate??D.utilization_rate??null,time_to_hire_avg:Y.time_to_hire_avg??D.time_to_hire_avg??null,active_employees:Y.active_employees??D.active_employees??0,alerts:(Y.alerts&&Array.isArray(Y.alerts)?Y.alerts:[]).concat(D.alerts&&Array.isArray(D.alerts)?D.alerts:[]),compliance_alerts:Y.compliance_alerts&&Array.isArray(Y.compliance_alerts)?Y.compliance_alerts:D.compliance_alerts&&Array.isArray(D.compliance_alerts)?D.compliance_alerts:[],candidate_intake:Y.candidate_intake??0,candidate_pool:Y.candidate_pool??0,candidates_hired:Y.candidates_hired??0,candidates_on_hold:Y.candidates_on_hold??0,_raw:{dashData:Y,invData:D}};t(M),L.every(ue=>ue.status==="rejected")&&f(new Error("Failed to load metrics from both endpoints"))}).catch(L=>{I&&(console.error("Unexpected dashboard fetch error",L),f(L))}).finally(()=>{I&&g(!1)}),()=>{I=!1}},[]),m)return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((I,L)=>n.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg animate-pulse"},L))}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((I,L)=>n.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg animate-pulse"},L))})]})]});if(u)return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load metrics. Please check the backend or open console for details."})})]});const x=(e==null?void 0:e.candidate_intake)??0,h=(e==null?void 0:e.candidate_pool)??0,p=(e==null?void 0:e.candidates_hired)??0,v=(e==null?void 0:e.candidates_on_hold)??0,b=(e==null?void 0:e.total_jobs_open)??0,j=(e==null?void 0:e.total_candidates)??0,N=(e==null?void 0:e.interviews_scheduled)??0,w=(e==null?void 0:e.active_employees)??0,_=(e==null?void 0:e.revenue_projected)??0,k=(e==null?void 0:e.revenue_realized)??0,C=(e==null?void 0:e.utilization_rate)??null,T=(e==null?void 0:e.time_to_hire_avg)??"N/A",P=(e==null?void 0:e.offers_pending)??0,A=(e==null?void 0:e.employees_onboarding)??0,S=[{stage:"Applied",count:j,fill:a0.Applied},{stage:"Screening",count:Math.round(j*.6),fill:a0.Screening},{stage:"Interview",count:N,fill:a0.Interview},{stage:"Offer",count:P,fill:a0.Offer},{stage:"Hired",count:A,fill:a0.Hired}],E=Array.isArray(e==null?void 0:e.alerts)?e.alerts:[],O=Array.isArray(e==null?void 0:e.compliance_alerts)?e.compliance_alerts:[];return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8 bg-gradient-to-br from-purple-50 via-purple-25 to-purple-50 rounded-lg max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-white",children:"Admin Dashboard"}),n.jsx("p",{className:"text-white/90 mt-2 text-lg",children:"Admin Overview"})]})})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Fo,{title:"Open Jobs",value:b,color:"purple"}),n.jsx(Fo,{title:"Total Candidates",value:j,color:"blue"}),n.jsx(Fo,{title:"Utilization Rate",value:C==null?"N/A":`${Number(C).toFixed(1)}%`,color:"green"}),n.jsx(Fo,{title:"Projected Revenue",value:`${(Number(_)/1e6).toFixed(1)}M`,color:"green"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Fo,{title:"Candidate Intake",value:x,color:"purple"}),n.jsx(Fo,{title:"Candidate Pool",value:h,color:"blue"}),n.jsx(Fo,{title:"Hired",value:p,color:"green"}),n.jsx(Fo,{title:"On Hold",value:v,color:"yellow"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mb-4",children:"Recruitment Funnel"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Y2,{data:S,margin:{top:20,right:30,left:0,bottom:20},children:[n.jsx(tc,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),n.jsx(yi,{dataKey:"stage",stroke:"#6B7280",style:{fontSize:"12px"}}),n.jsx(vi,{stroke:"#6B7280",style:{fontSize:"12px"}}),n.jsx(Qn,{contentStyle:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px"},formatter:I=>[I,"Candidates"]}),n.jsx(vo,{dataKey:"count",radius:[8,8,0,0],children:S.map((I,L)=>n.jsx(Fd,{fill:I.fill},`cell-${L}`))})]})})})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-6",children:"Revenue & Recruitment KPIs"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 pb-6 border-b border-gray-100 mb-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Projected Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:["",Number(_).toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Realized Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-700 mt-2",children:["",Number(k).toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg. Time to Hire"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-2",children:T==="N/A"?"N/A":`${T} days`})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[n.jsx(ZO,{label:"Interviews Scheduled",value:N,color:"text-gray-900"}),n.jsx(ZO,{label:"Offers Pending",value:P,color:"text-amber-600"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Alerts"}),n.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:E.length})]}),E.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No active alerts"}):n.jsxs("div",{className:"space-y-3",children:[E.slice(0,5).map((I,L)=>n.jsx(QO,{alert:I},I.id??L)),E.length>5&&n.jsxs("p",{className:"text-xs text-gray-500 text-center pt-2",children:["+",E.length-5," more"]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Compliance"}),n.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${O.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:O.length})]}),O.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No compliance issues"}):n.jsx("div",{className:"space-y-3",children:O.slice(0,5).map((I,L)=>n.jsx(QO,{alert:I},I.id??L))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Activity Tracking"}),n.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:l.length})]}),c?n.jsx("p",{className:"text-sm text-red-600",children:c}):l.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No recruiter workflow activity yet"}):n.jsx("div",{className:"space-y-3",children:l.slice(0,6).map(I=>n.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:jSe(I.action)}),n.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:_Se(I.timestamp)})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Recruiter: ",I.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Candidate: ",I.candidate_id||"--"," | Job: ",I.job_id||"--"]})]},I.id))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-4",children:"Quick Overview"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Active Employees"}),n.jsx("span",{className:"font-bold text-gray-900",children:w})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Open Jobs"}),n.jsx("span",{className:"font-bold text-gray-900",children:b})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Candidates"}),n.jsx("span",{className:"font-bold text-gray-900",children:j})]}),n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Offers Pending"}),n.jsx("span",{className:"font-bold text-amber-600",children:P})]})]})]})]})]})]})}const NSe=e=>{if(!e)return"No activity yet";const t=new Date,r=new Date(e),s=t-r,a=Math.floor(s/1e3),i=Math.floor(a/60),l=Math.floor(i/60),o=Math.floor(l/24),c=Math.floor(o/7),d=Math.floor(o/30),u=Math.floor(o/365);return a<60?"Just now":i<60?`${i} minute${i!==1?"s":""} ago`:l<24?`${l} hour${l!==1?"s":""} ago`:o===1?"Yesterday":o<7?`${o} days ago`:c<4?`${c} week${c!==1?"s":""} ago`:d<12?`${d} month${d!==1?"s":""} ago`:`${u} year${u!==1?"s":""} ago`},kSe=(e,t,r={})=>t&&t!==e?t:{"Job Created":"Job created","Job Updated":"Job updated","Job Published":"Job published","Job Unpublished":"Job unpublished","Candidate Applied":"Candidate applied","Candidate Added":"Candidate added","Resume Uploaded":"Resume uploaded","Status Changed":r.new_status?`Status changed to ${r.new_status}`:"Status changed","Interview Scheduled":"Interview scheduled","Interview Feedback Submitted":"Interview feedback submitted","Offer Sent":"Offer sent","Offer Accepted":"Offer accepted","Offer Rejected":"Offer rejected"}[e]||e,rU=({lastActivityAt:e,lastActivityType:t,lastActivityRelative:r,description:s,metadata:a,className:i=""})=>{if(!e)return n.jsx("span",{className:`text-gray-400 text-sm ${i}`,children:"No activity yet"});const l=r||NSe(e),o=kSe(t,s,a),c=new Date(e).toLocaleString();return n.jsxs("div",{className:`text-sm ${i}`,title:`${o} on ${c}`,children:[n.jsx("span",{className:"text-gray-900",children:o}),n.jsxs("span",{className:"text-gray-500",children:["  ",l]})]})},SSe=(e,t,r)=>{const s=Number(e);return Number.isFinite(s)?Math.min(r,Math.max(t,Math.trunc(s))):t};function $p({items:e=[],renderCard:t,totalPages:r=1,currentPage:s=1,onPageChange:a,pageSize:i=9,totalRecords:l,loading:o=!1,error:c=null,onRetry:d,emptyMessage:u="No records found.",onPageSizeChange:f,pageSizeOptions:m=[9,18,27],showGoToPage:g=!0,keyExtractor:x,className:h=""}){const p=y.useRef(!0),[v,b]=y.useState(!1),[j,N]=y.useState(String(s||1)),w=Array.isArray(e)?e:[],_=Math.max(1,Number(i)||9),k=Number.isFinite(l)?Number(l):w.length,C=Math.max(1,Number(r)||1),T=C>1&&k>w.length&&w.length<=_,P=y.useMemo(()=>{if(T)return w;const O=(s-1)*_,I=O+_;return w.slice(O,I)},[w,s,_,T]);y.useEffect(()=>{a&&s>C&&a(C)},[s,C,a]),y.useEffect(()=>{if(N(String(s||1)),p.current){p.current=!1;return}b(!0);const O=setTimeout(()=>b(!1),220);return window.scrollTo({top:0,behavior:"smooth"}),()=>clearTimeout(O)},[s]);const A=k>_&&C>1,S=s>1,E=s<C;return o?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:_}).map((O,I)=>n.jsx("div",{className:"h-44 rounded-xl border border-gray-200 bg-white animate-pulse"},`skeleton-${I}`))}):c?n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsx("p",{className:"text-sm text-red-700",children:c}),d?n.jsx("button",{type:"button",onClick:d,className:"mt-3 inline-flex items-center rounded-lg px-4 py-2 text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"Retry"}):null]}):w.length?n.jsxs("div",{className:`space-y-6 ${h}`,children:[n.jsx("div",{className:`transition-all duration-200 ${v?"opacity-0 translate-y-2":"opacity-100 translate-y-0"}`,children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map((O,I)=>n.jsx(we.Fragment,{children:t(O,I)},x?x(O,I):(O==null?void 0:O.id)||`${I}-${s}`))})}),A?n.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",n.jsx("span",{className:"font-semibold",children:s})," of"," ",n.jsx("span",{className:"font-semibold",children:C})," | ",n.jsx("span",{className:"font-semibold",children:k})," total records"]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f?n.jsx("select",{value:_,onChange:O=>f(Number(O.target.value)),className:"rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:m.map(O=>n.jsxs("option",{value:O,children:[O," / page"]},O))}):null,g?n.jsxs("form",{onSubmit:O=>{O.preventDefault(),a&&a(SSe(j,1,C))},className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:C,value:j,onChange:O=>N(O.target.value),className:"w-20 rounded-lg border border-gray-300 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]","aria-label":"Go to page"}),n.jsx("button",{type:"submit",className:"rounded-lg border border-[var(--color-primary)] px-3 py-2 text-sm text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-white transition-colors",children:"Go"})]}):null,n.jsx("button",{type:"button",onClick:()=>a==null?void 0:a(s-1),disabled:!S,className:"h-10 w-10 rounded-full border border-[var(--color-primary)] text-[var(--color-primary)] shadow-sm hover:shadow-md hover:bg-[var(--color-primary)] hover:text-white disabled:border-gray-200 disabled:text-gray-400 disabled:bg-gray-50 disabled:shadow-none transition-all","aria-label":"Previous page",children:""}),n.jsxs("div",{className:"rounded-full bg-emerald-100 px-4 py-2 text-sm font-semibold text-emerald-700 shadow-[0_0_0_3px_rgba(16,185,129,0.18)]",children:[s," / ",C]}),n.jsx("button",{type:"button",onClick:()=>a==null?void 0:a(s+1),disabled:!E,className:"h-10 w-10 rounded-full border border-[var(--color-primary)] text-[var(--color-primary)] shadow-sm hover:shadow-md hover:bg-[var(--color-primary)] hover:text-white disabled:border-gray-200 disabled:text-gray-400 disabled:bg-gray-50 disabled:shadow-none transition-all","aria-label":"Next page",children:""})]})]})}):null]}):n.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-8 text-center text-gray-600",children:u})}const t_=[9,18,27],r_=(e,t)=>{const r=Number(e);return Number.isFinite(r)&&r>0?r:t};function Mp(e,{defaultPage:t=1,defaultLimit:r=9}={}){const s=`${e}:page`,a=`${e}:limit`,[i,l]=y.useState(()=>r_(sessionStorage.getItem(s),t)),[o,c]=y.useState(()=>{const f=r_(sessionStorage.getItem(a),r);return t_.includes(f)?f:r});y.useEffect(()=>{sessionStorage.setItem(s,String(i))},[i,s]),y.useEffect(()=>{sessionStorage.setItem(a,String(o))},[o,a]);const d=f=>{const m=r_(f,r);c(t_.includes(m)?m:r)},u=y.useMemo(()=>t_,[]);return{page:i,setPage:l,limit:o,setLimit:d,pageSizeOptions:u}}function n_(e){return e&&e.trim().split(/\s+/).map(t=>{if(t===t.toUpperCase())return t;const r=t.toLowerCase();return r.length<=3||/[&\/-]/.test(r)?r.toUpperCase():r.charAt(0).toUpperCase()+r.slice(1)}).join(" ")}function eR({status:e}){const t={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-700"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold uppercase ${t[e]||t.draft}`,children:e})}function CSe({skills:e,setSkills:t,suggestions:r=[],onSearch:s}){const[a,i]=y.useState(""),l=r.filter(d=>a&&d.toLowerCase().includes(a.toLowerCase())&&!e.includes(d)),o=d=>{const u=d.trim();u&&(e.includes(u)||t([...e,u]),i(""))},c=d=>{d.key==="Enter"||d.key===","?(d.preventDefault(),o(a.replace(",",""))):d.key==="Backspace"&&!a&&e.length&&t(e.slice(0,-1))};return n.jsxs("div",{children:[n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((d,u)=>n.jsxs("button",{type:"button",onClick:()=>t(e.filter(f=>f!==d)),className:"flex items-center gap-2 bg-indigo-50 text-indigo-800 px-2 py-1 rounded-full text-sm hover:opacity-90 shadow-sm",title:"Click to remove",children:[d," ",n.jsx("span",{className:"text-xs",children:"x"})]},u))}),n.jsx("input",{type:"text",placeholder:"Type skill and press Enter (e.g. React)",value:a,onChange:d=>{i(d.target.value),s==null||s(d.target.value)},onKeyDown:c,onBlur:()=>a&&o(a),className:"w-full p-3 border rounded"}),l.length>0&&n.jsx("div",{className:"border rounded mt-1 bg-white shadow max-h-40 overflow-y-auto z-10 relative",children:l.slice(0,6).map(d=>n.jsx("div",{onMouseDown:()=>o(d),className:"px-3 py-2 cursor-pointer hover:bg-indigo-50 text-sm",children:d},d))})]})}function tR({open:e,onClose:t,title:r,children:s,saving:a}){return e?n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{a||t()}}),n.jsxs("div",{className:"relative bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:r}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-black text-xl",children:"x"})]}),s]})]}):null}function s_(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState([]),[c,d]=y.useState(!0),[u,f]=y.useState([]),[m,g]=y.useState(!1),[x,h]=y.useState([]),[p,v]=y.useState("all"),[b,j]=y.useState("all"),[N,w]=y.useState(!1),[_,k]=y.useState(null),[C,T]=y.useState(null),[P,A]=y.useState([]),[S,E]=y.useState({sender:"",subject:"",body:""}),[O,I]=y.useState(!1),[L,Z]=y.useState(""),[H,R]=y.useState(""),[D,Y]=y.useState(!1),[M,X]=y.useState({title:"",description:"",department:"",location:"",job_type:"",salary_range:"",min_experience:"",max_experience:"",status:"draft",sla_days:""}),[ne,J]=y.useState([]),[ue,ke]=y.useState(!1),[ve,je]=y.useState(""),[ie,se]=y.useState("all"),[z,Te]=y.useState(""),{page:fe,setPage:Ie,limit:ce,setLimit:Ce,pageSizeOptions:Ye}=Mp("jobs:listing"),at=async De=>{var yt;if(!De||De.trim().length===0){A([]);return}try{const ut=await G.get(`/v1/skills/search?q=${De}`);A(((yt=ut.data)==null?void 0:yt.results)||[])}catch(ut){console.error("Skill search failed",ut),A([])}};y.useEffect(()=>{ye(),Pe(),et()},[]),y.useEffect(()=>{if(!e.length){h([]);return}const De=e.map(yt=>{const ut=(u||[]).filter(be=>be.job_id&&String(be.job_id)===String(yt.job_id)),Lt=ut.length>0?ut[0]:null,Yt=Lt?{full_name:Lt.full_name,email:Lt.email,status:Lt.status,public_id:Lt.public_id}:null;return{jobId:yt.id,job_id:yt.job_id,title:yt.title,department:yt.department,status:yt.status,applicantsCount:ut.length,latestCandidate:Yt,lastActivity:yt.last_activity_at,lastActivityType:yt.last_activity_type,lastActivityRelative:yt.last_activity_relative}});h(De)},[e,l,u]);const pe=()=>{X({title:"",description:"",department:"",location:"",job_type:"",salary_range:"",min_experience:"",max_experience:"",apply_by:"",status:"draft",sla_days:""}),J([]),k(null)},ye=async()=>{var De,yt;s(!0),i(null);try{const ut=await G.get("/v1/jobs"),Lt=((De=ut.data)==null?void 0:De.data)||((yt=ut.data)==null?void 0:yt.jobs)||ut.data||[],Yt=(Array.isArray(Lt)?Lt:[]).map(be=>({...be,skills:Array.isArray(be.skills)?be.skills:be.skills?(""+be.skills).split(",").map(nt=>nt.trim()).filter(Boolean):[]}));t(Yt)}catch(ut){console.error("Failed to load jobs",ut),i(ut.message||"Failed to load"),t([])}finally{s(!1)}},Pe=async()=>{var De;d(!0);try{const yt=await G.get("/v1/candidates"),ut=((De=yt.data)==null?void 0:De.data)||yt.data||[];o(Array.isArray(ut)?ut:[])}catch(yt){console.error("Failed to load candidates",yt),o([])}finally{d(!1)}},et=async()=>{var De;g(!0);try{const yt=await G.get("/v1/jobs/submissions");f(((De=yt.data)==null?void 0:De.candidates)||[])}catch(yt){console.error("Failed to load job applications",yt),f([])}finally{g(!1)}},We=()=>{if(!M.title.trim())return alert("Title is required"),!1;if(!M.description.trim())return alert("Description is required"),!1;const De=M.min_experience===""?null:Number(M.min_experience),yt=M.max_experience===""?null:Number(M.max_experience);return De!=null&&yt!=null&&De>yt?(alert("Min experience cannot be greater than Max experience."),!1):De!=null&&De<0?(alert("Min experience cannot be negative"),!1):yt!=null&&yt<0?(alert("Max experience cannot be negative"),!1):Array.isArray(ne)?!0:(alert("Skills invalid"),!1)},qe=async De=>{var ut,Lt;if(De.preventDefault(),!We())return;const yt={...M,skills:ne,min_experience:M.min_experience===""?null:Number(M.min_experience),max_experience:M.max_experience===""?null:Number(M.max_experience),sla_days:M.sla_days===""?null:Number(M.sla_days)};try{ke(!0),_?(await G.put(`/v1/jobs/${_.id}`,yt),alert("Job updated")):(await G.post("/v1/jobs",yt),alert("Job created")),pe(),w(!1),await ye()}catch(Yt){console.error("Save job error",Yt),alert(((Lt=(ut=Yt.response)==null?void 0:ut.data)==null?void 0:Lt.detail)||Yt.message||"Error saving job")}finally{ke(!1)}},ot=De=>{k(De),X({title:De.title||"",description:De.description||"",department:De.department||"",location:De.location||"",job_type:De.job_type||"",salary_range:De.salary_range||"",min_experience:De.min_experience??"",max_experience:De.max_experience??"",apply_by:De.apply_by?De.apply_by.slice(0,10):"",status:De.status||"draft"}),J(De.skills||[]),w(!0)},Ct=async De=>{var yt,ut;if(confirm(`Close job "${De.title}"? This will archive it.`))try{await G.post(`/v1/jobs/${De.id}/close`),await ye()}catch(Lt){console.error("Close job error",Lt),alert(((ut=(yt=Lt.response)==null?void 0:yt.data)==null?void 0:ut.detail)||Lt.message||"Error closing job")}},He=y.useMemo(()=>{const De=new Set;return e.forEach(yt=>(yt.skills||[]).forEach(ut=>ut&&De.add(ut))),Array.from(De).sort()},[e]),mt=e.filter(De=>{if(ie!=="all"&&De.status!==ie)return!1;const yt=ve.trim().toLowerCase();if(yt&&!`${De.title} ${De.description} ${De.department} ${De.location}`.toLowerCase().includes(yt))return!1;if(z){const ut=z.trim().toLowerCase();if(!(De.skills||[]).some(Yt=>Yt.toLowerCase().includes(ut)))return!1}return!0}),rt=Math.max(1,Math.ceil(mt.length/ce));y.useEffect(()=>{fe>rt&&Ie(rt)},[fe,rt,Ie]);const wt=[...mt].sort((De,yt)=>{const ut=new Date(yt.created_at||0),Lt=new Date(De.created_at||0);return ut-Lt}),At=y.useMemo(()=>{const De=new Set(e.map(yt=>yt.status).filter(Boolean));return Array.from(De)},[e]),$t=y.useMemo(()=>{const De=new Set(e.map(yt=>yt.department).filter(Boolean));return Array.from(De)},[e]),Wt=y.useMemo(()=>x.filter(De=>{const yt=p==="all"||!p||De.status===p,ut=b==="all"||!b||(De.department||"").toLowerCase()===b.toLowerCase();return yt&&ut}),[x,p,b]),lr=r||c,sr=async De=>{var yt,ut;if(De.preventDefault(),Z(""),R(""),!S.subject.trim()||!S.body.trim()){R("Subject and body are required to parse a job.");return}I(!0);try{await G.post("/v1/jobs/parse-email",{sender:S.sender||void 0,subject:S.subject,body:S.body}),Z("Job created from email successfully."),E({sender:"",subject:"",body:""}),await ye()}catch(Lt){console.error("Email parsing failed",Lt),R(((ut=(yt=Lt==null?void 0:Lt.response)==null?void 0:yt.data)==null?void 0:ut.detail)||(Lt==null?void 0:Lt.message)||"Failed to parse job from email. Please confirm the format.")}finally{I(!1)}};return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Jobs"}),n.jsx("p",{className:"text-gray-600",children:"Create and manage job postings"})]}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{onClick:()=>{pe(),w(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"+ Create Job"}),n.jsx("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"+ Parse Email"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Jobs & Applicants Overview"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track how many candidates are applying to each open role."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("select",{value:p,onChange:De=>{v(De.target.value)},className:"px-3 py-2 border rounded text-sm",children:[n.jsx("option",{value:"all",children:"All Status"}),At.map(De=>n.jsx("option",{value:De,children:De.toUpperCase()},De))]}),n.jsxs("select",{value:b,onChange:De=>{j(De.target.value)},className:"px-3 py-2 border rounded text-sm",children:[n.jsx("option",{value:"all",children:"All departments"}),$t.map(De=>n.jsx("option",{value:De,children:De},De))]})]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:lr?n.jsx("div",{className:"py-6 text-center text-gray-500 text-sm",children:"Loading job insights..."}):Wt.length===0?n.jsx("div",{className:"py-6 text-center text-gray-500 text-sm",children:"No data available for the current filters."}):n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"S. No."}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Job ID"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Job"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Department"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-center font-medium text-gray-500",children:"Applicants"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Latest Candidate"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Last Activity"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:Wt.map((De,yt)=>{var ut;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-gray-700",children:yt+1}),n.jsx("td",{className:"px-4 py-3 font-mono text-xs text-gray-600",children:De.job_id||De.job_code||De.public_job_id||"--"}),n.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:De.title||"Untitled role"}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:De.department||"--"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(eR,{status:De.status||"draft"})}),n.jsx("td",{className:"px-4 py-3 text-center font-semibold text-indigo-600",children:De.applicantsCount}),n.jsx("td",{className:"px-4 py-3 text-gray-700",children:De.latestCandidate?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:De.latestCandidate.name||De.latestCandidate.email||"Candidate"}),n.jsx("div",{className:"text-xs text-gray-500",children:((ut=De.latestCandidate.status)==null?void 0:ut.replace(/_/g," "))||"status unknown"})]}):n.jsx("span",{className:"text-gray-400",children:"No applicants yet"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(rU,{lastActivityAt:De.lastActivity,lastActivityType:De.lastActivityType,lastActivityRelative:De.lastActivityRelative})})]},De.jobId)})})]})})]}),n.jsx(tR,{open:D,saving:O,onClose:()=>{O||(Y(!1),E({sender:"",subject:"",body:""}),R(""),Z(""))},title:"Create Job from Email",children:n.jsxs("form",{className:"space-y-4",onSubmit:sr,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From"}),n.jsx("input",{type:"email",value:S.sender,onChange:De=>E(yt=>({...yt,sender:De.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-2",placeholder:"example@client.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email subject *"}),n.jsx("input",{type:"text",value:S.subject,onChange:De=>E(yt=>({...yt,subject:De.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-2",placeholder:"Urgent hiring request - Senior React Developer",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email body *"}),n.jsx("textarea",{value:S.body,onChange:De=>E(yt=>({...yt,body:De.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-3 h-48",placeholder:"Paste the requirement email text here...",required:!0})]}),H&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",children:H}),L&&n.jsx("div",{className:"rounded border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-600",children:L}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{type:"button",disabled:O,onClick:()=>{Y(!1),E({sender:"",subject:"",body:""}),R(""),Z("")},className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:O,className:"px-4 py-2 bg-indigo-600 text-white rounded disabled:opacity-60",children:O?"Parsing...":"Parse & Create Job"})]})]})}),n.jsx(tR,{open:N,saving:ue,onClose:()=>{pe(),w(!1)},title:_?"Edit Job":"Create Job",children:n.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Job Title *"}),n.jsx("input",{className:"w-full p-3 border rounded",value:M.title,onChange:De=>X({...M,title:De.target.value}),onBlur:De=>X({...M,title:n_(De.target.value)}),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),n.jsxs("select",{className:"w-full p-3 border rounded",value:M.status,onChange:De=>X({...M,status:De.target.value}),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"closed",children:"Closed"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),n.jsx("textarea",{rows:5,className:"w-full p-3 border rounded",value:M.description,onChange:De=>X({...M,description:De.target.value}),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsx("input",{className:"p-3 border rounded",placeholder:"Department",value:M.department,onChange:De=>X({...M,department:De.target.value}),onBlur:De=>X({...M,department:n_(De.target.value)})}),n.jsx("input",{className:"p-3 border rounded",placeholder:"Location",value:M.location,onChange:De=>X({...M,location:De.target.value}),onBlur:De=>X({...M,location:n_(De.target.value)})}),n.jsxs("select",{className:"p-3 border rounded",value:M.job_type,onChange:De=>X({...M,job_type:De.target.value}),children:[n.jsx("option",{value:"",children:"Job type"}),n.jsx("option",{value:"Full-time",children:"Full-time"}),n.jsx("option",{value:"Remote",children:"Remote"}),n.jsx("option",{value:"Hybrid",children:"Hybrid"})]}),n.jsx("input",{className:"p-3 border rounded",placeholder:"Salary range",value:M.salary_range,onChange:De=>X({...M,salary_range:De.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Date to Apply *"}),n.jsx("input",{type:"date",value:M.apply_by,onChange:De=>X(yt=>({...yt,apply_by:De.target.value})),className:"mt-1 block w-full rounded-md border p-2",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"Min experience",value:M.min_experience??"",onChange:De=>X({...M,min_experience:De.target.value})}),n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"SLA days",value:M.sla_days??"",onChange:De=>X({...M,sla_days:De.target.value})}),n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"Max experience",value:M.max_experience??"",onChange:De=>X({...M,max_experience:De.target.value})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Skills"}),n.jsx(CSe,{skills:ne,setSkills:J,suggestions:P,onSearch:at})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{pe(),w(!1)},className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:ue,className:"px-4 py-2 bg-green-600 text-white rounded",children:ue?"Saving...":_?"Update Job":"Create Job"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("input",{placeholder:"Search by title, dept, location or description",className:"p-3 border rounded w-full",value:ve,onChange:De=>{je(De.target.value),Ie(1)}}),n.jsxs("select",{className:"p-3 border rounded",value:ie,onChange:De=>{se(De.target.value),Ie(1)},children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"closed",children:"Closed"})]})]}),n.jsx("div",{className:"flex items-center gap-3 mt-3 md:mt-0",children:n.jsx("input",{placeholder:"Filter skills (type)",className:"p-3 border rounded",value:z,onChange:De=>{Te(De.target.value),Ie(1)}})})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Quick Filters"}),n.jsx("div",{className:"text-sm text-gray-400",children:"Tap a skill to filter"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[He.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No skills available yet."}):He.slice(0,12).map(De=>n.jsx("button",{onClick:()=>{Te(De),Ie(1)},className:`px-3 py-1 rounded-full text-sm border shadow-sm hover:shadow-md transition ${z===De?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:De},De)),z&&n.jsx("button",{onClick:()=>{Te(""),Ie(1)},className:"px-3 py-1 rounded-full text-sm border bg-gray-50 text-gray-700",children:"Clear"})]})]})]}),n.jsx($p,{items:wt,currentPage:fe,totalPages:rt,onPageChange:Ie,pageSize:ce,onPageSizeChange:De=>{Ce(De),Ie(1)},pageSizeOptions:Ye,totalRecords:wt.length,loading:r,error:a?`Error: ${a}`:null,onRetry:ye,emptyMessage:"No jobs found.",renderCard:De=>n.jsxs("article",{className:"bg-white p-5 rounded-lg shadow hover:shadow-md transition",children:[n.jsxs("div",{className:"flex justify-between items-start gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold",children:De.title}),n.jsx(eR,{status:De.status})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-3",children:De.description}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(De.skills||[]).slice(0,8).map((yt,ut)=>n.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 rounded text-xs",children:yt},`${De.id}-skill-${ut}`))}),n.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:[n.jsxs("span",{children:[De.department?`${De.department}  `:"",De.location]}),n.jsxs("span",{className:"ml-3",children:[De.min_experience!=null?`${De.min_experience} yrs`:"0",De.max_experience?` - ${De.max_experience} yrs`:""]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("button",{onClick:()=>ot(De),className:"text-sm px-3 py-1 bg-blue-600 text-white rounded",children:"Edit"}),n.jsx("button",{onClick:()=>Ct(De),disabled:De.status==="closed",className:"text-sm px-3 py-1 bg-gray-100 rounded hover:bg-gray-200",children:De.status==="closed"?"Closed":"Close"}),n.jsx("button",{onClick:()=>T(C===De.id?null:De.id),className:"text-sm px-3 py-1 bg-white border rounded",children:"Details"})]})]}),C===De.id&&n.jsxs("div",{className:"mt-4 border-t pt-4 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Type:"})," ",De.job_type||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Salary:"})," ",De.salary_range||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Skills:"})," ",(De.skills||[]).join(", ")||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Posted:"})," ",De.created_at?new Date(De.created_at).toLocaleDateString():"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"SLA days:"})," ",De.sla_days??"N/A"]})]})]})})]})}const ASe=e=>e?new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"--",ESe=e=>{const t=o=>String(o).padStart(2,"0"),r=e.getFullYear(),s=t(e.getMonth()+1),a=t(e.getDate()),i=t(e.getHours()),l=t(e.getMinutes());return`${r}-${s}-${a}T${i}:${l}`},gf=e=>String(e??"").trim(),Bc=e=>gf(e).toLowerCase(),rR=e=>gf((e==null?void 0:e.id)||(e==null?void 0:e.job_id)||(e==null?void 0:e.requirement_id)),i0=e=>{var t;return gf((e==null?void 0:e.candidate_id)||(e==null?void 0:e.candidateId)||(e==null?void 0:e.id)||((t=e==null?void 0:e.candidate)==null?void 0:t.id)||(e==null?void 0:e.user_id))},TSe=e=>{switch(e.toLowerCase()){case"scheduled":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"no_show":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"rescheduled":return"bg-orange-100 text-orange-800";case"pending":return"bg-purple-100 text-purple-800";case"confirmed":return"bg-emerald-100 text-emerald-800";case"rejected":return"bg-rose-100 text-rose-800";case"on_hold":return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-700"}},PSe=e=>{switch(e.toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";case"rescheduled":return"Rescheduled";case"pending":return"Pending";case"confirmed":return"Confirmed";case"rejected":return"Rejected";case"on_hold":return"On Hold";default:return e?e.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"Unknown"}};function nR(){const e=(Cl==null?void 0:Cl())||{},t=(e==null?void 0:e.user)||null,r=((e==null?void 0:e.role)||(t==null?void 0:t.role)||localStorage.getItem("role")||"").toLowerCase(),[s]=ea(),[a,i]=y.useState([]),[l,o]=y.useState(""),[c,d]=y.useState([]),[u,f]=y.useState(new Set),[m,g]=y.useState(!1),[x,h]=y.useState(""),[p,v]=y.useState("ai_chat"),[b,j]=y.useState(""),[N,w]=y.useState(""),[_,k]=y.useState(""),[C,T]=y.useState(""),[P,A]=y.useState(!1),[S,E]=y.useState(""),[O,I]=y.useState([]),[L,Z]=y.useState(!1),[H,R]=y.useState(""),[D,Y]=y.useState(0),[M,X]=y.useState({currentPage:1,totalPages:1,totalRecords:0}),{page:ne,setPage:J,limit:ue,setLimit:ke,pageSizeOptions:ve}=Mp("interviews:listing"),je=(s.get("candidate_id")||s.get("candidateId")||"").trim(),ie=(s.get("job_id")||s.get("jobId")||"").trim(),se=(s.get("candidate_name")||s.get("candidateName")||"").trim(),z=(s.get("job_title")||s.get("jobTitle")||"").trim(),[Te,fe]=y.useState(!1),[Ie,ce]=y.useState(""),Ce=!!(je||ie),Ye=!!ie,at=!!Ie,pe=y.useMemo(()=>{if(!ie)return"";const He=Bc(ie),mt=a.find(rt=>Bc(rt==null?void 0:rt.id)===He||Bc(rt==null?void 0:rt.job_id)===He);return rR(mt)||gf(ie)},[a,ie]);y.useEffect(()=>{r!=="candidate"&&ye()},[r]),y.useEffect(()=>{r!=="candidate"&&et()},[r,ne,ue,D]),y.useEffect(()=>{if(!l){d([]),f(new Set),ce(""),h("");return}Pe(l)},[l]),y.useEffect(()=>{fe(!1),ce("")},[je,ie]),y.useEffect(()=>{if(r==="candidate"||Te||!je&&!ie)return;if(!l&&pe){o(pe);return}if(pe&&l!==pe){o(pe);return}if(!je){fe(!0);return}if(!l||m||Bc(x)!==Bc(l))return;const He=c.find(rt=>Bc(i0(rt))===Bc(je));if(!He){ce(""),E("Prefilled candidate was not found in the selected job applicants."),fe(!0);return}const mt=i0(He);if(!mt){ce(""),fe(!0);return}f(new Set([mt])),ce(mt),fe(!0)},[r,Te,je,ie,pe,l,m,x,c]);const ye=async()=>{try{const He=await G.get("/v1/interviews/recruiter/jobs");i(Array.isArray(He.data)?He.data:[])}catch(He){console.error("Failed to load jobs:",He),i([])}},Pe=async He=>{var mt,rt,wt;g(!0),E("");try{const $t=(((mt=(await G.get("/v1/interviews/recruiter/job-applicants",{params:{job_id:He}})).data)==null?void 0:mt.results)||[]).map(Wt=>{const lr=i0(Wt);return{...Wt,candidate_id:lr||gf(Wt==null?void 0:Wt.candidate_id)}}).filter(Wt=>gf(Wt==null?void 0:Wt.candidate_id));d($t)}catch(At){d([]),E(((wt=(rt=At==null?void 0:At.response)==null?void 0:rt.data)==null?void 0:wt.detail)||"Failed to load applicants for this job.")}finally{g(!1),h(He)}},et=async()=>{var He,mt;Z(!0),R("");try{const wt=(await G.get("/v1/interviews/recruiter/list",{params:{page:ne,limit:ue}})).data||{},At=Array.isArray(wt.data)?wt.data:wt.results||[],$t=wt.totalRecords??wt.count??(Array.isArray(At)?At.length:0),Wt=wt.totalPages??Math.max(1,Math.ceil(($t||0)/Math.max(1,ue))),lr=wt.currentPage??ne;I(Array.isArray(At)?At:[]),X({currentPage:lr,totalPages:Wt,totalRecords:$t})}catch(rt){R(((mt=(He=rt==null?void 0:rt.response)==null?void 0:He.data)==null?void 0:mt.detail)||"Failed to load interviews. Please try again."),I([]),X({currentPage:1,totalPages:1,totalRecords:0})}finally{Z(!1)}},We=He=>{at||f(mt=>{const rt=new Set(mt);return rt.has(He)?rt.delete(He):rt.add(He),rt})},qe=()=>{if(at)return;const He=c.map(mt=>i0(mt)).filter(Boolean);u.size===He.length?f(new Set):f(new Set(He))},ot=async()=>{var mt,rt;if(E(""),!l||u.size===0||!b){E("Select job, candidates, and schedule time.");return}if(!p){E("Select an interview type.");return}const He=new Date(b);if(Number.isNaN(He.getTime())){E("Select a valid schedule date and time.");return}if(He<new Date){E("Schedule time must be in the future.");return}if(p==="video"&&!N.trim()){E("Meeting link is required for Google Meet.");return}if(p==="in_person"&&!_.trim()){E("Location is required for in-person interviews.");return}A(!0);try{await G.post("/v1/interviews/recruiter/schedule-bulk",{job_id:l,candidate_ids:Array.from(u),interview_type:p,scheduled_at:new Date(b).toISOString(),meeting_link:p==="video"?N.trim():null,location:p==="in_person"?_.trim():null,contact_person:p==="in_person"?C.trim():null}),f(at?new Set([Ie]):new Set),w(""),k(""),T(""),j(""),await et(),await Pe(l),Y(Date.now())}catch(wt){E(((rt=(mt=wt==null?void 0:wt.response)==null?void 0:mt.data)==null?void 0:rt.detail)||"Failed to schedule interviews. Please try again.")}finally{A(!1)}},Ct=y.useMemo(()=>[...O].sort((He,mt)=>(mt.overall_ai_score||0)-(He.overall_ai_score||0)),[O]);return r==="candidate"?n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"My Interviews"}),n.jsx("p",{className:"text-gray-600",children:"Visit your candidate dashboard to join interviews and submit feedback."})]})}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interviews"}),n.jsx("p",{className:"text-gray-600",children:"Schedule, monitor, and track candidate interviews"})]}),n.jsx("button",{onClick:et,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),H&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:H}),r!=="candidate"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Schedule Interviews"}),Ce&&n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm text-indigo-800",children:["Manual scheduling mode",(se||je)&&n.jsxs("span",{children:[" ","for"," ",n.jsx("span",{className:"font-semibold",children:se||je})]}),(z||ie)&&n.jsxs("span",{children:[" ","on"," ",n.jsx("span",{className:"font-semibold",children:z||ie})]}),"."]}),at&&n.jsx("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:"Candidate selection is auto-locked from workflow context."}),S&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:S}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Job"}),n.jsxs("select",{value:l,onChange:He=>o(He.target.value),disabled:Ye,className:`w-full border rounded px-3 py-2 ${Ye?"bg-gray-50 text-gray-500":""}`,children:[n.jsx("option",{value:"",children:"Select job"}),a.map(He=>{const mt=rR(He);return mt?n.jsx("option",{value:mt,children:He.title||He.job_id||"Untitled Job"},mt):null})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Schedule Date & Time"}),n.jsx("input",{type:"datetime-local",value:b,onChange:He=>j(He.target.value),min:ESe(new Date),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Interview Type"}),n.jsxs("select",{value:p,onChange:He=>v(He.target.value),className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"ai_chat",children:"AI Chat Interview"}),n.jsx("option",{value:"video",children:"Google Meet"}),n.jsx("option",{value:"in_person",children:"In-Person"})]})]}),p==="video"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Meet Link"}),n.jsx("input",{type:"url",value:N,onChange:He=>w(He.target.value),placeholder:"https://meet.google.com/...",className:"w-full border rounded px-3 py-2"})]}),p==="in_person"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Location"}),n.jsx("input",{value:_,onChange:He=>k(He.target.value),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Contact Person"}),n.jsx("input",{value:C,onChange:He=>T(He.target.value),className:"w-full border rounded px-3 py-2"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Applicants"}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Selected: ",u.size]})]}),m?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading applicants..."}):c.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:l?"No applicants found for the selected job.":"Select a job to view applicants."}):n.jsxs("div",{className:"border rounded-lg divide-y",children:[!at&&n.jsxs("div",{className:"p-3 flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:u.size===c.length,onChange:qe}),"Select all (",c.length,")"]}),c.map(He=>{const mt=i0(He);return mt?n.jsxs("label",{className:"p-3 flex items-center gap-3 text-sm",children:[n.jsx("input",{type:"checkbox",checked:u.has(mt),onChange:()=>We(mt),disabled:r==="candidate"||at}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:He.full_name||"Candidate"}),n.jsxs("div",{className:"text-gray-500",children:[He.email," | ",He.phone]})]})]},mt):null})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:ot,disabled:P||!l||u.size===0||!b||!p,className:"px-5 py-2 rounded bg-emerald-600 text-white font-semibold disabled:opacity-60",children:P?"Scheduling...":"Schedule Interview"})})]}),r!=="recruiter"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interview Schedule"}),n.jsx($p,{items:O,totalPages:M.totalPages,currentPage:M.currentPage,onPageChange:J,totalRecords:M.totalRecords,pageSize:ue,onPageSizeChange:He=>{ke(He),J(1)},pageSizeOptions:ve,loading:L,error:H||null,onRetry:et,emptyMessage:"No interviews scheduled.",renderCard:He=>{var mt,rt,wt;return n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-gray-900",children:[((mt=He.candidate)==null?void 0:mt.full_name)||"Candidate"," | ",((rt=He.job)==null?void 0:rt.title)||"Job"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[(wt=He.mode)==null?void 0:wt.replace(/_/g," "),"  ",ASe(He.scheduled_at)]}),He.location?n.jsxs("div",{className:"text-sm text-gray-600",children:["Location: ",He.location]}):null,He.contact_person?n.jsxs("div",{className:"text-sm text-gray-600",children:["Contact: ",He.contact_person]}):null]}),n.jsxs("div",{className:"text-sm text-right",children:[n.jsx("span",{className:`px-3 py-1 rounded-full font-medium ${TSe(He.status||"scheduled")}`,children:PSe(He.status||"scheduled")}),He.overall_ai_score!==null&&He.overall_ai_score!==void 0?n.jsxs("div",{className:"mt-2 text-gray-600",children:["AI Score: ",He.overall_ai_score]}):null]})]})})}})]}),r==="account_manager"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top AI Scores"}),Ct.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No AI scores yet."}):n.jsx("div",{className:"divide-y",children:Ct.slice(0,5).map(He=>{var mt,rt;return n.jsxs("div",{className:"py-3 flex justify-between text-sm",children:[n.jsxs("div",{children:[((mt=He.candidate)==null?void 0:mt.full_name)||"Candidate"," |"," ",((rt=He.job)==null?void 0:rt.title)||"Job"]}),n.jsx("div",{className:"font-semibold",children:He.overall_ai_score??"--"})]},He.id)})})]})]})}const OSe=async e=>G.get(`/v1/interviews/${e}`),RSe=async e=>G.post(`/v1/interviews/${e}/start`),LSe=async e=>G.get(`/v1/interviews/${e}/question`),ISe=async(e,t)=>G.post(`/v1/interviews/${e}/answer`,{answer:t}),FSe=async e=>G.post(`/v1/interviews/${e}/complete`),DSe=async(e,t)=>G.get(`/v1/interview-summary/${e}/${t}`);function $Se(e){const[t,r]=y.useState(null),[s,a]=y.useState(!1),[i,l]=y.useState(null),[o,c]=y.useState([]),[d,u]=y.useState(null),[f,m]=y.useState(0),g=y.useCallback(async()=>{if(e)try{a(!0);const v=await OSe(e);r(v.data)}catch{l("Failed to load interview")}finally{a(!1)}},[e]),x=y.useCallback(async()=>{var v,b;try{a(!0);const j=await RSe(e);(b=(v=j.data)==null?void 0:v.question)!=null&&b.question_text&&(u(j.data.question),c([{type:"question",text:j.data.question.question_text}]),m(1))}catch{l("Failed to start interview")}finally{a(!1)}},[e]),h=y.useCallback(async()=>{var b;const v=await LSe(e);if(!((b=v.data)!=null&&b.question_text)){u(null);return}u(v.data),c(j=>[...j,{type:"question",text:v.data.question_text}]),m(j=>j+1)},[e]),p=y.useCallback(async v=>{var b,j;if(v!=null&&v.trim())try{a(!0),l(null),c(w=>[...w,{type:"answer",text:v}]);const N=await ISe(e,v);if((b=N.data)!=null&&b.feedback&&c(w=>[...w,{type:"feedback",text:Array.isArray(N.data.feedback)?N.data.feedback.join(", "):N.data.feedback}]),(j=N.data)!=null&&j.is_last_question){u(null),await FSe(e),c(w=>[...w,{type:"system",text:" Your interview is completed. Thank you for your time."}]),r(w=>({...w||{},status:"completed"}));try{const w=await DSe(t.candidate_id,t.job_id);r(_=>({..._||{},summary:w.data}))}catch{console.warn("Summary fetch failed, interview already completed")}}else await h()}catch(N){console.error(N),l("Failed to submit answer")}finally{a(!1)}},[e,t,h]);return{interview:t,loading:s,error:i,conversation:o,currentQuestion:d,questionCount:f,loadInterview:g,startInterview:x,answerQuestion:p}}const MSe=async e=>G.post("/v1/ai-video-interviews",e),BSe=async e=>G.post(`/v1/ai-video-interviews/${e}/start`),USe=async(e,t,r,s)=>G.post(`/v1/ai-video-interviews/${e}/answer`,{question_index:t,video_url:r,duration:s}),zSe=async e=>G.post(`/v1/ai-video-interviews/${e}/complete`);function WSe(){const[e,t]=y.useState(null),[r,s]=y.useState([]),[a,i]=y.useState(0),[l,o]=y.useState(!1),[c,d]=y.useState(null),u=y.useCallback(async(x,h)=>{try{o(!0),d(null);const p=await MSe({candidate_id:x,job_id:h,recording_enabled:!0});t(p.data.interview_id),s(p.data.questions||[]),i(0)}catch{d("Failed to create AI video interview")}finally{o(!1)}},[]),f=y.useCallback(async()=>{if(e)try{o(!0),d(null),await BSe(e)}catch{d("Failed to start AI video interview")}finally{o(!1)}},[e]),m=y.useCallback(async(x,h)=>{if(e)try{o(!0),d(null),await USe(e,a,x,h),i(p=>p+1)}catch{d("Failed to submit video answer")}finally{o(!1)}},[e,a]),g=y.useCallback(async()=>{if(e)try{return o(!0),d(null),(await zSe(e)).data}catch{d("Failed to complete AI video interview")}finally{o(!1)}},[e]);return{interviewId:e,questions:r,currentIndex:a,loading:l,error:c,createInterview:u,startInterview:f,submitAnswer:m,completeInterview:g}}const VSe=async e=>G.post("/v1/live-interviews",e),HSe=async e=>G.post(`/v1/live-interviews/${e}/join`),qSe=async e=>G.post(`/v1/live-interviews/${e}/start`),GSe=async e=>G.post(`/v1/live-interviews/${e}/end`),JSe=async(e,t)=>G.post(`/v1/live-interviews/${e}/recording`,{recording_url:t});function KSe(){const[e,t]=y.useState(null),[r,s]=y.useState(null),[a,i]=y.useState(!1),[l,o]=y.useState(!1),[c,d]=y.useState(null),u=y.useCallback(async(h,p)=>{try{o(!0),d(null);const v=await VSe({candidate_id:h,job_id:p,recording_enabled:!0});t(v.data.interview_id),s(v.data.meeting_url),i(v.data.recording_enabled)}catch{d("Failed to create live interview")}finally{o(!1)}},[]),f=y.useCallback(async()=>{if(e)try{o(!0),d(null);const h=await HSe(e);s(h.data.meeting_url),i(h.data.recording_enabled)}catch{d("Failed to join live interview")}finally{o(!1)}},[e]),m=y.useCallback(async()=>{if(e)try{o(!0),d(null),await qSe(e)}catch{d("Failed to start live interview")}finally{o(!1)}},[e]),g=y.useCallback(async()=>{if(e)try{o(!0),d(null),await GSe(e)}catch{d("Failed to end live interview")}finally{o(!1)}},[e]),x=y.useCallback(async h=>{if(!(!e||!a))try{await JSe(e,h)}catch{console.error("Failed to update recording")}},[e,a]);return{interviewId:e,meetingUrl:r,recordingEnabled:a,loading:l,error:c,createInterview:u,joinInterview:f,startInterview:m,endInterview:g,saveRecording:x}}function XSe({interviewId:e,onSaved:t}){const[r,s]=y.useState(5),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState(null);async function u(f){var m,g;if(f.preventDefault(),d(null),!e)return d("Missing interview id");try{o(!0);const x={rating:r,comments:a},h=await G.post(`/v1/interviews/${e}/submit-feedback`,x);t&&t(h.data),s(5),i("")}catch(x){console.error("Feedback save failed",x),d(((g=(m=x==null?void 0:x.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to save feedback")}finally{o(!1)}}return n.jsxs("form",{onSubmit:u,className:"bg-white p-4 rounded shadow",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Leave feedback"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"block text-sm mb-1",children:["Rating: ",r]}),n.jsx("input",{type:"range",min:"1",max:"5",value:r,onChange:f=>s(Number(f.target.value)),className:"w-full"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-1",children:"Comments"}),n.jsx("textarea",{value:a,onChange:f=>i(f.target.value),rows:4,className:"w-full p-2 border rounded",placeholder:"Add any notes for the candidate or hiring team"})]}),c&&n.jsx("p",{className:"text-red-600 text-sm mb-2",children:c}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"submit",disabled:l,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-50",children:l?"Saving...":"Submit Feedback"}),n.jsx("button",{type:"button",onClick:()=>{s(5),i("")},className:"bg-gray-200 px-4 py-2 rounded",children:"Reset"})]})]})}function YSe(){const{id:e}=Or(),t=Tt(),r=ys(),a=new URLSearchParams(r.search).get("mode")||"chat",i=$Se(e),l=WSe(),o=KSe(),[c,d]=y.useState("");y.useEffect(()=>{a==="chat"&&i.loadInterview()},[e,a]);const u=()=>{var g,x,h,p;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-6 rounded shadow mb-4",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"AI Chat Interview"}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Status: ",n.jsx("b",{children:((g=i.interview)==null?void 0:g.status)||"scheduled"})]})]}),((x=i.interview)==null?void 0:x.status)==="completed"&&n.jsx("div",{className:"bg-green-50 text-green-700 p-4 rounded mb-4",children:" Interview completed successfully."}),i.error&&n.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded mb-4",children:i.error}),((h=i.interview)==null?void 0:h.status)==="scheduled"&&n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:n.jsx("button",{onClick:i.startInterview,className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Start Interview"})}),i.conversation.length>0&&n.jsx("div",{className:"bg-white p-6 rounded shadow mb-4 max-h-96 overflow-y-auto",children:i.conversation.map((v,b)=>n.jsx("div",{className:`mb-3 ${v.type==="answer"&&"text-right"}`,children:n.jsxs("div",{className:`inline-block p-3 rounded max-w-xl ${v.type==="question"?"bg-indigo-100":v.type==="answer"?"bg-green-100":"bg-yellow-100"}`,children:[n.jsx("b",{className:"text-sm block mb-1",children:v.type==="question"?"AI":v.type==="answer"?"You":"Feedback"}),v.text]})},b))}),i.currentQuestion&&n.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[n.jsx("textarea",{value:c,onChange:v=>d(v.target.value),className:"w-full border p-3 rounded mb-3",rows:4,placeholder:"Type your answer..."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{i.answerQuestion(c),d("")},className:"bg-green-600 text-white px-6 py-2 rounded",children:"Submit Answer"}),n.jsx("button",{onClick:()=>t("?mode=video"),className:"bg-gray-600 text-white px-6 py-2 rounded",children:"End Interview"})]})]}),((p=i.interview)==null?void 0:p.status)==="completed"&&n.jsx("div",{className:"mt-6",children:n.jsx(XSe,{interviewId:e})})]})},f=()=>n.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Video Interview"}),!l.interviewId&&n.jsx("button",{onClick:()=>{var g,x;return l.createInterview((g=i.interview)==null?void 0:g.candidate_id,(x=i.interview)==null?void 0:x.job_id)},className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Create Video Interview"}),l.interviewId&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mb-4",children:["Question ",l.currentIndex+1," / ",l.questions.length]}),n.jsx("button",{onClick:()=>l.submitAnswer("https://video.url/sample.mp4",60),className:"bg-green-600 text-white px-6 py-2 rounded",children:"Submit Dummy Video"}),l.currentIndex>=l.questions.length&&n.jsx("button",{onClick:()=>t("?mode=live"),className:"bg-gray-600 text-white px-6 py-2 rounded mt-4",children:"Complete Video Interview"})]})]}),m=()=>n.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Live Interview"}),!o.interviewId&&n.jsx("button",{onClick:()=>{var g,x;return o.createInterview((g=i.interview)==null?void 0:g.candidate_id,(x=i.interview)==null?void 0:x.job_id)},className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Create Live Interview"}),o.meetingUrl&&n.jsx("a",{href:o.meetingUrl,target:"_blank",rel:"noreferrer",className:"block mt-4 bg-green-600 text-white px-6 py-2 rounded",children:"Join Meeting"})]});return n.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[a==="chat"&&u(),a==="video"&&f(),a==="live"&&m()]})}function ZSe(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState([]),[a,i]=y.useState(""),[l,o]=y.useState(!0),[c,d]=y.useState(!1),[u,f]=y.useState(null),[m,g]=y.useState(null);y.useEffect(()=>{x()},[]),y.useEffect(()=>{const p=v=>{c||(v.preventDefault(),v.returnValue="You have an ongoing interview. Progress is saved.")};return window.addEventListener("beforeunload",p),()=>window.removeEventListener("beforeunload",p)},[c]);const x=async()=>{var p,v,b,j,N,w,_,k,C;try{const T=await G.post(`/v1/interviews/${e}/start`),P=((p=T.data)==null?void 0:p.transcript)||[],A=[{from:"system",text:"AI Interview Started"},...P.flatMap(E=>[{from:"bot",text:E.question},{from:"user",text:E.answer}])],S=((b=(v=T.data)==null?void 0:v.question)==null?void 0:b.question_text)||((j=T.data)==null?void 0:j.question)||null;S&&A.push({from:"bot",text:S}),f(((N=T.data)==null?void 0:N.session_id)||null),s(A),!S&&((w=T.data)==null?void 0:w.status)==="completed"&&(d(!0),t(`/interviews/${e}/feedback`))}catch(T){const P=((k=(_=T==null?void 0:T.response)==null?void 0:_.data)==null?void 0:k.detail)||"Interview is not available yet.";let A=null;try{const S=await G.get(`/v1/interviews/${e}`);A=((C=S==null?void 0:S.data)==null?void 0:C.scheduled_at)||null}catch{A=null}g({title:"Interview Not Available",message:P,scheduledAt:A})}finally{o(!1)}},h=async()=>{var v,b,j,N;if(!a.trim())return;const p=a;i(""),s(w=>[...w,{from:"user",text:p}]);try{const w=await G.post(`/v1/interviews/${e}/answer`,{answer:p}),_=((b=(v=w.data)==null?void 0:v.next_question)==null?void 0:b.question_text)||((j=w.data)==null?void 0:j.next_question)||"";if(_)s(k=>[...k,{from:"bot",text:_}]);else if((N=w.data)!=null&&N.is_last_question){try{await G.post(`/v1/interviews/${e}/complete`)}catch(k){console.error("Complete interview failed",k)}d(!0),t(`/interviews/${e}/feedback`)}}catch{alert("Failed to submit answer")}};if(l)return n.jsx("h2",{className:"p-6",children:"Checking interview availability..."});if(m){const p=v=>{if(!v)return"Not Scheduled";const b=new Date(v);return Number.isNaN(b.getTime())?"Not Scheduled":b.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};return n.jsx("div",{className:"min-h-screen bg-gray-900/40 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-lg font-bold mb-2",children:m.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:m.message}),m.scheduledAt&&n.jsxs("div",{className:"text-sm text-gray-700 mb-4",children:["Available from:"," ",n.jsx("span",{className:"font-semibold",children:p(m.scheduledAt)})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx("button",{onClick:()=>t("/candidate/dashboard"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back to Dashboard"})})]})})}return n.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AI Interview"}),n.jsx("div",{className:"border rounded p-4 h-[400px] overflow-y-auto bg-gray-50",children:r.map((p,v)=>n.jsx("div",{className:`p-2 my-1 rounded ${p.from==="bot"?"bg-blue-100 text-blue-900":p.from==="user"?"bg-green-100 text-green-900 text-right":"bg-gray-300 text-black text-center"}`,children:p.text},v))}),!c&&n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("input",{value:a,onChange:p=>i(p.target.value),className:"border p-2 flex-1 rounded",placeholder:"Type your answer..."}),n.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Send"})]})]})}const Ii=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e??null:null},el={list:async(e={})=>{const t=await G.get("/v1/employees",{params:e});return Ii(t)},directory:async(e={})=>{try{const t=await G.get("/v1/employees/directory",{params:e});return Ii(t)}catch(t){return console.warn("employeeService.directory: falling back to /v1/employees",t==null?void 0:t.message),el.list(e)}},get:async e=>{if(!e)throw new Error("employeeService.get: id is required");const t=await G.get(`/v1/employees/${e}`);return Ii(t)},create:async e=>{const t=await G.post("/v1/employees",e);return Ii(t)},update:async(e,t)=>{if(!e)throw new Error("employeeService.update: id is required");const r=await G.put(`/v1/employees/${e}`,t);return Ii(r)},remove:async e=>{if(!e)throw new Error("employeeService.remove: id is required");const t=await G.delete(`/v1/employees/${e}`);return Ii(t)},fromCandidate:async(e,t={})=>{if(!e)throw new Error("employeeService.fromCandidate: candidateId is required");const r=await G.post(`/v1/employees/from-candidate/${e}`,t);return Ii(r)},convert:async(e,t={})=>el.fromCandidate(e,t),exit:async(e,t={})=>{if(!e)throw new Error("employeeService.exit: id is required");const r=await G.post(`/v1/employees/${e}/exit`,t);return Ii(r)},addPerformance:async(e,t={})=>{if(!e)throw new Error("employeeService.addPerformance: id is required");const r=await G.post(`/v1/employees/${e}/performance`,t);return Ii(r)},getMyEmployee:async()=>{const e=await G.get("/v1/employees/me");return Ii(e)},resetPassword:async(e,t)=>{if(!e)throw new Error("employeeService.resetPassword: employeeId is required");const r=await G.post(`/v1/employees/${e}/reset-password`,t);return Ii(r)}},Dx=e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??null},Wg={startOnboarding:async(e,t={})=>{const r=await G.post(`/v1/onboarding/${e}/start`,t);return Dx(r)},getTasks:async e=>{const t=await G.get(`/v1/onboarding/${e}`);return Dx(t)},completeTask:async(e,t={})=>{const r=await G.put(`/v1/onboarding/${e}/complete`,t);return Dx(r)},getProgress:async e=>{const t=await G.get(`/v1/onboarding/${e}/progress`);return Dx(t)}};function sR(){const[e,t]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState(null),[l,o]=y.useState(!0),[c,d]=y.useState(!1);y.useEffect(()=>{f()},[]);const u=w=>w?Array.isArray(w)?w:w.data&&Array.isArray(w.data)?w.data:w.items&&Array.isArray(w.items)?w.items:w.employees&&Array.isArray(w.employees)?w.employees:[]:[],f=async()=>{o(!0);try{const w=await el.list(),_=u(w);if(s(_),_.length>0){const k=_[0].id??_[0]._id??_[0].employee_id;i(k),await m(k)}else t([])}catch(w){console.error("Error loading data:",w),s([]),t([])}finally{o(!1)}},m=async w=>{if(!w){t([]);return}o(!0);try{const _=await Wg.getTasks(w),k=Array.isArray(_)?_:(_==null?void 0:_.data)??(_==null?void 0:_.tasks)??[];t(k)}catch(_){console.error("Error loading tasks:",_),t([])}finally{o(!1)}},g=async w=>{i(w),await m(w)},x=async w=>{if(w){if(!a)return alert("Select an employee first.");d(!0);try{await Wg.completeTask(w),await m(a)}catch(_){console.error("Error completing task:",_),alert("Failed to mark task complete.")}finally{d(!1)}}},h=async w=>{if(w&&window.confirm("Start onboarding for this employee?")){d(!0);try{await Wg.startOnboarding(w),await m(w),alert("Onboarding started.")}catch(_){console.error("Error starting onboarding:",_),alert("Failed to start onboarding.")}finally{d(!1)}}},p=w=>({completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800"})[w]||"bg-gray-100 text-gray-800",v=w=>w==="completed"?n.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})}):w==="in_progress"?n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3"})}):n.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01"})});if(l)return n.jsx("div",{className:"p-8",children:"Loading onboarding data..."});const b=e.filter(w=>w.status==="completed").length,j=e.length,N=j>0?b/j*100:0;return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Onboarding Management"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage employee onboarding tasks"})]}),r.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 border border-gray-200 text-center",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No employees to onboard"}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Hire employees to start the onboarding process"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 mb-6 flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employee"}),n.jsx("select",{value:a??"",onChange:w=>g(w.target.value),className:"w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg",children:r.map(w=>{const _=w.id??w._id??w.employee_id;return n.jsxs("option",{value:_,children:[w.employee_code??_," -"," ",w.full_name??w.designation??"No name"," (",w.status,")"]},_)})})]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("button",{onClick:()=>h(a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-60",disabled:c,children:"Start Onboarding"}),n.jsx("button",{onClick:()=>m(a),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:c,children:"Refresh"})]})]}),j>0&&n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Onboarding Progress"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[b," of ",j," tasks completed"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${N}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[N.toFixed(0),"% Complete"]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Onboarding Tasks"})}),e.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("p",{className:"text-gray-600",children:"No onboarding tasks found for this employee"}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Tasks will appear once onboarding is initiated"})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:e.map(w=>n.jsxs("div",{className:"p-6 hover:bg-gray-50 transition flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[n.jsx("div",{className:"mt-1",children:v(w.status)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.title??w.name}),w.documents&&w.documents.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Uploaded Documents:"}),w.documents.map(_=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:[_.category,"  ",_.filename]}),n.jsx("button",{className:"text-blue-600 text-sm hover:underline",onClick:()=>window.open(`/v1/documents/${_.id}/download`,"_blank"),children:"View"})]},_.id))]}),(!w.documents||w.documents.length===0)&&n.jsx("div",{className:"mt-3 text-sm text-red-500 italic",children:"No document uploaded yet"}),w.description&&n.jsx("p",{className:"text-gray-600 mt-1",children:w.description}),n.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(w.status)}`,children:(w.status??"pending").replace("_"," ")}),w.task_type&&n.jsxs("span",{className:"text-sm text-gray-500",children:["Type: ",w.task_type]}),w.due_date&&n.jsxs("span",{className:"text-sm text-gray-500",children:["Due:"," ",new Date(w.due_date).toLocaleDateString()]}),w.completed_at&&n.jsxs("span",{className:"text-sm text-green-600",children:[" Completed"," ",new Date(w.completed_at).toLocaleDateString()]})]})]})]}),n.jsx("div",{className:"ml-4",children:w.status!=="completed"?n.jsx("button",{onClick:()=>x(w.id??w._id),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:c,children:c?"...":"Mark Complete"}):n.jsx("span",{className:"text-green-600 font-semibold",children:"Completed"})})]},w.id??w._id))})]})]})]})}function aR(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState(!0),[i,l]=y.useState(!1),[o,c]=y.useState(null),[d,u]=y.useState(!1),[f,m]=y.useState({exit_reason:"",feedback:"",would_rehire:!0,would_recommend:!0}),[g,x]=y.useState(null),[h,p]=y.useState(""),[v,b]=y.useState({currentPage:1,totalPages:1,totalRecords:0}),{page:j,setPage:N,limit:w,setLimit:_,pageSizeOptions:k}=Mp("employees:listing");y.useEffect(()=>{C()},[j,w,h]);const C=async()=>{a(!0),x(null);try{const R=await el.list({page:j,limit:w,search:h||void 0}),D=Array.isArray(R)?{data:R}:R??{},Y=Array.isArray(D.data)?D.data:D.items??D.employees??[],M=D.totalRecords??D.total??(Array.isArray(Y)?Y.length:0),X=D.totalPages??Math.max(1,Math.ceil((M||0)/Math.max(1,w))),ne=D.currentPage??j;r(Y),b({currentPage:ne,totalPages:X,totalRecords:M})}catch(R){console.error("Error loading employees:",R),x("Failed to load employees"),r([]),b({currentPage:1,totalPages:1,totalRecords:0})}finally{a(!1)}},T=(R,D)=>{D.stopPropagation(),c(R),m({exit_reason:"",feedback:"",would_rehire:!0,would_recommend:!0}),l(!0)},P=async()=>{if(o){if(!f.exit_reason){alert("Please select an exit reason");return}if(!f.feedback||f.feedback.trim().length<10){alert("Please provide detailed feedback (at least 10 characters)");return}u(!0);try{await el.exit(o.id,f),l(!1),alert(`${o.full_name||"Employee"} has been exited.`),c(null),await C()}catch(R){console.error("Error processing exit:",R),alert("Error processing employee exit")}finally{u(!1)}}},A=async R=>{if(!(!R||!R.id)&&confirm(`Start onboarding for ${R.full_name||R.employee_code||"this employee"}?`)){u(!0);try{await Wg.startOnboarding(R.id),alert(`Onboarding started for ${R.full_name||R.employee_code||"employee"}.`),await C()}catch(D){console.error("Error starting onboarding:",D),alert("Failed to start onboarding")}finally{u(!1)}}},S=R=>({active:"bg-emerald-100 text-emerald-800 border-emerald-200",onboarding:"bg-blue-100 text-blue-800 border-blue-200",pending_documents:"bg-amber-100 text-amber-800 border-amber-200",on_leave:"bg-yellow-100 text-yellow-800 border-yellow-200",notice_period:"bg-orange-100 text-orange-800 border-orange-200",exited:"bg-gray-100 text-gray-800 border-gray-200"})[R]||"bg-slate-100 text-slate-800 border-slate-200",E=R=>({active:"Active",onboarding:"Onboarding",pending_documents:"Pending Documents",on_leave:"On Leave",notice_period:"Notice Period",exited:"Exited"})[R]||(R==null?void 0:R.split("_").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1)).join(" "))||"Unknown",O=t,I=R=>{if(!R||R.length===0)return"";const D=["id","employee_code","full_name","email","designation","department","status","join_date","ctc","location"],Y=D.join(",")+`
`,M=R.map(X=>D.map(ne=>{let J=X[ne];return J==null?"":typeof J=="string"?`"${J.replace(/"/g,'""')}"`:`${J}`}).join(","));return Y+M.join(`
`)},L=(R,D)=>{const Y=new Blob([D],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(Y),X=document.createElement("a");X.href=M,X.download=R,document.body.appendChild(X),X.click(),X.remove(),URL.revokeObjectURL(M)},Z=()=>{const R=I(O);if(!R){alert("No data to export");return}L(`employees_filtered_${new Date().toISOString().slice(0,10)}.csv`,R)},H=()=>{const R=I(t);if(!R){alert("No data to export");return}L(`employees_all_${new Date().toISOString().slice(0,10)}.csv`,R)};return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Employee Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage your organization's employees and their lifecycle"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:h,onChange:R=>{p(R.target.value),N(1)},placeholder:"Search by name, code, email or designation",className:"px-3 py-2 border rounded text-sm"}),n.jsx("button",{onClick:C,disabled:s,className:"px-3 py-2 bg-gray-100 rounded hover:bg-gray-200 text-sm",children:"Refresh"}),n.jsxs("div",{className:"relative inline-block",children:[n.jsx("button",{onClick:Z,className:"px-3 py-2 bg-white border rounded text-sm hover:bg-gray-50",title:"Export filtered list as CSV",children:"Export (filtered)"}),n.jsx("button",{onClick:H,className:"ml-2 px-3 py-2 bg-white border rounded text-sm hover:bg-gray-50",title:"Export all employees as CSV",children:"Export (all)"})]}),n.jsx("button",{onClick:()=>e("/employees/directory"),className:"ml-2 px-3 py-2 bg-blue-50 text-blue-700 border rounded text-sm hover:bg-blue-100",children:"Directory"})]})]}),g&&n.jsx("div",{className:"mb-4 text-sm text-red-600",children:g}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:v.totalRecords||t.length})]}),n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1z"})})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:t.filter(R=>R.status==="active").length})]}),n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Onboarding"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.filter(R=>R.status==="onboarding").length})]}),n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10"})})})]})})]}),n.jsx($p,{items:O,totalPages:v.totalPages,currentPage:v.currentPage,onPageChange:N,totalRecords:v.totalRecords,pageSize:w,onPageSizeChange:R=>{_(R),N(1)},pageSizeOptions:k,loading:s,error:g,onRetry:C,emptyMessage:"No employees match your search",renderCard:R=>n.jsxs("article",{className:"bg-white rounded-lg border border-gray-200 p-5 shadow-sm hover:shadow-md transition",onClick:()=>e(`/employees/${R.id}`),children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.full_name||"N/A"}),n.jsx("p",{className:"text-sm text-gray-600",children:R.designation||"Designation not set"})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${S(R.status)}`,children:E(R.status)})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Code:"})," ",n.jsx("span",{className:"font-mono",children:R.employee_code||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Department:"})," ",R.department||"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Join Date:"})," ",R.join_date?new Date(R.join_date).toLocaleDateString():"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"CTC:"})," ",R.ctc?`$${Number(R.ctc).toLocaleString()}`:"N/A"]}),n.jsx("div",{className:"col-span-2 text-gray-600 truncate",children:R.email||R.location||"N/A"})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[R.status!=="onboarding"&&R.status!=="exited"?n.jsx("button",{onClick:D=>{D.stopPropagation(),A(R)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-lg text-white bg-green-500 hover:bg-green-600 shadow-sm transition-colors disabled:bg-gray-300 disabled:text-gray-500",disabled:d,children:"Start Onboarding"}):null,R.status!=="exited"?n.jsx("button",{onClick:D=>{D.stopPropagation(),T(R,D)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-lg text-white bg-red-500 hover:bg-red-600 shadow-sm transition-colors disabled:bg-gray-300 disabled:text-gray-500",disabled:d,children:"Exit"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium text-gray-500 bg-gray-100 rounded-lg border",children:"Exited"})]})]})}),i&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Exit Employee"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Processing exit for: ",n.jsx("strong",{children:o.full_name})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1 text-red-600",children:"Exit Reason *"}),n.jsxs("select",{value:f.exit_reason,onChange:R=>m({...f,exit_reason:R.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Reason"}),n.jsx("option",{value:"resignation",children:"Resignation"}),n.jsx("option",{value:"termination",children:"Termination"}),n.jsx("option",{value:"retirement",children:"Retirement"}),n.jsx("option",{value:"contract_end",children:"Contract End"}),n.jsx("option",{value:"relocation",children:"Relocation"}),n.jsx("option",{value:"personal_reasons",children:"Personal Reasons"}),n.jsx("option",{value:"better_opportunity",children:"Better Opportunity"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1 text-red-600",children:"Exit Interview Feedback *"}),n.jsx("textarea",{value:f.feedback,onChange:R=>m({...f,feedback:R.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:"4",placeholder:"Please provide detailed feedback (minimum 10 characters)",required:!0})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:f.would_rehire,onChange:R=>m({...f,would_rehire:R.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Would you rehire this employee?"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:f.would_recommend,onChange:R=>m({...f,would_recommend:R.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Would employee recommend this company?"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:n.jsx("p",{className:"text-yellow-800 text-sm",children:" This will mark the employee as exited and automatically add them to the Alumni network."})})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:P,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",disabled:d,children:d?"Processing...":"Confirm Exit"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",disabled:d,children:"Cancel"})]})]})})]})}const $x=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e:null},Yc={listForEmployee:async(e,t={})=>{const r=await G.get(`/v1/documents/employees/${e}`,{params:t});return $x(r)},uploadForEmployee:async(e,t,r,s={})=>{const a={headers:{"Content-Type":"multipart/form-data"},...s};s.onUploadProgress&&(a.onUploadProgress=s.onUploadProgress),r.append("category",t);const i=await G.post(`/v1/documents/employees/${e}`,r,a);return $x(i)},download:async e=>{var c,d;const t=await G.get(`/v1/documents/${e}/download`,{responseType:"blob",transformResponse:u=>u}),r=((c=t.headers)==null?void 0:c["content-disposition"])||((d=t.headers)==null?void 0:d["Content-Disposition"])||"",s=/filename\*?=(?:UTF-8'')?([^;\n]+)/i.exec(r),a=s?decodeURIComponent(s[1]):`document_${e}`,i=new Blob([t.data],{type:t.headers["content-type"]||"application/octet-stream"}),l=window.URL.createObjectURL(i),o=document.createElement("a");return o.href=l,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l),!0},remove:async e=>{const t=await G.delete(`/v1/documents/${e}`);return $x(t)},checklist:async e=>{const t=await G.get(`/v1/documents/employees/${e}/checklist`);return $x(t)},checklistForEmployee:async e=>Yc.checklist(e)};function a_(){const e=Tt(),[t,r]=y.useState(null),[s,a]=y.useState(null),[i,l]=y.useState(!0),[o,c]=y.useState("personal"),[d,u]=y.useState([]),[f,m]=y.useState(null),[g,x]=y.useState(!1),[h,p]=y.useState(!1),[v,b]=y.useState(0),[j,N]=y.useState(!1),[w,_]=y.useState(""),[k,C]=y.useState(""),[T,P]=y.useState(!1);y.useEffect(()=>{A()},[]),y.useEffect(()=>{s&&S()},[s,v]);const A=async()=>{l(!0);try{const R=await el.getMyEmployee(),D=(R==null?void 0:R.data)??R;r(D),a(D.id)}catch(R){console.error("My employee load error:",R),r(null)}finally{l(!1)}},S=async()=>{l(!0);try{await Promise.all([E(),O(),I()])}finally{l(!1)}},E=async()=>{try{const R=await el.get(s),D=(R==null?void 0:R.data)??(R==null?void 0:R.employee)??R;r(D)}catch(R){console.error("Employee load error:",R),r(null)}},O=async()=>{try{const R=await Yc.listForEmployee(s),D=Array.isArray(R)?R:(R==null?void 0:R.data)??(R==null?void 0:R.items)??(R==null?void 0:R.documents)??[];u(D)}catch(R){console.error("Document load error:",R),u([])}},I=async()=>{try{const R=Yc.checklist??Yc.checklistForEmployee;if(!R){m(null);return}const D=await R(s),Y=(D==null?void 0:D.data)??D??null;m(Y)}catch(R){console.error("Checklist error:",R),m(null)}},L=async R=>{try{await Yc.download(R)}catch(D){console.error("Download error:",D),alert("Failed to download document")}},Z=async R=>{if(window.confirm("Delete this document?")){x(!0);try{await Yc.remove(R),await O(),await I()}catch(D){console.error("Delete error:",D),alert("Failed to delete document")}finally{x(!1)}}},H=async()=>{var R,D,Y,M;if(!w||!k){alert("Both password fields are required");return}if(w!==k){alert("Passwords do not match");return}try{P(!0),await el.resetPassword(t.id,{password:w,confirm_password:k}),alert("Password reset successfully"),N(!1),_(""),C("")}catch(X){alert(((D=(R=X==null?void 0:X.response)==null?void 0:R.data)==null?void 0:D.detail)||((M=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:M.message)||"Failed to reset password")}finally{P(!1)}};return i?n.jsx("div",{className:"p-8",children:"Loading employee profile..."}):t?n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:()=>e("/employees"),className:"text-blue-600 hover:text-blue-700 flex items-center",children:" Back to Employees"})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.full_name||""}),n.jsx("p",{className:"text-sm text-gray-600",children:t.designation||""}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.employee_code||""})]}),n.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reset Password"})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex space-x-2",children:[["personal","employment","team","documents"].map(R=>n.jsx("button",{onClick:()=>c(R),className:`px-4 py-2 rounded ${o===R?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-200"}`,children:R.charAt(0).toUpperCase()+R.slice(1)},R)),n.jsx("button",{onClick:()=>b(R=>R+1),className:"ml-2 px-3 py-1 text-sm border rounded bg-white hover:bg-gray-50",children:"Refresh"})]})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[o==="personal"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Personal Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:t.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:t.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Join Date"}),n.jsx("p",{className:"text-gray-900",children:t.join_date?new Date(t.join_date).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),n.jsx("p",{className:"text-gray-900",children:t.location||"N/A"})]})]})]}),o==="employment"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Employment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"CTC"}),n.jsxs("p",{className:"text-gray-900",children:["$",t.ctc?Number(t.ctc).toLocaleString():"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Probation End"}),n.jsx("p",{className:"text-gray-900",children:t.probation_end_date?new Date(t.probation_end_date).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Reporting Manager"}),n.jsx("p",{className:"text-gray-900",children:t.reporting_manager_name||t.reporting_manager_id||"N/A"})]})]})]}),o==="team"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Team & Reporting"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Department"}),n.jsx("p",{className:"text-gray-900",children:t.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Team"}),n.jsx("p",{className:"text-gray-900",children:t.team||"N/A"})]})]})]}),o==="documents"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Documents"}),(f==null?void 0:f.checklist)&&n.jsx("div",{className:"mt-3 space-y-3",children:f.checklist.map(R=>n.jsxs("div",{className:"flex items-center justify-between border p-3 rounded",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:R.document_name}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Category: ",R.category]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:R.status==="completed"?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-green-700 font-semibold",children:"Uploaded "}),n.jsx("button",{className:"text-blue-600 text-sm",onClick:()=>L(R.document_id),children:"Download"}),n.jsx("button",{className:"text-red-600 text-sm",onClick:()=>Z(R.document_id),children:"Delete"})]}):n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",className:"text-sm",onChange:D=>{var X;const Y=(X=D.target.files)==null?void 0:X[0];if(!Y)return;const M=new FormData;M.append("file",Y),Yc.uploadForEmployee(s,R.category,M).then(()=>{O(),I()}).catch(()=>alert("Upload failed"))}}),n.jsx("span",{className:"text-red-600 text-sm",children:"Pending"})]})})]},R.category))})]}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-96 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reset Password"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"Email"}),n.jsx("input",{type:"email",value:t.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"New Password"}),n.jsx("input",{type:"password",value:w,onChange:R=>_(R.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),n.jsx("input",{type:"password",value:k,onChange:R=>C(R.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:H,disabled:T,className:"px-4 py-1 bg-red-600 text-white rounded",children:T?"Resetting...":"Reset"})]})]})})]})]}):n.jsx("div",{className:"p-8",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[n.jsx("p",{className:"text-red-800",children:"Employee not found"}),n.jsx("button",{onClick:()=>e("/employees"),className:"mt-4 text-red-600 hover:text-red-700",children:" Back to Employees"})]})})}function iR(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState([]),[i,l]=y.useState(""),[o,c]=y.useState(""),[d,u]=y.useState(""),[f,m]=y.useState(!0),[g,x]=y.useState(!1);y.useEffect(()=>{p()},[]);const h=_=>_?Array.isArray(_)?_:_.items||_.data||_.employees||[]:[],p=async()=>{m(!0);try{const k=await(typeof el.directory=="function"?el.directory:el.list)(),C=h(k);r(C),a(C)}catch(_){console.error("Directory load error:",_),r([]),a([])}finally{m(!1)}};y.useEffect(()=>{let _=[...t];i.trim()&&(_=_.filter(k=>`${k.full_name||""} ${k.email||""} ${k.employee_code||""}`.toLowerCase().includes(i.toLowerCase()))),o&&(_=_.filter(k=>k.department===o)),d&&(_=_.filter(k=>k.status===d)),a(_)},[i,o,d,t]);const v=_=>({active:"bg-green-100 text-green-800",onboarding:"bg-blue-100 text-blue-800",on_leave:"bg-yellow-100 text-yellow-800",notice_period:"bg-orange-100 text-orange-800",exited:"bg-gray-100 text-gray-800"})[_]||"bg-gray-100 text-gray-800",b=[...new Set(t.map(_=>_.department).filter(Boolean))],j=[...new Set(t.map(_=>_.status).filter(Boolean))],N=_=>{const C=[["Employee ID","Full Name","Employee Code","Email","Phone","Designation","Department","Status","Join Date"].join(",")];for(const T of _){const P=[T.id??"",`"${(T.full_name||"").replace(/"/g,'""')}"`,T.employee_code??"",T.email??"",T.phone??"",`"${(T.designation||"").replace(/"/g,'""')}"`,`"${(T.department||"").replace(/"/g,'""')}"`,T.status??"",T.join_date?new Date(T.join_date).toISOString().split("T")[0]:""];C.push(P.join(","))}return C.join(`
`)},w=async({all:_=!1}={})=>{x(!0);try{const C=N(_?t:s),T=new Blob([C],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(T),A=document.createElement("a");A.href=P,A.download=_?`employees_all_${new Date().toISOString().slice(0,10)}.csv`:`employees_filtered_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(A),A.click(),A.remove(),URL.revokeObjectURL(P)}catch(k){console.error("Export error:",k),alert("Failed to export CSV")}finally{x(!1)}};return f?n.jsx("div",{className:"p-8",children:"Loading directory..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Employee Directory"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Browse and search all employees in the organization."}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 mb-8 grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[n.jsx("input",{type:"text",placeholder:"Search by name, code or email...",value:i,onChange:_=>l(_.target.value),className:"px-4 py-2 border rounded-lg col-span-1 md:col-span-2"}),n.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"px-4 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Departments"}),b.map(_=>n.jsx("option",{value:_,children:_},_))]}),n.jsxs("select",{value:d,onChange:_=>u(_.target.value),className:"px-4 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Statuses"}),j.map(_=>n.jsx("option",{value:_,children:_},_))]}),n.jsxs("div",{className:"flex gap-2 md:justify-end",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",onClick:()=>{l(""),c(""),u("")},children:"Reset Filters"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 text-sm",onClick:()=>w({all:!1}),disabled:g||s.length===0,title:"Export filtered results",children:g?"Exporting":`Export Filtered (${s.length})`}),n.jsx("button",{className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 text-sm",onClick:()=>w({all:!0}),disabled:g||t.length===0,title:"Export all employees",children:g?"Exporting":`Export All (${t.length})`})]})]})]}),s.length===0?n.jsx("div",{className:"text-center text-gray-500 mt-10",children:"No employees found."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(_=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200 cursor-pointer hover:shadow-lg transition",onClick:()=>e(`/employees/${_.id}`),children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl font-semibold text-gray-700",children:(_.full_name||"U").charAt(0)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold text-gray-800",children:_.full_name||"Unnamed"}),n.jsx("div",{className:"text-sm text-gray-600",children:_.designation||"No designation"})]})]}),n.jsx("p",{className:"text-gray-500 text-sm mb-3",children:_.department||"No department"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded-full ${v(_.status)}`,children:_.status}),n.jsxs("div",{className:"text-right text-xs text-gray-500",children:[n.jsx("div",{children:_.employee_code}),n.jsx("div",{children:_.join_date?new Date(_.join_date).toLocaleDateString():""})]})]})]},_.id))})]})}function lR(){const[e,t]=y.useState(!0),[r,s]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState(null),c=async()=>{var d;t(!0);try{const u=await G.get("/auth/me"),f=u.data.employee??u.data;o(f);const[m,g]=await Promise.all([G.get("/v1/notifications"),f!=null&&f.id?G.get(`/v1/leaves/balance/${f.id}`):Promise.resolve({data:[]})]),x=((d=m.data)==null?void 0:d.data)??m.data??[],h=Array.isArray(x)?x:x.items??x.data??[];s(h.slice(0,10)),i(g.data??g)}catch(u){console.error("EmployeeDashboard load",u)}finally{t(!1)}};return y.useEffect(()=>{c()},[]),e?n.jsx("div",{className:"p-6",children:"Loading employee dashboard..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("div",{className:"mb-6 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Employee Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Quick access to attendance, leave, payslips and HR alerts"})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Attendance"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View attendance summary and mark your attendance."}),n.jsx("div",{className:"mt-3",children:n.jsx(wr,{to:"/attendance",className:"text-indigo-600",children:"Go to Attendance"})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Leave"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Leave balance and quick actions"}),n.jsxs("div",{className:"mt-3 space-y-2",children:[Array.isArray(a)&&a.length?a.map(d=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{className:"capitalize",children:d.leave_type}),n.jsx("div",{className:"font-semibold",children:d.available??d.available_days??d.available})]},d.leave_type)):n.jsx("div",{className:"text-sm text-gray-500",children:"No leave balance data available."}),n.jsx("div",{className:"mt-3",children:n.jsx(wr,{to:"/leaves",className:"text-indigo-600",children:"Apply / View requests"})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Profile"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View and update your personal details and documents"}),n.jsx("div",{className:"mt-3",children:n.jsx(wr,{to:`/employees/${(l==null?void 0:l.id)??"me"}`,className:"text-indigo-600",children:"Open Profile"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Payslips"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View your salary history and download payslips"}),n.jsx("div",{className:"mt-3",children:n.jsx(wr,{to:"/finance",className:"text-indigo-600",children:"View Payslips"})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Holidays"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View company holidays calendar"}),n.jsx("div",{className:"mt-3",children:n.jsx(wr,{to:"/settings",className:"text-indigo-600",children:"View Holidays"})})]})]}),n.jsxs("section",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Notifications"}),!r.length&&n.jsx("div",{className:"text-gray-600",children:"No notifications"}),n.jsx("div",{className:"space-y-2",children:r.map(d=>{var g;const u=d.id??d.notification_id??Math.random(),f=d.title??d.message??d.summary??"Notification",m=d.created_at??d.timestamp??d.created??Date.now();return n.jsxs("div",{className:"p-2 border rounded flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f}),d.detail&&n.jsx("div",{className:"text-sm text-gray-600",children:d.detail}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(m).toLocaleString()})]}),n.jsx("div",{className:"text-right",children:((g=d.meta)==null?void 0:g.link)&&n.jsx("a",{href:d.meta.link,className:"text-indigo-600",children:"Open"})})]},u)})})]})]})}function Bp(e){if(!e)return"";let t;if(e instanceof Date)t=e;else if(typeof e=="string"||typeof e=="number")t=new Date(e);else return"";if(isNaN(t.getTime()))return"";const r=String(t.getUTCDate()).padStart(2,"0"),s=t.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),a=t.getUTCFullYear();return`${r}-${s}-${a}`}function oR(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState(!1),[c,d]=y.useState({current_company:"",current_designation:"",linkedin_url:"",engagement_score:""});y.useEffect(()=>{u()},[]);const u=async()=>{try{const h=await G.get("/v1/alumni");t(h.data||[]),s(!1)}catch(h){console.error("Error loading alumni:",h),s(!1)}},f=h=>{i(h),d({current_company:h.current_company||"",current_designation:h.current_designation||"",linkedin_url:h.linkedin_url||"",engagement_score:h.engagement_score||""}),o(!0)},m=async()=>{try{await G.put(`/v1/alumni/${a.id}/update`,c),o(!1),u()}catch(h){console.error("Error updating alumni:",h)}},g=async h=>{try{await G.post(`/v1/alumni/${h}/referral`),u()}catch(p){console.error("Error tracking referral:",p)}},x=h=>h?h>=80?{color:"bg-green-100 text-green-800",label:"Highly Engaged"}:h>=60?{color:"bg-blue-100 text-blue-800",label:"Active"}:h>=40?{color:"bg-yellow-100 text-yellow-800",label:"Moderate"}:{color:"bg-red-100 text-red-800",label:"Low Engagement"}:{color:"bg-gray-100 text-gray-600",label:"Not Rated"};return r?n.jsx("div",{className:"text-center py-12",children:"Loading alumni..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Alumni Network"}),n.jsxs("div",{className:"bg-white px-6 py-3 rounded-lg shadow",children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Total Alumni"}),n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:e.length})]})]}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No alumni records found"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Alumni are created when employees exit the organization"})]}):n.jsx("div",{className:"grid gap-6",children:e.map(h=>{var v;const p=x(h.engagement_score);return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:((v=h.employee)==null?void 0:v.full_name)||"Unknown"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Last Designation:"}),n.jsx("span",{className:"ml-2 font-semibold",children:h.last_designation||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Tenure:"}),n.jsxs("span",{className:"ml-2 font-semibold",children:[h.tenure_years||0," years"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Exit Date:"}),n.jsx("span",{className:"ml-2 font-semibold",children:h.exit_date?Bp(h.exit_date):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Referrals Made:"}),n.jsx("span",{className:"ml-2 font-semibold",children:h.referrals_made||0})]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p.color}`,children:p.label}),h.is_eligible_for_rehire&&n.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Eligible for Rehire"})]})]}),h.current_company&&n.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-semibold text-indigo-900 mb-2",children:"Current Position"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Company:"}),n.jsx("span",{className:"ml-2 font-semibold",children:h.current_company})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Designation:"}),n.jsx("span",{className:"ml-2 font-semibold",children:h.current_designation||"N/A"})]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>f(h),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"Update Info"}),n.jsx("button",{onClick:()=>g(h.id),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"Track Referral"}),h.linkedin_url&&n.jsx("a",{href:h.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"LinkedIn Profile"})]})]},h.id)})}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Update Alumni Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Current Company"}),n.jsx("input",{type:"text",value:c.current_company,onChange:h=>d({...c,current_company:h.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Current Designation"}),n.jsx("input",{type:"text",value:c.current_designation,onChange:h=>d({...c,current_designation:h.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"LinkedIn URL"}),n.jsx("input",{type:"text",value:c.linkedin_url,onChange:h=>d({...c,linkedin_url:h.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Engagement Score (0-100)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:c.engagement_score,onChange:h=>d({...c,engagement_score:parseFloat(h.target.value)}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:m,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Update"}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function cR(){const[e,t]=y.useState("invoices"),[r,s]=y.useState(!0),[a,i]=y.useState([]),[l,o]=y.useState("all"),[c,d]=y.useState(!1),[u,f]=y.useState({total_revenue:0,pending_amount:0,paid_amount:0}),[m,g]=y.useState({client_name:"",amount:"",placements:[],due_date:""}),[x,h]=y.useState([]),[p,v]=y.useState(null),[b,j]=y.useState([]),[N,w]=y.useState({}),[_,k]=y.useState(!1),[C,T]=y.useState({month:new Date().getMonth()+1,year:new Date().getFullYear()}),[P,A]=y.useState([]),[S,E]=y.useState([]),[O,I]=y.useState([]),[L,Z]=y.useState(!1),[H,R]=y.useState(!1),[D,Y]=y.useState({employee_id:"",basic_salary:"",hra:"",transport_allowance:"",medical_allowance:"",special_allowance:""}),[M,X]=y.useState({employee_id:"",deduction_type:"tax",amount:"",description:"",is_percentage:!1});y.useEffect(()=>{e==="invoices"?ne():e==="payroll"?J():e==="salaries"&&ue()},[e,l]);const ne=async()=>{try{const fe=l!=="all"?{status:l}:{},ce=(await G.get("/v1/invoices",{params:fe})).data||[];i(ce);const Ce=ce.reduce((pe,ye)=>pe+(ye.amount||0),0),Ye=ce.filter(pe=>pe.status==="paid").reduce((pe,ye)=>pe+(ye.amount||0),0),at=Ce-Ye;f({total_revenue:Ce,pending_amount:at,paid_amount:Ye}),s(!1)}catch(fe){console.error("Error loading invoices:",fe),s(!1)}},J=async()=>{try{const[fe,Ie]=await Promise.all([G.get("/v1/payroll/runs"),G.get("/v1/payroll/dashboard/metrics")]);h(fe.data||[]),w(Ie.data||{}),s(!1)}catch(fe){console.error("Error loading payroll:",fe),s(!1)}},ue=async()=>{try{const[fe,Ie,ce]=await Promise.all([G.get("/v1/employees"),G.get("/v1/payroll/salaries"),G.get("/v1/payroll/deductions")]);A(fe.data||[]),E(Ie.data||[]),I(ce.data||[]),s(!1)}catch(fe){console.error("Error loading salary data:",fe),s(!1)}},ke=async()=>{try{await G.post("/v1/invoices",{...m,amount:parseFloat(m.amount),placements:[]}),d(!1),g({client_name:"",amount:"",placements:[],due_date:""}),ne()}catch(fe){console.error("Error creating invoice:",fe)}},ve=async(fe,Ie)=>{try{await G.put(`/v1/invoices/${fe}/status?status=${Ie}`),ne()}catch(ce){console.error("Error updating invoice status:",ce)}},je=async()=>{var fe,Ie;try{await G.post("/v1/payroll/runs",null,{params:{month:C.month,year:C.year}}),k(!1),J()}catch(ce){console.error("Error creating payroll run:",ce),alert(((Ie=(fe=ce.response)==null?void 0:fe.data)==null?void 0:Ie.detail)||"Error creating payroll run")}},ie=async fe=>{try{const Ie=await G.get(`/v1/payroll/payslips/${fe}`);j(Ie.data||[]),v(fe)}catch(Ie){console.error("Error loading payslips:",Ie)}},se=async()=>{try{await G.post("/v1/payroll/salaries",null,{params:{employee_id:D.employee_id,basic_salary:parseFloat(D.basic_salary),hra:parseFloat(D.hra)||0,transport_allowance:parseFloat(D.transport_allowance)||0,medical_allowance:parseFloat(D.medical_allowance)||0,special_allowance:parseFloat(D.special_allowance)||0}}),Z(!1),Y({employee_id:"",basic_salary:"",hra:"",transport_allowance:"",medical_allowance:"",special_allowance:""}),ue()}catch(fe){console.error("Error creating salary:",fe)}},z=async()=>{try{await G.post("/v1/payroll/deductions",null,{params:{employee_id:M.employee_id,deduction_type:M.deduction_type,amount:parseFloat(M.amount),description:M.description,is_percentage:M.is_percentage,is_recurring:!0}}),R(!1),X({employee_id:"",deduction_type:"tax",amount:"",description:"",is_percentage:!1}),ue()}catch(fe){console.error("Error creating deduction:",fe)}},Te=fe=>{const Ie={draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",pending:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700"};return Ie[fe]||Ie.draft};return r?n.jsx("div",{className:"text-center py-12",children:"Loading finance data..."}):n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold",children:"Finance Management"})}),n.jsx("div",{className:"bg-white p-2 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>t("invoices"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="invoices"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Invoices"}),n.jsx("button",{onClick:()=>t("payroll"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="payroll"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Payroll Runs"}),n.jsx("button",{onClick:()=>t("salaries"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="salaries"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Salaries & Deductions"})]})}),e==="invoices"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx("button",{onClick:()=>d(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Invoice"})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Revenue"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.total_revenue.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Paid Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.paid_amount.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.pending_amount.toLocaleString()]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:n.jsx("div",{className:"flex gap-3",children:["all","draft","sent","paid","overdue"].map(fe=>n.jsx("button",{onClick:()=>o(fe),className:`px-4 py-2 rounded capitalize ${l===fe?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:fe==="all"?"All Invoices":fe},fe))})}),a.length===0?n.jsx("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"No invoices found"})}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(fe=>{var Ie;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:fe.invoice_number}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:fe.client_name}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:["$",(Ie=fe.amount)==null?void 0:Ie.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:fe.due_date?new Date(fe.due_date).toLocaleDateString():"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Te(fe.status)}`,children:fe.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[fe.status==="draft"&&n.jsx("button",{onClick:()=>ve(fe.id,"sent"),className:"text-blue-600 hover:text-blue-900",children:"Send"}),fe.status==="sent"&&n.jsx("button",{onClick:()=>ve(fe.id,"paid"),className:"text-green-600 hover:text-green-900",children:"Mark Paid"})]})})]},fe.id)})})]})})]}),e==="payroll"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx("button",{onClick:()=>k(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Payroll Run"})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Employees"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:N.total_employees||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Monthly Payroll"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(N.total_monthly_payroll||0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Payments"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:N.pending_payments||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(N.pending_amount||0).toLocaleString()]})]})]}),x.length===0?n.jsx("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"No payroll runs found"})}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Period"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(fe=>{var Ie,ce,Ce;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:fe.period_display}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:fe.total_employees}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["$",(Ie=fe.total_gross)==null?void 0:Ie.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["$",(ce=fe.total_deductions)==null?void 0:ce.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:["$",(Ce=fe.total_net)==null?void 0:Ce.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Te(fe.status)}`,children:fe.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsx("button",{onClick:()=>ie(fe.id),className:"text-indigo-600 hover:text-indigo-900",children:"View Payslips"})})]},fe.id)})})]})}),p&&b.length>0&&n.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payslips"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Basic"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"HRA"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(fe=>{var Ie,ce,Ce,Ye,at;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-4 py-3 text-sm",children:[n.jsx("div",{className:"font-medium",children:fe.employee_name}),n.jsx("div",{className:"text-gray-500 text-xs",children:fe.designation})]}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:["$",(Ie=fe.basic_salary)==null?void 0:Ie.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:["$",(ce=fe.hra)==null?void 0:ce.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",children:["$",(Ce=fe.gross_salary)==null?void 0:Ce.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-red-600",children:["$",(Ye=fe.total_deductions)==null?void 0:Ye.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-green-600",children:["$",(at=fe.net_salary)==null?void 0:at.toLocaleString()]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Te(fe.payment_status)}`,children:fe.payment_status})})]},fe.id)})})]})})]})]}),e==="salaries"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-end gap-3 mb-4",children:[n.jsx("button",{onClick:()=>Z(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Add Salary"}),n.jsx("button",{onClick:()=>R(!0),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition",children:"Add Deduction"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[n.jsx("div",{className:"px-6 py-4 border-b",children:n.jsx("h2",{className:"text-xl font-bold",children:"Employee Salaries"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Basic"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"HRA"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transport"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Medical"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(fe=>{var Ie,ce,Ce,Ye,at;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 text-sm",children:[n.jsx("div",{className:"font-medium",children:fe.employee_name}),n.jsx("div",{className:"text-gray-500 text-xs",children:fe.designation})]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(Ie=fe.basic_salary)==null?void 0:Ie.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(ce=fe.hra)==null?void 0:ce.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(Ce=fe.transport_allowance)==null?void 0:Ce.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(Ye=fe.medical_allowance)==null?void 0:Ye.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:["$",(at=fe.gross_salary)==null?void 0:at.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${fe.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:fe.is_active?"Active":"Inactive"})})]},fe.id)})})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"px-6 py-4 border-b",children:n.jsx("h2",{className:"text-xl font-bold",children:"Deductions"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recurring"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(fe=>{var Ie;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:fe.employee_name}),n.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:fe.deduction_type.replace("_"," ")}),n.jsx("td",{className:"px-6 py-4 text-sm",children:fe.description||"-"}),n.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-red-600",children:fe.is_percentage?`${fe.amount}%`:`$${(Ie=fe.amount)==null?void 0:Ie.toLocaleString()}`}),n.jsx("td",{className:"px-6 py-4 text-sm",children:fe.is_recurring?"Yes":"No"})]},fe.id)})})]})})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Invoice"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Client Name"}),n.jsx("input",{type:"text",value:m.client_name,onChange:fe=>g({...m,client_name:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Amount ($)"}),n.jsx("input",{type:"number",value:m.amount,onChange:fe=>g({...m,amount:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Due Date"}),n.jsx("input",{type:"date",value:m.due_date,onChange:fe=>g({...m,due_date:fe.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:ke,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Payroll Run"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Month"}),n.jsx("select",{value:C.month,onChange:fe=>T({...C,month:parseInt(fe.target.value)}),className:"w-full p-2 border rounded",children:Array.from({length:12},(fe,Ie)=>n.jsx("option",{value:Ie+1,children:new Date(2e3,Ie).toLocaleString("default",{month:"long"})},Ie+1))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Year"}),n.jsx("input",{type:"number",value:C.year,onChange:fe=>T({...C,year:parseInt(fe.target.value)}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:je,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Run"}),n.jsx("button",{onClick:()=>k(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),L&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add Employee Salary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:D.employee_id,onChange:fe=>Y({...D,employee_id:fe.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),P.map(fe=>n.jsxs("option",{value:fe.id,children:[fe.full_name," - ",fe.employee_code]},fe.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Basic Salary ($)"}),n.jsx("input",{type:"number",value:D.basic_salary,onChange:fe=>Y({...D,basic_salary:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"HRA ($)"}),n.jsx("input",{type:"number",value:D.hra,onChange:fe=>Y({...D,hra:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Transport Allowance ($)"}),n.jsx("input",{type:"number",value:D.transport_allowance,onChange:fe=>Y({...D,transport_allowance:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Medical Allowance ($)"}),n.jsx("input",{type:"number",value:D.medical_allowance,onChange:fe=>Y({...D,medical_allowance:fe.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:se,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Add Salary"}),n.jsx("button",{onClick:()=>Z(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),H&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add Deduction"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:M.employee_id,onChange:fe=>X({...M,employee_id:fe.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),P.map(fe=>n.jsxs("option",{value:fe.id,children:[fe.full_name," - ",fe.employee_code]},fe.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Type"}),n.jsxs("select",{value:M.deduction_type,onChange:fe=>X({...M,deduction_type:fe.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"tax",children:"Tax"}),n.jsx("option",{value:"provident_fund",children:"Provident Fund"}),n.jsx("option",{value:"insurance",children:"Insurance"}),n.jsx("option",{value:"loan",children:"Loan Repayment"}),n.jsx("option",{value:"advance",children:"Advance Recovery"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Amount"}),n.jsx("input",{type:"number",value:M.amount,onChange:fe=>X({...M,amount:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Description"}),n.jsx("input",{type:"text",value:M.description,onChange:fe=>X({...M,description:fe.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:M.is_percentage,onChange:fe=>X({...M,is_percentage:fe.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Is Percentage of Gross Salary"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:z,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Add Deduction"}),n.jsx("button",{onClick:()=>R(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function dR(){const[e,t]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState(!1),[l,o]=y.useState(!0),[c,d]=y.useState(null),u=localStorage.getItem("role"),[f,m]=y.useState({leave_type:"casual",start_date:"",end_date:"",reason:""});y.useEffect(()=>{g()},[]);const g=async()=>{try{const b=await G.get("/auth/me");d(b.data.employee),b.data.employee?x(b.data.employee.id):o(!1)}catch(b){console.error("Error loading user:",b),o(!1)}},x=async b=>{try{const[j,N]=await Promise.all([G.get("/v1/leaves"),G.get(`/v1/leaves/balance/${b}`)]);t(j.data),s(N.data),o(!1)}catch(j){console.error("Error loading data:",j),o(!1)}},h=async b=>{var j,N;if(b.preventDefault(),!c){alert("Employee profile not found. Please contact administrator.");return}try{await G.post("/v1/leaves",{employee_id:c.id,...f}),i(!1),m({leave_type:"casual",start_date:"",end_date:"",reason:""}),x(c.id)}catch(w){console.error("Error submitting leave:",w),alert(((N=(j=w.response)==null?void 0:j.data)==null?void 0:N.detail)||"Error submitting leave request")}},p=async(b,j)=>{try{await G.put(`/v1/leaves/${b}/approve`,{status:j,rejection_reason:j==="rejected"?"Not approved":null}),c&&x(c.id)}catch(N){console.error("Error updating leave:",N)}},v=b=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[b]||"bg-gray-100 text-gray-800";return l?n.jsx("div",{className:"p-8",children:"Loading..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Leave Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage employee leave requests and balances"})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"+ Request Leave"})]}),n.jsx("div",{className:"grid grid-cols-3 gap-6 mb-8",children:r.map(b=>n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[b.leave_type," Leave"]}),n.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:b.available})})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Allocated:"}),n.jsxs("span",{className:"font-medium",children:[b.total_allocated," days"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Used:"}),n.jsxs("span",{className:"font-medium",children:[b.used," days"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Available:"}),n.jsxs("span",{className:"font-bold text-green-600",children:[b.available," days"]})]})]})]},b.leave_type))}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Request Leave"}),n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Leave Type"}),n.jsxs("select",{value:f.leave_type,onChange:b=>m({...f,leave_type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"casual",children:"Casual Leave"}),n.jsx("option",{value:"sick",children:"Sick Leave"}),n.jsx("option",{value:"earned",children:"Earned Leave"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),n.jsx("input",{type:"date",value:f.start_date,onChange:b=>m({...f,start_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),n.jsx("input",{type:"date",value:f.end_date,onChange:b=>m({...f,end_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason"}),n.jsx("textarea",{value:f.reason,onChange:b=>m({...f,reason:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"3",required:!0})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Submit Request"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Leave Requests"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u==="admin"&&n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm",children:b.employee_name||"Employee"}),n.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:b.leave_type}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:[new Date(b.start_date).toLocaleDateString()," - ",new Date(b.end_date).toLocaleDateString()]}),n.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:b.days_count}),n.jsx("td",{className:"px-6 py-4 text-sm",children:b.reason}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v(b.status)}`,children:b.status})}),u==="admin"&&b.status==="pending"&&n.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[n.jsx("button",{onClick:()=>p(b.id,"approved"),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),n.jsx("button",{onClick:()=>p(b.id,"rejected"),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"})]})]},b.id))})]})})]})]})}function uR(){const[e,t]=y.useState(!0),[r,s]=y.useState([]),[a,i]=y.useState(null),l=async()=>{var c;t(!0),i(null);try{const d=await G.get("/v1/attendance/me");s(((c=d.data)==null?void 0:c.data)??d.data??[])}catch{i("Attendance API not available")}finally{t(!1)}};y.useEffect(()=>{l()},[]);const o=async()=>{try{await G.post("/v1/attendance/mark"),await l(),alert("Attendance marked (if backend supports it)")}catch{alert("Failed to mark attendance: endpoint may not be implemented")}};return n.jsxs("div",{className:"max-w-4xl",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Attendance"}),n.jsx("p",{className:"text-gray-600",children:"Mark daily attendance and view your recent history."})]}),n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Mark Attendance"})}),e?n.jsx("div",{children:"Loading..."}):a?n.jsx("div",{className:"text-red-600",children:a}):n.jsx("div",{className:"space-y-2",children:r.length?r.map(c=>n.jsxs("div",{className:"p-2 border rounded",children:[n.jsx("div",{children:Bp(c.timestamp||c.created_at)}),n.jsx("div",{className:"text-sm text-gray-600",children:c.status??c.type??"present"})]},c.id??c.timestamp)):n.jsx("div",{className:"text-gray-600",children:"No attendance records yet."})})]})}function fR(){var v;const[e,t]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,f]=y.useState({employee_id:"",review_period_start:"",review_period_end:"",overall_rating:"",goals_achieved:[],strengths:"",areas_of_improvement:"",comments:""});y.useEffect(()=>{m()},[]);const m=async()=>{try{const[b,j]=await Promise.all([G.get("/v1/performance"),G.get("/v1/employees")]);t(b.data||[]),s(j.data||[]),i(!1)}catch(b){console.error("Error loading data:",b),i(!1)}},g=async()=>{try{await G.post("/v1/performance",{...u,overall_rating:parseFloat(u.overall_rating),goals_achieved:u.goals_achieved.length>0?u.goals_achieved:[]}),o(!1),f({employee_id:"",review_period_start:"",review_period_end:"",overall_rating:"",goals_achieved:[],strengths:"",areas_of_improvement:"",comments:""}),m()}catch(b){console.error("Error creating review:",b)}},x=b=>b>=4.5?"text-green-600":b>=3.5?"text-blue-600":b>=2.5?"text-yellow-600":"text-red-600",h=b=>b>=4.5?"Excellent":b>=3.5?"Good":b>=2.5?"Satisfactory":"Needs Improvement",p=b=>{const j=r.find(N=>N.id===b);return(j==null?void 0:j.full_name)||"Unknown"};return a?n.jsx("div",{className:"text-center py-12",children:"Loading performance reviews..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Performance Management"}),n.jsx("button",{onClick:()=>o(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Review"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Reviews"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:e.length})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Average Rating"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:e.length>0?(e.reduce((b,j)=>b+(j.overall_rating||0),0)/e.length).toFixed(1):"N/A"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Employees Reviewed"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:new Set(e.map(b=>b.employee_id)).size})]})]}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No performance reviews found"}),n.jsx("button",{onClick:()=>o(!0),className:"mt-4 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Create Your First Review"})]}):n.jsx("div",{className:"grid gap-6",children:e.map(b=>{var j;return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:p(b.employee_id)}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Review Period: ",new Date(b.review_period_start).toLocaleDateString()," - ",new Date(b.review_period_end).toLocaleDateString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-4xl font-bold ${x(b.overall_rating)}`,children:(j=b.overall_rating)==null?void 0:j.toFixed(1)}),n.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h(b.overall_rating)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Strengths"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.strengths||"Not specified"})]}),n.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Areas of Improvement"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.areas_of_improvement||"Not specified"})]})]}),b.goals_achieved&&b.goals_achieved.length>0&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Goals Achieved"}),n.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700",children:b.goals_achieved.map((N,w)=>n.jsx("li",{children:N.goal||N},w))})]}),b.comments&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Additional Comments"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.comments})]}),n.jsx("div",{className:"mt-4 flex gap-3",children:n.jsx("button",{onClick:()=>d(b),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"View Details"})})]},b.id)})}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Performance Review"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:u.employee_id,onChange:b=>f({...u,employee_id:b.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),r.map(b=>n.jsx("option",{value:b.id,children:b.full_name},b.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Review Period Start"}),n.jsx("input",{type:"date",value:u.review_period_start,onChange:b=>f({...u,review_period_start:b.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Review Period End"}),n.jsx("input",{type:"date",value:u.review_period_end,onChange:b=>f({...u,review_period_end:b.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Overall Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:u.overall_rating,onChange:b=>f({...u,overall_rating:b.target.value}),className:"w-full p-2 border rounded",placeholder:"4.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Strengths"}),n.jsx("textarea",{value:u.strengths,onChange:b=>f({...u,strengths:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"What are the employee's key strengths?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Areas of Improvement"}),n.jsx("textarea",{value:u.areas_of_improvement,onChange:b=>f({...u,areas_of_improvement:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"What areas need improvement?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Additional Comments"}),n.jsx("textarea",{value:u.comments,onChange:b=>f({...u,comments:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"Any additional feedback..."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:g,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Review"}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Performance Review Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Employee:"})," ",p(c.employee_id)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Review Period:"})," ",new Date(c.review_period_start).toLocaleDateString()," - ",new Date(c.review_period_end).toLocaleDateString()]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Overall Rating:"})," ",n.jsx("span",{className:`text-2xl font-bold ${x(c.overall_rating)}`,children:(v=c.overall_rating)==null?void 0:v.toFixed(1)})," - ",h(c.overall_rating)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Strengths:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.strengths})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Areas of Improvement:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.areas_of_improvement})]}),c.comments&&n.jsxs("div",{children:[n.jsx("strong",{children:"Comments:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.comments})]})]}),n.jsx("button",{onClick:()=>d(null),className:"mt-6 w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Close"})]})})]})}function QSe({role:e}){const t={admin:"bg-purple-100 text-purple-800",recruiter:"bg-blue-100 text-blue-800",account_manager:"bg-indigo-100 text-indigo-800",internal_hr:"bg-yellow-100 text-yellow-800",consultant:"bg-pink-100 text-pink-800",employee:"bg-green-100 text-green-800",accounts:"bg-teal-100 text-teal-800",consultant_support:"bg-gray-100 text-gray-800",candidate:"bg-gray-50 text-gray-700",vendor:"bg-gray-50 text-gray-700",partner:"bg-gray-50 text-gray-700"};return n.jsx("span",{className:`px-2 py-1 rounded text-xs ${t[e]||"bg-gray-100 text-gray-800"}`,children:e})}function eCe({users:e=[],roles:t={},loading:r=!1,onEdit:s,onDelete:a,onRoleChange:i,onStatusChange:l,onRefresh:o}){const[c,d]=y.useState(""),[u,f]=y.useState(""),m=y.useMemo(()=>{const x=Object.keys(t||{});return x.length?x:["admin","recruiter","account_manager","internal_hr","consultant","employee","accounts","consultant_support","candidate","vendor","partner"]},[t]),g=y.useMemo(()=>{const x=c.trim().toLowerCase();return e.filter(h=>u&&h.role!==u?!1:x?(h.username||"").toLowerCase().includes(x)||(h.email||"").toLowerCase().includes(x)||(h.full_name||"").toLowerCase().includes(x):!0)},[e,c,u]);return n.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[n.jsx("input",{placeholder:"Search by name, email...",value:c,onChange:x=>d(x.target.value),className:"px-3 py-2 border rounded w-full sm:w-72"}),n.jsxs("select",{value:u,onChange:x=>f(x.target.value),className:"px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"All roles"}),m.map(x=>{var h;return n.jsx("option",{value:x,children:((h=t[x])==null?void 0:h.name)||x},x)})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:o,className:"px-3 py-2 border rounded",children:"Refresh"})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left border-b",children:[n.jsx("th",{className:"p-3",children:"Username"}),n.jsx("th",{className:"p-3",children:"Full name"}),n.jsx("th",{className:"p-3",children:"Email"}),n.jsx("th",{className:"p-3 text-center",children:"Role"}),n.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center",children:"Loading..."})}):g.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center text-gray-600",children:"No users found"})}):g.map(x=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 font-medium",children:x.username}),n.jsx("td",{className:"p-3",children:x.full_name}),n.jsx("td",{className:"p-3 break-all",children:x.email}),n.jsx("td",{className:"p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(QSe,{role:x.role}),n.jsx("select",{value:x.role,onChange:h=>i(x.id,h.target.value),className:"px-2 py-1 border rounded text-sm","aria-label":`Change role for ${x.username}`,children:m.map(h=>{var p;return n.jsx("option",{value:h,children:((p=t[h])==null?void 0:p.name)||h},h)})})]})}),n.jsx("td",{className:"p-3 text-center",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[n.jsx("button",{onClick:()=>s(x),className:"px-3 py-1 bg-yellow-50 rounded",children:"Edit"}),n.jsx("button",{onClick:()=>l(x.id,!x.is_active),className:`px-3 py-1 rounded ${x.is_active?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.is_active?"Lock":"Unlock"}),n.jsx("button",{onClick:()=>a(x.id,x.username),className:"px-3 py-1 bg-red-50 rounded",children:"Delete"})]})})]},x.id))})]})})]})}function mR({open:e=!1,initialData:t=null,roles:r={},onClose:s,onSubmit:a}){const[i,l]=y.useState({username:"",email:"",password:"",role:""}),[o,c]=y.useState(!1);if(y.useEffect(()=>{l(t?{username:t.username||"",email:t.email||"",password:"",role:t.role||""}:{username:"",email:"",password:"",role:""})},[t,e]),!e)return null;const d=async m=>{var g,x;if(m.preventDefault(),!i.username||!i.email||!i.role){alert("Please fill required fields: username, email and role.");return}c(!0);try{const h={username:i.username,email:i.email,role:i.role};i.password&&(h.password=i.password),await a(h,t==null?void 0:t.id)}catch(h){console.error("User save error:",h),alert(((x=(g=h==null?void 0:h.response)==null?void 0:g.data)==null?void 0:x.detail)||"Failed to save user")}finally{c(!1)}},f=(Object.keys(r).length?Object.keys(r):["admin","recruiter","account_manager","internal_hr","consultant","employee","accounts","consultant_support","candidate","vendor","partner"]).filter(m=>m!=="vendor"&&m!=="partner");return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-bold",children:t?"Edit User":"Create User"}),n.jsx("button",{onClick:s,className:"px-3 py-1 rounded bg-gray-100",children:"Close"})]}),n.jsxs("form",{onSubmit:d,className:"grid gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Username *"}),n.jsx("input",{className:"w-full border p-2 rounded",required:!0,value:i.username,onChange:m=>l({...i,username:m.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Email *"}),n.jsx("input",{type:"email",className:"w-full border p-2 rounded",required:!0,value:i.email,onChange:m=>l({...i,email:m.target.value})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm block mb-1",children:["Password ",t?n.jsx("span",{className:"text-xs text-gray-500",children:"(leave blank to keep)"}):n.jsx("span",{className:"text-xs text-gray-500",children:"*"})]}),n.jsx("input",{type:"password",className:"w-full border p-2 rounded",value:i.password,onChange:m=>l({...i,password:m.target.value}),...t?{}:{required:!0}})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Role *"}),n.jsxs("select",{required:!0,className:"w-full border p-2 rounded",value:i.role,onChange:m=>l({...i,role:m.target.value}),children:[n.jsx("option",{value:"",children:"-- Select Role --"}),f.map(m=>{var g;return n.jsx("option",{value:m,children:((g=r[m])==null?void 0:g.name)||m.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())},m)})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Saving...":t?"Update":"Create"})]})]})]})})}function tCe(e){return e?Array.isArray(e)?e:Array.isArray(e.data)?e.data:Array.isArray(e.users)?e.users:Array.isArray(e.results)?e.results:[]:[]}function hR(){const[e,t]=y.useState([]),[r,s]=y.useState({}),[a,i]=y.useState(!0),[l,o]=y.useState(!1),[c,d]=y.useState(null),u=y.useCallback(async()=>{var p,v,b;i(!0);try{const[j,N,w]=await Promise.allSettled([G.get("/v1/users"),G.get("/v1/users/roles/summary"),G.get("/v1/roles")]);j.status==="fulfilled"&&t(tCe(j.value.data));let _={};if(N.status==="fulfilled"){const k=N.value.data;Array.isArray(k)?k.forEach(C=>_[C.key]=C):k&&typeof k=="object"&&(_=k)}w.status==="fulfilled"&&(Array.isArray((p=w.value)==null?void 0:p.data)?w.value.data:Array.isArray((b=(v=w.value)==null?void 0:v.data)==null?void 0:b.roles)?w.value.data.roles:[]).forEach(C=>{const T=String((C==null?void 0:C.name)||"").trim().toLowerCase();T&&(_[T]={..._[T]||{},role:T,name:(C==null?void 0:C.name)||T})}),s(_)}catch(j){console.error("UserManagement load error",j)}finally{i(!1)}},[]);y.useEffect(()=>{u()},[u]);const f=async p=>{await G.post("/v1/users",p),o(!1),u()},m=async(p,v)=>{v?await G.put(`/v1/users/${v}`,p):await G.post("/v1/users",p),d(null),u()},g=async(p,v)=>{window.confirm(`Delete user '${v}'?`)&&(await G.delete(`/v1/users/${p}`),u())},x=async(p,v)=>{if(window.confirm(`Change role to ${v}?`)){try{await G.put(`/v1/users/${p}/role`,{role:v})}catch{await G.put(`/v1/users/${p}`,{role:v})}u()}},h=async(p,v)=>{const b=v?"unlock":"lock";window.confirm(`Are you sure you want to ${b} this user?`)&&(await G.put(`/v1/users/${p}/status`,{is_active:v}),u())};return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 flex justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage users & assign roles"})]}),n.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 rounded bg-blue-600 text-white",children:"+ Create User"})]}),n.jsx(eCe,{users:e,roles:r,loading:a,onEdit:d,onDelete:g,onRoleChange:x,onStatusChange:h,onRefresh:u}),n.jsx(mR,{open:l,roles:r,onClose:()=>o(!1),onSubmit:f}),n.jsx(mR,{open:!!c,initialData:c,roles:r,onClose:()=>d(null),onSubmit:m})]})}function pR(){const[e,t]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState({}),[c,d]=y.useState(!1),[u,f]=y.useState(!1),[m,g]=y.useState(null),[x,h]=y.useState("all"),[p,v]=y.useState({job_id:"",platform:"linkedin",campaign_name:"",budget:"",start_date:new Date().toISOString().split("T")[0],end_date:""}),[b,j]=y.useState({impressions:"",clicks:"",applications:""}),N=[{value:"linkedin",label:"LinkedIn",icon:"",color:"bg-blue-500"},{value:"facebook",label:"Facebook",icon:"",color:"bg-indigo-600"},{value:"instagram",label:"Instagram",icon:"",color:"bg-pink-500"},{value:"twitter",label:"Twitter/X",icon:"",color:"bg-sky-500"},{value:"indeed",label:"Indeed",icon:"",color:"bg-blue-700"},{value:"glassdoor",label:"Glassdoor",icon:"",color:"bg-green-600"},{value:"google",label:"Google Ads",icon:"",color:"bg-red-500"}];y.useEffect(()=>{w()},[x]);const w=async()=>{try{const S=x!=="all"?{platform:x}:{},[E,O,I]=await Promise.all([G.get("/v1/campaigns",{params:S}),G.get("/v1/jobs"),G.get("/v1/campaigns/dashboard/metrics")]);t(E.data||[]),s(O.data||[]),o(I.data||{}),i(!1)}catch(S){console.error("Error loading campaigns:",S),i(!1)}},_=async()=>{try{await G.post("/v1/campaigns",null,{params:{job_id:p.job_id,platform:p.platform,campaign_name:p.campaign_name,budget:parseFloat(p.budget)||0,start_date:p.start_date,end_date:p.end_date||null}}),d(!1),v({job_id:"",platform:"linkedin",campaign_name:"",budget:"",start_date:new Date().toISOString().split("T")[0],end_date:""}),w()}catch(S){console.error("Error creating campaign:",S)}},k=async()=>{try{await G.put(`/v1/campaigns/${m.id}/metrics`,null,{params:{impressions:parseInt(b.impressions)||void 0,clicks:parseInt(b.clicks)||void 0,applications:parseInt(b.applications)||void 0}}),f(!1),g(null),w()}catch(S){console.error("Error updating metrics:",S)}},C=async(S,E)=>{try{await G.put(`/v1/campaigns/${S}/status`,null,{params:{status:E}}),w()}catch(O){console.error("Error updating status:",O)}},T=S=>{g(S),j({impressions:S.impressions||"",clicks:S.clicks||"",applications:S.applications||""}),f(!0)},P=S=>N.find(E=>E.value===S)||{label:S,icon:"",color:"bg-gray-500"},A=S=>({active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",completed:"bg-gray-100 text-gray-800"})[S]||"bg-gray-100 text-gray-800";return a?n.jsx("div",{className:"text-center py-12",children:"Loading campaigns..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Social Media Campaigns"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Track job advertisements across social media platforms"})]}),n.jsx("button",{onClick:()=>d(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Campaign"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Campaigns"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:l.total_campaigns||0}),n.jsxs("div",{className:"text-xs mt-2 opacity-75",children:[l.active_campaigns||0," Active"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Budget"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(l.total_budget||0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Impressions"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:(l.total_impressions||0).toLocaleString()})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Applications"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:l.total_applications||0}),n.jsxs("div",{className:"text-xs mt-2 opacity-75",children:["CTR: ",l.average_ctr||0,"%"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[n.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded whitespace-nowrap ${x==="all"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:"All Platforms"}),N.map(S=>n.jsxs("button",{onClick:()=>h(S.value),className:`px-4 py-2 rounded whitespace-nowrap ${x===S.value?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:[S.icon," ",S.label]},S.value))]})}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No campaigns found"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Create your first social media campaign to start tracking job advertisements"})]}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Job"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Platform"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Budget"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Impressions"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Applications"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CTR"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(S=>{var O,I,L;const E=P(S.platform);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"font-medium text-gray-900",children:S.campaign_name}),n.jsx("div",{className:"text-xs text-gray-500",children:S.utm_campaign})]}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.job_title}),n.jsx("div",{className:"text-xs text-gray-500",children:S.job_location})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold text-white ${E.color}`,children:[E.icon," ",E.label]})}),n.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:["$",(O=S.budget)==null?void 0:O.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(I=S.impressions)==null?void 0:I.toLocaleString()}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(L=S.clicks)==null?void 0:L.toLocaleString()}),n.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-green-600",children:S.applications}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:[S.click_through_rate,"%"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A(S.status)}`,children:S.status})}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>T(S),className:"text-indigo-600 hover:text-indigo-900",children:"Update"}),S.status==="active"&&n.jsx("button",{onClick:()=>C(S.id,"paused"),className:"text-yellow-600 hover:text-yellow-900",children:"Pause"}),S.status==="paused"&&n.jsx("button",{onClick:()=>C(S.id,"active"),className:"text-green-600 hover:text-green-900",children:"Resume"})]})})]},S.id)})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Social Media Campaign"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Job Position"}),n.jsxs("select",{value:p.job_id,onChange:S=>v({...p,job_id:S.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Job"}),r.map(S=>n.jsxs("option",{value:S.id,children:[S.title," - ",S.location]},S.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Platform"}),n.jsx("select",{value:p.platform,onChange:S=>v({...p,platform:S.target.value}),className:"w-full p-2 border rounded",children:N.map(S=>n.jsxs("option",{value:S.value,children:[S.icon," ",S.label]},S.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Campaign Name"}),n.jsx("input",{type:"text",value:p.campaign_name,onChange:S=>v({...p,campaign_name:S.target.value}),className:"w-full p-2 border rounded",placeholder:"Summer 2024 Hiring Drive"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Budget ($)"}),n.jsx("input",{type:"number",value:p.budget,onChange:S=>v({...p,budget:S.target.value}),className:"w-full p-2 border rounded",placeholder:"1000"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:p.start_date,onChange:S=>v({...p,start_date:S.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:p.end_date,onChange:S=>v({...p,end_date:S.target.value}),className:"w-full p-2 border rounded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:_,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Campaign"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Update Campaign Metrics"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Campaign: ",n.jsx("strong",{children:m==null?void 0:m.campaign_name})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Impressions"}),n.jsx("input",{type:"number",value:b.impressions,onChange:S=>j({...b,impressions:S.target.value}),className:"w-full p-2 border rounded",placeholder:(m==null?void 0:m.impressions)||"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Clicks"}),n.jsx("input",{type:"number",value:b.clicks,onChange:S=>j({...b,clicks:S.target.value}),className:"w-full p-2 border rounded",placeholder:(m==null?void 0:m.clicks)||"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Applications Received"}),n.jsx("input",{type:"number",value:b.applications,onChange:S=>j({...b,applications:S.target.value}),className:"w-full p-2 border rounded",placeholder:(m==null?void 0:m.applications)||"0"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:k,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Update Metrics"}),n.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function xR(){const[e,t]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState(null),[c,d]=y.useState(!1),[u,f]=y.useState(!1),[m,g]=y.useState(null),[x,h]=y.useState(""),[p,v]=y.useState(""),[b,j]=y.useState({campaign_id:"",full_name:"",email:"",phone:"",location:"",linkedin_url:"",source:"linkedin"}),[N,w]=y.useState("");y.useEffect(()=>{_()},[x,p]);const _=async()=>{try{const A={};x&&(A.status=x),p&&(A.source=p);const[S,E,O,I]=await Promise.all([G.get("/v1/leads/",{params:A}),G.get("/v1/leads/campaigns"),G.get("/v1/jobs"),G.get("/v1/leads/analytics")]);t(S.data||[]),s(E.data||[]),i(O.data||[]),o(I.data)}catch(A){console.error("Error loading data:",A)}},k=async A=>{var S,E;A.preventDefault();try{await G.post("/v1/leads/",b),d(!1),j({campaign_id:"",full_name:"",email:"",phone:"",location:"",linkedin_url:"",source:"linkedin"}),_()}catch(O){console.error("Error creating lead:",O),alert(((E=(S=O.response)==null?void 0:S.data)==null?void 0:E.detail)||"Error creating lead")}},C=async()=>{var A,S;if(!N){alert("Please select a job position");return}try{await G.post("/v1/leads/convert-to-applicant",null,{params:{lead_id:m.id,job_id:N}}),f(!1),g(null),w(""),_(),alert("Lead converted to applicant successfully!")}catch(E){console.error("Error converting lead:",E),alert(((S=(A=E.response)==null?void 0:A.data)==null?void 0:S.detail)||"Error converting lead")}},T=A=>{const S={new:"bg-blue-100 text-blue-800",qualified:"bg-green-100 text-green-800",contacted:"bg-yellow-100 text-yellow-800",converted:"bg-purple-100 text-purple-800",rejected:"bg-red-100 text-red-800"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S[A]||"bg-gray-100 text-gray-800"}`,children:(A==null?void 0:A.toUpperCase())||"NEW"})},P=A=>({linkedin:"",facebook:"",instagram:"",twitter:"",indeed:"",direct:"",referral:""})[A]||"";return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Lead Management"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage leads from your marketing campaigns"})]}),l&&n.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.total_leads}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Total Leads"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.qualified_leads}),n.jsx("div",{className:"text-green-100 text-sm",children:"Qualified Leads"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.converted_leads}),n.jsx("div",{className:"text-purple-100 text-sm",children:"Converted to Applicants"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"text-3xl font-bold mb-1",children:[l.conversion_rate,"%"]}),n.jsx("div",{className:"text-orange-100 text-sm",children:"Conversion Rate"})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:x,onChange:A=>h(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"qualified",children:"Qualified"}),n.jsx("option",{value:"contacted",children:"Contacted"}),n.jsx("option",{value:"converted",children:"Converted"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),n.jsxs("select",{value:p,onChange:A=>v(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Sources"}),n.jsx("option",{value:"linkedin",children:"LinkedIn"}),n.jsx("option",{value:"facebook",children:"Facebook"}),n.jsx("option",{value:"instagram",children:"Instagram"}),n.jsx("option",{value:"twitter",children:"Twitter"}),n.jsx("option",{value:"indeed",children:"Indeed"}),n.jsx("option",{value:"direct",children:"Direct"}),n.jsx("option",{value:"referral",children:"Referral"})]})]})]}),n.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center space-x-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),n.jsx("span",{children:"Add Lead"})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Lead Info"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Source"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Score"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:e.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),n.jsx("p",{className:"text-lg font-medium",children:"No leads found"}),n.jsx("p",{className:"text-sm",children:"Leads from your campaigns will appear here"})]})}):e.map(A=>n.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"font-medium text-gray-900",children:A.full_name||"N/A"}),A.location&&n.jsx("div",{className:"text-sm text-gray-500",children:A.location})]}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"text-sm text-gray-900",children:A.email}),A.phone&&n.jsx("div",{className:"text-sm text-gray-500",children:A.phone})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xl",children:P(A.source)}),n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:A.source||"Unknown"})]})}),n.jsx("td",{className:"px-6 py-4",children:T(A.status)}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-lg font-semibold text-blue-600",children:A.score||0}),n.jsx("div",{className:"text-sm text-gray-500 ml-1",children:"/100"})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:A.created_at?new Date(A.created_at).toLocaleDateString():"N/A"}),n.jsxs("td",{className:"px-6 py-4 text-right",children:[A.status!=="converted"&&n.jsx("button",{onClick:()=>{g(A),f(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-medium",children:"Convert to Applicant"}),A.status==="converted"&&n.jsx("span",{className:"text-sm text-gray-500 italic",children:"Converted "})]})]},A.id))})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Lead"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:k,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign (Optional)"}),n.jsxs("select",{value:b.campaign_id,onChange:A=>j({...b,campaign_id:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Campaign"}),r.map(A=>n.jsxs("option",{value:A.id,children:[A.campaign_name," (",A.platform,")"]},A.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:b.full_name,onChange:A=>j({...b,full_name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:b.email,onChange:A=>j({...b,email:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),n.jsx("input",{type:"tel",value:b.phone,onChange:A=>j({...b,phone:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",value:b.location,onChange:A=>j({...b,location:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn URL"}),n.jsx("input",{type:"url",value:b.linkedin_url,onChange:A=>j({...b,linkedin_url:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),n.jsxs("select",{value:b.source,onChange:A=>j({...b,source:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"linkedin",children:"LinkedIn"}),n.jsx("option",{value:"facebook",children:"Facebook"}),n.jsx("option",{value:"instagram",children:"Instagram"}),n.jsx("option",{value:"twitter",children:"Twitter"}),n.jsx("option",{value:"indeed",children:"Indeed"}),n.jsx("option",{value:"direct",children:"Direct"}),n.jsx("option",{value:"referral",children:"Referral"})]})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Add Lead"})]})]})]})})}),u&&m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:n.jsxs("div",{className:"p-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Convert Lead to Applicant"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Converting ",n.jsx("span",{className:"font-semibold",children:m.full_name})," to a job applicant."]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Job Position *"}),n.jsxs("select",{value:N,onChange:A=>w(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Choose a job..."}),a.filter(A=>A.status==="open").map(A=>n.jsxs("option",{value:A.id,children:[A.title," - ",A.location]},A.id))]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{f(!1),g(null),w("")},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),n.jsx("button",{onClick:C,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:"Convert"})]})]})})})]})}function i_(){var f;const{id:e}=Or(),t=Tt(),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState([]),c=m=>{const g=String(m||"").toLowerCase().replace(/\s+/g,"_");return g==="interview_scheduled"||g==="interview"?"scheduled":g};y.useEffect(()=>{d()},[]);const d=async()=>{var m;try{const[g,x]=await Promise.all([G.get(`/v1/interviews/${e}`),G.get(`/v1/interviews/${e}/transcript`)]);i(g.data),o(((m=x.data)==null?void 0:m.transcript)||[])}catch{alert("Failed to load interview details")}finally{s(!1)}},u=m=>{switch(c(m)){case"in_progress":return"In Progress";case"completed":return"Completed";case"scheduled":return"Scheduled";case"no_show":return"No-show";default:return m||"Unknown"}};return r?n.jsx("h2",{className:"p-6",children:"Loading details..."}):a?n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Interview Result & Feedback"}),n.jsx("button",{onClick:()=>t("/candidate"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back to Dashboard"})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4 mb-4",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Job:"})," ",(f=a==null?void 0:a.job)==null?void 0:f.title]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",u(a.status)]}),n.jsxs("p",{children:[n.jsx("b",{children:"Completed At:"})," ",a.completed_at?new Date(a.completed_at).toLocaleString():"Not Available"]}),a.overall_ai_score!==null&&n.jsxs("p",{className:"mt-2 text-lg font-semibold text-green-700",children:["AI Score: ",a.overall_ai_score," / 10"]})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Interview Transcript"}),c(a==null?void 0:a.status)==="in_progress"&&l.length===0?n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("p",{children:"Your interview is still in progress. You can resume it now."}),n.jsx("button",{onClick:()=>t(`/interviews/${e}`),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Resume Interview"})]}):l.length===0?n.jsx("p",{className:"text-gray-500 text-sm",children:"No conversation history available"}):l.map((m,g)=>n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsx("div",{className:"p-2 rounded bg-blue-100 text-blue-900",children:m.question}),n.jsx("div",{className:"p-2 rounded bg-green-100 text-green-900 text-right",children:m.answer})]},g))]})]}):n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found or unauthorized"})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rCe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nCe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),gR=e=>{const t=nCe(e);return t.charAt(0).toUpperCase()+t.slice(1)},nU=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),sCe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iCe=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...o},c)=>y.createElement("svg",{ref:c,...aCe,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:nU("lucide",a),...!i&&!sCe(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>y.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(e,t)=>{const r=y.forwardRef(({className:s,...a},i)=>y.createElement(iCe,{ref:i,iconNode:t,className:nU(`lucide-${rCe(gR(e))}`,`lucide-${e}`,s),...a}));return r.displayName=gR(e),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lCe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],sU=_t("activity",lCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oCe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qh=_t("arrow-left",oCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cCe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dCe=_t("arrow-right",cCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uCe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],fCe=_t("arrow-up-down",uCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mCe=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hCe=_t("badge-check",mCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],xCe=_t("bell-ring",pCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gCe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],BC=_t("bell",gCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yCe=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],vCe=_t("briefcase-business",yCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bCe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ua=_t("briefcase",bCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Rv=_t("building-2",jCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ce=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],am=_t("building",_Ce);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],aU=_t("calendar-days",wCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ya=_t("calendar",NCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],iU=_t("chart-column",kCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],CCe=_t("chart-line",SCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ACe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yc=_t("check",ACe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],io=_t("chevron-down",ECe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TCe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yR=_t("chevron-left",TCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PCe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],S1=_t("chevron-right",PCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],C1=_t("chevron-up",OCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ks=_t("circle-alert",RCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LCe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ci=_t("circle-check-big",LCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ICe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ep=_t("circle-check",ICe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ja=_t("circle-x",FCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$Ce=_t("circle",DCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MCe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bl=_t("clipboard-list",MCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BCe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pn=_t("clock",BCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UCe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zCe=_t("copy",UCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WCe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Up=_t("dollar-sign",WCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VCe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Lv=_t("download",VCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HCe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vR=_t("ellipsis-vertical",HCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qCe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Iv=_t("external-link",qCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],il=_t("eye",GCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JCe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],KCe=_t("file-chart-column-increasing",JCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCe=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],YCe=_t("file-pen-line",XCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],QCe=_t("file-search",ZCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],t4e=_t("file-spreadsheet",e4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cn=_t("file-text",r4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],s4e=_t("file-up",n4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],i4e=_t("folder-kanban",a4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],o4e=_t("folder-plus",l4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],d4e=_t("folder",c4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],A1=_t("funnel",u4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],m4e=_t("git-branch",f4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],p4e=_t("graduation-cap",h4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],g4e=_t("grid-3x3",x4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],bR=_t("handshake",y4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],b4e=_t("import",v4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],_4e=_t("indian-rupee",j4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],N4e=_t("landmark",w4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],S4e=_t("languages",k4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],im=_t("layout-dashboard",C4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],E4e=_t("link-2",A4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ws=_t("loader-circle",T4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],l_=_t("loader",P4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],R4e=_t("lock-open",O4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jR=_t("lock",L4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zp=_t("log-out",I4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iu=_t("mail",F4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Oc=_t("map-pin",D4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],_R=_t("megaphone",$4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],lU=_t("message-square",M4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],U4e=_t("pencil",B4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],E1=_t("phone",z4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bi=_t("plus",W4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jo=_t("refresh-cw",V4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],q4e=_t("rotate-ccw",H4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],J4e=_t("save",G4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ps=_t("search",K4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ai=_t("send",X4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T1=_t("settings",Y4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],x0=_t("shield-check",Z4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wR=_t("shield",Q4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eAe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],tAe=_t("sliders-horizontal",eAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rAe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nAe=_t("sparkles",rAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sAe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],UC=_t("square-pen",sAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aAe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],lm=_t("star",aAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iAe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],om=_t("trash-2",iAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lAe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],oAe=_t("trending-up",lAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cAe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yf=_t("triangle-alert",cAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dAe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zC=_t("upload",dAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uAe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],oU=_t("user-check",uAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fAe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mAe=_t("user-cog",fAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hAe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Fv=_t("user-plus",hAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pAe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],xAe=_t("user-x",pAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gAe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_o=_t("user",gAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yAe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],vAe=_t("users-round",yAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bAe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hr=_t("users",bAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jAe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_Ae=_t("video",jAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wAe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],cU=_t("wallet",wAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NAe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_r=_t("x",NAe),kAe=/^[A-Za-z0-9 ]+$/,Vt=e=>String(e??"").trim(),ll=(e,t="Feature name",{pattern:r=kAe,patternMessage:s=`${t} can only contain letters, numbers, and spaces.`}={})=>{const a=Vt(e);return a?r.test(a)?"":s:`${t} cannot be empty.`},wo=(e,{minLength:t=20,required:r=!1,label:s="Description"}={})=>{const a=Vt(e);return a?a.length<t?`${s} must be at least ${t} characters.`:"":r?`${s} cannot be empty.`:""},SAe=({list:e=[],name:t,groupValue:r,nameKey:s="name",groupKey:a="group"})=>{const i=Vt(t).toLowerCase();return i?e.some(l=>{const o=Vt(l==null?void 0:l[s]).toLowerCase(),c=(l==null?void 0:l[a])??null;return o===i&&c===(r??null)}):!1},ml=["Notice Period","Personal Information","Professional Information","Education Details","Skills","Certifications","Experience"],Q2={name:"",noticePeriod:"",gender:"",dateOfBirth:"",phone:"",email:"",currentAddress:"",permanentAddress:"",city:"",pincode:"",readyToRelocate:!1,preferredLocation:"",designation:"",currentCtc:"",expectedCtc:"",highestDegree:"",collegeName:"",cgpaPercentage:"",skills:"",certificationName:"",certificationCredentialId:"",certificationCredentialLink:"",experienceCompany:"",experienceRole:"",experienceProject:"",experienceSkillsLearnt:"",experienceYears:"",experienceCtc:"",additionalEducations:[],additionalCertifications:[],additionalExperiences:[]},CAe={highestDegree:"",collegeName:"",cgpaPercentage:""},AAe={certificationName:"",certificationCredentialId:"",certificationCredentialLink:""},EAe={experienceCompany:"",experienceRole:"",experienceProject:"",experienceSkillsLearnt:"",experienceYears:"",experienceCtc:""},NR=new Set(["name","email","phone","designation","skills","experienceYears"]),Vg=80,Mx=300,TAe=5*1024*1024,PAe=new Set([".pdf",".doc",".docx"]),OAe=new Set(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]),o_=e=>{const t=(e==null?void 0:e.clientWidth)||0,r=(e==null?void 0:e.clientHeight)||0,s=(e==null?void 0:e.naturalWidth)||0,a=(e==null?void 0:e.naturalHeight)||0;if(!t||!r||!s||!a)return{x:0,y:0,width:t,height:r};const i=s/a,l=t/r;if(i>l){const c=t/i;return{x:0,y:(r-c)/2,width:t,height:c}}const o=r*i;return{x:(t-o)/2,y:0,width:o,height:r}},c_=(e,t)=>{const r=Math.max(Math.min(t.width,t.height),1),s=Math.min(Vg,r),a=Math.min(Math.max(e.size,s),r),i=t.x,l=t.y,o=Math.max(t.x+t.width-a,i),c=Math.max(t.y+t.height-a,l);return{size:a,x:Math.min(Math.max(e.x,i),o),y:Math.min(Math.max(e.y,l),c)}},RAe=(e="")=>{const t=String(e).lastIndexOf(".");return t>=0?String(e).slice(t).toLowerCase():""},kR=e=>{if(!e)return{valid:!1,message:"Please select a resume file."};const t=RAe(e.name),r=String(e.type||"").toLowerCase();return!PAe.has(t)&&!OAe.has(r)?{valid:!1,message:"Only PDF, DOC, or DOCX files are allowed."}:e.size>TAe?{valid:!1,message:"Resume size must be 5 MB or less."}:{valid:!0}},jn=e=>e==null?!1:typeof e=="string"?e.trim()!=="":Array.isArray(e)?e.some(t=>jn(t)):typeof e=="object"?Object.values(e).some(t=>jn(t)):!0,Bx=e=>Array.isArray(e)?JSON.stringify(e.map(t=>typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([r,s])=>[r,String(s??"").trim().toLowerCase()])):String(t??"").trim().toLowerCase())):typeof e=="object"&&e!==null?JSON.stringify(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,String(r??"").trim().toLowerCase()]))):String(e??"").trim().toLowerCase(),LAe=(e={})=>{var c,d,u,f,m,g,x,h,p,v,b,j;const t=Array.isArray(e.education_history)?e.education_history:Array.isArray(e.education_details)?e.education_details:Array.isArray(e.education)?e.education:jn(e.education)?[e.education]:[],r=Array.isArray(e.work_history)?e.work_history:Array.isArray(e.experiences)?e.experiences:Array.isArray(e.employment_history)?e.employment_history:Array.isArray(e.experience_history)?e.experience_history:[],s=Array.isArray(e.certifications)?e.certifications:jn(e.certifications)?[e.certifications]:jn(e.certification)?[e.certification]:[],a=t.map(N=>typeof N=="string"?{highestDegree:N.trim(),collegeName:"",cgpaPercentage:""}:{highestDegree:String(Et(N,["degree","title","qualification","course","education"],"")).trim(),collegeName:String(Et(N,["college","institution","university","school"],"")).trim(),cgpaPercentage:String(Et(N,["cgpa","percentage","score","grade"],"")).trim()}).filter(N=>jn(N)),i=r.map(N=>({experienceCompany:String(Et(N,["company","company_name","employer","organization"],"")).trim(),experienceRole:String(Et(N,["role","designation","title","position"],"")).trim(),experienceProject:String(Et(N,["project_done","project","project_name","projects","summary"],"")).trim(),experienceSkillsLearnt:U0(Et(N,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")).trim(),experienceYears:String(Et(N,["years","duration_years","total_years","duration","experience"],"")).trim(),experienceCtc:String(Et(N,["ctc","current_ctc","salary","compensation","package"],"")).trim()})).filter(N=>jn(N)),l=s.map(N=>typeof N=="string"?{certificationName:N.trim(),certificationCredentialId:"",certificationCredentialLink:""}:{certificationName:String(Et(N,["name","title","certification_name"],"")).trim(),certificationCredentialId:String(Et(N,["credential_id","credentialId","id"],"")).trim(),certificationCredentialLink:String(Et(N,["credential_url","credentialUrl","url"],"")).trim()}).filter(N=>jn(N)),o=String(Et(e,["total_experience","experience_years","experience"],"")).trim();return{name:String(Et(e,["full_name","fullName","name"],"")).trim(),email:String(Et(e,["email"],"")).trim(),phone:String(Et(e,["phone","mobile","contact_number"],"")).trim(),skills:U0(Et(e,["skills","primary_skills","skill_set","top_skills"],"")).trim(),highestDegree:((c=a[0])==null?void 0:c.highestDegree)||String(Et(e,["highest_degree","education","degree"],"")).trim(),collegeName:((d=a[0])==null?void 0:d.collegeName)||String(Et(e,["college","institution","university"],"")).trim(),cgpaPercentage:((u=a[0])==null?void 0:u.cgpaPercentage)||String(Et(e,["cgpa","percentage"],"")).trim(),additionalEducations:a.slice(1),certificationName:((f=l[0])==null?void 0:f.certificationName)||"",certificationCredentialId:((m=l[0])==null?void 0:m.certificationCredentialId)||"",certificationCredentialLink:((g=l[0])==null?void 0:g.certificationCredentialLink)||"",additionalCertifications:l.slice(1),experienceCompany:((x=i[0])==null?void 0:x.experienceCompany)||"",experienceRole:((h=i[0])==null?void 0:h.experienceRole)||"",experienceProject:((p=i[0])==null?void 0:p.experienceProject)||"",experienceSkillsLearnt:((v=i[0])==null?void 0:v.experienceSkillsLearnt)||"",experienceYears:o||String(((b=i[0])==null?void 0:b.experienceYears)||"").trim(),experienceCtc:((j=i[0])==null?void 0:j.experienceCtc)||"",additionalExperiences:i.slice(1)}},IAe=e=>["name","email","phone","skills","highestDegree","collegeName","experienceCompany","experienceRole","experienceYears","certificationName","additionalEducations","additionalExperiences","additionalCertifications"].some(t=>jn(e==null?void 0:e[t])),FAe=(e,t)=>{const s=[{key:"name",label:"Full Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"skills",label:"Skills"},{key:"highestDegree",label:"Highest Degree"},{key:"collegeName",label:"College Name"},{key:"cgpaPercentage",label:"CGPA / %"},{key:"certificationName",label:"Certification Name"},{key:"experienceCompany",label:"Experience Company"},{key:"experienceRole",label:"Experience Role"},{key:"experienceYears",label:"Experience Years"}].filter(({key:i})=>jn(t==null?void 0:t[i])&&jn(e==null?void 0:e[i])).filter(({key:i})=>Bx(t[i])!==Bx(e[i])).map(({key:i,label:l})=>({key:i,label:l,existing:e[i],parsed:t[i]}));return[{key:"additionalEducations",label:"Additional Education"},{key:"additionalCertifications",label:"Additional Certifications"},{key:"additionalExperiences",label:"Additional Experience"}].forEach(({key:i,label:l})=>{!jn(t==null?void 0:t[i])||!jn(e==null?void 0:e[i])||Bx(t[i])!==Bx(e[i])&&s.push({key:i,label:l,existing:`${e[i].length||0} entries`,parsed:`${t[i].length||0} entries`})}),s},DAe=(e,t)=>{const r={...e},s=a=>{jn(t==null?void 0:t[a])&&(r[a]=t[a])};return["name","email","phone","skills","highestDegree","collegeName","cgpaPercentage","certificationName","certificationCredentialId","certificationCredentialLink","experienceCompany","experienceRole","experienceProject","experienceSkillsLearnt","experienceYears","experienceCtc"].forEach(s),Array.isArray(t==null?void 0:t.additionalEducations)&&t.additionalEducations.length>0&&(r.additionalEducations=t.additionalEducations),Array.isArray(t==null?void 0:t.additionalCertifications)&&t.additionalCertifications.length>0&&(r.additionalCertifications=t.additionalCertifications),Array.isArray(t==null?void 0:t.additionalExperiences)&&t.additionalExperiences.length>0&&(r.additionalExperiences=t.additionalExperiences),r},$Ae=e=>{if(!e)return[];const t=[],r=(s,a)=>{jn(a)&&t.push({label:s,value:String(a)})};return r("Full Name",e.name),r("Email",e.email),r("Phone",e.phone),r("Skills",e.skills),(jn(e.highestDegree)||jn(e.collegeName)||jn(e.cgpaPercentage))&&t.push({label:"Education",value:[e.highestDegree,e.collegeName,e.cgpaPercentage?`CGPA/%: ${e.cgpaPercentage}`:""].filter(Boolean).join(" | ")}),(jn(e.experienceCompany)||jn(e.experienceRole)||jn(e.experienceYears))&&t.push({label:"Experience",value:[e.experienceCompany,e.experienceRole,e.experienceYears?`${e.experienceYears} years`:""].filter(Boolean).join(" | ")}),jn(e.certificationName)&&t.push({label:"Certifications",value:e.certificationName}),Array.isArray(e.additionalEducations)&&e.additionalEducations.length>0&&t.push({label:"Additional Education",value:`${e.additionalEducations.length} more entries`}),Array.isArray(e.additionalExperiences)&&e.additionalExperiences.length>0&&t.push({label:"Additional Experience",value:`${e.additionalExperiences.length} more entries`}),Array.isArray(e.additionalCertifications)&&e.additionalCertifications.length>0&&t.push({label:"Additional Certifications",value:`${e.additionalCertifications.length} more entries`}),t},Ux=[[{key:"noticePeriod",label:"Notice Period"}],[{key:"photo",label:"Profile Photo",type:"photo",full:!0},{key:"resume",label:"Resume",type:"file",full:!0},{key:"name",label:"Name"},{key:"gender",label:"Gender",type:"select",options:["","Male","Female","Non-binary","Prefer not to say"]},{key:"dateOfBirth",label:"DOB",type:"date"},{key:"phone",label:"Phone Number"},{key:"email",label:"Email",type:"email"},{key:"currentAddress",label:"Current Address",type:"textarea",full:!0},{key:"permanentAddress",label:"Permanent Address",type:"textarea",full:!0},{key:"city",label:"City"},{key:"pincode",label:"Pincode"},{key:"readyToRelocate",label:"Ready To Relocate",type:"checkbox"},{key:"preferredLocation",label:"Preferred Location"}],[{key:"designation",label:"Designation"},{key:"currentCtc",label:"Current CTC"},{key:"expectedCtc",label:"Expected CTC"}],[{key:"highestDegree",label:"Highest Degree"},{key:"collegeName",label:"College Name"},{key:"cgpaPercentage",label:"CGPA / %"},{key:"additionalEducations",label:"Add More Education",type:"add-more-education",full:!0}],[{key:"skills",label:"Skills",hint:"Comma separated tags"}],[{key:"certificationName",label:"Certification Name"},{key:"certificationCredentialId",label:"Credential ID"},{key:"certificationCredentialLink",label:"Credential Link",hint:"Must be valid URL"},{key:"additionalCertifications",label:"Add More Certifications",type:"add-more-certification",full:!0}],[{key:"experienceCompany",label:"Company Worked For"},{key:"experienceRole",label:"Role"},{key:"experienceProject",label:"Project Done"},{key:"experienceSkillsLearnt",label:"Skills Learnt",hint:"Comma separated"},{key:"experienceYears",label:"Years"},{key:"experienceCtc",label:"CTC There"},{key:"additionalExperiences",label:"Add More Experience",type:"add-more-experience",full:!0}]],Do=e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e??null},Et=(e,t,r="")=>{for(const s of t){const a=e==null?void 0:e[s];if(a!=null&&String(a).trim()!=="")return a}return r},U0=e=>e?Array.isArray(e)?e.map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||(t==null?void 0:t.skill)||"").filter(Boolean).join(", "):String(e):"",SR=e=>e?/^https?:\/\//i.test(e)||String(e).startsWith("blob:")?e:`http://localhost:8000/${String(e).replace(/^\/+/,"")}`:"",CR=e=>{if(!e)return!0;try{return new URL(e),!0}catch{return!1}},vf=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),dU=e=>String(e||"").replace(/[\u00A0\u2007\u202F]/g," ").trim(),uU=e=>{const t=dU(e);if(!t)return"";if(t.startsWith("+")){const r=t.replace(/[^\d]/g,"");return r?`+${r}`:""}return t.replace(/[^\d]/g,"")},zx=(e={})=>{const t=Et(e,["full_name","fullName","name"],"").trim(),r=Et(e,["first_name","firstName"],"").trim(),s=Et(e,["last_name","lastName"],"").trim(),a=t||[r,s].filter(Boolean).join(" ").trim(),i=Array.isArray(e.education_history)?e.education_history:Array.isArray(e.education_details)?e.education_details:[],l=i[0]||{},o=Array.isArray(e.work_history)?e.work_history:Array.isArray(e.employment_history)?e.employment_history:Array.isArray(e.experience_history)?e.experience_history:[],c=o[0]||{},d=Array.isArray(e.certifications)?e.certifications:e.certifications?[e.certifications]:[],u=d[0],f=typeof u=="string"?u:Et(u,["name","title","certification_name"],""),m=typeof u=="object"?Et(u,["credential_id","credentialId","id"],""):"",g=typeof u=="object"?Et(u,["credential_url","credentialUrl","url"],""):"",x=i.slice(1).map(v=>({highestDegree:String(Et(v,["degree","title"],"")),collegeName:String(Et(v,["college","institution","university"],"")),cgpaPercentage:String(Et(v,["cgpa","percentage"],""))})),h=d.slice(1).map(v=>({certificationName:typeof v=="string"?v:String(Et(v,["name","title","certification_name"],"")),certificationCredentialId:typeof v=="object"?String(Et(v,["credential_id","credentialId","id"],"")):"",certificationCredentialLink:typeof v=="object"?String(Et(v,["credential_url","credentialUrl","url"],"")):""})),p=o.slice(1).map(v=>({experienceCompany:String(Et(v,["company","company_name","employer"],"")),experienceRole:String(Et(v,["role","designation","title"],"")),experienceProject:String(Et(v,["project_done","project","project_name","projects"],"")),experienceSkillsLearnt:U0(Et(v,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")),experienceYears:String(Et(v,["years","duration_years","total_years","duration"],"")),experienceCtc:String(Et(v,["ctc","current_ctc","salary","compensation","package"],""))}));return{id:Et(e,["id","_id","candidate_id"],null),photoUrl:Et(e,["photo_url","photo","profile_picture","data_profile_picture","avatar_url","avatarUrl"],""),resumeUrl:Et(e,["resume_url","resumeUrl","resume_path","resumePath"],""),data:{...Q2,name:String(a),noticePeriod:String(Et(e,["notice_period","notice_period_days","noticePeriod"],"")),gender:String(Et(e,["gender"],"")),dateOfBirth:String(Et(e,["date_of_birth","dob","dateOfBirth"],"")).split("T")[0],phone:dU(Et(e,["phone","mobile","contact_number","phone_number"],"")),email:String(Et(e,["email"],"")),currentAddress:String(Et(e,["current_address","currentAddress","address"],"")),permanentAddress:String(Et(e,["permanent_address","permanentAddress"],"")),city:String(Et(e,["city","current_city"],"")),pincode:String(Et(e,["pincode","pin_code","zipcode"],"")),readyToRelocate:["yes","true","1"].includes(String(Et(e,["ready_to_relocate","willing_to_relocate","readyToRelocate","willingToRelocate"],"")).toLowerCase()),preferredLocation:String(Et(e,["preferred_location","preferredLocation"],"")),designation:String(Et(e,["current_designation","current_job_title","designation","current_role"],"")),currentCtc:String(Et(e,["current_ctc","current_salary"],"")),expectedCtc:String(Et(e,["expected_ctc","expected_salary"],"")),highestDegree:String(Et(l,["degree","title"],Et(e,["highest_degree","highest_qualification","education","degree"],""))),collegeName:String(Et(l,["college","institution","university"],Et(e,["college","institution","university"],""))),cgpaPercentage:String(Et(l,["cgpa","percentage"],Et(e,["cgpa","percentage"],""))),skills:U0(Et(e,["skills","primary_skills","skill_set","top_skills"],"")),certificationName:String(f),certificationCredentialId:String(m),certificationCredentialLink:String(g),experienceCompany:String(Et(c,["company","company_name","employer"],"")),experienceRole:String(Et(c,["role","designation","title"],"")),experienceProject:String(Et(c,["project_done","project","project_name","projects"],"")),experienceSkillsLearnt:U0(Et(c,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")),experienceYears:String(Et(c,["years","duration_years","total_years","duration"],Et(e,["total_experience","experience_years","experience"],""))),experienceCtc:String(Et(c,["ctc","current_ctc","salary","compensation","package"],"")),additionalEducations:x,additionalCertifications:h,additionalExperiences:p}}},AR=(e,t,r)=>{const s=new FormData,a=(N,w)=>{w!=null&&s.append(N,String(w))},i=e.name.trim(),l=i.split(/\s+/).filter(Boolean),o=l[0]||"",c=l.slice(1).join(" "),d=uU(e.phone),u=vf(e.skills),f=e.certificationName||e.certificationCredentialId||e.certificationCredentialLink?[{name:e.certificationName.trim(),credential_id:e.certificationCredentialId.trim(),credential_url:e.certificationCredentialLink.trim()}]:[],m=(Array.isArray(e.additionalCertifications)?e.additionalCertifications:[]).map(N=>({name:String((N==null?void 0:N.certificationName)||"").trim(),credential_id:String((N==null?void 0:N.certificationCredentialId)||"").trim(),credential_url:String((N==null?void 0:N.certificationCredentialLink)||"").trim()})).filter(N=>N.name||N.credential_id||N.credential_url),g=[...f,...m],x=e.experienceCompany||e.experienceRole||e.experienceProject||e.experienceSkillsLearnt||e.experienceYears||e.experienceCtc?[{company:e.experienceCompany.trim(),role:e.experienceRole.trim(),project_done:e.experienceProject.trim(),skills_learned:vf(e.experienceSkillsLearnt),years:e.experienceYears.trim(),ctc:e.experienceCtc.trim()}]:[],h=(Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(N=>({company:String((N==null?void 0:N.experienceCompany)||"").trim(),role:String((N==null?void 0:N.experienceRole)||"").trim(),project_done:String((N==null?void 0:N.experienceProject)||"").trim(),skills_learned:vf((N==null?void 0:N.experienceSkillsLearnt)||""),years:String((N==null?void 0:N.experienceYears)||"").trim(),ctc:String((N==null?void 0:N.experienceCtc)||"").trim()})).filter(N=>N.company||N.role||N.project_done||N.skills_learned.length>0||N.years||N.ctc),p=[...x,...h],v=e.highestDegree||e.collegeName||e.cgpaPercentage?[{degree:e.highestDegree.trim(),college:e.collegeName.trim(),cgpa:e.cgpaPercentage.trim(),percentage:e.cgpaPercentage.trim()}]:[],b=(Array.isArray(e.additionalEducations)?e.additionalEducations:[]).map(N=>({degree:String((N==null?void 0:N.highestDegree)||"").trim(),college:String((N==null?void 0:N.collegeName)||"").trim(),cgpa:String((N==null?void 0:N.cgpaPercentage)||"").trim(),percentage:String((N==null?void 0:N.cgpaPercentage)||"").trim()})).filter(N=>N.degree||N.college||N.cgpa||N.percentage),j=[...v,...b];return a("first_name",o),a("last_name",c),a("full_name",i),a("email",e.email.trim()),a("phone",d),a("mobile",d),a("contact_number",d),a("phone_number",d),a("date_of_birth",e.dateOfBirth),a("dob",e.dateOfBirth),a("gender",e.gender),a("notice_period",e.noticePeriod.trim()),/^\d+$/.test(e.noticePeriod.trim())&&a("notice_period_days",e.noticePeriod.trim()),a("current_address",e.currentAddress.trim()),a("permanent_address",e.permanentAddress.trim()),a("city",e.city.trim()),a("pincode",e.pincode.trim()),a("willing_to_relocate",e.readyToRelocate),a("ready_to_relocate",e.readyToRelocate),a("preferred_location",e.preferredLocation.trim()),a("current_designation",e.designation.trim()),a("current_role",e.designation.trim()),a("designation",e.designation.trim()),a("current_ctc",e.currentCtc.trim()),a("expected_ctc",e.expectedCtc.trim()),a("highest_degree",e.highestDegree.trim()),a("education",e.highestDegree.trim()),a("college",e.collegeName.trim()),a("institution",e.collegeName.trim()),a("cgpa",e.cgpaPercentage.trim()),a("percentage",e.cgpaPercentage.trim()),a("skills",JSON.stringify(u)),a("primary_skills",JSON.stringify(u)),a("certifications",JSON.stringify(g)),a("work_history",JSON.stringify(p)),a("education_history",JSON.stringify(j)),a("total_experience",e.experienceYears.trim()),a("experience_years",e.experienceYears.trim()),t&&s.append("photo",t,"profile-photo.jpg"),r&&s.append("resume",r),s},Wx=e=>Array.isArray(e)?e.filter(t=>t==null?!1:typeof t=="string"?t.trim()!=="":typeof t=="object"?Object.values(t).some(r=>String(r??"").trim()!==""):!0):[],ER=e=>{if(e==null)return null;const t=String(e).trim();if(!t)return null;const r=Number(t);return Number.isFinite(r)?r:null},MAe=e=>{const t=uU(e.phone),r=vf(e.skills),s=Wx((Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(f=>({company:String((f==null?void 0:f.experienceCompany)||"").trim(),role:String((f==null?void 0:f.experienceRole)||"").trim(),project_done:String((f==null?void 0:f.experienceProject)||"").trim(),skills_learned:vf((f==null?void 0:f.experienceSkillsLearnt)||""),years:String((f==null?void 0:f.experienceYears)||"").trim(),ctc:String((f==null?void 0:f.experienceCtc)||"").trim()})).concat(e.experienceCompany||e.experienceRole||e.experienceProject||e.experienceSkillsLearnt||e.experienceYears||e.experienceCtc?[{company:e.experienceCompany.trim(),role:e.experienceRole.trim(),project_done:e.experienceProject.trim(),skills_learned:vf(e.experienceSkillsLearnt),years:e.experienceYears.trim(),ctc:e.experienceCtc.trim()}]:[])),a=Wx((Array.isArray(e.additionalEducations)?e.additionalEducations:[]).map(f=>({degree:String((f==null?void 0:f.highestDegree)||"").trim(),college:String((f==null?void 0:f.collegeName)||"").trim(),cgpa:String((f==null?void 0:f.cgpaPercentage)||"").trim(),percentage:String((f==null?void 0:f.cgpaPercentage)||"").trim()})).concat(e.highestDegree||e.collegeName||e.cgpaPercentage?[{degree:e.highestDegree.trim(),college:e.collegeName.trim(),cgpa:e.cgpaPercentage.trim(),percentage:e.cgpaPercentage.trim()}]:[])),i=Wx((Array.isArray(e.additionalCertifications)?e.additionalCertifications:[]).map(f=>({name:String((f==null?void 0:f.certificationName)||"").trim(),organization:"Self Reported",credential_id:String((f==null?void 0:f.certificationCredentialId)||"").trim(),credential_url:String((f==null?void 0:f.certificationCredentialLink)||"").trim()})).concat(e.certificationName||e.certificationCredentialId||e.certificationCredentialLink?[{name:e.certificationName.trim(),organization:"Self Reported",credential_id:e.certificationCredentialId.trim(),credential_url:e.certificationCredentialLink.trim()}]:[])).filter(f=>String((f==null?void 0:f.name)||"").trim()!==""),l=ER(e.currentCtc),o=ER(e.expectedCtc),c=String(e.experienceYears||"").trim(),d=Wx((Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(f=>String((f==null?void 0:f.experienceCompany)||"").trim())).join(", "),u={full_name:e.name.trim(),email:e.email.trim(),phone:t,mobile:t,contact_number:t,phone_number:t,dob:e.dateOfBirth||null,dateOfBirth:e.dateOfBirth||null,gender:e.gender||null,current_location:e.city.trim()||null,notice_period:e.noticePeriod.trim()||null,current_address:e.currentAddress.trim()||null,permanent_address:e.permanentAddress.trim()||null,city:e.city.trim()||null,pincode:e.pincode.trim()||null,ready_to_relocate:e.readyToRelocate?"Yes":"No",preferred_location:e.preferredLocation.trim()||null,current_role:e.designation.trim()||null,current_designation:e.designation.trim()||null,current_job_title:e.designation.trim()||null,current_ctc:l,expected_salary:o,experience:c||null,current_employer:e.experienceCompany.trim()||null,previous_employers:d||null,education:e.highestDegree.trim()||null,skills:r,work_history:s,education_history:a,certifications:i};return Object.fromEntries(Object.entries(u).filter(([,f])=>f==null?!1:typeof f=="string"?f.trim()!=="":Array.isArray(f)?f.length>0:!0))},d_=(e,t="Failed to save profile")=>{var s,a;const r=(a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.detail;return Array.isArray(r)?r.map(l=>{if(!l)return"";if(typeof l=="string")return l.trim();if(typeof l=="object"){const o=Array.isArray(l.loc)?l.loc.filter(d=>d!=="body").map(d=>String(d)).join("."):"",c=String(l.msg||l.message||"").trim();return o&&c?`${o}: ${c}`:c}return String(l).trim()}).filter(Boolean).join(", ")||t:r&&typeof r=="object"?String(r.msg||r.message||"").trim()||t:typeof r=="string"&&r.trim()?r.trim():t};function Hg(){const e=Tt(),{id:t}=Or(),s=String(localStorage.getItem("role")||"").trim().toLowerCase()==="candidate",[a,i]=y.useState("create"),[l,o]=y.useState(0),[c,d]=y.useState(new Set),[u,f]=y.useState(Q2),[m,g]=y.useState(Q2),[x,h]=y.useState(null),[p,v]=y.useState({}),[b,j]=y.useState(!0),[N,w]=y.useState(!1),[_,k]=y.useState(null),[C,T]=y.useState(""),[P,A]=y.useState(null),[S,E]=y.useState(""),[O,I]=y.useState(null),[L,Z]=y.useState(null),[H,R]=y.useState(""),[D,Y]=y.useState(0),[M,X]=y.useState(!1),[ne,J]=y.useState(!1),[ue,ke]=y.useState(""),[ve,je]=y.useState(!1),[ie,se]=y.useState(null),[z,Te]=y.useState([]),[fe,Ie]=y.useState(null),[ce,Ce]=y.useState(""),[Ye,at]=y.useState(""),[pe,ye]=y.useState(!1),[Pe,et]=y.useState(""),[We,qe]=y.useState({x:40,y:40,size:170}),[ot,Ct]=y.useState({x:0,y:0,width:0,height:0}),[He,mt]=y.useState(!1),rt=y.useRef(null),wt=y.useRef(null),At=y.useRef("upload"),$t=y.useRef(null),Wt=y.useRef({x:0,y:0}),lr=y.useRef(""),sr=y.useRef(""),De=y.useMemo(()=>{var _e;return((_e=u.name)==null?void 0:_e.trim())||"Candidate"},[u.name]),yt=y.useMemo(()=>C?SR(C):`https://ui-avatars.com/api/?name=${encodeURIComponent(De)}&background=E5E7EB&color=111827`,[C,De]),ut=Math.max(Math.floor(Math.min(ot.width,ot.height)),1),Lt=Math.min(Vg,ut),Yt=y.useMemo(()=>$Ae(ie),[ie]);y.useEffect(()=>()=>{lr.current&&URL.revokeObjectURL(lr.current),sr.current&&URL.revokeObjectURL(sr.current)},[]),y.useEffect(()=>{if(!fe)return;const _e=setTimeout(()=>Ie(null),2800);return()=>clearTimeout(_e)},[fe]),y.useEffect(()=>{(async()=>{j(!0),k(null),Z(null),I(null),Y(0),ke(""),se(null),Te([]),je(!1),R("");try{let _e;if(s)try{_e=await G.get("/v1/candidate/me")}catch{if(t)_e=await G.get(`/v1/candidates/${t}`);else{i("create"),j(!1);return}}else t?_e=await G.get(`/v1/candidates/${t}`):_e=await G.get("/v1/candidate/me");const Je=Do(_e);if(!Je||typeof Je!="object"||Object.keys(Je).length===0){i("create"),j(!1);return}const B=zx(Je);f(B.data),g(B.data),h(B.id||t||null),T(B.photoUrl||""),E(B.resumeUrl||""),R(String(B.resumeUrl||"").split("/").pop()||""),Ce(B.photoUrl||""),at(B.resumeUrl||""),i("view"),d(new Set(ml.map((re,st)=>st)))}catch(_e){console.error(_e),k({type:"error",text:"Failed to load profile."}),i("create")}finally{j(!1)}})()},[t,s]),y.useEffect(()=>{const _e=B=>{if(!He||!$t.current)return;const re=$t.current.getBoundingClientRect(),st=ot.width>0&&ot.height>0?ot:{x:0,y:0,width:re.width,height:re.height},ct=st.x,Ee=st.y,Ft=Math.max(st.x+st.width-We.size,ct),pt=Math.max(st.y+st.height-We.size,Ee),Mt=Math.min(Math.max(B.clientX-re.left-Wt.current.x,ct),Ft),Bt=Math.min(Math.max(B.clientY-re.top-Wt.current.y,Ee),pt);qe(yr=>({...yr,x:Mt,y:Bt}))},Je=()=>mt(!1);return window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Je),()=>{window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Je)}},[He,ot,We.size]),y.useEffect(()=>{!pe||ot.width<=0||ot.height<=0||qe(_e=>c_(_e,ot))},[pe,ot]);const be=(_e,Je)=>{f(B=>({...B,[_e]:Je})),v(B=>{if(!B[_e])return B;const re={...B};return delete re[_e],re})},nt=(_e,Je)=>{f(B=>({...B,[_e]:[...Array.isArray(B[_e])?B[_e]:[],{...Je}]}))},ze=(_e,Je,B,re)=>{f(st=>{const ct=Array.isArray(st[_e])?[...st[_e]]:[],Ee=ct[Je]||{};return ct[Je]={...Ee,[B]:re},{...st,[_e]:ct}})},ht=(_e,Je)=>{f(B=>{const re=Array.isArray(B[_e])?[...B[_e]]:[];return re.splice(Je,1),{...B,[_e]:re}})},Nt=_e=>{const Je=u[_e],B=typeof Je=="string"?Je.trim():Je;if(_e==="resume")return!O&&!S?"Resume is required":null;if(NR.has(_e)&&(B===""||B===null||B===void 0))return"Required";if(_e==="name"&&B){const re=ll(B,"Name",{pattern:/^[A-Za-z][A-Za-z .'-]{1,79}$/,patternMessage:"Name can only contain letters, spaces, apostrophes, periods, and hyphens."});if(re)return re}if(_e==="email"&&B&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B))return"Invalid email";if(_e==="phone"&&B&&!/^\d{10,15}$/.test(String(B).replace(/[^\d]/g,"")))return"10-15 digits";if(["currentCtc","expectedCtc","experienceYears","experienceCtc"].includes(_e)&&B&&!/^\d+(\.\d+)?$/.test(B))return"Invalid number";if(_e==="pincode"&&B&&!/^\d{6}$/.test(B))return"Use 6-digit pincode";if(_e==="certificationCredentialLink"&&B&&!CR(B))return"Invalid URL";if(_e==="skills"&&B){const re=String(B).split(",").map(ct=>Vt(ct)).filter(Boolean);if(re.length===0)return"Add at least one skill";const st=new Set;for(const ct of re){const Ee=ll(ct,"Skill",{pattern:/^[A-Za-z0-9+.#/\- ]+$/,patternMessage:"Skill can only contain letters, numbers, spaces, and + . # / -"});if(Ee)return Ee;const Ft=ct.toLowerCase();if(st.has(Ft))return"Duplicate skills are not allowed";st.add(Ft)}}if(_e==="experienceProject"&&B){const re=wo(B,{minLength:20,required:!1,label:"Project description"});if(re)return re}if(_e==="additionalCertifications"){const re=Array.isArray(u.additionalCertifications)?u.additionalCertifications:[];for(const st of re){const ct=String((st==null?void 0:st.certificationCredentialLink)||"").trim();if(ct&&!CR(ct))return"Invalid URL in additional certifications"}}if(_e==="additionalExperiences"){const re=Array.isArray(u.additionalExperiences)?u.additionalExperiences:[];for(const st of re){const ct=Vt((st==null?void 0:st.experienceProject)||"");if(!ct)continue;if(wo(ct,{minLength:20,required:!1,label:"Project description"}))return"Project description in additional experiences must be at least 20 characters"}}return null},Oe=_e=>{const Je=Ux[_e].map(re=>re.key),B={};return Je.forEach(re=>{const st=Nt(re);st&&(B[re]=st)}),v(re=>{const st={...re};return Je.forEach(ct=>delete st[ct]),{...st,...B}}),Object.keys(B).length===0},xe=()=>{const _e=Ux.flatMap(B=>B.map(re=>re.key)),Je={};return _e.forEach(B=>{const re=Nt(B);re&&(Je[B]=re)}),v(Je),Object.keys(Je).length===0},Re=()=>{Oe(l)&&(d(_e=>new Set([..._e,l])),o(_e=>Math.min(_e+1,ml.length-1)))},le=()=>o(_e=>Math.max(_e-1,0)),Me=_e=>{if(_e<=l||c.has(_e)){o(_e);return}Oe(l)&&(d(Je=>new Set([...Je,l])),o(_e))},Ve=_e=>{var re;const Je=(re=_e.target.files)==null?void 0:re[0];if(!Je)return;if(!String(Je.type||"").toLowerCase().startsWith("image/")){k({type:"error",text:"Please select an image file"});return}lr.current&&URL.revokeObjectURL(lr.current);const B=URL.createObjectURL(Je);lr.current=B,Ct({x:0,y:0,width:0,height:0}),qe({x:40,y:40,size:170}),et(B),ye(!0),v(st=>{const ct={...st};return delete ct.photo,ct})},Xe=()=>{const _e=$t.current;if(!_e)return;const Je=o_(_e);Ct(Je);const B=Math.max(Math.min(Je.width,Je.height),1),re=Math.min(Vg,B),st=Math.max(B*.8,re);qe(c_({x:Je.x+(Je.width-st)/2,y:Je.y+(Je.height-st)/2,size:st},Je))},he=_e=>{_e.preventDefault();const Je=_e.currentTarget.getBoundingClientRect();Wt.current={x:_e.clientX-Je.left,y:_e.clientY-Je.top},mt(!0)},W=_e=>{const Je=$t.current;if(!Je)return;const B=o_(Je);Ct(B);const re=Math.max(Math.min(B.width,B.height),1),st=Math.min(Vg,re),ct=Math.min(Math.max(Number(_e.target.value),st),re),Ee=B.x,Ft=B.y,pt=Math.max(B.x+B.width-ct,Ee),Mt=Math.max(B.y+B.height-ct,Ft);qe(Bt=>{const yr=Bt.x+Bt.size/2,Tr=Bt.y+Bt.size/2;return{size:ct,x:Math.min(Math.max(yr-ct/2,Ee),pt),y:Math.min(Math.max(Tr-ct/2,Ft),Mt)}})},V=()=>{ye(!1),et(""),mt(!1),Ct({x:0,y:0,width:0,height:0}),lr.current&&(URL.revokeObjectURL(lr.current),lr.current="")},Q=()=>{if(!$t.current)return;const _e=$t.current,Je=o_(_e),B=Je.width>0&&Je.height>0?Je:{x:0,y:0,width:_e.clientWidth,height:_e.clientHeight};if(B.width<=0||B.height<=0)return;const re=c_(We,B),st=_e.naturalWidth/B.width,ct=_e.naturalHeight/B.height,Ee=Math.max((re.x-B.x)*st,0),Ft=Math.max((re.y-B.y)*ct,0),pt=Math.min(Math.max(re.size*st,1),_e.naturalWidth-Ee),Mt=Math.min(Math.max(re.size*ct,1),_e.naturalHeight-Ft),Bt=document.createElement("canvas");Bt.width=Mx,Bt.height=Mx;const yr=Bt.getContext("2d");yr&&(yr.drawImage(_e,Ee,Ft,pt,Mt,0,0,Mx,Mx),Bt.toBlob(Tr=>{if(!Tr)return;A(Tr),sr.current&&URL.revokeObjectURL(sr.current);const Ps=URL.createObjectURL(Tr);sr.current=Ps,T(Ps),V()},"image/jpeg",.92))},K=(_e,Je)=>{Ie({type:_e,text:Je})},q=()=>{wt.current&&(wt.current.value="")},F=()=>{I(null),Z(null),Y(0),ke(""),q()},ee=()=>{v(_e=>{if(!_e.resume)return _e;const Je={..._e};return delete Je.resume,Je})},me=(_e="upload")=>{At.current=_e,wt.current&&(wt.current.value="",wt.current.click())},Ne=async(_e,Je={})=>{var ct;const{silent:B=!1}=Je,re=kR(_e);if(!re.valid)return B||(k({type:"error",text:re.message}),K("error",re.message)),{ok:!1,queued:!1,message:re.message};X(!0),Y(0),ke("Uploading resume..."),Z(_e),ee();const st=new FormData;st.append("file",_e);try{const Ee=await G.post("/v1/candidate/resume",st,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Mt=>{Mt.total&&Y(Math.round(Mt.loaded*100/Mt.total))}}),Ft=Do(Ee)||(Ee==null?void 0:Ee.data)||{},pt=Et(Ft,["resume_url","resumeUrl","resume_path","resumePath","url","path"],"");return pt&&E(pt),I(null),R(_e.name),Y(100),ke("Resume uploaded successfully."),ee(),B||k({type:"success",text:"Resume uploaded successfully."}),{ok:!0,queued:!1,url:pt}}catch(Ee){const Ft=Number(((ct=Ee==null?void 0:Ee.response)==null?void 0:ct.status)||0);if(new Set([400,404,405,422]).has(Ft))return I(_e),ke("Resume selected. It will upload when you save your profile."),B||k({type:"success",text:"Resume selected. It will upload when profile is saved."}),{ok:!1,queued:!0};const Mt=d_(Ee,"Failed to upload resume.");return B||(k({type:"error",text:Mt}),K("error",Mt)),{ok:!1,queued:!1,message:Mt}}finally{X(!1)}},ge=async _e=>{var B;const Je=kR(_e);if(!Je.valid){k({type:"error",text:Je.message}),K("error",Je.message);return}J(!0),ke("Parsing your resume..."),Z(_e),ee();try{if(!S||!H||H!==_e.name){const Mt=await Ne(_e,{silent:!0});if(!Mt.ok&&!Mt.queued){const Bt=Mt.message||"Unable to upload resume for parsing.";k({type:"error",text:`${Bt} You can continue with manual entry.`}),K("error",Bt);return}}const st=new FormData;st.append("file",_e);const ct=await G.post("/v1/candidate/resume/parse",st,{headers:{"Content-Type":"multipart/form-data"}}),Ee=Do(ct)||(ct==null?void 0:ct.data)||{},Ft=(Ee==null?void 0:Ee.parsed)||((B=Ee==null?void 0:Ee.data)==null?void 0:B.parsed)||Ee,pt=LAe(Ft);if(!IAe(pt)){const Mt="No usable details were found in this resume.";k({type:"error",text:`${Mt} Please fill details manually or try another resume.`}),K("error",Mt);return}se(pt),Te(FAe(u,pt)),je(!0),ke("Resume parsed. Review details before applying."),k({type:"success",text:"Resume parsed successfully."}),K("success","Resume parsed successfully.")}catch(re){const st=d_(re,"Unable to parse resume right now.");k({type:"error",text:`${st} You can continue with manual entry.`}),K("error","Could not parse resume. You can continue manually.")}finally{J(!1)}},te=async _e=>{var B;const Je=(B=_e.target.files)==null?void 0:B[0];Je&&(Z(Je),ke(`Selected: ${Je.name}`),ee(),At.current==="parse"?await ge(Je):await Ne(Je),q())},Se=async()=>{if(!(ne||M)){if(L){await ge(L);return}me("parse")}},Ue=()=>{ie&&(f(_e=>DAe(_e,ie)),je(!1),se(null),Te([]),k({type:"success",text:"Parsed details added. Please review and save your profile."}),K("success","Details filled from resume."))},Be=()=>{je(!1)},Ge=async()=>{var re;if(!xe()){k({type:"error",text:"Please fix highlighted fields."});return}w(!0),k(null);const _e=t||x||null,Je=MAe(u),B={headers:{"Content-Type":"multipart/form-data"}};try{let st;if(s){let Bt=null,yr=null;try{st=await G.put("/v1/candidate/me",Je)}catch(yn){const Br=Number((re=yn==null?void 0:yn.response)==null?void 0:re.status);if(Br===405)st=await G.patch("/v1/candidate/me",Je);else if(Br===404){const Oa=AR(u,P,O);_e?st=await G.put(`/v1/candidates/${_e}`,Oa,B):st=await G.post("/v1/candidates",Oa,B);const Os=zx(Do(st)||{}),oe=Os.id||_e||null,Le=Os.photoUrl||C||"",Qe=Os.resumeUrl||S||"";f(Os.data),g(Os.data),h(oe),T(Le),E(Qe),R(String(Qe||"").split("/").pop()||""),Ce(Le),at(Qe),A(null),F(),se(null),Te([]),je(!1),i("view"),o(0),d(new Set(ml.map((dt,ae)=>ae))),k({type:"success",text:"Profile saved successfully."}),!t&&oe&&e(`/candidate/profile/${oe}`,{replace:!0});return}else throw yn}if(O){const yn=new FormData;yn.append("file",O);const Br=await G.post("/v1/candidate/resume",yn,B);Bt=Do(Br)||(Br==null?void 0:Br.data)||null}if(P){const yn=new FormData;yn.append("file",P,"profile-photo.jpg");const Br=await G.post("/v1/candidate/me/photo",yn,B);yr=Do(Br)||(Br==null?void 0:Br.data)||null}try{st=await G.get("/v1/candidate/me")}catch{}const Tr=zx(Do(st)||{}),Ps=(yr==null?void 0:yr.photo_url)||(yr==null?void 0:yr.photoUrl)||"",vt=(Bt==null?void 0:Bt.resume_url)||(Bt==null?void 0:Bt.resumeUrl)||"",gn=Tr.photoUrl||Ps||C||"",js=Tr.resumeUrl||vt||S||"",xa=Tr.id||_e||null;f(Tr.data),g(Tr.data),h(xa),T(gn),E(js),R(String(js||"").split("/").pop()||""),Ce(gn),at(js),A(null),F(),se(null),Te([]),je(!1),i("view"),o(0),d(new Set(ml.map((yn,Br)=>Br))),k({type:"success",text:"Profile saved successfully."}),!t&&xa&&e(`/candidate/profile/${xa}`,{replace:!0});return}const ct=AR(u,P,O);_e?st=await G.put(`/v1/candidates/${_e}`,ct,B):st=await G.post("/v1/candidates",ct,B);const Ee=zx(Do(st)||{}),Ft=Ee.id||_e||null,pt=Ee.photoUrl||C||"",Mt=Ee.resumeUrl||S||"";f(Ee.data),g(Ee.data),h(Ft),T(pt),E(Mt),R(String(Mt||"").split("/").pop()||""),Ce(pt),at(Mt),A(null),F(),se(null),Te([]),je(!1),i("view"),o(0),d(new Set(ml.map((Bt,yr)=>yr))),k({type:"success",text:"Profile saved successfully."}),!t&&Ft&&e(`/candidate/profile/${Ft}`,{replace:!0})}catch(st){console.error(st),k({type:"error",text:d_(st,"Failed to save profile")})}finally{w(!1)}},tt=_e=>{const Je=NR.has(_e.key),B=p[_e.key];if(_e.type==="add-more-education"){const re=Array.isArray(u.additionalEducations)?u.additionalEducations:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>nt("additionalEducations",CAe),children:"+ Add More Education"})]}),re.length===0?n.jsx("p",{className:"cp-hint",children:"No additional education added."}):n.jsx("div",{className:"cp-repeatable-list",children:re.map((st,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Highest Degree"}),n.jsx("input",{type:"text",className:"cp-input",value:st.highestDegree||"",onChange:Ee=>ze("additionalEducations",ct,"highestDegree",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"College Name"}),n.jsx("input",{type:"text",className:"cp-input",value:st.collegeName||"",onChange:Ee=>ze("additionalEducations",ct,"collegeName",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"CGPA / %"}),n.jsx("input",{type:"text",className:"cp-input",value:st.cgpaPercentage||"",onChange:Ee=>ze("additionalEducations",ct,"cgpaPercentage",Ee.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ht("additionalEducations",ct),children:"Remove"})})]},`edu-${ct}`))}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key)}if(_e.type==="add-more-certification"){const re=Array.isArray(u.additionalCertifications)?u.additionalCertifications:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>nt("additionalCertifications",AAe),children:"+ Add More Certification"})]}),re.length===0?n.jsx("p",{className:"cp-hint",children:"No additional certification added."}):n.jsx("div",{className:"cp-repeatable-list",children:re.map((st,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Certification Name"}),n.jsx("input",{type:"text",className:"cp-input",value:st.certificationName||"",onChange:Ee=>ze("additionalCertifications",ct,"certificationName",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Credential ID"}),n.jsx("input",{type:"text",className:"cp-input",value:st.certificationCredentialId||"",onChange:Ee=>ze("additionalCertifications",ct,"certificationCredentialId",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Credential Link"}),n.jsx("input",{type:"text",className:"cp-input",value:st.certificationCredentialLink||"",onChange:Ee=>ze("additionalCertifications",ct,"certificationCredentialLink",Ee.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ht("additionalCertifications",ct),children:"Remove"})})]},`cert-${ct}`))}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key)}if(_e.type==="add-more-experience"){const re=Array.isArray(u.additionalExperiences)?u.additionalExperiences:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>nt("additionalExperiences",EAe),children:"+ Add More Experience"})]}),re.length===0?n.jsx("p",{className:"cp-hint",children:"No additional experience added."}):n.jsx("div",{className:"cp-repeatable-list",children:re.map((st,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Company Worked For"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceCompany||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceCompany",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Role"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceRole||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceRole",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Project Done"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceProject||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceProject",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Skills Learnt"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceSkillsLearnt||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceSkillsLearnt",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Years"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceYears||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceYears",Ee.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"CTC There"}),n.jsx("input",{type:"text",className:"cp-input",value:st.experienceCtc||"",onChange:Ee=>ze("additionalExperiences",ct,"experienceCtc",Ee.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ht("additionalExperiences",ct),children:"Remove"})})]},`exp-${ct}`))}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key)}if(_e.type==="photo")return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Je&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsxs("div",{className:"cp-photo-row",children:[n.jsx("img",{src:yt,alt:"Candidate",className:"cp-photo"}),n.jsxs("div",{children:[n.jsx("input",{ref:rt,type:"file",accept:"image/*",capture:"user",className:"cp-hidden",onChange:Ve}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>{rt.current&&(rt.current.value="",rt.current.click())},children:"Upload & Crop"}),n.jsx("p",{className:"cp-hint",children:"Optional. Output: 300x300."})]})]}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key);if(_e.type==="file"){const re=_e.key==="resume",st=(L==null?void 0:L.name)||(O==null?void 0:O.name)||"",ct=S?SR(S):"",Ee=M||ne;return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,re&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("input",{ref:wt,type:"file",accept:".pdf,.doc,.docx",className:"cp-hidden",onChange:te}),n.jsxs("div",{className:`cp-resume-panel ${B?"cp-input-error":""}`,children:[n.jsxs("div",{className:"cp-resume-actions-row",children:[n.jsxs("button",{type:"button",className:"cp-btn cp-btn-primary cp-resume-action-btn",onClick:()=>me("upload"),disabled:Ee,children:[n.jsx(s4e,{size:16}),n.jsx("span",{children:M?"Uploading...":"Upload Resume"})]}),n.jsxs("button",{type:"button",className:"cp-btn cp-btn-secondary cp-resume-action-btn",onClick:Se,disabled:Ee,children:[n.jsx(QCe,{size:16}),n.jsx("span",{children:ne?"Parsing...":"Parse Resume"})]})]}),n.jsxs("div",{className:"cp-resume-meta",children:[n.jsx(cn,{size:16}),n.jsxs("div",{children:[n.jsx("p",{className:"cp-resume-file-name",children:st?`Selected: ${st}`:S?"Resume uploaded":"No resume selected"}),n.jsx("p",{className:"cp-hint",children:"Accepted formats: PDF, DOC, DOCX. Max size: 5 MB."}),ct&&n.jsx("a",{href:ct,target:"_blank",rel:"noreferrer",className:"cp-resume-link",children:"View uploaded resume"})]})]}),M&&n.jsxs("div",{className:"cp-upload-progress-wrap",children:[n.jsx("div",{className:"cp-upload-progress-bar",children:n.jsx("div",{className:"cp-upload-progress-fill",style:{width:`${D}%`}})}),n.jsxs("span",{children:[D,"%"]})]}),ne&&n.jsxs("div",{className:"cp-resume-parse-state",children:[n.jsx("span",{className:"cp-inline-loader"}),n.jsx("span",{children:"Parsing your resume..."})]}),!ne&&jn(ue)&&n.jsx("p",{className:"cp-hint cp-resume-status",children:ue})]}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key)}return _e.type==="textarea"?n.jsxs("label",{className:`cp-field ${_e.full?"cp-full":""}`,children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Je&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("textarea",{className:`cp-input cp-textarea ${B?"cp-input-error":""}`,rows:4,value:u[_e.key]||"",onChange:re=>be(_e.key,re.target.value),onBlur:re=>be(_e.key,Vt(re.target.value))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key):_e.type==="checkbox"?n.jsxs("label",{className:"cp-field cp-checkbox",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("input",{type:"checkbox",checked:!!u[_e.key],onChange:re=>be(_e.key,re.target.checked)})]},_e.key):_e.type==="select"?n.jsxs("label",{className:"cp-field",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Je&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("select",{className:`cp-input ${B?"cp-input-error":""}`,value:u[_e.key]||"",onChange:re=>be(_e.key,re.target.value),children:_e.options.map(re=>n.jsx("option",{value:re,children:re||"Select"},re||"empty"))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key):n.jsxs("label",{className:"cp-field",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Je&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("input",{type:_e.type||"text",className:`cp-input ${B?"cp-input-error":""}`,value:u[_e.key]||"",onChange:re=>be(_e.key,re.target.value),onBlur:re=>be(_e.key,Vt(re.target.value))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),B&&n.jsx("span",{className:"cp-error",children:B})]},_e.key)};return b?n.jsxs("div",{className:"cp-loading",children:[n.jsx("div",{className:"cp-spinner"}),n.jsx("p",{children:"Loading profile..."})]}):n.jsxs("div",{className:"cp-page",children:[_&&n.jsx("div",{className:`cp-banner ${_.type==="error"?"cp-banner-error":"cp-banner-success"}`,children:_.text}),fe&&n.jsxs("div",{className:`cp-toast ${fe.type==="error"?"cp-toast-error":"cp-toast-success"}`,children:[fe.type==="error"?n.jsx(Ks,{size:16}):n.jsx(ep,{size:16}),n.jsx("span",{children:fe.text})]}),n.jsxs("section",{className:"cp-header",children:[n.jsxs("div",{className:"cp-head-left",children:[n.jsx("img",{src:yt,alt:"Candidate",className:"cp-head-photo"}),n.jsxs("div",{children:[n.jsx("h1",{children:De}),n.jsx("p",{children:u.designation||"Designation not added"}),n.jsx("p",{children:u.experienceYears?`${u.experienceYears} yrs experience`:"Experience not added"})]})]}),n.jsx("div",{children:a==="view"?n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:()=>{i("edit"),o(0),v({}),k(null),f(m)},children:"Edit Profile"}):n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>{a==="edit"?(f(m),T(ce||""),E(Ye||""),A(null),F(),R(String(Ye||"").split("/").pop()||""),se(null),Te([]),je(!1),i("view")):e(-1)},children:a==="edit"?"Cancel Edit":"Back"})})]}),a==="view"?n.jsx("section",{className:"cp-view",children:Ux.map((_e,Je)=>n.jsxs("div",{className:"cp-view-card",children:[n.jsx("h2",{children:ml[Je]}),n.jsxs("div",{className:"cp-view-grid",children:[_e.filter(B=>!String(B.type||"").startsWith("add-more-")&&B.type!=="photo"&&B.type!=="file").map(B=>n.jsxs("div",{className:`cp-view-item ${B.full?"cp-full":""}`,children:[n.jsx("span",{children:B.label}),n.jsx("strong",{children:B.key==="readyToRelocate"?u[B.key]?"Yes":"No":u[B.key]||"-"})]},B.key)),Je===3&&Array.isArray(u.additionalEducations)&&u.additionalEducations.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Education"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalEducations.map((B,re)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Highest Degree"}),n.jsx("strong",{children:B.highestDegree||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"College Name"}),n.jsx("strong",{children:B.collegeName||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"CGPA / %"}),n.jsx("strong",{children:B.cgpaPercentage||"-"})]})]})},`view-edu-${re}`))})]}),Je===5&&Array.isArray(u.additionalCertifications)&&u.additionalCertifications.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Certifications"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalCertifications.map((B,re)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Certification Name"}),n.jsx("strong",{children:B.certificationName||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Credential ID"}),n.jsx("strong",{children:B.certificationCredentialId||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Credential Link"}),n.jsx("strong",{children:B.certificationCredentialLink||"-"})]})]})},`view-cert-${re}`))})]}),Je===6&&Array.isArray(u.additionalExperiences)&&u.additionalExperiences.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Experience"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalExperiences.map((B,re)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Company Worked For"}),n.jsx("strong",{children:B.experienceCompany||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Role"}),n.jsx("strong",{children:B.experienceRole||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Project Done"}),n.jsx("strong",{children:B.experienceProject||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Skills Learnt"}),n.jsx("strong",{children:B.experienceSkillsLearnt||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Years"}),n.jsx("strong",{children:B.experienceYears||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"CTC There"}),n.jsx("strong",{children:B.experienceCtc||"-"})]})]})},`view-exp-${re}`))})]})]})]},ml[Je]))}):n.jsxs("section",{className:"cp-form-wrap",children:[n.jsx("div",{className:"cp-steps",children:ml.map((_e,Je)=>n.jsxs("button",{type:"button",className:`cp-step ${Je===l?"active":""} ${c.has(Je)||Je<l?"done":""}`,onClick:()=>Me(Je),children:[n.jsx("span",{children:c.has(Je)||Je<l?"OK":Je+1}),n.jsx("small",{children:_e})]},_e))}),n.jsxs("div",{className:"cp-card",children:[n.jsx("h2",{children:`${l+1}. ${ml[l]}`}),n.jsx("div",{className:"cp-grid",children:Ux[l].map(_e=>tt(_e))}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:le,disabled:l===0,children:"Previous"}),l<ml.length-1?n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Re,children:"Next"}):n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Ge,disabled:N,children:N?"Saving...":a==="edit"?"Save Profile":"Complete Profile"})]})]})]}),pe&&n.jsx("div",{className:"cp-crop-backdrop",children:n.jsxs("div",{className:"cp-crop-modal",children:[n.jsx("h3",{children:"Crop Photo"}),n.jsx("p",{children:"Drag crop square and adjust size."}),n.jsxs("div",{className:"cp-crop-wrap",children:[n.jsx("img",{ref:$t,src:Pe,alt:"Crop source",className:"cp-crop-image",onLoad:Xe,draggable:!1}),n.jsx("div",{className:"cp-crop-box",style:{left:We.x,top:We.y,width:We.size,height:We.size},onMouseDown:he})]}),n.jsx("input",{type:"range",min:Lt,max:ut,value:Math.round(Math.min(Math.max(We.size,Lt),ut)),onChange:W}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:V,children:"Cancel"}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Q,children:"Apply Crop"})]})]})}),ve&&ie&&n.jsx("div",{className:"cp-crop-backdrop",children:n.jsxs("div",{className:"cp-parse-modal",children:[n.jsxs("h3",{children:[n.jsx(nAe,{size:18}),n.jsx("span",{children:"We found these details from your resume."})]}),n.jsx("p",{children:"Review these details, then choose whether to auto-fill your profile."}),n.jsx("div",{className:"cp-parse-preview-list",children:Yt.length>0?Yt.map(_e=>n.jsxs("div",{className:"cp-parse-preview-item",children:[n.jsx("strong",{children:_e.label}),n.jsx("span",{children:_e.value})]},`${_e.label}-${_e.value}`)):n.jsx("p",{className:"cp-hint",children:"No details were extracted."})}),z.length>0&&n.jsxs("div",{className:"cp-parse-conflict-box",children:[n.jsxs("p",{className:"cp-parse-conflict-title",children:["Existing data detected in ",z.length," field",z.length>1?"s":"","."]}),n.jsx("ul",{className:"cp-parse-conflict-list",children:z.map(_e=>n.jsxs("li",{children:[n.jsxs("strong",{children:[_e.label,":"]})," existing value will be replaced after confirmation."]},_e.key))})]}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:Be,children:"Edit Manually"}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Ue,children:"Accept & Fill"})]})]})})]})}const BAe=e=>{if(!e)return!1;const t=e.replace(/\s+/g,"");return/^(\+91)?[6-9]\d{9}$/.test(t)};function UAe(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState(new Set),[i,l]=y.useState(null),[o,c]=y.useState(!0),[d,u]=y.useState(""),f=async()=>{var p;try{const v=await G.get("/v1/candidate/me");l((p=v.data)==null?void 0:p.data)}catch(v){console.error("loadProfile",v)}},m=async()=>{var p,v,b;c(!0),u("");try{const j=await G.get("/v1/jobs",{params:{public:!0,limit:100}});console.log("Jobs API Response:",j.data);let N=[];Array.isArray(j.data)?N=j.data:(p=j.data)!=null&&p.jobs&&Array.isArray(j.data.jobs)?N=j.data.jobs:(v=j.data)!=null&&v.data&&Array.isArray(j.data.data)?N=j.data.data:(b=j.data)!=null&&b.items&&Array.isArray(j.data.items)&&(N=j.data.items),r(N),N.length===0&&u("No jobs available at the moment")}catch(j){console.error("loadJobs error:",j),u("Failed to load jobs. Please try again later.")}finally{c(!1)}},g=async()=>{var p;try{const b=((p=(await G.get("/v1/candidate/me/applications")).data)==null?void 0:p.applications)??[],j=new Set(b.map(N=>N.job_id??N.jobId));a(j)}catch{console.warn("Could not load applied jobs")}};y.useEffect(()=>{f(),m(),g()},[]);const x=async p=>{var v,b,j,N,w,_;if(!(i!=null&&i.phone)||!BAe(i.phone)){alert("Please add a valid Indian mobile number in your profile"),e("/candidate/profile");return}try{const k=await G.post("/v1/candidate/me/apply",{job_id:p});alert(((v=k.data)==null?void 0:v.message)||"Applied Successfully!"),a(C=>new Set(C).add(p))}catch(k){if(((b=k.response)==null?void 0:b.status)===409){alert("You have already applied for this job");return}alert(((N=(j=k.response)==null?void 0:j.data)==null?void 0:N.detail)||((_=(w=k.response)==null?void 0:w.data)==null?void 0:_.message)||"Failed to apply for job")}};if(o)return n.jsx("div",{className:"p-4",children:"Loading jobs..."});if(d)return n.jsx("div",{className:"p-4 text-red-600",children:d});if(!t.length)return n.jsx("div",{className:"p-4",children:"No open roles found."});const h=i&&!i.profile_completed;return n.jsxs("div",{className:"space-y-4 p-4",children:[h&&n.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 p-3 rounded text-sm",children:[" Your profile is incomplete (",i.profile_strength_percentage??i.profile_completion??0,"%).",n.jsx("button",{onClick:()=>e("/candidate/profile"),className:"ml-2 text-blue-600 underline",children:"Complete profile"}),"to apply for jobs."]}),t.map(p=>{const v=p.id??p.job_id,b=s.has(v);return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-start",children:[n.jsxs("div",{className:"max-w-[70%]",children:[n.jsx("div",{className:"font-semibold text-lg",children:p.title??p.job_title}),n.jsx("div",{className:"text-sm text-gray-600",children:p.location??p.location_city??"Remote"}),p.short_description&&n.jsx("div",{className:"text-sm mt-2",children:p.short_description})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b?n.jsx("button",{disabled:!0,className:"px-4 py-1 text-sm rounded bg-gray-300 text-gray-700 cursor-not-allowed",children:"Applied"}):n.jsx("button",{disabled:h,onClick:()=>x(v),className:`px-4 py-1 text-sm rounded text-white ${h?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:"Apply"}),n.jsx("a",{href:`/careers/job/${v}`,className:"text-sm text-blue-600",children:"View details"})]})]},v)})]})}function zAe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(""),l=async()=>{var c,d;s(!0),i("");try{const u=await G.get("/v1/candidate/me/applications"),f=((c=u.data)==null?void 0:c.applications)??((d=u.data)==null?void 0:d.data)??u.data??[];t(f)}catch(u){console.error("loadApps",u),i("Failed to load your applications.")}finally{s(!1)}};if(y.useEffect(()=>{l()},[]),r)return n.jsx("div",{className:"p-4",children:"Loading your applications..."});if(a)return n.jsx("div",{className:"p-4 text-red-600",children:a});if(!e.length)return n.jsx("div",{className:"p-4 text-gray-600",children:"You havent applied to any jobs yet."});const o=c=>{switch(String(c).toLowerCase()){case"submitted":return"bg-blue-100 text-blue-700";case"reviewing":return"bg-yellow-100 text-yellow-700";case"shortlisted":return"bg-purple-100 text-purple-700";case"interview":return"bg-indigo-100 text-indigo-700";case"selected":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsx("div",{className:"p-4 space-y-3",children:e.map(c=>{var x,h;const d=c.application_id??c.id,u=c.job_title??((x=c.job)==null?void 0:x.title)??c.job_title_display??"Job",f=c.job_location??((h=c.job)==null?void 0:h.location)??c.location??"",m=c.created_at??c.applied_at??Date.now(),g=c.status??c.application_status??"submitted";return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-base",children:u}),n.jsx("div",{className:"text-sm text-gray-600",children:f}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Applied on ",new Date(m).toLocaleString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`px-3 py-1 rounded text-sm font-medium ${o(g)}`,children:String(g)}),c.notes&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.notes})]})]},d)})})}function WAe(){const[e,t]=y.useState(!0),[r,s]=y.useState([]);return y.useEffect(()=>{G.get("/v1/candidate/me/notifications").then(a=>s(a.data||[])).finally(()=>t(!1))},[]),e?n.jsx("div",{children:"Loading notifications..."}):r.length?n.jsx("div",{className:"bg-white rounded shadow divide-y",children:r.map(a=>n.jsxs("div",{className:"p-4",children:[n.jsx("p",{className:"font-medium",children:a.title||"Notification"}),a.message&&n.jsx("p",{className:"text-sm text-gray-600",children:a.message}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.created_at).toLocaleString()})]},a.id))}):n.jsx("div",{className:"text-gray-500",children:"No notifications yet"})}const Fi={DASHBOARD:"dashboard",NOTIFICATIONS:"notifications",PROFILE:"profile",APPLY:"apply",APPLIED:"applied"};function Vx({title:e,value:t,helper:r}){return n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t}),r&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r})]})}function TR(){const[e,t]=y.useState(!0),[r,s]=y.useState({applications:0,newJobs:0,profileCompletion:0,interviewStatus:"No Interview Scheduled",interviewDate:null}),a=i=>{if(!i)return null;const l=new Date(i);return Number.isNaN(l.getTime())?null:l.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};return y.useEffect(()=>{G.get("/v1/candidate/dashboard-summary").then(i=>{const l=i.data||{};s({applications:l.total_applications??0,newJobs:l.new_jobs??0,profileCompletion:l.profile_completion??0,interviewStatus:l.next_interview_status||"No Interview Scheduled",interviewDate:l.next_interview_date||null})}).finally(()=>t(!1))},[]),e?n.jsx("div",{children:"Loading dashboard..."}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Vx,{title:"Profile Completion %",value:`${r.profileCompletion}%`}),n.jsx(Vx,{title:"Total Applications",value:r.applications}),n.jsx(Vx,{title:"New Jobs",value:r.newJobs}),n.jsx(Vx,{title:"Interview Status",value:r.interviewStatus,helper:a(r.interviewDate)})]})})}function _u(){const e=ys(),[t,r]=y.useState(Fi.DASHBOARD),[s,a]=y.useState(null);y.useEffect(()=>{G.get("/v1/candidate/me").then(l=>{var o;return a((o=l.data)==null?void 0:o.data)})},[]),y.useEffect(()=>{const l=e.pathname;if(l.includes("/candidate/notifications")){r(Fi.NOTIFICATIONS);return}if(l.includes("/candidate/complete-profile")){r(Fi.PROFILE);return}if(l.includes("/candidate/apply-jobs")){r(Fi.APPLY);return}if(l.includes("/candidate/applied-jobs")){r(Fi.APPLIED);return}r(Fi.DASHBOARD)},[e.pathname]);const i=()=>{switch(t){case Fi.DASHBOARD:return n.jsx(TR,{});case Fi.NOTIFICATIONS:return n.jsx(WAe,{});case Fi.PROFILE:return n.jsx(Hg,{});case Fi.APPLY:return n.jsx(UAe,{});case Fi.APPLIED:return n.jsx(zAe,{});default:return n.jsx(TR,{})}};return n.jsxs("div",{className:"space-y-6",children:[s&&n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:s.photo_url?`http://localhost:8000/${s.photo_url}`:"https://ui-avatars.com/api/?name=Candidate",className:"w-12 h-12 rounded-full object-cover",alt:"Profile"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:s.full_name}),n.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),i()]})}const VAe=(e,t={})=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(e,{detail:t}))},HAe=(e,t)=>typeof window>"u"?()=>{}:(window.addEventListener(e,t),()=>window.removeEventListener(e,t)),Ki={emit:VAe,on:HAe};function WC(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState({currentPage:1,totalPages:1,totalRecords:0,limit:9}),c=async(x={})=>{s(!0);try{const p=(await G.get("/v1/roles",{params:x})).data,v=Array.isArray(p)?p:(p==null?void 0:p.data)||(p==null?void 0:p.roles)||[];t(Array.isArray(v)?v:[]);const b=Number(x.limit)||Number(p==null?void 0:p.limit)||l.limit||9,j=(p==null?void 0:p.totalRecords)??(p==null?void 0:p.total)??(Array.isArray(v)?v.length:0),N=(p==null?void 0:p.totalPages)??Math.max(1,Math.ceil((j||0)/Math.max(1,b))),w=(p==null?void 0:p.currentPage)??(Number(x.page)||1);return o({currentPage:w,totalPages:N,totalRecords:j,limit:b}),i(null),Array.isArray(v)?v:[]}catch(h){return i(h),t([]),o({currentPage:1,totalPages:1,totalRecords:0,limit:Number(x.limit)||9}),[]}finally{s(!1)}};return y.useEffect(()=>{c()},[]),{roles:e,loading:r,error:a,pagination:l,fetch:c,createRole:async x=>{const h=await G.post("/v1/roles",x);return t(p=>[h.data,...p]),o(p=>({...p,totalRecords:p.totalRecords+1})),Ki.emit("roles:updated",{role:h.data}),h.data},updateRole:async(x,h)=>{const p=await G.put(`/v1/roles/${x}`,h);return t(v=>v.map(b=>b.id===x?p.data:b)),Ki.emit("roles:updated",{role:p.data}),p.data},deleteRole:async x=>{await G.delete(`/v1/roles/${x}`),t(h=>h.filter(p=>p.id!==x)),o(h=>({...h,totalRecords:Math.max(0,h.totalRecords-1)})),Ki.emit("roles:updated",{roleId:x})},fetchRolePermissions:async x=>((await G.get(`/v1/roles/${x}/permissions`)).data||[]).map(b=>typeof b=="string"?b:b.key).filter(Boolean),setRolePermissions:async(x,h=[])=>{const p=await G.put(`/v1/roles/${x}/permissions`,{permissionKeys:h});return Ki.emit("role-permissions:updated",{roleId:x,permissionKeys:h}),Ki.emit("roles:updated",{roleId:x}),p.data},setRoles:t}}function VC(){const[e,t]=y.useState({}),[r,s]=y.useState(!1),a=String(localStorage.getItem("role")||"").trim().toLowerCase().replace(/\s+/g,"_");y.useEffect(()=>{let l=!0;return(async()=>{var c;s(!0);try{const d=await G.get("/v1/config/permissions");l&&t(((c=d==null?void 0:d.data)==null?void 0:c.permissions)||{})}catch{l&&t({})}finally{l&&s(!1)}})(),()=>{l=!1}},[]);const i=y.useMemo(()=>(l,o)=>{var f;const c=String(l||"").toLowerCase(),d=String(o||"").toLowerCase();return!c||!d?!1:a==="super_admin"?!0:(((f=e==null?void 0:e[a])==null?void 0:f[c])||[]).includes(d)},[e,a]);return{role:a,loading:r,permissions:(e==null?void 0:e[a])||{},can:i}}function qAe({initial:e=null,onSubmit:t,onCancel:r}){const[s,a]=y.useState(""),[i,l]=y.useState(""),[o,c]=y.useState(!1);y.useEffect(()=>{e?(a(e.name||""),l(e.description||"")):(a(""),l(""))},[e]);const d=async u=>{var h,p;u.preventDefault();const f=Vt(s),m=Vt(i),g=ll(f,"Role name",{pattern:/^[A-Za-z0-9_ ]+$/,patternMessage:"Role name can only contain letters, numbers, spaces, and underscores."});if(g)return alert(g);const x=wo(m,{minLength:20});if(x)return alert(x);c(!0);try{await t({name:f,description:m},e==null?void 0:e.id)}catch(v){console.error("Role save error",v),alert(((p=(h=v==null?void 0:v.response)==null?void 0:h.data)==null?void 0:p.detail)||"Failed to save role")}finally{c(!1)}};return n.jsxs("form",{onSubmit:d,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Role name *"}),n.jsx("input",{className:"w-full border rounded p-2",placeholder:"e.g. Recruiter",value:s,onChange:u=>a(u.target.value),onBlur:u=>a(Vt(u.target.value)),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Description"}),n.jsx("input",{className:"w-full border rounded p-2",placeholder:"Short description (optional)",value:i,onChange:u=>l(u.target.value),onBlur:u=>l(Vt(u.target.value))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Saving...":e?"Save":"Create"}),r&&n.jsx("button",{type:"button",onClick:r,className:"px-3 py-2 border rounded",children:"Cancel"})]})]})}function GAe({open:e=!1,initial:t=null,onClose:r,onSubmit:s}){const[a,i]=y.useState({name:"",description:""}),[l,o]=y.useState(!1);if(y.useEffect(()=>{i(t?{name:t.name||"",description:t.description||""}:{name:"",description:""})},[t,e]),!e)return null;const c=async d=>{var x,h;d.preventDefault();const u=Vt(a.name),f=Vt(a.description),m=ll(u,"Role name",{pattern:/^[A-Za-z0-9_ ]+$/,patternMessage:"Role name can only contain letters, numbers, spaces, and underscores."});if(m)return alert(m);const g=wo(f,{minLength:20});if(g)return alert(g);o(!0);try{await s({name:u,description:f},t==null?void 0:t.id),r()}catch(p){console.error("Save role failed",p),alert(((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.detail)||"Failed to save role")}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit Role":"Create Role"}),n.jsx("button",{onClick:r,className:"px-2 py-1 rounded bg-gray-100",children:"Close"})]}),n.jsxs("form",{onSubmit:c,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Role name *"}),n.jsx("input",{required:!0,value:a.name,onChange:d=>i(u=>({...u,name:d.target.value})),onBlur:d=>i(u=>({...u,name:Vt(d.target.value)})),className:"w-full border p-2 rounded",placeholder:"Recruiter"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Description"}),n.jsx("input",{value:a.description,onChange:d=>i(u=>({...u,description:d.target.value})),onBlur:d=>i(u=>({...u,description:Vt(d.target.value)})),className:"w-full border p-2 rounded",placeholder:"Optional description"})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"px-3 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Saving...":t?"Save":"Create"})]})]})]})})}function JAe({role:e,permissions:t=[],onClose:r}){const{fetchRolePermissions:s,setRolePermissions:a}=WC(),[i,l]=y.useState(new Set),[o,c]=y.useState(!0),[d,u]=y.useState(!1);y.useEffect(()=>{let h=!0;return c(!0),s(e.id).then(p=>{h&&l(new Set(p||[]))}).catch(()=>{h&&l(new Set)}).finally(()=>{h&&c(!1)}),()=>{h=!1}},[e==null?void 0:e.id]);const f=h=>{l(p=>{const v=new Set(p);return v.has(h)?v.delete(h):v.add(h),v})},m=()=>l(new Set(t.map(h=>h.key))),g=()=>l(new Set),x=async()=>{u(!0);try{await a(e.id,Array.from(i)),alert("Permissions saved."),r()}catch(h){console.error("Failed saving role perms",h),alert("Failed to save permissions")}finally{u(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:n.jsxs("div",{className:"bg-white rounded p-4 w-full max-w-3xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-semibold",children:["Permissions for ",e.name]}),n.jsxs("div",{children:[n.jsx("button",{className:"px-3 py-1 border rounded mr-2",onClick:m,children:"Select All"}),n.jsx("button",{className:"px-3 py-1 border rounded",onClick:g,children:"Clear"})]})]}),o?n.jsx("div",{children:"Loading..."}):n.jsx("div",{className:"max-h-96 overflow-auto border rounded",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Permission"}),n.jsx("th",{className:"p-2 text-left",children:"Key"}),n.jsx("th",{className:"p-2 text-center",children:"Has"})]})}),n.jsx("tbody",{children:t.map(h=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:h.name}),n.jsx("td",{className:"p-2 text-sm text-gray-600",children:h.key}),n.jsx("td",{className:"p-2 text-center",children:n.jsx("input",{type:"checkbox",checked:i.has(h.key),onChange:()=>f(h.key),"aria-label":`${e.name} has ${h.key}`})})]},h.key||h.id))})]})}),n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsx("button",{onClick:r,className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:x,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded",children:d?"Saving...":"Save"})]})]})})}function PR(){const{roles:e,loading:t,error:r,pagination:s,createRole:a,updateRole:i,deleteRole:l,fetch:o}=WC(),{permissions:c,loading:d}=VC(),[u,f]=y.useState(null),[m,g]=y.useState(null),{page:x,setPage:h,limit:p,setLimit:v,pageSizeOptions:b}=Mp("roles:listing");y.useEffect(()=>{o({page:x,limit:p})},[x,p]);const j=async T=>{var P,A;try{await a(T),await o({page:x,limit:p})}catch(S){console.error("Create role failed",S),alert(((A=(P=S==null?void 0:S.response)==null?void 0:P.data)==null?void 0:A.detail)||"Failed to create role")}},N=async(T,P)=>{var A,S;try{await i(P,T),await o({page:x,limit:p})}catch(E){console.error("Update role failed",E),alert(((S=(A=E==null?void 0:E.response)==null?void 0:A.data)==null?void 0:S.detail)||"Failed to update role")}},w=async T=>{var P,A;if(confirm("Delete role? This cannot be undone."))try{await l(T),await o({page:x,limit:p})}catch(S){console.error("Delete role failed",S),alert(((A=(P=S==null?void 0:S.response)==null?void 0:P.data)==null?void 0:A.detail)||"Failed to delete role")}},_=(s==null?void 0:s.totalPages)||Math.max(1,Math.ceil(((e==null?void 0:e.length)||0)/p)),k=(s==null?void 0:s.totalRecords)??(e==null?void 0:e.length)??0,C=(s==null?void 0:s.currentPage)||x;return t||d?n.jsx("div",{className:"p-4",children:"Loading roles & permissions..."}):n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Roles"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Manage roles and their permissions"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h2",{className:"font-medium mb-3",children:"Create Role"}),n.jsx(qAe,{onSubmit:j})]}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"bg-white border rounded p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"font-medium",children:"All roles"}),n.jsx("button",{onClick:()=>o({page:x,limit:p}),className:"px-3 py-1 border rounded text-sm",children:"Refresh"})]}),n.jsx($p,{items:e,totalPages:_,currentPage:C,onPageChange:h,totalRecords:k,pageSize:p,onPageSizeChange:T=>{v(T),h(1)},pageSizeOptions:b,error:r?"Failed to load roles. Please retry.":null,onRetry:()=>o({page:x,limit:p}),emptyMessage:"No roles created yet.",renderCard:T=>n.jsxs("div",{className:"border rounded p-4 bg-white shadow-sm hover:shadow-md transition",children:[n.jsx("div",{className:"font-medium",children:T.name}),n.jsx("div",{className:"text-sm text-gray-600",children:T.description||"No description"}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["id: ",T.id,T.key?` | key: ${T.key}`:""]}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>g(T),className:"px-3 py-1 border rounded text-sm",children:"Permissions"}),n.jsx("button",{onClick:()=>f(T),className:"px-3 py-1 border rounded text-sm",children:"Edit"}),n.jsx("button",{onClick:()=>w(T.id),className:"px-3 py-1 border rounded text-sm text-red-600",children:"Delete"})]})]})})]}),n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Permissions (global list)"}),c.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No permissions defined yet."}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:c.map(T=>n.jsxs("div",{className:"border rounded p-2 text-sm",children:[n.jsx("div",{className:"font-medium",children:T.name}),n.jsx("div",{className:"text-xs text-gray-500",children:T.key})]},T.id))})]})]})]}),u&&n.jsx(GAe,{open:!!u,initial:u,onClose:()=>f(null),onSubmit:N}),m&&n.jsx(JAe,{role:m,permissions:c,onClose:()=>g(null)})]})}function OR(){const{permissions:e,loading:t,createPermission:r,deletePermission:s}=VC(),[a,i]=y.useState({role_name:"",module_name:"",action_name:""}),l=async o=>{var c,d;if(o.preventDefault(),!a.role_name||!a.module_name||!a.action_name)return alert("All fields are required");try{await r({role_name:a.role_name.trim(),module_name:a.module_name.trim(),action_name:a.action_name.trim()}),i({role_name:"",module_name:"",action_name:""})}catch(u){alert(((d=(c=u==null?void 0:u.response)==null?void 0:c.data)==null?void 0:d.detail)||"Failed to create permission")}};return t?n.jsx("div",{className:"p-4",children:"Loading permissions"}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Permissions"}),n.jsxs("div",{className:"bg-white border rounded p-4 mb-6",children:[n.jsx("h2",{className:"font-medium mb-3",children:"Create permission"}),n.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[n.jsx("input",{placeholder:"role_name (e.g. recruiter)",value:a.role_name,onChange:o=>i(c=>({...c,role_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("input",{placeholder:"module_name (e.g. candidates)",value:a.module_name,onChange:o=>i(c=>({...c,module_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("input",{placeholder:"action_name (e.g. view)",value:a.action_name,onChange:o=>i(c=>({...c,action_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]}),n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h2",{className:"font-medium mb-3",children:"All permissions"}),e.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No permissions found."}):n.jsx("div",{className:"space-y-2",children:e.map(o=>n.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium",children:[o.role_name,"  ",o.module_name,".",n.jsx("span",{className:"text-blue-600",children:o.action_name})]}),n.jsx("div",{className:"text-sm text-gray-500",children:new Date(o.created_at).toLocaleString()})]}),n.jsx("button",{onClick:()=>{confirm("Delete permission?")&&s(o.id)},className:"px-3 py-1 border rounded text-sm text-red-600",children:"Delete"})]},o.id))})]})]})}function RR(){const{roles:e,loading:t,fetch:r}=WC();return y.useEffect(()=>{const s=Ki.on("roles:updated",()=>r()),a=Ki.on("role-permissions:updated",()=>r());return()=>{s(),a()}},[]),t?n.jsx("div",{className:"p-4",children:"Loading roles..."}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Roles"}),n.jsx("div",{className:"bg-white border rounded p-4",children:n.jsxs("table",{className:"w-full table-auto border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Role Name"}),n.jsx("th",{className:"p-2 text-left",children:"Description"}),n.jsx("th",{className:"p-2 text-left",children:"Role ID"})]})}),n.jsx("tbody",{children:e.map(s=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:s.name}),n.jsx("td",{className:"p-2",children:s.description}),n.jsx("td",{className:"p-2",children:s.id})]},s.id))})]})})]})}function LR(){const{permissions:e,loading:t,fetch:r}=VC();return y.useEffect(()=>{const s=Ki.on("permissions:updated",()=>r());return()=>s()},[]),t?n.jsx("div",{className:"p-4",children:"Loading permissions..."}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Permissions"}),n.jsx("div",{className:"bg-white border rounded p-4",children:n.jsxs("table",{className:"w-full table-auto border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Permission Name"}),n.jsx("th",{className:"p-2 text-left",children:"Key"}),n.jsx("th",{className:"p-2 text-left",children:"Description"})]})}),n.jsx("tbody",{children:e.map(s=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:s.role_name}),n.jsx("td",{className:"p-2",children:s.module_name+"."+s.action_name}),n.jsx("td",{className:"p-2",children:s.created_at})]},s.id))})]})})]})}function IR(){const[e,t]=y.useState({}),[r,s]=y.useState(!0);y.useEffect(()=>{a()},[]);const a=async()=>{var l;s(!0);try{const o=await G.get("/v1/permissions-matrix");if(!((l=o.data)!=null&&l.matrix))return;const c=o.data.matrix,d={};Object.entries(c).forEach(([u,f])=>{d[u]||(d[u]={}),Object.entries(f).forEach(([m,g])=>{g.forEach(x=>{d[u][x]||(d[u][x]=[]),d[u][x].includes(m)||d[u][x].push(m)})})}),t(d)}catch(o){console.error("Permission matrix load failed",o)}finally{s(!1)}},i=(()=>{const l=new Set;return Object.values(e).forEach(o=>{Object.keys(o).forEach(c=>l.add(c))}),Array.from(l).sort()})();return n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Role Permission Matrix"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"System-wide RBAC configuration"}),r?n.jsx("div",{children:"Loading permissions"}):n.jsx("div",{className:"border rounded overflow-auto",children:n.jsxs("table",{className:"min-w-full border text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border px-3 py-2",children:"Module"}),i.map(l=>n.jsx("th",{className:"border px-3 py-2 capitalize",children:l.replace("_"," ")},l))]})}),n.jsx("tbody",{children:Object.entries(e).map(([l,o])=>n.jsxs("tr",{children:[n.jsx("td",{className:"border px-3 py-2 font-semibold bg-gray-50",children:l.replace("_"," ")}),i.map(c=>{var d;return n.jsx("td",{className:"border px-3 py-2 text-center",children:(d=o[c])!=null&&d.length?o[c].join(", "):""},c)})]},l))})]})})]})}function KAe(){const[e,t]=y.useState(!1),[r,s]=y.useState([]),[a,i]=y.useState(null);return{loading:e,matches:r,error:a,getMatches:async(o,c=10)=>{var d,u;try{t(!0),i(null);const f=await G.post("/v1/candidates/match",{job_id:o,limit:c});s(f.data||[])}catch(f){console.error(f),i(((u=(d=f==null?void 0:f.response)==null?void 0:d.data)==null?void 0:u.detail)||"Unable to fetch matches.")}finally{t(!1)}}}}function XAe({match:e}){var t;return n.jsxs("div",{className:"p-4 bg-white rounded shadow",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-bold",children:["Candidate #",e.candidate_id]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Fit Score"}),n.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:e.fit_score.toFixed(1)})]}),n.jsx(wr,{to:`/candidates/${e.candidate_id}`,className:"bg-blue-600 text-white px-4 py-2 rounded h-fit",children:"View Profile"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"font-semibold",children:"Top Factors"}),n.jsx("ul",{className:"list-disc ml-6 text-gray-700",children:(t=e.top_factors)==null?void 0:t.map((r,s)=>n.jsx("li",{children:r},s))})]})]})}function YAe(){const[e,t]=y.useState([]),[r,s]=y.useState(""),{loading:a,matches:i,error:l,getMatches:o}=KAe();y.useEffect(()=>{G.get("/v1/jobs").then(d=>t(d.data||[])).catch(d=>console.error("Failed to load jobs",d))},[]);const c=()=>{r&&o(r)};return n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Candidate Matching"}),n.jsxs("div",{className:"bg-white p-4 rounded shadow mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Job"}),n.jsxs("select",{className:"w-full p-2 border rounded",value:r,onChange:d=>s(d.target.value),children:[n.jsx("option",{value:"",children:"Choose a job"}),e.map(d=>n.jsx("option",{value:d.id,children:d.title},d.id))]}),n.jsx("button",{onClick:c,disabled:!r,className:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded",children:a?"Matching...":"Find Matches"})]}),l&&n.jsx("p",{className:"text-red-600 mb-4",children:l}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map((d,u)=>n.jsx(XAe,{match:d},u))}),!a&&i.length===0&&r&&n.jsx("p",{className:"text-gray-500",children:"No matching candidates found."})]})}function FR(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{l()},[]);const l=async()=>{var m;try{s(!0);const g=await G.get("/v1/interviews/recruiter/list");t(((m=g.data)==null?void 0:m.results)||[])}catch(g){console.error(g),i("Failed to load interviews.")}finally{s(!1)}},o=m=>{const g=(m||"").toLowerCase();return{scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700",rescheduled:"bg-orange-100 text-orange-800",pending:"bg-purple-100 text-purple-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-rose-100 text-rose-800",on_hold:"bg-amber-100 text-amber-800"}[g]||"bg-gray-100 text-gray-800"},c=m=>{switch((m||"").toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";case"rescheduled":return"Rescheduled";case"pending":return"Pending";case"confirmed":return"Confirmed";case"rejected":return"Rejected";case"on_hold":return"On Hold";default:return m?m.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"Unknown"}},d=m=>m?m.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase()):"Interview",u=m=>{if(!m)return"";const g=new Date(m);return Number.isNaN(g.getTime())?"":g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},f=e.reduce((m,g)=>{const x=new Date(g.scheduled_at).toDateString();return m[x]||(m[x]=[]),m[x].push(g),m},{});return r?n.jsx("div",{className:"p-6 text-center",children:"Loading..."}):n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Interview Calendar"}),a&&n.jsx("p",{className:"text-red-600 mb-4",children:a}),Object.keys(f).length===0&&n.jsx("p",{className:"text-gray-600",children:"No interviews scheduled."}),Object.entries(f).map(([m,g])=>n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:m}),n.jsx("div",{className:"space-y-3",children:g.map(x=>{var h,p;return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-900",children:((h=x.candidate)==null?void 0:h.full_name)||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:((p=x.job)==null?void 0:p.title)||"Job Title"}),n.jsx("p",{className:"text-xs text-gray-500",children:d(x.mode)}),n.jsx("p",{className:"text-sm text-gray-500",children:u(x.scheduled_at)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-3 py-1 rounded text-xs font-medium ${o(x.status)}`,children:c(x.status)}),x.meeting_link?n.jsx("a",{href:x.meeting_link,target:"_blank",rel:"noreferrer",className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Join Meet"}):null,n.jsx(wr,{to:`/recruiter/interviews/${x.id}`,className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"View"})]})]},x.id)})})]},m))]})}function DR(){const{id:e}=Or(),[t,r]=y.useState([]),[s,a]=y.useState(null),[i,l]=y.useState(!0);y.useEffect(()=>{o()},[e]);const o=async()=>{try{const[d,u]=await Promise.all([G.get(`/v1/candidates/${e}`),G.get(`/v1/interviews?candidate_id=${e}`)]);a(d.data),r(u.data||[])}catch(d){console.error(d)}finally{l(!1)}},c=d=>({scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[d]||"bg-gray-100 text-gray-800";return i?n.jsx("p",{className:"p-6",children:"Loading..."}):n.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Interviews for ",s==null?void 0:s.name]}),n.jsx("p",{className:"text-gray-600 mb-6",children:s==null?void 0:s.email}),t.length===0&&n.jsx("p",{className:"text-gray-600",children:"No interviews found for this candidate."}),n.jsx("div",{className:"space-y-4",children:t.map(d=>{var u;return n.jsxs("div",{className:"p-4 bg-white rounded shadow flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:(u=d.job)==null?void 0:u.title}),n.jsx("p",{className:"text-gray-600",children:new Date(d.scheduled_at).toLocaleString()})]}),n.jsx("span",{className:`px-3 py-1 rounded ${c(d.status)}`,children:d.status}),n.jsx(wr,{to:`/interviews/${d.id}`,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"View"})]},d.id)})})]})}const HC=e=>String(e||"").toLowerCase().replace(/\s+/g,"_"),ZAe=e=>{switch(HC(e)){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return e||"Unknown"}},QAe=e=>{const t=HC(e);return t==="completed"?"bg-green-100 text-green-800":t==="scheduled"?"bg-yellow-100 text-yellow-800":t==="no_show"?"bg-red-100 text-red-800":t==="in_progress"?"bg-blue-100 text-blue-800":t==="cancelled"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-700"},u_=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},eEe=(e,t)=>{if(!e||!t)return"--";const r=new Date(e),s=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(s.getTime()))return"--";const a=Math.max(0,s.getTime()-r.getTime()),i=Math.floor(a/6e4),l=Math.floor(i/60),o=i%60;return l>0?`${l}h ${o}m`:`${o}m`};function $R(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState("all"),[u,f]=y.useState(""),[m,g]=y.useState("");y.useEffect(()=>{x()},[]);const x=async()=>{var v;try{s(!0);const j=((v=(await G.get("/v1/interviews/recruiter/list")).data)==null?void 0:v.results)||[],N=await Promise.all(j.map(async w=>{try{const _=await G.get(`/v1/interviews/${w.id}/logs`);return{interview:w,actions:_.data||[]}}catch{return{interview:w,actions:[]}}}));t(N)}catch(b){console.error("Failed to load interview logs",b),i("Failed to load interview logs.")}finally{s(!1)}},h=y.useMemo(()=>{const v=new Set;return e.forEach(b=>{var j,N;(N=(j=b.interview)==null?void 0:j.job)!=null&&N.title&&v.add(b.interview.job.title)}),Array.from(v)},[e]),p=y.useMemo(()=>e.filter(v=>{var N;const b=v.interview||{},j=HC(b.status||"scheduled");if(l!=="all"&&j!==l||c!=="all"&&((N=b.job)==null?void 0:N.title)!==c)return!1;if(u){const w=new Date(`${u}T00:00:00`);if(new Date(b.scheduled_at)<w)return!1}if(m){const w=new Date(`${m}T23:59:59`);if(new Date(b.scheduled_at)>w)return!1}return!0}),[e,l,c,u,m]);return r?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading interview logs..."}):n.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interview Logs"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track scheduled, completed, and no-show interview activity."})]}),n.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),a&&n.jsx("div",{className:"text-red-600 mb-4",children:a}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:v=>o(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"in_progress",children:"In progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"no_show",children:"No Show"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Job Role"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All roles"}),h.map(v=>n.jsx("option",{value:v,children:v},v))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"From"}),n.jsx("input",{type:"date",value:u,onChange:v=>f(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"To"}),n.jsx("input",{type:"date",value:m,onChange:v=>g(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})}),p.length===0?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"No interview activity yet."}):n.jsx("div",{className:"space-y-4",children:p.map(v=>{const b=v.interview||{},j=b.candidate||{},N=b.job||{},w=b.recruiter||{},_=v.actions||[],k=_.find(A=>A.action==="joined"),C=_.find(A=>A.action==="completed"),T=(k==null?void 0:k.timestamp)||b.started_at,P=b.completed_at||(C==null?void 0:C.timestamp);return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:j.full_name||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:N.title||"Job Role"}),n.jsx("p",{className:"text-sm text-gray-500",children:(b.mode||"interview").split("_").map(A=>A?A[0].toUpperCase()+A.slice(1):"").join(" ")}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Recruiter: ",w.full_name||w.email||"--"]})]}),n.jsxs("div",{className:"text-left md:text-right",children:[n.jsx("span",{className:`inline-block mb-2 px-3 py-1 rounded text-sm ${QAe(b.status||"scheduled")}`,children:ZAe(b.status||"scheduled")}),n.jsxs("p",{className:"font-semibold text-gray-800",children:["Score: ",b.overall_ai_score??"--"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-700 border-t pt-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Scheduled"}),n.jsx("p",{className:"font-semibold",children:u_(b.scheduled_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Started"}),n.jsx("p",{className:"font-semibold",children:u_(T)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),n.jsx("p",{className:"font-semibold",children:u_(P)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Duration"}),n.jsx("p",{className:"font-semibold",children:eEe(T,P)})]})]})]},b.id)})})]})}function Hx(){var j,N,w;const{id:e}=Or(),t=Tt(),r=Cl==null?void 0:Cl(),s=(r==null?void 0:r.user)||null,[a,i]=y.useState(!0),[l,o]=y.useState(null),[c,d]=y.useState("");y.useEffect(()=>{u()},[]);const u=async()=>{try{const _=await G.get(`/v1/interviews/${e}`);o(_.data)}catch{d("Failed to load interview details.")}finally{i(!1)}},f=_=>{switch((_||"").toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return _||"Unknown"}},m=_=>{const k=(_||"").toLowerCase();return{scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700"}[k]||"bg-gray-100 text-gray-700"},g=_=>_?_.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase()):"Interview",x=_=>{if(!_)return"Not Scheduled";const k=new Date(_);return Number.isNaN(k.getTime())?"Not Scheduled":k.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};if(a)return n.jsx("h2",{className:"p-6",children:"Loading Interview..."});if(!l)return n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found"});const h=((j=l.submission)==null?void 0:j.candidate)||l.candidate||{},p=((N=l.submission)==null?void 0:N.job)||l.job||{},v=((w=l.submission)==null?void 0:w.recruiter)||l.recruiter||{},b=((s==null?void 0:s.role)||"").toLowerCase();return n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Interview Details"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back"})]}),c&&n.jsx("div",{className:"text-red-600 mb-4",children:c}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Candidate Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Name:"})," ",h.full_name||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",h.email||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",h.phone||""]})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Job Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Job Title:"})," ",p.title||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Company:"})," ",p.company_name||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",p.location||""]})]})]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Interview Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Type:"})," ",g(l.mode)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Date & Time:"})," ",x(l.scheduled_at)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Status:"})," ",n.jsx("span",{className:`px-2 py-1 rounded ${m(l.status)}`,children:f(l.status)})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recruiter:"})," ",v.full_name||v.email||""]})]})]}),(()=>{const _=[];return b==="candidate"&&l.mode==="ai_chat"&&_.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:f(l.status)==="In Progress"?"Resume Interview":"Start Interview"},"candidate-ai-chat")),b==="candidate"&&l.mode==="video"&&l.meeting_link&&_.push(n.jsx("a",{href:l.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Join Link"},"candidate-video")),b==="candidate"&&l.mode==="in_person"&&_.push(n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",l.location||""]},"candidate-in-person")),b==="recruiter"&&(_.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View Transcript"},"recruiter-transcript")),_.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"View AI Score"},"recruiter-score")),_.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"View Answers"},"recruiter-answers"))),b==="account_manager"&&(_.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View Results"},"am-results")),_.push(n.jsx("button",{onClick:()=>t("/recruiter/candidates"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Compare Candidates"},"am-compare"))),_.length===0?null:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Actions"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:_})]})})()]})]})]})}function f_(){var o,c;const{id:e}=Or(),t=Tt(),[r,s]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await G.get(`/v1/live-interviews/${e}`);i(d.data)}catch(d){console.error(d),alert("Failed to load live interview")}finally{s(!1)}};return r?n.jsx("h2",{className:"p-6",children:"Loading..."}):a?n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Live Interview Detail"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back"})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4 mb-4",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Candidate:"})," ",((o=a==null?void 0:a.candidate)==null?void 0:o.full_name)||"N/A"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Job:"})," ",((c=a==null?void 0:a.job)==null?void 0:c.title)||"N/A"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",n.jsx("span",{className:"px-2 py-1 bg-yellow-200 rounded",children:a.status})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Scheduled At:"})," ",a.scheduled_at?new Date(a.scheduled_at).toLocaleString():"Not Scheduled"]}),a.meeting_url&&n.jsxs("p",{className:"mt-2 text-blue-600 underline",children:["Meeting Link: ",a.meeting_url]})]})]}):n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found"})}const fU=y.createContext(),MR=({children:e})=>{const[t,r]=y.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));y.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},[t]);const s=()=>{r(a=>a==="dark"?"light":"dark")};return n.jsx(fU.Provider,{value:{theme:t,toggleTheme:s},children:e})},tEe=()=>y.useContext(fU);function rEe({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z",clipRule:"evenodd"}))}const nEe=y.forwardRef(rEe);function sEe({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{d:"M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"}))}const aEe=y.forwardRef(sEe),iEe=()=>{const{theme:e,toggleTheme:t}=tEe();return n.jsx("button",{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-darkSlate-800 hover:shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":e==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:e==="dark"?n.jsx(aEe,{className:"w-6 h-6 text-yellow-400",title:"Switch to Light Mode"}):n.jsx(nEe,{className:"w-6 h-6 text-gray-800",title:"Switch to Dark Mode"})})},mU=[{key:"today",label:"Today"},{key:"this_week",label:"This Week"},{key:"this_month",label:"This Month"}],lEe={today:"Today",this_week:"This Week",this_month:"This Month"},oEe=5*60*1e3,cEe=[{key:"total_clients",label:"Total Clients",icon:"",accent:"#3B82F6",onClick:e=>e("/account-manager/clients")},{key:"active_requirements",label:"Active Requirements",icon:"",accent:"#6C2BD9",onClick:e=>e("/account-manager/requirements")},{key:"recruiter_submissions",label:"Recruiter Submissions",icon:"",accent:"#6366F1",onClick:e=>e("/account-manager/submissions")},{key:"interviews_in_progress",label:"Interviews in Progress",icon:"",accent:"#F59E0B",onClick:e=>e("/account-manager/interview-logs")},{key:"hired_candidates",label:"Hired Candidates",icon:"",accent:"#10B981",onClick:e=>e("/account-manager/submissions?status=hired")},{key:"active_consultants",label:"Active Consultants",icon:"",accent:"#14B8A6",onClick:e=>e("/account-manager/assignments")},{key:"pending_timesheets",label:"Pending Timesheets",icon:"",accent:"#EF4444",onClick:e=>e("/account-manager/timesheets")}],dEe={Active:"#6C2BD9",Closed:"#10B981","On Hold":"#F59E0B",Draft:"#94A3B8"},uEe={"AM Review":"#6C2BD9","Client Review":"#3B82F6","Interview Stage":"#F59E0B","Offer Stage":"#8B5CF6",Successful:"#10B981",Rejected:"#EF4444"},fEe={kpi:!1,requirements:!1,pipeline:!1,panels:!1},BR=e=>{const t=String(e||"").trim().toLowerCase();return mU.some(r=>r.key===t)?t:"this_month"},nf=e=>typeof e!="number"||Number.isNaN(e)?"--":e.toLocaleString(),mEe=(e,t)=>typeof e!="number"||Number.isNaN(e)?"0.0%":t==="down"?`-${Math.abs(e).toFixed(1)}%`:t==="up"?`+${Math.abs(e).toFixed(1)}%`:`${Math.abs(e).toFixed(1)}%`,hEe=e=>e==="up"?{icon:"",color:"text-emerald-500"}:e==="down"?{icon:"",color:"text-red-500"}:{icon:"",color:"text-gray-500"},hU=e=>String(e||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()).trim(),UR=e=>{const{cx:t,cy:r,innerRadius:s,outerRadius:a,startAngle:i,endAngle:l,fill:o}=e;return n.jsx(AC,{cx:t,cy:r,innerRadius:s,outerRadius:a+8,startAngle:i,endAngle:l,fill:o})};function zR(){return n.jsxs("div",{className:"h-[320px] w-full rounded-xl border border-gray-200 bg-white p-5",children:[n.jsx("div",{className:"h-5 w-40 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-6 h-60 animate-pulse rounded-xl bg-gray-100"})]})}function WR({message:e}){return n.jsx("div",{className:"h-[320px] w-full rounded-xl border border-red-200 bg-red-50 p-5",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[n.jsx(yf,{className:"h-4 w-4"}),e]})})}function pEe({config:e,payload:t,loading:r,hasError:s,onClick:a}){if(r)return n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-9 w-20 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-36 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-4 h-10 animate-pulse rounded bg-gray-100"})]});const i=t||{},l=s||t==null,c=(Array.isArray(i.sparkline)?i.sparkline:[0,0,0,0,0,0,0]).map((u,f)=>({index:f,value:u})),d=hEe(i.trend);return n.jsxs("button",{type:"button",onClick:a,className:"rounded-xl border border-gray-200 bg-white p-4 text-left transition hover:-translate-y-0.5 hover:shadow-md",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-lg",children:e.icon}),l&&n.jsx(yf,{className:"h-4 w-4 text-amber-500",title:"Data unavailable","aria-label":"Data unavailable"})]}),n.jsx("p",{className:"mt-2 text-xs font-medium text-gray-500",children:e.label}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:l?"--":nf(i.value)}),n.jsxs("div",{className:`mt-3 flex items-center gap-1 text-xs ${d.color}`,children:[n.jsx("span",{children:d.icon}),n.jsx("span",{children:l?"--":`${mEe(i.change_pct,i.trend)} vs previous period`})]}),n.jsx("div",{className:"mt-3 h-12",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsx(X2,{data:c,children:n.jsx(zd,{type:"monotone",dataKey:"value",stroke:e.accent,strokeWidth:2,dot:!1,isAnimationActive:!l})})})})]})}function VR({title:e,value:t,subtitle:r,detail:s,actionLabel:a,onAction:i,loading:l,hasError:o,progress:c}){return l?n.jsxs("div",{className:"rounded-xl border border-purple-100 bg-white p-5",children:[n.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-9 w-20 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-56 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-44 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-4 h-9 w-40 animate-pulse rounded bg-gray-200"})]}):n.jsxs("div",{className:"rounded-xl border border-purple-100 bg-white p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:e}),n.jsx("p",{className:"mt-3 text-3xl font-bold text-gray-900",children:o?"--":nf(t)}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r}),typeof c=="number"&&!o&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-100",children:n.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-purple-500 to-indigo-500",style:{width:`${c}%`}})}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s})]}),!c&&n.jsx("p",{className:"mt-4 text-sm font-medium text-gray-700",children:o?"--":s}),n.jsxs("button",{type:"button",onClick:i,className:"mt-4 inline-flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-purple-700",children:[a,n.jsx(S1,{className:"h-4 w-4"})]})]})}function xEe({active:e,payload:t}){if(!e||!(t!=null&&t.length))return null;const r=t[0].payload;return n.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-md",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:[r.status,": ",r.count," (",(r.pct??0).toFixed(1),"%)"]})})}function gEe({active:e,payload:t}){if(!e||!(t!=null&&t.length))return null;const r=t[0].payload,s=Object.entries(r.breakdown||{});return n.jsxs("div",{className:"w-64 rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-md",children:[n.jsxs("p",{className:"font-semibold text-gray-900",children:[r.group,": ",r.count," (",(r.pct??0).toFixed(1),"%)"]}),n.jsx("div",{className:"mt-2 space-y-1 text-gray-700",children:s.map(([a,i])=>n.jsxs("p",{children:[hU(a),": ",i]},a))})]})}function m_(){const e=Tt(),[t,r]=ea(),s=y.useRef(0),a=BR(t.get("filter")),[i,l]=y.useState(!0),[o,c]=y.useState(!1),[d,u]=y.useState(null),[f,m]=y.useState(null),[g,x]=y.useState(null),[h,p]=y.useState(null),[v,b]=y.useState(null),[j,N]=y.useState(fEe),[w,_]=y.useState(-1),[k,C]=y.useState(-1),[T,P]=y.useState(-1),[A,S]=y.useState(-1),[E,O]=y.useState({open:!1,group:"",candidates:[]});y.useEffect(()=>{const se=t.get("filter"),z=BR(se);if(se!==z){const Te=new URLSearchParams(t);Te.set("filter",z),r(Te,{replace:!0})}},[t,r]);const I=y.useCallback(async(se,{silent:z=!1}={})=>{const Te=Date.now();s.current=Te,z?c(!0):l(!0);const fe=async(at,pe)=>{try{const ye=await G.get(at,{params:{filter:se}});return{key:pe,ok:!0,data:ye.data}}catch(ye){return console.error(`Dashboard API failed: ${pe}`,ye),{key:pe,ok:!1,data:null}}},[Ie,ce,Ce,Ye]=await Promise.all([fe("/v1/am/dashboard/kpi-cards","kpi"),fe("/v1/am/dashboard/requirements-donut","requirements"),fe("/v1/am/dashboard/pipeline-pie","pipeline"),fe("/v1/am/dashboard/panels-summary","panels")]);s.current===Te&&(N({kpi:!Ie.ok,requirements:!ce.ok,pipeline:!Ce.ok,panels:!Ye.ok}),Ie.ok&&m(Ie.data),ce.ok&&x(ce.data),Ce.ok&&p(Ce.data),Ye.ok&&b(Ye.data),u(new Date),z?c(!1):l(!1))},[]);y.useEffect(()=>{I(a,{silent:!1})},[a,I]),y.useEffect(()=>{const se=setInterval(()=>{I(a,{silent:!0})},oEe);return()=>clearInterval(se)},[a,I]);const L=se=>{if(se===a)return;const z=new URLSearchParams(t);z.set("filter",se),r(z)},Z=()=>{I(a,{silent:!1})},H=y.useMemo(()=>((g==null?void 0:g.segments)||[]).map(z=>({...z,value:Number(z.count||0),color:dEe[z.status]||"#94A3B8"})),[g]),R=y.useMemo(()=>H.reduce((se,z)=>se+(z.value||0),0),[H]),D=R===0,Y=y.useMemo(()=>((h==null?void 0:h.groups)||[]).map(z=>({...z,value:Number(z.count||0),color:z.color||uEe[z.group]||"#94A3B8"})),[h]),M=Number((h==null?void 0:h.total_candidates)||0),X=M===0||Y.every(se=>se.value===0),ne=v||{},J=ne.active_requirements||{},ue=ne.pipeline_ready||{};ne.consultant_pool;const ke=y.useMemo(()=>cEe.filter(se=>!(se.key==="total_clients"||se.key==="active_consultants"||se.key==="pending_timesheets")),[]),ve=Number(J.total||0),je=Number(J.with_submissions||0),ie=ve>0?Math.min(100,Math.round(je/ve*100)):0;return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"rounded-xl bg-gray-100 p-6",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Account Manager Dashboard"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage client requirements, recruiters, and submissions"})]}),n.jsx(iEe,{})]})}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsx("div",{className:"inline-flex flex-wrap items-center gap-2",children:mU.map(se=>{const z=a===se.key;return n.jsx("button",{type:"button",onClick:()=>L(se.key),className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${z?"border-transparent bg-[#6C2BD9] text-white":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:se.label},se.key)})}),n.jsxs("button",{type:"button",onClick:Z,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50",children:[n.jsx(jo,{className:`h-4 w-4 ${i||o?"animate-spin":""}`}),"Refresh"]})]}),n.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",d?d.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"--"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-7",children:ke.map(se=>{var z;return n.jsx(pEe,{config:se,payload:((z=f==null?void 0:f.cards)==null?void 0:z[se.key])||null,loading:i,hasError:j.kpi,onClick:()=>se.onClick(e)},se.key)})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(zR,{}),n.jsx(zR,{})]}):n.jsxs(n.Fragment,{children:[j.requirements?n.jsx(WR,{message:"Requirements chart data unavailable"}):n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Requirements Status"}),n.jsx("p",{className:"text-xs text-gray-500",children:(g==null?void 0:g.period_label)||"--"})]}),n.jsxs("button",{type:"button",onClick:()=>e("/account-manager/requirements"),className:"inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:text-indigo-700",children:["Open Requirements",n.jsx(Iv,{className:"h-3.5 w-3.5"})]})]}),n.jsx("div",{className:"mt-4 h-[280px]",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Z2,{children:[n.jsx(al,{data:D?[{status:"No data",value:1,color:"#E5E7EB",count:0,pct:0}]:H,dataKey:"value",nameKey:"status",cx:"50%",cy:"50%",outerRadius:110,innerRadius:65,paddingAngle:D?0:3,activeIndex:k,activeShape:UR,onMouseEnter:(se,z)=>_(z),onMouseLeave:()=>_(-1),onClick:(se,z)=>{if(D)return;C(z);const Te=String(se.status||"").toLowerCase().replace(/\s+/g,"_");e(`/account-manager/requirements?status=${encodeURIComponent(Te)}`)},children:(D?[{color:"#E5E7EB"}]:H).map((se,z)=>n.jsx(Fd,{fill:se.color,opacity:w===-1||w===z?1:.35},`${se.status}-${z}`))}),n.jsx(Qn,{content:n.jsx(xEe,{})}),n.jsx("text",{x:"50%",y:"48%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-gray-900 text-2xl font-bold",children:D?"No Data":R}),n.jsx("text",{x:"50%",y:"56%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-gray-500 text-xs",children:D?"No Requirements Yet":"Total"})]})})}),n.jsx("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-2 text-xs",children:H.map(se=>n.jsxs("div",{className:"inline-flex items-center gap-1 text-gray-700",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:se.color}}),n.jsx("span",{children:se.status}),n.jsx("span",{className:"font-semibold",children:se.count})]},se.status))}),n.jsxs("p",{className:"mt-3 text-center text-xs text-gray-500",children:["All time: ",nf((g==null?void 0:g.all_time_total)??0)," total"]})]}),j.pipeline?n.jsx(WR,{message:"Candidate pipeline data unavailable"}):n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Candidate Pipeline"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",nf(M)," candidates  ",lEe[a]]})]})}),n.jsxs("div",{className:"mt-4 flex flex-col gap-4 lg:flex-row",children:[n.jsx("div",{className:"h-[260px] w-full lg:w-[55%]",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Z2,{children:[n.jsx(al,{data:X?[{group:"No data",value:1,color:"#E5E7EB",count:0,breakdown:{}}]:Y,dataKey:"value",nameKey:"group",cx:"50%",cy:"50%",outerRadius:120,innerRadius:0,paddingAngle:X?0:2,activeIndex:A,activeShape:UR,labelLine:!1,label:({index:se,x:z,y:Te,value:fe,payload:Ie})=>T!==se||!fe?"":n.jsx("text",{x:z,y:Te,fill:"#111827",textAnchor:"middle",dominantBaseline:"central",fontSize:11,fontWeight:600,children:`${Ie.group} ${fe}`}),onMouseEnter:(se,z)=>P(z),onMouseLeave:()=>P(-1),onClick:(se,z)=>{X||!se.count||(S(z),O({open:!0,group:se.group,candidates:Array.isArray(se.candidates)?se.candidates:[]}))},isAnimationActive:!0,animationDuration:400,children:(X?[{color:"#E5E7EB"}]:Y).map((se,z)=>n.jsx(Fd,{fill:se.color,opacity:T===-1||T===z?1:.35},`${se.group}-${z}`))}),n.jsx(Qn,{content:n.jsx(gEe,{})})]})})}),n.jsx("div",{className:"flex-1 space-y-2",children:Y.map((se,z)=>n.jsxs("button",{type:"button",onClick:()=>{se.count&&(S(z),O({open:!0,group:se.group,candidates:Array.isArray(se.candidates)?se.candidates:[]}))},className:"flex w-full items-center justify-between rounded-lg border border-gray-200 px-3 py-2 text-left text-xs hover:bg-gray-50",children:[n.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-700",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-sm",style:{backgroundColor:se.color}}),se.group]}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[se.count," (",(se.pct??0).toFixed(1),"%)"]})]},se.group))})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsx(VR,{title:"Active Requirements",value:ve,subtitle:"Assigned to you and waiting for recruiter action",detail:`${je} of ${ve} have submissions`,actionLabel:"Review Requirements",onAction:()=>e("/account-manager/requirements"),loading:i,hasError:j.panels,progress:j.panels?0:ie}),n.jsx(VR,{title:"Pipeline Ready",value:Number(ue.total||0),subtitle:"Candidates ready for your review",detail:`AM Shortlisted: ${nf(Number(ue.am_shortlisted||0))} | Client Shortlisted: ${nf(Number(ue.client_shortlisted||0))}`,actionLabel:"Send to Client",onAction:()=>e("/account-manager/candidate-review?status=am_shortlisted"),loading:i,hasError:j.panels}),null]}),E.open&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",children:n.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-lg overflow-hidden bg-white shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:E.group}),n.jsxs("p",{className:"text-xs text-gray-500",children:[E.candidates.length," candidate",E.candidates.length!==1?"s":""]})]}),n.jsx("button",{type:"button",onClick:()=>O({open:!1,group:"",candidates:[]}),className:"rounded-md p-1 text-gray-500 hover:bg-gray-100",children:n.jsx(_r,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"h-[calc(100%-76px)] overflow-y-auto p-4",children:E.candidates.length===0?n.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600",children:"No candidates found in this group."}):n.jsx("div",{className:"space-y-3",children:E.candidates.map(se=>n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:se.name||"Unnamed Candidate"}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:["Status: ",se.status_label||hU(se.status)]}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:["Job: ",se.job_applied_for||"Not specified"]})]},`${se.candidate_id}-${se.status}`))})})]})})]})}function yEe({data:e,onClose:t,onSuccess:r}){const[s,a]=y.useState(!1),[i,l]=y.useState({billingType:"payroll",billingRate:"",payoutRate:"",startDate:""});function o(d){l({...i,[d.target.name]:d.target.value})}async function c(){if(!i.billingRate||!i.startDate){alert("Billing rate and start date are required");return}if(!e.client_id&&!e.clientId){alert("Client not found for this consultant");return}try{a(!0);const d=new Date(i.startDate).toISOString(),u={consultantId:e.consultant_id||null,applicationId:e.application_id||e.id,clientId:e.client_id||e.clientId,clientName:e.client_name||"Client",role:e.job_title||"Consultant",startDate:d,endDate:null,billingType:i.billingType,billingRate:Number(i.billingRate),payoutRate:i.payoutRate?Number(i.payoutRate):null};await G.post("/v1/am/assign-consultant",u),alert("Consultant assigned successfully"),r()}catch(d){console.error(d),alert("Failed to assign consultant")}finally{a(!1)}}return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg p-6 space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:e.consultant_id?"Assign Consultant":"Convert & Assign Consultant"}),n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",e.consultant_name||e.candidate_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Email:"})," ",e.email]}),n.jsxs("p",{children:[n.jsx("b",{children:"Client:"})," ",e.client_name]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Billing Type"}),n.jsxs("select",{name:"billingType",value:i.billingType,onChange:o,className:"w-full border p-2 rounded",children:[n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Billing Rate"}),n.jsx("input",{type:"number",name:"billingRate",value:i.billingRate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Payout Rate"}),n.jsx("input",{type:"number",name:"payoutRate",value:i.payoutRate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Start Date"}),n.jsx("input",{type:"date",name:"startDate",value:i.startDate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{onClick:c,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded",children:s?"Processing...":e.consultant_id?"Assign":"Convert & Assign"})]})]})})}function HR(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{l()},[]);async function l(){var c;try{s(!0);const d=await G.get("/v1/am/ready-for-assignment"),u=((c=d.data)==null?void 0:c.data)||d.data||[];t(Array.isArray(u)?u:[])}catch(d){console.error(d),alert("Failed to load candidates")}finally{s(!1)}}const o=async c=>{var m,g;const d=c.application_id||c.id;if(!d||!window.confirm("Record this candidate as a direct hire? They will be removed from the AM queue."))return;const f=window.prompt("Optional note to attach to the direct hire record:");try{await G.post(`/v1/am/applications/${d}/direct-hire`,{note:f||void 0}),alert("Direct hire recorded"),l()}catch(x){console.error("Direct hire failed",x),alert("Failed to record direct hire: "+((g=(m=x.response)==null?void 0:m.data)==null?void 0:g.detail))}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Ready for Assignment"}),r&&n.jsx("p",{children:"Loading..."}),!r&&e.length===0&&n.jsx("p",{className:"text-gray-500",children:"No candidates ready for assignment"}),!r&&e.length>0&&n.jsxs("table",{className:"w-full border",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 border",children:"Candidate"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Job"}),n.jsx("th",{className:"p-2 border",children:"Client"}),n.jsx("th",{className:"p-2 border",children:"Action"})]})}),n.jsx("tbody",{children:e.map((c,d)=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 border",children:c.candidate_name}),n.jsx("td",{className:"p-2 border",children:c.email}),n.jsx("td",{className:"p-2 border",children:c.job_title}),n.jsx("td",{className:"p-2 border",children:c.client_name}),n.jsx("td",{className:"p-2 border",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>i(c),children:"Assign"}),n.jsx("button",{className:"px-3 py-1 bg-violet-600 text-white rounded",onClick:()=>o(c),children:"Direct Hire"})]})})]},c.application_id||d))})]}),a&&n.jsx(yEe,{data:a,onClose:()=>i(null),onSuccess:()=>{i(null),l()}})]})}function vEe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0);y.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0);const i=await G.get("/v1/client/master");t(i.data||[])}catch(i){console.error("Failed to load clients",i),alert("Unable to load client directory")}finally{s(!1)}};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Directory"}),n.jsx("p",{className:"text-sm text-gray-500",children:"View the clients covered by your Account Manager remit. Operations control edits and onboarding while you focus on requirement coordination."})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:[e.length," client",e.length===1?"":"s"]}),n.jsx("button",{onClick:a,className:"px-3 py-1 text-xs font-semibold uppercase tracking-wide text-blue-600 hover:text-blue-800",children:"Refresh"})]}),r?n.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 text-center text-gray-500",children:"Loading client list..."}):e.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-gray-200 bg-white p-6 text-center text-gray-500",children:"No clients assigned to your account yet."}):n.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-xs uppercase tracking-wider text-gray-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Company"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Account Manager"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(i=>{var l;return n.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900",children:i.name||""}),n.jsx("td",{className:"px-4 py-3 text-gray-700",children:i.company_name||""}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:i.email||""}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:((l=i.account_manager)==null?void 0:l.name)||"Unassigned"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${i.is_active?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"}`,children:i.is_active?"Active":"Inactive"})})]},i.id)})})]})})]})}const bEe=new Set(["",null,void 0]),di=(...e)=>{for(const t of e)if(!bEe.has(t))return t;return""},qC=e=>String(e||"").trim().toLowerCase().replace(/\s+/g,"_"),jEe=e=>String(e||"interview").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),_Ee=e=>{var r,s,a,i;if(Array.isArray(e))return e;const t=[e==null?void 0:e.interview_logs,e==null?void 0:e.interviews,e==null?void 0:e.results,e==null?void 0:e.items,(r=e==null?void 0:e.data)==null?void 0:r.interview_logs,(s=e==null?void 0:e.data)==null?void 0:s.interviews,(a=e==null?void 0:e.data)==null?void 0:a.results,(i=e==null?void 0:e.data)==null?void 0:i.items,e==null?void 0:e.data];for(const l of t)if(Array.isArray(l))return l;return[]},wEe=(e={})=>{var f,m,g,x,h,p,v,b,j,N,w,_,k,C,T,P,A,S,E,O,I,L,Z,H,R,D,Y;const t=di(e.interview_id,e.id,e.uuid),r=di(e.candidate_name,(f=e.candidate)==null?void 0:f.full_name,(m=e.candidate)==null?void 0:m.name,(x=(g=e.submission)==null?void 0:g.candidate)==null?void 0:x.full_name,(p=(h=e.submission)==null?void 0:h.candidate)==null?void 0:p.name,e.candidate_full_name),s=di(e.job_title,(v=e.job)==null?void 0:v.title,(j=(b=e.submission)==null?void 0:b.job)==null?void 0:j.title,e.requirement_title,e.role),a=di(e.interview_mode,e.mode,e.interview_type,e.type),i=di(e.scheduled_at,e.scheduledAt,e.start_at,e.start_time,e.interview_datetime,e.interview_date),l=di(e.status,e.stage,e.interview_status),o=di(e.client_decision,e.client_status,e.decision),c=di(e.meeting_link,e.meet_link,e.video_link,e.join_url,e.link),d=di(e.recruiter_name,e.scheduled_by_name,e.created_by_name,e.submitted_by_name,(N=e.recruiter)==null?void 0:N.full_name,(w=e.recruiter)==null?void 0:w.name,(_=e.scheduled_by)==null?void 0:_.full_name,(k=e.scheduled_by)==null?void 0:k.name,(C=e.created_by)==null?void 0:C.full_name,(T=e.created_by)==null?void 0:T.name,(P=e.submission)==null?void 0:P.recruiter_name,(A=e.submission)==null?void 0:A.submitted_by_name,(E=(S=e.submission)==null?void 0:S.recruiter)==null?void 0:E.full_name,(I=(O=e.submission)==null?void 0:O.recruiter)==null?void 0:I.name),u=di(e.recruiter_email,e.scheduled_by_email,e.created_by_email,(L=e.recruiter)==null?void 0:L.email,(Z=e.scheduled_by)==null?void 0:Z.email,(H=e.created_by)==null?void 0:H.email,(R=e.submission)==null?void 0:R.recruiter_email,(Y=(D=e.submission)==null?void 0:D.recruiter)==null?void 0:Y.email);return{...e,interview_id:t||`${r||"candidate"}::${s||"job"}::${i||"time"}`,candidate_name:r,job_title:s,interview_mode:a,scheduled_at:i,status:l,client_decision:o,meeting_link:c,recruiter_name:d,recruiter_email:u}},NEe=[{endpoint:"/v1/am/interview-logs"}],kEe=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},SEe=e=>{const t=qC(e);return t==="completed"?"bg-emerald-100 text-emerald-800":t==="in_progress"?"bg-cyan-100 text-cyan-800":t==="scheduled"?"bg-amber-100 text-amber-800":t==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"},CEe=e=>{const t=qC(e);return t==="in_progress"?"In Progress":t==="no_show"?"No Show":t.split("_").filter(Boolean).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")};function AEe(){const[e,t]=y.useState(!0),[r,s]=y.useState([]),[a,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState("all"),u=async()=>{var v;try{i(""),t(!0);const b=new Map;let j=0;for(const{endpoint:N,params:w}of NEe)try{const _=w&&Object.keys(w).length>0?{params:w}:void 0,k=await G.get(N,_);j+=1,_Ee(k==null?void 0:k.data).map(T=>wEe(T)).forEach(T=>{const P=String(T.interview_id||"");if(!P)return;const A=b.get(P),S=new Date((A==null?void 0:A.scheduled_at)||(A==null?void 0:A.updated_at)||(A==null?void 0:A.created_at)||0).getTime(),E=new Date((T==null?void 0:T.scheduled_at)||(T==null?void 0:T.updated_at)||(T==null?void 0:T.created_at)||0).getTime();(!A||E>=S)&&b.set(P,T)})}catch(_){const k=(v=_==null?void 0:_.response)==null?void 0:v.status;if([401,403,404,405,422].includes(k))continue;console.warn(`Failed to load AM interview data from ${N}:`,_)}if(j===0)throw new Error("No interview endpoints reachable");s(Array.from(b.values()))}catch(b){console.error("Failed to load AM interview calendar:",b),i("Failed to load interview calendar.")}finally{t(!1)}};y.useEffect(()=>{u()},[]);const f=y.useMemo(()=>{const v=new Map;return r.forEach(b=>{const N=di(b.recruiter_name,b.recruiter_email)||"unknown",w=v.get(N)||0;v.set(N,w+1)}),Array.from(v.entries()).map(([b,j])=>({value:b,label:b==="unknown"?"Unknown recruiter":b,count:j})).sort((b,j)=>b.label.localeCompare(j.label))},[r]),m=y.useMemo(()=>c==="all"?r:r.filter(v=>(di(v.recruiter_name,v.recruiter_email)||"unknown")===c),[r,c]),g=y.useMemo(()=>c==="all"?null:f.find(v=>v.value===c)||null,[c,f]),x=y.useMemo(()=>{const v={};return m.forEach(b=>{const j=b.scheduled_at||b.created_at,N=j?new Date(j):null,w=N&&!Number.isNaN(N.getTime())?N.toDateString():"Unscheduled";v[w]||(v[w]=[]),v[w].push(b)}),Object.entries(v).sort((b,j)=>b[0]==="Unscheduled"?1:j[0]==="Unscheduled"?-1:new Date(b[0]).getTime()-new Date(j[0]).getTime())},[m]),h=v=>{const b=qC(v);return b==="scheduled"||b==="in_progress"},p=async v=>{var b,j;if(v&&window.confirm("Mark this interview as completed?"))try{o(v),await G.post(`/v1/interviews/${v}/mark-completed`),await u(),alert("Interview marked as completed.")}catch(N){console.error("Failed to mark interview as completed:",N),alert(((j=(b=N==null?void 0:N.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to mark interview as completed.")}finally{o("")}};return e?n.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading interviews..."}):n.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Calendar"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Interviews scheduled by recruiters for your managed requirements."})]}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),n.jsx("div",{className:"bg-gradient-to-r from-white to-slate-50 rounded-xl border border-gray-200 p-4 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[n.jsxs("div",{className:"w-full md:max-w-md",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5 tracking-wide uppercase",children:"Recruiter"}),n.jsxs("div",{className:"relative",children:[n.jsx(vAe,{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full appearance-none rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-10 text-sm text-gray-900 shadow-sm transition hover:border-indigo-300 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsxs("option",{value:"all",children:["All Recruiters (",r.length,")"]}),f.map(v=>n.jsxs("option",{value:v.value,children:[v.label," (",v.count,")"]},v.value))]}),n.jsx(io,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2.5 py-1 text-xs font-semibold text-indigo-700",children:["Recruiters: ",f.length]}),g?n.jsxs("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700",children:[g.label,": ",g.count]}):null]})]}),n.jsxs("p",{className:"text-sm text-gray-600 md:text-right",children:["Showing ",n.jsx("span",{className:"font-semibold text-gray-900",children:m.length})," ","interview",m.length===1?"":"s",g?n.jsxs(n.Fragment,{children:[" ","for ",n.jsx("span",{className:"font-semibold text-gray-900",children:g.label})]}):null]})]})}),x.length===0?n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center text-gray-500",children:"No interviews scheduled."}):x.map(([v,b])=>n.jsxs("section",{className:"space-y-3",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v}),n.jsx("div",{className:"space-y-3",children:b.map(j=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j.candidate_name||"Candidate"}),n.jsx("p",{className:"text-sm text-gray-600",children:j.job_title||"--"}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(_Ae,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:jEe(j.interview_mode)})]}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(Ya,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:kEe(j.scheduled_at)})]}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(_o,{className:"h-3.5 w-3.5"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Recruiter:"," ",n.jsx("span",{className:"font-semibold text-gray-900",children:j.recruiter_name||j.recruiter_email||"Unknown recruiter"})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${SEe(j.status)}`,children:CEe(j.status)||"Pending"}),j.meeting_link?n.jsx("a",{href:j.meeting_link,target:"_blank",rel:"noreferrer",className:"px-3 py-1 text-sm rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Join Meet"}):null,h(j.status)?n.jsxs("button",{type:"button",onClick:()=>p(j.interview_id),disabled:l===j.interview_id,className:"inline-flex items-center gap-1 px-3 py-1 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:[n.jsx(Ci,{className:"h-4 w-4"}),l===j.interview_id?"Marking...":"Mark Completed"]}):null]})]},j.interview_id))})]},v))]})}const EEe=new Set(["",null,void 0]),_s=(...e)=>{for(const t of e)if(!EEe.has(t))return t;return""},GC=e=>String(e||"").toLowerCase().replace(/\s+/g,"_"),TEe=e=>{switch(GC(e)){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return e||"Unknown"}},PEe=e=>{const t=GC(e);return t==="completed"?"bg-green-100 text-green-800":t==="scheduled"?"bg-yellow-100 text-yellow-800":t==="no_show"?"bg-red-100 text-red-800":t==="in_progress"?"bg-blue-100 text-blue-800":t==="cancelled"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-700"},h_=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},OEe=(e,t)=>{if(!e||!t)return"--";const r=new Date(e),s=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(s.getTime()))return"--";const a=Math.max(0,s.getTime()-r.getTime()),i=Math.floor(a/6e4),l=Math.floor(i/60),o=i%60;return l>0?`${l}h ${o}m`:`${o}m`},REe=e=>{var r,s,a,i;if(Array.isArray(e))return e;const t=[e==null?void 0:e.interview_logs,e==null?void 0:e.results,e==null?void 0:e.interviews,e==null?void 0:e.items,(r=e==null?void 0:e.data)==null?void 0:r.interview_logs,(s=e==null?void 0:e.data)==null?void 0:s.results,(a=e==null?void 0:e.data)==null?void 0:a.interviews,(i=e==null?void 0:e.data)==null?void 0:i.items,e==null?void 0:e.data];for(const l of t)if(Array.isArray(l))return l;return[]},LEe=(e={})=>{var i,l,o,c,d,u,f,m,g,x,h,p;const t=_s(e.interview_id,e.id,e.uuid),r=e.candidate||((i=e.submission)==null?void 0:i.candidate)||{},s=e.job||((l=e.submission)==null?void 0:l.job)||{},a=e.recruiter||((o=e.submission)==null?void 0:o.recruiter)||{};return{id:t,interview_id:t,mode:_s(e.interview_mode,e.mode,e.interview_type,e.type,"interview"),status:_s(e.status,e.stage,e.interview_status,"scheduled"),scheduled_at:_s(e.scheduled_at,e.scheduledAt,e.start_at,e.start_time,e.interview_datetime,e.interview_date),started_at:_s(e.started_at,e.start_at,e.startedAt),completed_at:_s(e.completed_at,e.end_at,e.completedAt),overall_ai_score:_s(e.overall_ai_score,e.overall_score,null),candidate:{id:_s(e.candidate_id,r.id,(c=e.candidate)==null?void 0:c.candidate_id),full_name:_s(e.candidate_name,r.full_name,r.name,(u=(d=e.submission)==null?void 0:d.candidate)==null?void 0:u.full_name),email:_s(e.candidate_email,r.email,(m=(f=e.submission)==null?void 0:f.candidate)==null?void 0:m.email)},job:{id:_s(e.job_id,s.id,(g=e.submission)==null?void 0:g.job_id),title:_s(e.job_title,s.title,(h=(x=e.submission)==null?void 0:x.job)==null?void 0:h.title,e.requirement_title),company_name:_s(e.company_name,s.company_name),location:_s(e.job_location,s.location)},recruiter:{id:_s(e.recruiter_id,a.id,(p=e.submission)==null?void 0:p.recruiter_id),full_name:_s(e.recruiter_name,a.full_name,a.name,e.scheduled_by_name),email:_s(e.recruiter_email,a.email,e.scheduled_by_email)}}},IEe=[{endpoint:"/v1/am/interview-logs"}];function FEe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState("all"),[u,f]=y.useState(""),[m,g]=y.useState("");y.useEffect(()=>{x()},[]);const x=async()=>{var v;try{s(!0),i("");const b=new Map;let j=0;for(const{endpoint:_,params:k}of IEe)try{const C=k&&Object.keys(k).length>0?{params:k}:void 0,T=await G.get(_,C);j+=1,REe(T==null?void 0:T.data).map(P=>LEe(P)).forEach(P=>{if(!P.id)return;const A=String(P.id),S=b.get(A);b.set(A,S?{...S,...P}:P)})}catch(C){const T=(v=C==null?void 0:C.response)==null?void 0:v.status;if([401,403,404,405,422].includes(T))continue;console.warn(`Failed to load AM interview data from ${_}:`,C)}if(j===0)throw new Error("No interview endpoints reachable");const N=Array.from(b.values()).sort((_,k)=>{const C=new Date(_.scheduled_at||0).getTime();return new Date(k.scheduled_at||0).getTime()-C}),w=await Promise.all(N.map(async _=>{try{const k=await G.get(`/v1/interviews/${_.id}/logs`),C=Array.isArray(k==null?void 0:k.data)?k.data:[];return{interview:_,actions:C}}catch{return{interview:_,actions:[]}}}));t(w)}catch(b){console.error("Failed to load interview logs",b),i("Failed to load interview logs."),t([])}finally{s(!1)}},h=y.useMemo(()=>{const v=new Set;return e.forEach(b=>{var j,N;(N=(j=b.interview)==null?void 0:j.job)!=null&&N.title&&v.add(b.interview.job.title)}),Array.from(v)},[e]),p=y.useMemo(()=>e.filter(v=>{var N;const b=v.interview||{},j=GC(b.status||"scheduled");if(l!=="all"&&j!==l||c!=="all"&&((N=b.job)==null?void 0:N.title)!==c)return!1;if(u){const w=new Date(`${u}T00:00:00`);if(new Date(b.scheduled_at)<w)return!1}if(m){const w=new Date(`${m}T23:59:59`);if(new Date(b.scheduled_at)>w)return!1}return!0}),[e,l,c,u,m]);return r?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading interview logs..."}):n.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interview Logs"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track scheduled, completed, and no-show interview activity."})]}),n.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),a&&n.jsx("div",{className:"text-red-600 mb-4",children:a}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:v=>o(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"in_progress",children:"In progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"no_show",children:"No Show"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Job Role"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All roles"}),h.map(v=>n.jsx("option",{value:v,children:v},v))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"From"}),n.jsx("input",{type:"date",value:u,onChange:v=>f(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"To"}),n.jsx("input",{type:"date",value:m,onChange:v=>g(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})}),p.length===0?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"No interview activity yet."}):n.jsx("div",{className:"space-y-4",children:p.map(v=>{const b=v.interview||{},j=b.candidate||{},N=b.job||{},w=b.recruiter||{},_=v.actions||[],k=_.find(A=>A.action==="joined"),C=_.find(A=>A.action==="completed"),T=(k==null?void 0:k.timestamp)||b.started_at,P=b.completed_at||(C==null?void 0:C.timestamp);return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:j.full_name||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:N.title||"Job Role"}),n.jsx("p",{className:"text-sm text-gray-500",children:(b.mode||"interview").split("_").map(A=>A?A[0].toUpperCase()+A.slice(1):"").join(" ")}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Recruiter: ",w.full_name||w.email||"--"]})]}),n.jsxs("div",{className:"text-left md:text-right",children:[n.jsx("span",{className:`inline-block mb-2 px-3 py-1 rounded text-sm ${PEe(b.status||"scheduled")}`,children:TEe(b.status||"scheduled")}),n.jsxs("p",{className:"font-semibold text-gray-800",children:["Score: ",b.overall_ai_score??"--"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-700 border-t pt-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Scheduled"}),n.jsx("p",{className:"font-semibold",children:h_(b.scheduled_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Started"}),n.jsx("p",{className:"font-semibold",children:h_(T)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),n.jsx("p",{className:"font-semibold",children:h_(P)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Duration"}),n.jsx("p",{className:"font-semibold",children:OEe(T,P)})]})]})]},b.id)})})]})}const Vs=(e,t={})=>{if(e==null||e==="")return"";const r=String(e),s=r.toLowerCase();if(t[s])return t[s];const a=r.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").trim();if(!a)return"";const i=new Set(["am","hr","ai","qa","ui","ux","id"]),l=new Set(["to","and","or","of","in","on","for","by"]);return a.toLowerCase().split(/\s+/).map((o,c)=>i.has(o)?o.toUpperCase():c>0&&l.has(o)?o:o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},DEe=new Set(["all","applied","sent_to_client","hired","direct_hire","rejected"]),p_=e=>{const t=String(e||"").trim().toLowerCase();return DEe.has(t)?t:"all"};function $Ee(){const[e,t]=ea(),[r,s]=y.useState(!0),[a,i]=y.useState([]),[l,o]=y.useState(p_(e.get("status"))),c=async()=>{try{s(!0);const h=await G.get("/v1/am/submissions");i(h.data.submissions||[])}catch(h){console.error("Failed to load submissions:",h),alert("Failed to fetch submissions")}finally{s(!1)}};y.useEffect(()=>{c()},[]),y.useEffect(()=>{o(p_(e.get("status")))},[e]);const d=h=>{const p=p_(h);o(p);const v=new URLSearchParams(e);p==="all"?v.delete("status"):v.set("status",p),t(v,{replace:!0})},u=()=>l==="all"?a:a.filter(h=>{var p;return((p=h.status)==null?void 0:p.toString().toLowerCase())===l}),f=async h=>{var p,v,b;if(window.confirm("Send this candidate to client?"))try{await G.post("/v1/am/send-to-client",{job_id:(p=a.find(j=>j.application_id===h))==null?void 0:p.job_id,application_ids:[h]}),alert("Candidate sent to client successfully"),c()}catch(j){alert("Failed to send to client: "+((b=(v=j.response)==null?void 0:v.data)==null?void 0:b.detail))}};if(r)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-center text-gray-500",children:"Loading submissions..."})});const m=h=>a.filter(p=>{var v;return((v=p.status)==null?void 0:v.toString().toLowerCase())===h}).length,g=u(),x=[{key:"all",label:`All (${a.length})`},{key:"applied",label:`Pending (${m("applied")})`},{key:"sent_to_client",label:`Sent to Client (${m("sent_to_client")})`},{key:"hired",label:`Hired (${m("hired")})`},{key:"direct_hire",label:`Direct Hire (${m("direct_hire")})`},{key:"rejected",label:`Rejected (${m("rejected")})`}];return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recruiter Submissions"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and manage candidate submissions from recruiters"})]}),n.jsx("div",{className:"flex gap-2 border-b",children:x.map(h=>n.jsx("button",{onClick:()=>d(h.key),className:`px-4 py-2 font-medium text-sm ${l===h.key?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:h.label},h.key))}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:g.length===0?n.jsxs("div",{className:"p-12 text-center text-gray-500",children:[n.jsx("p",{className:"text-lg font-medium",children:"No submissions found"}),n.jsx("p",{className:"text-sm mt-2",children:"Submissions from recruiters will appear here"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Candidate"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Job"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Match"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Submitted"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:g.map(h=>{const p=h.status?h.status.toString().toLowerCase():"";return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:h.candidate_name}),n.jsx("p",{className:"text-sm text-gray-500",children:h.email})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.job_title}),n.jsx("td",{className:"px-6 py-4",children:n.jsx(MEe,{status:h.status})}),n.jsx("td",{className:"px-6 py-4",children:h.match_score?n.jsx("div",{className:"w-12 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-600",style:{width:`${Math.min(h.match_score,100)}%`}})}):n.jsx("span",{className:"text-sm text-gray-500",children:""})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.submitted_at?new Date(h.submitted_at).toLocaleDateString():""}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[p==="applied"&&n.jsx("button",{onClick:()=>f(h.application_id),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",title:"Send to Client",children:n.jsx(Ai,{className:"w-4 h-4 inline"})}),p==="sent_to_client"&&n.jsx("span",{className:"text-xs text-gray-500",children:"Waiting for client feedback..."}),p==="hired"&&n.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Hired by client"}),p==="direct_hire"&&n.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Direct hire recorded"}),p==="rejected"&&n.jsx("span",{className:"text-xs text-red-600 font-medium",children:" Rejected"})]})})]},h.application_id)})})]})})})]})}function MEe({status:e}){const t=(e==null?void 0:e.toString().toLowerCase())||"",r={applied:{label:"Pending",className:"bg-yellow-100 text-yellow-800"},sent_to_client:{label:"Sent to Client",className:"bg-blue-100 text-blue-800"},hired:{label:"Hired",className:"bg-green-100 text-green-800"},rejected:{label:"Rejected",className:"bg-red-100 text-red-800"},selected:{label:"Selected",className:"bg-indigo-100 text-indigo-800"},scheduled:{label:"Scheduled",className:"bg-cyan-100 text-cyan-800"},in_progress:{label:"In Progress",className:"bg-cyan-100 text-cyan-800"},direct_hire:{label:"Direct Hire",className:"bg-purple-100 text-purple-800"}},s=Vs(e),a=r[t]||{label:s===""?"Pending":s,className:"bg-gray-100 text-gray-800"};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.className}`,children:a.label})}function BEe(){const[e,t]=y.useState(!0),[r,s]=y.useState([]),[a,i]=y.useState(null),[l,o]=y.useState({}),c=async()=>{try{const f=await G.get("/v1/am/pending-timesheets");s(f.data.pending_timesheets||[])}catch(f){console.error("Failed to load timesheets:",f),alert("Failed to fetch timesheets")}finally{t(!1)}};y.useEffect(()=>{c()},[]);const d=async f=>{var m,g;if(window.confirm("Approve this timesheet?"))try{await G.post(`/v1/am/timesheets/${f}/approve`),alert("Timesheet approved successfully"),c()}catch(x){alert("Failed to approve: "+((g=(m=x.response)==null?void 0:m.data)==null?void 0:g.detail))}},u=async f=>{var g,x;const m=window.prompt("Enter rejection reason:",l[f]||"");if(m!==null)try{await G.post(`/v1/am/timesheets/${f}/reject?reason=${encodeURIComponent(m)}`),alert("Timesheet rejected"),c()}catch(h){alert("Failed to reject: "+((x=(g=h.response)==null?void 0:g.data)==null?void 0:x.detail))}};return e?n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-center text-gray-500",children:"Loading timesheets..."})}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Timesheet Approvals"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and approve consultant timesheets"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-blue-900",children:[n.jsx("span",{className:"font-semibold",children:r.length})," timesheet",r.length!==1?"s":""," pending approval"]})}),n.jsx("div",{className:"space-y-4",children:r.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:[n.jsx(pn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:"No pending timesheets"}),n.jsx("p",{className:"text-sm mt-2",children:"All timesheets have been approved or are waiting for submission"})]}):r.map(f=>n.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition",children:[n.jsxs("button",{onClick:()=>i(a===f.timesheet_id?null:f.timesheet_id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50",children:[n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:f.consultant_name||""}),n.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ya,{className:"w-4 h-4"}),n.jsxs("span",{children:[f.period_type==="weekly"?"Weekly":"Monthly"," "," ",new Date(f.period_start).toLocaleDateString()," to"," ",new Date(f.period_end).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsxs("span",{children:[f.total_hours," hours"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Submitted"}),n.jsx("p",{className:"text-sm font-medium",children:f.submitted_at?new Date(f.submitted_at).toLocaleDateString():""})]}),n.jsx("div",{className:`transform transition ${a===f.timesheet_id?"rotate-180":""}`,children:n.jsx("span",{className:"text-gray-400",children:""})})]})]}),a===f.timesheet_id&&n.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Hours"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.total_hours})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Period Type"}),n.jsx("p",{className:"text-lg font-medium text-gray-900",children:f.period_type==="weekly"?"Weekly":"Monthly"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{onClick:()=>d(f.timesheet_id),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[n.jsx(Ci,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>u(f.timesheet_id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center justify-center gap-2",children:[n.jsx(Ja,{className:"w-4 h-4"}),"Reject"]})]})]})]},f.timesheet_id))})]})}const x_=e=>e?{...e,full_name:e.full_name||e.name||""}:null;function UEe(){const[e,t]=y.useState(null),[r,s]=y.useState({full_name:"",company_name:""}),[a,i]=y.useState(!0),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,f]=y.useState(""),m=async()=>{try{i(!0),f("");const h=await G.get("/auth/me"),p=x_(h.data||null);t(p),s({full_name:(p==null?void 0:p.full_name)||"",company_name:(p==null?void 0:p.company_name)||""})}catch{const p=localStorage.getItem("user");if(p){const v=x_(JSON.parse(p));t(v),s({full_name:(v==null?void 0:v.full_name)||"",company_name:(v==null?void 0:v.company_name)||""})}else f("Unable to load profile")}finally{i(!1)}};y.useEffect(()=>{m()},[]);const g=async()=>{var b,j;const h=Vt(r.full_name),p=Vt(r.company_name),v=ll(h,"Full name",{pattern:/^[A-Za-z][A-Za-z .'-]{1,79}$/,patternMessage:"Full name can only contain letters, spaces, apostrophes, periods, and hyphens."});if(v){f(v);return}if(p&&p.length<2){f("Company name must be at least 2 characters.");return}try{o(!0),f("");const N=await G.put("/auth/me",{full_name:h,company_name:p}),w=x_(N.data);t(w),d(!1),localStorage.setItem("user",JSON.stringify(w))}catch(N){f(((j=(b=N.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to save profile changes")}finally{o(!1)}};if(a)return n.jsx("div",{className:"p-6 text-gray-500",children:"Loading profile..."});if(!e)return n.jsx("div",{className:"p-6 text-red-600",children:u||"Profile not found"});const x=(e.full_name||e.username||"AM").split(" ").map(h=>h[0]).join("").slice(0,2).toUpperCase();return n.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-purple-600 text-white flex items-center justify-center text-2xl font-bold",children:x}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.full_name||e.username||"Account Manager"}),n.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]}),n.jsx("button",{onClick:()=>{d(!c),s({full_name:e.full_name||"",company_name:e.company_name||""})},className:"px-4 py-2 text-sm font-semibold rounded-md border border-purple-200 text-purple-700 hover:bg-purple-50",children:c?"Cancel":"Edit Profile"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Details"}),c&&n.jsx("button",{onClick:g,disabled:l,className:`px-4 py-2 rounded-md text-sm font-semibold ${l?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:l?"Saving...":"Save Changes"})]}),u&&n.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700",children:u}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Full Name"}),c?n.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-gray-900",value:r.full_name,onChange:h=>s(p=>({...p,full_name:h.target.value})),onBlur:h=>s(p=>({...p,full_name:Vt(h.target.value)}))}):n.jsx("p",{className:"font-medium text-gray-900",children:e.full_name||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Email"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.email||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Company"}),c?n.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-gray-900",value:r.company_name,onChange:h=>s(p=>({...p,company_name:h.target.value})),onBlur:h=>s(p=>({...p,company_name:Vt(h.target.value)}))}):n.jsx("p",{className:"font-medium text-gray-900",children:e.company_name||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Role"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.role||"account_manager"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Status"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.is_active===!1?"Inactive":"Active"})]})]})]})]})}function zEe(){const[e,t]=y.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[r,s]=y.useState({}),[a,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,f]=y.useState(!1),[m,g]=y.useState(!1),x=Tt(),h=()=>{const b={};return e.oldPassword.trim()||(b.oldPassword="Current password is required"),e.newPassword.trim()?e.newPassword.length<8?b.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=])[A-Za-z\d!@#$%^&*()_+\-=]{8,}/.test(e.newPassword)||(b.newPassword="Password must contain uppercase, lowercase, number and special character"):b.newPassword="New password is required",e.confirmPassword.trim()?e.newPassword!==e.confirmPassword&&(b.confirmPassword="Passwords do not match"):b.confirmPassword="Please confirm your new password",s(b),Object.keys(b).length===0},p=async b=>{var j,N,w,_;if(b.preventDefault(),!!h()&&window.confirm("Are you sure you want to change your password? You will be logged out after the change.")){i(!0),o("");try{const k=new FormData;k.append("current_password",e.oldPassword),k.append("new_password",e.newPassword),await G.post("/v1/am/change-password",k),o("Password changed successfully! You will be redirected to login."),setTimeout(()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),x("/login")},2e3)}catch(k){const C=((N=(j=k.response)==null?void 0:j.data)==null?void 0:N.detail)||((_=(w=k.response)==null?void 0:w.data)==null?void 0:_.message)||"Failed to change password";o(C)}finally{i(!1)}}},v=(b,j)=>{t(N=>({...N,[b]:j})),r[b]&&s(N=>({...N,[b]:""}))};return n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600",children:"Manage your account security and password"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Change Password"}),n.jsx("p",{className:"text-gray-600",children:"Update your password to keep your account secure"})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:c?"text":"password",value:e.oldPassword,onChange:b=>v("oldPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.oldPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.oldPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:u?"text":"password",value:e.newPassword,onChange:b=>v("newPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.newPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.newPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:m?"text":"password",value:e.confirmPassword,onChange:b=>v("confirmPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.confirmPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Changing Password...":"Change Password"})}),l&&n.jsx("div",{className:`p-4 rounded-lg ${l.includes("successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l})]})]})]})}function wu({label:e,value:t,trend:r,color:s="blue",icon:a}){const i=r>0?"text-green-600":"text-red-600",l=r>0?"":"";return n.jsxs("div",{className:`bg-${s}-50 border-2 border-${s}-200 rounded-lg p-4`,children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-${s}-600 text-xs font-semibold`,children:e}),n.jsx("p",{className:`text-${s}-600 text-3xl font-bold mt-2`,children:t})]}),n.jsx("div",{className:"text-2xl",children:a})]}),r!==void 0&&n.jsxs("p",{className:`text-xs mt-2 ${i}`,children:[l," ",Math.abs(r),"% vs last month"]})]})}function qR({data:e,title:t,type:r="bar"}){const s=Math.max(...e.map(a=>a.value));return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:t}),n.jsx("div",{className:"space-y-4",children:e.map((a,i)=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.label}),n.jsx("span",{className:"text-sm font-bold text-gray-900",children:a.value})]}),n.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${a.color||"bg-blue-600"}`,style:{width:`${a.value/s*100}%`}})})]},i))})]})}function GR({columns:e,data:t,title:r}){return n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:r})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsx("tr",{children:e.map((s,a)=>n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:s},a))})}),n.jsx("tbody",{children:t.map((s,a)=>n.jsx("tr",{className:"border-b hover:bg-gray-50",children:s.map((i,l)=>n.jsx("td",{className:"px-6 py-3 text-sm text-gray-900",children:i},l))},a))})]})})]})}function WEe(){const[e,t]=y.useState({timeToFill:0,conversionRate:0,jobsOpen:0,candidatesInPipeline:0,offersExtended:0,joiningsCompleted:0,avgTimePerStage:{},recruiterKPIs:[],clientMetrics:[],pipelineData:[]}),[r,s]=y.useState(!0),[a,i]=y.useState("month"),[l,o]=y.useState("view");y.useEffect(()=>{c()},[a]);const c=async()=>{var u;try{s(!0);const f=await G.get("/v1/reports/analytics",{params:{period:a}}),m=((u=f.data)==null?void 0:u.data)||f.data;t({timeToFill:m.time_to_fill||23,conversionRate:m.conversion_rate||8.5,jobsOpen:m.open_positions||12,candidatesInPipeline:m.pipeline_count||156,offersExtended:m.offers_extended||8,joiningsCompleted:m.joinings||3,avgTimePerStage:{sourcing:5,screening:3,interview:7,offer:2},recruiterKPIs:[{name:"John Doe",placements:8,avgTimeToFill:18,activeJobs:5},{name:"Sarah Smith",placements:6,avgTimeToFill:25,activeJobs:3},{name:"Mike Johnson",placements:12,avgTimeToFill:20,activeJobs:7},{name:"Emily Brown",placements:5,avgTimeToFill:28,activeJobs:2}],clientMetrics:[{client:"Tech Corp",submissions:12,accepted:8,rate:67},{client:"Finance Inc",submissions:8,accepted:5,rate:63},{client:"Retail Plus",submissions:15,accepted:9,rate:60},{client:"Health Care",submissions:6,accepted:5,rate:83}],pipelineData:[{label:"Sourced",value:50,color:"bg-blue-600"},{label:"Screening",value:35,color:"bg-yellow-600"},{label:"Interview",value:20,color:"bg-orange-600"},{label:"Offer",value:8,color:"bg-purple-600"},{label:"Joined",value:3,color:"bg-green-600"}]})}catch(f){console.error("Failed to load report data:",f)}finally{s(!1)}},d=async u=>{try{const f=await G.get("/v1/reports/export",{params:{format:u,period:a},responseType:u==="pdf"?"blob":"json"});if(u==="pdf"){const m=window.URL.createObjectURL(new Blob([f.data])),g=document.createElement("a");g.href=m,g.setAttribute("download",`recruitment-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(g),g.click()}else if(u==="excel"){const m=window.URL.createObjectURL(new Blob([f.data])),g=document.createElement("a");g.href=m,g.setAttribute("download",`recruitment-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(g),g.click()}}catch(f){alert("Export failed: "+f.message)}};return r?n.jsx("div",{className:"p-6 text-center",children:"Loading reports..."}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Recruitment metrics and KPI dashboard"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6 flex gap-4 flex-wrap items-center",children:[n.jsxs("select",{value:a,onChange:u=>i(u.target.value),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"week",children:"Last 7 Days"}),n.jsx("option",{value:"month",children:"Last 30 Days"}),n.jsx("option",{value:"quarter",children:"Last 90 Days"}),n.jsx("option",{value:"year",children:"Last Year"})]}),n.jsxs("div",{className:"flex gap-2 ml-auto",children:[n.jsx("button",{onClick:()=>d("pdf"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-medium",title:"Export as PDF",children:" PDF"}),n.jsx("button",{onClick:()=>d("excel"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm font-medium",title:"Export as Excel",children:" Excel"}),n.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium",title:"Print",children:" Print"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[n.jsx(wu,{label:"Avg Time to Fill",value:`${e.timeToFill}d`,trend:-5,color:"blue",icon:""}),n.jsx(wu,{label:"Conversion Rate",value:`${e.conversionRate}%`,trend:2,color:"green",icon:""}),n.jsx(wu,{label:"Open Positions",value:e.jobsOpen,trend:3,color:"yellow",icon:""}),n.jsx(wu,{label:"Pipeline",value:e.candidatesInPipeline,trend:-8,color:"purple",icon:""}),n.jsx(wu,{label:"Offers",value:e.offersExtended,trend:1,color:"orange",icon:""}),n.jsx(wu,{label:"Joinings",value:e.joiningsCompleted,trend:5,color:"red",icon:""})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsx(qR,{title:"Pipeline Overview",data:e.pipelineData}),n.jsx(qR,{title:"Time per Stage",data:Object.entries(e.avgTimePerStage).map(([u,f])=>({label:u.charAt(0).toUpperCase()+u.slice(1),value:f,color:"bg-indigo-600"}))})]}),n.jsx(GR,{title:"Recruiter Performance KPIs",columns:["Recruiter","Total Placements","Avg Time to Fill","Active Jobs"],data:e.recruiterKPIs.map(u=>[u.name,u.placements.toString(),`${u.avgTimeToFill} days`,u.activeJobs.toString()])}),n.jsx("div",{className:"mt-6",children:n.jsx(GR,{title:"Client Submission Metrics",columns:["Client Name","Total Submissions","Accepted","Acceptance Rate"],data:e.clientMetrics.map(u=>[u.client,u.submissions.toString(),u.accepted.toString(),`${u.rate}%`])})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Key Insights"}),n.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[n.jsx("li",{children:" Average time-to-fill decreased by 5% this period"}),n.jsx("li",{children:" Mike Johnson leads with 12 placements"}),n.jsx("li",{children:" Tech Corp maintains highest volume (12 submissions)"}),n.jsx("li",{children:" Health Care has best acceptance rate (83%)"}),n.jsx("li",{children:" Interview stage is longest (7 days average)"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg border border-green-200",children:[n.jsx("h3",{className:"text-lg font-bold text-green-900 mb-3",children:"Recommendations"}),n.jsxs("ul",{className:"space-y-2 text-sm text-green-800",children:[n.jsx("li",{children:" Optimize screening process to reduce screening stage time"}),n.jsx("li",{children:" Increase submissions to Finance Inc (low volume)"}),n.jsx("li",{children:" Share best practices from Mike Johnson's pipeline"}),n.jsx("li",{children:" Expand relationship with Health Care (high success)"}),n.jsx("li",{children:" Consider hiring additional screeners"})]})]})]}),n.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg text-center text-sm text-gray-600",children:n.jsxs("p",{children:["Report generated on ",new Date().toLocaleDateString(),"  Last updated"," ",new Date().toLocaleTimeString()]})})]})}function VEe(){const e=Tt(),[t,r]=y.useState({title:"",description:"",skills:"",min_experience:0,max_experience:0,location:"",department:"",company_name:"",status:"open",sla_days:7,recruiters:[]}),[s,a]=y.useState(null),[i,l]=y.useState([]),[o,c]=y.useState(!1),[d,u]=y.useState("");y.useEffect(()=>{let h=!0;return G.get("/v1/users?role=recruiter").then(p=>{h&&l(p.data||[])}).catch(()=>{}),()=>{h=!1}},[]);const f=h=>p=>{const v=p.target.type==="number"?Number(p.target.value):p.target.value;r(b=>({...b,[h]:v}))},m=h=>{const p=[...h.target.selectedOptions].map(v=>v.value);r(v=>({...v,recruiters:p}))},g=h=>{var p;a(((p=h.target.files)==null?void 0:p[0])??null)},x=async h=>{var p,v,b,j,N,w,_;h.preventDefault(),c(!0),u("");try{const k={title:t.title,description:t.description,skills:t.skills.split(",").map(P=>P.trim()).filter(Boolean),min_experience:t.min_experience,max_experience:t.max_experience,location:t.location,department:t.department,company_name:t.company_name,status:t.status,sla_days:t.sla_days},C=await vee(k),T=((p=C.data)==null?void 0:p.id)||((v=C.data)==null?void 0:v.public_id)||((b=C.data)==null?void 0:b.job_id)||((j=C.data)==null?void 0:j.uuid);if(s&&T){const P=new FormData;P.append("file",s),await l7(T,P)}(N=t.recruiters)!=null&&N.length&&T&&await o7(T,t.recruiters),e(T?`/recruitment/jobs/${T}`:"/recruitment/jobs")}catch(k){console.error(k),u(((_=(w=k==null?void 0:k.response)==null?void 0:w.data)==null?void 0:_.message)||(k==null?void 0:k.message)||"Failed to create job. Check console for details.")}finally{c(!1)}};return n.jsxs("div",{className:"page-container",children:[n.jsx("h1",{children:"Create Job"}),n.jsxs("form",{onSubmit:x,className:"job-form",children:[n.jsxs("label",{children:["Title",n.jsx("input",{value:t.title,onChange:f("title"),required:!0})]}),n.jsxs("label",{children:["Description",n.jsx("textarea",{value:t.description,onChange:f("description"),required:!0})]}),n.jsxs("label",{children:["Skills (comma separated)",n.jsx("input",{value:t.skills,onChange:f("skills")})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsxs("label",{children:["Min Exp (yrs)",n.jsx("input",{type:"number",min:0,value:t.min_experience,onChange:f("min_experience")})]}),n.jsxs("label",{children:["Max Exp (yrs)",n.jsx("input",{type:"number",min:0,value:t.max_experience,onChange:f("max_experience")})]})]}),n.jsxs("label",{children:["Location",n.jsx("input",{value:t.location,onChange:f("location")})]}),n.jsxs("label",{children:["Department",n.jsx("input",{value:t.department,onChange:f("department")})]}),n.jsxs("label",{children:["Company Name",n.jsx("input",{value:t.company_name,onChange:f("company_name")})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:f("status"),children:[n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"draft",children:"Draft"})]})]}),n.jsxs("label",{children:["SLA (days)",n.jsx("input",{type:"number",min:0,value:t.sla_days,onChange:f("sla_days")})]}),n.jsxs("label",{children:["Assign Recruiters (multi)",n.jsx("select",{multiple:!0,value:t.recruiters,onChange:m,children:i.map(h=>n.jsx("option",{value:h.id||h.user_id,children:h.name||h.full_name||h.email},h.id||h.user_id))})]}),n.jsxs("label",{children:["Upload JD (optional)",n.jsx("input",{type:"file",onChange:g,accept:".pdf,.doc,.docx"})]}),d&&n.jsx("div",{className:"error",children:d}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("button",{type:"submit",disabled:o,children:o?"Creating...":"Create Job"}),n.jsx("button",{type:"button",onClick:()=>e("/recruitment/jobs"),style:{marginLeft:8},disabled:o,children:"Cancel"})]})]})]})}function HEe({value:e,onFile:t}){return n.jsxs("div",{children:[n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:r=>{var s;return t(((s=r.target.files)==null?void 0:s[0])??null)}}),e&&typeof e=="string"&&n.jsx("div",{style:{marginTop:8},children:n.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:"View uploaded JD"})}),e&&e.name&&n.jsx("div",{style:{marginTop:8},children:e.name})]})}function qEe(){var g;const{id:e}=Or(),t=Tt(),[r,s]=y.useState(!0),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState(null);if(y.useEffect(()=>{let x=!0;return PS(e).then(h=>{var v;if(!x)return;const p=h.data??((v=h.data)==null?void 0:v.data)??null;o(p)}).catch(console.error).finally(()=>x&&s(!1)),()=>x=!1},[e]),r)return n.jsx("div",{className:"p-6",children:"Loading..."});if(!l)return n.jsx("div",{className:"p-6 text-red-600",children:"Job not found"});const[u,f]=y.useState({title:l.title||"",description:l.description||"",department:l.department||"",location:l.location||"",min_experience:l.min_experience??"",max_experience:l.max_experience??"",status:l.status||"draft",recruiters:((g=l.recruiters)==null?void 0:g.map(x=>x.id||x))||[],sla_days:l.sla_days??7}),m=async x=>{var h,p,v;x.preventDefault(),i(!0);try{if(await bee(e,{title:u.title,description:u.description,department:u.department,location:u.location,min_experience:u.min_experience===""?null:Number(u.min_experience),max_experience:u.max_experience===""?null:Number(u.max_experience),status:u.status,sla_days:u.sla_days}),c){const b=new FormData;b.append("file",c),await l7(e,b)}(h=u.recruiters)!=null&&h.length&&await o7(e,u.recruiters),t(`/recruitment/jobs/${e}`)}catch(b){console.error(b),alert(((v=(p=b==null?void 0:b.response)==null?void 0:p.data)==null?void 0:v.detail)||"Failed to update")}finally{i(!1)}};return n.jsxs("div",{className:"page-container",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Job"}),n.jsxs("form",{onSubmit:m,className:"bg-white p-6 rounded shadow space-y-4",children:[n.jsx("input",{className:"w-full p-2 border rounded",value:u.title,onChange:x=>f({...u,title:x.target.value}),required:!0}),n.jsx("textarea",{className:"w-full p-3 border rounded",rows:6,value:u.description,onChange:x=>f({...u,description:x.target.value})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("input",{className:"p-2 border rounded",value:u.department,onChange:x=>f({...u,department:x.target.value})}),n.jsx("input",{className:"p-2 border rounded",value:u.location,onChange:x=>f({...u,location:x.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("input",{type:"number",className:"p-2 border rounded",value:u.min_experience,onChange:x=>f({...u,min_experience:x.target.value})}),n.jsx("input",{type:"number",className:"p-2 border rounded",value:u.max_experience,onChange:x=>f({...u,max_experience:x.target.value})}),n.jsxs("select",{value:u.status,onChange:x=>f({...u,status:x.target.value}),className:"p-2 border rounded",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"closed",children:"Closed"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(RecruiterAssign,{value:u.recruiters,onChange:x=>f({...u,recruiters:x})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Upload JD"}),n.jsx(HEe,{value:l.jd_url||null,onFile:x=>d(x)})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded",children:a?"Saving...":"Save"}),n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border rounded",children:"Cancel"})]})]})]})}function GEe({candidate:e}){return(Cl()||{}).role,n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:e.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:e.email})]}),n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-600",children:e.status||"Applied"})]})}function JEe(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState([]),[a,i]=y.useState(null),[l,o]=y.useState(!0),[c,d]=y.useState(!1),[u,f]=y.useState(""),[m,g]=y.useState(null);y.useEffect(()=>{let p=!0;return o(!0),PS(e).then(v=>{var j;if(!p)return;const b=((j=v.data)==null?void 0:j.data)??v.data??null;i(b)}).catch(()=>{}).finally(()=>p&&o(!1)),()=>p=!1},[e]);const x=async()=>{d(!0),f("");try{const v=(await Nee(e)).data??[];s(Array.isArray(v)?v:[])}catch(p){console.error(p),f("Failed to run matching")}finally{d(!1)}};y.useEffect(()=>{x()},[e]);const h=async p=>{var b,j;const v=p.candidate_id??p.id;if(!v){alert("Candidate id not available");return}if(confirm(`Promote ${p.full_name||"candidate"} to submission for this job?`)){g(v);try{await wee(e,v),alert("Candidate promoted to submission. Check Submissions page.")}catch(N){console.error(N),alert(((j=(b=N==null?void 0:N.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to promote candidate")}finally{g(null)}}};return n.jsxs("div",{className:"page-container",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h2",{children:["Matches for Job ",(a==null?void 0:a.title)??e]}),n.jsxs("div",{children:[n.jsx("button",{onClick:()=>t(`/recruitment/jobs/${e}`),children:"Back to Job"}),n.jsx("button",{onClick:x,disabled:c,style:{marginLeft:8},children:c?"Running...":"Run Match"})]})]}),u&&n.jsx("div",{className:"error",children:u}),n.jsx("div",{style:{marginTop:12},children:r.length===0?n.jsx("div",{children:"No matches returned yet."}):n.jsx("div",{style:{display:"grid",gap:12},children:r.map(p=>{const v=p.candidate_id??p.public_id??p.id;return n.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[n.jsx(GEe,{candidate:{id:v,public_id:p.public_id,full_name:p.full_name,email:p.email,phone:p.phone}}),n.jsxs("div",{style:{minWidth:180},children:[n.jsxs("div",{children:["Fit score: ",typeof p.fit_score=="number"?p.fit_score.toFixed(2):p.fit_score]}),p.resume_url&&n.jsx("div",{style:{marginTop:8},children:n.jsx("a",{href:p.resume_url,target:"_blank",rel:"noreferrer",children:"View Resume"})}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("button",{onClick:()=>h(p),disabled:m===v,children:m===v?"Promoting...":"Promote to Submission"}),n.jsx("button",{onClick:()=>{window.open(`/candidates/${v}`,"_blank")},style:{marginLeft:8},children:"View Profile"})]})]})]},v)})})})]})}function g_(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,f]=y.useState({}),[m,g]=y.useState({}),x=async()=>{var b,j;try{i(!0);let N;e?(console.log("Recruiter Page  Loading ONLY this job:",e),N=await _ee(e),s(((b=N.data)==null?void 0:b.candidates)||[])):(console.log("Admin Page  Loading ALL submissions"),N=await jee(),s(((j=N.data)==null?void 0:j.candidates)||[])),o("")}catch(N){console.error(N),o("Could not load applied candidates"),s([])}finally{i(!1)}},h=async b=>{var j,N;if(!u[b]){g(w=>({...w,[b]:!0}));try{let w;try{w=await G.get(`/v1/workflow/candidates/${b}/timeline`)}catch{w=await G.get(`/v1/candidates/${b}/timeline`)}const k=(((j=w.data)==null?void 0:j.timeline)||((N=w.data)==null?void 0:N.data)||w.data||[]||[]).map(C=>({status:C.status||C.event||"updated",by:C.by||C.actor||C.user||"",at:C.at||C.timestamp||C.created_at||C.createdAt||"",note:C.note||C.message||"",role:C.role||C.actor_role||"",...C}));f(C=>({...C,[b]:k}))}catch(w){console.error("Failed to load timeline:",w),f(_=>({..._,[b]:[]}))}finally{g(w=>({...w,[b]:!1}))}}},p=b=>{c===b?d(null):(d(b),h(b))};y.useEffect(()=>{x()},[e]);const v=b=>{if(b){if(window.location.pathname.includes("/recruiter/")){t(`/recruiter/candidate-profile/${b}`);return}t(`/candidates/${b}`)}};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Job Submissions":"Applied Candidates"}),n.jsx("p",{className:"text-sm text-gray-500",children:e?"Candidates submitted for this requirement with workflow timeline":"All candidates who have applied to jobs"})]}),a&&n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading applied candidates..."}),!a&&l&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded",children:l}),!a&&r.length===0&&n.jsx("div",{className:"bg-purple-50 border border-purple-100 text-purple-700 p-6 rounded text-center",children:"No candidates have applied yet."}),!a&&r.length>0&&n.jsx("div",{className:"bg-white rounded shadow overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-purple-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"S. No."}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Candidate"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e&&n.jsx("th",{className:"px-4 py-3 text-left",children:"Sent to AM Date"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Timeline"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:r.map((b,j)=>{const N=b.candidate_id||b.id,w=N||b.public_id||`${b.application_id}-${j}`,_=c===w,k=u[w]||[],C=m[w];return n.jsxs(we.Fragment,{children:[n.jsxs("tr",{className:_?"bg-purple-50":"",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:j+1}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"font-medium",children:b.full_name||"Unnamed"}),n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",b.public_id||b.candidate_id]})]}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{children:b.email||""}),n.jsx("div",{className:"text-xs text-gray-500",children:b.phone||""})]}),n.jsx("td",{className:"px-4 py-3",children:(()=>{const T=b.status||"applied",P=S=>{switch(S.toLowerCase()){case"applied":return"bg-blue-100 text-blue-800";case"sent_to_client":return"bg-purple-100 text-purple-800";case"called":return"bg-indigo-100 text-indigo-800";case"feedback_added":return"bg-violet-100 text-violet-800";case"hold_revisit":case"client_hold":return"bg-amber-100 text-amber-800";case"interview":return"bg-orange-100 text-orange-800";case"rejected":return"bg-red-100 text-red-800";case"rejected_by_recruiter":case"am_rejected":case"client_rejected":return"bg-rose-100 text-rose-800";case"selected":case"hired":return"bg-green-100 text-green-800";case"on_hold":case"pending":return"bg-yellow-100 text-yellow-800";case"withdrawn":return"bg-gray-100 text-gray-800";case"client_shortlisted":return"bg-emerald-100 text-emerald-800";case"am_shortlisted":return"bg-teal-100 text-teal-800";case"am_hold":return"bg-yellow-100 text-yellow-800";case"sent_to_am":return"bg-indigo-100 text-indigo-800";case"am_viewed":return"bg-cyan-100 text-cyan-800";default:return"bg-indigo-100 text-indigo-800"}},A=S=>S.split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ");return n.jsx("span",{className:`px-3 py-1 rounded text-xs font-medium ${P(T)}`,children:A(T)})})()}),e&&n.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.sent_to_am_at||b.sent_to_client_at||b.applied_at?(()=>{const T=b.sent_to_am_at||b.sent_to_client_at||b.applied_at,P=new Date(T),A=P.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),S=P.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${A} | ${S}`})():""}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("button",{onClick:()=>p(w),disabled:!N,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 rounded transition-colors",children:[n.jsx(pn,{className:"w-3 h-3"}),_?"Hide":"View"," Timeline",_?n.jsx(C1,{className:"w-3 h-3"}):n.jsx(io,{className:"w-3 h-3"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>v(N),disabled:!N,className:"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 rounded transition-colors disabled:opacity-60",children:"View Profile"})})]}),_&&n.jsx("tr",{className:"bg-purple-50/50",children:n.jsx("td",{colSpan:e?7:6,className:"px-4 py-4",children:n.jsxs("div",{className:"bg-white rounded-lg border border-purple-200 p-4",children:[n.jsxs("h4",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[n.jsx(pn,{className:"w-4 h-4"}),"Activity Timeline - All Status Updates"]}),C?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-2"}),"Loading timeline..."]}):k.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(cn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No timeline events recorded yet."]}):n.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[...k].sort((T,P)=>new Date(P.at)-new Date(T.at)).map((T,P)=>{var A,S,E,O,I,L,Z,H,R,D,Y,M;return n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-shrink-0",children:[n.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${(S=(A=T.role)==null?void 0:A.toLowerCase())!=null&&S.includes("am")||(O=(E=T.role)==null?void 0:E.toLowerCase())!=null&&O.includes("account")?"bg-orange-500":(L=(I=T.role)==null?void 0:I.toLowerCase())!=null&&L.includes("recruiter")?"bg-blue-500":"bg-purple-500"}`}),P<k.length-1&&n.jsx("div",{className:"w-px h-8 bg-gray-200 mx-auto mt-1"})]}),n.jsxs("div",{className:"flex-1 pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-semibold capitalize text-gray-900",children:(T.status||"Updated").replace(/_/g," ")}),n.jsxs("div",{className:"flex items-center gap-2",children:[T.role&&n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${(H=(Z=T.role)==null?void 0:Z.toLowerCase())!=null&&H.includes("am")||(D=(R=T.role)==null?void 0:R.toLowerCase())!=null&&D.includes("account")?"bg-orange-100 text-orange-700":(M=(Y=T.role)==null?void 0:Y.toLowerCase())!=null&&M.includes("recruiter")?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:T.role}),T.by&&n.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[n.jsx(_o,{className:"w-3 h-3"}),T.by]})]})]}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:T.at?new Date(T.at).toLocaleString():""}),T.note&&n.jsx("div",{className:"mt-1 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:T.note})]})]},P)})})]})})})]},b.application_id||`${w}-${j}`)})})]})})]})}function en(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function KEe(e){if(!e)throw new Error("payload is required");const t=await G.post("/v1/auth/register",e);return en(t)}async function XEe(e){if(!e)throw new Error("payload is required");const t=await G.post("/v1/candidates",e);return en(t)}async function pU(e){if(!e)throw new Error("candidate id is required");const t=await G.get(`/v1/candidates/${e}`);return en(t)}async function YEe(e,t,{onUploadProgress:r}={}){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("file is required");const s=new FormData;s.append("file",t);const a=await G.post(`/v1/candidates/${e}/resume/upload`,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return en(a)}async function ZEe(e,t,{onUploadProgress:r}={}){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("formData is required");const s=await G.post("/v1/candidates/{candidate_id}/resume/upload",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return en(s)}async function QEe(e){if(!e)throw new Error("candidateId is required");const t=await G.get(`/v1/candidates/${e}/resume/versions`);return en(t)}async function e3e(e,t){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("versionId is required");const r=await G.post(`/v1/candidates/${e}/resume/restore/${t}`);return en(r)}async function t3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=await G.post(`/v1/candidates/${e}/forward`,t);return en(r)}async function r3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=await G.put(`/v1/candidates/${e}/status`,t);return en(r)}async function n3e(e){if(!e)throw new Error("candidateId is required");const t=await G.get(`/v1/candidates/${e}/timeline`);return en(t)}async function s3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=(t==null?void 0:t.note)||(t==null?void 0:t.text)||"";if(!r)throw new Error("note payload is required");const s=await G.post(`/v1/candidates/${e}/notes`,{note:r});return en(s)}async function a3e(e,t={}){if(!e)throw new Error("candidateId is required");if(!t||!t.mode)throw new Error("payload.mode is required (ai|f2f|online)");const r=await G.post(`/v1/candidates/${e}/screening`,t);return en(r)}async function i3e(e,t={}){if(!e)throw new Error("candidateId is required");if(!t||!t.classification)throw new Error("payload.classification is required");const r=await G.put(`/v1/candidates/${e}/classification`,t);return en(r)}async function l3e(e={}){if(!e)throw new Error("payload is required");const t=await G.post("/v1/candidates/email/send",e);return en(t)}async function o3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=await G.post(`/v1/employees/from-candidate/${e}`,t);return en(r)}async function c3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=await G.post(`/v1/bgv/${e}/initiate`,t);return en(r)}async function d3e(e,t={}){if(!e)throw new Error("candidateId is required");const r=await G.post(`/v1/bgv/${e}/assign-vendor`,t);return en(r)}async function u3e(e){if(!e)throw new Error("candidateId is required");const t=await G.get(`/v1/bgv/${e}/reports`);return en(t)}async function f3e(e={}){var s,a,i,l,o,c;const t={...e||{}},r=Number(t.limit);Number.isFinite(r)&&r>200&&(t.limit=200);try{const d=await G.get("/v1/candidates",{params:t});return((s=d.data)==null?void 0:s.data)??d.data}catch(d){if(((a=d==null?void 0:d.response)==null?void 0:a.status)===422&&t.limit!==200){const f=await G.get("/v1/candidates",{params:{...t,limit:200}});return((i=f.data)==null?void 0:i.data)??f.data}if(((l=d==null?void 0:d.response)==null?void 0:l.status)!==403)throw d;const u=[()=>G.get("/workflow/candidates",{params:t}),()=>G.get("/v1/workflow/candidates",{params:t})];for(const f of u)try{const m=await f(),g=((o=m==null?void 0:m.data)==null?void 0:o.data)??(m==null?void 0:m.data)??{};return Array.isArray(g)?g:Array.isArray(g==null?void 0:g.candidates)?g.candidates:Array.isArray(g==null?void 0:g.items)?g.items:[]}catch(m){if(![403,404].includes((c=m==null?void 0:m.response)==null?void 0:c.status))throw m}return[]}}async function xU(e={}){const t=Object.entries(e).reduce((r,[s,a])=>(a!=null&&a!==""&&(r[s]=a),r),{});try{const r=await G.get("/v1/candidates/search",{params:t});return en(r)}catch(r){throw console.error("Search API error:",r),r}}async function m3e(e,{onUploadProgress:t}={}){if(!e)throw new Error("file is required");const r=new FormData;r.append("file",e);const s=await G.post("/v1/candidates/bulk-upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t});return en(s)}async function h3e(e=[],{duplicateOption:t="skip",onUploadProgress:r}={}){if(!Array.isArray(e)||e.length===0)throw new Error("files are required");const s=new FormData;e.forEach(i=>s.append("files",i)),s.append("duplicate_option",t);const a=await G.post("/v1/candidates/bulk-resume-upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return en(a)}async function p3e(){const e=await G.get("/v1/candidates/bulk-upload/history");return en(e)}async function x3e(e=[],{duplicateOption:t="skip"}={}){if(!Array.isArray(e)||e.length===0)throw new Error("files are required");const r=new FormData;e.forEach(a=>r.append("files",a)),r.append("duplicate_option",t);const s=await G.post("/v1/candidates/bulk-resume-upload-async",r,{headers:{"Content-Type":"multipart/form-data"}});return en(s)}async function g3e(e){if(!e)throw new Error("taskId is required");const t=await G.get(`/v1/candidates/bulk-upload-status/${e}`);return en(t)}async function y3e(e=[]){if(!Array.isArray(e)||e.length===0)throw new Error("ids are required");const t=await G.post("/v1/candidates/verify-bulk",{ids:e});return en(t)}async function v3e(e={}){if(!e.candidate_ids||e.candidate_ids.length<2)throw new Error("At least two candidate_ids are required");const t=await G.post("/v1/candidates/merge",e);return en(t)}const ln={registerUser:KEe,createDirectCandidate:XEe,listCandidates:f3e,searchCandidates:xU,getCandidateById:pU,uploadResumeForCandidate:YEe,uploadResumeFormData:ZEe,getResumeVersions:QEe,restoreResumeVersion:e3e,forwardProfile:t3e,updateStatus:r3e,getTimeline:n3e,addCandidateNote:s3e,mergeCandidates:v3e,initiateScreening:a3e,classifyCandidate:i3e,sendBulkEmail:l3e,convertToEmployee:o3e,initiateBgvCheck:c3e,assignBgvVendor:d3e,getBgvReports:u3e,bulkUploadCandidates:m3e,bulkResumeUploadCandidates:h3e,bulkResumeUploadCandidatesAsync:x3e,getBulkUploadStatus:g3e,getCandidateBulkUploadHistory:p3e,verifyCandidatesBulk:y3e},qx=({label:e,value:t=0,onChange:r,required:s=!1})=>{const[a,i]=y.useState(0),l=u=>{r(u)},o=u=>{i(u)},c=()=>{i(0)},d=a||t;return n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e,s&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(u=>n.jsx("button",{type:"button",onClick:()=>l(u),onMouseEnter:()=>o(u),onMouseLeave:c,className:"transition-transform duration-200 hover:scale-110 focus:outline-none",title:`Rating: ${u} stars`,children:n.jsx("svg",{className:`w-6 h-6 ${u<=d?"text-yellow-400 fill-current":"text-gray-300 fill-current"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},u))}),n.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d?`${d}/5`:"Select rating"})]})]})},b3e=({decision:e,rejectionReason:t,onDecisionChange:r,onRejectionReasonChange:s,errors:a})=>{const i=[{value:"Send to AM",label:"Send to AM"},{value:"Hold / Revisit Later",label:"Hold / Revisit Later"},{value:"Reject",label:"Reject"},{value:"Needs Another Call",label:"Needs Another Call"}],l=["Skill mismatch","Salary mismatch","Experience mismatch","Not interested","No show"];return n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recruiter Decision"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Decision ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map(o=>n.jsx("button",{type:"button",onClick:()=>r(o.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e===o.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:o.label},o.value))}),(a==null?void 0:a.decision)&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.decision})]}),e==="Reject"&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Rejection Reason ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:t||"",onChange:o=>s(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select a reason"}),l.map(o=>n.jsx("option",{value:o,children:o},o))]}),(a==null?void 0:a.rejectionReason)&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.rejectionReason})]})]})},JC="/v1/recruiter",j3e=async e=>(await G.post(`${JC}/call-feedback`,e)).data,gU=async e=>(await G.get(`${JC}/candidates/${e}/call-feedback`)).data,JR=async(e,t)=>(await G.put(`${JC}/call-feedback/${e}`,t)).data,_3e=({candidateId:e,candidateName:t,initialData:r=null,onSuccess:s=()=>{},onCancel:a=()=>{}})=>{const[i,l]=y.useState(!1),[o,c]=y.useState({}),[d,u]=y.useState(""),f=y.useRef(null),[m,g]=y.useState([]),x=y.useRef(null);y.useEffect(()=>{(async()=>{var T,P,A;try{const E=((T=(await G.get("/v1/recruiter/assigned-jobs")).data)==null?void 0:T.jobs)||[];if(Array.isArray(E)&&E.length>0){g(E);return}const O=await G.get("/v1/job-management/requirements"),I=((P=O.data)==null?void 0:P.jobs)||((A=O.data)==null?void 0:A.requirements)||O.data||[];g(Array.isArray(I)?I:[])}catch(S){console.error("Failed to load jobs",S)}})()},[]);const[h,p]=y.useState({call_type:"Initial Screening",call_date:r!=null&&r.call_date?new Date(r.call_date).toISOString().slice(0,16):new Date().toISOString().slice(0,16),call_duration:(r==null?void 0:r.call_duration)||30,call_mode:"Phone",job_id:(r==null?void 0:r.job_id)||"",ratings:(r==null?void 0:r.ratings)||{communication:0,technical_fit:0,experience_relevance:0,culture_fit:0},salary_alignment:(r==null?void 0:r.salary_alignment)||"Negotiable",strengths:(r==null?void 0:r.strengths)||"",concerns:(r==null?void 0:r.concerns)||"",additional_notes:(r==null?void 0:r.additional_notes)||"",candidate_intent:(r==null?void 0:r.candidate_intent)||"Actively looking",decision:(r==null?void 0:r.decision)||"",rejection_reason:typeof(r==null?void 0:r.rejection_reason)=="string"?r.rejection_reason:"",next_actions:(r==null?void 0:r.next_actions)||[],is_draft:(r==null?void 0:r.is_draft)!==!1}),v=y.useCallback(C=>{const T=Object.values(C||{}).map(P=>Number(P)).filter(P=>P>0);return T.length?Number((T.reduce((P,A)=>P+A,0)/T.length).toFixed(2)):0},[]),b=y.useCallback(C=>{const T=[],P=String((C==null?void 0:C.strengths)||"").trim(),A=String((C==null?void 0:C.concerns)||"").trim(),S=String((C==null?void 0:C.additional_notes)||"").trim();return P&&T.push(`Strengths: ${P}`),A&&T.push(`Concerns: ${A}`),S&&T.push(`Notes: ${S}`),T.join(" | ")},[]),j=y.useCallback(()=>{const C={};return h.call_date||(C.call_date="Call date is required"),h.job_id||(C.job_id="Job is required"),["communication","technical_fit","experience_relevance","culture_fit"].forEach(P=>{(!h.ratings[P]||h.ratings[P]===0)&&(C[`ratings_${P}`]=`${P.replace(/_/g," ")} rating is required`)}),h.decision||(C.decision="Decision is required"),h.decision==="Reject"&&!h.rejection_reason&&(C.rejectionReason="Rejection reason is required when decision is Reject"),h.salary_alignment||(C.salary_alignment="Salary alignment is required"),C},[h]),N=(C,T)=>{p(P=>({...P,[C]:T})),o[C]&&c(P=>({...P,[C]:""})),d==="error"&&u("")},w=(C,T)=>{p(P=>({...P,ratings:{...P.ratings,[C]:T}})),o[`ratings_${C}`]&&c(P=>({...P,[`ratings_${C}`]:""}))},_=y.useCallback(async()=>{if(r!=null&&r.id)try{u("saving"),await JR(r.id,{...h,call_date:new Date(h.call_date).toISOString(),is_draft:!0}),u("saved"),setTimeout(()=>u(""),2e3)}catch(C){console.error("Autosave error:",C),u("error")}},[h,r==null?void 0:r.id]);y.useEffect(()=>(f.current=setInterval(()=>{_()},1e4),()=>{f.current&&clearInterval(f.current)}),[_]);const k=async C=>{var P,A;C.preventDefault();const T=j();if(Object.keys(T).length>0){c(T),u("error"),setTimeout(()=>{var E;const S=(E=x.current)==null?void 0:E.querySelector(".text-red-500");S==null||S.scrollIntoView({behavior:"smooth",block:"center"})},0);return}l(!0);try{const S={candidate_id:e,call_type:h.call_type,call_date:new Date(h.call_date).toISOString(),call_duration:parseInt(h.call_duration)||0,call_mode:h.call_mode,job_id:h.job_id,ratings:h.ratings,salary_alignment:h.salary_alignment,strengths:h.strengths||"",concerns:h.concerns||"",additional_notes:h.additional_notes||"",candidate_intent:h.candidate_intent,decision:h.decision,rejection_reason:h.decision==="Reject"&&h.rejection_reason||"",next_actions:h.next_actions,rating:v(h.ratings),free_text:b(h),is_draft:!1};r!=null&&r.id?await JR(r.id,S):await j3e(S),u("saved"),setTimeout(()=>{s()},1e3)}catch(S){let E=((A=(P=S.response)==null?void 0:P.data)==null?void 0:A.detail)||S.message||"Error saving feedback";if(typeof E=="string"&&E.startsWith("["))try{E=JSON.parse(E)}catch{}u("error"),c({submit:E})}finally{l(!1)}};return n.jsxs("form",{ref:x,onSubmit:k,className:"space-y-6",children:[n.jsxs("div",{className:"border-b pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Call Feedback"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Recording feedback for: ",n.jsx("strong",{children:t})]})]}),o.submit&&n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-red-700",children:Array.isArray(o.submit)?o.submit.map((C,T)=>n.jsxs("span",{children:[C.msg||JSON.stringify(C),n.jsx("br",{})]},T)):typeof o.submit=="string"?o.submit:JSON.stringify(o.submit)})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Call Metadata"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Call Type"}),n.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:"Initial Screening"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Call Mode"}),n.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:"Phone"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Call Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:h.call_date,onChange:C=>N("call_date",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.call_date&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.call_date})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Duration (minutes)"}),n.jsx("input",{type:"number",min:"0",value:h.call_duration,onChange:C=>N("call_duration",parseInt(C.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Structured Evaluation"}),n.jsx(qx,{label:"Communication",value:h.ratings.communication,onChange:C=>w("communication",C),required:!0}),o.ratings_communication&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_communication}),n.jsx(qx,{label:"Technical Fit",value:h.ratings.technical_fit,onChange:C=>w("technical_fit",C),required:!0}),o.ratings_technical_fit&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_technical_fit}),n.jsx(qx,{label:"Experience Relevance",value:h.ratings.experience_relevance,onChange:C=>w("experience_relevance",C),required:!0}),o.ratings_experience_relevance&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_experience_relevance}),n.jsx(qx,{label:"Culture Fit",value:h.ratings.culture_fit,onChange:C=>w("culture_fit",C),required:!0}),o.ratings_culture_fit&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_culture_fit}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Salary Alignment ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex gap-4",children:["Yes","No","Negotiable"].map(C=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"salary_alignment",value:C,checked:h.salary_alignment===C,onChange:T=>N("salary_alignment",T.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm text-gray-700",children:C})]},C))}),o.salary_alignment&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.salary_alignment})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recruiter Notes"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Strengths"}),n.jsx("textarea",{value:h.strengths,onChange:C=>N("strengths",C.target.value),placeholder:"Key strengths observed during the call",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Concerns"}),n.jsx("textarea",{value:h.concerns,onChange:C=>N("concerns",C.target.value),placeholder:"Any concerns or red flags",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Additional Notes"}),n.jsx("textarea",{value:h.additional_notes,onChange:C=>N("additional_notes",C.target.value),placeholder:"Any other relevant information",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Candidate Intent"}),n.jsxs("select",{value:h.candidate_intent,onChange:C=>N("candidate_intent",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Actively looking",children:"Actively looking"}),n.jsx("option",{value:"Passive",children:"Passive"}),n.jsx("option",{value:"Offer in hand",children:"Offer in hand"}),n.jsx("option",{value:"Just exploring",children:"Just exploring"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Job (Assigned by Account Manager)"}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Job/Requirement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:h.job_id,onChange:C=>N("job_id",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select Job"}),Array.isArray(m)&&m.map(C=>n.jsxs("option",{value:C.id,children:[C.title||C.job_title||"Untitled"," -"," ",C.client_name||C.company_name||"N/A"]},C.id))]}),o.job_id&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.job_id})]})]}),n.jsx(b3e,{decision:h.decision,rejectionReason:h.rejection_reason,onDecisionChange:C=>N("decision",C),onRejectionReasonChange:C=>N("rejection_reason",C),errors:o}),n.jsx("div",{className:"border-t pt-6 sticky bottom-0 bg-white z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[d==="saving"&&n.jsx("span",{className:"text-sm text-blue-600",children:" Autosaving..."}),d==="saved"&&n.jsx("span",{className:"text-sm text-green-600",children:" Draft saved"}),d==="error"&&n.jsx("span",{className:"text-sm text-red-600",children:"Please complete required fields and try again"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:bg-blue-400",children:i?"Saving...":"Save Feedback"})]})]})})]})},yU=({isOpen:e,candidateId:t,candidateName:r,initialData:s=null,onClose:a,onSuccess:i})=>{y.useEffect(()=>{const o=c=>{e&&(s!=null&&s.is_draft)&&(c.preventDefault(),c.returnValue="")};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[e,s]);const l=o=>{o.target===o.currentTarget&&(s!=null&&s.is_draft?window.confirm("You have unsaved changes. Are you sure you want to close?")&&a():a())};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-40 transition-opacity duration-300 z-[80] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:l}),n.jsx("div",{className:`fixed top-0 right-0 h-full bg-white shadow-xl transition-transform duration-300 z-[90] overflow-y-auto ${e?"translate-x-0":"translate-x-full"}`,style:{width:"480px"},children:n.jsxs("div",{className:"p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("div",{}),n.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Close drawer",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(_3e,{candidateId:t,candidateName:r,initialData:s,onSuccess:()=>{i&&i(),a()},onCancel:a})})]})})]})},vU=({candidateId:e,onFeedbackSelect:t=()=>{},onAddNew:r=()=>{}})=>{const[s,a]=y.useState([]),[i,l]=y.useState(!0),[o,c]=y.useState(null),[d,u]=y.useState(null);if(y.useEffect(()=>{e&&(async()=>{try{l(!0);const h=await gU(e);a(h.feedbacks||[]),c(null)}catch(h){console.error("Error fetching feedback history:",h),c("Failed to load feedback history")}finally{l(!1)}})()},[e]),i)return n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(o)return n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:o})});if(!s||s.length===0)return n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No call feedback recorded yet"})});const f=x=>{switch(x){case"Send to AM":case"Proceed to Next Round":return"bg-green-100 text-green-800";case"Hold / Revisit Later":return"bg-yellow-100 text-yellow-800";case"Reject":return"bg-red-100 text-red-800";case"Needs Another Call":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{if(!x)return 0;const h=Object.values(x).filter(p=>p>0);return h.length>0?(h.reduce((p,v)=>p+v,0)/h.length).toFixed(1):0},g=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Call Feedback History"}),n.jsx("button",{onClick:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors",children:" Add New Feedback"})]}),n.jsx("div",{className:"space-y-3",children:s.map(x=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>u(d===x.id?null:x.id),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"flex-1 text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800",children:x.call_type}),n.jsx("p",{className:"text-sm text-gray-600",children:g(x.call_date)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[m(x.ratings),"/5.0"]}),n.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(h=>n.jsx("svg",{className:`w-4 h-4 ${h<=Math.round(m(x.ratings))?"text-yellow-400 fill-current":"text-gray-300 fill-current"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},h))})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${f(x.decision)}`,children:x.decision})})]})}),n.jsx("svg",{className:`w-5 h-5 text-gray-500 ml-4 transition-transform ${d===x.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),d===x.id&&n.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Mode"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.call_mode})]}),x.call_duration&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Duration"}),n.jsxs("p",{className:"text-sm text-gray-800",children:[x.call_duration," minutes"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Ratings"}),n.jsx("div",{className:"space-y-1",children:Object.entries(x.ratings||{}).map(([h,p])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:h.replace(/_/g," ")}),n.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[p,"/5"]})]},h))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Salary Alignment"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.salary_alignment})]}),x.candidate_intent&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Candidate Intent"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.candidate_intent})]}),(x.strengths||x.concerns||x.additional_notes)&&n.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[x.strengths&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-green-700 uppercase mb-1",children:"Strengths"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.strengths})]}),x.concerns&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 uppercase mb-1",children:"Concerns"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.concerns})]}),x.additional_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.additional_notes})]})]}),x.rejection_reason&&n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 uppercase mb-1",children:"Rejection Reason"}),n.jsx("p",{className:"text-sm text-red-700",children:x.rejection_reason})]}),x.next_actions&&x.next_actions.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Next Actions"}),n.jsx("ul",{className:"space-y-1",children:x.next_actions.map((h,p)=>n.jsxs("li",{className:"text-sm text-gray-700 flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),h]},p))})]}),n.jsx("button",{onClick:()=>t(x),className:"w-full mt-3 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-sm font-medium transition-colors",children:"Edit Feedback"})]})]},x.id))})]})},Dv={maxFileSizeBytes:10*1024*1024,maxRows:5e3,allowedExtensions:[".xlsx"]};function KR(e){if(!e)return{ok:!1,message:"Please select a file."};const t=e.name.toLowerCase();return Dv.allowedExtensions.some(s=>t.endsWith(s))?e.size>Dv.maxFileSizeBytes?{ok:!1,message:"File size exceeds 10MB limit."}:{ok:!0,message:""}:{ok:!1,message:"Only .xlsx files are allowed."}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var tp={};tp.version="0.18.5";var Ka=1200,Wd=1252,w3e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],KC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},P1=function(e){w3e.indexOf(e)!=-1&&(Wd=KC[0]=e)};function N3e(){P1(1252)}var ji=function(e){Ka=e,P1(e)};function O1(){ji(1200),N3e()}function $v(e){for(var t=[],r=0,s=e.length;r<s;++r)t[r]=e.charCodeAt(r);return t}function k3e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function bU(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var sf=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?k3e(e.slice(2)):t==254&&r==255?bU(e.slice(2)):t==65279?e.slice(1):e},g0=function(t){return String.fromCharCode(t)},ek=function(t){return String.fromCharCode(t)},vr;function S3e(e){vr=e,ji=function(t){Ka=t,P1(t)},sf=function(t){return t.charCodeAt(0)===255&&t.charCodeAt(1)===254?vr.utils.decode(1200,$v(t.slice(2))):t},g0=function(r){return Ka===1200?String.fromCharCode(r):vr.utils.decode(Ka,[r&255,r>>8])[0]},ek=function(r){return vr.utils.decode(Wd,[r])[0]},KU()}var rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function rp(e){for(var t="",r=0,s=0,a=0,i=0,l=0,o=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,s=e.charCodeAt(d++),l=(r&3)<<4|s>>4,a=e.charCodeAt(d++),o=(s&15)<<2|a>>6,c=a&63,isNaN(s)?o=c=64:isNaN(a)&&(c=64),t+=rc.charAt(i)+rc.charAt(l)+rc.charAt(o)+rc.charAt(c);return t}function Za(e){var t="",r=0,s=0,a=0,i=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=rc.indexOf(e.charAt(d++)),l=rc.indexOf(e.charAt(d++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=rc.indexOf(e.charAt(d++)),s=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(s)),c=rc.indexOf(e.charAt(d++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var mr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Eo=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function vc(e){return mr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function XR(e){return mr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var za=function(t){return mr?Eo(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Wp(e){if(typeof ArrayBuffer>"u")return za(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),s=0;s!=e.length;++s)r[s]=e.charCodeAt(s)&255;return t}function Rc(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function C3e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function XC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return XC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var hs=mr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Eo(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function A3e(e){for(var t=[],r=0,s=e.length+250,a=vc(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)a[r++]=l;else if(l<2048)a[r++]=192|l>>6&31,a[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|l>>8&7,a[r++]=128|l>>2&63,a[r++]=128|o>>6&15|(l&3)<<4,a[r++]=128|o&63}else a[r++]=224|l>>12&15,a[r++]=128|l>>6&63,a[r++]=128|l&63;r>s&&(t.push(a.slice(0,r)),r=0,a=vc(65535),s=65530)}return t.push(a.slice(0,r)),hs(t)}var Xs=/\u0000/g,y0=/[\u0001-\u0006]/g;function bf(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Xi(e,t){var r=""+e;return r.length>=t?r:Tn("0",t-r.length)+r}function YC(e,t){var r=""+e;return r.length>=t?r:Tn(" ",t-r.length)+r}function Mv(e,t){var r=""+e;return r.length>=t?r:r+Tn(" ",t-r.length)}function E3e(e,t){var r=""+Math.round(e);return r.length>=t?r:Tn("0",t-r.length)+r}function T3e(e,t){var r=""+e;return r.length>=t?r:Tn("0",t-r.length)+r}var YR=Math.pow(2,32);function Nu(e,t){if(e>YR||e<-YR)return E3e(e,t);var r=Math.round(e);return T3e(r,t)}function Bv(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var ZR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],y_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function P3e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Kt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},QR={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},O3e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Uv(e,t,r){for(var s=e<0?-1:1,a=e*s,i=0,l=1,o=0,c=1,d=0,u=0,f=Math.floor(a);d<t&&(f=Math.floor(a),o=f*l+i,u=f*d+c,!(a-f<5e-8));)a=1/(a-f),i=l,l=o,c=d,d=u;if(u>t&&(d>t?(u=c,o=i):(u=d,o=l)),!r)return[0,s*o,u];var m=Math.floor(s*o/u);return[m,s*o-m*u,u]}function nc(e,t,r){if(e>2958465||e<0)return null;var s=e|0,a=Math.floor(86400*(e-s)),i=0,l=[],o={D:s,T:a,u:86400*(e-s)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(s+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++s,++o.D)),s===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(s===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),s<60&&(i=(i+6)%7),r&&(i=$3e(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var jU=new Date(1899,11,31,0,0,0),R3e=jU.getTime(),L3e=new Date(1900,2,1,0,0,0);function _U(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=L3e&&(r+=24*60*60*1e3),(r-(R3e+(e.getTimezoneOffset()-jU.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function ZC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function I3e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function F3e(e){var t=e<0?12:11,r=ZC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function D3e(e){var t=ZC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function np(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=F3e(e):t===10?r=e.toFixed(10).substr(0,12):r=D3e(e),ZC(I3e(r.toUpperCase()))}function Vd(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):np(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Qa(14,_U(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function $3e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function M3e(e,t,r,s){var a="",i=0,l=0,o=r.y,c,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return y_[r.m-1][1];case 5:return y_[r.m-1][0];default:return y_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return ZR[r.q][0];default:return ZR[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Xi(r.S,t.length):(s>=2?l=s===3?1e3:100:l=s===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(a=Xi(i,2+s),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?Xi(c,d):"";return u}function sc(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var wU=/%/g;function B3e(e,t,r){var s=t.replace(wU,""),a=t.length-s.length;return lo(e,s,r*Math.pow(10,2*a))+Tn("%",a)}function U3e(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return lo(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function NU(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+NU(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var kU=/# (\?+)( ?)\/( ?)(\d+)/;function z3e(e,t,r){var s=parseInt(e[4],10),a=Math.round(t*s),i=Math.floor(a/s),l=a-i*s,o=s;return r+(i===0?"":""+i)+" "+(l===0?Tn(" ",e[1].length+1+e[4].length):YC(l,e[1].length)+e[2]+"/"+e[3]+Xi(o,e[4].length))}function W3e(e,t,r){return r+(t===0?"":""+t)+Tn(" ",e[1].length+2+e[4].length)}var SU=/^#*0*\.([0#]+)/,CU=/\).*[0#]/,AU=/\(###\) ###\\?-####/;function sa(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eL(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tL(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function V3e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function H3e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function li(e,t,r){if(e.charCodeAt(0)===40&&!t.match(CU)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?li("n",s,r):"("+li("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return U3e(e,t,r);if(t.indexOf("%")!==-1)return B3e(e,t,r);if(t.indexOf("E")!==-1)return NU(t,r);if(t.charCodeAt(0)===36)return"$"+li(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Nu(c,t.length);if(t.match(/^[#?]+$/))return a=Nu(r,0),a==="0"&&(a=""),a.length>t.length?a:sa(t.substr(0,t.length-a.length))+a;if(i=t.match(kU))return z3e(i,c,d);if(t.match(/^#+0+$/))return d+Nu(c,t.length-t.indexOf("0"));if(i=t.match(SU))return a=eL(r,i[1].length).replace(/^([^\.]+)$/,"$1."+sa(i[1])).replace(/\.$/,"."+sa(i[1])).replace(/\.(\d*)$/,function(x,h){return"."+h+Tn("0",sa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+eL(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+sc(Nu(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+li(e,t,-r):sc(""+(Math.floor(r)+V3e(r,i[1].length)))+"."+Xi(tL(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return li(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=bf(li(e,t.replace(/[\\-]/g,""),r)),l=0,bf(bf(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<a.length?a.charAt(l++):x==="0"?"0":""}));if(t.match(AU))return a=li(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Uv(c,Math.pow(10,l)-1,!1),a=""+d,u=lo("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=Mv(o[2],l),u.length<i[4].length&&(u=sa(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Uv(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?YC(o[1],l)+i[2]+"/"+i[3]+Mv(o[2],l):Tn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Nu(r,0),t.length<=a.length?a:sa(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var f=t.indexOf(".")-l,m=t.length-a.length-f;return sa(t.substr(0,f)+a+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=tL(r,i[1].length),r<0?"-"+li(e,t,-r):sc(H3e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Xi(0,3-x.length):"")+x})+"."+Xi(l,i[1].length);switch(t){case"###,##0.00":return li(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=sc(Nu(c,0));return g!=="0"?d+g:"";case"###,###.00":return li(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return li(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function q3e(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return lo(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function G3e(e,t,r){var s=t.replace(wU,""),a=t.length-s.length;return lo(e,s,r*Math.pow(10,2*a))+Tn("%",a)}function EU(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+EU(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function pl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(CU)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?pl("n",s,r):"("+pl("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return q3e(e,t,r);if(t.indexOf("%")!==-1)return G3e(e,t,r);if(t.indexOf("E")!==-1)return EU(t,r);if(t.charCodeAt(0)===36)return"$"+pl(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Xi(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:sa(t.substr(0,t.length-a.length))+a;if(i=t.match(kU))return W3e(i,c,d);if(t.match(/^#+0+$/))return d+Xi(c,t.length-t.indexOf("0"));if(i=t.match(SU))return a=(""+r).replace(/^([^\.]+)$/,"$1."+sa(i[1])).replace(/\.$/,"."+sa(i[1])),a=a.replace(/\.(\d*)$/,function(x,h){return"."+h+Tn("0",sa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+sc(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+pl(e,t,-r):sc(""+r)+"."+Tn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return pl(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=bf(pl(e,t.replace(/[\\-]/g,""),r)),l=0,bf(bf(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<a.length?a.charAt(l++):x==="0"?"0":""}));if(t.match(AU))return a=pl(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Uv(c,Math.pow(10,l)-1,!1),a=""+d,u=lo("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=Mv(o[2],l),u.length<i[4].length&&(u=sa(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Uv(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?YC(o[1],l)+i[2]+"/"+i[3]+Mv(o[2],l):Tn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:sa(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var f=t.indexOf(".")-l,m=t.length-a.length-f;return sa(t.substr(0,f)+a+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+pl(e,t,-r):sc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Xi(0,3-x.length):"")+x})+"."+Xi(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=sc(""+c);return g!=="0"?d+g:"";default:if(t.match(/\.[0#?]*$/))return pl(e,t.slice(0,t.lastIndexOf(".")),r)+sa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function lo(e,t,r){return(r|0)===r?pl(e,t,r):li(e,t,r)}function J3e(e){for(var t=[],r=!1,s=0,a=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(a,s-a),a=s+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var TU=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lu(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":Bv(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(TU))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function K3e(e,t,r,s){for(var a=[],i="",l=0,o="",c="t",d,u,f,m="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!Bv(e,l))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(f=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++l;break;case"\\":var g=e.charAt(++l),x=g==="("||g===")"?g:"t";a[a.length]={t:x,v:g},++l;break;case"_":a[a.length]={t:"t",v:" "},l+=2;break;case"@":a[a.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(d==null&&(d=nc(t,r,e.charAt(l+1)==="2"),d==null))return"";a[a.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=nc(t,r),d==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var h={t:o,v:o};if(d==null&&(d=nc(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(h.v=d.H>=12?"P":"A"),h.t="T",m="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(h.v=d.H>=12?"PM":"AM"),h.t="T",l+=5,m="h"):e.substr(l,5).toUpperCase()==="/"?(d!=null&&(h.v=d.H>=12?"":""),h.t="T",l+=5,m="h"):(h.t="t",++l),d==null&&h.t==="T")return"";a[a.length]=h,c=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(TU)){if(d==null&&(d=nc(t,r),d==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",lu(e)||(a[a.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":a[a.length]={t:s===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++l;break;case"$":a[a.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++l;break}var p=0,v=0,b;for(l=a.length-1,c="t";l>=0;--l)switch(a[l].t){case"h":case"H":a[l].t=m,c="h",p<1&&(p=1);break;case"s":(b=a[l].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),p<3&&(p=3);case"d":case"y":case"M":case"e":c=a[l].t;break;case"m":c==="s"&&(a[l].t="M",p<2&&(p=2));break;case"X":break;case"Z":p<1&&a[l].v.match(/[Hh]/)&&(p=1),p<2&&a[l].v.match(/[Mm]/)&&(p=2),p<3&&a[l].v.match(/[Ss]/)&&(p=3)}switch(p){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(l=0;l<a.length;++l)switch(a[l].t){case"t":case"T":case" ":case"D":break;case"X":a[l].v="",a[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[l].v=M3e(a[l].t.charCodeAt(0),a[l].v,d,v),a[l].t="t";break;case"n":case"?":for(N=l+1;a[N]!=null&&((o=a[N].t)==="?"||o==="D"||(o===" "||o==="t")&&a[N+1]!=null&&(a[N+1].t==="?"||a[N+1].t==="t"&&a[N+1].v==="/")||a[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[N].v==="/"||a[N].v===" "&&a[N+1]!=null&&a[N+1].t=="?"));)a[l].v+=a[N].v,a[N]={v:"",t:";"},++N;j+=a[l].v,l=N-1;break;case"G":a[l].t="t",a[l].v=Vd(t,r);break}var w="",_,k;if(j.length>0){j.charCodeAt(0)==40?(_=t<0&&j.charCodeAt(0)===45?-t:t,k=lo("n",j,_)):(_=t<0&&s>1?-t:t,k=lo("n",j,_),_<0&&a[0]&&a[0].t=="t"&&(k=k.substr(1),a[0].v="-"+a[0].v)),N=k.length-1;var C=a.length;for(l=0;l<a.length;++l)if(a[l]!=null&&a[l].t!="t"&&a[l].v.indexOf(".")>-1){C=l;break}var T=a.length;if(C===a.length&&k.indexOf("E")===-1){for(l=a.length-1;l>=0;--l)a[l]==null||"n?".indexOf(a[l].t)===-1||(N>=a[l].v.length-1?(N-=a[l].v.length,a[l].v=k.substr(N+1,a[l].v.length)):N<0?a[l].v="":(a[l].v=k.substr(0,N+1),N=-1),a[l].t="t",T=l);N>=0&&T<a.length&&(a[T].v=k.substr(0,N+1)+a[T].v)}else if(C!==a.length&&k.indexOf("E")===-1){for(N=k.indexOf(".")-1,l=C;l>=0;--l)if(!(a[l]==null||"n?".indexOf(a[l].t)===-1)){for(u=a[l].v.indexOf(".")>-1&&l===C?a[l].v.indexOf(".")-1:a[l].v.length-1,w=a[l].v.substr(u+1);u>=0;--u)N>=0&&(a[l].v.charAt(u)==="0"||a[l].v.charAt(u)==="#")&&(w=k.charAt(N--)+w);a[l].v=w,a[l].t="t",T=l}for(N>=0&&T<a.length&&(a[T].v=k.substr(0,N+1)+a[T].v),N=k.indexOf(".")+1,l=C;l<a.length;++l)if(!(a[l]==null||"n?(".indexOf(a[l].t)===-1&&l!==C)){for(u=a[l].v.indexOf(".")>-1&&l===C?a[l].v.indexOf(".")+1:0,w=a[l].v.substr(0,u);u<a[l].v.length;++u)N<k.length&&(w+=k.charAt(N++));a[l].v=w,a[l].t="t",T=l}}}for(l=0;l<a.length;++l)a[l]!=null&&"n?".indexOf(a[l].t)>-1&&(_=s>1&&t<0&&l>0&&a[l-1].v==="-"?-t:t,a[l].v=lo(a[l].t,a[l].v,_),a[l].t="t");var P="";for(l=0;l!==a.length;++l)a[l]!=null&&(P+=a[l].v);return P}var rL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nL(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function X3e(e,t){var r=J3e(e),s=r.length,a=r[s-1].indexOf("@");if(s<4&&a>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(rL),o=r[1].match(rL);return nL(t,l)?[s,r[0]]:nL(t,o)?[s,r[1]]:[s,r[l!=null&&o!=null?2:1]]}return[s,i]}function Qa(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:Kt)[e],s==null&&(s=r.table&&r.table[QR[e]]||Kt[QR[e]]),s==null&&(s=O3e[e]||"General");break}if(Bv(s,0))return Vd(t,r);t instanceof Date&&(t=_U(t,r.date1904));var a=X3e(s,t);if(Bv(a[1]))return Vd(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return K3e(a[1],t,r,a[0])}function Pl(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Kt[r]==null){t<0&&(t=r);continue}if(Kt[r]==e){t=r;break}}t<0&&(t=391)}return Kt[t]=e,t}function Vp(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Pl(e[t],t)}function Lm(){Kt=P3e()}var PU={format:Qa,load:Pl,_table:Kt,load_table:Vp,parse_date_code:nc,is_date:lu,get_table:function(){return PU._table=Kt}},Y3e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},OU=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Z3e(e){var t=typeof e=="number"?Kt[e]:e;return t=t.replace(OU,"(\\d+)"),new RegExp("^"+t+"$")}function Q3e(e,t,r){var s=-1,a=-1,i=-1,l=-1,o=-1,c=-1;(t.match(OU)||[]).forEach(function(f,m){var g=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":s=g;break;case"d":i=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:a=g;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:s==-1&&a==-1&&i==-1?u:d+"T"+u}var eTe=function(){var e={};e.version="1.2.0";function t(){for(var k=0,C=new Array(256),T=0;T!=256;++T)k=T,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,C[T]=k;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function s(k){var C=0,T=0,P=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)A[P]=k[P];for(P=0;P!=256;++P)for(T=k[P],C=256+P;C<4096;C+=256)T=A[C]=T>>>8^k[T&255];var S=[];for(P=1;P!=16;++P)S[P-1]=typeof Int32Array<"u"?A.subarray(P*256,P*256+256):A.slice(P*256,P*256+256);return S}var a=s(r),i=a[0],l=a[1],o=a[2],c=a[3],d=a[4],u=a[5],f=a[6],m=a[7],g=a[8],x=a[9],h=a[10],p=a[11],v=a[12],b=a[13],j=a[14];function N(k,C){for(var T=C^-1,P=0,A=k.length;P<A;)T=T>>>8^r[(T^k.charCodeAt(P++))&255];return~T}function w(k,C){for(var T=C^-1,P=k.length-15,A=0;A<P;)T=j[k[A++]^T&255]^b[k[A++]^T>>8&255]^v[k[A++]^T>>16&255]^p[k[A++]^T>>>24]^h[k[A++]]^x[k[A++]]^g[k[A++]]^m[k[A++]]^f[k[A++]]^u[k[A++]]^d[k[A++]]^c[k[A++]]^o[k[A++]]^l[k[A++]]^i[k[A++]]^r[k[A++]];for(P+=15;A<P;)T=T>>>8^r[(T^k[A++])&255];return~T}function _(k,C){for(var T=C^-1,P=0,A=k.length,S=0,E=0;P<A;)S=k.charCodeAt(P++),S<128?T=T>>>8^r[(T^S)&255]:S<2048?(T=T>>>8^r[(T^(192|S>>6&31))&255],T=T>>>8^r[(T^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,E=k.charCodeAt(P++)&1023,T=T>>>8^r[(T^(240|S>>8&7))&255],T=T>>>8^r[(T^(128|S>>2&63))&255],T=T>>>8^r[(T^(128|E>>6&15|(S&3)<<4))&255],T=T>>>8^r[(T^(128|E&63))&255]):(T=T>>>8^r[(T^(224|S>>12&15))&255],T=T>>>8^r[(T^(128|S>>6&63))&255],T=T>>>8^r[(T^(128|S&63))&255]);return~T}return e.table=r,e.bstr=N,e.buf=w,e.str=_,e}(),Gt=function(){var t={};t.version="1.2.1";function r(V,Q){for(var K=V.split("/"),q=Q.split("/"),F=0,ee=0,me=Math.min(K.length,q.length);F<me;++F){if(ee=K[F].length-q[F].length)return ee;if(K[F]!=q[F])return K[F]<q[F]?-1:1}return K.length-q.length}function s(V){if(V.charAt(V.length-1)=="/")return V.slice(0,-1).indexOf("/")===-1?V:s(V.slice(0,-1));var Q=V.lastIndexOf("/");return Q===-1?V:V.slice(0,Q+1)}function a(V){if(V.charAt(V.length-1)=="/")return a(V.slice(0,-1));var Q=V.lastIndexOf("/");return Q===-1?V:V.slice(Q+1)}function i(V,Q){typeof Q=="string"&&(Q=new Date(Q));var K=Q.getHours();K=K<<6|Q.getMinutes(),K=K<<5|Q.getSeconds()>>>1,V.write_shift(2,K);var q=Q.getFullYear()-1980;q=q<<4|Q.getMonth()+1,q=q<<5|Q.getDate(),V.write_shift(2,q)}function l(V){var Q=V.read_shift(2)&65535,K=V.read_shift(2)&65535,q=new Date,F=K&31;K>>>=5;var ee=K&15;K>>>=4,q.setMilliseconds(0),q.setFullYear(K+1980),q.setMonth(ee-1),q.setDate(F);var me=Q&31;Q>>>=5;var Ne=Q&63;return Q>>>=6,q.setHours(Q),q.setMinutes(Ne),q.setSeconds(me<<1),q}function o(V){Ss(V,0);for(var Q={},K=0;V.l<=V.length-4;){var q=V.read_shift(2),F=V.read_shift(2),ee=V.l+F,me={};switch(q){case 21589:K=V.read_shift(1),K&1&&(me.mtime=V.read_shift(4)),F>5&&(K&2&&(me.atime=V.read_shift(4)),K&4&&(me.ctime=V.read_shift(4))),me.mtime&&(me.mt=new Date(me.mtime*1e3));break}V.l=ee,Q[q]=me}return Q}var c;function d(){return c||(c={})}function u(V,Q){if(V[0]==80&&V[1]==75)return Lt(V,Q);if((V[0]|32)==109&&(V[1]|32)==105)return Re(V,Q);if(V.length<512)throw new Error("CFB file size "+V.length+" < 512");var K=3,q=512,F=0,ee=0,me=0,Ne=0,ge=0,te=[],Se=V.slice(0,512);Ss(Se,0);var Ue=f(Se);switch(K=Ue[0],K){case 3:q=512;break;case 4:q=4096;break;case 0:if(Ue[1]==0)return Lt(V,Q);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}q!==512&&(Se=V.slice(0,q),Ss(Se,28));var Be=V.slice(0,q);m(Se,K);var Ge=Se.read_shift(4,"i");if(K===3&&Ge!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ge);Se.l+=4,me=Se.read_shift(4,"i"),Se.l+=4,Se.chk("00100000","Mini Stream Cutoff Size: "),Ne=Se.read_shift(4,"i"),F=Se.read_shift(4,"i"),ge=Se.read_shift(4,"i"),ee=Se.read_shift(4,"i");for(var tt=-1,_e=0;_e<109&&(tt=Se.read_shift(4,"i"),!(tt<0));++_e)te[_e]=tt;var Je=g(V,q);p(ge,ee,Je,q,te);var B=b(Je,me,te,q);B[me].name="!Directory",F>0&&Ne!==E&&(B[Ne].name="!MiniFAT"),B[te[0]].name="!FAT",B.fat_addrs=te,B.ssz=q;var re={},st=[],ct=[],Ee=[];j(me,B,Je,st,F,re,ct,Ne),x(ct,Ee,st),st.shift();var Ft={FileIndex:ct,FullPaths:Ee};return Q&&Q.raw&&(Ft.raw={header:Be,sectors:Je}),Ft}function f(V){if(V[V.l]==80&&V[V.l+1]==75)return[0,0];V.chk(O,"Header Signature: "),V.l+=16;var Q=V.read_shift(2,"u");return[V.read_shift(2,"u"),Q]}function m(V,Q){var K=9;switch(V.l+=2,K=V.read_shift(2)){case 9:if(Q!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(Q!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}V.chk("0600","Mini Sector Shift: "),V.chk("000000000000","Reserved: ")}function g(V,Q){for(var K=Math.ceil(V.length/Q)-1,q=[],F=1;F<K;++F)q[F-1]=V.slice(F*Q,(F+1)*Q);return q[K-1]=V.slice(K*Q),q}function x(V,Q,K){for(var q=0,F=0,ee=0,me=0,Ne=0,ge=K.length,te=[],Se=[];q<ge;++q)te[q]=Se[q]=q,Q[q]=K[q];for(;Ne<Se.length;++Ne)q=Se[Ne],F=V[q].L,ee=V[q].R,me=V[q].C,te[q]===q&&(F!==-1&&te[F]!==F&&(te[q]=te[F]),ee!==-1&&te[ee]!==ee&&(te[q]=te[ee])),me!==-1&&(te[me]=q),F!==-1&&q!=te[q]&&(te[F]=te[q],Se.lastIndexOf(F)<Ne&&Se.push(F)),ee!==-1&&q!=te[q]&&(te[ee]=te[q],Se.lastIndexOf(ee)<Ne&&Se.push(ee));for(q=1;q<ge;++q)te[q]===q&&(ee!==-1&&te[ee]!==ee?te[q]=te[ee]:F!==-1&&te[F]!==F&&(te[q]=te[F]));for(q=1;q<ge;++q)if(V[q].type!==0){if(Ne=q,Ne!=te[Ne])do Ne=te[Ne],Q[q]=Q[Ne]+"/"+Q[q];while(Ne!==0&&te[Ne]!==-1&&Ne!=te[Ne]);te[q]=-1}for(Q[0]+="/",q=1;q<ge;++q)V[q].type!==2&&(Q[q]+="/")}function h(V,Q,K){for(var q=V.start,F=V.size,ee=[],me=q;K&&F>0&&me>=0;)ee.push(Q.slice(me*S,me*S+S)),F-=S,me=ed(K,me*4);return ee.length===0?it(0):hs(ee).slice(0,V.size)}function p(V,Q,K,q,F){var ee=E;if(V===E){if(Q!==0)throw new Error("DIFAT chain shorter than expected")}else if(V!==-1){var me=K[V],Ne=(q>>>2)-1;if(!me)return;for(var ge=0;ge<Ne&&(ee=ed(me,ge*4))!==E;++ge)F.push(ee);p(ed(me,q-4),Q-1,K,q,F)}}function v(V,Q,K,q,F){var ee=[],me=[];F||(F=[]);var Ne=q-1,ge=0,te=0;for(ge=Q;ge>=0;){F[ge]=!0,ee[ee.length]=ge,me.push(V[ge]);var Se=K[Math.floor(ge*4/q)];if(te=ge*4&Ne,q<4+te)throw new Error("FAT boundary crossed: "+ge+" 4 "+q);if(!V[Se])break;ge=ed(V[Se],te)}return{nodes:ee,data:pL([me])}}function b(V,Q,K,q){var F=V.length,ee=[],me=[],Ne=[],ge=[],te=q-1,Se=0,Ue=0,Be=0,Ge=0;for(Se=0;Se<F;++Se)if(Ne=[],Be=Se+Q,Be>=F&&(Be-=F),!me[Be]){ge=[];var tt=[];for(Ue=Be;Ue>=0;){tt[Ue]=!0,me[Ue]=!0,Ne[Ne.length]=Ue,ge.push(V[Ue]);var _e=K[Math.floor(Ue*4/q)];if(Ge=Ue*4&te,q<4+Ge)throw new Error("FAT boundary crossed: "+Ue+" 4 "+q);if(!V[_e]||(Ue=ed(V[_e],Ge),tt[Ue]))break}ee[Be]={nodes:Ne,data:pL([ge])}}return ee}function j(V,Q,K,q,F,ee,me,Ne){for(var ge=0,te=q.length?2:0,Se=Q[V].data,Ue=0,Be=0,Ge;Ue<Se.length;Ue+=128){var tt=Se.slice(Ue,Ue+128);Ss(tt,64),Be=tt.read_shift(2),Ge=F1(tt,0,Be-te),q.push(Ge);var _e={name:Ge,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Je=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Je!==0&&(_e.ct=N(tt,tt.l-8));var B=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);B!==0&&(_e.mt=N(tt,tt.l-8)),_e.start=tt.read_shift(4,"i"),_e.size=tt.read_shift(4,"i"),_e.size<0&&_e.start<0&&(_e.size=_e.type=0,_e.start=E,_e.name=""),_e.type===5?(ge=_e.start,F>0&&ge!==E&&(Q[ge].name="!StreamData")):_e.size>=4096?(_e.storage="fat",Q[_e.start]===void 0&&(Q[_e.start]=v(K,_e.start,Q.fat_addrs,Q.ssz)),Q[_e.start].name=_e.name,_e.content=Q[_e.start].data.slice(0,_e.size)):(_e.storage="minifat",_e.size<0?_e.size=0:ge!==E&&_e.start!==E&&Q[ge]&&(_e.content=h(_e,Q[ge].data,(Q[Ne]||{}).data))),_e.content&&Ss(_e.content,0),ee[Ge]=_e,me.push(_e)}}function N(V,Q){return new Date((ms(V,Q+4)/1e7*Math.pow(2,32)+ms(V,Q)/1e7-11644473600)*1e3)}function w(V,Q){return d(),u(c.readFileSync(V),Q)}function _(V,Q){var K=Q&&Q.type;switch(K||mr&&Buffer.isBuffer(V)&&(K="buffer"),K||"base64"){case"file":return w(V,Q);case"base64":return u(za(Za(V)),Q);case"binary":return u(za(V),Q)}return u(V,Q)}function k(V,Q){var K=Q||{},q=K.root||"Root Entry";if(V.FullPaths||(V.FullPaths=[]),V.FileIndex||(V.FileIndex=[]),V.FullPaths.length!==V.FileIndex.length)throw new Error("inconsistent CFB structure");V.FullPaths.length===0&&(V.FullPaths[0]=q+"/",V.FileIndex[0]={name:q,type:5}),K.CLSID&&(V.FileIndex[0].clsid=K.CLSID),C(V)}function C(V){var Q="Sh33tJ5";if(!Gt.find(V,"/"+Q)){var K=it(4);K[0]=55,K[1]=K[3]=50,K[2]=54,V.FileIndex.push({name:Q,type:2,content:K,size:4,L:69,R:69,C:69}),V.FullPaths.push(V.FullPaths[0]+Q),T(V)}}function T(V,Q){k(V);for(var K=!1,q=!1,F=V.FullPaths.length-1;F>=0;--F){var ee=V.FileIndex[F];switch(ee.type){case 0:q?K=!0:(V.FileIndex.pop(),V.FullPaths.pop());break;case 1:case 2:case 5:q=!0,isNaN(ee.R*ee.L*ee.C)&&(K=!0),ee.R>-1&&ee.L>-1&&ee.R==ee.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!Q)){var me=new Date(1987,1,19),Ne=0,ge=Object.create?Object.create(null):{},te=[];for(F=0;F<V.FullPaths.length;++F)ge[V.FullPaths[F]]=!0,V.FileIndex[F].type!==0&&te.push([V.FullPaths[F],V.FileIndex[F]]);for(F=0;F<te.length;++F){var Se=s(te[F][0]);q=ge[Se],q||(te.push([Se,{name:a(Se).replace("/",""),type:1,clsid:L,ct:me,mt:me,content:null}]),ge[Se]=!0)}for(te.sort(function(Ge,tt){return r(Ge[0],tt[0])}),V.FullPaths=[],V.FileIndex=[],F=0;F<te.length;++F)V.FullPaths[F]=te[F][0],V.FileIndex[F]=te[F][1];for(F=0;F<te.length;++F){var Ue=V.FileIndex[F],Be=V.FullPaths[F];if(Ue.name=a(Be).replace("/",""),Ue.L=Ue.R=Ue.C=-(Ue.color=1),Ue.size=Ue.content?Ue.content.length:0,Ue.start=0,Ue.clsid=Ue.clsid||L,F===0)Ue.C=te.length>1?1:-1,Ue.size=0,Ue.type=5;else if(Be.slice(-1)=="/"){for(Ne=F+1;Ne<te.length&&s(V.FullPaths[Ne])!=Be;++Ne);for(Ue.C=Ne>=te.length?-1:Ne,Ne=F+1;Ne<te.length&&s(V.FullPaths[Ne])!=s(Be);++Ne);Ue.R=Ne>=te.length?-1:Ne,Ue.type=1}else s(V.FullPaths[F+1]||"")==s(Be)&&(Ue.R=F+1),Ue.type=2}}}function P(V,Q){var K=Q||{};if(K.fileType=="mad")return le(V,K);switch(T(V),K.fileType){case"zip":return be(V,K)}var q=function(Ge){for(var tt=0,_e=0,Je=0;Je<Ge.FileIndex.length;++Je){var B=Ge.FileIndex[Je];if(B.content){var re=B.content.length;re>0&&(re<4096?tt+=re+63>>6:_e+=re+511>>9)}}for(var st=Ge.FullPaths.length+3>>2,ct=tt+7>>3,Ee=tt+127>>7,Ft=ct+_e+st+Ee,pt=Ft+127>>7,Mt=pt<=109?0:Math.ceil((pt-109)/127);Ft+pt+Mt+127>>7>pt;)Mt=++pt<=109?0:Math.ceil((pt-109)/127);var Bt=[1,Mt,pt,Ee,st,_e,tt,0];return Ge.FileIndex[0].size=tt<<6,Bt[7]=(Ge.FileIndex[0].start=Bt[0]+Bt[1]+Bt[2]+Bt[3]+Bt[4]+Bt[5])+(Bt[6]+7>>3),Bt}(V),F=it(q[7]<<9),ee=0,me=0;{for(ee=0;ee<8;++ee)F.write_shift(1,I[ee]);for(ee=0;ee<8;++ee)F.write_shift(2,0);for(F.write_shift(2,62),F.write_shift(2,3),F.write_shift(2,65534),F.write_shift(2,9),F.write_shift(2,6),ee=0;ee<3;++ee)F.write_shift(2,0);for(F.write_shift(4,0),F.write_shift(4,q[2]),F.write_shift(4,q[0]+q[1]+q[2]+q[3]-1),F.write_shift(4,0),F.write_shift(4,4096),F.write_shift(4,q[3]?q[0]+q[1]+q[2]-1:E),F.write_shift(4,q[3]),F.write_shift(-4,q[1]?q[0]-1:E),F.write_shift(4,q[1]),ee=0;ee<109;++ee)F.write_shift(-4,ee<q[2]?q[1]+ee:-1)}if(q[1])for(me=0;me<q[1];++me){for(;ee<236+me*127;++ee)F.write_shift(-4,ee<q[2]?q[1]+ee:-1);F.write_shift(-4,me===q[1]-1?E:me+1)}var Ne=function(Ge){for(me+=Ge;ee<me-1;++ee)F.write_shift(-4,ee+1);Ge&&(++ee,F.write_shift(-4,E))};for(me=ee=0,me+=q[1];ee<me;++ee)F.write_shift(-4,Z.DIFSECT);for(me+=q[2];ee<me;++ee)F.write_shift(-4,Z.FATSECT);Ne(q[3]),Ne(q[4]);for(var ge=0,te=0,Se=V.FileIndex[0];ge<V.FileIndex.length;++ge)Se=V.FileIndex[ge],Se.content&&(te=Se.content.length,!(te<4096)&&(Se.start=me,Ne(te+511>>9)));for(Ne(q[6]+7>>3);F.l&511;)F.write_shift(-4,Z.ENDOFCHAIN);for(me=ee=0,ge=0;ge<V.FileIndex.length;++ge)Se=V.FileIndex[ge],Se.content&&(te=Se.content.length,!(!te||te>=4096)&&(Se.start=me,Ne(te+63>>6)));for(;F.l&511;)F.write_shift(-4,Z.ENDOFCHAIN);for(ee=0;ee<q[4]<<2;++ee){var Ue=V.FullPaths[ee];if(!Ue||Ue.length===0){for(ge=0;ge<17;++ge)F.write_shift(4,0);for(ge=0;ge<3;++ge)F.write_shift(4,-1);for(ge=0;ge<12;++ge)F.write_shift(4,0);continue}Se=V.FileIndex[ee],ee===0&&(Se.start=Se.size?Se.start-1:E);var Be=ee===0&&K.root||Se.name;if(te=2*(Be.length+1),F.write_shift(64,Be,"utf16le"),F.write_shift(2,te),F.write_shift(1,Se.type),F.write_shift(1,Se.color),F.write_shift(-4,Se.L),F.write_shift(-4,Se.R),F.write_shift(-4,Se.C),Se.clsid)F.write_shift(16,Se.clsid,"hex");else for(ge=0;ge<4;++ge)F.write_shift(4,0);F.write_shift(4,Se.state||0),F.write_shift(4,0),F.write_shift(4,0),F.write_shift(4,0),F.write_shift(4,0),F.write_shift(4,Se.start),F.write_shift(4,Se.size),F.write_shift(4,0)}for(ee=1;ee<V.FileIndex.length;++ee)if(Se=V.FileIndex[ee],Se.size>=4096)if(F.l=Se.start+1<<9,mr&&Buffer.isBuffer(Se.content))Se.content.copy(F,F.l,0,Se.size),F.l+=Se.size+511&-512;else{for(ge=0;ge<Se.size;++ge)F.write_shift(1,Se.content[ge]);for(;ge&511;++ge)F.write_shift(1,0)}for(ee=1;ee<V.FileIndex.length;++ee)if(Se=V.FileIndex[ee],Se.size>0&&Se.size<4096)if(mr&&Buffer.isBuffer(Se.content))Se.content.copy(F,F.l,0,Se.size),F.l+=Se.size+63&-64;else{for(ge=0;ge<Se.size;++ge)F.write_shift(1,Se.content[ge]);for(;ge&63;++ge)F.write_shift(1,0)}if(mr)F.l=F.length;else for(;F.l<F.length;)F.write_shift(1,0);return F}function A(V,Q){var K=V.FullPaths.map(function(ge){return ge.toUpperCase()}),q=K.map(function(ge){var te=ge.split("/");return te[te.length-(ge.slice(-1)=="/"?2:1)]}),F=!1;Q.charCodeAt(0)===47?(F=!0,Q=K[0].slice(0,-1)+Q):F=Q.indexOf("/")!==-1;var ee=Q.toUpperCase(),me=F===!0?K.indexOf(ee):q.indexOf(ee);if(me!==-1)return V.FileIndex[me];var Ne=!ee.match(y0);for(ee=ee.replace(Xs,""),Ne&&(ee=ee.replace(y0,"!")),me=0;me<K.length;++me)if((Ne?K[me].replace(y0,"!"):K[me]).replace(Xs,"")==ee||(Ne?q[me].replace(y0,"!"):q[me]).replace(Xs,"")==ee)return V.FileIndex[me];return null}var S=64,E=-2,O="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],L="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:E,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:L,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(V,Q,K){d();var q=P(V,K);c.writeFileSync(Q,q)}function R(V){for(var Q=new Array(V.length),K=0;K<V.length;++K)Q[K]=String.fromCharCode(V[K]);return Q.join("")}function D(V,Q){var K=P(V,Q);switch(Q&&Q.type||"buffer"){case"file":return d(),c.writeFileSync(Q.filename,K),K;case"binary":return typeof K=="string"?K:R(K);case"base64":return rp(typeof K=="string"?K:R(K));case"buffer":if(mr)return Buffer.isBuffer(K)?K:Eo(K);case"array":return typeof K=="string"?za(K):K}return K}var Y;function M(V){try{var Q=V.InflateRaw,K=new Q;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)Y=V;else throw new Error("zlib does not expose bytesRead")}catch(q){console.error("cannot use native zlib: "+(q.message||q))}}function X(V,Q){if(!Y)return yt(V,Q);var K=Y.InflateRaw,q=new K,F=q._processChunk(V.slice(V.l),q._finishFlushFlag);return V.l+=q.bytesRead,F}function ne(V){return Y?Y.deflateRawSync(V):rt(V)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ke=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ve(V){var Q=(V<<1|V<<11)&139536|(V<<5|V<<15)&558144;return(Q>>16|Q>>8|Q)&255}for(var je=typeof Uint8Array<"u",ie=je?new Uint8Array(256):[],se=0;se<256;++se)ie[se]=ve(se);function z(V,Q){var K=ie[V&255];return Q<=8?K>>>8-Q:(K=K<<8|ie[V>>8&255],Q<=16?K>>>16-Q:(K=K<<8|ie[V>>16&255],K>>>24-Q))}function Te(V,Q){var K=Q&7,q=Q>>>3;return(V[q]|(K<=6?0:V[q+1]<<8))>>>K&3}function fe(V,Q){var K=Q&7,q=Q>>>3;return(V[q]|(K<=5?0:V[q+1]<<8))>>>K&7}function Ie(V,Q){var K=Q&7,q=Q>>>3;return(V[q]|(K<=4?0:V[q+1]<<8))>>>K&15}function ce(V,Q){var K=Q&7,q=Q>>>3;return(V[q]|(K<=3?0:V[q+1]<<8))>>>K&31}function Ce(V,Q){var K=Q&7,q=Q>>>3;return(V[q]|(K<=1?0:V[q+1]<<8))>>>K&127}function Ye(V,Q,K){var q=Q&7,F=Q>>>3,ee=(1<<K)-1,me=V[F]>>>q;return K<8-q||(me|=V[F+1]<<8-q,K<16-q)||(me|=V[F+2]<<16-q,K<24-q)||(me|=V[F+3]<<24-q),me&ee}function at(V,Q,K){var q=Q&7,F=Q>>>3;return q<=5?V[F]|=(K&7)<<q:(V[F]|=K<<q&255,V[F+1]=(K&7)>>8-q),Q+3}function pe(V,Q,K){var q=Q&7,F=Q>>>3;return K=(K&1)<<q,V[F]|=K,Q+1}function ye(V,Q,K){var q=Q&7,F=Q>>>3;return K<<=q,V[F]|=K&255,K>>>=8,V[F+1]=K,Q+8}function Pe(V,Q,K){var q=Q&7,F=Q>>>3;return K<<=q,V[F]|=K&255,K>>>=8,V[F+1]=K&255,V[F+2]=K>>>8,Q+16}function et(V,Q){var K=V.length,q=2*K>Q?2*K:Q+5,F=0;if(K>=Q)return V;if(mr){var ee=XR(q);if(V.copy)V.copy(ee);else for(;F<V.length;++F)ee[F]=V[F];return ee}else if(je){var me=new Uint8Array(q);if(me.set)me.set(V);else for(;F<K;++F)me[F]=V[F];return me}return V.length=q,V}function We(V){for(var Q=new Array(V),K=0;K<V;++K)Q[K]=0;return Q}function qe(V,Q,K){var q=1,F=0,ee=0,me=0,Ne=0,ge=V.length,te=je?new Uint16Array(32):We(32);for(ee=0;ee<32;++ee)te[ee]=0;for(ee=ge;ee<K;++ee)V[ee]=0;ge=V.length;var Se=je?new Uint16Array(ge):We(ge);for(ee=0;ee<ge;++ee)te[F=V[ee]]++,q<F&&(q=F),Se[ee]=0;for(te[0]=0,ee=1;ee<=q;++ee)te[ee+16]=Ne=Ne+te[ee-1]<<1;for(ee=0;ee<ge;++ee)Ne=V[ee],Ne!=0&&(Se[ee]=te[Ne+16]++);var Ue=0;for(ee=0;ee<ge;++ee)if(Ue=V[ee],Ue!=0)for(Ne=z(Se[ee],q)>>q-Ue,me=(1<<q+4-Ue)-1;me>=0;--me)Q[Ne|me<<Ue]=Ue&15|ee<<4;return q}var ot=je?new Uint16Array(512):We(512),Ct=je?new Uint16Array(32):We(32);if(!je){for(var He=0;He<512;++He)ot[He]=0;for(He=0;He<32;++He)Ct[He]=0}(function(){for(var V=[],Q=0;Q<32;Q++)V.push(5);qe(V,Ct,32);var K=[];for(Q=0;Q<=143;Q++)K.push(8);for(;Q<=255;Q++)K.push(9);for(;Q<=279;Q++)K.push(7);for(;Q<=287;Q++)K.push(8);qe(K,ot,288)})();var mt=function(){for(var Q=je?new Uint8Array(32768):[],K=0,q=0;K<ke.length-1;++K)for(;q<ke[K+1];++q)Q[q]=K;for(;q<32768;++q)Q[q]=29;var F=je?new Uint8Array(259):[];for(K=0,q=0;K<ue.length-1;++K)for(;q<ue[K+1];++q)F[q]=K;function ee(Ne,ge){for(var te=0;te<Ne.length;){var Se=Math.min(65535,Ne.length-te),Ue=te+Se==Ne.length;for(ge.write_shift(1,+Ue),ge.write_shift(2,Se),ge.write_shift(2,~Se&65535);Se-- >0;)ge[ge.l++]=Ne[te++]}return ge.l}function me(Ne,ge){for(var te=0,Se=0,Ue=je?new Uint16Array(32768):[];Se<Ne.length;){var Be=Math.min(65535,Ne.length-Se);if(Be<10){for(te=at(ge,te,+(Se+Be==Ne.length)),te&7&&(te+=8-(te&7)),ge.l=te/8|0,ge.write_shift(2,Be),ge.write_shift(2,~Be&65535);Be-- >0;)ge[ge.l++]=Ne[Se++];te=ge.l*8;continue}te=at(ge,te,+(Se+Be==Ne.length)+2);for(var Ge=0;Be-- >0;){var tt=Ne[Se];Ge=(Ge<<5^tt)&32767;var _e=-1,Je=0;if((_e=Ue[Ge])&&(_e|=Se&-32768,_e>Se&&(_e-=32768),_e<Se))for(;Ne[_e+Je]==Ne[Se+Je]&&Je<250;)++Je;if(Je>2){tt=F[Je],tt<=22?te=ye(ge,te,ie[tt+1]>>1)-1:(ye(ge,te,3),te+=5,ye(ge,te,ie[tt-23]>>5),te+=3);var B=tt<8?0:tt-4>>2;B>0&&(Pe(ge,te,Je-ue[tt]),te+=B),tt=Q[Se-_e],te=ye(ge,te,ie[tt]>>3),te-=3;var re=tt<4?0:tt-2>>1;re>0&&(Pe(ge,te,Se-_e-ke[tt]),te+=re);for(var st=0;st<Je;++st)Ue[Ge]=Se&32767,Ge=(Ge<<5^Ne[Se])&32767,++Se;Be-=Je-1}else tt<=143?tt=tt+48:te=pe(ge,te,1),te=ye(ge,te,ie[tt]),Ue[Ge]=Se&32767,++Se}te=ye(ge,te,0)-1}return ge.l=(te+7)/8|0,ge.l}return function(ge,te){return ge.length<8?ee(ge,te):me(ge,te)}}();function rt(V){var Q=it(50+Math.floor(V.length*1.1)),K=mt(V,Q);return Q.slice(0,K)}var wt=je?new Uint16Array(32768):We(32768),At=je?new Uint16Array(32768):We(32768),$t=je?new Uint16Array(128):We(128),Wt=1,lr=1;function sr(V,Q){var K=ce(V,Q)+257;Q+=5;var q=ce(V,Q)+1;Q+=5;var F=Ie(V,Q)+4;Q+=4;for(var ee=0,me=je?new Uint8Array(19):We(19),Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ge=1,te=je?new Uint8Array(8):We(8),Se=je?new Uint8Array(8):We(8),Ue=me.length,Be=0;Be<F;++Be)me[J[Be]]=ee=fe(V,Q),ge<ee&&(ge=ee),te[ee]++,Q+=3;var Ge=0;for(te[0]=0,Be=1;Be<=ge;++Be)Se[Be]=Ge=Ge+te[Be-1]<<1;for(Be=0;Be<Ue;++Be)(Ge=me[Be])!=0&&(Ne[Be]=Se[Ge]++);var tt=0;for(Be=0;Be<Ue;++Be)if(tt=me[Be],tt!=0){Ge=ie[Ne[Be]]>>8-tt;for(var _e=(1<<7-tt)-1;_e>=0;--_e)$t[Ge|_e<<tt]=tt&7|Be<<3}var Je=[];for(ge=1;Je.length<K+q;)switch(Ge=$t[Ce(V,Q)],Q+=Ge&7,Ge>>>=3){case 16:for(ee=3+Te(V,Q),Q+=2,Ge=Je[Je.length-1];ee-- >0;)Je.push(Ge);break;case 17:for(ee=3+fe(V,Q),Q+=3;ee-- >0;)Je.push(0);break;case 18:for(ee=11+Ce(V,Q),Q+=7;ee-- >0;)Je.push(0);break;default:Je.push(Ge),ge<Ge&&(ge=Ge);break}var B=Je.slice(0,K),re=Je.slice(K);for(Be=K;Be<286;++Be)B[Be]=0;for(Be=q;Be<30;++Be)re[Be]=0;return Wt=qe(B,wt,286),lr=qe(re,At,30),Q}function De(V,Q){if(V[0]==3&&!(V[1]&3))return[vc(Q),2];for(var K=0,q=0,F=XR(Q||1<<18),ee=0,me=F.length>>>0,Ne=0,ge=0;!(q&1);){if(q=fe(V,K),K+=3,q>>>1)q>>1==1?(Ne=9,ge=5):(K=sr(V,K),Ne=Wt,ge=lr);else{K&7&&(K+=8-(K&7));var te=V[K>>>3]|V[(K>>>3)+1]<<8;if(K+=32,te>0)for(!Q&&me<ee+te&&(F=et(F,ee+te),me=F.length);te-- >0;)F[ee++]=V[K>>>3],K+=8;continue}for(;;){!Q&&me<ee+32767&&(F=et(F,ee+32767),me=F.length);var Se=Ye(V,K,Ne),Ue=q>>>1==1?ot[Se]:wt[Se];if(K+=Ue&15,Ue>>>=4,!(Ue>>>8&255))F[ee++]=Ue;else{if(Ue==256)break;Ue-=257;var Be=Ue<8?0:Ue-4>>2;Be>5&&(Be=0);var Ge=ee+ue[Ue];Be>0&&(Ge+=Ye(V,K,Be),K+=Be),Se=Ye(V,K,ge),Ue=q>>>1==1?Ct[Se]:At[Se],K+=Ue&15,Ue>>>=4;var tt=Ue<4?0:Ue-2>>1,_e=ke[Ue];for(tt>0&&(_e+=Ye(V,K,tt),K+=tt),!Q&&me<Ge&&(F=et(F,Ge+100),me=F.length);ee<Ge;)F[ee]=F[ee-_e],++ee}}}return Q?[F,K+7>>>3]:[F.slice(0,ee),K+7>>>3]}function yt(V,Q){var K=V.slice(V.l||0),q=De(K,Q);return V.l+=q[1],q[0]}function ut(V,Q){if(V)typeof console<"u"&&console.error(Q);else throw new Error(Q)}function Lt(V,Q){var K=V;Ss(K,0);var q=[],F=[],ee={FileIndex:q,FullPaths:F};k(ee,{root:Q.root});for(var me=K.length-4;(K[me]!=80||K[me+1]!=75||K[me+2]!=5||K[me+3]!=6)&&me>=0;)--me;K.l=me+4,K.l+=4;var Ne=K.read_shift(2);K.l+=6;var ge=K.read_shift(4);for(K.l=ge,me=0;me<Ne;++me){K.l+=20;var te=K.read_shift(4),Se=K.read_shift(4),Ue=K.read_shift(2),Be=K.read_shift(2),Ge=K.read_shift(2);K.l+=8;var tt=K.read_shift(4),_e=o(K.slice(K.l+Ue,K.l+Ue+Be));K.l+=Ue+Be+Ge;var Je=K.l;K.l=tt+4,Yt(K,te,Se,ee,_e),K.l=Je}return ee}function Yt(V,Q,K,q,F){V.l+=2;var ee=V.read_shift(2),me=V.read_shift(2),Ne=l(V);if(ee&8257)throw new Error("Unsupported ZIP encryption");for(var ge=V.read_shift(4),te=V.read_shift(4),Se=V.read_shift(4),Ue=V.read_shift(2),Be=V.read_shift(2),Ge="",tt=0;tt<Ue;++tt)Ge+=String.fromCharCode(V[V.l++]);if(Be){var _e=o(V.slice(V.l,V.l+Be));(_e[21589]||{}).mt&&(Ne=_e[21589].mt),((F||{})[21589]||{}).mt&&(Ne=F[21589].mt)}V.l+=Be;var Je=V.slice(V.l,V.l+te);switch(me){case 8:Je=X(V,Se);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+me)}var B=!1;ee&8&&(ge=V.read_shift(4),ge==134695760&&(ge=V.read_shift(4),B=!0),te=V.read_shift(4),Se=V.read_shift(4)),te!=Q&&ut(B,"Bad compressed size: "+Q+" != "+te),Se!=K&&ut(B,"Bad uncompressed size: "+K+" != "+Se),Ve(q,Ge,Je,{unsafe:!0,mt:Ne})}function be(V,Q){var K=Q||{},q=[],F=[],ee=it(1),me=K.compression?8:0,Ne=0,ge=0,te=0,Se=0,Ue=0,Be=V.FullPaths[0],Ge=Be,tt=V.FileIndex[0],_e=[],Je=0;for(ge=1;ge<V.FullPaths.length;++ge)if(Ge=V.FullPaths[ge].slice(Be.length),tt=V.FileIndex[ge],!(!tt.size||!tt.content||Ge=="Sh33tJ5")){var B=Se,re=it(Ge.length);for(te=0;te<Ge.length;++te)re.write_shift(1,Ge.charCodeAt(te)&127);re=re.slice(0,re.l),_e[Ue]=eTe.buf(tt.content,0);var st=tt.content;me==8&&(st=ne(st)),ee=it(30),ee.write_shift(4,67324752),ee.write_shift(2,20),ee.write_shift(2,Ne),ee.write_shift(2,me),tt.mt?i(ee,tt.mt):ee.write_shift(4,0),ee.write_shift(-4,_e[Ue]),ee.write_shift(4,st.length),ee.write_shift(4,tt.content.length),ee.write_shift(2,re.length),ee.write_shift(2,0),Se+=ee.length,q.push(ee),Se+=re.length,q.push(re),Se+=st.length,q.push(st),ee=it(46),ee.write_shift(4,33639248),ee.write_shift(2,0),ee.write_shift(2,20),ee.write_shift(2,Ne),ee.write_shift(2,me),ee.write_shift(4,0),ee.write_shift(-4,_e[Ue]),ee.write_shift(4,st.length),ee.write_shift(4,tt.content.length),ee.write_shift(2,re.length),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(4,0),ee.write_shift(4,B),Je+=ee.l,F.push(ee),Je+=re.length,F.push(re),++Ue}return ee=it(22),ee.write_shift(4,101010256),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,Ue),ee.write_shift(2,Ue),ee.write_shift(4,Je),ee.write_shift(4,Se),ee.write_shift(2,0),hs([hs(q),hs(F),ee])}var nt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ze(V,Q){if(V.ctype)return V.ctype;var K=V.name||"",q=K.match(/\.([^\.]+)$/);return q&&nt[q[1]]||Q&&(q=(K=Q).match(/[\.\\]([^\.\\])+$/),q&&nt[q[1]])?nt[q[1]]:"application/octet-stream"}function ht(V){for(var Q=rp(V),K=[],q=0;q<Q.length;q+=76)K.push(Q.slice(q,q+76));return K.join(`\r
`)+`\r
`}function Nt(V){var Q=V.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(te){var Se=te.charCodeAt(0).toString(16).toUpperCase();return"="+(Se.length==1?"0"+Se:Se)});Q=Q.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Q.charAt(0)==`
`&&(Q="=0D"+Q.slice(1)),Q=Q.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],q=Q.split(`\r
`),F=0;F<q.length;++F){var ee=q[F];if(ee.length==0){K.push("");continue}for(var me=0;me<ee.length;){var Ne=76,ge=ee.slice(me,me+Ne);ge.charAt(Ne-1)=="="?Ne--:ge.charAt(Ne-2)=="="?Ne-=2:ge.charAt(Ne-3)=="="&&(Ne-=3),ge=ee.slice(me,me+Ne),me+=Ne,me<ee.length&&(ge+="="),K.push(ge)}}return K.join(`\r
`)}function Oe(V){for(var Q=[],K=0;K<V.length;++K){for(var q=V[K];K<=V.length&&q.charAt(q.length-1)=="=";)q=q.slice(0,q.length-1)+V[++K];Q.push(q)}for(var F=0;F<Q.length;++F)Q[F]=Q[F].replace(/[=][0-9A-Fa-f]{2}/g,function(ee){return String.fromCharCode(parseInt(ee.slice(1),16))});return za(Q.join(`\r
`))}function xe(V,Q,K){for(var q="",F="",ee="",me,Ne=0;Ne<10;++Ne){var ge=Q[Ne];if(!ge||ge.match(/^\s*$/))break;var te=ge.match(/^(.*?):\s*([^\s].*)$/);if(te)switch(te[1].toLowerCase()){case"content-location":q=te[2].trim();break;case"content-type":ee=te[2].trim();break;case"content-transfer-encoding":F=te[2].trim();break}}switch(++Ne,F.toLowerCase()){case"base64":me=za(Za(Q.slice(Ne).join("")));break;case"quoted-printable":me=Oe(Q.slice(Ne));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+F)}var Se=Ve(V,q.slice(K.length),me,{unsafe:!0});ee&&(Se.ctype=ee)}function Re(V,Q){if(R(V.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=Q&&Q.root||"",q=(mr&&Buffer.isBuffer(V)?V.toString("binary"):R(V)).split(`\r
`),F=0,ee="";for(F=0;F<q.length;++F)if(ee=q[F],!!/^Content-Location:/i.test(ee)&&(ee=ee.slice(ee.indexOf("file")),K||(K=ee.slice(0,ee.lastIndexOf("/")+1)),ee.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),ee.slice(0,K.length)!=K););var me=(q[1]||"").match(/boundary="(.*?)"/);if(!me)throw new Error("MAD cannot find boundary");var Ne="--"+(me[1]||""),ge=[],te=[],Se={FileIndex:ge,FullPaths:te};k(Se);var Ue,Be=0;for(F=0;F<q.length;++F){var Ge=q[F];Ge!==Ne&&Ge!==Ne+"--"||(Be++&&xe(Se,q.slice(Ue,F),K),Ue=F)}return Se}function le(V,Q){var K=Q||{},q=K.boundary||"SheetJS";q="------="+q;for(var F=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+q.slice(2)+'"',"","",""],ee=V.FullPaths[0],me=ee,Ne=V.FileIndex[0],ge=1;ge<V.FullPaths.length;++ge)if(me=V.FullPaths[ge].slice(ee.length),Ne=V.FileIndex[ge],!(!Ne.size||!Ne.content||me=="Sh33tJ5")){me=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Je){return"_x"+Je.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Je){return"_u"+Je.charCodeAt(0).toString(16)+"_"});for(var te=Ne.content,Se=mr&&Buffer.isBuffer(te)?te.toString("binary"):R(te),Ue=0,Be=Math.min(1024,Se.length),Ge=0,tt=0;tt<=Be;++tt)(Ge=Se.charCodeAt(tt))>=32&&Ge<128&&++Ue;var _e=Ue>=Be*4/5;F.push(q),F.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+me),F.push("Content-Transfer-Encoding: "+(_e?"quoted-printable":"base64")),F.push("Content-Type: "+ze(Ne,me)),F.push(""),F.push(_e?Nt(Se):ht(Se))}return F.push(q+`--\r
`),F.join(`\r
`)}function Me(V){var Q={};return k(Q,V),Q}function Ve(V,Q,K,q){var F=q&&q.unsafe;F||k(V);var ee=!F&&Gt.find(V,Q);if(!ee){var me=V.FullPaths[0];Q.slice(0,me.length)==me?me=Q:(me.slice(-1)!="/"&&(me+="/"),me=(me+Q).replace("//","/")),ee={name:a(Q),type:2},V.FileIndex.push(ee),V.FullPaths.push(me),F||Gt.utils.cfb_gc(V)}return ee.content=K,ee.size=K?K.length:0,q&&(q.CLSID&&(ee.clsid=q.CLSID),q.mt&&(ee.mt=q.mt),q.ct&&(ee.ct=q.ct)),ee}function Xe(V,Q){k(V);var K=Gt.find(V,Q);if(K){for(var q=0;q<V.FileIndex.length;++q)if(V.FileIndex[q]==K)return V.FileIndex.splice(q,1),V.FullPaths.splice(q,1),!0}return!1}function he(V,Q,K){k(V);var q=Gt.find(V,Q);if(q){for(var F=0;F<V.FileIndex.length;++F)if(V.FileIndex[F]==q)return V.FileIndex[F].name=a(K),V.FullPaths[F]=K,!0}return!1}function W(V){T(V,!0)}return t.find=A,t.read=_,t.parse=u,t.write=D,t.writeFile=H,t.utils={cfb_new:Me,cfb_add:Ve,cfb_del:Xe,cfb_mov:he,cfb_gc:W,ReadShift:z0,CheckField:XU,prep_blob:Ss,bconcat:hs,use_zlib:M,_deflateRaw:rt,_inflateRaw:yt,consts:Z},t}();let ac;function tTe(e){ac=e}function rTe(e){return typeof e=="string"?Wp(e):Array.isArray(e)?C3e(e):e}function Hp(e,t,r){if(typeof ac<"u"&&ac.writeFileSync)return r?ac.writeFileSync(e,t,r):ac.writeFileSync(e,t);if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Wp(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var s=r=="utf8"?Nl(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,e);if(typeof Blob<"u"){var a=new Blob([rTe(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Rc(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function nTe(e){if(typeof ac<"u")return ac.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(s){if(!s.message||!s.message.match(/onstruct/))throw s}throw new Error("Cannot access file "+e)}function Rn(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function sL(e,t){for(var r=[],s=Rn(e),a=0;a!==s.length;++a)r[e[s[a]][t]]==null&&(r[e[s[a]][t]]=s[a]);return r}function R1(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}function L1(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]=parseInt(r[s],10);return t}function sTe(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]==null&&(t[e[r[s]]]=[]),t[e[r[s]]].push(r[s]);return t}var zv=new Date(1899,11,30,0,0,0);function ss(e,t){var r=e.getTime(),s=zv.getTime()+(e.getTimezoneOffset()-zv.getTimezoneOffset())*6e4;return(r-s)/(24*60*60*1e3)}var RU=new Date,aTe=zv.getTime()+(RU.getTimezoneOffset()-zv.getTimezoneOffset())*6e4,aL=RU.getTimezoneOffset();function I1(e){var t=new Date;return t.setTime(e*24*60*60*1e3+aTe),t.getTimezoneOffset()!==aL&&t.setTime(t.getTime()+(t.getTimezoneOffset()-aL)*6e4),t}function iTe(e){var t=0,r=0,s=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(s=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(s)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var iL=new Date("2017-02-19T19:06:09.000Z"),LU=isNaN(iL.getFullYear())?new Date("2/19/17"):iL,lTe=LU.getFullYear()==2017;function fn(e,t){var r=new Date(e);if(lTe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(LU.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Hd(e,t){if(mr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Nl(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Nl(bU(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Nl(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Nl(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var s=[],a=0;a!=e.length;++a)s.push(String.fromCharCode(e[a]));return s.join("")}function Gr(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Gr(e[r]));return t}function Tn(e,t){for(var r="";r.length<t;)r+=e;return r}function tl(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(s)))?t/r:t}var oTe=["january","february","march","april","may","june","july","august","september","october","november","december"];function cm(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&oTe.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return s<0||s>8099?r:(a>0||i>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var cTe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,s,a){if(e||typeof s=="string")return r.split(s);for(var i=r.split(s),l=[i[0]],o=1;o<i.length;++o)l.push(a),l.push(i[o]);return l}}();function IU(e){return e?e.content&&e.type?Hd(e.content,!0):e.data?sf(e.data):e.asNodeBuffer&&mr?sf(e.asNodeBuffer().toString("binary")):e.asBinary?sf(e.asBinary()):e._data&&e._data.getContent?sf(Hd(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function FU(e){if(!e)return null;if(e.data)return $v(e.data);if(e.asNodeBuffer&&mr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?$v(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function dTe(e){return e&&e.name.slice(-4)===".bin"?FU(e):IU(e)}function ui(e,t){for(var r=e.FullPaths||Rn(e.files),s=t.toLowerCase().replace(/[\/]/g,"\\"),a=s.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(s==l||a==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function QC(e,t){var r=ui(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Vn(e,t,r){if(!r)return dTe(QC(e,t));if(!t)return null;try{return Vn(e,t)}catch{return null}}function Wa(e,t,r){if(!r)return IU(QC(e,t));if(!t)return null;try{return Wa(e,t)}catch{return null}}function uTe(e,t,r){return FU(QC(e,t))}function lL(e){for(var t=e.FullPaths||Rn(e.files),r=[],s=0;s<t.length;++s)t[s].slice(-1)!="/"&&r.push(t[s].replace(/^Root Entry[\/]/,""));return r.sort()}function fr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return mr?s=Eo(r):s=A3e(r),Gt.utils.cfb_add(e,t,s)}Gt.utils.cfb_add(e,t,r)}else e.file(t,r)}function e4(){return Gt.utils.cfb_new()}function DU(e,t){switch(t.type){case"base64":return Gt.read(e,{type:"base64"});case"binary":return Gt.read(e,{type:"binary"});case"buffer":case"array":return Gt.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function v0(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var s=e.split("/");s.length!==0;){var a=s.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Mn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,fTe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,oL=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,mTe=/<[^>]*>/g,ta=Mn.match(oL)?oL:mTe,hTe=/<\w*:/,pTe=/<(\/?)\w+:/;function nr(e,t,r){for(var s={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(s[0]=e.slice(0,a)),a===e.length)return s;var l=e.match(fTe),o=0,c="",d=0,u="",f="",m=1;if(l)for(d=0;d!=l.length;++d){for(f=l[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(m=(a=f.charCodeAt(i+1))==34||a==39?1:0,c=f.slice(i+1+m,f.length-m),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),s[u]=c,s[u.toLowerCase()]=c;else{var g=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(s[g]&&u.slice(o-3,o)=="ext")continue;s[g]=c,s[g.toLowerCase()]=c}}return s}function Bl(e){return e.replace(pTe,"<$1")}var $U={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},t4=R1($U),kr=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(s){var a=s+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(o,c){return $U[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,l)+r(a.slice(l+3))}}(),r4=/[&<>'"]/g,xTe=/[\u0000-\u0008\u000b-\u001f]/g;function Fr(e){var t=e+"";return t.replace(r4,function(r){return t4[r]}).replace(xTe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cL(e){return Fr(e).replace(/ /g,"_x0020_")}var MU=/[\u0000-\u001f]/g;function n4(e){var t=e+"";return t.replace(r4,function(r){return t4[r]}).replace(/\n/g,"<br/>").replace(MU,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gTe(e){var t=e+"";return t.replace(r4,function(r){return t4[r]}).replace(MU,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var dL=function(){var e=/&#(\d+);/g;function t(r,s){return String.fromCharCode(parseInt(s,10))}return function(s){return s.replace(e,t)}}();function yTe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function on(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function v_(e){for(var t="",r=0,s=0,a=0,i=0,l=0,o=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),s>191&&s<224){l=(s&31)<<6,l|=a&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((s&7)<<18|(a&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function uL(e){var t=vc(2*e.length),r,s,a=1,i=0,l=0,o;for(s=0;s<e.length;s+=a)a=1,(o=e.charCodeAt(s))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(s+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function fL(e){return Eo(e,"binary").toString("utf8")}var Gx="foo bar baz",zr=mr&&(fL(Gx)==v_(Gx)&&fL||uL(Gx)==v_(Gx)&&uL)||v_,Nl=mr?function(e){return Eo(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,a=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,a=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},sp=function(){var e={};return function(r,s){var a=r+"|"+(s||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",s||"")}}(),BU=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)s=s.replace(e[a][0],e[a][1]);return s}}(),vTe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),bTe=/<\/?(?:vt:)?variant>/g,jTe=/<(?:vt:)([^>]*)>([\s\S]*)</;function mL(e,t){var r=nr(e),s=e.match(vTe(r.baseType))||[],a=[];if(s.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+s.length+" != "+r.size);return a}return s.forEach(function(i){var l=i.replace(bTe,"").match(jTe);l&&a.push({v:zr(l[2]),t:l[1]})}),a}var UU=/(^\s|\s$|\n)/;function As(e,t){return"<"+e+(t.match(UU)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ap(e){return Rn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function kt(e,t,r){return"<"+e+(r!=null?ap(r):"")+(t!=null?(t.match(UU)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function tk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function _Te(e,t){switch(typeof e){case"string":var r=kt("vt:lpwstr",Fr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return kt((e|0)==e?"vt:i4":"vt:r8",Fr(String(e)));case"boolean":return kt("vt:bool",e?"true":"false")}if(e instanceof Date)return kt("vt:filetime",tk(e));throw new Error("Unable to serialize "+e)}function s4(e){if(mr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return zr(Rc(XC(e)));throw new Error("Bad input format: expected Buffer or string")}var ip=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ts={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ou=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ma={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function wTe(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return s==2047?a==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,a+=Math.pow(2,52)),r*Math.pow(2,s-52)*a)}function NTe(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,l=s?-t:t;isFinite(l)?l==0?a=i=0:(a=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|s}var hL=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var a=0,i=e[0][s].length;a<i;a+=r)t.push.apply(t,e[0][s].slice(a,a+r));return t},pL=mr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Eo(t)})):hL(e)}:hL,xL=function(e,t,r){for(var s=[],a=t;a<r;a+=2)s.push(String.fromCharCode(ro(e,a)));return s.join("").replace(Xs,"")},F1=mr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Xs,""):xL(e,t,r)}:xL,gL=function(e,t,r){for(var s=[],a=t;a<t+r;++a)s.push(("0"+e[a].toString(16)).slice(-2));return s.join("")},zU=mr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):gL(e,t,r)}:gL,yL=function(e,t,r){for(var s=[],a=t;a<r;a++)s.push(String.fromCharCode(Fu(e,a)));return s.join("")},Im=mr?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):yL(t,r,s)}:yL,WU=function(e,t){var r=ms(e,t);return r>0?Im(e,t+4,t+4+r-1):""},a4=WU,VU=function(e,t){var r=ms(e,t);return r>0?Im(e,t+4,t+4+r-1):""},i4=VU,HU=function(e,t){var r=2*ms(e,t);return r>0?Im(e,t+4,t+4+r-1):""},l4=HU,qU=function(t,r){var s=ms(t,r);return s>0?F1(t,r+4,r+4+s):""},o4=qU,GU=function(e,t){var r=ms(e,t);return r>0?Im(e,t+4,t+4+r):""},c4=GU,JU=function(e,t){return wTe(e,t)},Wv=JU,d4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};mr&&(a4=function(t,r){if(!Buffer.isBuffer(t))return WU(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},i4=function(t,r){if(!Buffer.isBuffer(t))return VU(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},l4=function(t,r){if(!Buffer.isBuffer(t))return HU(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},o4=function(t,r){if(!Buffer.isBuffer(t))return qU(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},c4=function(t,r){if(!Buffer.isBuffer(t))return GU(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},Wv=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):JU(t,r)},d4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function KU(){F1=function(e,t,r){return vr.utils.decode(1200,e.slice(t,r)).replace(Xs,"")},Im=function(e,t,r){return vr.utils.decode(65001,e.slice(t,r))},a4=function(e,t){var r=ms(e,t);return r>0?vr.utils.decode(Wd,e.slice(t+4,t+4+r-1)):""},i4=function(e,t){var r=ms(e,t);return r>0?vr.utils.decode(Ka,e.slice(t+4,t+4+r-1)):""},l4=function(e,t){var r=2*ms(e,t);return r>0?vr.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},o4=function(e,t){var r=ms(e,t);return r>0?vr.utils.decode(1200,e.slice(t+4,t+4+r)):""},c4=function(e,t){var r=ms(e,t);return r>0?vr.utils.decode(65001,e.slice(t+4,t+4+r)):""}}typeof vr<"u"&&KU();var Fu=function(e,t){return e[t]},ro=function(e,t){return e[t+1]*256+e[t]},kTe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ms=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ed=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},STe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function z0(e,t){var r="",s,a,i=[],l,o,c,d;switch(t){case"dbcs":if(d=this.l,mr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(ro(this,d)),d+=2;e*=2;break;case"utf8":r=Im(this,this.l,this.l+e);break;case"utf16le":e*=2,r=F1(this,this.l,this.l+e);break;case"wstr":if(typeof vr<"u")r=vr.utils.decode(Ka,this.slice(this.l,this.l+2*e));else return z0.call(this,e,"dbcs");e=2*e;break;case"lpstr-ansi":r=a4(this,this.l),e=4+ms(this,this.l);break;case"lpstr-cp":r=i4(this,this.l),e=4+ms(this,this.l);break;case"lpwstr":r=l4(this,this.l),e=4+2*ms(this,this.l);break;case"lpp4":e=4+ms(this,this.l),r=o4(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ms(this,this.l),r=c4(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=Fu(this,this.l+e++))!==0;)i.push(g0(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=ro(this,this.l+e))!==0;)i.push(g0(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=Fu(this,d),this.l=d+1,o=z0.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(g0(ro(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":if(typeof vr<"u"){r=vr.utils.decode(Ka,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=Fu(this,d),this.l=d+1,o=z0.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(g0(Fu(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return s=Fu(this,this.l),this.l++,s;case 2:return s=(t==="i"?kTe:ro)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(s=(e>0?ed:STe)(this,this.l),this.l+=4,s):(a=ms(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Wv(this,this.l):a=Wv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=zU(this,this.l,e);break}}return this.l+=e,r}var CTe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},ATe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ETe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function TTe(e,t,r){var s=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ETe(this,t.charCodeAt(a),this.l+2*a);s=2*t.length}else if(r==="sbcs"){if(typeof vr<"u"&&Wd==874)for(a=0;a!=t.length;++a){var i=vr.utils.encode(Wd,t.charAt(a));this[this.l+a]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;s=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var l=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,CTe(this,t,this.l);break;case 8:if(s=8,r==="f"){NTe(this,t,this.l);break}case 16:break;case-4:s=4,ATe(this,t,this.l);break}return this.l+=s,this}function XU(e,t){var r=zU(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ss(e,t){e.l=t,e.read_shift=z0,e.chk=XU,e.write_shift=TTe}function Qs(e,t){e.l+=t}function it(e){var t=vc(e);return Ss(t,0),t}function To(e,t,r){if(e){var s,a,i;Ss(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var d=fp[o]||fp[65535];for(s=e.read_shift(1),i=s&127,a=1;a<4&&s&128;++a)i+=((s=e.read_shift(1))&127)<<7*a;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,o))return}}}function Ta(){var e=[],t=mr?256:2048,r=function(d){var u=it(d);return Ss(u,0),u},s=r(t),a=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},i=function(d){return s&&d<s.length-s.l?s:(a(),s=r(Math.max(d+1,t)))},l=function(){return a(),hs(e)},o=function(d){a(),s=d,s.l==null&&(s.l=s.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function ft(e,t,r,s){var a=+t,i;if(!isNaN(a)){s||(s=fp[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,s>=128&&++i,s>=16384&&++i,s>=2097152&&++i;var l=e.next(i);a<=127?l.write_shift(1,a):(l.write_shift(1,(a&127)+128),l.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(s>=128)l.write_shift(1,(s&127)+128),s>>=7;else{l.write_shift(1,s);break}s>0&&d4(r)&&e.push(r)}}function W0(e,t,r){var s=Gr(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function vL(e,t,r){var s=Gr(e);return s.s=W0(s.s,t.s,r),s.e=W0(s.e,t.s,r),s}function V0(e,t){if(e.cRel&&e.c<0)for(e=Gr(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Gr(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=tr(e);return!e.cRel&&e.cRel!=null&&(r=RTe(r)),!e.rRel&&e.rRel!=null&&(r=PTe(r)),r}function b_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+un(e.s.c)+":"+(e.e.cRel?"":"$")+un(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Pn(e.s.r)+":"+(e.e.rRel?"":"$")+Pn(e.e.r):V0(e.s,t.biff)+":"+V0(e.e,t.biff)}function u4(e){return parseInt(OTe(e),10)-1}function Pn(e){return""+(e+1)}function PTe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function OTe(e){return e.replace(/\$(\d+)$/,"$1")}function f4(e){for(var t=LTe(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function un(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function RTe(e){return e.replace(/^([A-Z])/,"$$$1")}function LTe(e){return e.replace(/^\$([A-Z])/,"$1")}function ITe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function _n(e){for(var t=0,r=0,s=0;s<e.length;++s){var a=e.charCodeAt(s);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function tr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function fa(e){var t=e.indexOf(":");return t==-1?{s:_n(e),e:_n(e)}:{s:_n(e.slice(0,t)),e:_n(e.slice(t+1))}}function ur(e,t){return typeof t>"u"||typeof t=="number"?ur(e.s,e.e):(typeof e!="string"&&(e=tr(e)),typeof t!="string"&&(t=tr(t)),e==t?e:e+":"+t)}function gr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,a=0,i=e.length;for(r=0;s<i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.s.c=--r,r=0;s<i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;if(t.s.r=--r,s===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.e.c=--r,r=0;s!=i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;return t.e.r=--r,t}function bL(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Qa(e.z,r?ss(t):t)}catch{}try{return e.w=Qa((e.XF||{}).numFmtId||(r?14:0),r?ss(t):t)}catch{return""+t}}function Ll(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Po[e.v]||e.v:t==null?bL(e,e.v):bL(e,t))}function Lc(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function YU(e,t,r){var s=r||{},a=e?Array.isArray(e):s.dense,i=e||(a?[]:{}),l=0,o=0;if(i&&s.origin!=null){if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?_n(s.origin):s.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=gr(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var g={v:t[f][m]},x=l+f,h=o+m;if(d.s.r>x&&(d.s.r=x),d.s.c>h&&(d.s.c=h),d.e.r<x&&(d.e.r=x),d.e.c<h&&(d.e.c=h),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))g=t[f][m];else if(Array.isArray(g.v)&&(g.f=t[f][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(s.nullError)g.t="e",g.v=0;else if(s.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=s.dateNF||Kt[14],s.cellDates?(g.t="d",g.w=Qa(g.z,ss(g.v))):(g.t="n",g.v=ss(g.v),g.w=Qa(g.z,g.v))):g.t="s";if(a)i[x]||(i[x]=[]),i[x][h]&&i[x][h].z&&(g.z=i[x][h].z),i[x][h]=g;else{var p=tr({c:h,r:x});i[p]&&i[p].z&&(g.z=i[p].z),i[p]=g}}}return d.s.c<1e7&&(i["!ref"]=ur(d)),i}function Fm(e,t){return YU(null,e,t)}function FTe(e){return e.read_shift(4,"i")}function rl(e,t){return t||(t=it(4)),t.write_shift(4,e),t}function Ys(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function xs(e,t){var r=!1;return t==null&&(r=!0,t=it(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function DTe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function $Te(e,t){return t||(t=it(4)),t.write_shift(2,0),t.write_shift(2,0),t}function m4(e,t){var r=e.l,s=e.read_shift(1),a=Ys(e),i=[],l={t:a,h:a};if(s&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(DTe(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function MTe(e,t){var r=!1;return t==null&&(r=!0,t=it(15+4*e.t.length)),t.write_shift(1,0),xs(e.t,t),r?t.slice(0,t.l):t}var BTe=m4;function UTe(e,t){var r=!1;return t==null&&(r=!0,t=it(23+4*e.t.length)),t.write_shift(1,1),xs(e.t,t),t.write_shift(4,1),$Te({},t),r?t.slice(0,t.l):t}function Oi(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function cu(e,t){return t==null&&(t=it(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function du(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function uu(e,t){return t==null&&(t=it(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var zTe=Ys,ZU=xs;function h4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Vv(e,t){var r=!1;return t==null&&(r=!0,t=it(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var WTe=Ys,rk=h4,p4=Vv;function x4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var a=s===0?Wv([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ed(t,0)>>2;return r?a/100:a}function QU(e,t){t==null&&(t=it(4));var r=0,s=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?s=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(s=1,r=1),s)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function ez(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function VTe(e,t){return t||(t=it(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var fu=ez,Dm=VTe;function Gs(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function qd(e,t){return(t||it(8)).write_shift(8,e,"f")}function HTe(e){var t={},r=e.read_shift(1),s=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=a;var d=jd[a];d&&(t.rgb=op(d));break;case 2:t.rgb=op([l,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Hv(e,t){if(t||(t=it(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var s=e.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),t.write_shift(1,parseInt(s.slice(0,2),16)),t.write_shift(1,parseInt(s.slice(2,4),16)),t.write_shift(1,parseInt(s.slice(4,6),16)),t.write_shift(1,255)}return t}function qTe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function GTe(e,t){t||(t=it(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function tz(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},s=e.read_shift(4);switch(s){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(s>400)throw new Error("Unsupported Clipboard: "+s.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function JTe(e){return tz(e,1)}function KTe(e){return tz(e,2)}var g4=2,ba=3,Jx=11,jL=12,qv=19,Kx=64,XTe=65,YTe=71,ZTe=4108,QTe=4126,ds=80,rz=81,e5e=[ds,rz],nk={1:{n:"CodePage",t:g4},2:{n:"Category",t:ds},3:{n:"PresentationFormat",t:ds},4:{n:"ByteCount",t:ba},5:{n:"LineCount",t:ba},6:{n:"ParagraphCount",t:ba},7:{n:"SlideCount",t:ba},8:{n:"NoteCount",t:ba},9:{n:"HiddenCount",t:ba},10:{n:"MultimediaClipCount",t:ba},11:{n:"ScaleCrop",t:Jx},12:{n:"HeadingPairs",t:ZTe},13:{n:"TitlesOfParts",t:QTe},14:{n:"Manager",t:ds},15:{n:"Company",t:ds},16:{n:"LinksUpToDate",t:Jx},17:{n:"CharacterCount",t:ba},19:{n:"SharedDoc",t:Jx},22:{n:"HyperlinksChanged",t:Jx},23:{n:"AppVersion",t:ba,p:"version"},24:{n:"DigSig",t:XTe},26:{n:"ContentType",t:ds},27:{n:"ContentStatus",t:ds},28:{n:"Language",t:ds},29:{n:"Version",t:ds},255:{},2147483648:{n:"Locale",t:qv},2147483651:{n:"Behavior",t:qv},1919054434:{}},sk={1:{n:"CodePage",t:g4},2:{n:"Title",t:ds},3:{n:"Subject",t:ds},4:{n:"Author",t:ds},5:{n:"Keywords",t:ds},6:{n:"Comments",t:ds},7:{n:"Template",t:ds},8:{n:"LastAuthor",t:ds},9:{n:"RevNumber",t:ds},10:{n:"EditTime",t:Kx},11:{n:"LastPrinted",t:Kx},12:{n:"CreatedDate",t:Kx},13:{n:"ModifiedDate",t:Kx},14:{n:"PageCount",t:ba},15:{n:"WordCount",t:ba},16:{n:"CharCount",t:ba},17:{n:"Thumbnail",t:YTe},18:{n:"Application",t:ds},19:{n:"DocSecurity",t:ba},255:{},2147483648:{n:"Locale",t:qv},2147483651:{n:"Behavior",t:qv},1919054434:{}},_L={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},t5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function r5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var n5e=r5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),jd=Gr(n5e),Po={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},nz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ak={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Xx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function y4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function s5e(e){var t=y4();if(!e||!e.match)return t;var r={};if((e.match(ta)||[]).forEach(function(s){var a=nr(s);switch(a[0].replace(hTe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[ak[a.ContentType]]!==void 0&&t[ak[a.ContentType]].push(a.PartName);break}}),t.xmlns!==ts.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function sz(e,t){var r=sTe(ak),s=[],a;s[s.length]=Mn,s[s.length]=kt("Types",null,{xmlns:ts.CT,"xmlns:xsd":ts.xsd,"xmlns:xsi":ts.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],s[s.length]=kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Xx[c][t.bookType]||Xx[c].xlsx}))},l=function(c){(e[c]||[]).forEach(function(d){s[s.length]=kt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Xx[c][t.bookType]||Xx[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(d){s[s.length]=kt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var hr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function lp(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function H0(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var s={};return(e.match(ta)||[]).forEach(function(a){var i=nr(a);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:v0(i.Target,t);r[o]=l,s[i.Id]=l}}),r["!id"]=s,r}function jf(e){var t=[Mn,kt("Relationships",null,{xmlns:ts.RELS})];return Rn(e["!id"]).forEach(function(r){t[t.length]=kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ir(e,t,r,s,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=s,a.Target=r,[hr.HLINK,hr.XPATH,hr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var a5e="application/vnd.oasis.opendocument.spreadsheet";function i5e(e,t){for(var r=s4(e),s,a;s=ip.exec(r);)switch(s[3]){case"manifest":break;case"file-entry":if(a=nr(s[0],!1),a.path=="/"&&a.type!==a5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw s}}function l5e(e){var t=[Mn];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function wL(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function o5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function c5e(e){var t=[Mn];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(wL(e[r][0],e[r][1])),t.push(o5e("",e[r][0]));return t.push(wL("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function az(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+tp.version+"</meta:generator></office:meta></office:document-meta>"}var wi=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],d5e=function(){for(var e=new Array(wi.length),t=0;t<wi.length;++t){var r=wi[t],s="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+s+"[^>]*>([\\s\\S]*?)</"+s+">")}return e}();function iz(e){var t={};e=zr(e);for(var r=0;r<wi.length;++r){var s=wi[r],a=e.match(d5e[r]);a!=null&&a.length>0&&(t[s[1]]=kr(a[1])),s[2]==="date"&&t[s[1]]&&(t[s[1]]=fn(t[s[1]]))}return t}function j_(e,t,r,s,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Fr(t),s[s.length]=r?kt(e,t,r):As(e,t))}function lz(e,t){var r=t||{},s=[Mn,kt("cp:coreProperties",null,{"xmlns:cp":ts.CORE_PROPS,"xmlns:dc":ts.dc,"xmlns:dcterms":ts.dcterms,"xmlns:dcmitype":ts.dcmitype,"xmlns:xsi":ts.xsi})],a={};if(!e&&!r.Props)return s.join("");e&&(e.CreatedDate!=null&&j_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:tk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,a),e.ModifiedDate!=null&&j_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:tk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,a));for(var i=0;i!=wi.length;++i){var l=wi[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&j_(l[0],o,null,s,a)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var _d=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],oz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function cz(e,t,r,s){var a=[];if(typeof e=="string")a=mL(e,s);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(u){return{v:u}}));var l=typeof t=="string"?mL(t,s).map(function(u){return u.v}):t,o=0,c=0;if(l.length>0)for(var d=0;d!==a.length;d+=2){switch(c=+a[d+1].v,a[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function u5e(e,t,r){var s={};return t||(t={}),e=zr(e),_d.forEach(function(a){var i=(e.match(sp(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=kr(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));l&&l.length>0&&(s[a[1]]=l[1]);break}}),s.HeadingPairs&&s.TitlesOfParts&&cz(s.HeadingPairs,s.TitlesOfParts,t,r),t}function dz(e){var t=[],r=kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Mn,t[t.length]=kt("Properties",null,{xmlns:ts.EXT_PROPS,"xmlns:vt":ts.vt}),_d.forEach(function(s){if(e[s[1]]!==void 0){var a;switch(s[2]){case"string":a=Fr(String(e[s[1]]));break;case"bool":a=e[s[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(s[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(s){return"<vt:lpstr>"+Fr(s)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var f5e=/<[^>]+>[^<]*/g;function m5e(e,t){var r={},s="",a=e.match(f5e);if(a)for(var i=0;i!=a.length;++i){var l=a[i],o=nr(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":s=kr(o.name);break;case"</property>":s=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[s]=kr(u);break;case"bool":r[s]=on(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[s]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[s]=parseFloat(u);break;case"filetime":case"date":r[s]=fn(u);break;case"cy":case"error":r[s]=kr(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function uz(e){var t=[Mn,kt("Properties",null,{xmlns:ts.CUST_PROPS,"xmlns:vt":ts.vt})];if(!e)return t.join("");var r=1;return Rn(e).forEach(function(a){++r,t[t.length]=kt("property",_Te(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Fr(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ik={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},__;function h5e(e,t,r){__||(__=R1(ik)),t=__[t]||t,e[t]=r}function p5e(e,t){var r=[];return Rn(ik).map(function(s){for(var a=0;a<wi.length;++a)if(wi[a][1]==s)return wi[a];for(a=0;a<_d.length;++a)if(_d[a][1]==s)return _d[a];throw s}).forEach(function(s){if(e[s[1]]!=null){var a=t&&t.Props&&t.Props[s[1]]!=null?t.Props[s[1]]:e[s[1]];switch(s[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(As(ik[s[1]]||s[1],a))}}),kt("DocumentProperties",r.join(""),{xmlns:Ma.o})}function x5e(e,t){var r=["Worksheets","SheetNames"],s="CustomDocumentProperties",a=[];return e&&Rn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<wi.length;++l)if(i==wi[l][1])return;for(l=0;l<_d.length;++l)if(i==_d[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(kt(cL(i),o,{"dt:dt":c}))}}),t&&Rn(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),a.push(kt(cL(i),l,{"dt:dt":o}))}}),"<"+s+' xmlns="'+Ma.o+'">'+a.join("")+"</"+s+">"}function v4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function g5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,s=r%Math.pow(2,32),a=(r-s)/Math.pow(2,32);s*=1e7,a*=1e7;var i=s/Math.pow(2,32)|0;i>0&&(s=s%Math.pow(2,32),a+=i);var l=it(8);return l.write_shift(4,s),l.write_shift(4,a),l}function fz(e,t,r){var s=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-s&3;)++e.l;return a}function mz(e,t,r){var s=e.read_shift(0,"lpwstr");return s}function hz(e,t,r){return t===31?mz(e):fz(e,t,r)}function lk(e,t,r){return hz(e,t,r===!1?0:4)}function y5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return hz(e,t,0)}function v5e(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s){var a=e.l;r[s]=e.read_shift(0,"lpwstr").replace(Xs,""),e.l-a&2&&(e.l+=2)}return r}function b5e(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s)r[s]=e.read_shift(0,"lpstr-cp").replace(Xs,"");return r}function j5e(e){var t=e.l,r=Gv(e,rz);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var s=Gv(e,ba);return[r,s]}function _5e(e){for(var t=e.read_shift(4),r=[],s=0;s<t/2;++s)r.push(j5e(e));return r}function NL(e,t){for(var r=e.read_shift(4),s={},a=0;a!=r;++a){var i=e.read_shift(4),l=e.read_shift(4);s[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(Xs,"").replace(y0,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),s}function pz(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function w5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Gv(e,t,r){var s=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==jL&&s!==t&&e5e.indexOf(t)===-1&&!((t&65534)==4126&&(s&65534)==4126))throw new Error("Expected type "+t+" saw "+s);switch(t===jL?s:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return fz(e,s,4).replace(Xs,"");case 31:return mz(e);case 64:return v4(e);case 65:return pz(e);case 71:return w5e(e);case 80:return lk(e,s,!i.raw).replace(Xs,"");case 81:return y5e(e,s).replace(Xs,"");case 4108:return _5e(e);case 4126:case 4127:return s==4127?v5e(e):b5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function kL(e,t){var r=it(4),s=it(4);switch(r.write_shift(4,e==80?31:e),e){case 3:s.write_shift(-4,t);break;case 5:s=it(8),s.write_shift(8,t,"f");break;case 11:s.write_shift(4,t?1:0);break;case 64:s=g5e(t);break;case 31:case 80:for(s=it(4+2*(t.length+1)+(t.length%2?0:2)),s.write_shift(4,t.length+1),s.write_shift(0,t,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return hs([r,s])}function SL(e,t){var r=e.l,s=e.read_shift(4),a=e.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=a;++l){var u=e.read_shift(4),f=e.read_shift(4);i[l]=[u,f+r]}i.sort(function(b,j){return b[1]-j[1]});var m={};for(l=0;l!=a;++l){if(e.l!==i[l][1]){var g=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(g=!1,e.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var x=t[i[l][0]];if(m[x.n]=Gv(e,x.t,{raw:!0}),x.p==="version"&&(m[x.n]=String(m[x.n]>>16)+"."+("0000"+String(m[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(m[x.n]){case 0:m[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ji(o=m[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[x.n])}}else if(i[l][0]===1){if(o=m.CodePage=Gv(e,g4),ji(o),c!==-1){var h=e.l;e.l=i[c][1],d=NL(e,o),e.l=h}}else if(i[l][0]===0){if(o===0){c=l,e.l=i[l+1][1];continue}d=NL(e,o)}else{var p=d[i[l][0]],v;switch(e[e.l]){case 65:e.l+=4,v=pz(e);break;case 30:e.l+=4,v=lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,v=lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=Ln(e,4);break;case 64:e.l+=4,v=fn(v4(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[p]=v}}return e.l=r+s,m}var xz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function N5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function CL(e,t,r){var s=it(8),a=[],i=[],l=8,o=0,c=it(8),d=it(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),a.push(d),l+=8+c.length,!t){d=it(8),d.write_shift(4,0),a.unshift(d);var u=[it(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=it(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=hs(u),i.unshift(c),l+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(xz.indexOf(e[o][0])>-1||oz.indexOf(e[o][0])>-1)&&e[o][1]!=null){var m=e[o][1],g=0;if(t){g=+t[e[o][0]];var x=r[g];if(x.p=="version"&&typeof m=="string"){var h=m.split(".");m=(+h[0]<<16)+(+h[1]||0)}c=kL(x.t,m)}else{var p=N5e(m);p==-1&&(p=31,m=String(m)),c=kL(p,m)}i.push(c),d=it(8),d.write_shift(4,t?g:2+o),a.push(d),l+=8+c.length}var v=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,v),v+=i[o].length;return s.write_shift(4,l),s.write_shift(4,i.length),hs([s].concat(a).concat(i))}function AL(e,t,r){var s=e.content;if(!s)return{};Ss(s,0);var a,i,l,o,c=0;s.chk("feff","Byte Order: "),s.read_shift(2);var d=s.read_shift(4),u=s.read_shift(16);if(u!==Gt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(a=s.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=s.read_shift(16),o=s.read_shift(4),a===1&&o!==s.l)throw new Error("Length mismatch: "+o+" !== "+s.l);a===2&&(l=s.read_shift(16),c=s.read_shift(4));var f=SL(s,t),m={SystemIdentifier:d};for(var g in f)m[g]=f[g];if(m.FMTID=i,a===1)return m;if(c-s.l==2&&(s.l+=2),s.l!==c)throw new Error("Length mismatch 2: "+s.l+" !== "+c);var x;try{x=SL(s,null)}catch{}for(g in x)m[g]=x[g];return m.FMTID=[i,l],m}function EL(e,t,r,s,a,i){var l=it(a?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,Gt.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,a?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,a?68:48);var c=CL(e,r,s);if(o.push(c),a){var d=CL(a,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+c.length),o.push(d)}return hs(o)}function $o(e,t){return e.read_shift(t),null}function k5e(e,t){t||(t=it(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function S5e(e,t,r){for(var s=[],a=e.l+t;e.l<a;)s.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return s}function Ln(e,t){return e.read_shift(t)===1}function aa(e,t){return t||(t=it(2)),t.write_shift(2,+!!e),t}function Hn(e){return e.read_shift(2,"u")}function fi(e,t){return t||(t=it(2)),t.write_shift(2,e),t}function gz(e,t){return S5e(e,t,Hn)}function C5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function yz(e,t,r){return r||(r=it(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function qp(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",i=Ka;if(r&&r.biff>=8&&(Ka=1200),!r||r.biff==8){var l=e.read_shift(1);l&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=s?e.read_shift(s,a):"";return Ka=i,o}function A5e(e){var t=Ka;Ka=1200;var r=e.read_shift(2),s=e.read_shift(1),a=s&4,i=s&8,l=1+(s&1),o=0,c,d={};i&&(o=e.read_shift(2)),a&&(c=e.read_shift(4));var u=l==2?"dbcs-cont":"sbcs-cont",f=r===0?"":e.read_shift(r,u);return i&&(e.l+=4*o),a&&(e.l+=c),d.t=f,i||(d.raw="<t>"+d.t+"</t>",d.r=d.t),Ka=t,d}function E5e(e){var t=e.t||"",r=it(3);r.write_shift(2,t.length),r.write_shift(1,1);var s=it(2*t.length);s.write_shift(2*t.length,t,"utf16le");var a=[r,s];return hs(a)}function Gd(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function Gp(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):Gd(e,s,r)}function mu(e,t,r){if(r.biff>5)return Gp(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function vz(e,t,r){return r||(r=it(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function T5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function P5e(e){var t=e.read_shift(4),r=e.l,s=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(s=!0),e.l=r);var a=e.read_shift((s?t-24:t)>>1,"utf16le").replace(Xs,"");return s&&(e.l+=24),a}function O5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var s=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+s.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(Xs,"");return r+l}function R5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return P5e(e);case"0303000000000000c000000000000046":return O5e(e);default:throw new Error("Unsupported Moniker "+r)}}function Yx(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Xs,""):"";return r}function TL(e,t){t||(t=it(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function L5e(e,t){var r=e.l+t,s=e.read_shift(4);if(s!==2)throw new Error("Unrecognized streamVersion: "+s);var a=e.read_shift(2);e.l+=2;var i,l,o,c,d="",u,f;a&16&&(i=Yx(e,r-e.l)),a&128&&(l=Yx(e,r-e.l)),(a&257)===257&&(o=Yx(e,r-e.l)),(a&257)===1&&(c=R5e(e,r-e.l)),a&8&&(d=Yx(e,r-e.l)),a&32&&(u=e.read_shift(16)),a&64&&(f=v4(e)),e.l=r;var m=l||o||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return u&&(g.guid=u),f&&(g.time=f),i&&(g.Tooltip=i),g}function I5e(e){var t=it(512),r=0,s=e.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var a=s.indexOf("#"),i=a>-1?31:23;switch(s.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(i==28)s=s.slice(1),TL(s,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=a>-1?s.slice(0,a):s;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&TL(a>-1?s.slice(a+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var c=0;s.slice(c*3,c*3+3)=="../"||s.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,s.length-3*c+1),r=0;r<s.length-3*c;++r)t.write_shift(1,s.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function bz(e){var t=e.read_shift(1),r=e.read_shift(1),s=e.read_shift(1),a=e.read_shift(1);return[t,r,s,a]}function jz(e,t){var r=bz(e);return r[3]=0,r}function Ul(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return{r:t,c:r,ixfe:s}}function Jd(e,t,r,s){return s||(s=it(6)),s.write_shift(2,e),s.write_shift(2,t),s.write_shift(2,r||0),s}function F5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function D5e(e,t,r){return t===0?"":mu(e,t,r)}function $5e(e,t,r){var s=r.biff>8?4:2,a=e.read_shift(s),i=e.read_shift(s,"i"),l=e.read_shift(s,"i");return[a,i,l]}function _z(e){var t=e.read_shift(2),r=x4(e);return[t,r]}function M5e(e,t,r){e.l+=4,t-=4;var s=e.l+t,a=qp(e,t,r),i=e.read_shift(2);if(s-=e.l,i!==s)throw new Error("Malformed AddinUdf: padding = "+s+" != "+i);return e.l+=i,a}function D1(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);return{s:{c:s,r:t},e:{c:a,r}}}function wz(e,t){return t||(t=it(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Nz(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1);return{s:{c:s,r:t},e:{c:a,r}}}var B5e=Nz;function kz(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return e.l+=12,[r,t,s]}function U5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function z5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Fs(e){e.l+=2,e.l+=e.read_shift(2)}var W5e={0:Fs,4:Fs,5:Fs,6:Fs,7:z5e,8:Fs,9:Fs,10:Fs,11:Fs,12:Fs,13:U5e,14:Fs,15:Fs,16:Fs,17:Fs,18:Fs,19:Fs,20:Fs,21:kz};function V5e(e,t){for(var r=e.l+t,s=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{s.push(W5e[a](e,r-e.l))}catch{return e.l=r,s}}return e.l!=r&&(e.l=r),s}function Zx(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function b4(e,t,r){var s=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":s=1280,a=8;break;case"biff4":s=4,a=6;break;case"biff3":s=3,a=6;break;case"biff2":s=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=it(a);return i.write_shift(2,s),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function H5e(e,t){return t===0||e.read_shift(2),1200}function q5e(e,t,r){if(r.enc)return e.l+=t,"";var s=e.l,a=mu(e,0,r);return e.read_shift(t+s-e.l),a}function G5e(e,t){var r=!t||t.biff==8,s=it(r?112:54);for(s.write_shift(t.biff==8?2:1,7),r&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(r?0:536870912));s.l<s.length;)s.write_shift(1,r?0:32);return s}function J5e(e,t,r){var s=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:s&16,fBelow:s&64,fRight:s&128}}function K5e(e,t,r){var s=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=qp(e,0,r);return l.length===0&&(l="Sheet1"),{pos:s,hs:a,dt:i,name:l}}function X5e(e,t){var r=!t||t.biff>=8?2:1,s=it(8+r*e.name.length);s.write_shift(4,e.pos),s.write_shift(1,e.hs||0),s.write_shift(1,e.dt),s.write_shift(1,e.name.length),t.biff>=8&&s.write_shift(1,1),s.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=s.slice(0,s.l);return a.l=s.l,a}function Y5e(e,t){for(var r=e.l+t,s=e.read_shift(4),a=e.read_shift(4),i=[],l=0;l!=a&&e.l<r;++l)i.push(A5e(e));return i.Count=s,i.Unique=a,i}function Z5e(e,t){var r=it(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var s=[],a=0;a<e.length;++a)s[a]=E5e(e[a]);var i=hs([r].concat(s));return i.parts=[r.length].concat(s.map(function(l){return l.length})),i}function Q5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function e6e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var s=e.read_shift(1);return e.l+=3,s&7&&(t.level=s&7),s&32&&(t.hidden=!0),s&64&&(t.hpt=r/20),t}function t6e(e){var t=F5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function r6e(e){return e.read_shift(2),e.read_shift(4)}function PL(e,t,r){var s=0;r&&r.biff==2||(s=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(s=1-(a>>15),a&=32767);var i={Unsynced:s&1,DyZero:(s&2)>>1,ExAsc:(s&4)>>2,ExDsc:(s&8)>>3};return[i,a]}function n6e(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[s,a],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function s6e(){var e=it(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function a6e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var s=e.read_shift(2);return{RTL:s&64}}function i6e(e){var t=it(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function l6e(){}function o6e(e,t,r){var s={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return s.name=qp(e,0,r),s}function c6e(e,t){var r=e.name||"Arial",s=t&&t.biff==5,a=s?15+r.length:16+2*r.length,i=it(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),s||i.write_shift(1,1),i.write_shift((s?1:2)*r.length,r,s?"sbcs":"utf16le"),i}function d6e(e){var t=Ul(e);return t.isst=e.read_shift(4),t}function u6e(e,t,r,s){var a=it(10);return Jd(e,t,s,a),a.write_shift(4,r),a}function f6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=e.l+t,a=Ul(e);r.biff==2&&e.l++;var i=Gp(e,s-e.l,r);return a.val=i,a}function m6e(e,t,r,s,a){var i=!a||a.biff==8,l=it(8+ +i+(1+i)*r.length);return Jd(e,t,s,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function h6e(e,t,r){var s=e.read_shift(2),a=mu(e,0,r);return[s,a]}function p6e(e,t,r,s){var a=r&&r.biff==5;s||(s=it(a?3+t.length:5+2*t.length)),s.write_shift(2,e),s.write_shift(a?1:2,t.length),a||s.write_shift(1,1),s.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=s.length>s.l?s.slice(0,s.l):s;return i.l==null&&(i.l=i.length),i}var x6e=mu;function OL(e,t,r){var s=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=s,{s:{r:i,c:o},e:{r:l,c}}}function g6e(e,t){var r=t.biff==8||!t.biff?4:2,s=it(2*r+6);return s.write_shift(r,e.s.r),s.write_shift(r,e.e.r+1),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c+1),s.write_shift(2,0),s}function y6e(e){var t=e.read_shift(2),r=e.read_shift(2),s=_z(e);return{r:t,c:r,ixfe:s[0],rknum:s[1]}}function v6e(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(_z(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulRK length mismatch");return{r:s,c:a,C:l,rkrec:i}}function b6e(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulBlank length mismatch");return{r:s,c:a,C:l,ixfe:i}}function j6e(e,t,r,s){var a={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=t5e[o>>26],s.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=l&15,a.dgRight=l>>4&15,a.dgTop=l>>8&15,a.dgBottom=l>>12&15,a.icvLeft=l>>16&127,a.icvRight=l>>23&127,a.grbitDiag=l>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function _6e(e,t,r){var s={};return s.ifnt=e.read_shift(2),s.numFmtId=e.read_shift(2),s.flags=e.read_shift(2),s.fStyle=s.flags>>2&1,t-=6,s.data=j6e(e,t,s.fStyle,r),s}function RL(e,t,r,s){var a=r&&r.biff==5;s||(s=it(a?16:20)),s.write_shift(2,0),e.style?(s.write_shift(2,e.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,e.numFmtId||0),s.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),s.write_shift(4,i),s.write_shift(4,0),a||s.write_shift(4,0),s.write_shift(2,0),s}function w6e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function N6e(e){var t=it(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function LL(e,t,r){var s=Ul(e);(r.biff==2||t==9)&&++e.l;var a=C5e(e);return s.val=a,s.t=a===!0||a===!1?"b":"e",s}function k6e(e,t,r,s,a,i){var l=it(8);return Jd(e,t,s,l),yz(r,i,l),l}function S6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=Ul(e),a=Gs(e);return s.val=a,s}function C6e(e,t,r,s){var a=it(14);return Jd(e,t,s,a),qd(r,a),a}var IL=D5e;function A6e(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=Gd(e,i),o=[];s>e.l;)o.push(Gp(e));return[i,a,l,o]}function FL(e,t,r){var s=e.read_shift(2),a,i={fBuiltIn:s&1,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return r.sbcch===14849&&(a=M5e(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var E6e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function DL(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Gd(e,l,r);a&32&&(d=E6e[d.charCodeAt(0)]);var u=s-e.l;r&&r.biff==2&&--u;var f=s==e.l||o===0||!(u>0)?[]:VLe(e,u,r,o);return{chKey:i,Name:d,itab:c,rgce:f}}function Sz(e,t,r){if(r.biff<8)return T6e(e,t,r);for(var s=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)s.push($5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return s}function T6e(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=qp(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function P6e(e,t,r){if(r.biff<8){e.l+=t;return}var s=e.read_shift(2),a=e.read_shift(2),i=Gd(e,s,r),l=Gd(e,a,r);return[i,l]}function O6e(e,t,r){var s=Nz(e);e.l++;var a=e.read_shift(1);return t-=8,[HLe(e,t,r),a,s]}function $L(e,t,r){var s=B5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[s,zLe(e,t,r)]}function R6e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,s=e.read_shift(4);return[t,r,s]}function L6e(e,t,r){if(!(r.biff<8)){var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=mu(e,0,r);return r.biff<8&&e.read_shift(1),[{r:s,c:a},o,l,i]}}function I6e(e,t,r){return L6e(e,t,r)}function F6e(e,t){for(var r=[],s=e.read_shift(2);s--;)r.push(D1(e));return r}function D6e(e){var t=it(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)wz(e[r],t);return t}function $6e(e,t,r){if(r&&r.biff<8)return B6e(e,t,r);var s=kz(e),a=V5e(e,t-22,s[1]);return{cmo:s,ft:a}}var M6e={8:function(e,t){var r=e.l+t;e.l+=10;var s=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:s}}};function B6e(e,t,r){e.l+=4;var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((M6e[s]||Qs)(e,t,r)),{cmo:[a,s,i],ft:l}}function U6e(e,t,r){var s=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=T5e(e,6,r);var o=e.read_shift(2);e.read_shift(2),Hn(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-s!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=Gd(e,e.lens[d+1]-e.lens[d]-1);if(a+=f,a.length>=(u?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=s+t,{t:a}}catch{return e.l=s+t,{t:a}}}function z6e(e,t){var r=D1(e);e.l+=16;var s=L5e(e,t-24);return[r,s]}function W6e(e){var t=it(24),r=_n(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(s[a],16));return hs([t,I5e(e[1])])}function V6e(e,t){e.read_shift(2);var r=D1(e),s=e.read_shift((t-10)/2,"dbcs-cont");return s=s.replace(Xs,""),[r,s]}function H6e(e){var t=e[1].Tooltip,r=it(10+2*(t.length+1));r.write_shift(2,2048);var s=_n(e[0]);r.write_shift(2,s.r),r.write_shift(2,s.r),r.write_shift(2,s.c),r.write_shift(2,s.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function q6e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=_L[r]||r,r=e.read_shift(2),t[1]=_L[r]||r,t}function G6e(e){return e||(e=it(4)),e.write_shift(2,1),e.write_shift(2,1),e}function J6e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(jz(e));return r}function K6e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(jz(e));return r}function X6e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Cz(e,t,r){if(!r.cellStyles)return Qs(e,t);var s=r&&r.biff>=12?4:2,a=e.read_shift(s),i=e.read_shift(s),l=e.read_shift(s),o=e.read_shift(s),c=e.read_shift(2);s==2&&(e.l+=2);var d={s:a,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Y6e(e,t){var r=it(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var s=0;return e.hidden&&(s|=1),r.write_shift(1,s),s=e.level||0,r.write_shift(1,s),r.write_shift(2,0),r}function Z6e(e,t){var r={};return t<32||(e.l+=16,r.header=Gs(e),r.footer=Gs(e),e.l+=2),r}function Q6e(e,t,r){var s={area:!1};if(r.biff!=5)return e.l+=t,s;var a=e.read_shift(1);return e.l+=3,a&16&&(s.area=!0),s}function ePe(e){for(var t=it(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var tPe=Ul,rPe=gz,nPe=Gp;function sPe(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a={fmt:t,env:r,len:s,data:e.slice(e.l,e.l+s)};return e.l+=s,a}function aPe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var s=Ul(e);++e.l;var a=mu(e,t-7,r);return s.t="str",s.val=a,s}function iPe(e){var t=Ul(e);++e.l;var r=Gs(e);return t.t="n",t.val=r,t}function lPe(e,t,r){var s=it(15);return Yp(s,e,t),s.write_shift(8,r,"f"),s}function oPe(e){var t=Ul(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cPe(e,t,r){var s=it(9);return Yp(s,e,t),s.write_shift(2,r),s}function dPe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function uPe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function fPe(e,t,r){var s=e.l+t,a=Ul(e),i=e.read_shift(2),l=Gd(e,i,r);return e.l=s,a.t="str",a.val=l,a}var mPe=[2,3,48,49,131,139,140,245],ok=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=R1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=vc(1);switch(c.type){case"base64":u=za(Za(o));break;case"binary":u=za(o);break;case"buffer":case"array":u=o;break}Ss(u,0);var f=u.read_shift(1),m=!!(f&136),g=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var h=0,p=521;f==2&&(h=u.read_shift(2)),u.l+=3,f!=2&&(h=u.read_shift(4)),h>1048576&&(h=1e6),f!=2&&(p=u.read_shift(2));var v=u.read_shift(2),b=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(b=e[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var j=[],N={},w=Math.min(u.length,f==2?521:p-10-(g?264:0)),_=x?32:11;u.l<w&&u[u.l]!=13;)switch(N={},N.name=vr.utils.decode(b,u.slice(u.l,u.l+_)).replace(/[\u0000\r\n].*$/g,""),u.l+=_,N.type=String.fromCharCode(u.read_shift(1)),f!=2&&!x&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),f==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),f!=2&&(u.l+=x?13:14),N.type){case"B":(!g||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=p-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=p;var k=0,C=0;for(d[0]=[],C=0;C!=j.length;++C)d[0][C]=j[C].name;for(;h-- >0;){if(u[u.l]===42){u.l+=v;continue}for(++u.l,d[++k]=[],C=0,C=0;C!=j.length;++C){var T=u.slice(u.l,u.l+j[C].len);u.l+=j[C].len,Ss(T,0);var P=vr.utils.decode(b,T);switch(j[C].type){case"C":P.trim().length&&(d[k][C]=P.replace(/\s+$/,""));break;case"D":P.length===8?d[k][C]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):d[k][C]=P;break;case"F":d[k][C]=parseFloat(P.trim());break;case"+":case"I":d[k][C]=x?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":d[k][C]=!0;break;case"N":case"F":d[k][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[k][C]="##MEMO##"+(x?parseInt(P.trim(),10):T.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(d[k][C]=+P||0);break;case"@":d[k][C]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":d[k][C]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":d[k][C]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[k][C]=-T.read_shift(-8,"f");break;case"B":if(g&&j[C].len==8){d[k][C]=T.read_shift(8,"f");break}case"G":case"P":T.l+=j[C].len;break;case"0":if(j[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[C].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function s(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Fm(r(o,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function a(o,c){try{return Lc(s(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&ji(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Ta(),f=Yv(o,{header:1,raw:!0,cellDates:!0}),m=f[0],g=f.slice(1),x=o["!cols"]||[],h=0,p=0,v=0,b=1;for(h=0;h<m.length;++h){if(((x[h]||{}).DBF||{}).name){m[h]=x[h].DBF.name,++v;continue}if(m[h]!=null){if(++v,typeof m[h]=="number"&&(m[h]=m[h].toString(10)),typeof m[h]!="string")throw new Error("DBF Invalid column name "+m[h]+" |"+typeof m[h]+"|");if(m.indexOf(m[h])!==h){for(p=0;p<1024;++p)if(m.indexOf(m[h]+"_"+p)==-1){m[h]+="_"+p;break}}}}var j=gr(o["!ref"]),N=[],w=[],_=[];for(h=0;h<=j.e.c-j.s.c;++h){var k="",C="",T=0,P=[];for(p=0;p<g.length;++p)g[p][h]!=null&&P.push(g[p][h]);if(P.length==0||m[h]==null){N[h]="?";continue}for(p=0;p<P.length;++p){switch(typeof P[p]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=P[p]instanceof Date?"D":"C";break;default:C="C"}T=Math.max(T,String(P[p]).length),k=k&&k!=C?"C":C}T>250&&(T=250),C=((x[h]||{}).DBF||{}).type,C=="C"&&x[h].DBF.len>T&&(T=x[h].DBF.len),k=="B"&&C=="N"&&(k="N",_[h]=x[h].DBF.dec,T=x[h].DBF.len),w[h]=k=="C"||C=="N"?T:i[k]||0,b+=w[h],N[h]=k}var A=u.next(32);for(A.write_shift(4,318902576),A.write_shift(4,g.length),A.write_shift(2,296+32*v),A.write_shift(2,b),h=0;h<4;++h)A.write_shift(4,0);for(A.write_shift(4,0|(+t[Wd]||3)<<8),h=0,p=0;h<m.length;++h)if(m[h]!=null){var S=u.next(32),E=(m[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,E,"sbcs"),S.write_shift(1,N[h]=="?"?"C":N[h],"sbcs"),S.write_shift(4,p),S.write_shift(1,w[h]||i[N[h]]||0),S.write_shift(1,_[h]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),p+=w[h]||i[N[h]]||0}var O=u.next(264);for(O.write_shift(4,13),h=0;h<65;++h)O.write_shift(4,0);for(h=0;h<g.length;++h){var I=u.next(b);for(I.write_shift(1,0),p=0;p<m.length;++p)if(m[p]!=null)switch(N[p]){case"L":I.write_shift(1,g[h][p]==null?63:g[h][p]?84:70);break;case"B":I.write_shift(8,g[h][p]||0,"f");break;case"N":var L="0";for(typeof g[h][p]=="number"&&(L=g[h][p].toFixed(_[p]||0)),v=0;v<w[p]-L.length;++v)I.write_shift(1,32);I.write_shift(1,L,"sbcs");break;case"D":g[h][p]?(I.write_shift(4,("0000"+g[h][p].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(g[h][p].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+g[h][p].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(g[h][p]!=null?g[h][p]:"").slice(0,w[p]);for(I.write_shift(1,Z,"sbcs"),v=0;v<w[p]-Z.length;++v)I.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:a,to_sheet:s,from_sheet:l}}(),Az=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Rn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var x=e[g];return typeof x=="number"?ek(x):x},s=function(m,g,x){var h=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return h==59?m:ek(h)};e["|"]=254;function a(m,g){switch(g.type){case"base64":return i(Za(m),g);case"binary":return i(m,g);case"buffer":return i(mr&&Buffer.isBuffer(m)?m.toString("binary"):Rc(m),g);case"array":return i(Hd(m),g)}throw new Error("Unrecognized type "+g.type)}function i(m,g){var x=m.split(/[\n\r]+/),h=-1,p=-1,v=0,b=0,j=[],N=[],w=null,_={},k=[],C=[],T=[],P=0,A;for(+g.codepage>=0&&ji(+g.codepage);v!==x.length;++v){P=0;var S=x[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),E=S.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),O=E[0],I;if(S.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":E[1].charAt(0)=="P"&&N.push(S.slice(3).replace(/;;/g,";"));break;case"C":var L=!1,Z=!1,H=!1,R=!1,D=-1,Y=-1;for(b=1;b<E.length;++b)switch(E[b].charAt(0)){case"A":break;case"X":p=parseInt(E[b].slice(1))-1,Z=!0;break;case"Y":for(h=parseInt(E[b].slice(1))-1,Z||(p=0),A=j.length;A<=h;++A)j[A]=[];break;case"K":I=E[b].slice(1),I.charAt(0)==='"'?I=I.slice(1,I.length-1):I==="TRUE"?I=!0:I==="FALSE"?I=!1:isNaN(tl(I))?isNaN(cm(I).getDate())||(I=fn(I)):(I=tl(I),w!==null&&lu(w)&&(I=I1(I))),typeof vr<"u"&&typeof I=="string"&&(g||{}).type!="string"&&(g||{}).codepage&&(I=vr.utils.decode(g.codepage,I)),L=!0;break;case"E":R=!0;var M=_f(E[b].slice(1),{r:h,c:p});j[h][p]=[j[h][p],M];break;case"S":H=!0,j[h][p]=[j[h][p],"S5S"];break;case"G":break;case"R":D=parseInt(E[b].slice(1))-1;break;case"C":Y=parseInt(E[b].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+S)}if(L&&(j[h][p]&&j[h][p].length==2?j[h][p][0]=I:j[h][p]=I,w=null),H){if(R)throw new Error("SYLK shared formula cannot have own formula");var X=D>-1&&j[D][Y];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");j[h][p][1]=qz(X[1],{r:h-D,c:p-Y})}break;case"F":var ne=0;for(b=1;b<E.length;++b)switch(E[b].charAt(0)){case"X":p=parseInt(E[b].slice(1))-1,++ne;break;case"Y":for(h=parseInt(E[b].slice(1))-1,A=j.length;A<=h;++A)j[A]=[];break;case"M":P=parseInt(E[b].slice(1))/20;break;case"F":break;case"G":break;case"P":w=N[parseInt(E[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=E[b].slice(1).split(" "),A=parseInt(T[0],10);A<=parseInt(T[1],10);++A)P=parseInt(T[2],10),C[A-1]=P===0?{hidden:!0}:{wch:P},bc(C[A-1]);break;case"C":p=parseInt(E[b].slice(1))-1,C[p]||(C[p]={});break;case"R":h=parseInt(E[b].slice(1))-1,k[h]||(k[h]={}),P>0?(k[h].hpt=P,k[h].hpx=um(P)):P===0&&(k[h].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+S)}ne<1&&(w=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+S)}}return k.length>0&&(_["!rows"]=k),C.length>0&&(_["!cols"]=C),g&&g.sheetRows&&(j=j.slice(0,g.sheetRows)),[j,_]}function l(m,g){var x=a(m,g),h=x[0],p=x[1],v=Fm(h,g);return Rn(p).forEach(function(b){v[b]=p[b]}),v}function o(m,g){return Lc(l(m,g),g)}function c(m,g,x,h){var p="C;Y"+(x+1)+";X"+(h+1)+";K";switch(m.t){case"n":p+=m.v||0,m.f&&!m.F&&(p+=";E"+S4(m.f,{r:x,c:h}));break;case"b":p+=m.v?"TRUE":"FALSE";break;case"e":p+=m.w||m.v;break;case"d":p+='"'+(m.w||m.v)+'"';break;case"s":p+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return p}function d(m,g){g.forEach(function(x,h){var p="F;W"+(h+1)+" "+(h+1)+" ";x.hidden?p+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=cp(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=dp(x.wpx)),typeof x.wch=="number"&&(p+=Math.round(x.wch))),p.charAt(p.length-1)!=" "&&m.push(p)})}function u(m,g){g.forEach(function(x,h){var p="F;";x.hidden?p+="M0;":x.hpt?p+="M"+20*x.hpt+";":x.hpx&&(p+="M"+20*up(x.hpx)+";"),p.length>2&&m.push(p+"R"+(h+1))})}function f(m,g){var x=["ID;PWXL;N;E"],h=[],p=gr(m["!ref"]),v,b=Array.isArray(m),j=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),m["!cols"]&&d(x,m["!cols"]),m["!rows"]&&u(x,m["!rows"]),x.push("B;Y"+(p.e.r-p.s.r+1)+";X"+(p.e.c-p.s.c+1)+";D"+[p.s.c,p.s.r,p.e.c,p.e.r].join(" "));for(var N=p.s.r;N<=p.e.r;++N)for(var w=p.s.c;w<=p.e.c;++w){var _=tr({r:N,c:w});v=b?(m[N]||[])[w]:m[_],!(!v||v.v==null&&(!v.f||v.F))&&h.push(c(v,m,N,w))}return x.join(j)+j+h.join(j)+j+"E"+j}return{to_workbook:o,to_sheet:l,from_sheet:f}}(),Ez=function(){function e(i,l){switch(l.type){case"base64":return t(Za(i),l);case"binary":return t(i,l);case"buffer":return t(mr&&Buffer.isBuffer(i)?i.toString("binary"):Rc(i),l);case"array":return t(Hd(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==o.length;++u){if(o[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var m=o[u].trim().split(","),g=m[0],x=m[1];++u;for(var h=o[u]||"";(h.match(/["]/g)||[]).length&1&&u<o.length-1;)h+=`
`+o[++u];switch(h=h.trim(),+g){case-1:if(h==="BOT"){f[++c]=[],d=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?f[c][d]=!0:h==="FALSE"?f[c][d]=!1:isNaN(tl(x))?isNaN(cm(x).getDate())?f[c][d]=x:f[c][d]=fn(x):f[c][d]=tl(x),++d;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),f[c][d++]=h!==""?h:null;break}if(h==="EOD")break}}return l&&l.sheetRows&&(f=f.slice(0,l.sheetRows)),f}function r(i,l){return Fm(e(i,l),l)}function s(i,l){return Lc(r(i,l),l)}var a=function(){var i=function(c,d,u,f,m){c.push(d),c.push(u+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},l=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=gr(c["!ref"]),f,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){l(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var h=tr({r:g,c:x});if(f=m?(c[g]||[])[x]:c[h],!f){l(d,1,0,"");continue}switch(f.t){case"n":var p=f.w;!p&&f.v!=null&&(p=f.v),p==null?f.f&&!f.F?l(d,1,0,"="+f.f):l(d,1,0,""):l(d,0,p,"V");break;case"b":l(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Qa(f.z||Kt[14],ss(fn(f.v)))),l(d,0,f.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var v=`\r
`,b=d.join(v);return b}}();return{to_workbook:s,to_sheet:r,from_sheet:a}}(),Tz=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var g=f.split(`
`),x=-1,h=-1,p=0,v=[];p!==g.length;++p){var b=g[p].trim().split(":");if(b[0]==="cell"){var j=_n(b[1]);if(v.length<=j.r)for(x=v.length;x<=j.r;++x)v[x]||(v[x]=[]);switch(x=j.r,h=j.c,b[2]){case"t":v[x][h]=e(b[3]);break;case"v":v[x][h]=+b[3];break;case"vtf":var N=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[x][h]=!!+b[4];break;default:v[x][h]=+b[4];break}b[2]=="vtf"&&(v[x][h]=[v[x][h],N])}}}return m&&m.sheetRows&&(v=v.slice(0,m.sheetRows)),v}function s(f,m){return Fm(r(f,m),m)}function a(f,m){return Lc(s(f,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var m=[],g=[],x,h="",p=fa(f["!ref"]),v=Array.isArray(f),b=p.s.r;b<=p.e.r;++b)for(var j=p.s.c;j<=p.e.c;++j)if(h=tr({r:b,c:j}),x=v?(f[b]||[])[j]:f[h],!(!x||x.v==null||x.t==="z")){switch(g=["cell",h,"t"],x.t){case"s":case"str":g.push(t(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=t(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var N=ss(fn(x.v));g[2]="vtc",g[3]="nd",g[4]=""+N,g[5]=x.w||Qa(x.z||Kt[14],N);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(p.e.c-p.s.c+1)+":r:"+(p.e.r-p.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(f){return[i,l,o,l,d(f),c].join(`
`)}return{to_workbook:a,to_sheet:s,from_sheet:u}}(),dm=function(){function e(u,f,m,g,x){x.raw?f[m][g]=u:u===""||(u==="TRUE"?f[m][g]=!0:u==="FALSE"?f[m][g]=!1:isNaN(tl(u))?isNaN(cm(u).getDate())?f[m][g]=u:f[m][g]=fn(u):f[m][g]=tl(u))}function t(u,f){var m=f||{},g=[];if(!u||u.length===0)return g;for(var x=u.split(/[\r\n]/),h=x.length-1;h>=0&&x[h].length===0;)--h;for(var p=10,v=0,b=0;b<=h;++b)v=x[b].indexOf(" "),v==-1?v=x[b].length:v++,p=Math.max(p,v);for(b=0;b<=h;++b){g[b]=[];var j=0;for(e(x[b].slice(0,p).trim(),g,b,j,m),j=1;j<=(x[b].length-p)/10+1;++j)e(x[b].slice(p+(j-1)*10,p+j*10).trim(),g,b,j,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function a(u){for(var f={},m=!1,g=0,x=0;g<u.length;++g)(x=u.charCodeAt(g))==34?m=!m:!m&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g]);if(!x.length){f=s;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g])}return x.sort(function(h,p){return h[0]-p[0]||s[h[1]]-s[p[1]]}),r[x.pop()[1]]||44}function i(u,f){var m=f||{},g="",x=m.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=a(u.slice(0,1024)):m&&m.FS?g=m.FS:g=a(u.slice(0,1024));var p=0,v=0,b=0,j=0,N=0,w=g.charCodeAt(0),_=!1,k=0,C=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var T=m.dateNF!=null?Z3e(m.dateNF):null;function P(){var A=u.slice(j,N),S={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)S.t="z";else if(m.raw)S.t="s",S.v=A;else if(A.trim().length===0)S.t="s",S.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(S.t="s",S.v=A.slice(2,-1).replace(/""/g,'"')):ARe(A)?(S.t="n",S.f=A.slice(1)):(S.t="s",S.v=A);else if(A=="TRUE")S.t="b",S.v=!0;else if(A=="FALSE")S.t="b",S.v=!1;else if(!isNaN(b=tl(A)))S.t="n",m.cellText!==!1&&(S.w=A),S.v=b;else if(!isNaN(cm(A).getDate())||T&&A.match(T)){S.z=m.dateNF||Kt[14];var E=0;T&&A.match(T)&&(A=Q3e(A,m.dateNF,A.match(T)||[]),E=1),m.cellDates?(S.t="d",S.v=fn(A,E)):(S.t="n",S.v=ss(fn(A,E))),m.cellText!==!1&&(S.w=Qa(S.z,S.v instanceof Date?ss(S.v):S.v)),m.cellNF||delete S.z}else S.t="s",S.v=A;if(S.t=="z"||(m.dense?(x[p]||(x[p]=[]),x[p][v]=S):x[tr({c:v,r:p})]=S),j=N+1,C=u.charCodeAt(j),h.e.c<v&&(h.e.c=v),h.e.r<p&&(h.e.r=p),k==w)++v;else if(v=0,++p,m.sheetRows&&m.sheetRows<=p)return!0}e:for(;N<u.length;++N)switch(k=u.charCodeAt(N)){case 34:C===34&&(_=!_);break;case w:case 10:case 13:if(!_&&P())break e;break}return N-j>0&&P(),x["!ref"]=ur(h),x}function l(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):Fm(t(u,f),f)}function o(u,f){var m="",g=f.type=="string"?[0,0,0,0]:I4(u,f);switch(f.type){case"base64":m=Za(u);break;case"binary":m=u;break;case"buffer":f.codepage==65001?m=u.toString("utf8"):f.codepage&&typeof vr<"u"?m=vr.utils.decode(f.codepage,u):m=mr&&Buffer.isBuffer(u)?u.toString("binary"):Rc(u);break;case"array":m=Hd(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=zr(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=zr(m):f.type=="binary"&&typeof vr<"u"&&f.codepage&&(m=vr.utils.decode(f.codepage,vr.utils.encode(28591,m))),m.slice(0,19)=="socialcalc:version:"?Tz.to_sheet(f.type=="string"?m:zr(m),f):l(m,f)}function c(u,f){return Lc(o(u,f),f)}function d(u){for(var f=[],m=gr(u["!ref"]),g,x=Array.isArray(u),h=m.s.r;h<=m.e.r;++h){for(var p=[],v=m.s.c;v<=m.e.c;++v){var b=tr({r:h,c:v});if(g=x?(u[h]||[])[v]:u[b],!g||g.v==null){p.push("          ");continue}for(var j=(g.w||(Ll(g),g.w)||"").slice(0,10);j.length<10;)j+=" ";p.push(j+(v===0?" ":""))}f.push(p.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function hPe(e,t){var r=t||{},s=!!r.WTF;r.WTF=!0;try{var a=Az.to_workbook(e,r);return r.WTF=s,a}catch(i){if(r.WTF=s,!i.message.match(/SYLK bad record ID/)&&s)throw i;return dm.to_workbook(e,t)}}var wd=function(){function e(M,X,ne){if(M){Ss(M,M.l||0);for(var J=ne.Enum||D;M.l<M.length;){var ue=M.read_shift(2),ke=J[ue]||J[65535],ve=M.read_shift(2),je=M.l+ve,ie=ke.f&&ke.f(M,ve,ne);if(M.l=je,X(ie,ke,ue))return}}}function t(M,X){switch(X.type){case"base64":return r(za(Za(M)),X);case"binary":return r(za(M),X);case"buffer":case"array":return r(M,X)}throw"Unsupported type "+X.type}function r(M,X){if(!M)return M;var ne=X||{},J=ne.dense?[]:{},ue="Sheet1",ke="",ve=0,je={},ie=[],se=[],z={s:{r:0,c:0},e:{r:0,c:0}},Te=ne.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)ne.Enum=D,e(M,function(Ce,Ye,at){switch(at){case 0:ne.vers=Ce,Ce>=4096&&(ne.qpro=!0);break;case 6:z=Ce;break;case 204:Ce&&(ke=Ce);break;case 222:ke=Ce;break;case 15:case 51:ne.qpro||(Ce[1].v=Ce[1].v.slice(1));case 13:case 14:case 16:at==14&&(Ce[2]&112)==112&&(Ce[2]&15)>1&&(Ce[2]&15)<15&&(Ce[1].z=ne.dateNF||Kt[14],ne.cellDates&&(Ce[1].t="d",Ce[1].v=I1(Ce[1].v))),ne.qpro&&Ce[3]>ve&&(J["!ref"]=ur(z),je[ue]=J,ie.push(ue),J=ne.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ve=Ce[3],ue=ke||"Sheet"+(ve+1),ke="");var pe=ne.dense?(J[Ce[0].r]||[])[Ce[0].c]:J[tr(Ce[0])];if(pe){pe.t=Ce[1].t,pe.v=Ce[1].v,Ce[1].z!=null&&(pe.z=Ce[1].z),Ce[1].f!=null&&(pe.f=Ce[1].f);break}ne.dense?(J[Ce[0].r]||(J[Ce[0].r]=[]),J[Ce[0].r][Ce[0].c]=Ce[1]):J[tr(Ce[0])]=Ce[1];break}},ne);else if(M[2]==26||M[2]==14)ne.Enum=Y,M[2]==14&&(ne.qpro=!0,M.l=0),e(M,function(Ce,Ye,at){switch(at){case 204:ue=Ce;break;case 22:Ce[1].v=Ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ce[3]>ve&&(J["!ref"]=ur(z),je[ue]=J,ie.push(ue),J=ne.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ve=Ce[3],ue="Sheet"+(ve+1)),Te>0&&Ce[0].r>=Te)break;ne.dense?(J[Ce[0].r]||(J[Ce[0].r]=[]),J[Ce[0].r][Ce[0].c]=Ce[1]):J[tr(Ce[0])]=Ce[1],z.e.c<Ce[0].c&&(z.e.c=Ce[0].c),z.e.r<Ce[0].r&&(z.e.r=Ce[0].r);break;case 27:Ce[14e3]&&(se[Ce[14e3][0]]=Ce[14e3][1]);break;case 1537:se[Ce[0]]=Ce[1],Ce[0]==ve&&(ue=Ce[1]);break}},ne);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(J["!ref"]=ur(z),je[ke||ue]=J,ie.push(ke||ue),!se.length)return{SheetNames:ie,Sheets:je};for(var fe={},Ie=[],ce=0;ce<se.length;++ce)je[ie[ce]]?(Ie.push(se[ce]||ie[ce]),fe[se[ce]]=je[se[ce]]||je[ie[ce]]):(Ie.push(se[ce]),fe[se[ce]]={"!ref":"A1"});return{SheetNames:Ie,Sheets:fe}}function s(M,X){var ne=X||{};if(+ne.codepage>=0&&ji(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Ta(),ue=gr(M["!ref"]),ke=Array.isArray(M),ve=[];St(J,0,i(1030)),St(J,6,c(ue));for(var je=Math.min(ue.e.r,8191),ie=ue.s.r;ie<=je;++ie)for(var se=Pn(ie),z=ue.s.c;z<=ue.e.c;++z){ie===ue.s.r&&(ve[z]=un(z));var Te=ve[z]+se,fe=ke?(M[ie]||[])[z]:M[Te];if(!(!fe||fe.t=="z"))if(fe.t=="n")(fe.v|0)==fe.v&&fe.v>=-32768&&fe.v<=32767?St(J,13,g(ie,z,fe.v)):St(J,14,h(ie,z,fe.v));else{var Ie=Ll(fe);St(J,15,f(ie,z,Ie.slice(0,239)))}}return St(J,1),J.end()}function a(M,X){var ne=X||{};if(+ne.codepage>=0&&ji(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Ta();St(J,0,l(M));for(var ue=0,ke=0;ue<M.SheetNames.length;++ue)(M.Sheets[M.SheetNames[ue]]||{})["!ref"]&&St(J,27,R(M.SheetNames[ue],ke++));var ve=0;for(ue=0;ue<M.SheetNames.length;++ue){var je=M.Sheets[M.SheetNames[ue]];if(!(!je||!je["!ref"])){for(var ie=gr(je["!ref"]),se=Array.isArray(je),z=[],Te=Math.min(ie.e.r,8191),fe=ie.s.r;fe<=Te;++fe)for(var Ie=Pn(fe),ce=ie.s.c;ce<=ie.e.c;++ce){fe===ie.s.r&&(z[ce]=un(ce));var Ce=z[ce]+Ie,Ye=se?(je[fe]||[])[ce]:je[Ce];if(!(!Ye||Ye.t=="z"))if(Ye.t=="n")St(J,23,P(fe,ce,ve,Ye.v));else{var at=Ll(Ye);St(J,22,k(fe,ce,ve,at.slice(0,239)))}}++ve}}return St(J,1),J.end()}function i(M){var X=it(2);return X.write_shift(2,M),X}function l(M){var X=it(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var ne=0,J=0,ue=0,ke=0;ke<M.SheetNames.length;++ke){var ve=M.SheetNames[ke],je=M.Sheets[ve];if(!(!je||!je["!ref"])){++ue;var ie=fa(je["!ref"]);ne<ie.e.r&&(ne=ie.e.r),J<ie.e.c&&(J=ie.e.c)}}return ne>8191&&(ne=8191),X.write_shift(2,ne),X.write_shift(1,ue),X.write_shift(1,J),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function o(M,X,ne){var J={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&ne.qpro?(J.s.c=M.read_shift(1),M.l++,J.s.r=M.read_shift(2),J.e.c=M.read_shift(1),M.l++,J.e.r=M.read_shift(2),J):(J.s.c=M.read_shift(2),J.s.r=M.read_shift(2),X==12&&ne.qpro&&(M.l+=2),J.e.c=M.read_shift(2),J.e.r=M.read_shift(2),X==12&&ne.qpro&&(M.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(M){var X=it(8);return X.write_shift(2,M.s.c),X.write_shift(2,M.s.r),X.write_shift(2,M.e.c),X.write_shift(2,M.e.r),X}function d(M,X,ne){var J=[{c:0,r:0},{t:"n",v:0},0,0];return ne.qpro&&ne.vers!=20768?(J[0].c=M.read_shift(1),J[3]=M.read_shift(1),J[0].r=M.read_shift(2),M.l+=2):(J[2]=M.read_shift(1),J[0].c=M.read_shift(2),J[0].r=M.read_shift(2)),J}function u(M,X,ne){var J=M.l+X,ue=d(M,X,ne);if(ue[1].t="s",ne.vers==20768){M.l++;var ke=M.read_shift(1);return ue[1].v=M.read_shift(ke,"utf8"),ue}return ne.qpro&&M.l++,ue[1].v=M.read_shift(J-M.l,"cstr"),ue}function f(M,X,ne){var J=it(7+ne.length);J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,M),J.write_shift(1,39);for(var ue=0;ue<J.length;++ue){var ke=ne.charCodeAt(ue);J.write_shift(1,ke>=128?95:ke)}return J.write_shift(1,0),J}function m(M,X,ne){var J=d(M,X,ne);return J[1].v=M.read_shift(2,"i"),J}function g(M,X,ne){var J=it(7);return J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,M),J.write_shift(2,ne,"i"),J}function x(M,X,ne){var J=d(M,X,ne);return J[1].v=M.read_shift(8,"f"),J}function h(M,X,ne){var J=it(13);return J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,M),J.write_shift(8,ne,"f"),J}function p(M,X,ne){var J=M.l+X,ue=d(M,X,ne);if(ue[1].v=M.read_shift(8,"f"),ne.qpro)M.l=J;else{var ke=M.read_shift(2);N(M.slice(M.l,M.l+ke),ue),M.l+=ke}return ue}function v(M,X,ne){var J=X&32768;return X&=-32769,X=(J?M:0)+(X>=8192?X-16384:X),(J?"":"$")+(ne?un(X):Pn(X))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(M,X){Ss(M,0);for(var ne=[],J=0,ue="",ke="",ve="",je="";M.l<M.length;){var ie=M[M.l++];switch(ie){case 0:ne.push(M.read_shift(8,"f"));break;case 1:ke=v(X[0].c,M.read_shift(2),!0),ue=v(X[0].r,M.read_shift(2),!1),ne.push(ke+ue);break;case 2:{var se=v(X[0].c,M.read_shift(2),!0),z=v(X[0].r,M.read_shift(2),!1);ke=v(X[0].c,M.read_shift(2),!0),ue=v(X[0].r,M.read_shift(2),!1),ne.push(se+z+":"+ke+ue)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:ne.push("("+ne.pop()+")");break;case 5:ne.push(M.read_shift(2));break;case 6:{for(var Te="";ie=M[M.l++];)Te+=String.fromCharCode(ie);ne.push('"'+Te.replace(/"/g,'""')+'"')}break;case 8:ne.push("-"+ne.pop());break;case 23:ne.push("+"+ne.pop());break;case 22:ne.push("NOT("+ne.pop()+")");break;case 20:case 21:je=ne.pop(),ve=ne.pop(),ne.push(["AND","OR"][ie-20]+"("+ve+","+je+")");break;default:if(ie<32&&j[ie])je=ne.pop(),ve=ne.pop(),ne.push(ve+j[ie]+je);else if(b[ie]){if(J=b[ie][1],J==69&&(J=M[M.l++]),J>ne.length){console.error("WK1 bad formula parse 0x"+ie.toString(16)+":|"+ne.join("|")+"|");return}var fe=ne.slice(-J);ne.length-=J,ne.push(b[ie][0]+"("+fe.join(",")+")")}else return ie<=7?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=24?console.error("WK1 unsupported op "+ie.toString(16)):ie<=30?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=115?console.error("WK1 unsupported function opcode "+ie.toString(16)):console.error("WK1 unrecognized opcode "+ie.toString(16))}}ne.length==1?X[1].f=""+ne[0]:console.error("WK1 bad formula parse |"+ne.join("|")+"|")}function w(M){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=M.read_shift(2),X[3]=M[M.l++],X[0].c=M[M.l++],X}function _(M,X){var ne=w(M);return ne[1].t="s",ne[1].v=M.read_shift(X-4,"cstr"),ne}function k(M,X,ne,J){var ue=it(6+J.length);ue.write_shift(2,M),ue.write_shift(1,ne),ue.write_shift(1,X),ue.write_shift(1,39);for(var ke=0;ke<J.length;++ke){var ve=J.charCodeAt(ke);ue.write_shift(1,ve>=128?95:ve)}return ue.write_shift(1,0),ue}function C(M,X){var ne=w(M);ne[1].v=M.read_shift(2);var J=ne[1].v>>1;if(ne[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return ne[1].v=J,ne}function T(M,X){var ne=w(M),J=M.read_shift(4),ue=M.read_shift(4),ke=M.read_shift(2);if(ke==65535)return J===0&&ue===3221225472?(ne[1].t="e",ne[1].v=15):J===0&&ue===3489660928?(ne[1].t="e",ne[1].v=42):ne[1].v=0,ne;var ve=ke&32768;return ke=(ke&32767)-16446,ne[1].v=(1-ve*2)*(ue*Math.pow(2,ke+32)+J*Math.pow(2,ke)),ne}function P(M,X,ne,J){var ue=it(14);if(ue.write_shift(2,M),ue.write_shift(1,ne),ue.write_shift(1,X),J==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var ke=0,ve=0,je=0,ie=0;return J<0&&(ke=1,J=-J),ve=Math.log2(J)|0,J/=Math.pow(2,ve-31),ie=J>>>0,ie&2147483648||(J/=2,++ve,ie=J>>>0),J-=ie,ie|=2147483648,ie>>>=0,J*=Math.pow(2,32),je=J>>>0,ue.write_shift(4,je),ue.write_shift(4,ie),ve+=16383+(ke?32768:0),ue.write_shift(2,ve),ue}function A(M,X){var ne=T(M);return M.l+=X-14,ne}function S(M,X){var ne=w(M),J=M.read_shift(4);return ne[1].v=J>>6,ne}function E(M,X){var ne=w(M),J=M.read_shift(8,"f");return ne[1].v=J,ne}function O(M,X){var ne=E(M);return M.l+=X-10,ne}function I(M,X){return M[M.l+X-1]==0?M.read_shift(X,"cstr"):""}function L(M,X){var ne=M[M.l++];ne>X-1&&(ne=X-1);for(var J="";J.length<ne;)J+=String.fromCharCode(M[M.l++]);return J}function Z(M,X,ne){if(!(!ne.qpro||X<21)){var J=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ue=M.read_shift(X-21,"cstr");return[J,ue]}}function H(M,X){for(var ne={},J=M.l+X;M.l<J;){var ue=M.read_shift(2);if(ue==14e3){for(ne[ue]=[0,""],ne[ue][0]=M.read_shift(2);M[M.l];)ne[ue][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return ne}function R(M,X){var ne=it(5+M.length);ne.write_shift(2,14e3),ne.write_shift(2,X);for(var J=0;J<M.length;++J){var ue=M.charCodeAt(J);ne[ne.l++]=ue>127?95:ue}return ne[ne.l++]=0,ne}var D={0:{n:"BOF",f:Hn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:p},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:L},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:_},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:E},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:a,to_workbook:t}}();function pPe(e){var t={},r=e.match(ta),s=0,a=!1;if(r)for(;s!=r.length;++s){var i=nr(r[s]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=KC[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var xPe=function(){var e=sp("t"),t=sp("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:kr(l[1])},c=i.match(t);return c&&(o.s=pPe(c[1])),o}var s=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(l){return l.replace(s,"").split(a).map(r).filter(function(o){return o.v})}}(),gPe=function(){var t=/(\r\n|\n)/g;function r(a,i,l){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),a.b&&(i.push("<b>"),l.push("</b>")),a.i&&(i.push("<i>"),l.push("</i>")),a.strike&&(i.push("<s>"),l.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),a}function s(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(s).join("")}}(),yPe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,vPe=/<(?:\w+:)?r>/,bPe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function j4(e,t){var r=t?t.cellHTML:!0,s={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(s.t=kr(zr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),s.r=zr(e),r&&(s.h=n4(s.t))):e.match(vPe)&&(s.r=zr(e),s.t=kr(zr((e.replace(bPe,"").match(yPe)||[]).join("").replace(ta,""))),r&&(s.h=gPe(xPe(s.r)))),s):{t:""}}var jPe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_Pe=/<(?:\w+:)?(?:si|sstItem)>/g,wPe=/<\/(?:\w+:)?(?:si|sstItem)>/;function NPe(e,t){var r=[],s="";if(!e)return r;var a=e.match(jPe);if(a){s=a[2].replace(_Pe,"").split(wPe);for(var i=0;i!=s.length;++i){var l=j4(s[i].trim(),t);l!=null&&(r[r.length]=l)}a=nr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var kPe=/^\s|\s$|[\t\n\r]/;function Pz(e,t){if(!t.bookSST)return"";var r=[Mn];r[r.length]=kt("sst",null,{xmlns:ou[0],count:e.Count,uniqueCount:e.Unique});for(var s=0;s!=e.length;++s)if(e[s]!=null){var a=e[s],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(kPe)&&(i+=' xml:space="preserve"'),i+=">"+Fr(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function SPe(e){return[e.read_shift(4),e.read_shift(4)]}function CPe(e,t){var r=[],s=!1;return To(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:s=!0;break;case 36:s=!1;break;default:if(l.T,!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function APe(e,t){return t||(t=it(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var EPe=MTe;function TPe(e){var t=Ta();ft(t,159,APe(e));for(var r=0;r<e.length;++r)ft(t,19,EPe(e[r]));return ft(t,160),t.end()}function Oz(e){if(typeof vr<"u")return vr.utils.encode(Wd,e);for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function oo(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function PPe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=oo(e,4),t.U=oo(e,4),t.W=oo(e,4),t}function OPe(e){for(var t=e.read_shift(4),r=e.l+t-4,s={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(s.name=e.read_shift(0,"lpp4"),s.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return s}function RPe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(OPe(e));return t}function LPe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function IPe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=oo(e,4),t.U=oo(e,4),t.W=oo(e,4),t}function FPe(e){var t=IPe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Rz(e,t){var r=e.l+t,s={};s.Flags=e.read_shift(4)&63,e.l+=4,s.AlgID=e.read_shift(4);var a=!1;switch(s.AlgID){case 26126:case 26127:case 26128:a=s.Flags==36;break;case 26625:a=s.Flags==4;break;case 0:a=s.Flags==16||s.Flags==4||s.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+s.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return s.AlgIDHash=e.read_shift(4),s.KeySize=e.read_shift(4),s.ProviderType=e.read_shift(4),e.l+=8,s.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,s}function Lz(e,t){var r={},s=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,s),e.l=s,r}function DPe(e){var t=oo(e);switch(t.Minor){case 2:return[t.Minor,$Pe(e)];case 3:return[t.Minor,MPe()];case 4:return[t.Minor,BPe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function $Pe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),s=Rz(e,r),a=Lz(e,e.length-e.l);return{t:"Std",h:s,v:a}}function MPe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function BPe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),s={};return r.replace(ta,function(i){var l=nr(i);switch(Bl(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){s[o]=l[o]});break;case"<dataIntegrity":s.encryptedHmacKey=l.encryptedHmacKey,s.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":s.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":s.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":s.encs.push(l);break;default:throw l[0]}}),s}function UPe(e,t){var r={},s=r.EncryptionVersionInfo=oo(e,4);if(t-=4,s.Minor!=2)throw new Error("unrecognized minor version code: "+s.Minor);if(s.Major>4||s.Major<2)throw new Error("unrecognized major version code: "+s.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Rz(e,a),t-=a,r.EncryptionVerifier=Lz(e,t),r}function zPe(e){var t={},r=t.EncryptionVersionInfo=oo(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function _4(e){var t=0,r,s=Oz(e),a=s.length+1,i,l,o,c,d;for(r=vc(a),r[0]=s.length,i=1;i!=a;++i)r[i]=s[i-1];for(i=a-1;i>=0;--i)l=r[i],o=t&16384?1:0,c=t<<1&32767,d=o|c,t=d^l;return t^52811}var Iz=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],s=function(l){return(l/2|l*128)&255},a=function(l,o){return s(l^o)},i=function(l){for(var o=t[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],f=0;f!=7;++f)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=Oz(l),c=i(o),d=o.length,u=vc(16),f=0;f!=16;++f)u[f]=0;var m,g,x;for((d&1)===1&&(m=c>>8,u[d]=a(e[0],m),--d,m=c&255,g=o[o.length-1],u[d]=a(g,m));d>0;)--d,m=c>>8,u[d]=a(o[d],m),--d,m=c&255,u[d]=a(o[d],m);for(d=15,x=15-o.length;x>0;)m=c>>8,u[d]=a(e[x],m),--d,--x,m=c&255,u[d]=a(o[d],m),--d,--x;return u}}(),WPe=function(e,t,r,s,a){a||(a=t),s||(s=Iz(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=s[r],l=(l>>5|l<<3)&255,a[i]=l,++r;return[a,r,s]},VPe=function(e){var t=0,r=Iz(e);return function(s){var a=WPe("",s,t,r);return t=a[1],a[0]}};function HPe(e,t,r,s){var a={key:Hn(e),verificationBytes:Hn(e)};return r.password&&(a.verifier=_4(r.password)),s.valid=a.verificationBytes===a.verifier,s.valid&&(s.insitu=VPe(r.password)),a}function qPe(e,t,r){var s=r||{};return s.Info=e.read_shift(2),e.l-=2,s.Info===1?s.Data=zPe(e):s.Data=UPe(e,t),s}function GPe(e,t,r){var s={Type:r.biff>=8?e.read_shift(2):0};return s.Type?qPe(e,t-2,s):HPe(e,r.biff>=8?t:t-2,r,s),s}var Fz=function(){function e(a,i){switch(i.type){case"base64":return t(Za(a),i);case"binary":return t(a,i);case"buffer":return t(mr&&Buffer.isBuffer(a)?a.toString("binary"):Rc(a),i);case"array":return t(Hd(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var l=i||{},o=l.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(o)&&(o[f]=[]);for(var m=/\\\w+\b/g,g=0,x,h=-1;x=m.exec(u);){switch(x[0]){case"\\cell":var p=u.slice(g,m.lastIndex-x[0].length);if(p[0]==" "&&(p=p.slice(1)),++h,p.length){var v={v:p,t:"s"};Array.isArray(o)?o[f][h]=v:o[tr({r:f,c:h})]=v}break}g=m.lastIndex}h>d.e.c&&(d.e.c=h)}),o["!ref"]=ur(d),o}function r(a,i){return Lc(e(a,i),i)}function s(a){for(var i=["{\\rtf1\\ansi"],l=gr(a["!ref"]),o,c=Array.isArray(a),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var f=tr({r:d,c:u});o=c?(a[d]||[])[u]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Ll(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}}();function JPe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function op(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function KPe(e){var t=e[0]/255,r=e[1]/255,s=e[2]/255,a=Math.max(t,r,s),i=Math.min(t,r,s),l=a-i;if(l===0)return[0,0,t];var o=0,c=0,d=a+i;switch(c=l/(d>1?2-d:d),a){case t:o=((r-s)/l+6)%6;break;case r:o=(s-t)/l+2;break;case s:o=(t-r)/l+4;break}return[o/6,c,d/2]}function XPe(e){var t=e[0],r=e[1],s=e[2],a=r*2*(s<.5?s:1-s),i=s-a/2,l=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,l[0]+=a,l[1]+=c;break;case 1:c=a*(2-o),l[0]+=c,l[1]+=a;break;case 2:c=a*(o-2),l[1]+=a,l[2]+=c;break;case 3:c=a*(4-o),l[1]+=c,l[2]+=a;break;case 4:c=a*(o-4),l[2]+=a,l[0]+=c;break;case 5:c=a*(6-o),l[2]+=c,l[0]+=a;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function Jv(e,t){if(t===0)return e;var r=KPe(JPe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),op(XPe(r))}var Dz=6,YPe=15,ZPe=1,Hs=Dz;function cp(e){return Math.floor((e+Math.round(128/Hs)/256)*Hs)}function dp(e){return Math.floor((e-5)/Hs*100+.5)/100}function Kv(e){return Math.round((e*Hs+5)/Hs*256)/256}function w_(e){return Kv(dp(cp(e)))}function w4(e){var t=Math.abs(e-w_(e)),r=Hs;if(t>.005)for(Hs=ZPe;Hs<YPe;++Hs)Math.abs(e-w_(e))<=t&&(t=Math.abs(e-w_(e)),r=Hs);Hs=r}function bc(e){e.width?(e.wpx=cp(e.width),e.wch=dp(e.wpx),e.MDW=Hs):e.wpx?(e.wch=dp(e.wpx),e.width=Kv(e.wch),e.MDW=Hs):typeof e.wch=="number"&&(e.width=Kv(e.wch),e.wpx=cp(e.width),e.MDW=Hs),e.customWidth&&delete e.customWidth}var QPe=96,$z=QPe;function up(e){return e*96/$z}function um(e){return e*$z/96}var eOe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function tOe(e,t,r,s){t.Borders=[];var a={},i=!1;(e[0].match(ta)||[]).forEach(function(l){var o=nr(l);switch(Bl(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=on(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=on(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function rOe(e,t,r,s){t.Fills=[];var a={},i=!1;(e[0].match(ta)||[]).forEach(function(l){var o=nr(l);switch(Bl(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function nOe(e,t,r,s){t.Fonts=[];var a={},i=!1;(e[0].match(ta)||[]).forEach(function(l){var o=nr(l);switch(Bl(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=zr(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?on(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?on(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?on(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?on(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?on(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?on(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?on(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=KC[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=on(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=jd[a.color.index];a.color.index==81&&(c=jd[1]),c||(c=jd[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=Jv(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function sOe(e,t,r){t.NumberFmt=[];for(var s=Rn(Kt),a=0;a<s.length;++a)t.NumberFmt[s[a]]=Kt[s[a]];var i=e[0].match(ta);if(i)for(a=0;a<i.length;++a){var l=nr(i[a]);switch(Bl(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=kr(zr(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}Pl(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function aOe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&(t[t.length]=kt("numFmt",null,{numFmtId:s,formatCode:Fr(e[s])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Qx=["numFmtId","fillId","fontId","borderId","xfId"],eg=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function iOe(e,t,r){t.CellXf=[];var s,a=!1;(e[0].match(ta)||[]).forEach(function(i){var l=nr(i),o=0;switch(Bl(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(s=l,delete s[0],o=0;o<Qx.length;++o)s[Qx[o]]&&(s[Qx[o]]=parseInt(s[Qx[o]],10));for(o=0;o<eg.length;++o)s[eg[o]]&&(s[eg[o]]=on(s[eg[o]]));if(t.NumberFmt&&s.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[s.numFmtId]==t.NumberFmt[o]){s.numFmtId=o;break}}t.CellXf.push(s);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=on(l.wrapText)),s.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function lOe(e){var t=[];return t[t.length]=kt("cellXfs",null),e.forEach(function(r){t[t.length]=kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var oOe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,s=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&sOe(f,u,d),(f=o.match(a))&&nOe(f,u,c,d),(f=o.match(s))&&rOe(f,u,c,d),(f=o.match(i))&&tOe(f,u,c,d),(f=o.match(r))&&iOe(f,u,d),u}}();function Mz(e,t){var r=[Mn,kt("styleSheet",null,{xmlns:ou[0],"xmlns:vt":ts.vt})],s;return e.SSF&&(s=aOe(e.SSF))!=null&&(r[r.length]=s),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=lOe(t.cellXfs))&&(r[r.length]=s),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function cOe(e,t){var r=e.read_shift(2),s=Ys(e);return[r,s]}function dOe(e,t,r){r||(r=it(6+4*t.length)),r.write_shift(2,e),xs(t,r);var s=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),s}function uOe(e,t,r){var s={};s.sz=e.read_shift(2)/20;var a=qTe(e);a.fItalic&&(s.italic=1),a.fCondense&&(s.condense=1),a.fExtend&&(s.extend=1),a.fShadow&&(s.shadow=1),a.fOutline&&(s.outline=1),a.fStrikeout&&(s.strike=1);var i=e.read_shift(2);switch(i===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(s.underline=l);var o=e.read_shift(1);o>0&&(s.family=o);var c=e.read_shift(1);switch(c>0&&(s.charset=c),e.l++,s.color=HTe(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Ys(e),s}function fOe(e,t){t||(t=it(25+4*32)),t.write_shift(2,e.sz*20),GTe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Hv(e.color,t);var s=0;return s=2,t.write_shift(1,s),xs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var mOe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],N_,hOe=Qs;function ML(e,t){t||(t=it(4*3+8*7+16*1)),N_||(N_=R1(mOe));var r=N_[e.patternType];r==null&&(r=40),t.write_shift(4,r);var s=0;if(r!=40)for(Hv({auto:1},t),Hv({auto:1},t);s<12;++s)t.write_shift(4,0);else{for(;s<4;++s)t.write_shift(4,0);for(;s<12;++s)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function pOe(e,t){var r=e.l+t,s=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:a}}function Bz(e,t,r){r||(r=it(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var s=0;return r.write_shift(1,s),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function l0(e,t){return t||(t=it(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var xOe=Qs;function gOe(e,t){return t||(t=it(51)),t.write_shift(1,0),l0(null,t),l0(null,t),l0(null,t),l0(null,t),l0(null,t),t.length>t.l?t.slice(0,t.l):t}function yOe(e,t){return t||(t=it(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Vv(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function vOe(e,t,r){var s=it(2052);return s.write_shift(4,e),Vv(t,s),Vv(r,s),s.length>s.l?s.slice(0,s.l):s}function bOe(e,t,r){var s={};s.NumberFmt=[];for(var a in Kt)s.NumberFmt[a]=Kt[a];s.CellXf=[],s.Fonts=[];var i=[],l=!1;return To(e,function(c,d,u){switch(u){case 44:s.NumberFmt[c[0]]=c[1],Pl(c[1],c[0]);break;case 43:s.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Jv(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&s.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),s}function jOe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&++r}),r!=0&&(ft(e,615,rl(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&ft(e,44,dOe(a,t[a]))}),ft(e,616))}}function _Oe(e){var t=1;ft(e,611,rl(t)),ft(e,43,fOe({sz:12,color:{theme:1},name:"Calibri",family:2})),ft(e,612)}function wOe(e){var t=2;ft(e,603,rl(t)),ft(e,45,ML({patternType:"none"})),ft(e,45,ML({patternType:"gray125"})),ft(e,604)}function NOe(e){var t=1;ft(e,613,rl(t)),ft(e,46,gOe()),ft(e,614)}function kOe(e){var t=1;ft(e,626,rl(t)),ft(e,47,Bz({numFmtId:0},65535)),ft(e,627)}function SOe(e,t){ft(e,617,rl(t.length)),t.forEach(function(r){ft(e,47,Bz(r,0))}),ft(e,618)}function COe(e){var t=1;ft(e,619,rl(t)),ft(e,48,yOe({xfId:0,name:"Normal"})),ft(e,620)}function AOe(e){var t=0;ft(e,505,rl(t)),ft(e,506)}function EOe(e){var t=0;ft(e,508,vOe(t,"TableStyleMedium9","PivotStyleMedium4")),ft(e,509)}function TOe(e,t){var r=Ta();return ft(r,278),jOe(r,e.SSF),_Oe(r),wOe(r),NOe(r),kOe(r),SOe(r,t.cellXfs),COe(r),AOe(r),EOe(r),ft(r,279),r.end()}var POe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function OOe(e,t,r){t.themeElements.clrScheme=[];var s={};(e[0].match(ta)||[]).forEach(function(a){var i=nr(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":s.rgb=i.val;break;case"<a:sysClr":s.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[POe.indexOf(i[0])]=s,s={}):s.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function ROe(){}function LOe(){}var IOe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,FOe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,DOe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function $Oe(e,t,r){t.themeElements={};var s;[["clrScheme",IOe,OOe],["fontScheme",FOe,ROe],["fmtScheme",DOe,LOe]].forEach(function(a){if(!(s=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](s,t,r)})}var MOe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Uz(e,t){(!e||e.length===0)&&(e=N4());var r,s={};if(!(r=e.match(MOe)))throw new Error("themeElements not found in theme");return $Oe(r[0],s,t),s.raw=e,s}function N4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Mn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function BOe(e,t,r){var s=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=s;return}var i=e.slice(e.l);e.l=s;var l;try{l=DU(i,{type:"array"})}catch{return}var o=Wa(l,"theme/theme/theme1.xml",!0);if(o)return Uz(o,r)}}function UOe(e){return e.read_shift(4)}function zOe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=WOe(e,4);break;case 2:t.xclrValue=bz(e);break;case 3:t.xclrValue=UOe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function WOe(e,t){return Qs(e,t)}function VOe(e,t){return Qs(e,t)}function HOe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,s=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:s[1]=zOe(e);break;case 6:s[1]=VOe(e,r);break;case 14:case 15:s[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return s}function qOe(e,t){var r=e.l+t;e.l+=2;var s=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(HOe(e,r-e.l));return{ixfe:s,ext:i}}function GOe(e,t){t.forEach(function(r){switch(r[0]){}})}function JOe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ys(e)}}function KOe(e){var t=it(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),xs(e.name,t),t.slice(0,t.l)}function XOe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function YOe(e){var t=it(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function ZOe(e,t){var r=it(8+2*t.length);return r.write_shift(4,e),xs(t,r),r.slice(0,r.l)}function QOe(e){return e.l+=4,e.read_shift(4)!=0}function eRe(e,t){var r=it(8);return r.write_shift(4,e),r.write_shift(4,1),r}function tRe(e,t,r){var s={Types:[],Cell:[],Value:[]},a=r||{},i=[],l=!1,o=2;return To(e,function(c,d,u){switch(u){case 335:s.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?s.Cell.push({type:s.Types[f[0]-1].name,index:f[1]}):o==0&&s.Value.push({type:s.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),s}function rRe(){var e=Ta();return ft(e,332),ft(e,334,rl(1)),ft(e,335,KOe({name:"XLDAPR",version:12e4,flags:3496657072})),ft(e,336),ft(e,339,ZOe(1,"XLDAPR")),ft(e,52),ft(e,35,rl(514)),ft(e,4096,rl(0)),ft(e,4097,fi(1)),ft(e,36),ft(e,53),ft(e,340),ft(e,337,eRe(1)),ft(e,51,YOe([[1,0]])),ft(e,338),ft(e,333),e.end()}function nRe(e,t,r){var s={Types:[],Cell:[],Value:[]};if(!e)return s;var a=!1,i=2,l;return e.replace(ta,function(o){var c=nr(o);switch(Bl(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":s.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<s.Types.length;++d)s.Types[d].name==c.name&&(l=s.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?s.Cell.push({type:s.Types[c.t-1].name,index:+c.v}):i==0&&s.Value.push({type:s.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),s}function zz(){var e=[Mn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function sRe(e){var t=[];if(!e)return t;var r=1;return(e.match(ta)||[]).forEach(function(s){var a=nr(s);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function aRe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=tr(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}function iRe(e,t,r){var s=[];return To(e,function(i,l,o){switch(o){case 63:s.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),s}function lRe(e,t,r,s){if(!e)return e;var a=s||{},i=!1;To(e,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},a)}function oRe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var af=1024;function Wz(e,t){for(var r=[21600,21600],s=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[kt("xml",null,{"xmlns:v":Ma.v,"xmlns:o":Ma.o,"xmlns:x":Ma.x,"xmlns:mv":Ma.mv}).replace(/\/>/,">"),kt("o:shapelayout",kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),kt("v:shapetype",[kt("v:stroke",null,{joinstyle:"miter"}),kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:s})];af<e*1e3;)af+=1e3;return t.forEach(function(i){var l=_n(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=kt("v:fill",c,o),u={on:"t",obscured:"t"};++af,a=a.concat(["<v:shape"+ap({id:"_x0000_s"+af,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,kt("v:shadow",null,u),kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",As("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),As("x:AutoFill","False"),As("x:Row",String(l.r)),As("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function BL(e,t,r,s){var a=Array.isArray(e),i;t.forEach(function(l){var o=_n(l.ref);if(a?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},a?e[o.r][o.c]=i:e[l.ref]=i;var c=gr(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=ur(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&s){for(f=0;f<s.length;++f)if(u.a==s[f].id){u.a=s[f].name||u.a;break}}i.c.push(u)})}function cRe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],s=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=nr(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=_n(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&j4(f[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),s.push(d)}}}}),s}function Vz(e){var t=[Mn,kt("comments",null,{xmlns:ou[0]})],r=[];return t.push("<authors>"),e.forEach(function(s){s[1].forEach(function(a){var i=Fr(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(s){var a=0,i=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?a=r.indexOf("tc="+s[1][0].ID):s[1].forEach(function(c){c.a&&(a=r.indexOf(Fr(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+s[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(As("t",Fr(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;t.push(As("t",Fr(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function dRe(e,t){var r=[],s=!1,a={},i=0;return e.replace(ta,function(o,c){var d=nr(o);switch(Bl(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":a.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":s=!0;break;case"</mentions>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function uRe(e,t,r){var s=[Mn,kt("ThreadedComments",null,{xmlns:ts.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),s.push(kt("threadedComment",As("text",l.t||""),c))})}),s.push("</ThreadedComments>"),s.join("")}function fRe(e,t){var r=[],s=!1;return e.replace(ta,function(i){var l=nr(i);switch(Bl(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function mRe(e){var t=[Mn,kt("personList",null,{xmlns:ts.TCMNT,"xmlns:x":ou[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,s){t.push(kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function hRe(e){var t={};t.iauthor=e.read_shift(4);var r=fu(e);return t.rfx=r.s,t.ref=tr(r.s),e.l+=16,t}function pRe(e,t){return t==null&&(t=it(36)),t.write_shift(4,e[1].iauthor),Dm(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var xRe=Ys;function gRe(e){return xs(e.slice(0,54))}function yRe(e,t){var r=[],s=[],a={},i=!1;return To(e,function(o,c,d){switch(d){case 632:s.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=s[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function vRe(e){var t=Ta(),r=[];return ft(t,628),ft(t,630),e.forEach(function(s){s[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),ft(t,632,gRe(a.a)))})}),ft(t,631),ft(t,633),e.forEach(function(s){s[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:_n(s[0]),e:_n(s[0])};ft(t,635,pRe([i,a])),a.t&&a.t.length>0&&ft(t,637,UTe(a)),ft(t,636),delete a.iauthor})}),ft(t,634),ft(t,629),t.end()}var bRe="application/vnd.ms-office.vbaProject";function jRe(e){var t=Gt.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,s){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Gt.utils.cfb_add(t,a,e.FileIndex[s].content)}}),Gt.write(t)}function _Re(e,t){t.FullPaths.forEach(function(r,s){if(s!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Gt.utils.cfb_add(e,a,t.FileIndex[s].content)}})}var Hz=["xlsb","xlsm","xlam","biff8","xla"];function wRe(){return{"!type":"dialog"}}function NRe(){return{"!type":"dialog"}}function kRe(){return{"!type":"macro"}}function SRe(){return{"!type":"macro"}}var _f=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,a,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=t.c:--u,c?d+=t.r:--d,a+(o?"":"$")+un(u)+(c?"":"$")+Pn(d)}return function(a,i){return t=i,a.replace(e,r)}}(),k4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,S4=function(){return function(t,r){return t.replace(k4,function(s,a,i,l,o,c){var d=f4(l)-(i?0:r.c),u=u4(c)-(o?0:r.r),f=u==0?"":o?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return a+"R"+f+"C"+m})}}();function qz(e,t){return e.replace(k4,function(r,s,a,i,l,o){return s+(a=="$"?a+i:un(f4(i)+t.c))+(l=="$"?l+o:Pn(u4(o)+t.r))})}function CRe(e,t,r){var s=fa(t),a=s.s,i=_n(r),l={r:i.r-a.r,c:i.c-a.c};return qz(e,l)}function ARe(e){return e.length!=1}function UL(e){return e.replace(/_xlfn\./g,"")}function Un(e){e.l+=1}function jc(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Gz(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return Jz(e);r.biff==12&&(s=4)}var a=e.read_shift(s),i=e.read_shift(s),l=jc(e),o=jc(e);return{s:{r:a,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function Jz(e){var t=jc(e),r=jc(e),s=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function ERe(e,t,r){if(r.biff<8)return Jz(e);var s=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=jc(e),l=jc(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function Kz(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return TRe(e);var s=e.read_shift(r&&r.biff==12?4:2),a=jc(e);return{r:s,c:a[0],cRel:a[1],rRel:a[2]}}function TRe(e){var t=jc(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function PRe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ORe(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return RRe(e);var a=e.read_shift(s>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:l,rRel:o}}function RRe(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:s}}function LRe(e,t,r){var s=(e[e.l++]&96)>>5,a=Gz(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,a]}function IRe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=Gz(e,i,r);return[s,a,l]}function FRe(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function DRe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[s,a]}function $Re(e,t,r){var s=(e[e.l++]&96)>>5,a=ERe(e,t-1,r);return[s,a]}function MRe(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function zL(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function BRe(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=s;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function URe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function zRe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function WRe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function VRe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function Xz(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function HRe(e){return e.read_shift(2),Xz(e)}function qRe(e){return e.read_shift(2),Xz(e)}function GRe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=Kz(e,0,r);return[s,a]}function JRe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=ORe(e,0,r);return[s,a]}function KRe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=Kz(e,0,r);return[s,a,i]}function XRe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[QLe[a],Qz[a],s]}function YRe(e,t,r){var s=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:ZRe(e);return[a,(i[0]===0?Qz:ZLe)[i[1]]]}function ZRe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function QRe(e,t,r){e.l+=r&&r.biff==2?3:4}function eLe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function tLe(e){return e.l++,Po[e.read_shift(1)]}function rLe(e){return e.l++,e.read_shift(2)}function nLe(e){return e.l++,e.read_shift(1)!==0}function sLe(e){return e.l++,Gs(e)}function aLe(e,t,r){return e.l++,qp(e,t-1,r)}function iLe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ln(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Po[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Gs(e);break;case 2:r[1]=mu(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function lLe(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=s;++i)a.push((r.biff==12?fu:D1)(e));return a}function oLe(e,t,r){var s=0,a=0;r.biff==12?(s=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--a==0&&(a=256));for(var i=0,l=[];i!=s&&(l[i]=[]);++i)for(var o=0;o!=a;++o)l[i][o]=iLe(e,r.biff);return l}function cLe(e,t,r){var s=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,i]}function dLe(e,t,r){if(r.biff==5)return uLe(e);var s=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[s,a,i]}function uLe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function fLe(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function mLe(e,t,r){var s=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function hLe(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function pLe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[s,a]}var xLe=Qs,gLe=Qs,yLe=Qs;function Jp(e,t,r){return e.l+=2,[PRe(e)]}function C4(e){return e.l+=6,[]}var vLe=Jp,bLe=C4,jLe=C4,_Le=Jp;function Yz(e){return e.l+=2,[Hn(e),e.read_shift(2)&1]}var wLe=Jp,NLe=Yz,kLe=C4,SLe=Jp,CLe=Jp,ALe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ELe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),l=ALe[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:s,c:a,C:i}}function TLe(e){return e.l+=2,[e.read_shift(4)]}function PLe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function OLe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function RLe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function LLe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function ILe(e){return e.l+=4,[0,0]}var WL={1:{n:"PtgExp",f:eLe},2:{n:"PtgTbl",f:yLe},3:{n:"PtgAdd",f:Un},4:{n:"PtgSub",f:Un},5:{n:"PtgMul",f:Un},6:{n:"PtgDiv",f:Un},7:{n:"PtgPower",f:Un},8:{n:"PtgConcat",f:Un},9:{n:"PtgLt",f:Un},10:{n:"PtgLe",f:Un},11:{n:"PtgEq",f:Un},12:{n:"PtgGe",f:Un},13:{n:"PtgGt",f:Un},14:{n:"PtgNe",f:Un},15:{n:"PtgIsect",f:Un},16:{n:"PtgUnion",f:Un},17:{n:"PtgRange",f:Un},18:{n:"PtgUplus",f:Un},19:{n:"PtgUminus",f:Un},20:{n:"PtgPercent",f:Un},21:{n:"PtgParen",f:Un},22:{n:"PtgMissArg",f:Un},23:{n:"PtgStr",f:aLe},26:{n:"PtgSheet",f:PLe},27:{n:"PtgEndSheet",f:OLe},28:{n:"PtgErr",f:tLe},29:{n:"PtgBool",f:nLe},30:{n:"PtgInt",f:rLe},31:{n:"PtgNum",f:sLe},32:{n:"PtgArray",f:MRe},33:{n:"PtgFunc",f:XRe},34:{n:"PtgFuncVar",f:YRe},35:{n:"PtgName",f:cLe},36:{n:"PtgRef",f:GRe},37:{n:"PtgArea",f:LRe},38:{n:"PtgMemArea",f:fLe},39:{n:"PtgMemErr",f:xLe},40:{n:"PtgMemNoMem",f:gLe},41:{n:"PtgMemFunc",f:mLe},42:{n:"PtgRefErr",f:hLe},43:{n:"PtgAreaErr",f:FRe},44:{n:"PtgRefN",f:JRe},45:{n:"PtgAreaN",f:$Re},46:{n:"PtgMemAreaN",f:RLe},47:{n:"PtgMemNoMemN",f:LLe},57:{n:"PtgNameX",f:dLe},58:{n:"PtgRef3d",f:KRe},59:{n:"PtgArea3d",f:IRe},60:{n:"PtgRefErr3d",f:pLe},61:{n:"PtgAreaErr3d",f:DRe},255:{}},FLe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},DLe={1:{n:"PtgElfLel",f:Yz},2:{n:"PtgElfRw",f:SLe},3:{n:"PtgElfCol",f:vLe},6:{n:"PtgElfRwV",f:CLe},7:{n:"PtgElfColV",f:_Le},10:{n:"PtgElfRadical",f:wLe},11:{n:"PtgElfRadicalS",f:kLe},13:{n:"PtgElfColS",f:bLe},15:{n:"PtgElfColSV",f:jLe},16:{n:"PtgElfRadicalLel",f:NLe},25:{n:"PtgList",f:ELe},29:{n:"PtgSxName",f:TLe},255:{}},$Le={0:{n:"PtgAttrNoop",f:ILe},1:{n:"PtgAttrSemi",f:VRe},2:{n:"PtgAttrIf",f:zRe},4:{n:"PtgAttrChoose",f:BRe},8:{n:"PtgAttrGoto",f:URe},16:{n:"PtgAttrSum",f:QRe},32:{n:"PtgAttrBaxcel",f:zL},33:{n:"PtgAttrBaxcel",f:zL},64:{n:"PtgAttrSpace",f:HRe},65:{n:"PtgAttrSpaceSemi",f:qRe},128:{n:"PtgAttrIfError",f:WRe},255:{}};function Kp(e,t,r,s){if(s.biff<8)return Qs(e,t);for(var a=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=oLe(e,0,s),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=lLe(e,r[l][1],s),i.push(r[l][2]);break;case"PtgExp":s&&s.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=a-e.l,t!==0&&i.push(Qs(e,t)),i}function Xp(e,t,r){for(var s=e.l+t,a,i,l=[];s!=e.l;)t=s-e.l,i=e[e.l],a=WL[i]||WL[FLe[i]],(i===24||i===25)&&(a=(i===24?DLe:$Le)[e[e.l+1]]),!a||!a.f?Qs(e,t):l.push([a.n,a.f(e,t,r)]);return l}function MLe(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],a=[],i=0;i<s.length;++i){var l=s[i];if(l)switch(l[0]){case 2:a.push('"'+l[1].replace(/"/g,'""')+'"');break;default:a.push(l[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var BLe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ULe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Zz(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[s[0]][0]){case 357:return a=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return a=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[s[0]][0][3]?(a=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?a:a+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function VL(e,t,r){var s=Zz(e,t,r);return s=="#REF"?s:ULe(s,r)}function Bs(e,t,r,s,a){var i=a&&a.biff||8,l={s:{c:0,r:0}},o=[],c,d,u,f=0,m=0,g,x="";if(!e[0]||!e[0][0])return"";for(var h=-1,p="",v=0,b=e[0].length;v<b;++v){var j=e[0][v];switch(j[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),h>=0){switch(e[0][h][1][0]){case 0:p=Tn(" ",e[0][h][1][1]);break;case 1:p=Tn("\r",e[0][h][1][1]);break;default:if(p="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}d=d+p,h=-1}o.push(d+BLe[j[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=W0(j[1][1],l,a),o.push(V0(u,i));break;case"PtgRefN":u=r?W0(j[1][1],r,a):j[1][1],o.push(V0(u,i));break;case"PtgRef3d":f=j[1][1],u=W0(j[1][2],l,a),x=VL(s,f,a),o.push(x+"!"+V0(u,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],w=j[1][1];N||(N=0),N&=127;var _=N==0?[]:o.slice(-N);o.length-=N,w==="User"&&(w=_.shift()),o.push(w+"("+_.join(",")+")");break;case"PtgBool":o.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(j[1]);break;case"PtgNum":o.push(String(j[1]));break;case"PtgStr":o.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(j[1]);break;case"PtgAreaN":g=vL(j[1][1],r?{s:r}:l,a),o.push(b_(g,a));break;case"PtgArea":g=vL(j[1][1],l,a),o.push(b_(g,a));break;case"PtgArea3d":f=j[1][1],g=j[1][2],x=VL(s,f,a),o.push(x+"!"+b_(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=j[1][2];var k=(s.names||[])[m-1]||(s[0]||[])[m],C=k?k.Name:"SH33TJSNAME"+String(m);C&&C.slice(0,6)=="_xlfn."&&!a.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var T=j[1][1];m=j[1][2];var P;if(a.biff<=5)T<0&&(T=-T),s[T]&&(P=s[T][m]);else{var A="";if(((s[T]||[])[0]||[])[0]==14849||(((s[T]||[])[0]||[])[0]==1025?s[T][m]&&s[T][m].itab>0&&(A=s.SheetNames[s[T][m].itab-1]+"!"):A=s.SheetNames[m-1]+"!"),s[T]&&s[T][m])A+=s[T][m].Name;else if(s[0]&&s[0][m])A+=s[0][m].Name;else{var S=(Zz(s,T,a)||"").split(";;");S[m-1]?A=S[m-1]:A+="SH33TJSERRX"}o.push(A);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var E="(",O=")";if(h>=0){switch(p="",e[0][h][1][0]){case 2:E=Tn(" ",e[0][h][1][1])+E;break;case 3:E=Tn("\r",e[0][h][1][1])+E;break;case 4:O=Tn(" ",e[0][h][1][1])+O;break;case 5:O=Tn("\r",e[0][h][1][1])+O;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}h=-1}o.push(E+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var I={c:r.c,r:r.r};if(s.sharedf[tr(u)]){var L=s.sharedf[tr(u)];o.push(Bs(L,l,I,s,a))}else{var Z=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Bs(d[1],l,I,s,a)),Z=!0;break}Z||o.push(j[1])}break;case"PtgArray":o.push("{"+MLe(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&h>=0&&H.indexOf(e[0][v][0])==-1){j=e[0][h];var R=!0;switch(j[1][0]){case 4:R=!1;case 0:p=Tn(" ",j[1][1]);break;case 5:R=!1;case 1:p=Tn("\r",j[1][1]);break;default:if(p="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}o.push((R?p:"")+o.pop()+(R?"":p)),h=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function zLe(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],Qs(e,t-2)];var o=Xp(e,l,r);return t!==l+a&&(i=Kp(e,t-l-a,o,r)),e.l=s,[o,i]}function WLe(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],Qs(e,t-2)];var o=Xp(e,l,r);return t!==l+a&&(i=Kp(e,t-l-a,o,r)),e.l=s,[o,i]}function VLe(e,t,r,s){var a=e.l+t,i=Xp(e,s,r),l;return a!==e.l&&(l=Kp(e,a-e.l,i,r)),[i,l]}function HLe(e,t,r){var s=e.l+t,a,i=e.read_shift(2),l=Xp(e,i,r);return i==65535?[[],Qs(e,t-2)]:(t!==i+2&&(a=Kp(e,s-i-2,l,r)),[l,a])}function qLe(e){var t;if(ro(e,e.l+6)!==65535)return[Gs(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function GLe(e){if(e==null){var t=it(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return qd(e);return qd(0)}function k_(e,t,r){var s=e.l+t,a=Ul(e);r.biff==2&&++e.l;var i=qLe(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=WLe(e,s-e.l,r);return{cell:a,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function JLe(e,t,r,s,a){var i=Jd(t,r,a),l=GLe(e.v),o=it(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var d=it(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=hs([i,l,o,d]);return f}function $1(e,t,r){var s=e.read_shift(4),a=Xp(e,s,r),i=e.read_shift(4),l=i>0?Kp(e,i,a,r):null;return[a,l]}var KLe=$1,M1=$1,XLe=$1,YLe=$1,ZLe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Qz={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},QLe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function HL(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function eIe(e){var t="of:="+e.replace(k4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function S_(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function tIe(e){return e.replace(/\./,"!")}var q0={},wf={},G0=typeof Map<"u";function A4(e,t,r){var s=0,a=e.length;if(r){if(G0?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=G0?r.get(t):r[t];s<i.length;++s)if(e[i[s]].t===t)return e.Count++,i[s]}}else for(;s<a;++s)if(e[s].t===t)return e.Count++,s;return e[a]={t},e.Count++,e.Unique++,r&&(G0?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function B1(e,t){var r={min:e+1,max:e+1},s=-1;return t.MDW&&(Hs=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?s=dp(t.wpx):t.wch!=null&&(s=t.wch),s>-1?(r.width=Kv(s),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Nd(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Ic(e,t,r){var s=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(s==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Pl(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=s=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===s)return a;return e[i]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function eW(e,t,r,s,a,i){try{s.cellNF&&(e.z=Kt[t])}catch(o){if(s.WTF)throw o}if(!(e.t==="z"&&!s.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=fn(e.v)),(!s||s.cellText!==!1)&&e.t!=="z")try{if(Kt[t]==null&&Pl(Y3e[t]||"General",t),e.t==="e")e.w=e.w||Po[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=np(e.v);else if(e.t==="d"){var l=ss(e.v);(l|0)===l?e.w=l.toString(10):e.w=np(l)}else{if(e.v===void 0)return"";e.w=Vd(e.v,wf)}else e.t==="d"?e.w=Qa(t,ss(e.v),wf):e.w=Qa(t,e.v,wf)}catch(o){if(s.WTF)throw o}if(s.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Jv(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),s.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Jv(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),s.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(s.WTF&&i.Fills)throw o}}}function rIe(e,t,r){if(e&&e["!ref"]){var s=gr(e["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function nIe(e,t){var r=gr(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ur(r))}var sIe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,aIe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,iIe=/<(?:\w:)?hyperlink [^>]*>/mg,lIe=/"(\w*:\w*)"/,oIe=/<(?:\w:)?col\b[^>]*[\/]?>/g,cIe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,dIe=/<(?:\w:)?pageMargins[^>]*\/>/g,tW=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,uIe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,fIe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function mIe(e,t,r,s,a,i,l){if(!e)return e;s||(s={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match(aIe);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var m=d.match(tW);m?E4(m[0],o,a,r):(m=d.match(uIe))&&pIe(m[0],m[1]||"",o,a,r);var g=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=d.slice(g,g+50).match(lIe);x&&nIe(o,x[1])}var h=d.match(fIe);h&&h[1]&&AIe(h[1],a);var p=[];if(t.cellStyles){var v=d.match(oIe);v&&wIe(p,v)}f&&PIe(f[1],o,t,c,i,l);var b=u.match(cIe);b&&(o["!autofilter"]=kIe(b[0]));var j=[],N=u.match(sIe);if(N)for(g=0;g!=N.length;++g)j[g]=gr(N[g].slice(N[g].indexOf('"')+1));var w=u.match(iIe);w&&bIe(o,w,s);var _=u.match(dIe);if(_&&(o["!margins"]=jIe(nr(_[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=ur(c)),t.sheetRows>0&&o["!ref"]){var k=gr(o["!ref"]);t.sheetRows<=+k.e.r&&(k.e.r=t.sheetRows-1,k.e.r>c.e.r&&(k.e.r=c.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>c.e.c&&(k.e.c=c.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ur(k))}return p.length>0&&(o["!cols"]=p),j.length>0&&(o["!merges"]=j),o}function hIe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ur(e[r])+'"/>';return t+"</mergeCells>"}function E4(e,t,r,s){var a=nr(e);r.Sheets[s]||(r.Sheets[s]={}),a.codeName&&(r.Sheets[s].CodeName=kr(zr(a.codeName)))}function pIe(e,t,r,s,a){E4(e.slice(0,e.indexOf(">")),r,s,a)}function xIe(e,t,r,s,a){var i=!1,l={},o=null;if(s.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,l.codeName=Nl(Fr(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),o=(o||"")+kt("outlinePr",null,d)}!i&&!o||(a[a.length]=kt("sheetPr",o,l))}var gIe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],yIe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function vIe(e){var t={sheet:1};return gIe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),yIe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=_4(e.password).toString(16).toUpperCase()),kt("sheetProtection",null,t)}function bIe(e,t,r){for(var s=Array.isArray(e),a=0;a!=t.length;++a){var i=nr(zr(t[a]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+kr(i.location))):(i.Target="#"+kr(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=gr(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=tr({c:d,r:c});s?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function jIe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _Ie(e){return Nd(e),kt("pageMargins",null,e)}function wIe(e,t){for(var r=!1,s=0;s!=t.length;++s){var a=nr(t[s],!0);a.hidden&&(a.hidden=on(a.hidden));var i=parseInt(a.min,10)-1,l=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,w4(a.width)),bc(a);i<=l;)e[i++]=Gr(a)}}function NIe(e,t){for(var r=["<cols>"],s,a=0;a!=t.length;++a)(s=t[a])&&(r[r.length]=kt("col",null,B1(a,s)));return r[r.length]="</cols>",r.join("")}function kIe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function SIe(e,t,r,s){var a=typeof e.ref=="string"?e.ref:ur(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=fa(a);l.s.r==l.e.r&&(l.e.r=fa(t["!ref"]).e.r,a=ur(l));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==s){c.Ref="'"+r.SheetNames[s]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+a}),kt("autoFilter",null,{ref:a})}var CIe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function AIe(e,t){t.Views||(t.Views=[{}]),(e.match(CIe)||[]).forEach(function(r,s){var a=nr(r);t.Views[s]||(t.Views[s]={}),+a.zoomScale&&(t.Views[s].zoom=+a.zoomScale),on(a.rightToLeft)&&(t.Views[s].RTL=!0)})}function EIe(e,t,r,s){var a={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),kt("sheetViews",kt("sheetView",null,a),{})}function TIe(e,t,r,s){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Po[e.v];break;case"d":s&&s.cellDates?a=fn(e.v,-1).toISOString():(e=Gr(e),e.t="n",a=""+(e.v=ss(fn(e.v)))),typeof e.z>"u"&&(e.z=Kt[14]);break;default:a=e.v;break}var o=As("v",Fr(a)),c={r:t},d=Ic(s.cellXfs,e,s);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){o=As("v",""+A4(s.Strings,e.v,s.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=kt("f",Fr(e.f),u)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),kt("c",o,c)}var PIe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,s=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=sp("v"),l=sp("f");return function(c,d,u,f,m,g){for(var x=0,h="",p=[],v=[],b=0,j=0,N=0,w="",_,k,C=0,T=0,P,A,S=0,E=0,O=Array.isArray(g.CellXf),I,L=[],Z=[],H=Array.isArray(d),R=[],D={},Y=!1,M=!!u.sheetStubs,X=c.split(t),ne=0,J=X.length;ne!=J;++ne){h=X[ne].trim();var ue=h.length;if(ue!==0){var ke=0;e:for(x=0;x<ue;++x)switch(h[x]){case">":if(h[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(k=nr(h.slice(ke,x),!0),C=k.r!=null?parseInt(k.r,10):C+1,T=-1,u.sheetRows&&u.sheetRows<C)continue;D={},Y=!1,k.ht&&(Y=!0,D.hpt=parseFloat(k.ht),D.hpx=um(D.hpt)),k.hidden=="1"&&(Y=!0,D.hidden=!0),k.outlineLevel!=null&&(Y=!0,D.level=+k.outlineLevel),Y&&(R[C-1]=D)}break;case"<":ke=x;break}if(ke>=x)break;if(k=nr(h.slice(ke,x),!0),C=k.r!=null?parseInt(k.r,10):C+1,T=-1,!(u.sheetRows&&u.sheetRows<C)){f.s.r>C-1&&(f.s.r=C-1),f.e.r<C-1&&(f.e.r=C-1),u&&u.cellStyles&&(D={},Y=!1,k.ht&&(Y=!0,D.hpt=parseFloat(k.ht),D.hpx=um(D.hpt)),k.hidden=="1"&&(Y=!0,D.hidden=!0),k.outlineLevel!=null&&(Y=!0,D.level=+k.outlineLevel),Y&&(R[C-1]=D)),p=h.slice(x).split(e);for(var ve=0;ve!=p.length&&p[ve].trim().charAt(0)=="<";++ve);for(p=p.slice(ve),x=0;x!=p.length;++x)if(h=p[x].trim(),h.length!==0){if(v=h.match(r),b=x,j=0,N=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,v!=null&&v.length===2){for(b=0,w=v[1],j=0;j!=w.length&&!((N=w.charCodeAt(j)-64)<1||N>26);++j)b=26*b+N;--b,T=b}else++T;for(j=0;j!=h.length&&h.charCodeAt(j)!==62;++j);if(++j,k=nr(h.slice(0,j),!0),k.r||(k.r=tr({r:C-1,c:T})),w=h.slice(j),_={t:""},(v=w.match(i))!=null&&v[1]!==""&&(_.v=kr(v[1])),u.cellFormula){if((v=w.match(l))!=null&&v[1]!==""){if(_.f=kr(zr(v[1])).replace(/\r\n/g,`
`),u.xlfn||(_.f=UL(_.f)),v[0].indexOf('t="array"')>-1)_.F=(w.match(a)||[])[1],_.F.indexOf(":")>-1&&L.push([gr(_.F),_.F]);else if(v[0].indexOf('t="shared"')>-1){A=nr(v[0]);var je=kr(zr(v[1]));u.xlfn||(je=UL(je)),Z[parseInt(A.si,10)]=[A,je,k.r]}}else(v=w.match(/<f[^>]*\/>/))&&(A=nr(v[0]),Z[A.si]&&(_.f=CRe(Z[A.si][1],Z[A.si][2],k.r)));var ie=_n(k.r);for(j=0;j<L.length;++j)ie.r>=L[j][0].s.r&&ie.r<=L[j][0].e.r&&ie.c>=L[j][0].s.c&&ie.c<=L[j][0].e.c&&(_.F=L[j][1])}if(k.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(M)_.t="z";else continue;else _.t=k.t||"n";switch(f.s.c>T&&(f.s.c=T),f.e.c<T&&(f.e.c=T),_.t){case"n":if(_.v==""||_.v==null){if(!M)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!M)continue;_.t="z"}else P=q0[parseInt(_.v,10)],_.v=P.t,_.r=P.r,u.cellHTML&&(_.h=P.h);break;case"str":_.t="s",_.v=_.v!=null?zr(_.v):"",u.cellHTML&&(_.h=n4(_.v));break;case"inlineStr":v=w.match(s),_.t="s",v!=null&&(P=j4(v[1]))?(_.v=P.t,u.cellHTML&&(_.h=P.h)):_.v="";break;case"b":_.v=on(_.v);break;case"d":u.cellDates?_.v=fn(_.v,1):(_.v=ss(fn(_.v,1)),_.t="n");break;case"e":(!u||u.cellText!==!1)&&(_.w=_.v),_.v=nz[_.v];break}if(S=E=0,I=null,O&&k.s!==void 0&&(I=g.CellXf[k.s],I!=null&&(I.numFmtId!=null&&(S=I.numFmtId),u.cellStyles&&I.fillId!=null&&(E=I.fillId))),eW(_,S,E,u,m,g),u.cellDates&&O&&_.t=="n"&&lu(Kt[S])&&(_.t="d",_.v=I1(_.v)),k.cm&&u.xlmeta){var se=(u.xlmeta.Cell||[])[+k.cm-1];se&&se.type=="XLDAPR"&&(_.D=!0)}if(H){var z=_n(k.r);d[z.r]||(d[z.r]=[]),d[z.r][z.c]=_}else d[k.r]=_}}}}R.length>0&&(d["!rows"]=R)}}();function OIe(e,t,r,s){var a=[],i=[],l=gr(e["!ref"]),o="",c,d="",u=[],f=0,m=0,g=e["!rows"],x=Array.isArray(e),h={r:d},p,v=-1;for(m=l.s.c;m<=l.e.c;++m)u[m]=un(m);for(f=l.s.r;f<=l.e.r;++f){for(i=[],d=Pn(f),m=l.s.c;m<=l.e.c;++m){c=u[m]+d;var b=x?(e[f]||[])[m]:e[c];b!==void 0&&(o=TIe(b,c,e,t))!=null&&i.push(o)}(i.length>0||g&&g[f])&&(h={r:d},g&&g[f]&&(p=g[f],p.hidden&&(h.hidden=1),v=-1,p.hpx?v=up(p.hpx):p.hpt&&(v=p.hpt),v>-1&&(h.ht=v,h.customHeight=1),p.level&&(h.outlineLevel=p.level)),a[a.length]=kt("row",i.join(""),h))}if(g)for(;f<g.length;++f)g&&g[f]&&(h={r:f+1},p=g[f],p.hidden&&(h.hidden=1),v=-1,p.hpx?v=up(p.hpx):p.hpt&&(v=p.hpt),v>-1&&(h.ht=v,h.customHeight=1),p.level&&(h.outlineLevel=p.level),a[a.length]=kt("row","",h));return a.join("")}function rW(e,t,r,s){var a=[Mn,kt("worksheet",null,{xmlns:ou[0],"xmlns:r":ts.r})],i=r.SheetNames[e],l=0,o="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=gr(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=ur(u)}s||(s={}),c["!comments"]=[];var f=[];xIe(c,r,e,t,a),a[a.length]=kt("dimension",null,{ref:d}),a[a.length]=EIe(c,t,e,r),t.sheetFormat&&(a[a.length]=kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=NIe(c,c["!cols"])),a[l=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=OIe(c,t),o.length>0&&(a[a.length]=o)),a.length>l+1&&(a[a.length]="</sheetData>",a[l]=a[l].replace("/>",">")),c["!protect"]&&(a[a.length]=vIe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=SIe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=hIe(c["!merges"]));var m=-1,g,x=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(h){h[1].Target&&(g={ref:h[0]},h[1].Target.charAt(0)!="#"&&(x=Ir(s,-1,Fr(h[1].Target).replace(/#.*$/,""),hr.HLINK),g["r:id"]="rId"+x),(m=h[1].Target.indexOf("#"))>-1&&(g.location=Fr(h[1].Target.slice(m+1))),h[1].Tooltip&&(g.tooltip=Fr(h[1].Tooltip)),a[a.length]=kt("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=_Ie(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=As("ignoredErrors",kt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(x=Ir(s,-1,"../drawings/drawing"+(e+1)+".xml",hr.DRAW),a[a.length]=kt("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=f),c["!comments"].length>0&&(x=Ir(s,-1,"../drawings/vmlDrawing"+(e+1)+".vml",hr.VML),a[a.length]=kt("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function RIe(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=s,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function LIe(e,t,r){var s=it(145),a=(r["!rows"]||[])[e]||{};s.write_shift(4,e),s.write_shift(4,0);var i=320;a.hpx?i=up(a.hpx)*20:a.hpt&&(i=a.hpt*20),s.write_shift(2,i),s.write_shift(1,0);var l=0;a.level&&(l|=a.level),a.hidden&&(l|=16),(a.hpx||a.hpt)&&(l|=32),s.write_shift(1,l),s.write_shift(1,0);var o=0,c=s.l;s.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,m=-1,g=u<<10;g<u+1<<10;++g){d.c=g;var x=Array.isArray(r)?(r[d.r]||[])[d.c]:r[tr(d)];x&&(f<0&&(f=g),m=g)}f<0||(++o,s.write_shift(4,f),s.write_shift(4,m))}var h=s.l;return s.l=c,s.write_shift(4,o),s.l=h,s.length>s.l?s.slice(0,s.l):s}function IIe(e,t,r,s){var a=LIe(s,r,t);(a.length>17||(t["!rows"]||[])[s])&&ft(e,0,a)}var FIe=fu,DIe=Dm;function $Ie(){}function MIe(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=zTe(e),r}function BIe(e,t,r){r==null&&(r=it(84+4*e.length));var s=192;t&&(t.above&&(s&=-65),t.left&&(s&=-129)),r.write_shift(1,s);for(var a=1;a<3;++a)r.write_shift(1,0);return Hv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ZU(e,r),r.slice(0,r.l)}function UIe(e){var t=Oi(e);return[t]}function zIe(e,t,r){return r==null&&(r=it(8)),cu(t,r)}function WIe(e){var t=du(e);return[t]}function VIe(e,t,r){return r==null&&(r=it(4)),uu(t,r)}function HIe(e){var t=Oi(e),r=e.read_shift(1);return[t,r,"b"]}function qIe(e,t,r){return r==null&&(r=it(9)),cu(t,r),r.write_shift(1,e.v?1:0),r}function GIe(e){var t=du(e),r=e.read_shift(1);return[t,r,"b"]}function JIe(e,t,r){return r==null&&(r=it(5)),uu(t,r),r.write_shift(1,e.v?1:0),r}function KIe(e){var t=Oi(e),r=e.read_shift(1);return[t,r,"e"]}function XIe(e,t,r){return r==null&&(r=it(9)),cu(t,r),r.write_shift(1,e.v),r}function YIe(e){var t=du(e),r=e.read_shift(1);return[t,r,"e"]}function ZIe(e,t,r){return r==null&&(r=it(8)),uu(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function QIe(e){var t=Oi(e),r=e.read_shift(4);return[t,r,"s"]}function eFe(e,t,r){return r==null&&(r=it(12)),cu(t,r),r.write_shift(4,t.v),r}function tFe(e){var t=du(e),r=e.read_shift(4);return[t,r,"s"]}function rFe(e,t,r){return r==null&&(r=it(8)),uu(t,r),r.write_shift(4,t.v),r}function nFe(e){var t=Oi(e),r=Gs(e);return[t,r,"n"]}function sFe(e,t,r){return r==null&&(r=it(16)),cu(t,r),qd(e.v,r),r}function nW(e){var t=du(e),r=Gs(e);return[t,r,"n"]}function aFe(e,t,r){return r==null&&(r=it(12)),uu(t,r),qd(e.v,r),r}function iFe(e){var t=Oi(e),r=x4(e);return[t,r,"n"]}function lFe(e,t,r){return r==null&&(r=it(12)),cu(t,r),QU(e.v,r),r}function oFe(e){var t=du(e),r=x4(e);return[t,r,"n"]}function cFe(e,t,r){return r==null&&(r=it(8)),uu(t,r),QU(e.v,r),r}function dFe(e){var t=Oi(e),r=m4(e);return[t,r,"is"]}function uFe(e){var t=Oi(e),r=Ys(e);return[t,r,"str"]}function fFe(e,t,r){return r==null&&(r=it(12+4*e.v.length)),cu(t,r),xs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mFe(e){var t=du(e),r=Ys(e);return[t,r,"str"]}function hFe(e,t,r){return r==null&&(r=it(8+4*e.v.length)),uu(t,r),xs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function pFe(e,t,r){var s=e.l+t,a=Oi(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=M1(e,s-e.l,r);l[3]=Bs(o,null,a,r.supbooks,r)}else e.l=s;return l}function xFe(e,t,r){var s=e.l+t,a=Oi(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=M1(e,s-e.l,r);l[3]=Bs(o,null,a,r.supbooks,r)}else e.l=s;return l}function gFe(e,t,r){var s=e.l+t,a=Oi(e);a.r=r["!row"];var i=Gs(e),l=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=M1(e,s-e.l,r);l[3]=Bs(o,null,a,r.supbooks,r)}else e.l=s;return l}function yFe(e,t,r){var s=e.l+t,a=Oi(e);a.r=r["!row"];var i=Ys(e),l=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=M1(e,s-e.l,r);l[3]=Bs(o,null,a,r.supbooks,r)}else e.l=s;return l}var vFe=fu,bFe=Dm;function jFe(e,t){return t==null&&(t=it(4)),t.write_shift(4,e),t}function _Fe(e,t){var r=e.l+t,s=fu(e),a=h4(e),i=Ys(e),l=Ys(e),o=Ys(e);e.l=r;var c={rfx:s,relId:a,loc:i,display:o};return l&&(c.Tooltip=l),c}function wFe(e,t){var r=it(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Dm({s:_n(e[0]),e:_n(e[0])},r),p4("rId"+t,r);var s=e[1].Target.indexOf("#"),a=s==-1?"":e[1].Target.slice(s+1);return xs(a||"",r),xs(e[1].Tooltip||"",r),xs("",r),r.slice(0,r.l)}function NFe(){}function kFe(e,t,r){var s=e.l+t,a=ez(e),i=e.read_shift(1),l=[a];if(l[2]=i,r.cellFormula){var o=KLe(e,s-e.l,r);l[1]=o}else e.l=s;return l}function SFe(e,t,r){var s=e.l+t,a=fu(e),i=[a];if(r.cellFormula){var l=YLe(e,s-e.l,r);i[1]=l,e.l=s}else e.l=s;return i}function CFe(e,t,r){r==null&&(r=it(18));var s=B1(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(s.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof s.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var sW=["left","right","top","bottom","header","footer"];function AFe(e){var t={};return sW.forEach(function(r){t[r]=Gs(e)}),t}function EFe(e,t){return t==null&&(t=it(6*8)),Nd(e),sW.forEach(function(r){qd(e[r],t)}),t}function TFe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function PFe(e,t,r){r==null&&(r=it(30));var s=924;return(((t||{}).Views||[])[0]||{}).RTL&&(s|=32),r.write_shift(2,s),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function OFe(e){var t=it(24);return t.write_shift(4,4),t.write_shift(4,1),Dm(e,t),t}function RFe(e,t){return t==null&&(t=it(16*4+2)),t.write_shift(2,e.password?_4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function LFe(){}function IFe(){}function FFe(e,t,r,s,a,i,l){if(!e)return e;var o=t||{};s||(s={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,g,x,h,p,v,b,j,N,w,_=[];o.biff=12,o["!row"]=0;var k=0,C=!1,T=[],P={},A=o.supbooks||a.supbooks||[[]];if(A.sharedf=P,A.arrayf=T,A.SheetNames=a.SheetNames||a.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=A,a.Names))for(var S=0;S<a.Names.length;++S)A[0][S+1]=a.Names[S];var E=[],O=[],I=!1;fp[16]={n:"BrtShortReal",f:nW};var L;if(To(e,function(R,D,Y){if(!m)switch(Y){case 148:d=R;break;case 0:g=R,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),N=Pn(p=g.r),o["!row"]=g.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=um(R.hpt)),O[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:R[2]},R[2]){case"n":x.v=R[1];break;case"s":j=q0[R[1]],x.v=j.t,x.r=j.r;break;case"b":x.v=!!R[1];break;case"e":x.v=R[1],o.cellText!==!1&&(x.w=Po[x.v]);break;case"str":x.t="s",x.v=R[1];break;case"is":x.t="s",x.v=R[1].t;break}if((h=l.CellXf[R[0].iStyleRef])&&eW(x,h.numFmtId,null,o,i,l),v=R[0].c==-1?v+1:R[0].c,o.dense?(c[p]||(c[p]=[]),c[p][v]=x):c[un(v)+N]=x,o.cellFormula){for(C=!1,k=0;k<T.length;++k){var M=T[k];g.r>=M[0].s.r&&g.r<=M[0].e.r&&v>=M[0].s.c&&v<=M[0].e.c&&(x.F=ur(M[0]),C=!0)}!C&&R.length>3&&(x.f=R[3])}if(u.s.r>g.r&&(u.s.r=g.r),u.s.c>v&&(u.s.c=v),u.e.r<g.r&&(u.e.r=g.r),u.e.c<v&&(u.e.c=v),o.cellDates&&h&&x.t=="n"&&lu(Kt[h.numFmtId])){var X=nc(x.v);X&&(x.t="d",x.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}L&&(L.type=="XLDAPR"&&(x.D=!0),L=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},v=R[0].c==-1?v+1:R[0].c,o.dense?(c[p]||(c[p]=[]),c[p][v]=x):c[un(v)+N]=x,u.s.r>g.r&&(u.s.r=g.r),u.s.c>v&&(u.s.c=v),u.e.r<g.r&&(u.e.r=g.r),u.e.c<v&&(u.e.c=v),L&&(L.type=="XLDAPR"&&(x.D=!0),L=void 0);break;case 176:_.push(R);break;case 49:L=((o.xlmeta||{}).Cell||[])[R-1];break;case 494:var ne=s["!id"][R.relId];for(ne?(R.Target=ne.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=ne):R.relId==""&&(R.Target="#"+R.loc),p=R.rfx.s.r;p<=R.rfx.e.r;++p)for(v=R.rfx.s.c;v<=R.rfx.e.c;++v)o.dense?(c[p]||(c[p]=[]),c[p][v]||(c[p][v]={t:"z",v:void 0}),c[p][v].l=R):(b=tr({c:v,r:p}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=R);break;case 426:if(!o.cellFormula)break;T.push(R),w=o.dense?c[p][v]:c[un(v)+N],w.f=Bs(R[1],u,{r:g.r,c:v},A,o),w.F=ur(R[0]);break;case 427:if(!o.cellFormula)break;P[tr(R[0].s)]=R[1],w=o.dense?c[p][v]:c[un(v)+N],w.f=Bs(R[1],u,{r:g.r,c:v},A,o);break;case 60:if(!o.cellStyles)break;for(;R.e>=R.s;)E[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},I||(I=!0,w4(R.w/256)),bc(E[R.e+1]);break;case 161:c["!autofilter"]={ref:ur(R)};break;case 476:c["!margins"]=R;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),R.name&&(a.Sheets[r].CodeName=R.name),(R.above||R.left)&&(c["!outline"]={above:R.above,left:R.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),R.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!D.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=ur(d||u)),o.sheetRows&&c["!ref"]){var Z=gr(c["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>u.e.r&&(Z.e.r=u.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>u.e.c&&(Z.e.c=u.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ur(Z))}return _.length>0&&(c["!merges"]=_),E.length>0&&(c["!cols"]=E),O.length>0&&(c["!rows"]=O),c}function DFe(e,t,r,s,a,i,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Gr(t),t.z=t.z||Kt[14],t.v=ss(fn(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:s};switch(c.s=Ic(a.cellXfs,t,a),t.l&&i["!links"].push([tr(c),t.l]),t.c&&i["!comments"].push([tr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=A4(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,l?ft(e,18,rFe(t,c)):ft(e,7,eFe(t,c))):(c.t="str",l?ft(e,17,hFe(t,c)):ft(e,6,fFe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?ft(e,13,cFe(t,c)):ft(e,2,lFe(t,c)):l?ft(e,16,aFe(t,c)):ft(e,5,sFe(t,c)),!0;case"b":return c.t="b",l?ft(e,15,JIe(t,c)):ft(e,4,qIe(t,c)),!0;case"e":return c.t="e",l?ft(e,14,ZIe(t,c)):ft(e,3,XIe(t,c)),!0}return l?ft(e,12,VIe(t,c)):ft(e,1,zIe(t,c)),!0}function $Fe(e,t,r,s){var a=gr(t["!ref"]||"A1"),i,l="",o=[];ft(e,145);var c=Array.isArray(t),d=a.e.r;t["!rows"]&&(d=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=d;++u){l=Pn(u),IIe(e,t,a,u);var f=!1;if(u<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){u===a.s.r&&(o[m]=un(m)),i=o[m]+l;var g=c?(t[u]||[])[m]:t[i];if(!g){f=!1;continue}f=DFe(e,g,u,m,s,t,f)}}ft(e,146)}function MFe(e,t){!t||!t["!merges"]||(ft(e,177,jFe(t["!merges"].length)),t["!merges"].forEach(function(r){ft(e,176,bFe(r))}),ft(e,178))}function BFe(e,t){!t||!t["!cols"]||(ft(e,390),t["!cols"].forEach(function(r,s){r&&ft(e,60,CFe(s,r))}),ft(e,391))}function UFe(e,t){!t||!t["!ref"]||(ft(e,648),ft(e,649,OFe(gr(t["!ref"]))),ft(e,650))}function zFe(e,t,r){t["!links"].forEach(function(s){if(s[1].Target){var a=Ir(r,-1,s[1].Target.replace(/#.*$/,""),hr.HLINK);ft(e,494,wFe(s,a))}}),delete t["!links"]}function WFe(e,t,r,s){if(t["!comments"].length>0){var a=Ir(s,-1,"../drawings/vmlDrawing"+(r+1)+".vml",hr.VML);ft(e,551,p4("rId"+a)),t["!legacy"]=a}}function VFe(e,t,r,s){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:ur(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=fa(i);o.s.r==o.e.r&&(o.e.r=fa(t["!ref"]).e.r,i=ur(o));for(var c=0;c<l.length;++c){var d=l[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==s){d.Ref="'"+r.SheetNames[s]+"'!"+i;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+i}),ft(e,161,Dm(gr(i))),ft(e,162)}}function HFe(e,t,r){ft(e,133),ft(e,137,PFe(t,r)),ft(e,138),ft(e,134)}function qFe(e,t){t["!protect"]&&ft(e,535,RFe(t["!protect"]))}function GFe(e,t,r,s){var a=Ta(),i=r.SheetNames[e],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=gr(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],ft(a,129),(r.vbaraw||l["!outline"])&&ft(a,147,BIe(o,l["!outline"])),ft(a,148,DIe(c)),HFe(a,l,r.Workbook),BFe(a,l),$Fe(a,l,e,t),qFe(a,l),VFe(a,l,r,e),MFe(a,l),zFe(a,l,s),l["!margins"]&&ft(a,476,EFe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&UFe(a,l),WFe(a,l,e,s),ft(a,130),a.end()}function JFe(e){var t=[],r=e.match(/^<c:numCache>/),s;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var a=kr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){s=i.replace(/<.*?>/g,"")}),[t,a,s]}function KFe(e,t,r,s,a,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=JFe(f);u.s.r=u.s.c=0,u.e.c=o,d=un(o),m[0].forEach(function(g,x){l[d+Pn(x)]={t:"n",v:g,z:m[1]},c=x}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=ur(u)),l}function XFe(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(tW);return o&&E4(o[0],i,a,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}function YFe(e,t){e.l+=10;var r=Ys(e);return{name:r}}function ZFe(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return To(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}var T4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],QFe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],eDe=[],tDe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function qL(e,t){for(var r=0;r!=e.length;++r)for(var s=e[r],a=0;a!=t.length;++a){var i=t[a];if(s[i[0]]==null)s[i[0]]=i[1];else switch(i[2]){case"bool":typeof s[i[0]]=="string"&&(s[i[0]]=on(s[i[0]]));break;case"int":typeof s[i[0]]=="string"&&(s[i[0]]=parseInt(s[i[0]],10));break}}}function GL(e,t){for(var r=0;r!=t.length;++r){var s=t[r];if(e[s[0]]==null)e[s[0]]=s[1];else switch(s[2]){case"bool":typeof e[s[0]]=="string"&&(e[s[0]]=on(e[s[0]]));break;case"int":typeof e[s[0]]=="string"&&(e[s[0]]=parseInt(e[s[0]],10));break}}}function aW(e){GL(e.WBProps,T4),GL(e.CalcPr,tDe),qL(e.WBView,QFe),qL(e.Sheets,eDe),wf.date1904=on(e.WBProps.date1904)}function rDe(e){return!e.Workbook||!e.Workbook.WBProps?"false":on(e.Workbook.WBProps.date1904)?"true":"false"}var nDe="][*?/\\".split("");function iW(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return nDe.forEach(function(s){if(e.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function sDe(e,t,r){e.forEach(function(s,a){iW(s);for(var i=0;i<a;++i)if(s==e[i])throw new Error("Duplicate Sheet Name: "+s);if(r){var l=t&&t[a]&&t[a].CodeName||s;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function lW(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];sDe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)rIe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var aDe=/<\w+:workbook/;function iDe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},s=!1,a="xmlns",i={},l=0;if(e.replace(ta,function(c,d){var u=nr(c);switch(Bl(u[0])){case"<?xml":break;case"<workbook":c.match(aDe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[a];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":T4.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=on(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=zr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=kr(zr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":s=!0;break;case"</definedNames>":s=!1;break;case"<definedName":i={},i.Name=zr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),on(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=kr(zr(e.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":s=!0;break;case"</AlternateContent>":s=!1;break;case"<revisionPtr":break;default:if(!s&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),ou.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return aW(r),r}function oW(e){var t=[Mn];t[t.length]=kt("workbook",null,{xmlns:ou[0],"xmlns:r":ts.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(T4.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(s[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(s.codeName=e.Workbook.WBProps.CodeName,delete s.CodeName)),t[t.length]=kt("workbookPr",null,s);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Fr(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=kt("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=kt("definedName",Fr(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function lDe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=rk(e),r.name=Ys(e),r}function oDe(e,t){return t||(t=it(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),p4(e.strRelID,t),xs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function cDe(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Ys(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function dDe(e,t){t||(t=it(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ZU(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function uDe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function fDe(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=WTe(e),l=XLe(e,0,r),o=h4(e);e.l=s;var c={Name:i,Ptg:l};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function mDe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},s=[],a=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],fp[16]={n:"BrtFRTArchID$",f:uDe},To(e,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Bs(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;case 16:break;default:if(!d.T){if(!a||t.WTF&&s[s.length-1]!=37&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),aW(r),r.Names=i,r.supbooks=l,r}function hDe(e,t){ft(e,143);for(var r=0;r!=t.SheetNames.length;++r){var s=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:s,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};ft(e,156,oDe(a))}ft(e,144)}function pDe(e,t){t||(t=it(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return xs("SheetJS",t),xs(tp.version,t),xs(tp.version,t),xs("7262",t),t.length>t.l?t.slice(0,t.l):t}function xDe(e,t){t||(t=it(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function gDe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,s=0,a=-1,i=-1;s<r.length;++s)!r[s]||!r[s].Hidden&&a==-1?a=s:r[s].Hidden==1&&i==-1&&(i=s);i>a||(ft(e,135),ft(e,158,xDe(a)),ft(e,136))}}function yDe(e,t){var r=Ta();return ft(r,131),ft(r,128,pDe()),ft(r,153,dDe(e.Workbook&&e.Workbook.WBProps||null)),gDe(r,e),hDe(r,e),ft(r,132),r.end()}function vDe(e,t,r){return t.slice(-4)===".bin"?mDe(e,r):iDe(e,r)}function bDe(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?FFe(e,s,r,a,i,l,o):mIe(e,s,r,a,i,l,o)}function jDe(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?ZFe(e,s,r,a,i):XFe(e,s,r,a,i)}function _De(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?kRe():SRe()}function wDe(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?wRe():NRe()}function NDe(e,t,r,s){return t.slice(-4)===".bin"?bOe(e,r,s):oOe(e,r,s)}function kDe(e,t,r){return Uz(e,r)}function SDe(e,t,r){return t.slice(-4)===".bin"?CPe(e,r):NPe(e,r)}function CDe(e,t,r){return t.slice(-4)===".bin"?yRe(e,r):cRe(e,r)}function ADe(e,t,r){return t.slice(-4)===".bin"?iRe(e):sRe(e)}function EDe(e,t,r,s){return r.slice(-4)===".bin"?lRe(e,t,r,s):void 0}function TDe(e,t,r){return t.slice(-4)===".bin"?tRe(e,t,r):nRe(e,t,r)}function PDe(e,t,r){return(t.slice(-4)===".bin"?yDe:oW)(e)}function ODe(e,t,r,s,a){return(t.slice(-4)===".bin"?GFe:rW)(e,r,s,a)}function RDe(e,t,r){return(t.slice(-4)===".bin"?TOe:Mz)(e,r)}function LDe(e,t,r){return(t.slice(-4)===".bin"?TPe:Pz)(e,r)}function IDe(e,t,r){return(t.slice(-4)===".bin"?vRe:Vz)(e)}function FDe(e){return(e.slice(-4)===".bin"?rRe:zz)()}var cW=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,dW=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Di(e,t){var r=e.split(/\s+/),s=[];if(s[0]=r[0],r.length===1)return s;var a=e.match(cW),i,l,o,c;if(a)for(c=0;c!=a.length;++c)i=a[c].match(dW),(l=i[1].indexOf(":"))===-1?s[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),s[o]=i[2].slice(1,i[2].length-1));return s}function DDe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var s=e.match(cW),a,i,l,o;if(s)for(o=0;o!=s.length;++o)a=s[o].match(dW),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?l="xmlns"+a[1].slice(6):l=a[1].slice(i+1),r[l]=a[2].slice(1,a[2].length-1));return r}var J0;function $De(e,t){var r=J0[e]||kr(e);return r==="General"?Vd(t):Qa(r,t)}function MDe(e,t,r,s){var a=s;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=on(s);break;case"i2":case"int":a=parseInt(s,10);break;case"r4":case"float":a=parseFloat(s);break;case"date":case"dateTime.tz":a=fn(s);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[kr(t)]=a}function BDe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Po[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=np(e.v):e.w=Vd(e.v):e.w=$De(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var s=J0[t]||t||"General";if(r.cellNF&&(e.z=s),r.cellDates&&e.t=="n"&&lu(s)){var a=nc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function UDe(e,t,r){if(r.cellStyles&&t.Interior){var s=t.Interior;s.Pattern&&(s.patternType=eOe[s.Pattern]||s.Pattern)}e[t.ID]=t}function zDe(e,t,r,s,a,i,l,o,c,d){var u="General",f=s.StyleID,m={};d=d||{};var g=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&l&&(f=l.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&g.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":s.t="b",s.v=on(e);break;case"String":s.t="s",s.r=dL(kr(e)),s.v=e.indexOf("<")>-1?kr(t||e).replace(/<.*?>/g,""):s.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),s.v=(fn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),s.v!==s.v?s.v=kr(e):s.v<60&&(s.v=s.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":s.v===void 0&&(s.v=+e),s.t||(s.t="n");break;case"Error":s.t="e",s.v=nz[e],d.cellText!==!1&&(s.w=e);break;default:e==""&&t==""?s.t="z":(s.t="s",s.v=dL(t||e));break}if(BDe(s,u,d),d.cellFormula!==!1)if(s.Formula){var h=kr(s.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),s.f=_f(h,a),delete s.Formula,s.ArrayRange=="RC"?s.F=_f("RC:RC",a):s.ArrayRange&&(s.F=_f(s.ArrayRange,a),c.push([gr(s.F),s.F]))}else for(x=0;x<c.length;++x)a.r>=c[x][0].s.r&&a.r<=c[x][0].e.r&&a.c>=c[x][0].s.c&&a.c<=c[x][0].e.c&&(s.F=c[x][1]);d.cellStyles&&(g.forEach(function(p){!m.patternType&&p.patternType&&(m.patternType=p.patternType)}),s.s=m),s.StyleID!==void 0&&(s.ixfe=s.StyleID)}function WDe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function C_(e,t){var r=t||{};Lm();var s=sf(s4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof vr<"u"?s=vr.utils.decode(65001,$v(s)):s=zr(s));var a=s.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var l=Gr(r);return l.type="string",dm.to_workbook(s,l)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ye){a.indexOf("<"+Ye)>=0&&(i=!0)}),i)return k$e(s,r);J0={"General Number":"General","General Date":Kt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Kt[15],"Short Date":Kt[14],"Long Time":Kt[19],"Medium Time":Kt[18],"Short Time":Kt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Kt[2],Standard:Kt[4],Percent:Kt[10],Scientific:Kt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},f=[],m=r.dense?[]:{},g="",x={},h={},p=Di('<Data ss:Type="String">'),v=0,b=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},w={},_={},k="",C=0,T=[],P={},A={},S=0,E=[],O=[],I={},L=[],Z,H=!1,R=[],D=[],Y={},M=0,X=0,ne={Sheets:[],WBProps:{date1904:!1}},J={};ip.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"");for(var ue="";o=ip.exec(s);)switch(o[3]=(ue=o[3]).toLowerCase()){case"data":if(ue=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?zDe(s.slice(v,o.index),k,p,c[c.length-1][0]=="comment"?I:x,{c:b,r:j},w,L[b],h,R,r):(k="",p=Di(o[0]),v=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(x.c=O),(!r.sheetRows||r.sheetRows>j)&&x.v!==void 0&&(r.dense?(m[j]||(m[j]=[]),m[j][b]=x):m[un(b)+Pn(j)]=x),x.HRef&&(x.l={Target:kr(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(M=b+(parseInt(x.MergeAcross,10)|0),X=j+(parseInt(x.MergeDown,10)|0),T.push({s:{c:b,r:j},e:{c:M,r:X}})),!r.sheetStubs)x.MergeAcross?b=M+1:++b;else if(x.MergeAcross||x.MergeDown){for(var ke=b;ke<=M;++ke)for(var ve=j;ve<=X;++ve)(ke>b||ve>j)&&(r.dense?(m[ve]||(m[ve]=[]),m[ve][ke]={t:"z"}):m[un(ke)+Pn(ve)]={t:"z"});b=M+1}else++b;else x=DDe(o[0]),x.Index&&(b=+x.Index-1),b<N.s.c&&(N.s.c=b),b>N.e.c&&(N.e.c=b),o[0].slice(-2)==="/>"&&++b,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),o[0].slice(-2)==="/>"&&(h=Di(o[0]),h.Index&&(j=+h.Index-1)),b=0,++j):(h=Di(o[0]),h.Index&&(j=+h.Index-1),Y={},(h.AutoFitHeight=="0"||h.Height)&&(Y.hpx=parseInt(h.Height,10),Y.hpt=up(Y.hpx),D[j]=Y),h.Hidden=="1"&&(Y.hidden=!0,D[j]=Y));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));f.push(g),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(m["!ref"]=ur(N),r.sheetRows&&r.sheetRows<=N.e.r&&(m["!fullref"]=m["!ref"],N.e.r=r.sheetRows-1,m["!ref"]=ur(N))),T.length&&(m["!merges"]=T),L.length>0&&(m["!cols"]=L),D.length>0&&(m["!rows"]=D),u[g]=m}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=b=0,c.push([o[3],!1]),d=Di(o[0]),g=kr(d.Name),m=r.dense?[]:{},T=[],R=[],D=[],J={name:g,Hidden:0},ne.Sheets.push(J);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),L=[],H=!1}break;case"style":o[1]==="/"?UDe(w,_,r):_=Di(o[0]);break;case"numberformat":_.nf=kr(Di(o[0]).Format||"General"),J0[_.nf]&&(_.nf=J0[_.nf]);for(var je=0;je!=392&&Kt[je]!=_.nf;++je);if(je==392){for(je=57;je!=392;++je)if(Kt[je]==null){Pl(_.nf,je);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Z=Di(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!H&&Z.wpx>10){H=!0,Hs=Dz;for(var ie=0;ie<L.length;++ie)L[ie]&&bc(L[ie])}H&&bc(Z),L[Z.Index-1||L.length]=Z;for(var se=0;se<+Z.Span;++se)L[L.length]=Gr(Z);break;case"namedrange":if(o[1]==="/")break;ne.Names||(ne.Names=[]);var z=nr(o[0]),Te={Name:z.Name,Ref:_f(z.RefersTo.slice(1),{r:0,c:0})};ne.Sheets.length>0&&(Te.Sheet=ne.Sheets.length-1),ne.Names.push(Te);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?k+=s.slice(C,o.index):C=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;_.Interior=Di(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?h5e(P,ue,s.slice(S,o.index)):S=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));WDe(I),O.push(I)}else c.push([o[3],!1]),d=Di(o[0]),I={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var fe=Di(o[0]);m["!autofilter"]={ref:_f(fe.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return ZL(s,r);var Ie=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ie=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ie=!1}break;case"excelworkbook":switch(o[3]){case"date1904":ne.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ie=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ie=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(s.slice(S,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else S=o.index+o[0].length;break;case"header":m["!margins"]||Nd(m["!margins"]={},"xlml"),isNaN(+nr(o[0]).Margin)||(m["!margins"].header=+nr(o[0]).Margin);break;case"footer":m["!margins"]||Nd(m["!margins"]={},"xlml"),isNaN(+nr(o[0]).Margin)||(m["!margins"].footer=+nr(o[0]).Margin);break;case"pagemargins":var ce=nr(o[0]);m["!margins"]||Nd(m["!margins"]={},"xlml"),isNaN(+ce.Top)||(m["!margins"].top=+ce.Top),isNaN(+ce.Left)||(m["!margins"].left=+ce.Left),isNaN(+ce.Right)||(m["!margins"].right=+ce.Right),isNaN(+ce.Bottom)||(m["!margins"].bottom=+ce.Bottom);break;case"displayrighttoleft":ne.Views||(ne.Views=[]),ne.Views[0]||(ne.Views[0]={}),ne.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ie=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ie=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ie=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ie=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ie=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ie=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ie=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ie=!1}break;case"smarttags":break;default:Ie=!1;break}if(Ie||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?MDe(A,ue,E,s.slice(S,o.index)):(E=o,S=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ce={};return!r.bookSheets&&!r.bookProps&&(Ce.Sheets=u),Ce.SheetNames=f,Ce.Workbook=ne,Ce.SSF=Gr(Kt),Ce.Props=P,Ce.Custprops=A,Ce}function ck(e,t){switch(R4(t=t||{}),t.type||"base64"){case"base64":return C_(Za(e),t);case"binary":case"buffer":case"file":return C_(e,t);case"array":return C_(Rc(e),t)}}function VDe(e,t){var r=[];return e.Props&&r.push(p5e(e.Props,t)),e.Custprops&&r.push(x5e(e.Props,e.Custprops)),r.join("")}function HDe(){return""}function qDe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(s,a){var i=[];i.push(kt("NumberFormat",null,{"ss:Format":Fr(Kt[s.numFmtId])}));var l={"ss:ID":"s"+(21+a)};r.push(kt("Style",i.join(""),l))}),kt("Styles",r.join(""))}function uW(e){return kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+S4(e.Ref,{r:0,c:0})})}function GDe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],s=0;s<t.length;++s){var a=t[s];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(uW(a)))}return kt("Names",r.join(""))}function JDe(e,t,r,s){if(!e||!((s||{}).Workbook||{}).Names)return"";for(var a=s.Workbook.Names,i=[],l=0;l<a.length;++l){var o=a[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(uW(o)))}return i.join("")}function KDe(e,t,r,s){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[r])if(s.Workbook.Sheets[r].Hidden)a.push(kt("Visible",s.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(s.Workbook.Sheets[i]&&!s.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(As("ProtectContents","True")),e["!protect"].objects&&a.push(As("ProtectObjects","True")),e["!protect"].scenarios&&a.push(As("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(As("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(As("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&a.push("<"+l[1]+"/>")})),a.length==0?"":kt("WorksheetOptions",a.join(""),{xmlns:Ma.x})}function XDe(e){return e.map(function(t){var r=yTe(t.t||""),s=kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return kt("Comment",s,{"ss:Author":t.a})}).join("")}function YDe(e,t,r,s,a,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Fr(S4(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var c=_n(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Fr(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Fr(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=l.c||d[u].s.r!=l.r||(d[u].e.c>d[u].s.c&&(o["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(o["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",m="";switch(e.t){case"z":if(!s.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=Po[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Kt[14]);break;case"s":f="String",m=gTe(e.v||"");break}var g=Ic(s.cellXfs,e,s);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=l.c+1;var x=e.v!=null?m:"",h=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(h+=XDe(e.c)),kt("Cell",h,o)}function ZDe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=um(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function QDe(e,t,r,s){if(!e["!ref"])return"";var a=gr(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(p,v){bc(p);var b=!!p.width,j=B1(v,p),N={"ss:Index":v+1};b&&(N["ss:Width"]=cp(j.width)),p.hidden&&(N["ss:Hidden"]="1"),o.push(kt("Column",null,N))});for(var c=Array.isArray(e),d=a.s.r;d<=a.e.r;++d){for(var u=[ZDe(d,(e["!rows"]||[])[d])],f=a.s.c;f<=a.e.c;++f){var m=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>f)&&!(i[l].s.r>d)&&!(i[l].e.c<f)&&!(i[l].e.r<d)){(i[l].s.c!=f||i[l].s.r!=d)&&(m=!0);break}if(!m){var g={r:d,c:f},x=tr(g),h=c?(e[d]||[])[f]:e[x];u.push(YDe(h,x,e,t,r,s,g))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function e$e(e,t,r){var s=[],a=r.SheetNames[e],i=r.Sheets[a],l=i?JDe(i,t,e,r):"";return l.length>0&&s.push("<Names>"+l+"</Names>"),l=i?QDe(i,t,e,r):"",l.length>0&&s.push("<Table>"+l+"</Table>"),s.push(KDe(i,t,e,r)),s.join("")}function t$e(e,t){t||(t={}),e.SSF||(e.SSF=Gr(Kt)),e.SSF&&(Lm(),Vp(e.SSF),t.revssf=L1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ic(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(VDe(e,t)),r.push(HDe()),r.push(""),r.push("");for(var s=0;s<e.SheetNames.length;++s)r.push(kt("Worksheet",e$e(s,t,e),{"ss:Name":Fr(e.SheetNames[s])}));return r[2]=qDe(e,t),r[3]=GDe(e),Mn+kt("Workbook",r.join(""),{xmlns:Ma.ss,"xmlns:o":Ma.o,"xmlns:x":Ma.x,"xmlns:ss":Ma.ss,"xmlns:dt":Ma.dt,"xmlns:html":Ma.html})}function r$e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=JTe(r),r.length-r.l<=4)return t;var s=r.read_shift(4);if(s==0||s>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(s=r.read_shift(4),s!==1907505652)||(t.UnicodeClipboardFormat=KTe(r),s=r.read_shift(4),s==0||s>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var n$e=[60,1084,2066,2165,2175];function s$e(e,t,r,s,a){var i=s,l=[],o=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}l.push(o),r.l+=i;for(var c=ro(r,r.l),d=dk[c],u=0;d!=null&&n$e.indexOf(c)>-1;)i=ro(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=dk[c=ro(r,r.l)];var f=hs(l);Ss(f,0);var m=0;f.lens=[];for(var g=0;g<l.length;++g)f.lens.push(m),m+=l[g].length;if(f.length<s)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+s;return t.f(f,f.length,a)}function hl(e,t,r){if(e.t!=="z"&&e.XF){var s=0;try{s=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Kt[s])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Po[e.v]:s===0||s=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=np(e.v):e.w=Vd(e.v):e.w=Qa(s,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&s&&e.t=="n"&&lu(Kt[s]||String(s))){var a=nc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function tg(e,t,r){return{v:e,ixfe:t,t:r}}function a$e(e,t){var r={opts:{}},s={},a=t.dense?[]:{},i={},l={},o=null,c=[],d="",u={},f,m="",g,x,h,p,v={},b=[],j,N,w=[],_=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},T=function(rt){return rt<8?jd[rt]:rt<64&&_[rt-8]||jd[rt]},P=function(rt,wt,At){var $t=wt.XF.data;if(!(!$t||!$t.patternType||!At||!At.cellStyles)){wt.s={},wt.s.patternType=$t.patternType;var Wt;(Wt=op(T($t.icvFore)))&&(wt.s.fgColor={rgb:Wt}),(Wt=op(T($t.icvBack)))&&(wt.s.bgColor={rgb:Wt})}},A=function(rt,wt,At){if(!(Y>1)&&!(At.sheetRows&&rt.r>=At.sheetRows)){if(At.cellStyles&&wt.XF&&wt.XF.data&&P(rt,wt,At),delete wt.ixfe,delete wt.XF,f=rt,m=tr(rt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),rt.r<l.s.r&&(l.s.r=rt.r),rt.c<l.s.c&&(l.s.c=rt.c),rt.r+1>l.e.r&&(l.e.r=rt.r+1),rt.c+1>l.e.c&&(l.e.c=rt.c+1),At.cellFormula&&wt.f){for(var $t=0;$t<b.length;++$t)if(!(b[$t][0].s.c>rt.c||b[$t][0].s.r>rt.r)&&!(b[$t][0].e.c<rt.c||b[$t][0].e.r<rt.r)){wt.F=ur(b[$t][0]),(b[$t][0].s.c!=rt.c||b[$t][0].s.r!=rt.r)&&delete wt.f,wt.f&&(wt.f=""+Bs(b[$t][1],l,rt,R,S));break}}At.dense?(a[rt.r]||(a[rt.r]=[]),a[rt.r][rt.c]=wt):a[m]=wt}},S={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(S.password=t.password);var E,O=[],I=[],L=[],Z=[],H=!1,R=[];R.SheetNames=S.snames,R.sharedf=S.sharedf,R.arrayf=S.arrayf,R.names=[],R.XTI=[];var D=0,Y=0,M=0,X=[],ne=[],J;S.codepage=1200,ji(1200);for(var ue=!1;e.l<e.length-1;){var ke=e.l,ve=e.read_shift(2);if(ve===0&&D===10)break;var je=e.l===e.length?0:e.read_shift(2),ie=dk[ve];if(ie&&ie.f){if(t.bookSheets&&D===133&&ve!==133)break;if(D=ve,ie.r===2||ie.r==12){var se=e.read_shift(2);if(je-=2,!S.enc&&se!==ve&&((se&255)<<8|se>>8)!==ve)throw new Error("rt mismatch: "+se+"!="+ve);ie.r==12&&(e.l+=10,je-=10)}var z={};if(ve===10?z=ie.f(e,je,S):z=s$e(ve,ie,e,je,S),Y==0&&[9,521,1033,2057].indexOf(D)===-1)continue;switch(ve){case 34:r.opts.Date1904=k.WBProps.date1904=z;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(e.l=0),S.enc=z,!t.password)throw new Error("File is password-protected");if(z.valid==null)throw new Error("Encryption scheme unsupported");if(!z.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=z;break;case 66:var Te=Number(z);switch(Te){case 21010:Te=1200;break;case 32768:Te=1e4;break;case 32769:Te=1252;break}ji(S.codepage=Te),ue=!0;break;case 317:S.rrtabid=z;break;case 25:S.winlocked=z;break;case 439:r.opts.RefreshAll=z;break;case 12:r.opts.CalcCount=z;break;case 16:r.opts.CalcDelta=z;break;case 17:r.opts.CalcIter=z;break;case 13:r.opts.CalcMode=z;break;case 14:r.opts.CalcPrecision=z;break;case 95:r.opts.CalcSaveRecalc=z;break;case 15:S.CalcRefMode=z;break;case 2211:r.opts.FullCalc=z;break;case 129:z.fDialog&&(a["!type"]="dialog"),z.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),z.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:w.push(z);break;case 430:R.push([z]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(z);break;case 24:case 536:J={Name:z.Name,Ref:Bs(z.rgce,l,null,R,S)},z.itab>0&&(J.Sheet=z.itab-1),R.names.push(J),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(z),z.Name=="_xlnm._FilterDatabase"&&z.itab>0&&z.rgce&&z.rgce[0]&&z.rgce[0][0]&&z.rgce[0][0][0]=="PtgArea3d"&&(ne[z.itab-1]={ref:ur(z.rgce[0][0][1][2])});break;case 22:S.ExternCount=z;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(z),R.XTI=R.XTI.concat(z);break;case 2196:if(S.biff<8)break;J!=null&&(J.Comment=z[1]);break;case 18:a["!protect"]=z;break;case 19:z!==0&&S.WTF&&console.error("Password verifier: "+z);break;case 133:i[z.pos]=z,S.snames.push(z.name);break;case 10:{if(--Y)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,a["!ref"]=ur(l),t.sheetRows&&t.sheetRows<=l.e.r){var fe=l.e.r;l.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=ur(l),l.e.r=fe}l.e.r++,l.e.c++}O.length>0&&(a["!merges"]=O),I.length>0&&(a["!objects"]=I),L.length>0&&(a["!cols"]=L),Z.length>0&&(a["!rows"]=Z),k.Sheets.push(C)}d===""?u=a:s[d]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[ve]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[z.BIFFVer]||8),S.biffguess=z.BIFFVer==0,z.BIFFVer==0&&z.dt==4096&&(S.biff=5,ue=!0,ji(S.codepage=28591)),S.biff==8&&z.BIFFVer==0&&z.dt==16&&(S.biff=2),Y++)break;if(a=t.dense?[]:{},S.biff<8&&!ue&&(ue=!0,ji(S.codepage=t.codepage||1252)),S.biff<5||z.BIFFVer==0&&z.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var Ie={pos:e.l-je,name:d};i[Ie.pos]=Ie,S.snames.push(d)}else d=(i[ke]||{name:""}).name;z.dt==32&&(a["!type"]="chart"),z.dt==64&&(a["!type"]="macro"),O=[],I=[],S.arrayf=b=[],L=[],Z=[],H=!1,C={Hidden:(i[ke]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[z.r]||[])[z.c]:a[tr({c:z.c,r:z.r})])&&++z.c,j={ixfe:z.ixfe,XF:w[z.ixfe]||{},v:z.val,t:"n"},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t);break;case 5:case 517:j={ixfe:z.ixfe,XF:w[z.ixfe],v:z.val,t:z.t},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t);break;case 638:j={ixfe:z.ixfe,XF:w[z.ixfe],v:z.rknum,t:"n"},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t);break;case 189:for(var ce=z.c;ce<=z.C;++ce){var Ce=z.rkrec[ce-z.c][0];j={ixfe:Ce,XF:w[Ce],v:z.rkrec[ce-z.c][1],t:"n"},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:ce,r:z.r},j,t)}break;case 6:case 518:case 1030:{if(z.val=="String"){o=z;break}if(j=tg(z.val,z.cell.ixfe,z.tt),j.XF=w[j.ixfe],t.cellFormula){var Ye=z.formula;if(Ye&&Ye[0]&&Ye[0][0]&&Ye[0][0][0]=="PtgExp"){var at=Ye[0][0][1][0],pe=Ye[0][0][1][1],ye=tr({r:at,c:pe});v[ye]?j.f=""+Bs(z.formula,l,z.cell,R,S):j.F=((t.dense?(a[at]||[])[pe]:a[ye])||{}).F}else j.f=""+Bs(z.formula,l,z.cell,R,S)}M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A(z.cell,j,t),o=z}break;case 7:case 519:if(o)o.val=z,j=tg(z,o.cell.ixfe,"s"),j.XF=w[j.ixfe],t.cellFormula&&(j.f=""+Bs(o.formula,l,o.cell,R,S)),M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A(o.cell,j,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(z);var Pe=tr(z[0].s);if(g=t.dense?(a[z[0].s.r]||[])[z[0].s.c]:a[Pe],t.cellFormula&&g){if(!o||!Pe||!g)break;g.f=""+Bs(z[1],l,z[0],R,S),g.F=ur(z[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;v[tr(o.cell)]=z[0],g=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[tr(o.cell)],(g||{}).f=""+Bs(z[0],l,f,R,S)}}break;case 253:j=tg(c[z.isst].t,z.ixfe,"s"),c[z.isst].h&&(j.h=c[z.isst].h),j.XF=w[j.ixfe],M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:z.ixfe,XF:w[z.ixfe],t:"z"},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t));break;case 190:if(t.sheetStubs)for(var et=z.c;et<=z.C;++et){var We=z.ixfe[et-z.c];j={ixfe:We,XF:w[We],t:"z"},M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:et,r:z.r},j,t)}break;case 214:case 516:case 4:j=tg(z.val,z.ixfe,"s"),j.XF=w[j.ixfe],M>0&&(j.z=X[j.ixfe>>8&63]),hl(j,t,r.opts.Date1904),A({c:z.c,r:z.r},j,t);break;case 0:case 512:Y===1&&(l=z);break;case 252:c=z;break;case 1054:if(S.biff==4){X[M++]=z[1];for(var qe=0;qe<M+163&&Kt[qe]!=z[1];++qe);qe>=163&&Pl(z[1],M+163)}else Pl(z[1],z[0]);break;case 30:{X[M++]=z;for(var ot=0;ot<M+163&&Kt[ot]!=z;++ot);ot>=163&&Pl(z,M+163)}break;case 229:O=O.concat(z);break;case 93:I[z.cmo[0]]=S.lastobj=z;break;case 438:S.lastobj.TxO=z;break;case 127:S.lastobj.ImData=z;break;case 440:for(p=z[0].s.r;p<=z[0].e.r;++p)for(h=z[0].s.c;h<=z[0].e.c;++h)g=t.dense?(a[p]||[])[h]:a[tr({c:h,r:p})],g&&(g.l=z[1]);break;case 2048:for(p=z[0].s.r;p<=z[0].e.r;++p)for(h=z[0].s.c;h<=z[0].e.c;++h)g=t.dense?(a[p]||[])[h]:a[tr({c:h,r:p})],g&&g.l&&(g.l.Tooltip=z[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;g=t.dense?(a[z[0].r]||[])[z[0].c]:a[tr(z[0])];var Ct=I[z[2]];g||(t.dense?(a[z[0].r]||(a[z[0].r]=[]),g=a[z[0].r][z[0].c]={t:"z"}):g=a[tr(z[0])]={t:"z"},l.e.r=Math.max(l.e.r,z[0].r),l.s.r=Math.min(l.s.r,z[0].r),l.e.c=Math.max(l.e.c,z[0].c),l.s.c=Math.min(l.s.c,z[0].c)),g.c||(g.c=[]),x={a:z[1],t:Ct.TxO.t},g.c.push(x)}break;case 2173:GOe(w[z.ixfe],z.ext);break;case 125:{if(!S.cellStyles)break;for(;z.e>=z.s;)L[z.e--]={width:z.w/256,level:z.level||0,hidden:!!(z.flags&1)},H||(H=!0,w4(z.w/256)),bc(L[z.e+1])}break;case 520:{var He={};z.level!=null&&(Z[z.r]=He,He.level=z.level),z.hidden&&(Z[z.r]=He,He.hidden=!0),z.hpt&&(Z[z.r]=He,He.hpt=z.hpt,He.hpx=um(z.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Nd(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ve]]=z;break;case 161:a["!margins"]||Nd(a["!margins"]={}),a["!margins"].header=z.header,a["!margins"].footer=z.footer;break;case 574:z.RTL&&(k.Views[0].RTL=!0);break;case 146:_=z;break;case 2198:E=z;break;case 140:N=z;break;case 442:d?C.CodeName=z||C.name:k.WBProps.CodeName=z||"ThisWorkbook";break}}else ie||console.error("Missing Info for XLS Record 0x"+ve.toString(16)),e.l+=je}return r.SheetNames=Rn(i).sort(function(mt,rt){return Number(mt)-Number(rt)}).map(function(mt){return i[mt].name}),t.bookSheets||(r.Sheets=s),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&ne.forEach(function(mt,rt){r.Sheets[r.SheetNames[rt]]["!autofilter"]=mt}),r.Strings=c,r.SSF=Gr(Kt),S.enc&&(r.Encryption=S.enc),E&&(r.Themes=E),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),R.names.length>0&&(k.Names=R.names),r.Workbook=k,r}var K0={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function i$e(e,t,r){var s=Gt.find(e,"/!DocumentSummaryInformation");if(s&&s.size>0)try{var a=AL(s,nk,K0.DSI);for(var i in a)t[i]=a[i]}catch(d){if(r.WTF)throw d}var l=Gt.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=AL(l,sk,K0.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(cz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function l$e(e,t){var r=[],s=[],a=[],i=0,l,o=sL(nk,"n"),c=sL(sk,"n");if(e.Props)for(l=Rn(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?s:a).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=Rn(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?s:a).push([l[i],e.Custprops[l[i]]]);var d=[];for(i=0;i<a.length;++i)xz.indexOf(a[i][0])>-1||oz.indexOf(a[i][0])>-1||a[i][1]!=null&&d.push(a[i]);s.length&&Gt.utils.cfb_add(t,"/SummaryInformation",EL(s,K0.SI,c,sk)),(r.length||d.length)&&Gt.utils.cfb_add(t,"/DocumentSummaryInformation",EL(r,K0.DSI,o,nk,d.length?d:null,K0.UDI))}function P4(e,t){t||(t={}),R4(t),O1(),t.codepage&&P1(t.codepage);var r,s;if(e.FullPaths){if(Gt.find(e,"/encryption"))throw new Error("File is password-protected");r=Gt.find(e,"!CompObj"),s=Gt.find(e,"/Workbook")||Gt.find(e,"/Book")}else{switch(t.type){case"base64":e=za(Za(e));break;case"binary":e=za(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ss(e,0),s={content:e}}var a,i;if(r&&r$e(r),t.bookProps&&!t.bookSheets)a={};else{var l=mr?"buffer":"array";if(s&&s.content)a=a$e(s.content,t);else if((i=Gt.find(e,"PerfectOffice_MAIN"))&&i.content)a=wd.to_workbook(i.content,(t.type=l,t));else if((i=Gt.find(e,"NativeContent_MAIN"))&&i.content)a=wd.to_workbook(i.content,(t.type=l,t));else throw(i=Gt.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Gt.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=jRe(e))}var o={};return e.FullPaths&&i$e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function o$e(e,t){var r=t||{},s=Gt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Gt.utils.cfb_add(s,a,fW(e,r)),r.biff==8&&(e.Props||e.Custprops)&&l$e(e,s),r.biff==8&&e.vbaraw&&_Re(s,Gt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),s}var fp={0:{f:RIe},1:{f:UIe},2:{f:iFe},3:{f:KIe},4:{f:HIe},5:{f:nFe},6:{f:uFe},7:{f:QIe},8:{f:yFe},9:{f:gFe},10:{f:pFe},11:{f:xFe},12:{f:WIe},13:{f:oFe},14:{f:YIe},15:{f:GIe},16:{f:nW},17:{f:mFe},18:{f:tFe},19:{f:m4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:fDe},40:{},42:{},43:{f:uOe},44:{f:cOe},45:{f:hOe},46:{f:xOe},47:{f:pOe},48:{},49:{f:FTe},50:{},51:{f:XOe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Cz},62:{f:dFe},63:{f:aRe},64:{f:LFe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:TFe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:MIe},148:{f:FIe,p:16},151:{f:NFe},152:{},153:{f:cDe},154:{},155:{},156:{f:lDe},157:{},158:{},159:{T:1,f:SPe},160:{T:-1},161:{T:1,f:fu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vFe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:JOe},336:{T:-1},337:{f:QOe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:rk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Sz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:kFe},427:{f:SFe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:AFe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$Ie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:_Fe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:rk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:xRe},633:{T:1},634:{T:-1},635:{T:1,f:hRe},636:{T:-1},637:{f:BTe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YFe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:IFe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},dk={6:{f:k_},10:{f:$o},12:{f:Hn},13:{f:Hn},14:{f:Ln},15:{f:Ln},16:{f:Gs},17:{f:Ln},18:{f:Ln},19:{f:Hn},20:{f:IL},21:{f:IL},23:{f:Sz},24:{f:DL},25:{f:Ln},26:{},27:{},28:{f:I6e},29:{},34:{f:Ln},35:{f:FL},38:{f:Gs},39:{f:Gs},40:{f:Gs},41:{f:Gs},42:{f:Ln},43:{f:Ln},47:{f:GPe},49:{f:o6e},51:{f:Hn},60:{},61:{f:n6e},64:{f:Ln},65:{f:l6e},66:{f:Hn},77:{},80:{},81:{},82:{},85:{f:Hn},89:{},90:{},91:{},92:{f:q5e},93:{f:$6e},94:{},95:{f:Ln},96:{},97:{},99:{f:Ln},125:{f:Cz},128:{f:w6e},129:{f:J5e},130:{f:Hn},131:{f:Ln},132:{f:Ln},133:{f:K5e},134:{},140:{f:q6e},141:{f:Hn},144:{},146:{f:K6e},151:{},152:{},153:{},154:{},155:{},156:{f:Hn},157:{},158:{},160:{f:rPe},161:{f:Z6e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:v6e},190:{f:b6e},193:{f:$o},197:{},198:{},199:{},200:{},201:{},202:{f:Ln},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Hn},220:{},221:{f:Ln},222:{},224:{f:_6e},225:{f:H5e},226:{f:$o},227:{},229:{f:F6e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Y5e},253:{f:d6e},255:{f:Q5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:gz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ln},353:{f:$o},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:A6e},431:{f:Ln},432:{},433:{},434:{},437:{},438:{f:U6e},439:{f:Ln},440:{f:z6e},441:{},442:{f:Gp},443:{},444:{f:Hn},445:{},446:{},448:{f:$o},449:{f:r6e,r:2},450:{f:$o},512:{f:OL},513:{f:tPe},515:{f:S6e},516:{f:f6e},517:{f:LL},519:{f:nPe},520:{f:e6e},523:{},545:{f:$L},549:{f:PL},566:{},574:{f:a6e},638:{f:y6e},659:{},1048:{},1054:{f:h6e},1084:{},1212:{f:O6e},2048:{f:V6e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Zx},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:$o},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:X6e,r:12},2173:{f:qOe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ln,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:P6e,r:12},2197:{},2198:{f:BOe,r:12},2199:{},2200:{},2201:{},2202:{f:R6e,r:12},2203:{f:$o},2204:{},2205:{},2206:{},2207:{},2211:{f:t6e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Hn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Q6e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:J6e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:OL},1:{},2:{f:oPe},3:{f:iPe},4:{f:aPe},5:{f:LL},7:{f:dPe},8:{},9:{f:Zx},11:{},22:{f:Hn},30:{f:x6e},31:{},32:{},33:{f:$L},36:{},37:{f:PL},50:{f:uPe},62:{},52:{},67:{},68:{f:Hn},69:{},86:{},126:{},127:{f:sPe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:fPe},223:{},234:{},354:{},421:{},518:{f:k_},521:{f:Zx},536:{f:DL},547:{f:FL},561:{},579:{},1030:{f:k_},1033:{f:Zx},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function St(e,t,r,s){var a=t;if(!isNaN(a)){var i=s||(r||[]).length||0,l=e.next(4);l.write_shift(2,a),l.write_shift(2,i),i>0&&d4(r)&&e.push(r)}}function c$e(e,t,r,s){var a=(r||[]).length||0;if(a<=8224)return St(e,t,r,a);var i=t;if(!isNaN(i)){for(var l=r.parts||[],o=0,c=0,d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<a;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function Yp(e,t,r){return e||(e=it(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function d$e(e,t,r,s){var a=it(9);return Yp(a,e,t),yz(r,s||"b",a),a}function u$e(e,t,r){var s=it(8+2*r.length);return Yp(s,e,t),s.write_shift(1,r.length),s.write_shift(r.length,r,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function f$e(e,t,r,s){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ss(fn(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?St(e,2,cPe(r,s,a)):St(e,3,lPe(r,s,a));return;case"b":case"e":St(e,5,d$e(r,s,t.v,t.t));return;case"s":case"str":St(e,4,u$e(r,s,(t.v||"").slice(0,255)));return}St(e,1,Yp(null,r,s))}function m$e(e,t,r,s){var a=Array.isArray(t),i=gr(t["!ref"]||"A1"),l,o="",c=[];if(i.e.c>255||i.e.r>16383){if(s.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=ur(i)}for(var d=i.s.r;d<=i.e.r;++d){o=Pn(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=un(u)),l=c[u]+o;var f=a?(t[d]||[])[u]:t[l];f&&f$e(e,f,d,u)}}}function h$e(e,t){for(var r=t||{},s=Ta(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return St(s,r.biff==4?1033:r.biff==3?521:9,b4(e,16,r)),m$e(s,e.Sheets[e.SheetNames[a]],a,r),St(s,10),s.end()}function p$e(e,t,r){St(e,49,c6e({sz:12,name:"Arial"},r))}function x$e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&St(e,1054,p6e(a,t[a],r))})}function g$e(e,t){var r=it(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),St(e,2151,r),r=it(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),wz(gr(t["!ref"]||"A1"),r),r.write_shift(4,4),St(e,2152,r)}function y$e(e,t){for(var r=0;r<16;++r)St(e,224,RL({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(s){St(e,224,RL(s,0,t))})}function v$e(e,t){for(var r=0;r<t["!links"].length;++r){var s=t["!links"][r];St(e,440,W6e(s)),s[1].Tooltip&&St(e,2048,H6e(s))}delete t["!links"]}function b$e(e,t){if(t){var r=0;t.forEach(function(s,a){++r<=256&&s&&St(e,125,Y6e(B1(a,s),a))})}}function j$e(e,t,r,s,a){var i=16+Ic(a.cellXfs,t,a);if(t.v==null&&!t.bf){St(e,513,Jd(r,s,i));return}if(t.bf)St(e,6,JLe(t,r,s,a,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?ss(fn(t.v)):t.v;St(e,515,C6e(r,s,l,i));break;case"b":case"e":St(e,517,k6e(r,s,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=A4(a.Strings,t.v,a.revStrings);St(e,253,u6e(r,s,o,i))}else St(e,516,m6e(r,s,(t.v||"").slice(0,255),i,a));break;default:St(e,513,Jd(r,s,i))}}function _$e(e,t,r){var s=Ta(),a=r.SheetNames[e],i=r.Sheets[a]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",m=[],g=gr(i["!ref"]||"A1"),x=d?65536:16384;if(g.e.c>255||g.e.r>=x){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}St(s,2057,b4(r,16,t)),St(s,13,fi(1)),St(s,12,fi(100)),St(s,15,aa(!0)),St(s,17,aa(!1)),St(s,16,qd(.001)),St(s,95,aa(!0)),St(s,42,aa(!1)),St(s,43,aa(!1)),St(s,130,fi(1)),St(s,128,N6e()),St(s,131,aa(!1)),St(s,132,aa(!1)),d&&b$e(s,i["!cols"]),St(s,512,g6e(g,t)),d&&(i["!links"]=[]);for(var h=g.s.r;h<=g.e.r;++h){f=Pn(h);for(var p=g.s.c;p<=g.e.c;++p){h===g.s.r&&(m[p]=un(p)),u=m[p]+f;var v=c?(i[h]||[])[p]:i[u];v&&(j$e(s,v,h,p,t),d&&v.l&&i["!links"].push([u,v.l]))}}var b=o.CodeName||o.name||a;return d&&St(s,574,i6e((l.Views||[])[0])),d&&(i["!merges"]||[]).length&&St(s,229,D6e(i["!merges"])),d&&v$e(s,i),St(s,442,vz(b)),d&&g$e(s,i),St(s,10),s.end()}function w$e(e,t,r){var s=Ta(),a=(e||{}).Workbook||{},i=a.Sheets||[],l=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(St(s,2057,b4(e,5,r)),r.bookType=="xla"&&St(s,135),St(s,225,o?fi(1200):null),St(s,193,k5e(2)),c&&St(s,191),c&&St(s,192),St(s,226),St(s,92,G5e("SheetJS",r)),St(s,66,fi(o?1200:1252)),o&&St(s,353,fi(0)),o&&St(s,448),St(s,317,ePe(e.SheetNames.length)),o&&e.vbaraw&&St(s,211),o&&e.vbaraw){var d=l.CodeName||"ThisWorkbook";St(s,442,vz(d))}St(s,156,fi(17)),St(s,25,aa(!1)),St(s,18,aa(!1)),St(s,19,fi(0)),o&&St(s,431,aa(!1)),o&&St(s,444,fi(0)),St(s,61,s6e()),St(s,64,aa(!1)),St(s,141,fi(0)),St(s,34,aa(rDe(e)=="true")),St(s,14,aa(!0)),o&&St(s,439,aa(!1)),St(s,218,fi(0)),p$e(s,e,r),x$e(s,e.SSF,r),y$e(s,r),o&&St(s,352,aa(!1));var u=s.end(),f=Ta();o&&St(f,140,G6e()),o&&r.Strings&&c$e(f,252,Z5e(r.Strings)),St(f,10);var m=f.end(),g=Ta(),x=0,h=0;for(h=0;h<e.SheetNames.length;++h)x+=(o?12:11)+(o?2:1)*e.SheetNames[h].length;var p=u.length+x+m.length;for(h=0;h<e.SheetNames.length;++h){var v=i[h]||{};St(g,133,X5e({pos:p,hs:v.Hidden||0,dt:0,name:e.SheetNames[h]},r)),p+=t[h].length}var b=g.end();if(x!=b.length)throw new Error("BS8 "+x+" != "+b.length);var j=[];return u.length&&j.push(u),b.length&&j.push(b),m.length&&j.push(m),hs(j)}function N$e(e,t){var r=t||{},s=[];e&&!e.SSF&&(e.SSF=Gr(Kt)),e&&e.SSF&&(Lm(),Vp(e.SSF),r.revssf=L1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,L4(r),r.cellXfs=[],Ic(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)s[s.length]=_$e(a,r,e);return s.unshift(w$e(e,s,r)),hs(s)}function fW(e,t){for(var r=0;r<=e.SheetNames.length;++r){var s=e.Sheets[e.SheetNames[r]];if(!(!s||!s["!ref"])){var a=fa(s["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return N$e(e,t);case 4:case 3:case 2:return h$e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function JL(e,t){var r=t||{},s=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=a.index,o=i&&i.index||e.length,c=cTe(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(l=0;l<c.length;++l){var h=c[l].trim(),p=h.slice(0,3).toLowerCase();if(p=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(p!="<td"&&p!="<th")){var v=h.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var b=v[o].trim();if(b.match(/<t[dh]/i)){for(var j=b,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var w=0;w<x.length;++w){var _=x[w];_.s.c==u&&_.s.r<d&&d<=_.e.r&&(u=_.e.c+1,w=-1)}var k=nr(b.slice(0,b.indexOf(">")));m=k.colspan?+k.colspan:1,((f=+k.rowspan)>1||m>1)&&x.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+m-1}});var C=k.t||k["data-t"]||"";if(!j.length){u+=m;continue}if(j=BU(j),g.s.r>d&&(g.s.r=d),g.e.r<d&&(g.e.r=d),g.s.c>u&&(g.s.c=u),g.e.c<u&&(g.e.c=u),!j.length){u+=m;continue}var T={t:"s",v:j};r.raw||!j.trim().length||C=="s"||(j==="TRUE"?T={t:"b",v:!0}:j==="FALSE"?T={t:"b",v:!1}:isNaN(tl(j))?isNaN(cm(j).getDate())||(T={t:"d",v:fn(j)},r.cellDates||(T={t:"n",v:ss(T.v)}),T.z=r.dateNF||Kt[14]):T={t:"n",v:tl(j)}),r.dense?(s[d]||(s[d]=[]),s[d][u]=T):s[tr({r:d,c:u})]=T,u+=m}}}}return s["!ref"]=ur(g),x.length&&(s["!merges"]=x),s}function mW(e,t,r,s){for(var a=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>l)&&!(a[d].e.r<r||a[d].e.c<l)){if(a[d].s.r<r||a[d].s.c<l){o=-1;break}o=a[d].e.r-a[d].s.r+1,c=a[d].e.c-a[d].s.c+1;break}if(!(o<0)){var u=tr({r,c:l}),f=s.dense?(e[r]||[])[l]:e[u],m=f&&f.v!=null&&(f.h||n4(f.w||(Ll(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),s.editable?m='<span contenteditable="true">'+m+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),g.id=(s.id||"sjs")+"-"+u,i.push(kt("td",m,g))}}var x="<tr>";return x+i.join("")+"</tr>"}var hW='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',pW="</body></html>";function k$e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Lc(JL(r[0],t),t);var s=M4();return r.forEach(function(a,i){B4(s,JL(a,t),"Sheet"+(i+1))}),s}function xW(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function gW(e,t){var r=t||{},s=r.header!=null?r.header:hW,a=r.footer!=null?r.footer:pW,i=[s],l=fa(e["!ref"]);r.dense=Array.isArray(e),i.push(xW(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(mW(e,l,o,r));return i.push("</table>"+a),i.join("")}function yW(e,t,r){var s=r||{},a=0,i=0;if(s.origin!=null)if(typeof s.origin=="number")a=s.origin;else{var l=typeof s.origin=="string"?_n(s.origin):s.origin;a=l.r,i=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var u=fa(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),a==-1&&(d.e.r=a=u.e.r+1)}var f=[],m=0,g=e["!rows"]||(e["!rows"]=[]),x=0,h=0,p=0,v=0,b=0,j=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&h<c;++x){var N=o[x];if(KL(N)){if(s.display)continue;g[h]={hidden:!0}}var w=N.children;for(p=v=0;p<w.length;++p){var _=w[p];if(!(s.display&&KL(_))){var k=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):BU(_.innerHTML),C=_.getAttribute("data-z")||_.getAttribute("z");for(m=0;m<f.length;++m){var T=f[m];T.s.c==v+i&&T.s.r<h+a&&h+a<=T.e.r&&(v=T.e.c+1-i,m=-1)}j=+_.getAttribute("colspan")||1,((b=+_.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:h+a,c:v+i},e:{r:h+a+(b||1)-1,c:v+i+(j||1)-1}});var P={t:"s",v:k},A=_.getAttribute("data-t")||_.getAttribute("t")||"";k!=null&&(k.length==0?P.t=A||"z":s.raw||k.trim().length==0||A=="s"||(k==="TRUE"?P={t:"b",v:!0}:k==="FALSE"?P={t:"b",v:!1}:isNaN(tl(k))?isNaN(cm(k).getDate())||(P={t:"d",v:fn(k)},s.cellDates||(P={t:"n",v:ss(P.v)}),P.z=s.dateNF||Kt[14]):P={t:"n",v:tl(k)})),P.z===void 0&&C!=null&&(P.z=C);var S="",E=_.getElementsByTagName("A");if(E&&E.length)for(var O=0;O<E.length&&!(E[O].hasAttribute("href")&&(S=E[O].getAttribute("href"),S.charAt(0)!="#"));++O);S&&S.charAt(0)!="#"&&(P.l={Target:S}),s.dense?(e[h+a]||(e[h+a]=[]),e[h+a][v+i]=P):e[tr({c:v+i,r:h+a})]=P,d.e.c<v+i&&(d.e.c=v+i),v+=j}}++h}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,h-1+a),e["!ref"]=ur(d),h>=c&&(e["!fullref"]=ur((d.e.r=o.length-x+h-1+a,d))),e}function vW(e,t){var r=t||{},s=r.dense?[]:{};return yW(s,e,t)}function S$e(e,t){return Lc(vW(e,t),t)}function KL(e){var t="",r=C$e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function C$e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function A$e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(s,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kr(t.replace(/<[^>]*>/g,""));return[r]}var XL={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function bW(e,t){var r=t||{},s=s4(e),a=[],i,l,o={name:""},c="",d=0,u,f,m={},g=[],x=r.dense?[]:{},h,p,v={value:""},b="",j=0,N=[],w=-1,_=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,T={},P=[],A={},S=0,E=0,O=[],I=1,L=1,Z=[],H={Names:[]},R={},D=["",""],Y=[],M={},X="",ne=0,J=!1,ue=!1,ke=0;for(ip.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=ip.exec(s);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"":h[1]==="/"?(k.e.c>=k.s.c&&k.e.r>=k.s.r?x["!ref"]=ur(k):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(x["!fullref"]=x["!ref"],k.e.r=r.sheetRows-1,x["!ref"]=ur(k)),P.length&&(x["!merges"]=P),O.length&&(x["!rows"]=O),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),g.push(u.name),m[u.name]=x,ue=!1):h[0].charAt(h[0].length-2)!=="/"&&(u=nr(h[0],!1),w=_=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,x=r.dense?[]:{},P=[],O=[],ue=!0);break;case"table-row-group":h[1]==="/"?--C:++C;break;case"table-row":case"":if(h[1]==="/"){w+=I,I=1;break}if(f=nr(h[0],!1),f.?w=f.-1:w==-1&&(w=0),I=+f["number-rows-repeated"]||1,I<10)for(ke=0;ke<I;++ke)C>0&&(O[w+ke]={level:C});_=-1;break;case"covered-table-cell":h[1]!=="/"&&++_,r.sheetStubs&&(r.dense?(x[w]||(x[w]=[]),x[w][_]={t:"z"}):x[tr({r:w,c:_})]={t:"z"}),b="",N=[];break;case"table-cell":case"":if(h[0].charAt(h[0].length-2)==="/")++_,v=nr(h[0],!1),L=parseInt(v["number-columns-repeated"]||"1",10),p={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(p.f=HL(kr(v.formula))),(v.||v["value-type"])=="string"&&(p.t="s",p.v=kr(v["string-value"]||""),r.dense?(x[w]||(x[w]=[]),x[w][_]=p):x[tr({r:w,c:_})]=p),_+=L-1;else if(h[1]!=="/"){++_,b="",j=0,N=[],L=1;var ve=I?w+I-1:w;if(_>k.e.c&&(k.e.c=_),_<k.s.c&&(k.s.c=_),w<k.s.r&&(k.s.r=w),ve>k.e.r&&(k.e.r=ve),v=nr(h[0],!1),Y=[],M={},p={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=kr(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(S=parseInt(v["number-matrix-rows-spanned"],10)||0,E=parseInt(v["number-matrix-columns-spanned"],10)||0,A={s:{r:w,c:_},e:{r:w+S-1,c:_+E-1}},p.F=ur(A),Z.push([A,p.F])),v.formula)p.f=HL(v.formula);else for(ke=0;ke<Z.length;++ke)w>=Z[ke][0].s.r&&w<=Z[ke][0].e.r&&_>=Z[ke][0].s.c&&_<=Z[ke][0].e.c&&(p.F=Z[ke][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(S=parseInt(v["number-rows-spanned"],10)||0,E=parseInt(v["number-columns-spanned"],10)||0,A={s:{r:w,c:_},e:{r:w+S-1,c:_+E-1}},P.push(A)),v["number-columns-repeated"]&&(L=parseInt(v["number-columns-repeated"],10)),p.t){case"boolean":p.t="b",p.v=on(v["boolean-value"]);break;case"float":p.t="n",p.v=parseFloat(v.value);break;case"percentage":p.t="n",p.v=parseFloat(v.value);break;case"currency":p.t="n",p.v=parseFloat(v.value);break;case"date":p.t="d",p.v=fn(v["date-value"]),r.cellDates||(p.t="n",p.v=ss(p.v)),p.z="m/d/yy";break;case"time":p.t="n",p.v=iTe(v["time-value"])/86400,r.cellDates&&(p.t="d",p.v=I1(p.v)),p.z="HH:MM:SS";break;case"number":p.t="n",p.v=parseFloat(v.);break;default:if(p.t==="string"||p.t==="text"||!p.t)p.t="s",v["string-value"]!=null&&(b=kr(v["string-value"]),N=[]);else throw new Error("Unsupported value type "+p.t)}}else{if(J=!1,p.t==="s"&&(p.v=b||"",N.length&&(p.R=N),J=j==0),R.Target&&(p.l=R),Y.length>0&&(p.c=Y,Y=[]),b&&r.cellText!==!1&&(p.w=b),J&&(p.t="z",delete p.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var je=0;je<I;++je){if(L=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(x[w+je]||(x[w+je]=[]),x[w+je][_]=je==0?p:Gr(p);--L>0;)x[w+je][_+L]=Gr(p);else for(x[tr({r:w+je,c:_})]=p;--L>0;)x[tr({r:w+je,c:_+L})]=Gr(p);k.e.c<=_&&(k.e.c=_)}L=parseInt(v["number-columns-repeated"]||"1",10),_+=L-1,L=0,p={},b="",N=[]}R={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=a.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&a.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=a.pop())[0]!==h[3])throw"Bad state: "+i;M.t=b,N.length&&(M.R=N),M.a=X,Y.push(M)}else h[0].charAt(h[0].length-2)!=="/"&&a.push([h[3],!1]);X="",ne=0,b="",j=0,N=[];break;case"creator":h[1]==="/"?X=s.slice(ne,h.index):ne=h.index+h[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=a.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&a.push([h[3],!1]);b="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(T[o.name]=c,(i=a.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(c="",o=nr(h[0],!1),a.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":l=nr(h[0],!1),c+=XL[h[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":l=nr(h[0],!1),c+=XL[h[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=s.slice(d,h.index);break}else d=h.index+h[0].length;break;case"named-range":l=nr(h[0],!1),D=S_(l["cell-range-address"]);var ie={Name:l.name,Ref:D[0]+"!"+D[1]};ue&&(ie.Sheet=g.length),H.Names.push(ie);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(h[1]==="/"&&(!v||!v["string-value"])){var se=A$e(s.slice(j,h.index));b=(b.length>0?b+`
`:"")+se[0]}else nr(h[0],!1),j=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{D=S_(nr(h[0])["target-range-address"]),m[D[0]]["!autofilter"]={ref:D[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(R=nr(h[0],!1),!R.href)break;R.Target=kr(R.href),delete R.href,R.Target.charAt(0)=="#"&&R.Target.indexOf(".")>-1?(D=S_(R.Target.slice(1)),R.Target="#"+D[0]+"!"+D[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(h)}}var z={Sheets:m,SheetNames:g,Workbook:H};return r.bookSheets&&delete z.Sheets,z}function YL(e,t){t=t||{},ui(e,"META-INF/manifest.xml")&&i5e(Vn(e,"META-INF/manifest.xml"),t);var r=Wa(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var s=bW(zr(r),t);return ui(e,"meta.xml")&&(s.Props=iz(Vn(e,"meta.xml"))),s}function ZL(e,t){return bW(e,t)}var E$e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ap({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Mn+t}}(),QL=function(){var e=function(i){return Fr(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,s=function(i,l,o){var c=[];c.push('      <table:table table:name="'+Fr(l.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,u=0,f=fa(i["!ref"]||"A1"),m=i["!merges"]||[],g=0,x=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var h="",p=i["!rows"]||[];for(d=0;d<f.s.r;++d)h=p[d]?' table:style-name="ro'+p[d].ods+'"':"",c.push("        <table:table-row"+h+`></table:table-row>
`);for(;d<=f.e.r;++d){for(h=p[d]?' table:style-name="ro'+p[d].ods+'"':"",c.push("        <table:table-row"+h+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var v=!1,b={},j="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>u)&&!(m[g].s.r>d)&&!(m[g].e.c<u)&&!(m[g].e.r<d)){(m[g].s.c!=u||m[g].s.r!=d)&&(v=!0),b["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,b["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(v){c.push(r);continue}var N=tr({r:d,c:u}),w=x?(i[d]||[])[u]:i[N];if(w&&w.f&&(b["table:formula"]=Fr(eIe(w.f)),w.F&&w.F.slice(0,N.length)==N)){var _=fa(w.F);b["table:number-matrix-columns-spanned"]=_.e.c-_.s.c+1,b["table:number-matrix-rows-spanned"]=_.e.r-_.s.r+1}if(!w){c.push(t);continue}switch(w.t){case"b":j=w.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=w.v?"true":"false";break;case"n":j=w.w||String(w.v||0),b["office:value-type"]="float",b["office:value"]=w.v||0;break;case"s":case"str":j=w.v==null?"":w.v,b["office:value-type"]="string";break;case"d":j=w.w||fn(w.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=fn(w.v).toISOString(),b["table:style-name"]="ce1";break;default:c.push(t);continue}var k=e(j);if(w.l&&w.l.Target){var C=w.l.Target;C=C.charAt(0)=="#"?"#"+tIe(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),k=kt("text:a",k,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+kt("table:table-cell",kt("text:p",k,{}),b)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;bc(f),f.ods=o;var m=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var c=[Mn],d=ap({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=ap({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(az().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),a(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=l.SheetNames.length;++f)c.push(s(l.Sheets[l.SheetNames[f]],l,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function jW(e,t){if(t.bookType=="fods")return QL(e,t);var r=e4(),s="",a=[],i=[];return s="mimetype",fr(r,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",fr(r,s,QL(e,t)),a.push([s,"text/xml"]),i.push([s,"ContentFile"]),s="styles.xml",fr(r,s,E$e(e,t)),a.push([s,"text/xml"]),i.push([s,"StylesFile"]),s="meta.xml",fr(r,s,Mn+az()),a.push([s,"text/xml"]),i.push([s,"MetadataFile"]),s="manifest.rdf",fr(r,s,c5e(i)),a.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",fr(r,s,l5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Kd(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function uk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):zr(Rc(e))}function T$e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):za(Nl(e))}function P$e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var s=0;s<t.length;++s)if(e[r+s]!=t[s])continue e;return!0}return!1}function _c(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(a){r.set(a,s),s+=a.length}),r}function eI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function O$e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,s=e[t+14]&1,a=t+13;a>=t;--a)s=s*256+e[a];return(e[t+15]&128?-s:s)*Math.pow(10,r-6176)}function R$e(e,t,r){var s=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,s-6176);e[t+15]|=s>>7,e[t+14]|=(s&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function mp(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function Rr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function On(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Cr(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],a=mp(e,r),i=a&7;a=Math.floor(a/8);var l=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=mp(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var d={data:o,type:i};t[a]==null?t[a]=[d]:t[a].push(d)}return t}function ws(e){var t=[];return e.forEach(function(r,s){r.forEach(function(a){a.data&&(t.push(Rr(s*8+a.type)),a.type==2&&t.push(Rr(a.data.length)),t.push(a.data))})}),_c(t)}function O4(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function oi(e){for(var t,r=[],s=[0];s[0]<e.length;){var a=mp(e,s),i=Cr(e.slice(s[0],s[0]+a));s[0]+=a;var l={id:On(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=Cr(o.data),d=On(c[3][0].data);l.messages.push({meta:c,data:e.slice(s[0],s[0]+d)}),s[0]+=d}),(t=i[3])!=null&&t[0]&&(l.merge=On(i[3][0].data)>>>0>0),r.push(l)}return r}function ku(e){var t=[];return e.forEach(function(r){var s=[];s[1]=[{data:Rr(r.id),type:0}],s[2]=[],r.merge!=null&&(s[3]=[{data:Rr(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(l){a.push(l.data),l.meta[3]=[{type:0,data:Rr(l.data.length)}],s[2].push({data:ws(l.meta),type:2})});var i=ws(s);t.push(Rr(i.length)),t.push(i),a.forEach(function(l){return t.push(l)})}),_c(t)}function L$e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=mp(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}a.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[_c(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(a.push(a[0].slice(-c)),d-=c;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-c,-c+d))}}var u=_c(a);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function ci(e){for(var t=[],r=0;r<e.length;){var s=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(L$e(s,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return _c(t)}function Su(e){for(var t=[],r=0;r<e.length;){var s=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Rr(s),l=i.length;t.push(i),s<=60?(l++,t.push(new Uint8Array([s-1<<2]))):s<=256?(l+=2,t.push(new Uint8Array([240,s-1&255]))):s<=65536?(l+=3,t.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(l+=4,t.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(l+=5,t.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),t.push(e.slice(r,r+s)),l+=s,a[0]=0,a[1]=l&255,a[2]=l>>8&255,a[3]=l>>16&255,r+=s}return _c(t)}function I$e(e,t,r,s){var a=Kd(e),i=a.getUint32(4,!0),l=(s>1?12:8)+eI(i&(s>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=a.getUint32(l,!0),l+=4),l+=eI(i&(s>1?12288:4096))*4,i&16&&(c=a.getUint32(l,!0),l+=4),i&32&&(d=a.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+a.getFloat64(l,!0)*1e3),l+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function F$e(e,t,r){var s=Kd(e),a=s.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);a&1&&(c=O$e(e,i),i+=16),a&2&&(d=s.getFloat64(i,!0),i+=8),a&4&&(u.setTime(u.getTime()+s.getFloat64(i,!0)*1e3),i+=8),a&8&&(o=s.getUint32(i,!0),i+=4),a&16&&(l=s.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function A_(e,t){var r=new Uint8Array(32),s=Kd(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,R$e(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,s.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,s.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(8,i,!0),r.slice(0,a)}function E_(e,t){var r=new Uint8Array(32),s=Kd(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,s.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,s.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,s.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(4,i,!0),r.slice(0,a)}function D$e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return I$e(e,t,r,e[0]);case 5:return F$e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ms(e){var t=Cr(e);return mp(t[1][0].data)}function tI(e,t){var r=Cr(t.data),s=On(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(l){var o=Cr(l.data),c=On(o[1][0].data)>>>0;switch(s){case 1:i[c]=uk(o[3][0].data);break;case 8:{var d=e[Ms(o[9][0].data)][0],u=Cr(d.data),f=e[Ms(u[1][0].data)][0],m=On(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=Cr(f.data);i[c]=g[3].map(function(x){return uk(x.data)}).join("")}break}}),i}function $$e(e,t){var r,s,a,i,l,o,c,d,u,f,m,g,x,h,p=Cr(e),v=On(p[1][0].data)>>>0,b=On(p[2][0].data)>>>0,j=((s=(r=p[8])==null?void 0:r[0])==null?void 0:s.data)&&On(p[8][0].data)>0||!1,N,w;if((i=(a=p[7])==null?void 0:a[0])!=null&&i.data&&t!=0)N=(o=(l=p[7])==null?void 0:l[0])==null?void 0:o.data,w=(d=(c=p[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=p[4])==null?void 0:u[0])!=null&&f.data&&t!=1)N=(g=(m=p[4])==null?void 0:m[0])==null?void 0:g.data,w=(h=(x=p[3])==null?void 0:x[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var _=j?4:1,k=Kd(N),C=[],T=0;T<N.length/2;++T){var P=k.getUint16(T*2,!0);P<65535&&C.push([T,P])}if(C.length!=b)throw"Expected ".concat(b," cells, found ").concat(C.length);var A=[];for(T=0;T<C.length-1;++T)A[C[T][0]]=w.subarray(C[T][1]*_,C[T+1][1]*_);return C.length>=1&&(A[C[C.length-1][0]]=w.subarray(C[C.length-1][1]*_)),{R:v,cells:A}}function M$e(e,t){var r,s=Cr(t.data),a=(r=s==null?void 0:s[7])!=null&&r[0]?On(s[7][0].data)>>>0>0?1:0:-1,i=O4(s[5],function(l){return $$e(l,a)});return{nrows:On(s[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function B$e(e,t,r){var s,a=Cr(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(On(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(On(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=ur(i);var l=Cr(a[4][0].data),o=tI(e,e[Ms(l[4][0].data)][0]),c=(s=l[17])!=null&&s[0]?tI(e,e[Ms(l[17][0].data)][0]):[],d=Cr(l[3][0].data),u=0;d[1].forEach(function(f){var m=Cr(f.data),g=e[Ms(m[2][0].data)][0],x=On(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var h=M$e(e,g);h.data.forEach(function(p,v){p.forEach(function(b,j){var N=tr({r:u+v,c:j}),w=D$e(b,o,c);w&&(r[N]=w)})}),u+=h.nrows})}function U$e(e,t){var r=Cr(t.data),s={"!ref":"A1"},a=e[Ms(r[2][0].data)],i=On(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return B$e(e,a[0],s),s}function z$e(e,t){var r,s=Cr(t.data),a={name:(r=s[1])!=null&&r[0]?uk(s[1][0].data):"",sheets:[]},i=O4(s[2],Ms);return i.forEach(function(l){e[l].forEach(function(o){var c=On(o.meta[1][0].data);c==6e3&&a.sheets.push(U$e(e,o))})}),a}function W$e(e,t){var r=M4(),s=Cr(t.data),a=O4(s[1],Ms);if(a.forEach(function(i){e[i].forEach(function(l){var o=On(l.meta[1][0].data);if(o==2){var c=z$e(e,l);c.sheets.forEach(function(d,u){B4(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function T_(e){var t,r,s,a,i={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=ci(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=oi(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,l.push(f.id)})}}),!l.length)throw new Error("File has no messages");var o=((a=(s=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:s[1])==null?void 0:a[0].data)&&On(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=On(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return W$e(i,o)}function V$e(e,t,r){var s,a,i,l;if(!((s=e[6])!=null&&s[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&On(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,d=Kd(e[7][0].data),u=0,f=[],m=Kd(e[4][0].data),g=0,x=[],h=0;h<t.length;++h){if(t[h]==null){d.setUint16(h*2,65535,!0),m.setUint16(h*2,65535);continue}d.setUint16(h*2,u,!0),m.setUint16(h*2,g,!0);var p,v;switch(typeof t[h]){case"string":p=A_({t:"s",v:t[h]},r),v=E_({t:"s",v:t[h]},r);break;case"number":p=A_({t:"n",v:t[h]},r),v=E_({t:"n",v:t[h]},r);break;case"boolean":p=A_({t:"b",v:t[h]},r),v=E_({t:"b",v:t[h]},r);break;default:throw new Error("Unsupported value "+t[h])}f.push(p),u+=p.length,x.push(v),g+=v.length,++c}for(e[2][0].data=Rr(c);h<e[7][0].data.length/2;++h)d.setUint16(h*2,65535,!0),m.setUint16(h*2,65535,!0);return e[6][0].data=_c(f),e[3][0].data=_c(x),c}function H$e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=fa(r["!ref"]);s.s.r=s.s.c=0;var a=!1;s.e.c>9&&(a=!0,s.e.c=9),s.e.r>49&&(a=!0,s.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(ur(s)));var i=Yv(r,{range:s,header:1}),l=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(ne){typeof ne=="string"&&l.push(ne)})});var o={},c=[],d=Gt.read(t.numbers,{type:"base64"});d.FileIndex.map(function(X,ne){return[X,d.FullPaths[ne]]}).forEach(function(X){var ne=X[0],J=X[1];if(ne.type==2&&ne.name.match(/\.iwa/)){var ue=ne.content,ke=ci(ue),ve=oi(ke);ve.forEach(function(je){c.push(je.id),o[je.id]={deps:[],location:J,type:On(je.messages[0].meta[1][0].data)}})}}),c.sort(function(X,ne){return X-ne});var u=c.filter(function(X){return X>1}).map(function(X){return[X,Rr(X)]});d.FileIndex.map(function(X,ne){return[X,d.FullPaths[ne]]}).forEach(function(X){var ne=X[0];if(X[1],!!ne.name.match(/\.iwa/)){var J=oi(ci(ne.content));J.forEach(function(ue){ue.messages.forEach(function(ke){u.forEach(function(ve){ue.messages.some(function(je){return On(je.meta[1][0].data)!=11006&&P$e(je.data,ve[1])})&&o[ve[0]].deps.push(ue.id)})})})}});for(var f=Gt.find(d,o[1].location),m=oi(ci(f.content)),g,x=0;x<m.length;++x){var h=m[x];h.id==1&&(g=h)}var p=Ms(Cr(g.messages[0].data)[1][0].data);for(f=Gt.find(d,o[p].location),m=oi(ci(f.content)),x=0;x<m.length;++x)h=m[x],h.id==p&&(g=h);for(p=Ms(Cr(g.messages[0].data)[2][0].data),f=Gt.find(d,o[p].location),m=oi(ci(f.content)),x=0;x<m.length;++x)h=m[x],h.id==p&&(g=h);for(p=Ms(Cr(g.messages[0].data)[2][0].data),f=Gt.find(d,o[p].location),m=oi(ci(f.content)),x=0;x<m.length;++x)h=m[x],h.id==p&&(g=h);var v=Cr(g.messages[0].data);{v[6][0].data=Rr(s.e.r+1),v[7][0].data=Rr(s.e.c+1);var b=Ms(v[46][0].data),j=Gt.find(d,o[b].location),N=oi(ci(j.content));{for(var w=0;w<N.length&&N[w].id!=b;++w);if(N[w].id!=b)throw"Bad ColumnRowUIDMapArchive";var _=Cr(N[w].messages[0].data);_[1]=[],_[2]=[],_[3]=[];for(var k=0;k<=s.e.c;++k){var C=[];C[1]=C[2]=[{type:0,data:Rr(k+420690)}],_[1].push({type:2,data:ws(C)}),_[2].push({type:0,data:Rr(k)}),_[3].push({type:0,data:Rr(k)})}_[4]=[],_[5]=[],_[6]=[];for(var T=0;T<=s.e.r;++T)C=[],C[1]=C[2]=[{type:0,data:Rr(T+726270)}],_[4].push({type:2,data:ws(C)}),_[5].push({type:0,data:Rr(T)}),_[6].push({type:0,data:Rr(T)});N[w].messages[0].data=ws(_)}j.content=Su(ku(N)),j.size=j.content.length,delete v[46];var P=Cr(v[4][0].data);{P[7][0].data=Rr(s.e.r+1);var A=Cr(P[1][0].data),S=Ms(A[2][0].data);j=Gt.find(d,o[S].location),N=oi(ci(j.content));{if(N[0].id!=S)throw"Bad HeaderStorageBucket";var E=Cr(N[0].messages[0].data);for(T=0;T<i.length;++T){var O=Cr(E[2][0].data);O[1][0].data=Rr(T),O[4][0].data=Rr(i[T].length),E[2][T]={type:E[2][0].type,data:ws(O)}}N[0].messages[0].data=ws(E)}j.content=Su(ku(N)),j.size=j.content.length;var I=Ms(P[2][0].data);j=Gt.find(d,o[I].location),N=oi(ci(j.content));{if(N[0].id!=I)throw"Bad HeaderStorageBucket";for(E=Cr(N[0].messages[0].data),k=0;k<=s.e.c;++k)O=Cr(E[2][0].data),O[1][0].data=Rr(k),O[4][0].data=Rr(s.e.r+1),E[2][k]={type:E[2][0].type,data:ws(O)};N[0].messages[0].data=ws(E)}j.content=Su(ku(N)),j.size=j.content.length;var L=Ms(P[4][0].data);(function(){for(var X=Gt.find(d,o[L].location),ne=oi(ci(X.content)),J,ue=0;ue<ne.length;++ue){var ke=ne[ue];ke.id==L&&(J=ke)}var ve=Cr(J.messages[0].data);{ve[3]=[];var je=[];l.forEach(function(z,Te){je[1]=[{type:0,data:Rr(Te)}],je[2]=[{type:0,data:Rr(1)}],je[3]=[{type:2,data:T$e(z)}],ve[3].push({type:2,data:ws(je)})})}J.messages[0].data=ws(ve);var ie=ku(ne),se=Su(ie);X.content=se,X.size=X.content.length})();var Z=Cr(P[3][0].data);{var H=Z[1][0];delete Z[2];var R=Cr(H.data);{var D=Ms(R[2][0].data);(function(){for(var X=Gt.find(d,o[D].location),ne=oi(ci(X.content)),J,ue=0;ue<ne.length;++ue){var ke=ne[ue];ke.id==D&&(J=ke)}var ve=Cr(J.messages[0].data);{delete ve[6],delete Z[7];var je=new Uint8Array(ve[5][0].data);ve[5]=[];for(var ie=0,se=0;se<=s.e.r;++se){var z=Cr(je);ie+=V$e(z,i[se],l),z[1][0].data=Rr(se),ve[5].push({data:ws(z),type:2})}ve[1]=[{type:0,data:Rr(s.e.c+1)}],ve[2]=[{type:0,data:Rr(s.e.r+1)}],ve[3]=[{type:0,data:Rr(ie)}],ve[4]=[{type:0,data:Rr(s.e.r+1)}]}J.messages[0].data=ws(ve);var Te=ku(ne),fe=Su(Te);X.content=fe,X.size=X.content.length})()}H.data=ws(R)}P[3][0].data=ws(Z)}v[4][0].data=ws(P)}g.messages[0].data=ws(v);var Y=ku(m),M=Su(Y);return f.content=M,f.size=f.content.length,d}function _W(e){return function(r){for(var s=0;s!=e.length;++s){var a=e[s];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function R4(e){_W([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function L4(e){_W([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function q$e(e){return hr.WS.indexOf(e)>-1?"sheet":e==hr.CS?"chart":e==hr.DS?"dialog":e==hr.MS?"macro":e&&e.length?e:"sheet"}function G$e(e,t){if(!e)return 0;try{e=t.map(function(s){return s.id||(s.id=s.strRelID),[s.name,e["!id"][s.id].Target,q$e(e["!id"][s.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function J$e(e,t,r,s,a,i,l,o,c,d,u,f){try{i[s]=H0(Wa(e,r,!0),t);var m=Vn(e,t),g;switch(o){case"sheet":g=bDe(m,t,a,c,i[s],d,u,f);break;case"chart":if(g=jDe(m,t,a,c,i[s],d,u,f),!g||!g["!drawel"])break;var x=v0(g["!drawel"].Target,t),h=lp(x),p=oRe(Wa(e,x,!0),H0(Wa(e,h,!0),x)),v=v0(p,x),b=lp(v);g=KFe(Wa(e,v,!0),v,c,H0(Wa(e,b,!0),v),d,g);break;case"macro":g=_De(m,t,a,c,i[s],d,u,f);break;case"dialog":g=wDe(m,t,a,c,i[s],d,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}l[s]=g;var j=[];i&&i[s]&&Rn(i[s]).forEach(function(N){var w="";if(i[s][N].Type==hr.CMNT){w=v0(i[s][N].Target,t);var _=CDe(Vn(e,w,!0),w,c);if(!_||!_.length)return;BL(g,_,!1)}i[s][N].Type==hr.TCMNT&&(w=v0(i[s][N].Target,t),j=j.concat(dRe(Vn(e,w,!0),c)))}),j&&j.length&&BL(g,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function ai(e){return e.charAt(0)=="/"?e.slice(1):e}function wW(e,t){if(Lm(),t=t||{},R4(t),ui(e,"META-INF/manifest.xml")||ui(e,"objectdata.xml"))return YL(e,t);if(ui(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof T_<"u"){if(e.FileIndex)return T_(e);var r=Gt.utils.cfb_new();return lL(e).forEach(function(O){fr(r,O,uTe(e,O))}),T_(r)}throw new Error("Unsupported NUMBERS file")}if(!ui(e,"[Content_Types].xml"))throw ui(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ui(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var s=lL(e),a=s5e(Wa(e,"[Content_Types].xml")),i=!1,l,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Vn(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Vn(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(q0=[],a.sst)try{q0=SDe(Vn(e,ai(a.sst)),a.sst,t)}catch(O){if(t.WTF)throw O}t.cellStyles&&a.themes.length&&(c=kDe(Wa(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(d=NDe(Vn(e,ai(a.style)),a.style,c,t))}a.links.map(function(O){try{var I=H0(Wa(e,lp(ai(O))),O);return EDe(Vn(e,ai(O)),I,O,t)}catch{}});var u=vDe(Vn(e,ai(a.workbooks[0])),a.workbooks[0],t),f={},m="";a.coreprops.length&&(m=Vn(e,ai(a.coreprops[0]),!0),m&&(f=iz(m)),a.extprops.length!==0&&(m=Vn(e,ai(a.extprops[0]),!0),m&&u5e(m,f,t)));var g={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(m=Wa(e,ai(a.custprops[0]),!0),m&&(g=m5e(m,t)));var x={};if((t.bookSheets||t.bookProps)&&(u.Sheets?l=u.Sheets.map(function(I){return I.name}):f.Worksheets&&f.SheetNames.length>0&&(l=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=g),t.bookSheets&&typeof l<"u"&&(x.SheetNames=l),t.bookSheets?x.SheetNames:t.bookProps))return x;l={};var h={};t.bookDeps&&a.calcchain&&(h=ADe(Vn(e,ai(a.calcchain)),a.calcchain));var p=0,v={},b,j;{var N=u.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var w=0;w!=N.length;++w)f.SheetNames[w]=N[w].name}var _=i?"bin":"xml",k=a.workbooks[0].lastIndexOf("/"),C=(a.workbooks[0].slice(0,k+1)+"_rels/"+a.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");ui(e,C)||(C="xl/_rels/workbook."+_+".rels");var T=H0(Wa(e,C,!0),C.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=TDe(Vn(e,ai(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=fRe(Vn(e,ai(a.people[0])),t)),T&&(T=G$e(T,u.Sheets));var P=Vn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(p=0;p!=f.Worksheets;++p){var A="sheet";if(T&&T[p]?(b="xl/"+T[p][1].replace(/[\/]?xl\//,""),ui(e,b)||(b=T[p][1]),ui(e,b)||(b=C.replace(/_rels\/.*$/,"")+T[p][1]),A=T[p][2]):(b="xl/worksheets/sheet"+(p+1-P)+"."+_,b=b.replace(/sheet0\./,"sheet.")),j=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(p!=t.sheets)continue e;break;case"string":if(f.SheetNames[p].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var S=!1,E=0;E!=t.sheets.length;++E)typeof t.sheets[E]=="number"&&t.sheets[E]==p&&(S=1),typeof t.sheets[E]=="string"&&t.sheets[E].toLowerCase()==f.SheetNames[p].toLowerCase()&&(S=1);if(!S)continue e}}J$e(e,b,j,f.SheetNames[p],p,v,l,A,t,u,c,d)}return x={Directory:a,Workbook:u,Props:f,Custprops:g,Deps:h,Sheets:l,SheetNames:f.SheetNames,Strings:q0,Styles:d,Themes:c,SSF:Gr(Kt)},t&&t.bookFiles&&(e.files?(x.keys=s,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(O,I){O=O.replace(/^Root Entry[\/]/,""),x.keys.push(O),x.files[O]=e.FileIndex[I]}))),t&&t.bookVBA&&(a.vba.length>0?x.vbaraw=Vn(e,ai(a.vba[0]),!0):a.defaults&&a.defaults.bin===bRe&&(x.vbaraw=Vn(e,"xl/vbaProject.bin",!0))),x}function K$e(e,t){var r=t||{},s="Workbook",a=Gt.find(e,s);try{if(s="/!DataSpaces/Version",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(PPe(a.content),s="/!DataSpaces/DataSpaceMap",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var i=RPe(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var l=LPe(a.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);FPe(a.content)}catch{}if(s="/EncryptionInfo",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var o=DPe(a.content);if(s="/EncryptedPackage",a=Gt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function X$e(e,t){return t.bookType=="ods"?jW(e,t):t.bookType=="numbers"?H$e(e,t):t.bookType=="xlsb"?Y$e(e,t):NW(e,t)}function Y$e(e,t){af=1024,e&&!e.SSF&&(e.SSF=Gr(Kt)),e&&e.SSF&&(Lm(),Vp(e.SSF),t.revssf=L1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,G0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",s=Hz.indexOf(t.bookType)>-1,a=y4();L4(t=t||{});var i=e4(),l="",o=0;if(t.cellXfs=[],Ic(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",fr(i,l,lz(e.Props,t)),a.coreprops.push(l),Ir(t.rels,2,l,hr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,fr(i,l,dz(e.Props)),a.extprops.push(l),Ir(t.rels,3,l,hr.EXT_PROPS),e.Custprops!==e.Props&&Rn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",fr(i,l,uz(e.Custprops)),a.custprops.push(l),Ir(t.rels,4,l,hr.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,fr(i,l,ODe(o-1,l,t,e,u)),a.sheets.push(l),Ir(t.wbrels,-1,"worksheets/sheet"+o+"."+r,hr.WS[0])}if(f){var g=f["!comments"],x=!1,h="";g&&g.length>0&&(h="xl/comments"+o+"."+r,fr(i,h,IDe(g,h)),a.comments.push(h),Ir(u,-1,"../comments"+o+"."+r,hr.CMNT),x=!0),f["!legacy"]&&x&&fr(i,"xl/drawings/vmlDrawing"+o+".vml",Wz(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&fr(i,lp(l),jf(u))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,fr(i,l,LDe(t.Strings,l,t)),a.strs.push(l),Ir(t.wbrels,-1,"sharedStrings."+r,hr.SST)),l="xl/workbook."+r,fr(i,l,PDe(e,l)),a.workbooks.push(l),Ir(t.rels,1,l,hr.WB),l="xl/theme/theme1.xml",fr(i,l,N4(e.Themes,t)),a.themes.push(l),Ir(t.wbrels,-1,"theme/theme1.xml",hr.THEME),l="xl/styles."+r,fr(i,l,RDe(e,l,t)),a.styles.push(l),Ir(t.wbrels,-1,"styles."+r,hr.STY),e.vbaraw&&s&&(l="xl/vbaProject.bin",fr(i,l,e.vbaraw),a.vba.push(l),Ir(t.wbrels,-1,"vbaProject.bin",hr.VBA)),l="xl/metadata."+r,fr(i,l,FDe(l)),a.metadata.push(l),Ir(t.wbrels,-1,"metadata."+r,hr.XLMETA),fr(i,"[Content_Types].xml",sz(a,t)),fr(i,"_rels/.rels",jf(t.rels)),fr(i,"xl/_rels/workbook."+r+".rels",jf(t.wbrels)),delete t.revssf,delete t.ssf,i}function NW(e,t){af=1024,e&&!e.SSF&&(e.SSF=Gr(Kt)),e&&e.SSF&&(Lm(),Vp(e.SSF),t.revssf=L1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,G0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",s=Hz.indexOf(t.bookType)>-1,a=y4();L4(t=t||{});var i=e4(),l="",o=0;if(t.cellXfs=[],Ic(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",fr(i,l,lz(e.Props,t)),a.coreprops.push(l),Ir(t.rels,2,l,hr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,fr(i,l,dz(e.Props)),a.extprops.push(l),Ir(t.rels,3,l,hr.EXT_PROPS),e.Custprops!==e.Props&&Rn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",fr(i,l,uz(e.Custprops)),a.custprops.push(l),Ir(t.rels,4,l,hr.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,fr(i,l,rW(o-1,t,e,f)),a.sheets.push(l),Ir(t.wbrels,-1,"worksheets/sheet"+o+"."+r,hr.WS[0])}if(m){var x=m["!comments"],h=!1,p="";if(x&&x.length>0){var v=!1;x.forEach(function(b){b[1].forEach(function(j){j.T==!0&&(v=!0)})}),v&&(p="xl/threadedComments/threadedComment"+o+"."+r,fr(i,p,uRe(x,u,t)),a.threadedcomments.push(p),Ir(f,-1,"../threadedComments/threadedComment"+o+"."+r,hr.TCMNT)),p="xl/comments"+o+"."+r,fr(i,p,Vz(x)),a.comments.push(p),Ir(f,-1,"../comments"+o+"."+r,hr.CMNT),h=!0}m["!legacy"]&&h&&fr(i,"xl/drawings/vmlDrawing"+o+".vml",Wz(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&fr(i,lp(l),jf(f))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,fr(i,l,Pz(t.Strings,t)),a.strs.push(l),Ir(t.wbrels,-1,"sharedStrings."+r,hr.SST)),l="xl/workbook."+r,fr(i,l,oW(e)),a.workbooks.push(l),Ir(t.rels,1,l,hr.WB),l="xl/theme/theme1.xml",fr(i,l,N4(e.Themes,t)),a.themes.push(l),Ir(t.wbrels,-1,"theme/theme1.xml",hr.THEME),l="xl/styles."+r,fr(i,l,Mz(e,t)),a.styles.push(l),Ir(t.wbrels,-1,"styles."+r,hr.STY),e.vbaraw&&s&&(l="xl/vbaProject.bin",fr(i,l,e.vbaraw),a.vba.push(l),Ir(t.wbrels,-1,"vbaProject.bin",hr.VBA)),l="xl/metadata."+r,fr(i,l,zz()),a.metadata.push(l),Ir(t.wbrels,-1,"metadata."+r,hr.XLMETA),u.length>1&&(l="xl/persons/person.xml",fr(i,l,mRe(u)),a.people.push(l),Ir(t.wbrels,-1,"persons/person.xml",hr.PEOPLE)),fr(i,"[Content_Types].xml",sz(a,t)),fr(i,"_rels/.rels",jf(t.rels)),fr(i,"xl/_rels/workbook."+r+".rels",jf(t.wbrels)),delete t.revssf,delete t.ssf,i}function I4(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Za(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Z$e(e,t){return Gt.find(e,"EncryptedPackage")?K$e(e,t):P4(e,t)}function Q$e(e,t){var r,s=e,a=t||{};return a.type||(a.type=mr&&Buffer.isBuffer(e)?"buffer":"base64"),r=DU(s,a),wW(r,a)}function kW(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ck(e.slice(r),t);default:break e}return dm.to_workbook(e,t)}function e8e(e,t){var r="",s=I4(e,t);switch(t.type){case"base64":r=Za(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Hd(e);break;default:throw new Error("Unrecognized type "+t.type)}return s[0]==239&&s[1]==187&&s[2]==191&&(r=zr(r)),t.type="binary",kW(r,t)}function t8e(e,t){var r=e;return t.type=="base64"&&(r=Za(r)),r=vr.utils.decode(1200,r.slice(2),"str"),t.type="binary",kW(r,t)}function r8e(e){return e.match(/[^\x00-\x7F]/)?Nl(e):e}function P_(e,t,r,s){return s?(r.type="string",dm.to_workbook(e,r)):dm.to_workbook(t,r)}function Xv(e,t){O1();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Xv(new Uint8Array(e),(r=Gr(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var s=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),wf={},r.dateNF&&(wf.dateNF=r.dateNF),r.type||(r.type=mr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=mr?"buffer":"binary",s=nTe(e),typeof Uint8Array<"u"&&!mr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,s=r8e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Gr(r),r.type="array",Xv(XC(s),r)}switch((a=I4(s,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Z$e(Gt.read(s,r),r);break;case 9:if(a[1]<=8)return P4(s,r);break;case 60:return ck(s,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return hPe(s,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Ez.to_workbook(s,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?Q$e(s,r):P_(e,s,r,i);case 239:return a[3]===60?ck(s,r):P_(e,s,r,i);case 255:if(a[1]===254)return t8e(s,r);if(a[1]===0&&a[2]===2&&a[3]===0)return wd.to_workbook(s,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return wd.to_workbook(s,r);break;case 3:case 131:case 139:case 140:return ok.to_workbook(s,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Fz.to_workbook(s,r);break;case 10:case 13:case 32:return e8e(s,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return mPe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?ok.to_workbook(s,r):P_(e,s,r,i)}function rI(e,t){var r=t||{};return r.type="file",Xv(e,r)}function SW(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Hp(t.file,Gt.write(e,{type:mr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Gt.write(e,t)}function n8e(e,t){var r=Gr(t||{}),s=X$e(e,r);return CW(s,r)}function s8e(e,t){var r=Gr(t||{}),s=NW(e,r);return CW(s,r)}function CW(e,t){var r={},s=mr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=s;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=s;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Gt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Wp(a))}return t.password&&typeof encrypt_agile<"u"?SW(encrypt_agile(a,t.password),t):t.type==="file"?Hp(t.file,a):t.type=="string"?zr(a):a}function a8e(e,t){var r=t||{},s=o$e(e,r);return SW(s,r)}function xl(e,t,r){r||(r="");var s=r+e;switch(t.type){case"base64":return rp(Nl(s));case"binary":return Nl(s);case"string":return e;case"file":return Hp(t.file,s,"utf8");case"buffer":return mr?Eo(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):xl(s,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function i8e(e,t){switch(t.type){case"base64":return rp(e);case"binary":return e;case"string":return e;case"file":return Hp(t.file,e,"binary");case"buffer":return mr?Eo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function rg(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",s=0;s<e.length;++s)r+=String.fromCharCode(e[s]);return t.type=="base64"?rp(r):t.type=="string"?zr(r):r;case"file":return Hp(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function F4(e,t){O1(),lW(e);var r=Gr(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=F4(e,r);return r.type="array",Wp(s)}return s8e(e,r)}function U1(e,t){O1(),lW(e);var r=Gr(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=U1(e,r);return r.type="array",Wp(s)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return xl(t$e(e,r),r);case"slk":case"sylk":return xl(Az.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return xl(gW(e.Sheets[e.SheetNames[a]],r),r);case"txt":return i8e(TW(e.Sheets[e.SheetNames[a]],r),r);case"csv":return xl($4(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return xl(Ez.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return rg(ok.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return xl(dm.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return xl(Fz.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return xl(Tz.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return xl(jW(e,r),r);case"wk1":return rg(wd.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return rg(wd.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),rg(fW(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),a8e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return n8e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function D4(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function hp(e,t,r){var s=r||{};return s.type="file",s.file=t,D4(s),U1(e,s)}function l8e(e,t,r){var s=r||{};return s.type="file",s.file=t,D4(s),F4(e,s)}function o8e(e,t,r,s){var a=r||{};a.type="file",a.file=e,D4(a),a.type="buffer";var i=s;return i instanceof Function||(i=r),ac.writeFile(e,U1(t,a),i)}function AW(e,t,r,s,a,i,l,o){var c=Pn(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!l||e[r])for(var g=t.s.c;g<=t.e.c;++g){var x=l?e[r][g]:e[s[g]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[g]!=null&&(m[i[g]]=d);continue}var h=x.v;switch(x.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[g]!=null){if(h==null)if(x.t=="e"&&h===null)m[i[g]]=null;else if(d!==void 0)m[i[g]]=d;else if(u&&h===null)m[i[g]]=null;else continue;else m[i[g]]=u&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?h:Ll(x,h,o);h!=null&&(f=!1)}}return{row:m,isempty:f}}function Yv(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,a=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=gr(u);break;case"number":c=gr(e["!ref"]),c.s.r=u;break;default:c=u}s>0&&(a=0);var f=Pn(c.s.r),m=[],g=[],x=0,h=0,p=Array.isArray(e),v=c.s.r,b=0,j={};p&&!e[v]&&(e[v]=[]);var N=d.skipHidden&&e["!cols"]||[],w=d.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(N[b]||{}).hidden)switch(m[b]=un(b),r=p?e[v][b]:e[m[b]+f],s){case 1:i[b]=b-c.s.c;break;case 2:i[b]=m[b];break;case 3:i[b]=d.header[b-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Ll(r,null,d),h=j[l]||0,!h)j[l]=1;else{do o=l+"_"+h++;while(j[o]);j[l]=h,j[o]=1}i[b]=o}for(v=c.s.r+a;v<=c.e.r;++v)if(!(w[v]||{}).hidden){var _=AW(e,c,v,m,s,i,p,d);(_.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(g[x++]=_.row)}return g.length=x,g}var nI=/"/g;function EW(e,t,r,s,a,i,l,o){for(var c=!0,d=[],u="",f=Pn(r),m=t.s.c;m<=t.e.c;++m)if(s[m]){var g=o.dense?(e[r]||[])[m]:e[s[m]+f];if(g==null)u="";else if(g.v!=null){c=!1,u=""+(o.rawNumbers&&g.t=="n"?g.v:Ll(g,null,o));for(var x=0,h=0;x!==u.length;++x)if((h=u.charCodeAt(x))===a||h===i||h===34||o.forceQuotes){u='"'+u.replace(nI,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(c=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(nI,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function $4(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var a=gr(e["!ref"]),i=s.FS!==void 0?s.FS:",",l=i.charCodeAt(0),o=s.RS!==void 0?s.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];s.dense=Array.isArray(e);for(var m=s.skipHidden&&e["!cols"]||[],g=s.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(m[x]||{}).hidden||(f[x]=un(x));for(var h=0,p=a.s.r;p<=a.e.r;++p)(g[p]||{}).hidden||(u=EW(e,a,p,f,l,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&r.push((h++?o:"")+u)));return delete s.dense,r.join("")}function TW(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=$4(e,t);if(typeof vr>"u"||t.type=="string")return r;var s=vr.utils.encode(1200,r,"str");return""+s}function c8e(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var a=gr(e["!ref"]),i="",l=[],o,c=[],d=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)l[o]=un(o);for(var u=a.s.r;u<=a.e.r;++u)for(i=Pn(u),o=a.s.c;o<=a.e.c;++o)if(t=l[o]+i,r=d?(e[u]||[])[o]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}c[c.length]=t+"="+s}return c}function PW(e,t,r){var s=r||{},a=+!s.skipHeader,i=e||{},l=0,o=0;if(i&&s.origin!=null)if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?_n(s.origin):s.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+t.length-1+a}};if(i["!ref"]){var f=gr(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),l==-1&&(l=f.e.r+1,u.e.r=l+t.length-1+a)}else l==-1&&(l=0,u.e.r=t.length-1+a);var m=s.header||[],g=0;t.forEach(function(h,p){Rn(h).forEach(function(v){(g=m.indexOf(v))==-1&&(m[g=m.length]=v);var b=h[v],j="z",N="",w=tr({c:o+g,r:l+p+a});d=pp(i,w),b&&typeof b=="object"&&!(b instanceof Date)?i[w]=b:(typeof b=="number"?j="n":typeof b=="boolean"?j="b":typeof b=="string"?j="s":b instanceof Date?(j="d",s.cellDates||(j="n",b=ss(b)),N=s.dateNF||Kt[14]):b===null&&s.nullError&&(j="e",b=0),d?(d.t=j,d.v=b,delete d.w,delete d.R,N&&(d.z=N)):i[w]=d={t:j,v:b},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,o+m.length-1);var x=Pn(l);if(a)for(g=0;g<m.length;++g)i[un(g+o)+x]={t:"s",v:m[g]};return i["!ref"]=ur(u),i}function d8e(e,t){return PW(null,e,t)}function pp(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=_n(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?pp(e,tr(t)):pp(e,tr({r:t,c:r||0}))}function u8e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function M4(){return{SheetNames:[],Sheets:{}}}function B4(e,t,r,s){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var l=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=l+a)!=-1;++a);}if(iW(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function f8e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=u8e(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function m8e(e,t){return e.z=t,e}function OW(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function h8e(e,t,r){return OW(e,"#"+t,r)}function p8e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function x8e(e,t,r,s){for(var a=typeof t!="string"?t:gr(t),i=typeof t=="string"?t:ur(t),l=a.s.r;l<=a.e.r;++l)for(var o=a.s.c;o<=a.e.c;++o){var c=pp(e,l,o);c.t="n",c.F=i,delete c.v,l==a.s.r&&o==a.s.c&&(c.f=r,s&&(c.D=!0))}return e}var Ol={encode_col:un,encode_row:Pn,encode_cell:tr,encode_range:ur,decode_col:f4,decode_row:u4,split_cell:ITe,decode_cell:_n,decode_range:fa,format_cell:Ll,sheet_add_aoa:YU,sheet_add_json:PW,sheet_add_dom:yW,aoa_to_sheet:Fm,json_to_sheet:d8e,table_to_sheet:vW,table_to_book:S$e,sheet_to_csv:$4,sheet_to_txt:TW,sheet_to_json:Yv,sheet_to_html:gW,sheet_to_formulae:c8e,sheet_to_row_object_array:Yv,sheet_get_cell:pp,book_new:M4,book_append_sheet:B4,book_set_sheet_visibility:f8e,cell_set_number_format:m8e,cell_set_hyperlink:OW,cell_set_internal_link:h8e,cell_add_comment:p8e,sheet_set_array_formula:x8e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},z1;function g8e(e){z1=e}function y8e(e,t){var r=z1(),s=t??{};if(e==null||e["!ref"]==null)return r.push(null),r;var a=gr(e["!ref"]),i=s.FS!==void 0?s.FS:",",l=i.charCodeAt(0),o=s.RS!==void 0?s.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];s.dense=Array.isArray(e);for(var m=s.skipHidden&&e["!cols"]||[],g=s.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(m[x]||{}).hidden||(f[x]=un(x));var h=a.s.r,p=!1,v=0;return r._read=function(){if(!p)return p=!0,r.push("\uFEFF");for(;h<=a.e.r;)if(++h,!(g[h-1]||{}).hidden&&(u=EW(e,a,h-1,f,l,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),u||s.blankrows!==!1)))return r.push((v++?o:"")+u);return r.push(null)},r}function v8e(e,t){var r=z1(),s=t||{},a=s.header!=null?s.header:hW,i=s.footer!=null?s.footer:pW;r.push(a);var l=fa(e["!ref"]);s.dense=Array.isArray(e),r.push(xW(e,l,s));var o=l.s.r,c=!1;return r._read=function(){if(o>l.e.r)return c||(c=!0,r.push("</table>"+i)),r.push(null);for(;o<=l.e.r;){r.push(mW(e,l,o,s)),++o;break}},r}function b8e(e,t){var r=z1({objectMode:!0});if(e==null||e["!ref"]==null)return r.push(null),r;var s={t:"n",v:0},a=0,i=1,l=[],o=0,c="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)&&(a=3),typeof f){case"string":d=gr(f);break;case"number":d=gr(e["!ref"]),d.s.r=f;break;default:d=f}a>0&&(i=0);var m=Pn(d.s.r),g=[],x=0,h=Array.isArray(e),p=d.s.r,v=0,b={};h&&!e[p]&&(e[p]=[]);var j=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(v=d.s.c;v<=d.e.c;++v)if(!(j[v]||{}).hidden)switch(g[v]=un(v),s=h?e[p][v]:e[g[v]+m],a){case 1:l[v]=v-d.s.c;break;case 2:l[v]=g[v];break;case 3:l[v]=u.header[v-d.s.c];break;default:if(s==null&&(s={w:"__EMPTY",t:"s"}),c=o=Ll(s,null,u),x=b[o]||0,!x)b[o]=1;else{do c=o+"_"+x++;while(b[c]);b[o]=x,b[c]=1}l[v]=c}return p=d.s.r+i,r._read=function(){for(;p<=d.e.r;)if(!(N[p-1]||{}).hidden){var w=AW(e,d,p,g,a,l,h,u);if(++p,w.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows)){r.push(w.row);return}}return r.push(null)},r}var j8e={to_json:b8e,to_html:v8e,to_csv:y8e,set_readable:g8e};const _8e=tp.version,U4=Object.freeze(Object.defineProperty({__proto__:null,CFB:Gt,SSF:PU,parse_xlscfb:P4,parse_zip:wW,read:Xv,readFile:rI,readFileSync:rI,set_cptable:S3e,set_fs:tTe,stream:j8e,utils:Ol,version:_8e,write:U1,writeFile:hp,writeFileAsync:o8e,writeFileSync:hp,writeFileXLSX:l8e,writeXLSX:F4},Symbol.toStringTag,{value:"Module"}));function sI({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7Z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function w8e({className:e="w-4 h-4"}){return n.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:n.jsx("path",{d:"M12 5v14M5 12h14"})})}function N8e({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}function k8e({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M3 6h18"}),n.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),n.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),n.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}function O_(){var yn,Br,Oa,Os,oe,Le,Qe,dt;const e=Math.round(Dv.maxFileSizeBytes/1048576),t=50,r=5*1024*1024,s=[".pdf",".doc",".docx",".zip"],[a,i]=y.useState([]),[l,o]=y.useState(!1),[c,d]=y.useState(""),[u,f]=y.useState({name:"",email:"",applied_job:"",source:"",status:""}),[m,g]=y.useState(null),[x,h]=y.useState([]),[p,v]=y.useState(!1),[b,j]=y.useState(null),[N,w]=y.useState(null),[_,k]=y.useState(!1),[C,T]=y.useState("Date (Newest First)"),[P,A]=y.useState(new Set),[S,E]=y.useState(!1),[O,I]=y.useState(null),[L,Z]=y.useState(!1),[H,R]=y.useState(0),[D,Y]=y.useState(null),[M,X]=y.useState([]),[ne,J]=y.useState(""),[ue,ke]=y.useState(!1),[ve,je]=y.useState([]),[ie,se]=y.useState(!1),[z,Te]=y.useState(1),[fe,Ie]=y.useState(!1),[ce,Ce]=y.useState(null),Ye=10,[at,pe]=y.useState(!1),[ye,Pe]=y.useState([]),[et,We]=y.useState(!1),[qe,ot]=y.useState(0),[Ct,He]=y.useState(null),[mt,rt]=y.useState(null),[wt,At]=y.useState(""),[$t,Wt]=y.useState(!1),[lr,sr]=y.useState([]),[De,yt]=y.useState(null),[ut,Lt]=y.useState(!1),[Yt,be]=y.useState([]),[nt,ze]=y.useState("skip"),[ht,Nt]=y.useState(null),[Oe,xe]=y.useState(null),Re=y.useRef(null),{page:le,setPage:Me,limit:Ve,setLimit:Xe,pageSizeOptions:he}=Mp("candidates:intake");function W(ae){if(!ae)return"--";const Ke=String(ae).trim().toUpperCase();if(!Ke||Ke.startsWith("TEMP-"))return"--";const U=Ke.match(/^([A-Z]{2,6})-C-(\d{1,})$/);if(!U)return"--";const de=U[1],Fe=U[2],$e=Fe.length>=4?Fe:Fe.padStart(4,"0");return`${de}-C-${$e}`}function V(ae){if(!ae||typeof ae!="string"||!ae.includes("@"))return"";const U=(ae.split("@")[0]||"").toLowerCase().replace(/\d+/g," ").replace(/[._-]+/g," ").replace(/\s+/g," ").trim();return U?U.split(" ").slice(0,4).map(Fe=>Fe.charAt(0).toUpperCase()+Fe.slice(1)).join(" "):""}function Q(ae){if(!ae||typeof ae!="string")return"";let de=(ae.replace(/\\/g,"/").split("/").pop()||"").replace(/\.[^/.]+$/,"").replace(/\(\d+\)\s*$/,"").trim();return de=de.replace(/([a-z])([A-Z])/g,"$1 $2"),de=de.replace(/[._-]+/g," "),de=de.replace(/\b(resume|cv|profile|updated|final|latest)\b/gi," "),de=de.replace(/\s+/g," ").trim(),!de||de.length<2||/[0-9]{4,}/.test(de)&&de.length>12?"":de.split(" ").slice(0,4).map($e=>$e?$e.charAt(0).toUpperCase()+$e.slice(1):"").filter(Boolean).join(" ")}function K(ae){return(ae==null?void 0:ae.public_id)||(ae==null?void 0:ae.publicId)||(ae==null?void 0:ae.candidate_public_id)||(ae==null?void 0:ae.candidatePublicId)||(ae==null?void 0:ae.candidate_code)||(ae==null?void 0:ae.candidateCode)||(ae==null?void 0:ae.code)||""}const{id:q}=Or();y.useEffect(()=>{F()},[]),y.useEffect(()=>{ge()},[]),y.useEffect(()=>{if(q&&a.length>0){const ae=a.find(Ke=>Ke.id===q||Ke._id===q);ae&&g(ae)}},[q,a]),y.useEffect(()=>()=>{Oe&&clearInterval(Oe)},[Oe]);async function F(){var ae,Ke;o(!0),d("");try{const U=await ln.listCandidates();console.log("Candidates loaded:",(U==null?void 0:U.length)||0),i(U||[])}catch(U){console.error("Failed to fetch candidates:",U),console.error("Error details:",(ae=U.response)==null?void 0:ae.data),console.error("Error status:",(Ke=U.response)==null?void 0:Ke.status),d("Failed to load candidates. Please try again.")}finally{o(!1)}}async function ee(ae){var Ke,U,de,Fe;try{await G.delete(`/v1/candidates/${ae}`),i($e=>$e.filter(xt=>(xt.id||xt._id)!==ae)),A($e=>{const xt=new Set($e);return xt.delete(ae),xt}),console.log("Candidate deleted successfully"),alert("Candidate deleted successfully")}catch($e){if(console.error("Failed to delete candidate:",$e),((Ke=$e.response)==null?void 0:Ke.status)===403)alert("Access denied: You don't have permission to delete candidates. Please contact your administrator.");else if(((U=$e.response)==null?void 0:U.status)===404)alert("Candidate not found. It may have already been deleted."),i(xt=>xt.filter(It=>(It.id||It._id)!==ae)),A(xt=>{const It=new Set(xt);return It.delete(ae),It});else{const xt=((Fe=(de=$e.response)==null?void 0:de.data)==null?void 0:Fe.detail)||$e.message||"Unknown error occurred";alert(`Failed to delete candidate: ${xt}. Please try again.`)}}}function me(ae){Ce({...ae}),Ie(!0)}async function Ne(){try{const ae=ce.id||ce._id;await G.put(`/v1/candidates/${ae}`,{full_name:ce.full_name||ce.name,email:ce.email,phone:ce.phone,current_location:ce.current_location,current_address:ce.current_address,permanent_address:ce.permanent_address,skills:Array.isArray(ce.skills)?ce.skills.join(", "):ce.skills,experience:ce.experience_years||ce.experience,education:ce.education,current_employer:ce.current_employer,previous_employers:ce.previous_employers,notice_period:ce.notice_period,expected_salary:ce.expected_salary||ce.expectedCtc,preferred_location:ce.preferred_location,languages_known:ce.languages_known,linkedin_url:ce.linkedin_url,github_url:ce.github_url,source:ce.source,referral:ce.referral}),i(Ke=>Ke.map(U=>(U.id||U._id)===ae?{...U,...ce}:U)),m&&(m.id||m._id)===ae&&g({...m,...ce}),Ie(!1),Ce(null),console.log("Candidate updated successfully")}catch(ae){console.error("Failed to update candidate:",ae),alert("Failed to update candidate. Please try again.")}}async function ge(){se(!0);try{const ae=await ln.getCandidateBulkUploadHistory(),Ke=Array.isArray(ae)?ae:[];je(Ke),Te(1)}catch(ae){console.error("Failed to fetch upload history:",ae)}finally{se(!1)}}function te(ae){const Ke=KR(ae);if(!Ke.ok){I(null),J(Ke.message),ke(!0);return}I(ae),J("")}async function Se(){const ae=KR(O);if(!ae.ok){J(ae.message),ke(!0);return}Z(!0),R(0),Y(null),X([]);try{const Ke=await ln.bulkUploadCandidates(O,{onUploadProgress:U=>{if(!U.total)return;const de=Math.round(U.loaded*100/U.total);R(de)}});Y(Ke),X(Ke.errors||[]),(Ke.errors||[]).length>0&&ke(!0),await F(),await ge()}catch(Ke){const U=Ke.response.data.message||Ke.response.data.detail||"Bulk upload failed. Please check your file and try again.";J(U),ke(!0)}finally{Z(!1),I(null)}}function Ue(ae){if(!ae)return{ok:!1,message:"File is required."};const Ke=`.${ae.name.split(".").pop()}`.toLowerCase();if(!s.includes(Ke))return{ok:!1,message:`Unsupported file type: ${Ke}. Only PDF, DOC, DOCX, ZIP files are allowed.`};if(ae.size>r){const U=(ae.size/1048576).toFixed(2);return{ok:!1,message:`File "${ae.name}" is too large (${U}MB). Maximum size is 5MB.`}}return ae.size===0?{ok:!1,message:`File "${ae.name}" is empty.`}:{ok:!0}}function Be(ae=[]){const Ke=Array.from(ae||[]);if(Ke.length===0)return;const U=[],de=[];He(null),yt(null),be([]),Nt(null),ot(0);for(const It of Ke){const er=Ue(It);er.ok?de.push(It):U.push({file:It.name,message:er.message})}const Fe=Array.isArray(ye)?ye:[],$e=Math.max(0,t-Fe.length);let xt=de;xt.length>$e&&(xt=xt.slice(0,$e),U.push({file:"Selection",message:`Only ${$e} more file(s) can be added (max ${t}).`})),sr(U),Pe([...Fe,...xt]),U.length>0?At("Some files were skipped. Please review the messages below."):At("")}async function Ge(){var ae,Ke,U,de,Fe;if(ye.length===0){At("Please select at least one resume file.");return}We(!0),ot(0),He(null),At(""),yt(null);try{const $e=ye.reduce((It,er)=>It+er.size,0);if(ye.length>10||$e>50*1024*1024){const It=await ln.bulkResumeUploadCandidatesAsync(ye,{duplicateOption:nt});Nt(It.task_id);const er=setInterval(async()=>{var Xt,Ut,br,vn,Jr,tn,ga,Sr,Fc;try{const Cn=await ln.getBulkUploadStatus(It.task_id);if(Cn.status==="processing")ot(Cn.progress||0);else if(Cn.status==="completed"){clearInterval(er),xe(null),He(Cn.result);const Oo={total:((Xt=Cn.result)==null?void 0:Xt.total_processed)||ye.length,success:((Ut=Cn.result)==null?void 0:Ut.success)||0,failed:((br=Cn.result)==null?void 0:br.failed)||0,duplicates:((vn=Cn.result)==null?void 0:vn.duplicates)||0,updated:((Jr=Cn.result)==null?void 0:Jr.updated)||0,created:((ga=(tn=Cn.result)==null?void 0:tn.results)==null?void 0:ga.filter(pu=>pu.status==="Created").length)||0};if(yt(Oo),rt({created_at:new Date().toISOString(),task_id:It.task_id,duplicate_option:nt,summary:Oo,results:((Sr=Cn.result)==null?void 0:Sr.results)||[]}),We(!1),ot(100),(Fc=Cn.result)!=null&&Fc.results){const pu=Cn.result.results.filter($m=>$m.status.includes("Failed")&&!$m.status.includes("Duplicate"));be(pu)}await F()}else Cn.status==="failed"&&(clearInterval(er),xe(null),We(!1),At(`Upload failed: ${Cn.error||"Unknown error"}`))}catch(Cn){console.error("Error polling task status:",Cn)}},2e3);xe(er)}else{const It=await ln.bulkResumeUploadCandidates(ye,{duplicateOption:nt,onUploadProgress:Xt=>{if(!Xt.total)return;const Ut=Math.round(Xt.loaded*100/Xt.total);ot(Ut)}});He(It);const er={total:It.total_processed||ye.length,success:It.success||0,failed:It.failed||0,duplicates:It.duplicates||0,updated:It.updated||0,created:((ae=It.results)==null?void 0:ae.filter(Xt=>Xt.status==="Created").length)||0};if(yt(er),rt({created_at:new Date().toISOString(),duplicate_option:nt,summary:er,results:It.results||[]}),It.results){const Xt=It.results.filter(Ut=>Ut.status.includes("Failed")&&!Ut.status.includes("Duplicate"));be(Xt)}await F(),We(!1)}}catch($e){const xt=((U=(Ke=$e.response)==null?void 0:Ke.data)==null?void 0:U.detail)||((Fe=(de=$e.response)==null?void 0:de.data)==null?void 0:Fe.message)||"Resume upload failed. Please check your files and try again.";At(xt),We(!1),Oe&&(clearInterval(Oe),xe(null))}}function tt(){Pe([]),He(null),At(""),sr([]),yt(null),be([]),ot(0),Nt(null),Oe&&(clearInterval(Oe),xe(null))}function _e(ae){if(ae===0)return"0 Bytes";const Ke=1024,U=["Bytes","KB","MB","GB"],de=Math.floor(Math.log(ae)/Math.log(Ke));return parseFloat((ae/Math.pow(Ke,de)).toFixed(2))+" "+U[de]}function Je(ae){var de;const Ke=ye.filter((Fe,$e)=>$e!==ae);Pe(Ke);const U=(de=ye[ae])==null?void 0:de.name;U&&sr(Fe=>Fe.filter($e=>$e.file!==U)),Ke.length===0&&(At(""),sr([]))}async function B(){if(P.size===0){J("Please select at least one candidate to verify."),ke(!0);return}if(window.confirm(`Verify ${P.size} candidate(s) and move to Candidate Pool-`)){E(!0);try{await ln.verifyCandidatesBulk(Array.from(P)),A(new Set),await F()}catch(Ke){const U=Ke.response.data.detail||"Failed to verify selected candidates.";J(U),ke(!0)}finally{E(!1)}}}function re(){if(P.size===0){J("Please select at least one candidate to export."),ke(!0);return}const ae=Ft.filter(de=>P.has(de.id??de._id)).map(de=>({"Full Name":de.full_name||de.name||"",Email:de.email||"",Phone:de.phone||"","Alternate Phone":de.alternate_phone||"","Date of Birth":de.dob||de.date_of_birth||"",Gender:de.gender||"","Marital Status":de.marital_status||"","Current Company":de.current_employer||"","Current Job Title":de.current_job_title||"","Total Experience (Years)":de.experience_years??de.experience??"","Relevant Experience (Years)":de.relevant_experience_years??"","Current CTC":de.current_ctc??"","Expected CTC":de.expected_ctc??de.expected_salary??"","Notice Period (Days)":de.notice_period_days??de.notice_period??"","Current Location":de.current_location||"","Preferred Location":de.preferred_location||"",Skills:Array.isArray(de.skills)?de.skills.join(", "):de.skills||"","Primary Skill":de.primary_skill||"","Secondary Skill":de.secondary_skill||"",Qualification:de.qualification||"","University/College":de.university||"","Year of Graduation":de.graduation_year||"",Certifications:de.certifications_text||"","Resume URL":de.resume_url||"","LinkedIn URL":de.linkedin_url||"","GitHub URL":de.github_url||"","Portfolio URL":de.portfolio_url||"",Address:de.current_address||"",City:de.city||"",State:de.state||"",Country:de.country||"",Pincode:de.pincode||"","Willing to Relocate (Yes/No)":de.willing_to_relocate===!0?"Yes":de.willing_to_relocate===!1?"No":"","Preferred Employment Type":de.preferred_employment_type||"","Availability to Join (Date)":de.availability_to_join||"","Last Working Day":de.last_working_day||"","Recruiter Notes":de.internal_notes||"",Source:de.source||"",Status:de.status||"","Applied Job":de.job_title||"","Created At":de.created_at||""})),Ke=Ol.book_new(),U=Ol.json_to_sheet(ae);Ol.book_append_sheet(Ke,U,"Candidates"),hp(Ke,"selected_candidates.xlsx")}async function st(){J("");try{const ae=await G.get("/v1/candidates/bulk-template",{responseType:"blob"}),Ke=new Blob([ae.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),U=window.URL.createObjectURL(Ke),de=document.createElement("a");de.href=U,de.download="Candidate_Bulk_Upload_Template.xlsx",de.click(),window.URL.revokeObjectURL(U)}catch(ae){const Ke=ae.response.data.detail||"Unable to download template. Please login and try again.";J(Ke)}}async function ct(ae){if(ae){J("");try{const Ke=await G.get(ae,{responseType:"blob"}),U=new Blob([Ke.data],{type:"text/csv"}),de=document.createElement("a");de.href=window.URL.createObjectURL(U),de.download="candidate_bulk_upload_errors.csv",de.click(),window.URL.revokeObjectURL(de.href)}catch(Ke){const U=Ke.response.data.detail||"Unable to download error CSV. Please login and try again.";J(U),ke(!0)}}}const Ee=a.filter(ae=>{const Ke=!u.name||(ae.full_name||ae.name||"").toLowerCase().includes(u.name.toLowerCase()),U=!u.email||(ae.email||"").toLowerCase().includes(u.email.toLowerCase()),de=!u.applied_job||(ae.job_title||"").toLowerCase().includes(u.applied_job.toLowerCase());return Ke&&U&&de}),Ft=y.useMemo(()=>{const ae=[...Ee];return ae.sort((Ke,U)=>{switch(C){case"Name (A-Z)":const de=(Ke.full_name||Ke.name||"").toLowerCase(),Fe=(U.full_name||U.name||"").toLowerCase();return de.localeCompare(Fe);case"Name (Z-A)":const $e=(Ke.full_name||Ke.name||"").toLowerCase();return(U.full_name||U.name||"").toLowerCase().localeCompare($e);case"Email (A-Z)":const It=(Ke.email||"").toLowerCase(),er=(U.email||"").toLowerCase();return It.localeCompare(er);case"Email (Z-A)":const Xt=(Ke.email||"").toLowerCase();return(U.email||"").toLowerCase().localeCompare(Xt);case"Date (Newest First)":return new Date(U.created_at)-new Date(Ke.created_at);case"Date (Oldest First)":return new Date(Ke.created_at)-new Date(U.created_at);default:return 0}}),ae},[Ee,C]),pt=Ft.length>0&&Ft.every(ae=>P.has(ae.id??ae._id??ae.email??ae.public_id)),Mt=Math.max(1,Math.ceil(Ft.length/Math.max(1,Ve)));y.useEffect(()=>{le>Mt&&Me(Mt)},[le,Mt,Me]),y.useEffect(()=>{Me(1)},[u.name,u.email,u.applied_job,C,Me]);function Bt(ae){A(Ke=>{const U=new Set(Ke);return U.has(ae)?U.delete(ae):U.add(ae),U})}function yr(){A(pt?new Set:new Set(Ft.map(ae=>ae.id??ae._id??ae.email??ae.public_id).filter(Boolean)))}async function Tr(ae){const Ke=ae.id||ae._id;if(!Ke)return alert("Candidate ID missing");if(ae.resume_url){const It=String(ae.resume_url).trim().replace(/\\/g,"/"),er=/^https?:\/\//i.test(It),Xt="https://ats-10-iyol.onrender.com",Ut=It.startsWith("/")?It:`/${It}`,br=er?It:`${Xt}${Ut}`;window.open(encodeURI(br),"_blank","noopener,noreferrer");return}const U=await G.get(`/v1/candidates/${Ke}/resume/download`,{responseType:"blob"}),de=new Blob([U.data]),Fe=window.URL.createObjectURL(de),$e=document.createElement("a");$e.href=Fe,$e.download="resume.pdf",$e.click(),window.URL.revokeObjectURL(Fe)}const Ps=async ae=>{var U;j(ae);const Ke=ae._id||ae.id;if(!Ke){alert("Candidate ID missing");return}try{const de=await gU(Ke);w(((U=de==null?void 0:de.feedbacks)==null?void 0:U[0])||null)}catch(de){console.error("Failed to load feedback:",de),w(null)}k(!1),v(!0)},vt=async ae=>{v(!1),k(!1);const Ke=(ae==null?void 0:ae.id)||(ae==null?void 0:ae._id);if(!Ke){g(ae);return}g(ae);try{const U=await ln.getCandidateById(Ke);U&&g({...U,job_title:ae.job_title||U.job_title})}catch(U){console.error("Failed to fetch candidate details:",U)}},gn=Math.max(1,Math.ceil(ve.length/Ye)),js=(z-1)*Ye,xa=ve.slice(js,js+Ye);return n.jsxs("div",{className:"space-y-6",children:[at&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>pe(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Bulk Resume Upload"}),n.jsx("button",{type:"button",onClick:()=>{pe(!1),tt()},className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duplicate Candidate Handling:"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"duplicateOption",value:"skip",checked:nt==="skip",onChange:ae=>ze(ae.target.value),className:"mr-2"}),"Skip duplicates"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"duplicateOption",value:"overwrite",checked:nt==="overwrite",onChange:ae=>ze(ae.target.value),className:"mr-2"}),"Update existing"]})]})]}),n.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-all ${$t?"border-purple-400 bg-purple-100":ye.length>0?"border-green-300 bg-green-50":"border-purple-200 bg-purple-50"}`,onDragOver:ae=>{ae.preventDefault(),Wt(!0)},onDragLeave:ae=>{ae.preventDefault(),Wt(!1)},onDrop:ae=>{ae.preventDefault(),Wt(!1),Be(ae.dataTransfer.files)},children:[n.jsx("input",{id:"resumeUploadInput",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.zip",className:"hidden",ref:Re,onChange:ae=>{Be(ae.target.files),ae.target.value=""}}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"resumeUploadInput",className:"cursor-pointer text-lg font-medium text-purple-700 hover:text-purple-800",children:$t?"Drop files here":"Click to browse or drag and drop files"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Maximum ",t," files  5MB each  PDF, DOC, DOCX, ZIP"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Select multiple files (Ctrl/Shift) or add more files again anytime."})]})]})]}),lr.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:"File Validation Errors:"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:lr.map((ae,Ke)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:""}),n.jsxs("span",{children:[n.jsxs("strong",{children:[ae.file,":"]})," ",ae.message]})]},Ke))})]}),ye.length>0&&n.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-t-lg",children:[n.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Selected Files (",ye.length,"/",t,")"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:()=>{var ae;return(ae=Re.current)==null?void 0:ae.click()},className:"text-xs text-purple-700 hover:text-purple-900 underline",children:"Add More"}),n.jsx("button",{type:"button",onClick:()=>{Pe([]),sr([]),At("")},className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear All"})]})]}),n.jsx("div",{className:"max-h-48 overflow-auto",children:ye.map((ae,Ke)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-sm",children:ae.name}),n.jsx("p",{className:"text-xs text-gray-500",children:_e(ae.size)})]})]}),n.jsx("button",{type:"button",onClick:()=>Je(Ke),className:"text-red-500 hover:text-red-700 p-1",title:"Remove file",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ke))})]}),wt&&n.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})}),n.jsx("span",{className:"text-sm text-red-700",children:wt})]})}),et&&n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:ht?"Processing resumes in background...":"Processing resumes..."}),n.jsxs("span",{className:"text-sm text-gray-600",children:[qe,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${qe}%`}})}),n.jsx("p",{className:"text-xs text-gray-500",children:ht?`Task ID: ${ht} - Please wait while we parse and extract information from your resumes...`:"Please wait while we parse and extract information from your resumes..."}),ht&&n.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[n.jsx("strong",{children:"Large batch detected:"})," Processing in background for better performance. You can close this modal and check progress later if needed."]})]}),De&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-3",children:"Upload Summary"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-800",children:De.total}),n.jsx("div",{className:"text-gray-600",children:"Total Files"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:De.created}),n.jsx("div",{className:"text-gray-600",children:"Created"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:De.updated}),n.jsx("div",{className:"text-gray-600",children:"Updated"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:De.duplicates}),n.jsx("div",{className:"text-gray-600",children:"Duplicates"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:De.failed}),n.jsx("div",{className:"text-gray-600",children:"Failed"})]})]})]}),Ct&&Ct.results&&Ct.results.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Detailed Results"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Resume"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate Name"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:Ct.results.map((ae,Ke)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"p-3 truncate max-w-xs",title:ae.resume,children:ae.resume}),n.jsx("td",{className:"p-3 font-mono text-xs whitespace-nowrap",children:W(ae.candidate_id||ae.public_id||ae.publicId||ae.candidate_public_id||ae.candidatePublicId)}),n.jsx("td",{className:"p-3",children:ae.name||"--"}),n.jsx("td",{className:"p-3",children:ae.email||"--"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${ae.status==="Created"?"bg-green-100 text-green-800":ae.status==="Updated"?"bg-blue-100 text-blue-800":ae.status.includes("Duplicate")?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:ae.status})})]},`${ae.resume}-${Ke}`))})]})})})]}),n.jsxs("div",{className:"mt-6 flex justify-between",children:[n.jsx("div",{children:Yt.length>0&&n.jsxs("button",{type:"button",onClick:()=>Lt(!0),className:"px-4 py-2 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200",children:["Retry Failed (",Yt.length,")"]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",onClick:()=>{pe(!1),tt()},children:Ct?"Close":"Cancel"}),!Ct&&n.jsx("button",{type:"button",onClick:Ge,disabled:et||ye.length===0,className:"px-6 py-2 rounded-md bg-purple-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-purple-700 font-medium",children:et?"Processing...":`Upload ${ye.length} Resume${ye.length!==1?"s":""}`})]})]})]})]}),ut&&Yt.length>0&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Lt(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Retry Failed Uploads"}),n.jsx("button",{type:"button",onClick:()=>Lt(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["The following ",Yt.length," file(s) failed to upload. Review the errors and decide how to proceed:"]}),n.jsx("div",{className:"max-h-64 overflow-auto border border-gray-200 rounded",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"File"}),n.jsx("th",{className:"p-2 text-left",children:"Error"})]})}),n.jsx("tbody",{children:Yt.map((ae,Ke)=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"p-2",children:ae.resume}),n.jsx("td",{className:"p-2 text-red-600",children:ae.status})]},Ke))})]})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[n.jsx("strong",{children:"Common fixes:"}),n.jsx("br",{})," Check file format (PDF, DOC, DOCX only)",n.jsx("br",{})," Ensure files are under 5MB each",n.jsx("br",{})," Verify files are not corrupted"]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>Lt(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Close"}),n.jsx("button",{type:"button",onClick:()=>{Lt(!1),tt()},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:"Start Over"})]})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",n.jsx("strong",{children:P.size})]}),n.jsx("button",{type:"button",onClick:st,className:"px-3 py-2 rounded-md bg-indigo-50 text-indigo-700 border",children:"Download Template"}),O?n.jsx("button",{type:"button",onClick:Se,disabled:L,className:"bg-blue-600 text-white px-3 py-2 rounded disabled:bg-gray-300",children:L?"Uploading...":"Upload"}):n.jsxs("label",{className:"bg-gray-100 px-3 py-2 rounded cursor-pointer",children:["Select Excel (.xlsx)",n.jsx("input",{type:"file",hidden:!0,accept:".xlsx",onChange:ae=>{var Ke;return te((Ke=ae.target.files)==null?void 0:Ke[0])}})]}),n.jsx("button",{type:"button",onClick:()=>pe(!0),className:"px-3 py-2 rounded-md bg-purple-50 text-purple-700 border",children:"Upload Resumes"}),O&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:["Selected: ",n.jsx("strong",{children:O.name}),n.jsx("button",{type:"button",onClick:()=>I(null),className:"text-xs px-2 py-1 border rounded",children:"Clear"})]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Max ",e,"MB - Max ",Dv.maxRows," rows"]})]}),L&&n.jsxs("span",{className:"text-xs text-gray-500",children:[H,"% uploaded"]}),n.jsx("button",{type:"button",onClick:re,disabled:P.size===0,className:"bg-gray-900 text-white px-4 py-2 rounded disabled:bg-gray-300",children:"Export Selected"}),n.jsx("button",{type:"button",onClick:B,disabled:P.size===0||S,className:"bg-emerald-600 text-white px-4 py-2 rounded disabled:bg-gray-300",children:S?"Verifying...":"Verify Selected"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Sort by"}),n.jsxs("select",{value:C,onChange:ae=>T(ae.target.value),className:`\r
      px-3 py-1.5\r
      text-sm\r
      font-medium\r
      text-gray-700\r
      bg-gray-100\r
      border border-gray-200\r
      rounded-full\r
      cursor-pointer\r
      hover:bg-gray-200\r
      focus:outline-none\r
      focus:ring-0\r
      transition\r
    `,children:[n.jsx("option",{value:"Date (Newest First)",children:"Date (Newest First)"}),n.jsx("option",{value:"Date (Oldest First)",children:"Date (Oldest First)"}),n.jsx("option",{value:"Name (A-Z)",children:"Name (A-Z)"}),n.jsx("option",{value:"Name (Z-A)",children:"Name (Z-A)"}),n.jsx("option",{value:"Email (A-Z)",children:"Email (A-Z)"}),n.jsx("option",{value:"Email (Z-A)",children:"Email (Z-A)"})]})]})]}),ne&&n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:ne}),D&&n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Total Rows:"})," ",n.jsx("strong",{children:D.total_rows})]}),n.jsxs("div",{className:"text-sm text-green-700",children:[n.jsx("span",{className:"text-gray-500",children:"Success:"})," ",n.jsx("strong",{children:D.success_count})]}),n.jsxs("div",{className:"text-sm text-red-700",children:[n.jsx("span",{className:"text-gray-500",children:"Failed:"})," ",n.jsx("strong",{children:D.failed_count})]}),ve[0].error_csv_url&&n.jsx("button",{type:"button",onClick:()=>ct(ve[0].error_csv_url),className:"text-sm text-blue-600 underline",children:"Download Error CSV"})]}),M.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Row"}),n.jsx("th",{className:"border p-2 text-left",children:"Field"}),n.jsx("th",{className:"border p-2 text-left",children:"Message"})]})}),n.jsx("tbody",{children:M.map((ae,Ke)=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:ae.row}),n.jsx("td",{className:"border p-2",children:ae.field}),n.jsx("td",{className:"border p-2",children:ae.message})]},`${ae.row}-${ae.field}-${Ke}`))})]})}):n.jsx("div",{className:"text-sm text-gray-600",children:"No row errors reported."})]}),ue&&(ne||M.length>0)&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ke(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-lg p-5 rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Upload Errors"}),n.jsx("button",{onClick:()=>ke(!1),className:"text-lg",children:"x"})]}),ne&&n.jsx("div",{className:"text-sm text-red-700 mb-3",children:ne}),M.length>0&&n.jsx("div",{className:"max-h-64 overflow-auto border rounded",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Row"}),n.jsx("th",{className:"p-2 text-left",children:"Field"}),n.jsx("th",{className:"p-2 text-left",children:"Message"})]})}),n.jsx("tbody",{children:M.map((ae,Ke)=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 border-t",children:ae.row}),n.jsx("td",{className:"p-2 border-t",children:ae.field}),n.jsx("td",{className:"p-2 border-t",children:ae.message})]},`${ae.row}-${ae.field}-${Ke}`))})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>ke(!1),children:"Close"})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsx("input",{value:u.name,onChange:ae=>f(Ke=>({...Ke,name:ae.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Name"}),n.jsx("input",{value:u.email,onChange:ae=>f(Ke=>({...Ke,email:ae.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Email"}),n.jsx("input",{value:u.applied_job,onChange:ae=>f(Ke=>({...Ke,applied_job:ae.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Applied Job"})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:pt,onChange:yr}),"Select all filtered candidates"]}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",P.size]})]}),n.jsx($p,{items:Ft,totalPages:Mt,currentPage:le,onPageChange:Me,totalRecords:Ft.length,pageSize:Ve,onPageSizeChange:ae=>{Xe(ae),Me(1)},pageSizeOptions:he,loading:l,error:c||null,onRetry:F,emptyMessage:"No candidates",keyExtractor:ae=>ae.id||ae._id||ae.email||ae.public_id,renderCard:ae=>{var U,de,Fe;const Ke=ae.id||ae._id||ae.email||ae.public_id;return n.jsxs("article",{className:"border border-gray-200 rounded-xl p-4 bg-white shadow-sm hover:shadow-md transition",onClick:()=>vt(ae),children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("input",{type:"checkbox",checked:P.has(Ke),onChange:$e=>{$e.stopPropagation(),Bt(Ke)}}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:ae.full_name||ae.name||((U=ae.parsed_data_json)==null?void 0:U.full_name)||((Fe=(de=ae.parsed_resume)==null?void 0:de.data)==null?void 0:Fe.full_name)||Q(ae.resume_url||ae.resume_path)||V(ae.email)||"--"}),n.jsx("div",{className:"text-xs text-gray-500 font-mono",children:W(K(ae))})]})]}),n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700",children:ae.intake_status||ae.status||"--"})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Email:"})," ",ae.email||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",ae.phone||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Applied Job:"})," ",ae.job_title||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Date:"})," ",Bp(ae.created_at)]})]}),n.jsx("div",{className:"mt-3",children:n.jsx(rU,{lastActivityAt:ae.last_activity_at,lastActivityType:ae.last_activity_type,lastActivityRelative:ae.last_activity_relative,className:"min-w-0"})}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:$e=>{$e.stopPropagation(),vt(ae)},title:"View Candidate",className:"w-8 h-8 rounded-full hover:bg-indigo-100 text-indigo-600 inline-flex items-center justify-center",children:n.jsx(sI,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-purple-100 text-purple-600 cursor-pointer inline-flex items-center justify-center",title:"Add Call Feedback",onClick:$e=>{$e.stopPropagation(),g(null),p&&(b==null?void 0:b.id)===ae.id?v(!1):Ps(ae)},children:n.jsx(w8e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-rose-100 text-rose-600 cursor-pointer inline-flex items-center justify-center",title:"View Feedback History",onClick:$e=>{if($e.stopPropagation(),g(null),!(ae.id||ae._id)){alert("Candidate ID missing");return}j(ae),v(!1),k(!0)},children:n.jsx(sI,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-blue-100 text-blue-600 cursor-pointer inline-flex items-center justify-center",title:"Edit Candidate",onClick:$e=>{$e.stopPropagation(),me(ae)},children:n.jsx(N8e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-red-100 text-red-600 cursor-pointer inline-flex items-center justify-center",title:"Delete Candidate",onClick:$e=>{$e.stopPropagation(),window.confirm(`Are you sure you want to delete ${ae.full_name||ae.name||"this candidate"}?`)&&ee(ae.id||ae._id)},children:n.jsx(k8e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"px-3 py-1 text-xs border rounded hover:bg-gray-50",onClick:$e=>{$e.stopPropagation(),Tr(ae)},children:"Resume"})]})]})}})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Upload History"}),n.jsx("button",{onClick:ge,className:"text-sm px-3 py-1 border rounded",disabled:ie,children:ie?"Refreshing...":"Refresh"})]}),ie?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading history..."}):ve.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No uploads yet."}):n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Date"}),n.jsx("th",{className:"border p-2 text-left",children:"File"}),n.jsx("th",{className:"border p-2 text-left",children:"Total"}),n.jsx("th",{className:"border p-2 text-left",children:"Success"}),n.jsx("th",{className:"border p-2 text-left",children:"Failed"}),n.jsx("th",{className:"border p-2 text-left",children:"Errors"})]})}),n.jsx("tbody",{children:xa.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:ae.created_at?new Date(ae.created_at).toLocaleString():"--"}),n.jsx("td",{className:"border p-2",children:ae.filename||"--"}),n.jsx("td",{className:"border p-2",children:ae.total_rows}),n.jsx("td",{className:"border p-2 text-green-700",children:ae.success_count}),n.jsx("td",{className:"border p-2 text-red-700",children:ae.failed_count}),n.jsx("td",{className:"border p-2",children:ae.error_csv_url?n.jsx("button",{type:"button",onClick:()=>ct(ae.error_csv_url),className:"text-blue-600 underline",children:"Download CSV"}):"--"})]},ae.id))})]}),ve.length>Ye&&n.jsxs("div",{className:"flex items-center justify-between mt-3 text-sm",children:[n.jsxs("span",{className:"text-gray-500",children:["Page ",z," of ",gn]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:z===1,onClick:()=>Te(ae=>Math.max(1,ae-1)),children:"Prev"}),n.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:z===gn,onClick:()=>Te(ae=>Math.min(gn,ae+1)),children:"Next"})]})]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Resume Upload Logs"}),(mt==null?void 0:mt.created_at)&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Last upload:"," ",new Date(mt.created_at).toLocaleString()]})]}),!mt||!Array.isArray(mt.results)||mt.results.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No resume uploads yet."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3 grid grid-cols-2 md:grid-cols-5 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),n.jsx("div",{className:"font-semibold",children:((yn=mt.summary)==null?void 0:yn.total)??mt.results.length})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Created"}),n.jsx("div",{className:"font-semibold text-green-700",children:((Br=mt.summary)==null?void 0:Br.created)??mt.results.filter(ae=>ae.status==="Created").length})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Updated"}),n.jsx("div",{className:"font-semibold text-blue-700",children:((Oa=mt.summary)==null?void 0:Oa.updated)??0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Duplicates"}),n.jsx("div",{className:"font-semibold text-yellow-700",children:((Os=mt.summary)==null?void 0:Os.duplicates)??0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Failed"}),n.jsx("div",{className:"font-semibold text-red-700",children:((oe=mt.summary)==null?void 0:oe.failed)??0})]})]}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Resume"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate Name"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:mt.results.map((ae,Ke)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"p-3 font-mono text-xs whitespace-nowrap",children:W(ae.candidate_id||ae.public_id||ae.publicId||ae.candidate_public_id||ae.candidatePublicId)}),n.jsx("td",{className:"p-3 truncate max-w-xs",title:ae.resume,children:ae.resume}),n.jsx("td",{className:"p-3",children:ae.name||V(ae.email)||"--"}),n.jsx("td",{className:"p-3",children:ae.email||"--"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${ae.status==="Created"?"bg-green-100 text-green-800":ae.status==="Updated"?"bg-blue-100 text-blue-800":ae.status.includes("Duplicate")?"bg-yellow-100 text-yellow-800":ae.status.includes("Failed")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:ae.status})})]},`${ae.resume}-${Ke}`))})]})})})]})]}),m&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>g(null)}),n.jsxs("div",{className:"relative bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Candidate Profile"}),n.jsx("button",{onClick:()=>g(null),className:"text-lg",children:"x"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("b",{children:"Name:"})," ",m.full_name||m.name||((Le=m.parsed_data_json)==null?void 0:Le.full_name)||((dt=(Qe=m.parsed_resume)==null?void 0:Qe.data)==null?void 0:dt.full_name)||Q(m.resume_url||m.resume_path)||V(m.email)||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Candidate ID:"})," ",W(K(m))]}),n.jsxs("div",{children:[n.jsx("b",{children:"Email:"})," ",m.email||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Phone:"})," ",m.phone||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Date of Birth:"})," ",m.dob||m.date_of_birth||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Location:"})," ",m.current_location||m.currentLocation||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"City:"})," ",m.city||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Pincode:"})," ",m.pincode||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Address:"})," ",m.current_address||m.currentAddress||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Permanent Address:"})," ",m.permanent_address||m.permanentAddress||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Applied Job:"})," ",m.job_title||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Classification:"})," ",m.classification||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Source:"})," ",m.source||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Referral:"})," ",m.referral||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Skills:"})," ",Array.isArray(m.skills)?m.skills.join(", "):m.skills||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Experience (years):"})," ",m.experience_years||m.experience||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Education:"})," ",m.education||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Employer:"})," ",m.current_employer||m.currentEmployer||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Previous Employers:"})," ",m.previous_employers||m.previousEmployers||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Notice Period:"})," ",m.notice_period||m.noticePeriod||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Expected CTC:"})," ",m.expected_salary||m.expectedCtc||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Preferred Location:"})," ",m.preferred_location||m.preferredLocation||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Languages Known:"})," ",m.languages_known||m.languagesKnown||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Ready to Relocate:"})," ",m.ready_to_relocate!==void 0?m.ready_to_relocate?"Yes":"No":m.readyToRelocate!==void 0?m.readyToRelocate?"Yes":"No":"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"LinkedIn:"})," ",m.linkedin_url||m.linkedinUrl||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"GitHub:"})," ",m.github_url||m.githubUrl||"--"]})," "]})," ",m.parsed_data_json&&n.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Parsed Resume Data"}),n.jsx("span",{className:"text-xs text-gray-500",children:"(auto-extracted from resume)"})]}),m.parsed_data_json.resume_text&&n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Resume Text (preview)"}),n.jsx("div",{className:"text-xs text-gray-700 whitespace-pre-wrap bg-white border border-gray-200 rounded p-2 max-h-40 overflow-auto",children:m.parsed_data_json.resume_text})]}),n.jsx("pre",{className:"text-xs bg-white border border-gray-200 rounded p-2 overflow-auto max-h-64",children:JSON.stringify(m.parsed_data_json,null,2)})]}),n.jsxs("div",{className:"mt-6 flex justify-between",children:[n.jsx("button",{onClick:()=>Tr(m),className:"text-indigo-600 font-semibold",children:"Download Resume"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>me(m),className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700",children:"Edit"}),n.jsx("button",{onClick:()=>g(null),className:"bg-gray-100 px-4 py-1.5 rounded",children:"Close"})]})]})]})," "]}),fe&&ce&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{Ie(!1),Ce(null)}}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Edit Candidate Profile"}),n.jsx("button",{onClick:()=>{Ie(!1),Ce(null)},className:"text-lg",children:"x"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Name:"}),n.jsx("input",{type:"text",value:ce.full_name||ce.name||"",onChange:ae=>Ce({...ce,full_name:ae.target.value,name:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Candidate ID:"}),n.jsx("input",{type:"text",value:W(K(ce)),readOnly:!0,className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Email:"}),n.jsx("input",{type:"email",value:ce.email||"",onChange:ae=>Ce({...ce,email:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Phone:"}),n.jsx("input",{type:"text",value:ce.phone||"",onChange:ae=>Ce({...ce,phone:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Location:"}),n.jsx("input",{type:"text",value:ce.current_location||"",onChange:ae=>Ce({...ce,current_location:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"City:"}),n.jsx("input",{type:"text",value:ce.city||"",onChange:ae=>Ce({...ce,city:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Address:"}),n.jsx("textarea",{value:ce.current_address||"",onChange:ae=>Ce({...ce,current_address:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 h-20"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Skills:"}),n.jsx("input",{type:"text",value:Array.isArray(ce.skills)?ce.skills.join(", "):ce.skills||"",onChange:ae=>Ce({...ce,skills:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Comma separated skills"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Experience (years):"}),n.jsx("input",{type:"number",value:ce.experience_years||ce.experience||"",onChange:ae=>Ce({...ce,experience_years:ae.target.value,experience:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Education:"}),n.jsx("input",{type:"text",value:ce.education||"",onChange:ae=>Ce({...ce,education:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Employer:"}),n.jsx("input",{type:"text",value:ce.current_employer||"",onChange:ae=>Ce({...ce,current_employer:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Expected CTC:"}),n.jsx("input",{type:"text",value:ce.expected_salary||ce.expectedCtc||"",onChange:ae=>Ce({...ce,expected_salary:ae.target.value,expectedCtc:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Source:"}),n.jsxs("select",{value:ce.source||"",onChange:ae=>Ce({...ce,source:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[n.jsx("option",{value:"",children:"Select Source"}),n.jsx("option",{value:"Direct",children:"Direct"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Bulk Resume Upload",children:"Bulk Resume Upload"}),n.jsx("option",{value:"Portal",children:"Portal"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"LinkedIn:"}),n.jsx("input",{type:"url",value:ce.linkedin_url||"",onChange:ae=>Ce({...ce,linkedin_url:ae.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]}),n.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>{Ie(!1),Ce(null)},className:"bg-gray-100 px-6 py-2 rounded hover:bg-gray-200",children:"Cancel"}),n.jsx("button",{onClick:Ne,className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Save Changes"})]})]})]}),p&&n.jsx(yU,{isOpen:p,candidateId:b.id||b._id,candidateName:b.full_name||b.name,initialData:N,onClose:()=>v(!1),onSuccess:()=>v(!1)}),_&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Call Feedback History"}),n.jsx("button",{onClick:()=>k(!1),className:"text-lg",children:"x"})]}),n.jsx(vU,{candidateId:b._id||b.id,onFeedbackSelect:ae=>{w(ae),k(!1),v(!0)},onAddNew:()=>{w(null),k(!1),v(!0)}})]})]})]})}const RW={interview_scheduled:"Scheduled",scheduled:"Scheduled",rescheduled:"Scheduled",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",selected:"Selected",rejected:"Not Selected"},S8e={Scheduled:"bg-amber-100 text-amber-800","In Progress":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Selected:"bg-emerald-100 text-emerald-800","Not Selected":"bg-rose-100 text-rose-800"},C8e={ai_chat:"AI Chat",video:"Google Meet",live:"Google Meet",in_person:"In-Person"},qg=e=>{const t=String(e||"").toLowerCase().replace(/\s+/g,"_");return RW[t],t},A8e=e=>{const t=qg(e);return RW[t]||"Scheduled"},E8e=e=>C8e[e]||"Interview",aI=e=>{if(!e)return"Not Scheduled";const t=new Date(e);return Number.isNaN(t.getTime())?"Not Scheduled":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},T8e=(e,t,r)=>{if(!e)return{isBefore:!0,isAfter:!1,start:null,end:null};const s=new Date(e);if(Number.isNaN(s.getTime()))return{isBefore:!0,isAfter:!1,start:null,end:null};const a=r!=null?r*1e3:t!=null?t*60*1e3:60*60*1e3,i=new Date(s.getTime()+a),l=new Date;return{isBefore:l.getTime()<s.getTime(),isAfter:l.getTime()>i.getTime(),start:s,end:i}};function P8e(){const e=Tt(),[t,r]=y.useState(!0),[s,a]=y.useState([]),[i,l]=y.useState(null),[o,c]=y.useState("");y.useEffect(()=>{(async()=>{var f,m,g;r(!0),c("");try{const x=await G.get("/v1/candidate/my-interviews"),h=((f=x.data)==null?void 0:f.interviews)??x.data??[];a(Array.isArray(h)?h:[])}catch(x){c(((g=(m=x==null?void 0:x.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to load interviews. Please try again.")}finally{r(!1)}})()},[]);const d=async u=>{var m,g;const f=u.id||u.interview_id;l(f);try{await G.post(`/v1/interviews/${f}/start`),e(`/interviews/${f}`)}catch(x){c(((g=(m=x==null?void 0:x.response)==null?void 0:m.data)==null?void 0:g.detail)||"Interview is not available yet. Please try again later.")}finally{l(null)}};return t?n.jsx("div",{className:"text-gray-600",children:"Loading interviews..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Interviews"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track your scheduled interviews and join at the right time."})]}),o&&n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:o}),s.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center text-gray-500",children:"No interviews scheduled yet."}):n.jsx("div",{className:"grid gap-4",children:s.map(u=>{const f=A8e(u.status),m=T8e(u.scheduled_at,u.duration,u.duration_seconds),g=m.isBefore,x=m.isAfter,h=f==="Completed"||f==="Cancelled"||f==="Selected"||f==="Not Selected",p=!g&&!x&&!h&&u.type!=="in_person"&&(qg(u.status)==="scheduled"||qg(u.status)==="in_progress"),v=h?f:g?`Available at ${aI(u.scheduled_at)}`:x?"Interview Window Closed":qg(u.status)==="in_progress"?"Resume Interview":u.type==="ai_chat"?"Start Interview":u.type==="in_person"?"In Person":"Join Meet";return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.job_title||"Job Interview"}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${S8e[f]||"bg-gray-100 text-gray-700"}`,children:f})]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[u.company||"Company"," - ",E8e(u.type)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",aI(u.scheduled_at)]}),u.type==="in_person"&&(u.location||u.instructions)&&n.jsxs("p",{className:"text-xs text-gray-500",children:[u.location?`Location: ${u.location}`:"",u.location&&u.instructions?"  ":"",u.instructions?`Instructions: ${u.instructions}`:""]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.jsx("button",{type:"button",onClick:()=>e(`/candidate/my-interviews/${u.id||u.interview_id}`),className:"px-4 py-2 rounded border text-sm font-medium text-gray-700 hover:bg-gray-50",children:"View Details"}),u.type==="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>p?d(u):null,disabled:!p||i===(u.id||u.interview_id),className:`px-4 py-2 rounded text-sm font-semibold ${p?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:i===(u.id||u.interview_id)?"Starting...":v}),u.type!=="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>{if(p){if(u.join_link&&u.type!=="in_person"){window.open(u.join_link,"_blank","noopener");return}e(`/candidate/my-interviews/${u.id||u.interview_id}`)}},disabled:!p,className:`px-4 py-2 rounded text-sm font-semibold ${p?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:v})]})]},u.id||u.interview_id)})})]})}const LW={interview_scheduled:"Scheduled",scheduled:"Scheduled",rescheduled:"Scheduled",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",selected:"Selected",rejected:"Not Selected"},O8e={Scheduled:"bg-amber-100 text-amber-800","In Progress":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Selected:"bg-emerald-100 text-emerald-800","Not Selected":"bg-rose-100 text-rose-800"},R8e={ai_chat:"AI Chat",video:"Google Meet",live:"Google Meet",in_person:"In-Person"},b0=e=>{const t=String(e||"").toLowerCase().replace(/\s+/g,"_");return LW[t],t},L8e=e=>{const t=b0(e);return LW[t]||"Scheduled"},I8e=e=>R8e[e]||"Interview",iI=e=>{if(!e)return"Not Scheduled";const t=new Date(e);return Number.isNaN(t.getTime())?"Not Scheduled":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},F8e=(e,t)=>{if(!e)return{isBefore:!0,isAfter:!1,start:null,end:null};const r=new Date(e);if(Number.isNaN(r.getTime()))return{isBefore:!0,isAfter:!1,start:null,end:null};const s=t!=null?t*1e3:60*60*1e3,a=new Date(r.getTime()+s),i=new Date;return{isBefore:i.getTime()<r.getTime(),isAfter:i.getTime()>a.getTime(),start:r,end:a}};function D8e(){var k,C,T,P,A,S,E,O,I,L;const{interviewId:e}=Or(),t=Tt(),[r,s]=y.useState(!0),[a,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(null);y.useEffect(()=>{(async()=>{var H,R;s(!0),o("");try{const D=await G.get(`/v1/interviews/${e}`);d(D.data)}catch(D){o(((R=(H=D==null?void 0:D.response)==null?void 0:H.data)==null?void 0:R.detail)||"Failed to load interview details. Please try again.")}finally{s(!1)}})()},[e]);const u=y.useMemo(()=>{const Z=b0(c==null?void 0:c.status);return[{label:"Applied",done:!0},{label:"Shortlisted",done:!!c},{label:"Interview",done:!!c},{label:"Result",done:Z==="selected"||Z==="rejected"}]},[c]),f=async()=>{var Z,H;if(c){i(!0),o("");try{await G.post(`/v1/interviews/${c.id}/start`),t(`/interviews/${c.id}`)}catch(R){o(((H=(Z=R==null?void 0:R.response)==null?void 0:Z.data)==null?void 0:H.detail)||"Interview is not available yet. Please try again later.")}finally{i(!1)}}};if(r)return n.jsx("div",{className:"text-gray-600",children:"Loading interview..."});if(l)return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:l}),n.jsx("button",{type:"button",onClick:()=>t("/candidate/my-interviews"),className:"text-sm text-purple-600 font-semibold",children:"Back to My Interviews"})]});if(!c)return null;const m=L8e(c.status),g=F8e(c.scheduled_at,c.duration_seconds),x=g.isBefore,h=g.isAfter,p=m==="Completed"||m==="Cancelled"||m==="Selected"||m==="Not Selected",v=!x&&!h&&!p&&c.mode!=="in_person"&&(b0(c.status)==="scheduled"||b0(c.status)==="in_progress"),b=p?m:x?`Available at ${iI(c.scheduled_at)}`:h?"Interview Window Closed":b0(c.status)==="in_progress"?"Resume Interview":c.mode==="ai_chat"?"Start Interview":c.mode==="in_person"?"In Person":"Join Meet",j=((C=(k=c==null?void 0:c.submission)==null?void 0:k.job)==null?void 0:C.title)||"Interview",N=((P=(T=c==null?void 0:c.submission)==null?void 0:T.job)==null?void 0:P.company_name)||"Company",w=((S=(A=c==null?void 0:c.submission)==null?void 0:A.recruiter)==null?void 0:S.full_name)||((O=(E=c==null?void 0:c.submission)==null?void 0:E.recruiter)==null?void 0:O.email)||"--",_=(L=(I=c==null?void 0:c.submission)==null?void 0:I.job)==null?void 0:L.description;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:j}),n.jsx("p",{className:"text-sm text-gray-500",children:N})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${O8e[m]||"bg-gray-100 text-gray-700"}`,children:m})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Recruiter"}),n.jsx("p",{className:"font-semibold text-gray-900",children:w})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Interview Mode"}),n.jsx("p",{className:"font-semibold text-gray-900",children:I8e(c.mode)})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Scheduled At"}),n.jsx("p",{className:"font-semibold text-gray-900",children:iI(c.scheduled_at)})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Status"}),n.jsx("p",{className:"font-semibold text-gray-900",children:m})]})]}),(c.meeting_link||c.location||c.notes)&&n.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-3 text-sm",children:[c.meeting_link&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Meeting Link"}),n.jsx("a",{href:c.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 font-semibold break-all",children:c.meeting_link})]}),c.location&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Location"}),n.jsx("p",{className:"font-semibold text-gray-900",children:c.location})]}),c.notes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Instructions"}),n.jsx("p",{className:"text-gray-700",children:c.notes})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",onClick:()=>t("/candidate/my-interviews"),className:"px-4 py-2 rounded border text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Back to My Interviews"}),c.mode==="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>v?f():null,disabled:!v||a,className:`px-4 py-2 rounded text-sm font-semibold ${v?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:a?"Starting...":b}),c.mode!=="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>{v&&c.meeting_link&&window.open(c.meeting_link,"_blank","noopener")},disabled:!v,className:`px-4 py-2 rounded text-sm font-semibold ${v?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:b})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Status Timeline"}),n.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:u.map(Z=>n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Z.done?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"}`,children:Z.label},Z.label))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Job Description"}),n.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line border rounded-lg p-4 bg-gray-50",children:_||"Description not available."})]})]})}const $8e="modulepreload",M8e=function(e){return"/"+e},lI={},W1=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=M8e(c),c in lI)return;lI[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":$8e,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ya=(...e)=>{const t=new Set(["n/a","na","none","null","undefined","unknown","unassigned","--","","-"]);for(const r of e){if(r==null)continue;const s=String(r).trim();if(s&&!t.has(s.toLowerCase()))return s}return""},B8e=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t:t==null?void 0:t.name).filter(Boolean):typeof e=="string"?e.split(/,|;/).map(t=>t.trim()).filter(Boolean):[],U8e=(e="")=>String(e||"").split(/\s+/).filter(Boolean).slice(0,2).map(t=>t.charAt(0).toUpperCase()).join(""),z8e=(e="")=>String(e||"").trim().toLowerCase(),oI=(e="")=>{const t=z8e(e);return t.includes("excel")?"candidate-card-premium__source-badge--excel":t.includes("bulk")?"candidate-card-premium__source-badge--bulk":"candidate-card-premium__source-badge--default"},W8e=(e="")=>{const t=String(e||"").trim().toLowerCase();if(!t||t==="n/a"||t==="na")return"candidate-card-premium__notice--unknown";if(t.includes("immediate")||t==="0"||t.includes("0 day"))return"candidate-card-premium__notice--immediate";const r=t.match(/\d+/),s=r?Number(r[0]):NaN;return Number.isFinite(s)?s<=15?"candidate-card-premium__notice--short":s<=45?"candidate-card-premium__notice--medium":"candidate-card-premium__notice--long":"candidate-card-premium__notice--unknown"},V8e=e=>{const t=["candidate-card-premium__skill--blue","candidate-card-premium__skill--teal","candidate-card-premium__skill--violet","candidate-card-premium__skill--indigo"];return t[e%t.length]},H8e=new Set(["","new","applied","sourced","verified"]),q8e=new Set(["called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","shortlisted"]),G8e=new Set(["am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client"]),J8e=new Set(["client_viewed","client_shortlisted","client_hold","client_rejected"]),K8e=new Set(["sent_to_am","am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client","client_viewed","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined"]);function X8e({candidate:e,profile:t,workflowMeta:r,selectable:s=!1,selected:a=!1,onSelect:i,onViewDetails:l}){var H,R,D,Y,M,X,ne,J,ue,ke,ve,je,ie,se,z,Te,fe,Ie,ce,Ce,Ye,at,pe,ye,Pe,et,We,qe,ot,Ct,He,mt,rt,wt,At,$t,Wt,lr,sr,De,yt;const[o,c]=y.useState(""),d=(t==null?void 0:t.id)||(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.candidate_id),u=ya(t==null?void 0:t.name,e==null?void 0:e.full_name,e==null?void 0:e.name,"Unknown"),f=ya(t==null?void 0:t.designation,t==null?void 0:t.currentRole,e==null?void 0:e.current_designation,e==null?void 0:e.designation,e==null?void 0:e.current_role,"Not specified"),m=ya(r==null?void 0:r.roleName,e==null?void 0:e.assignment_role,e==null?void 0:e.requirement_title,e==null?void 0:e.job_title,e==null?void 0:e.applied_role,e==null?void 0:e.applied_for,(H=e==null?void 0:e.requirement)==null?void 0:H.title,(R=e==null?void 0:e.job)==null?void 0:R.title,t==null?void 0:t.jobTitle,t==null?void 0:t.jobTitle,f),g=ya(t==null?void 0:t.totalExperience,e==null?void 0:e.experience_years,e==null?void 0:e.total_experience,"N/A"),x=ya(t==null?void 0:t.noticePeriod,"N/A"),h=ya(t==null?void 0:t.phone,e==null?void 0:e.phone,e==null?void 0:e.phone_number,"N/A"),p=ya(t==null?void 0:t.email,e==null?void 0:e.email,"N/A"),v=ya(t==null?void 0:t.location,t==null?void 0:t.city,e==null?void 0:e.location,"N/A"),b=ya(e==null?void 0:e.source,"Portal"),j=B8e(t==null?void 0:t.skills),N=j.slice(0,4),w=Math.max(0,j.length-N.length),_=ya(t==null?void 0:t.avatarUrl,t==null?void 0:t.photoUrl,e==null?void 0:e.avatar_url,e==null?void 0:e.photo_url,e==null?void 0:e.profile_photo),k=ya(r==null?void 0:r.recruiterName,e==null?void 0:e.recruiter_name),C=ya(r==null?void 0:r.amName,e==null?void 0:e.assigned_by_name,e==null?void 0:e.assigned_by,e==null?void 0:e.submitted_to_am_name,e==null?void 0:e.am_name,(D=t==null?void 0:t.accountManager)==null?void 0:D.name,e==null?void 0:e.am_name,e==null?void 0:e.account_manager_name,e==null?void 0:e.accountManagerName,(Y=e==null?void 0:e.account_manager)==null?void 0:Y.name,(M=e==null?void 0:e.account_manager)==null?void 0:M.am_name,(X=e==null?void 0:e.am)==null?void 0:X.name,(ne=e==null?void 0:e.am)==null?void 0:ne.am_name,(J=e==null?void 0:e.submission)==null?void 0:J.account_manager_name,(ke=(ue=e==null?void 0:e.submission)==null?void 0:ue.account_manager)==null?void 0:ke.name,(ve=e==null?void 0:e.requirement)==null?void 0:ve.account_manager_name,(ie=(je=e==null?void 0:e.requirement)==null?void 0:je.account_manager)==null?void 0:ie.name,(se=e==null?void 0:e.job)==null?void 0:se.account_manager_name,(Te=(z=e==null?void 0:e.job)==null?void 0:z.account_manager)==null?void 0:Te.name),T=ya(r==null?void 0:r.clientName,e==null?void 0:e.client_name,e==null?void 0:e.client_display_name,e==null?void 0:e.clientName,e==null?void 0:e.company_name,e==null?void 0:e.companyName,(fe=e==null?void 0:e.client)==null?void 0:fe.name,(Ie=e==null?void 0:e.client)==null?void 0:Ie.client_name,(ce=e==null?void 0:e.client)==null?void 0:ce.company_name,(Ce=e==null?void 0:e.submission)==null?void 0:Ce.client_name,(at=(Ye=e==null?void 0:e.submission)==null?void 0:Ye.client)==null?void 0:at.name,(ye=(pe=e==null?void 0:e.submission)==null?void 0:pe.client)==null?void 0:ye.client_name,(et=(Pe=e==null?void 0:e.submission)==null?void 0:Pe.client)==null?void 0:et.company_name,(We=e==null?void 0:e.requirement)==null?void 0:We.client_name,(ot=(qe=e==null?void 0:e.requirement)==null?void 0:qe.client)==null?void 0:ot.name,(He=(Ct=e==null?void 0:e.requirement)==null?void 0:Ct.client)==null?void 0:He.client_name,(rt=(mt=e==null?void 0:e.requirement)==null?void 0:mt.client)==null?void 0:rt.company_name,(wt=e==null?void 0:e.job)==null?void 0:wt.client_name,(At=e==null?void 0:e.job)==null?void 0:At.clientName,(Wt=($t=e==null?void 0:e.job)==null?void 0:$t.client)==null?void 0:Wt.name,(sr=(lr=e==null?void 0:e.job)==null?void 0:lr.client)==null?void 0:sr.client_name,(yt=(De=e==null?void 0:e.job)==null?void 0:De.client)==null?void 0:yt.company_name),P=ya(r==null?void 0:r.actedBy,e==null?void 0:e.updated_by_name,e==null?void 0:e.submitted_by_name,e==null?void 0:e.recruiter_name),A=String((r==null?void 0:r.statusRaw)||(t==null?void 0:t.status)||(e==null?void 0:e.status)||"").trim().toLowerCase();H8e.has(A);const S=q8e.has(A),E=G8e.has(A),O=J8e.has(A),L=K8e.has(A)?[{key:"status",className:O?"candidate-card-premium__action-tag--client":E?"candidate-card-premium__action-tag--am":S?"candidate-card-premium__action-tag--recruiter":"candidate-card-premium__action-tag--status",label:Vs(A),detailTitle:O?"Client Action":E?"Account Manager Action":S?"Recruiter Action":"Status Update"}]:[],Z=y.useMemo(()=>L.find(ut=>ut.key===o)||null,[L,o]);return n.jsxs("div",{className:"candidate-card--premium",children:[n.jsxs("div",{className:"candidate-card-premium__header",children:[n.jsxs("div",{className:"candidate-card-premium__header-left",children:[s&&n.jsx("label",{className:"candidate-card-premium__select",children:n.jsx("input",{type:"checkbox",checked:a,onChange:()=>i==null?void 0:i(d),"aria-label":`Select ${u}`})}),n.jsx("div",{className:"candidate-card-premium__avatar-shell",children:n.jsx("div",{className:"candidate-card-premium__avatar-ring",children:_?n.jsx("img",{src:_,alt:u,className:"candidate-card-premium__avatar-image"}):n.jsx("span",{className:"candidate-card-premium__avatar-initials",children:U8e(u)})})}),n.jsxs("div",{className:"candidate-card-premium__identity",children:[n.jsx("h3",{className:"candidate-card-premium__name",children:u}),n.jsx("p",{className:"candidate-card-premium__role",children:f}),n.jsx("span",{className:"candidate-card-premium__experience-badge",children:g})]})]}),n.jsxs("div",{className:"candidate-card-premium__header-right",children:[n.jsxs("span",{className:`candidate-card-premium__source-badge ${oI(b)}`,title:b,children:[n.jsx("span",{className:"candidate-card-premium__source-icon",children:oI(b).includes("--excel")?n.jsx(t4e,{}):n.jsx(zC,{})}),n.jsx("span",{className:"candidate-card-premium__source-text",children:b||"Portal"})]}),L.length>0&&n.jsx("div",{className:"candidate-card-premium__action-tags candidate-card-premium__action-tags--header",children:L.map(ut=>n.jsx("button",{type:"button",className:`candidate-card-premium__action-tag ${ut.className} ${o===ut.key?"candidate-card-premium__action-tag--active":""}`,onClick:()=>c(Lt=>Lt===ut.key?"":ut.key),children:ut.label},ut.key))}),Z&&n.jsxs("div",{className:"candidate-card-premium__action-detail",children:[n.jsx("div",{className:"candidate-card-premium__action-detail-title",children:Z.detailTitle}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Client: ",T||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Role: ",m||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Account Manager: ",C||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Recruiter: ",k||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Used by Recruiter: ",k||P||"N/A"]})]})]})]}),n.jsxs("div",{className:"candidate-card-premium__content",children:[n.jsxs("span",{className:`candidate-card-premium__notice ${W8e(x)}`,children:[n.jsx("span",{className:"candidate-card-premium__notice-icon",children:n.jsx($Ce,{size:10,fill:"currentColor"})}),x]}),n.jsxs("div",{className:"candidate-card-premium__contact-row",children:[n.jsxs("a",{href:`tel:${h}`,className:"candidate-card-premium__contact-item",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx(E1,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text",children:h})]}),n.jsxs("a",{href:`mailto:${p}`,className:"candidate-card-premium__contact-item",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx(iu,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text candidate-card-premium__contact-text--email",children:p})]})]}),n.jsx("div",{className:"candidate-card-premium__contact-row",children:n.jsxs("span",{className:"candidate-card-premium__contact-item candidate-card-premium__contact-item--muted",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx(Oc,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text",children:v})]})}),n.jsx("div",{className:"candidate-card-premium__skills",children:N.length>0?n.jsxs(n.Fragment,{children:[N.map((ut,Lt)=>n.jsx("span",{className:`candidate-card-premium__skill-chip ${V8e(Lt)}`,children:ut},`${d}-${ut}-${Lt}`)),w>0&&n.jsxs("span",{className:"candidate-card-premium__skill-more",children:["+",w," more"]})]}):n.jsx("span",{className:"candidate-card-premium__skill-empty",children:"No skills added"})}),n.jsx("div",{className:"candidate-card-premium__footer",children:n.jsx("button",{type:"button",className:"candidate-card-premium__view-btn",onClick:()=>l==null?void 0:l(e),children:"View Profile"})})]})]})}const Il=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,Y8e=()=>{const e="https://ats-10-iyol.onrender.com";try{return new URL(e).origin}catch{return String(e).replace(/\/+$/,"")}},Zv=e=>{if(!Il(e))return null;const t=String(e).trim();if(!t)return null;if(/^https?:\/\//i.test(t)||t.startsWith("blob:")||t.startsWith("data:"))return t;const r=t.replace(/\\/g,"/"),s=r.toLowerCase();let a=r;const i=s.indexOf("/uploads/"),l=s.indexOf("uploads/");return i>=0?a=r.slice(i):l>=0?a=`/${r.slice(l)}`:r.startsWith("/")||(a=`/${r}`),`${Y8e()}${a}`},Pt=(...e)=>{for(const t of e)if(Il(t))return t;return null},z4=new Set(["engineer","developer","manager","analyst","consultant","architect","lead","specialist","executive","officer","intern","designer","administrator","devops","qa","tester","associate","director","head","coordinator","principal","staff","recruiter","account","am","hr","sap","abap"]),Z8e=new Set(["worked","working","experience","knowledge","responsible","responsibilities","project","projects","ticket","tickets","clarification","issues","resolution","candidate","college","university","payroll","involved","support"]),Q8e=new Set(["strong","knowledge","tickets","issues","clarification","resolution","experience","resume","profile","summary","objective","skills","education","work","project","projects","candidate"]),e7e=new Set(["india","karnataka","mysore","bengaluru","bangalore","mumbai","delhi","hyderabad","chennai","pune","noida","gurgaon","remote","onsite","hybrid","city","state"]),t7e=new Set(["worked","working","experience","knowledge","responsible","responsibilities","project","projects","ticket","tickets","clarification","issues","resolution","candidate","college","university","payroll","involved","support"]),cI=new Set(["and","or","the","of","in","for","to","at","by","with","on","from","as","other","identifying","travel","ensure","public","involvement","involved","team","enhancements","correction","personal","good","defined","executed","changes","responsible","productivity","user","upgrade","smart","preparing","post","functional","prepared","organizational","implementation","knowledge","groups","role","actively","go","suggestion","positive","provide","escalating","handle","requirement","standards","handling","preparation","screen","end","medical","configuring","assist","info","providing","testing","coordinating","working","client","supporting","problem","cross","having","define","lead","managing","worked","writing","area","day","unit","modules","applications","module","project","projects","resume","candidate","profile","summary","technical","experience","professional","clarification","issues","ticket","tickets","support","location","region","country","south","north","east","west"]),r7e=new Set(["jan","january","feb","february","mar","march","apr","april","may","jun","june","jul","july","aug","august","sep","sept","september","oct","october","nov","november","dec","december","q1","q2","q3","q4"]),n7e={successfactors:"SAP SuccessFactors","success factors":"SAP SuccessFactors",fiori:"SAP Fiori",fieldglass:"FieldGlass","field glass":"FieldGlass",onb:"SAP ONB",cats:"SAP CATS",ess:"SAP ESS/MSS",mss:"SAP ESS/MSS","ess/mss":"SAP ESS/MSS",rmk:"SAP RMK",fico:"SAP FICO",payroll:"Payroll Processing",attendance:"Attendance Management",compensation:"Compensation & Benefits",workflow:"Workflow Management",abap:"ABAP"},IW=e=>String(e||"").toLowerCase().replace(/&/g," and ").replace(/[^\w#+/.\- ]+/g," ").replace(/\s+/g," ").trim(),s7e=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>70||t.includes("@")||/https?:\/\//i.test(t))return!1;const r=t.toLowerCase().split(/[\s/,&-]+/).map(s=>s.trim()).filter(Boolean);return!(!r.length||r.length>6||r.some(s=>/^(19|20)\d{2}$/.test(s))||r.some(s=>/^\d+$/.test(s))||r.some(s=>r7e.has(s))||r.every(s=>cI.has(s))||r.length===1&&cI.has(r[0]))},a7e=e=>{const t=String(e||"").trim();if(!s7e(t))return null;const r=IW(t);return n7e[r]||t},dI=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g,"").trim(),FW=e=>String(e||"").toLowerCase().split(/[\s,;/\\|-]+/).map(t=>t.trim()).filter(Boolean),DW=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>60||t.includes("/")||t.includes(":")||/\d/.test(t))return!1;const r=t.split(/\s+/).filter(Boolean);if(r.length===0||r.length>4)return!1;const s=r.map(a=>a.toLowerCase());return s.some(a=>Q8e.has(a))||s.some(a=>z4.has(a))?!1:r.every(a=>/^[A-Za-z.'-]+$/.test(a))},$W=e=>{const t=String(e||"").trim();if(!t||t.length>60||t.includes("@"))return!1;const r=FW(t);if(r.length===0||r.length>6||r.some(i=>t7e.has(i)))return!1;const s=r.some(i=>z4.has(i));return!!(r.some(i=>e7e.has(i))&&!s||t.includes(",")&&!s&&r.length<=4||!s&&r.length<=3&&!/\d/.test(t))},i7e=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>120||t.includes("@")||/[.!?]/.test(t)&&t.split(/\s+/).length>4||/\b(19|20)\d{2}\b/.test(t))return!0;const r=FW(t);return r.length===0||r.length>8||r.some(a=>Z8e.has(a))?!0:!r.some(a=>z4.has(a))},l7e=e=>{if(!Il(e))return null;const t=String(e).replace(/\s+/g," ").trim();return t&&$W(t)?t:null},R_=(e=[])=>{for(const t of e){const r=l7e(t);if(r)return r}return null},uI=(e=[],t=[])=>{const r=new Set(t.map(s=>dI(s)).filter(Boolean));for(const s of e){if(!Il(s))continue;const a=String(s).trim();if(!a)continue;const i=dI(a);if(i&&!r.has(i)&&!$W(a)&&!i7e(a))return a}return null},o7e=e=>{const t=String(e||"").trim();if(!t||!t.includes("@"))return null;const s=(t.split("@")[0]||"").replace(/\d+/g," ").replace(/[._-]+/g," ").replace(/\s+/g," ").trim();if(!s)return null;const a=s.split(" ").filter(Boolean).slice(0,4).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ");return DW(a)?a:null},c7e=e=>{if(!e||typeof e!="object")return{};const t=Pt(e.parsed_resume,e.parsedResume),r=t&&typeof t=="object"?Pt(t.data,t.parsed_data,t.parsedData,t):null,s=Pt(e.parsed_data_json,e.parsedDataJson),a=Pt(s,r,{});return a&&typeof a=="object"?a:{}},MW=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},L_=e=>{const t=MW(e);return t?t.toLocaleDateString("en-US"):"N/A"},d7e=e=>{if(!Il(e))return"";const t=Number(e);return Number.isNaN(t)?String(e):t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(1)} GB`},u7e=e=>Il(e)?typeof e=="number"?`${e} yrs`:typeof e=="string"&&e.match(/^\d+(\.\d+)?$/)?`${e} yrs`:e:null,f7e=e=>Il(e)?typeof e=="number"?e===0?"Immediate":`${e} days`:typeof e=="string"&&e.match(/^\d+$/)?e==="0"?"Immediate":`${e} days`:e:null,fI=(e,t)=>Il(e)?t?typeof e=="number"?new Intl.NumberFormat("en-IN").format(e):String(e):"[REDACTED]":"N/A",m7e=e=>{if(!e)return[];const t=Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(s=>s.trim()).filter(Boolean):[],r=new Map;return t.forEach(s=>{let a="",i="Intermediate";typeof s=="string"?a=s:s&&typeof s=="object"&&(a=s.name||s.skill||s.title||"",i=s.level||s.proficiency||"Intermediate");const l=a7e(a);if(!l)return;const o=IW(l);!o||r.has(o)||r.set(o,{name:l,level:i})}),Array.from(r.values())},h7e=e=>e?(Array.isArray(e)?e:[e]).map(r=>{if(typeof r=="string")return{name:r,organization:"",expiryDate:null,isExpiring:!1,credentialId:"",credentialUrl:""};const s=r.expiry_date||r.expiryDate,a=MW(s),i=a?a.getTime()-Date.now()<=30*24*60*60*1e3&&a.getTime()>Date.now():!1;return{name:r.name||r.title||"Certification",organization:r.organization||r.issuer||"",expiryDate:s,isExpiring:i,credentialId:Pt(r.credential_id,r.credentialId,r.id),credentialUrl:Pt(r.credential_url,r.credentialUrl,r.url)}}).filter(r=>r&&r.name):[],p7e=e=>e?(Array.isArray(e)?e:[e]).map(r=>typeof r=="string"?{name:r,shortDesc:"",stack:[]}:{name:r.name||r.title||"Project",shortDesc:r.short_desc||r.shortDesc||r.summary||"",stack:r.stack||r.technologies||r.tech||[]}).filter(r=>r&&r.name):[],x7e=e=>{if(Array.isArray(e.education_history)&&e.education_history.length>0){const t=e.education_history[0],r=Pt(t.cgpa,e.cgpa),s=Pt(t.percentage,e.percentage);return{degree:t.degree||t.title||"",institution:t.institution||t.university||"",college:t.college||t.institution||t.university||"",year:t.end_year||t.year||"",cgpa:r,percentage:s}}if(Array.isArray(e.education)&&e.education.length>0){const t=e.education[0],r=Pt(t.cgpa,e.cgpa),s=Pt(t.percentage,e.percentage);return{degree:t.degree||t.title||"",institution:t.institution||t.university||"",college:t.college||t.institution||t.university||"",year:t.end_year||t.year||"",cgpa:r,percentage:s}}if(e.education&&typeof e.education=="object"){const t=Pt(e.education.cgpa,e.cgpa),r=Pt(e.education.percentage,e.percentage);return{degree:e.education.degree||e.education.title||"",institution:e.education.institution||e.education.university||"",college:e.education.college||e.education.institution||e.education.university||"",year:e.education.year||e.education.graduation_year||"",cgpa:t,percentage:r}}return{degree:e.education||e.highest_degree||e.degree||"",institution:e.institution||e.university||e.college||"",college:e.college||e.institution||e.university||"",year:e.graduation_year||e.year||"",cgpa:e.cgpa||"",percentage:e.percentage||""}},La=e=>Pt(e==null?void 0:e.apiId,e==null?void 0:e.id,e==null?void 0:e._id,e==null?void 0:e.candidate_id),fm=(e,t=!0)=>{var A,S,E,O,I,L,Z;if(!e)return null;const r=La(e),s=r||e.public_id||e.email||e.phone||"",a=c7e(e),i=Pt(e.work_history,e.employment_history,e.experience_history,a.work_history,a.work_experience,a.experience,[]),l=Array.isArray(i)&&i.length>0?i[0]||{}:{},o=[e.current_location,e.currentLocation,e.location,e.city,e.current_city,e.currentCity,e.preferred_location,e.preferredLocation,a.current_location,a.currentLocation,a.location,a.city,a.current_city,a.currentCity,a.preferred_location,a.preferredLocation],c=uI([e.current_role,e.currentRole,e.current_job_title,e.currentJobTitle,e.current_designation,e.currentDesignation,e.designation,e.designation_title,e.role,e.title,a.current_role,a.currentRole,a.current_job_title,a.currentJobTitle,a.current_designation,a.currentDesignation,a.designation,a.designation_title,a.role,l.role,l.designation,l.title],o),d=uI([e.current_designation,e.currentDesignation,e.current_job_title,e.currentJobTitle,e.designation,e.designation_title,e.current_role,e.currentRole,e.role,e.title,a.current_designation,a.currentDesignation,a.current_job_title,a.currentJobTitle,a.current_role,a.currentRole,a.designation,a.designation_title,a.role,l.role,l.designation,l.title],o),u=m7e(Pt(e.skills,a.skills,e.skill_set,e.top_skills)),f=h7e(Pt(e.certifications,a.certifications,e.certifications_text,a.certifications_text)),m=p7e(Pt(e.projects,a.projects)),g=x7e({...a,...e,education:Pt(e.education,a.education),education_history:Pt(e.education_history,a.education_history)}),x=Pt(e.relevance_score,e.match_score,e.match_percentage,e.semantic_score);let h=Number(x);Number.isNaN(h)&&(h=null);const p=Pt(e.current_ctc,a.current_ctc,e.current_salary,e.currentCTC,e.currentCtc,e.currentSalary,e.current_compensation,e.currentCompensation,e.ctc,a.currentCTC,a.currentCtc,a.current_salary,a.currentSalary,a.current_compensation,a.currentCompensation,a.ctc,l.current_ctc,l.ctc,l.salary,l.compensation,l.package),v=Pt(e.expected_ctc,a.expected_ctc,e.expected_salary,e.expectedCTC,e.expectedCtc,e.expectedSalary,e.expected_compensation,e.expectedCompensation,e.salary_expectation,e.salaryExpectation,a.expectedCTC,a.expectedCtc,a.expected_salary,a.expectedSalary,a.expected_compensation,a.expectedCompensation,a.salary_expectation,a.salaryExpectation,l.expected_ctc,l.expectedCtc),b=Pt(e.notice_period,e.notice_period_days,a.notice_period,a.notice_period_days,e.noticePeriod,e.noticePeriodDays),j=Pt(e.resume_size,e.resumeSize),N=Pt(e.resume_updated_at,e.resumeUpdatedAt,e.updated_at,e.updatedAt),w=[];Il(j)&&w.push(d7e(j)),Il(N)&&w.push(`Updated ${L_(N)}`);const _=R_([e.current_location,e.location,e.city,a.current_location,a.location,a.city]),k=R_([e.city,e.current_city,e.current_location,a.city,a.current_location,a.location]),C=R_([e.preferred_location,e.preferredLocation,a.preferred_location,a.preferredLocation]),T=Pt(e.email,a.email),P=Pt([e.full_name,e.name,e.fullName,a.full_name,a.name,a.fullName].find(H=>DW(H)),o7e(T),"Unnamed Candidate");return{id:s,apiId:r,name:P,gender:Pt(e.gender,a.gender),dateOfBirth:Pt(e.date_of_birth,e.dob,e.dateOfBirth,a.date_of_birth,a.dob,a.dateOfBirth),nationality:Pt(e.nationality,a.nationality),isVerified:!!Pt(e.is_verified,e.verified,e.profile_verified),phone:Pt(e.phone,e.mobile,e.phone_number,a.phone,a.mobile),mobileNumber:Pt(e.mobile,e.phone,e.phone_number,a.phone,a.mobile),email:Pt(e.email,a.email),location:_,city:k||_,pincode:Pt(e.pincode,e.pin_code,e.zipcode,a.pincode),currentAddress:Pt(e.current_address,e.currentAddress,e.address,a.current_address,a.currentAddress),permanentAddress:Pt(e.permanent_address,e.permanentAddress,a.permanent_address,a.permanentAddress),preferredLocation:C,languagesKnown:Pt(e.languages_known,e.languagesKnown,e.languages,a.languages,a.languages_known),photoUrl:Zv(Pt(e.photo_url,e.avatar_url,e.profile_picture,e.photo,a.photo_url,a.photo)),resumeUrl:Zv(Pt(e.resume_url,e.resumeUrl,a.resume_url,a.resumeUrl)),resumeMeta:w.join(" | ")||"Resume meta not available",currentRole:c,designation:d,currentCompany:Pt(e.current_employer,e.current_company,a.current_company,a.current_employer),totalExperience:u7e(Pt(e.total_experience,e.experience_years,e.experience,a.total_experience,a.experience_years)),employmentStatus:Pt(e.employment_status,e.employmentStatus),professionalHeadline:Pt(e.professional_headline,e.headline,e.profile_headline),preferredWorkMode:Pt(e.preferred_work_mode,e.preferredWorkMode,e.work_mode,e.workMode),willingToRelocate:Pt(e.willing_to_relocate,e.ready_to_relocate,e.willingToRelocate,e.readyToRelocate,e.ready_for_relocation,e.readyForRelocation,e.open_to_relocate,e.openToRelocate,a.willing_to_relocate,a.ready_to_relocate,a.willingToRelocate,a.readyToRelocate,a.ready_for_relocation,a.readyForRelocation,a.open_to_relocate,a.openToRelocate),readyToRelocate:Pt(e.ready_to_relocate,e.willing_to_relocate,e.readyToRelocate,e.willingToRelocate,e.ready_for_relocation,e.readyForRelocation,e.open_to_relocate,e.openToRelocate,a.ready_to_relocate,a.willing_to_relocate,a.readyToRelocate,a.willingToRelocate,a.ready_for_relocation,a.readyForRelocation,a.open_to_relocate,a.openToRelocate),travelAvailability:Pt(e.travel_availability,e.travelAvailability),salaryNegotiable:Pt(e.salary_negotiable,e.salaryNegotiable),careerSummary:Pt(e.career_summary,e.summary,e.professional_summary,e.professionalSummary,a.professional_summary,a.professionalSummary,a.summary),availabilityStatus:Pt(e.availability_status,e.availabilityStatus),availableFrom:Pt(e.available_from,e.availableFrom),requiresSponsorship:Pt(e.requires_sponsorship,e.requiresSponsorship),noticePeriod:f7e(b),currentCtcDisplay:fI(p,t),expectedCtcDisplay:fI(v,t),skills:u,certifications:f,education:g,workHistory:i,educationHistory:Pt(e.education_history,e.education_details,a.education_history,a.education_list,a.education,[]),projects:m,workAuthorization:Pt(e.work_authorization,e.visa_status,e.citizenship),social:{linkedin:Pt(e.linkedin_url,e.linkedin,a.linkedin_url,a.linkedin),github:Pt(e.github_url,e.github,a.github_url,a.github),portfolio:Pt(e.portfolio_url,e.portfolio,a.portfolio_url,a.portfolio)},jobTitle:Pt(e.job_title,e.applied_role,e.applied_for,e.appliedJob,(A=e.job)==null?void 0:A.title,a.applied_for,a.applied_role),accountManager:{id:Pt(e.account_manager_id,(S=e.account_manager)==null?void 0:S.id,(E=e.account_manager)==null?void 0:E.am_id),name:Pt(e.account_manager_name,(O=e.account_manager)==null?void 0:O.name,(I=e.account_manager)==null?void 0:I.am_name),email:Pt(e.account_manager_email,(L=e.account_manager)==null?void 0:L.email,(Z=e.account_manager)==null?void 0:Z.am_email)},status:Pt(e.status,e.application_status,"new"),appliedDate:L_(Pt(e.applied_date,e.appliedAt,e.created_at)),updatedAt:L_(Pt(e.updated_at,e.updatedAt)),matchScore:h,keyAchievement:Pt(e.key_achievement,e.highlight),relevantYears:Pt(e.relevant_experience_years,e.relevant_years)}},md=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,Ds=(...e)=>{for(const t of e)if(md(t))return t;return null},va=(e,t="N/A")=>md(e)?Array.isArray(e)?e.length?e.join(", "):t:e:t,BW=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},g7e=e=>{const t=BW(e);return t?t.toLocaleDateString("en-US"):"N/A"},y7e=e=>{const t=BW(e);return t?t.toLocaleString("en-US"):"N/A"},o0=e=>e?Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[]:[],v7e=e=>{if(e===!0)return"Yes";if(e===!1)return"No";if(typeof e=="number"){if(e===1)return"Yes";if(e===0)return"No"}if(typeof e=="string"){const t=e.trim().toLowerCase();return["yes","y","true","1"].includes(t)?"Yes":["no","n","false","0"].includes(t)?"No":e.trim()}return e},mI=e=>e==="N/A"||!md(e)?null:e,b7e=e=>{const t=String(e||"").trim();return t?t.startsWith("blob:")||t.startsWith("data:")?t:encodeURI(t):""},Uc=({id:e,title:t,children:r,actions:s=null})=>n.jsxs("section",{id:e,className:"candidate-detail__section",children:[n.jsxs("div",{className:"candidate-detail__section-header",children:[n.jsx("h3",{children:t}),s]}),n.jsx("div",{className:"candidate-detail__section-body",children:r})]}),I_=({fields:e})=>n.jsx("div",{className:"candidate-detail__grid",children:e.map(t=>n.jsxs("div",{className:"candidate-detail__field",children:[n.jsx("div",{className:"candidate-detail__field-label",children:t.label}),n.jsx("div",{className:"candidate-detail__field-value",children:va(t.value)})]},t.label))}),ng=({label:e})=>n.jsx("div",{className:"candidate-detail__empty",children:e}),j7e=["new","applied","sourced","called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client","client_viewed","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],_7e=[];function W4({candidate:e,profile:t,loading:r,onClose:s,onPreviewResume:a,onScheduleInterview:i,onShortlist:l,onAddNote:o,onSendEmail:c,onOpenFullProfile:d,onOpenFeedback:u,onMessageAm:f,onMessageCandidate:m,customQuickActions:g,onSendToAM:x,onUpdateStatus:h,workflowStatusOptions:p=_7e,hideQuickActions:v=!1,hideStatusControls:b=!1,hideSendToAMAction:j=!1,hideScheduleInterviewAction:N=!1,hideOpenFullProfileAction:w=!1}){var ce,Ce,Ye,at,pe,ye,Pe,et,We,qe,ot,Ct,He,mt,rt,wt,At,$t,Wt,lr,sr,De,yt,ut,Lt,Yt,be,nt,ze,ht,Nt,Oe,xe,Re,le,Me,Ve,Xe,he,W,V,Q,K,q;const _=y.useRef(null),[k,C]=y.useState(""),[T,P]=y.useState(!1),[A,S]=y.useState(""),[E,O]=y.useState(!1),[I,L]=y.useState({type:"",text:""}),Z=y.useMemo(()=>[{id:"notice",label:"Notice Period"},{id:"personal",label:"Personal Information"},{id:"professional",label:"Professional Information"},{id:"education",label:"Education Details"},{id:"skills",label:"Skills"},{id:"certifications",label:"Certifications"},{id:"experience",label:"Experience"}],[]),H=y.useMemo(()=>k.trim()?Z.filter(F=>F.label.toLowerCase().includes(k.trim().toLowerCase())):Z,[k,Z]);if(y.useEffect(()=>{const F=ee=>{ee.key==="Escape"&&s()};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[s]),!e||!t)return null;const R=(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.candidate_id)||"",D=String((t==null?void 0:t.status)||(e==null?void 0:e.status)||"").toLowerCase().trim(),Y=y.useMemo(()=>{const F=new Set;return(p.length?p:j7e.map(me=>({value:me,label:Vs(me)}))).map(me=>{if(typeof me=="string")return{value:me.toLowerCase(),label:Vs(me)};const Ne=String((me==null?void 0:me.value)||"").toLowerCase().trim();return Ne?{value:Ne,label:me.label||Vs(Ne)}:null}).filter(me=>!me||F.has(me.value)?!1:(F.add(me.value),!0))},[p]);y.useEffect(()=>{var ee;const F=D||((ee=Y[0])==null?void 0:ee.value)||"";S(me=>me===F?me:F),L(me=>me.type||me.text?{type:"",text:""}:me)},[R,D,Y]);const M=[{label:"Notice Period",value:t.noticePeriod}],X=[{label:"Name",value:t.name},{label:"Gender",value:t.gender},{label:"DOB",value:md(t.dateOfBirth)?g7e(t.dateOfBirth):null},{label:"Phone Number",value:t.phone},{label:"Email",value:t.email},{label:"Current Address",value:Ds(t.currentAddress,e.current_address)},{label:"Permanent Address",value:Ds(t.permanentAddress,e.permanent_address)},{label:"City",value:Ds(t.city,e.city)},{label:"Pincode",value:Ds(t.pincode,e.pincode)},{label:"Ready to Relocate",value:v7e(Ds(t.readyToRelocate,t.willingToRelocate,e.ready_to_relocate,e.willing_to_relocate,e.readyToRelocate,e.willingToRelocate,e.open_to_relocate,e.openToRelocate))},{label:"Preferred Location",value:Ds(t.preferredLocation,e.preferred_location)}],ne=[{label:"Designation",value:Ds(t.designation,t.currentRole,e.current_designation,e.currentDesignation,e.current_job_title,e.currentJobTitle,e.designation,e.current_role,e.currentRole,e.role,(Ce=(ce=t.workHistory)==null?void 0:ce[0])==null?void 0:Ce.role,(at=(Ye=t.workHistory)==null?void 0:Ye[0])==null?void 0:at.designation,(ye=(pe=t.workHistory)==null?void 0:pe[0])==null?void 0:ye.title,(et=(Pe=e.work_history)==null?void 0:Pe[0])==null?void 0:et.role,(qe=(We=e.work_history)==null?void 0:We[0])==null?void 0:qe.designation,(Ct=(ot=e.work_history)==null?void 0:ot[0])==null?void 0:Ct.title)},{label:"Current CTC",value:mI(Ds(t.currentCtcDisplay,e.current_ctc,e.currentCtc,e.current_salary,e.currentSalary,e.currentCTC,e.ctc,(mt=(He=t.workHistory)==null?void 0:He[0])==null?void 0:mt.current_ctc,(wt=(rt=t.workHistory)==null?void 0:rt[0])==null?void 0:wt.ctc,($t=(At=t.workHistory)==null?void 0:At[0])==null?void 0:$t.salary,(lr=(Wt=t.workHistory)==null?void 0:Wt[0])==null?void 0:lr.compensation,(De=(sr=e.work_history)==null?void 0:sr[0])==null?void 0:De.current_ctc,(ut=(yt=e.work_history)==null?void 0:yt[0])==null?void 0:ut.ctc,(Yt=(Lt=e.work_history)==null?void 0:Lt[0])==null?void 0:Yt.salary,(nt=(be=e.work_history)==null?void 0:be[0])==null?void 0:nt.compensation))},{label:"Expected CTC",value:mI(Ds(t.expectedCtcDisplay,e.expected_ctc,e.expectedCtc,e.expected_salary,e.expectedSalary,e.expectedCTC,e.salary_expectation,e.salaryExpectation))}],J=o0(Ds(t.educationHistory,e.education_history,e.educationHistory,e.education_details,e.educationDetails)),ue=md((ze=t.education)==null?void 0:ze.degree)||md((ht=t.education)==null?void 0:ht.college)||md((Nt=t.education)==null?void 0:Nt.institution)?[t.education]:[],ke=J.length?J:ue,ve=(Array.isArray(t.skills)?t.skills:o0(e.skills)).map(F=>typeof F=="string"?F:(F==null?void 0:F.name)||(F==null?void 0:F.skill)||(F==null?void 0:F.title)||"").filter(Boolean),je=(Array.isArray(t.certifications)?t.certifications:o0(e.certifications)).filter(Boolean),ie=o0(Ds(t.workHistory,e.work_history,e.workHistory,e.employment_history,e.experience_history)),se=async()=>{if(!(!h||!A||E)){O(!0),L({type:"",text:""});try{const F=await h(e,A);F&&F.ok===!1?L({type:"error",text:F.message||"Failed to update status"}):L({type:"success",text:`Status updated to ${Vs(A)}`})}catch(F){L({type:"error",text:(F==null?void 0:F.message)||"Failed to update status"})}finally{O(!1)}}},z=F=>{if(!_.current)return;const ee=_.current.querySelector(`#${F}`);ee&&ee.scrollIntoView({behavior:"smooth",block:"start"})},Te=e.job_title||t.jobTitle||e.applied_role||e.applied_for||"Not specified",fe=e.account_manager_name||((Oe=t.accountManager)==null?void 0:Oe.name)||((xe=e.account_manager)==null?void 0:xe.name)||((Re=e.account_manager)==null?void 0:Re.am_name)||null,Ie=b7e(Zv(Ds(t.resumeUrl,e.resume_url,e.resumeUrl,e.resume_path,e.resumePath,(le=e.parsed_resume)==null?void 0:le.resume_url,(Me=e.parsed_resume)==null?void 0:Me.resumeUrl,(Xe=(Ve=e.parsed_resume)==null?void 0:Ve.data)==null?void 0:Xe.resume_url,(W=(he=e.parsed_resume)==null?void 0:he.data)==null?void 0:W.resumeUrl,(V=e.parsed_data_json)==null?void 0:V.resume_url,(Q=e.parsed_data_json)==null?void 0:Q.resumeUrl,(K=e.parsedDataJson)==null?void 0:K.resume_url,(q=e.parsedDataJson)==null?void 0:q.resumeUrl)));return n.jsxs("div",{className:"candidate-detail-modal",role:"dialog","aria-modal":"true","aria-labelledby":"candidate-detail-title",onClick:F=>{F.target===F.currentTarget&&s()},children:[n.jsxs("div",{className:"candidate-detail",children:[n.jsxs("div",{className:"candidate-detail__header",children:[n.jsx("button",{type:"button",className:"candidate-detail__back",onClick:s,children:"Back to cards"}),n.jsxs("div",{className:"candidate-detail__header-main",children:[n.jsx("h2",{id:"candidate-detail-title",children:t.name||"Candidate"}),n.jsxs("div",{className:"candidate-detail__header-meta",children:[n.jsx("span",{className:"candidate-status-badge candidate-status-badge--neutral",children:Vs(t.status)||"Unknown"}),n.jsxs("span",{className:"candidate-detail__job",children:["Applied for: ",Te]}),fe&&n.jsxs("span",{className:"candidate-detail__job",children:["AM: ",fe]})]})]}),n.jsxs("div",{className:"candidate-detail__header-actions",children:[n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>Ie&&window.open(Ie,"_blank"),disabled:!Ie,children:"Download Resume"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>{if(Ie){if(typeof a=="function"){a(Ie,e);return}window.open(Ie,"_blank")}},disabled:!Ie,children:"Preview Resume"})]})]}),n.jsxs("div",{className:"candidate-detail__body",children:[n.jsxs("aside",{className:"candidate-detail__nav",children:[n.jsx("div",{className:"candidate-detail__nav-search",children:n.jsx("input",{type:"text",value:k,onChange:F=>C(F.target.value),placeholder:"Search sections"})}),n.jsx("div",{className:"candidate-detail__nav-list",children:H.map(F=>n.jsx("button",{type:"button",onClick:()=>z(F.id),children:F.label},F.id))})]}),n.jsxs("main",{className:"candidate-detail__content",ref:_,children:[r&&n.jsx("div",{className:"candidate-detail__loading",children:"Loading..."}),n.jsx(Uc,{id:"notice",title:"Notice Period",children:n.jsx(I_,{fields:M})}),n.jsx(Uc,{id:"personal",title:"Personal Information",children:n.jsx(I_,{fields:X})}),n.jsx(Uc,{id:"professional",title:"Professional Information",children:n.jsx(I_,{fields:ne})}),n.jsx(Uc,{id:"education",title:"Education Details",actions:d&&!w&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d(e,t),children:"Add Education"}),children:ke.length===0?n.jsx(ng,{label:"No education details available"}):n.jsx("div",{className:"candidate-detail__cards",children:ke.map((F,ee)=>{var me;return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsxs("div",{className:"candidate-detail__card-title",children:["Highest Degree: ",va(F.degree||F.title)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["College Name:"," ",va(F.college||F.institution||F.university||((me=t.education)==null?void 0:me.college))]}),n.jsx("div",{className:"candidate-detail__card-meta",children:va(F.cgpa?`CGPA: ${F.cgpa}`:F.percentage?`%: ${F.percentage}`:null,"CGPA/%: N/A")})]},F.id||ee)})})}),n.jsx(Uc,{id:"skills",title:"Skills",children:ve.length===0?n.jsx(ng,{label:"No skills available"}):n.jsx("div",{className:"candidate-detail__chip-row",children:ve.map((F,ee)=>n.jsx("span",{className:"candidate-detail__chip",children:F},`${F}-${ee}`))})}),n.jsx(Uc,{id:"certifications",title:"Certifications",actions:d&&!w&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d(e,t),children:"Add Certification"}),children:je.length===0?n.jsx(ng,{label:"No certifications available"}):n.jsx("div",{className:"candidate-detail__cards",children:je.map((F,ee)=>{const me=F.credentialId||F.credential_id||F.id||null,Ne=F.credentialUrl||F.credential_url||F.url||null;return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsx("div",{className:"candidate-detail__card-title",children:va(F.name||F.title)}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Credential ID: ",va(me)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Credential Link:"," ",Ne?n.jsx("a",{href:Ne,target:"_blank",rel:"noreferrer",children:"Open Link"}):"N/A"]})]},ee)})})}),n.jsx(Uc,{id:"experience",title:"Experience",children:ie.length===0?n.jsx(ng,{label:"No experience details available"}):n.jsx("div",{className:"candidate-detail__cards",children:ie.map((F,ee)=>{if(typeof F=="string")return n.jsx("div",{className:"candidate-detail__card",children:n.jsx("div",{className:"candidate-detail__card-text",children:F})},ee);const me=o0(Ds(F.skills_learned,F.skillsLearnt,F.skills,F.technologies,F.tech_stack,F.stack));return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsxs("div",{className:"candidate-detail__card-title",children:["Company Worked For:"," ",va(F.company||F.company_name||F.employer)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Role: ",va(F.role||F.designation||F.title)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Project Done:"," ",va(Ds(F.project_done,F.project,F.project_name,F.projects))]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Skills Learnt: ",va(me)]}),n.jsxs("div",{className:"candidate-detail__card-meta",children:["Years: ",va(Ds(F.years,F.duration_years,F.total_years,F.duration))]}),n.jsxs("div",{className:"candidate-detail__card-meta",children:["CTC: ",va(Ds(F.ctc,F.current_ctc,F.salary,F.compensation,F.package))]})]},F.id||ee)})})})]}),n.jsxs("aside",{className:"candidate-detail__aside",children:[!v&&n.jsxs("div",{className:"candidate-detail__aside-card",children:[n.jsx("div",{className:"candidate-detail__aside-title",children:"Quick Actions"}),g?g.map((F,ee)=>n.jsx("button",{type:"button",className:`candidate-card__btn ${F.variant==="primary"?"candidate-card__btn--primary":F.variant==="success"?"candidate-card__btn--success":F.variant==="warning"?"candidate-card__btn--warning":F.variant==="danger"?"candidate-card__btn--danger":"candidate-card__btn--ghost"}`,onClick:()=>F.onClick(e,t),disabled:F.disabled,children:F.label},ee)):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:()=>u&&u(e),children:"Call Feedback"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>P(!0),children:"View Callback History"}),!b&&n.jsxs("div",{className:"candidate-detail__status-controls",children:[n.jsx("select",{className:"candidate-detail__status-select",value:A,onChange:F=>{S(F.target.value),L({type:"",text:""})},children:Y.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:se,disabled:!h||E||!A||A===D,children:E?"Updating...":"Update Status"}),I.text&&n.jsx("div",{className:`candidate-detail__status-message ${I.type==="error"?"candidate-detail__status-message--error":"candidate-detail__status-message--success"}`,children:I.text})]}),!j&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--success",onClick:()=>x&&x(e,t),children:"Send to Account Manager"}),!N&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>i&&i(e,t),children:"Schedule Interview"}),o&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>o(e),children:"Add Note"}),c&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>c(t),children:"Send Email"}),f&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>f(e),children:"Message AM"}),m&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>m(e),children:"Message Candidate"}),!w&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d&&d(e,t),children:"Open Full Profile"})]})]}),n.jsxs("div",{className:"candidate-detail__aside-card",children:[n.jsx("div",{className:"candidate-detail__aside-title",children:"Activity Feed"}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Viewed ",y7e(e.updated_at||e.last_updated)]}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Status ",Vs(va(t.status,"Unknown"))]}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Applied ",va(t.appliedDate,"N/A")]})]})]})]})]}),T&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Call Feedback History"}),n.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-light",children:"x"})]}),n.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-80px)]",children:n.jsx(vU,{candidateId:R,onAddNew:()=>{P(!1),u&&u(e)},onFeedbackSelect:F=>{P(!1),u&&u(e,F)}})})]})})]})}const w7e=()=>({am:[{id:"shortlist_notification",name:"Candidate Shortlist Notification",subject:"Candidate Shortlisted - {candidateName}",body:`Hi,

I'd like to bring {candidateName} to your attention for the {position} role.

Key Highlights:
- {experience} years of experience
- Strong skills in: {skills}
- Current CTC: {currentCTC}
- Expected CTC: {expectedCTC}
- Notice Period: {noticePeriod}

Match Score: {matchScore}%

Please review the profile and let me know if you'd like to proceed.

Best regards`},{id:"interview_scheduled",name:"Interview Scheduled - AM Notification",subject:"Interview Scheduled - {candidateName}",body:`Hi,

Interview has been scheduled with {candidateName}.

Details:
- Date & Time: {interviewDate}
- Mode: {interviewMode}
- Interviewer: {interviewer}

Candidate Summary:
{summary}

Best regards`}],candidate:[{id:"initial_contact",name:"Initial Contact Email",subject:"Exciting Opportunity for {candidateName}",body:`Dear {candidateName},

I came across your profile and was impressed by your experience in {skills}. We have an exciting opportunity for a {position} role at {companyName} that aligns well with your background.

Key Details:
- Position: {position}
- Location: {location}
- Experience Required: {experienceRange} years

Would you be interested in learning more? Please let me know your availability for a quick call.

Best regards`},{id:"interview_invitation",name:"Interview Invitation",subject:"Interview Invitation - {position}",body:`Dear {candidateName},

We're pleased to invite you for an interview.

Date: {interviewDate}
Time: {interviewTime}
Mode: {interviewMode}
Duration: {duration} minutes
Interviewer: {interviewer}

Meeting Link: {meetingLink}

Please confirm your availability. If the timing doesn't work, feel free to suggest alternative slots.

Best regards`},{id:"follow_up",name:"Follow-up Email",subject:"Following Up - {position} Opportunity",body:`Dear {candidateName},

I wanted to follow up on my previous email regarding the {position} opportunity.

Would you have a few minutes this week for a quick chat?

Best regards`}]}),$i=(e,t="")=>e||t,N7e=(e={})=>Array.isArray(e.skills)?e.skills.slice(0,3).join(", "):e.skills||"",hI=(e,t={})=>e.replace(/{candidateName}/g,$i(t.name||t.full_name)).replace(/{position}/g,$i(t.job_title||t.applied_for,"[Position]")).replace(/{companyName}/g,$i(t.company||t.current_company,"[Company]")).replace(/{experience}/g,$i(t.experience_years||t.experience,"N/A")).replace(/{experienceRange}/g,"3-7").replace(/{skills}/g,$i(N7e(t),"")).replace(/{currentCTC}/g,$i(t.current_ctc||t.current_salary,"N/A")).replace(/{expectedCTC}/g,$i(t.expected_ctc||t.expected_salary,"N/A")).replace(/{noticePeriod}/g,$i(t.notice_period,"N/A")).replace(/{matchScore}/g,$i(t.match_score||t.semantic_score,"N/A")).replace(/{location}/g,$i(t.current_location||t.location,"")).replace(/{summary}/g,$i(t.summary||t.career_summary,"")).replace(/{interviewDate}/g,"[Date]").replace(/{interviewTime}/g,"[Time]").replace(/{interviewMode}/g,"[Mode]").replace(/{interviewer}/g,"[Interviewer]").replace(/{duration}/g,"30").replace(/{meetingLink}/g,"[Meeting Link]");function k7e({candidate:e,recipient:t,onClose:r,onSend:s}){var g,x;const i=y.useMemo(()=>w7e(),[])[t]||[],l=(e==null?void 0:e.account_manager_email)||((g=e==null?void 0:e.account_manager)==null?void 0:g.email)||((x=e==null?void 0:e.account_manager)==null?void 0:x.am_email)||"",o=t==="am"?l:(e==null?void 0:e.email)||"",c=h=>h==="email"||h==="both",[d,u]=y.useState({to:o,cc:"",subject:"",body:"",attachments:[],template:"",deliveryMode:t==="am"?"both":"email"});y.useEffect(()=>{u(h=>({...h,to:t==="am"?l:(e==null?void 0:e.email)||"",deliveryMode:t==="am"?"both":"email"}))},[e,t,l]);const f=h=>{const p=i.find(v=>v.id===h);p&&u(v=>({...v,subject:hI(p.subject,e),body:hI(p.body,e),template:h}))},m=async()=>{if(!s){r();return}await s({...d,recipient:t}),r()};return n.jsx("div",{className:"custom-message-modal-overlay",onClick:r,children:n.jsxs("div",{className:"custom-message-modal",onClick:h=>h.stopPropagation(),children:[n.jsxs("div",{className:"message-header",children:[n.jsx("h2",{children:t==="am"?"Send to Account Manager":"Send to Candidate"}),n.jsx("button",{className:"close-btn",onClick:r,children:"?"})]}),n.jsxs("div",{className:"message-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Send Via"}),n.jsxs("select",{value:d.deliveryMode,onChange:h=>u(p=>({...p,deliveryMode:h.target.value})),className:"template-select",children:[n.jsx("option",{value:"email",children:"Email"}),n.jsx("option",{value:"portal_note",children:"Portal Note"}),n.jsx("option",{value:"both",children:"Email + Portal Note"})]})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Email Template"}),n.jsxs("select",{value:d.template,onChange:h=>f(h.target.value),className:"template-select",children:[n.jsx("option",{value:"",children:"Select a template..."}),i.map(h=>n.jsx("option",{value:h.id,children:h.name},h.id))]})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"email",value:d.to,onChange:h=>u(p=>({...p,to:h.target.value})),placeholder:t==="am"?"account.manager@company.com":e==null?void 0:e.email,required:!0})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"CC (optional)"}),n.jsx("input",{type:"email",value:d.cc,onChange:h=>u(p=>({...p,cc:h.target.value})),placeholder:"cc@company.com"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Subject"}),n.jsx("input",{type:"text",value:d.subject,onChange:h=>u(p=>({...p,subject:h.target.value})),placeholder:"Email subject",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Message"}),n.jsx("textarea",{value:d.body,onChange:h=>u(p=>({...p,body:h.target.value})),placeholder:"Type your message here...",rows:"10",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Attachments"}),n.jsxs("div",{className:"attachment-section",children:[n.jsx("button",{type:"button",className:"btn-attach",onClick:()=>document.getElementById("file-input").click(),children:"Attach Files"}),n.jsx("input",{id:"file-input",type:"file",multiple:!0,style:{display:"none"},onChange:h=>{const p=Array.from(h.target.files||[]);u(v=>({...v,attachments:[...v.attachments,...p]}))}}),d.attachments.length>0&&n.jsx("div",{className:"attachments-list",children:d.attachments.map((h,p)=>n.jsxs("div",{className:"attachment-item",children:[n.jsx("span",{children:h.name}),n.jsx("button",{type:"button",onClick:()=>u(v=>({...v,attachments:v.attachments.filter((b,j)=>j!==p)})),children:"?"})]},p))})]})]}),n.jsxs("div",{className:"quick-insert",children:[n.jsx("button",{type:"button",className:"btn-insert",onClick:()=>u(h=>({...h,body:`${h.body}

Candidate Profile: ${window.location.origin}/candidates/${(e==null?void 0:e.id)||""}`})),children:"Insert Profile Link"}),n.jsx("button",{type:"button",className:"btn-insert",onClick:()=>u(h=>({...h,body:`${h.body}

Resume: ${(e==null?void 0:e.resume_url)||""}`})),children:"Insert Resume Link"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"btn-cancel",onClick:r,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn-send",onClick:m,children:"Send Message"})]})]})]})})}const td={allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],allowedExts:[".pdf",".doc",".docx",".txt"],maxSize:5*1024*1024,errorMessages:{invalidType:"Please upload PDF, DOC, DOCX, or TXT files only",tooLarge:"File size must be less than 5MB",uploadFailed:"Upload failed. Please try again"}},Qv={allowedExts:[".xlsx",".csv"],maxSize:10*1024*1024,maxRows:5e3},F_=50,S7e=1200,C7e=10*60*1e3,A7e={uploading:{message:"Uploading file...",progress:25},parsing:{message:"Parsing resume...",progress:50},validating:{message:"Validating data...",progress:75},complete:{message:"Resume parsed successfully!",progress:100},importing:{message:"Importing candidate...",progress:90}},UW="Excel Upload",X0=2,E7e=[{value:"",label:"-- Ignore --"},{value:"name",label:"Name"},{value:"email",label:"Email"},{value:"phone",label:"Phone Number"},{value:"noticePeriod",label:"Notice Period"},{value:"gender",label:"Gender"},{value:"dateOfBirth",label:"DOB (YYYY-MM-DD)"},{value:"currentAddress",label:"Current Address"},{value:"permanentAddress",label:"Permanent Address"},{value:"city",label:"City"},{value:"pincode",label:"Pincode"},{value:"readyToRelocate",label:"Ready To Relocate"},{value:"preferredLocation",label:"Preferred Location"},{value:"designation",label:"Designation"},{value:"currentCtc",label:"Current CTC"},{value:"expectedCtc",label:"Expected CTC"},{value:"highestDegree",label:"Highest Degree"},{value:"collegeName",label:"College Name"},{value:"cgpaPercentage",label:"CGPA / %"},{value:"skills",label:"Skills (comma separated)"},{value:"certificationName",label:"Certification Name"},{value:"certificationCredentialId",label:"Certification Credential ID"},{value:"certificationCredentialLink",label:"Certification Credential Link"},{value:"experienceCompany",label:"Experience Company"},{value:"experienceRole",label:"Experience Role"},{value:"experienceProject",label:"Experience Project"},{value:"experienceSkillsLearnt",label:"Experience Skills Learnt"},{value:"experienceYears",label:"Experience Years"},{value:"experienceCtc",label:"Experience CTC"},{value:"additionalEducation1HighestDegree",label:"Education 2 Highest Degree"},{value:"additionalEducation1CollegeName",label:"Education 2 College Name"},{value:"additionalEducation1CgpaPercentage",label:"Education 2 CGPA / %"},{value:"additionalEducation2HighestDegree",label:"Education 3 Highest Degree"},{value:"additionalEducation2CollegeName",label:"Education 3 College Name"},{value:"additionalEducation2CgpaPercentage",label:"Education 3 CGPA / %"},{value:"additionalCertification1Name",label:"Certification 2 Name"},{value:"additionalCertification1CredentialId",label:"Certification 2 Credential ID"},{value:"additionalCertification1CredentialLink",label:"Certification 2 Credential Link"},{value:"additionalCertification2Name",label:"Certification 3 Name"},{value:"additionalCertification2CredentialId",label:"Certification 3 Credential ID"},{value:"additionalCertification2CredentialLink",label:"Certification 3 Credential Link"},{value:"additionalExperience1Company",label:"Experience 2 Company"},{value:"additionalExperience1Role",label:"Experience 2 Role"},{value:"additionalExperience1Project",label:"Experience 2 Project"},{value:"additionalExperience1SkillsLearnt",label:"Experience 2 Skills Learnt"},{value:"additionalExperience1Years",label:"Experience 2 Years"},{value:"additionalExperience1Ctc",label:"Experience 2 CTC"},{value:"additionalExperience2Company",label:"Experience 3 Company"},{value:"additionalExperience2Role",label:"Experience 3 Role"},{value:"additionalExperience2Project",label:"Experience 3 Project"},{value:"additionalExperience2SkillsLearnt",label:"Experience 3 Skills Learnt"},{value:"additionalExperience2Years",label:"Experience 3 Years"},{value:"additionalExperience2Ctc",label:"Experience 3 CTC"},{value:"source",label:"Source"},{value:"appliedFor",label:"Applied For"}],T7e=["Name*","Email*","Phone Number*","Notice Period","Gender","DOB","Current Address","Permanent Address","City","Pincode","Ready To Relocate","Preferred Location","Designation*","Current CTC","Expected CTC","Highest Degree","College Name","CGPA / %","Skills*","Certification Name","Certification Credential ID","Certification Credential Link","Experience Company","Experience Role","Experience Project","Experience Skills Learnt","Experience Years*","Experience CTC","Education 2 Highest Degree","Education 2 College Name","Education 2 CGPA / %","Education 3 Highest Degree","Education 3 College Name","Education 3 CGPA / %","Certification 2 Name","Certification 2 Credential ID","Certification 2 Credential Link","Certification 3 Name","Certification 3 Credential ID","Certification 3 Credential Link","Experience 2 Company","Experience 2 Role","Experience 2 Project","Experience 2 Skills Learnt","Experience 2 Years","Experience 2 CTC","Experience 3 Company","Experience 3 Role","Experience 3 Project","Experience 3 Skills Learnt","Experience 3 Years","Experience 3 CTC","Source","Applied For"],pI=["Full Name*","Email*","Phone*","Alternate Phone","Date of Birth","Gender","Marital Status","Current Company","Current Job Title","Total Experience (Years)","Relevant Experience (Years)","Current CTC","Expected CTC","Notice Period (Days)","Current Location","Preferred Location","Skills","Primary Skill","Secondary Skill","Qualification","University/College","Year of Graduation","Certifications","Resume URL","LinkedIn URL","GitHub URL","Portfolio URL","Address","City","State","Country","Pincode","Willing to Relocate (Yes/No)","Preferred Employment Type","Availability to Join (Date)","Last Working Day","Recruiter Notes","Source"],P7e=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g," ").replace(/\s+/g," ").trim(),zW=e=>String(e||"").toLowerCase().split(/\s+/).map(t=>t?t[0].toUpperCase()+t.slice(1):"").join(" ").trim(),WW=e=>{if(!e)return"";const t=String(e).replace(/\D/g,"");return t?t.length===10?`+91${t}`:t.length===12&&t.startsWith("91")?`+${t}`:t.startsWith("+")?t:t.length>10?`+${t}`:t:""},Gg=e=>{if(!e)return"";const t=Array.isArray(e)?e:String(e).split(/,|;|\n/).map(s=>s.trim()).filter(Boolean);return Array.from(new Set(t.map(s=>s.toLowerCase()))).map(s=>s.trim()).filter(Boolean).join(", ")},VW=e=>{if(e==null||e==="")return"";const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?"":Math.round(t*10)/10},HW=(e="")=>e.slice(e.lastIndexOf(".")).toLowerCase(),O7e=e=>{if(!e)return{valid:!1,message:"No file selected"};const t=HW(e.name);return!td.allowedTypes.includes(e.type)&&!td.allowedExts.includes(t)?{valid:!1,message:td.errorMessages.invalidType}:e.size>td.maxSize?{valid:!1,message:td.errorMessages.tooLarge}:{valid:!0}},R7e=(e=[])=>{const t=new Set;return e.filter(r=>{if(!r)return!1;const s=`${r.name||"file"}:${r.size||0}:${r.lastModified||0}`;return t.has(s)?!1:(t.add(s),!0)})},L7e=(e=[])=>{const t=[],r=[];return e.forEach(s=>{const a=O7e(s);if(a.valid){t.push(s);return}r.push(`${s.name||"file"}: ${a.message}`)}),{validFiles:t,invalidEntries:r}},I7e=e=>{if(!e)return{valid:!1,message:"No file selected"};const t=HW(e.name);return Qv.allowedExts.includes(t)?e.size>Qv.maxSize?{valid:!1,message:"File size must be less than 10MB"}:{valid:!0}:{valid:!1,message:"Please upload XLSX or CSV files only"}},F7e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,xI=/^\d+(\.\d+)?$/,D7e=e=>{if(!e)return!0;try{return new URL(String(e).trim()),!0}catch{return!1}},qW=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),$7e=e=>{const t=String(e||"").trim().toLowerCase();return t?["true","yes","y","1"].includes(t):!1},gI=(e,t)=>{const r=[],s=String(e.name||e.fullName||"").trim(),a=String(e.designation||e.currentPosition||"").trim(),i=String(e.email||"").trim(),l=String(e.phone||"").trim(),o=qW(e.skills),c=String(e.experienceYears||e.totalExperience||"").trim();s||r.push(`Row ${t}: Missing name`),i?F7e.test(i)?i.toLowerCase().endsWith("@gmail.com")||r.push(`Row ${t}: Only Gmail addresses are allowed`):r.push(`Row ${t}: Invalid email format`):r.push(`Row ${t}: Missing email`),l?/^\+?\d{10,15}$/.test(l.replace(/\s/g,""))||r.push(`Row ${t}: Invalid phone format`):r.push(`Row ${t}: Missing phone`),a||r.push(`Row ${t}: Missing designation`),o.length===0&&r.push(`Row ${t}: Missing skills (comma separated)`),c?xI.test(c)||r.push(`Row ${t}: Experience years must be numeric`):r.push(`Row ${t}: Missing experience years`);const d=String(e.pincode||"").trim();if(d&&!/^\d{6}$/.test(d)&&r.push(`Row ${t}: Pincode must be 6 digits`),[e.certificationCredentialLink,e.additionalCertification1CredentialLink,e.additionalCertification2CredentialLink].map(m=>String(m||"").trim()).filter(Boolean).forEach(m=>{D7e(m)||r.push(`Row ${t}: Invalid certification URL`)}),[e.additionalExperience1Years,e.additionalExperience2Years].map(m=>String(m||"").trim()).filter(Boolean).forEach(m=>{xI.test(m)||r.push(`Row ${t}: Additional experience years must be numeric`)}),e.dateOfBirth){const m=new Date(String(e.dateOfBirth));Number.isNaN(m.getTime())&&r.push(`Row ${t}: DOB must be a valid date`)}return r},M7e=(e=[])=>{const t=[],r=new Set;return e.forEach((s,a)=>{const i=String(s.email||"").trim().toLowerCase(),l=String(s.phone||"").replace(/\D/g,"");if(!i&&!l)return;const o=`${i}|${l}`;r.has(o)&&t.push({row:a+2,reason:"Duplicate in file",key:o}),r.add(o)}),t},B7e=e=>{const t=P7e(e);if(!t)return"";const r=t.match(/^education\s*(\d+)\s*(highest degree|degree|college name|college|cgpa|percentage)$/);if(r){const i=Number(r[1]);if(i>=2&&i<=X0+1){const l=i-1,o=r[2];return o.includes("degree")?`additionalEducation${l}HighestDegree`:o.includes("college")?`additionalEducation${l}CollegeName`:`additionalEducation${l}CgpaPercentage`}}const s=t.match(/^certification\s*(\d+)\s*(name|credential id|id|credential link|link|url)$/);if(s){const i=Number(s[1]);if(i>=2&&i<=X0+1){const l=i-1,o=s[2];return o==="name"?`additionalCertification${l}Name`:o.includes("id")?`additionalCertification${l}CredentialId`:`additionalCertification${l}CredentialLink`}}const a=t.match(/^experience\s*(\d+)\s*(company|role|project|skills learnt|skills learned|skills|years|ctc)$/);if(a){const i=Number(a[1]);if(i>=2&&i<=X0+1){const l=i-1,o=a[2];return o==="company"?`additionalExperience${l}Company`:o==="role"?`additionalExperience${l}Role`:o==="project"?`additionalExperience${l}Project`:o.includes("skills")?`additionalExperience${l}SkillsLearnt`:o==="years"?`additionalExperience${l}Years`:`additionalExperience${l}Ctc`}}return t.includes("full")&&t.includes("name")||t==="name"?"name":t.includes("email")?"email":t.includes("phone")||t.includes("mobile")?"phone":t==="notice period"||t.includes("notice")?"noticePeriod":t==="gender"?"gender":t.includes("dob")||t.includes("date of birth")?"dateOfBirth":t.includes("current address")?"currentAddress":t.includes("permanent address")?"permanentAddress":t==="city"?"city":t.includes("pincode")||t.includes("pin code")?"pincode":t.includes("ready to relocate")||t.includes("willing to relocate")?"readyToRelocate":t.includes("preferred location")?"preferredLocation":t.includes("designation")||t.includes("current position")||t.includes("job title")?"designation":t.includes("current ctc")?"currentCtc":t.includes("expected ctc")?"expectedCtc":t.includes("highest degree")?"highestDegree":t.includes("college")?"collegeName":t.includes("cgpa")||t.includes("percentage")?"cgpaPercentage":t.includes("skill")?"skills":t==="certification name"?"certificationName":t.includes("certification credential id")?"certificationCredentialId":t.includes("certification credential link")||t.includes("certification credential url")?"certificationCredentialLink":t==="experience company"?"experienceCompany":t==="experience role"?"experienceRole":t==="experience project"?"experienceProject":t==="experience skills learnt"||t==="experience skills learned"?"experienceSkillsLearnt":t==="experience years"||t==="years"||t==="total experience years"||t==="total experience"?"experienceYears":t==="experience ctc"?"experienceCtc":t==="source"?"source":t==="applied for"||t==="applied role"?"appliedFor":""},yI=(e,t)=>{const r={};return Object.entries(t).forEach(([s,a])=>{a&&(r[a]=e[s])}),r},jr=e=>String(e||"").trim(),U7e=e=>{const t=jr(e);if(!t)return"";const r=t.match(/\d+/);return r?r[0]:""},vI=async()=>{const e=await W1(()=>Promise.resolve().then(()=>U4),void 0),t=["Rehan N","rehann786@gmail.com","+918147852318","30","Male","1998-08-10","MG Road, Bengaluru","Ballari, Karnataka","Bengaluru","560001","Yes","Bengaluru, Hyderabad","SAP ABAP Consultant","12.5","16","M.Tech in VLSI Design and Embedded Systems","BITM, Ballari","8.2","ABAP, ALV, Adobe Forms, BAPI, BDC","AWS Developer Associate","AWS-12345","https://example.com/cert/aws","ABC Tech","Senior Consultant","Master Data Migration","ABAP, BAPI, IDOC","7","12.5","B.Tech","VTU","78%","","","","SAP Certified ABAP","SAP-4455","https://example.com/cert/sap-abap","","","","XYZ Systems","ABAP Developer","Custom transaction build","SmartForms, WebDynpro","3","6.5","","","","","","",UW,"System Engineer"],r=e.utils.aoa_to_sheet([T7e,t]),s=e.utils.book_new();e.utils.book_append_sheet(s,r,"Candidates");const a=e.write(s,{bookType:"xlsx",type:"array"});return new File([a],"Candidate_Profile_Bulk_Template.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})},z7e=(e={})=>[{name:jr(e.certificationName),id:jr(e.certificationCredentialId),link:jr(e.certificationCredentialLink)},...Array.from({length:X0},(r,s)=>{const a=s+1;return{name:jr(e[`additionalCertification${a}Name`]),id:jr(e[`additionalCertification${a}CredentialId`]),link:jr(e[`additionalCertification${a}CredentialLink`])}})].filter(r=>r.name||r.id||r.link).map(r=>[r.name,r.id?`ID:${r.id}`:"",r.link].filter(Boolean).join(" | ").trim()).filter(Boolean).join("; "),W7e=(e={})=>{const t=[],r=jr(e.appliedFor),s=jr(e.permanentAddress);return r&&t.push(`Applied For: ${r}`),s&&t.push(`Permanent Address: ${s}`),Array.from({length:X0},(a,i)=>i+1).forEach(a=>{const i=[jr(e[`additionalEducation${a}HighestDegree`]),jr(e[`additionalEducation${a}CollegeName`]),jr(e[`additionalEducation${a}CgpaPercentage`])].filter(Boolean).join(" | ");i&&t.push(`Education ${a+1}: ${i}`);const l=[jr(e[`additionalExperience${a}Company`]),jr(e[`additionalExperience${a}Role`]),jr(e[`additionalExperience${a}Project`]),jr(e[`additionalExperience${a}SkillsLearnt`]),jr(e[`additionalExperience${a}Years`]),jr(e[`additionalExperience${a}Ctc`])].filter(Boolean).join(" | ");l&&t.push(`Experience ${a+1}: ${l}`)}),t.join(" || ")},V7e=(e={})=>{const t=Gg(e.skills),r=qW(e.skills)[0]||"",s=jr(e.experienceCompany),a=jr(e.city||e.preferredLocation),i=$7e(e.readyToRelocate)?"Yes":"No";return{"Full Name*":zW(e.name||e.fullName||""),"Email*":jr(e.email).toLowerCase(),"Phone*":WW(e.phone),"Alternate Phone":"","Date of Birth":jr(e.dateOfBirth),Gender:jr(e.gender),"Marital Status":"","Current Company":s,"Current Job Title":jr(e.designation||e.currentPosition),"Total Experience (Years)":VW(e.experienceYears||e.totalExperience),"Relevant Experience (Years)":"","Current CTC":jr(e.currentCtc),"Expected CTC":jr(e.expectedCtc),"Notice Period (Days)":U7e(e.noticePeriod),"Current Location":a,"Preferred Location":jr(e.preferredLocation),Skills:t,"Primary Skill":r,"Secondary Skill":"",Qualification:jr(e.highestDegree),"University/College":jr(e.collegeName),"Year of Graduation":"",Certifications:z7e(e),"Resume URL":"","LinkedIn URL":"","GitHub URL":"","Portfolio URL":"",Address:jr(e.currentAddress),City:jr(e.city),State:"",Country:"",Pincode:jr(e.pincode),"Willing to Relocate (Yes/No)":i,"Preferred Employment Type":"","Availability to Join (Date)":"","Last Working Day":"","Recruiter Notes":W7e(e),Source:jr(e.source)||UW}},H7e=async(e=[])=>{const t=await W1(()=>Promise.resolve().then(()=>U4),void 0),r=e.map(l=>{const o=V7e(l);return pI.map(c=>o[c]??"")}),s=t.utils.aoa_to_sheet([pI,...r]),a=t.utils.book_new();t.utils.book_append_sheet(a,s,"Candidates");const i=t.write(a,{bookType:"xlsx",type:"array"});return new File([i],`candidate_bulk_upload_${Date.now()}.xlsx`,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})},bI=(e=[],t=[])=>Array.isArray(e)?e.map((r,s)=>{const a=Number(r==null?void 0:r.row)||s+2,i=t[a-2]||{};return{row:a,field:(r==null?void 0:r.field)||"Upload",message:(r==null?void 0:r.message)||"Upload failed",fullName:i.name||i.fullName||"",email:i.email||"",phone:i.phone||""}}):[],sg=(e,t="Upload failed.")=>{var a,i,l,o;const r=(i=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:i.detail,s=(o=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:o.message;if(typeof r=="string"&&r.trim())return r;if(typeof s=="string"&&s.trim())return s;if(r&&typeof r=="object"){if(typeof r.message=="string"&&r.message.trim())return r.message;const c=Array.isArray(r.missing)?`Missing: ${r.missing.join(", ")}`:"",d=Array.isArray(r.extra)?`Extra: ${r.extra.join(", ")}`:"",u=[c,d].filter(Boolean);if(u.length)return u.join(" | ")}return typeof(e==null?void 0:e.message)=="string"&&e.message.trim()?e.message:t},q7e=(e=[],t=[])=>{const r=new Map;return t.forEach(s=>{const a=Number(s.row);if(!a)return;const i=`${s.field||""} ${s.message||""}`.toLowerCase();if(i.includes("duplicate")||i.includes("already exists")){r.set(a,"Duplicate");return}r.has(a)||r.set(a,"Failed")}),e.map((s,a)=>({type:"excel",name:s.name||s.fullName||"Unknown",email:s.email||"",status:r.get(a+2)||"Imported"}))},D_=(e=0,t=[])=>{const r=new Set,s=new Set;t.forEach(i=>{const l=Number(i==null?void 0:i.row);if(!l)return;const o=`${(i==null?void 0:i.field)||""} ${(i==null?void 0:i.message)||""}`.toLowerCase();if(o.includes("duplicate")||o.includes("already exists")){r.add(l);return}s.add(l)});const a=Math.max(0,Number(e||0)-r.size-s.size);return{total:Number(e||0),successful:a,duplicates:r.size,failed:s.size}},G7e=(e=[])=>{if(!e.length)return"";const t=["Row Number","Error Type","Details","Full Name","Email","Phone"],r=e.map(s=>[s.row,s.field||"Validation",s.message,s.fullName||"",s.email||"",s.phone||""]);return[t,...r].map(s=>s.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")).join(`
`)};function J7e({form:e=null,setForm:t=null,onImportComplete:r=null,onLog:s=null}){var A,S;const a=!e||typeof t!="function",i=y.useRef(null),l=y.useRef(null),[o,c]=y.useState({dragging:!1,stage:null,progress:0,message:"",error:"",warning:"",file:null,selectedFiles:[],parsedData:null,conflicts:[],showMergeModal:!1,mergeOption:"merge",summary:null,results:[]}),[d,u]=y.useState({dragging:!1,file:null,error:"",headers:[],rows:[],mapping:{},previewRows:[],validationErrors:[],duplicates:[],showMappingModal:!1,summary:null,uploadErrors:[],uploading:!1,progress:0}),[f,m]=y.useState("resume"),g=y.useRef({}),x=[{id:"resume",label:"Upload Resume",meta:"PDF, DOC, DOCX, TXT  Max 5MB",icon:GT},{id:"excel",label:"Upload Excel/CSV",meta:"XLSX, CSV  Max 10MB / 5000 rows",icon:qT}],h=y.useMemo(()=>o.parsedData?o.conflicts.map(E=>({label:E.label,existing:E.existing,parsed:E.parsed,action:E.action})):[],[o.parsedData,o.conflicts]),p=(E,O={})=>{const I=A7e[E];if(!I)return;const L=Number(O.totalFiles)>0?Number(O.totalFiles):1;let Z=I.message;a&&L>1&&(E==="uploading"?Z=`Uploading ${L} resumes...`:E==="parsing"?Z=`Parsing ${L} resumes...`:E==="importing"?Z=`Importing ${L} candidates...`:E==="complete"&&(Z=`${L} resumes parsed successfully!`)),c(H=>({...H,stage:E,progress:I.progress,message:Z}))},v=E=>{var O;m(E),(O=g.current[E])==null||O.focus()},b=(E,O)=>{const I=x.map(Z=>Z.id),L=I.indexOf(O);if(L!==-1){if(E.key==="ArrowRight"||E.key==="ArrowDown"){E.preventDefault();const Z=(L+1)%I.length;v(I[Z]);return}if(E.key==="ArrowLeft"||E.key==="ArrowUp"){E.preventDefault();const Z=(L-1+I.length)%I.length;v(I[Z]);return}if(E.key==="Home"){E.preventDefault(),v(I[0]);return}E.key==="End"&&(E.preventDefault(),v(I[I.length-1]))}},j=(E={})=>({fullName:zW(E.full_name||E.fullName||""),email:String(E.email||"").trim().toLowerCase(),phone:WW(E.phone||""),skills:Gg(E.skills||""),experience:VW(E.experience_years||E.experience||""),education:E.education||"",certifications:E.certifications||[],currentLocation:E.current_location||E.location||"",linkedinUrl:E.linkedin_url||E.linkedin||"",githubUrl:E.github_url||E.github||"",portfolioUrl:E.portfolio_url||E.portfolio||"",resumeUrl:E.resume_url||""}),N=E=>{if(a)return[];const O=[];return[{key:"fullName",label:"Name",existing:e.fullName,parsed:E.fullName},{key:"email",label:"Email",existing:e.email,parsed:E.email},{key:"phone",label:"Phone",existing:e.phone,parsed:E.phone},{key:"skills",label:"Skills",existing:e.skills,parsed:E.skills},{key:"experience",label:"Experience",existing:e.experience,parsed:E.experience},{key:"education",label:"Education",existing:e.education,parsed:E.education},{key:"currentLocation",label:"Location",existing:e.currentLocation,parsed:E.currentLocation},{key:"linkedinUrl",label:"LinkedIn",existing:e.linkedinUrl,parsed:E.linkedinUrl},{key:"githubUrl",label:"GitHub",existing:e.githubUrl,parsed:E.githubUrl},{key:"portfolioUrl",label:"Portfolio",existing:e.portfolioUrl,parsed:E.portfolioUrl}].forEach(L=>{L.parsed&&L.existing&&String(L.existing).trim()!==String(L.parsed).trim()&&O.push({...L,action:"Keep existing"})}),O},w=(E,O)=>{a||!t||t(I=>{const L={...I},Z=(H,R)=>{if(R){if(O==="overwrite"){L[H]=R;return}L[H]||(L[H]=R)}};if(Z("fullName",E.fullName),Z("email",E.email),Z("phone",E.phone),E.skills){const H=Gg(I.skills),R=Gg(`${H}, ${E.skills}`);L.skills=O==="overwrite"?E.skills:R}if(E.experience!==""&&(L.experience=O==="overwrite"?E.experience:I.experience||E.experience),Z("education",E.education),Z("currentLocation",E.currentLocation),Z("linkedinUrl",E.linkedinUrl),Z("githubUrl",E.githubUrl),Z("portfolioUrl",E.portfolioUrl),E.certifications&&E.certifications.length){const H=Array.isArray(I.certifications)?I.certifications:[],R=E.certifications.map(D=>({name:String(D).trim(),organization:"",issueDate:"",expiryDate:"",credentialId:"",credentialUrl:""}));L.certifications=O==="overwrite"||H.every(D=>!D.name)?R:[...H,...R]}return E.resumeUrl&&(L.resumeUrl=E.resumeUrl),L})},_=async(E=[])=>{var X,ne,J;const O=R7e(Array.isArray(E)?E:Array.from(E||[])),I=a?O:O.slice(0,1);if(!I.length){c(ue=>({...ue,error:"No file selected",warning:"",file:null,selectedFiles:[]}));return}const{validFiles:L,invalidEntries:Z}=L7e(I),H=a&&L.length>F_,R=H?L.slice(0,F_):L,D=[];if(Z.length>0){const ue=Z.slice(0,2).join(" | "),ke=Z.length-2;D.push(ke>0?`Skipped ${Z.length} invalid files (${ue} +${ke} more).`:`Skipped ${Z.length} invalid files (${ue}).`)}if(H&&D.push(`Only first ${F_} valid resumes were processed in this batch.`),!R.length){c(ue=>({...ue,error:td.errorMessages.invalidType,warning:"",file:null,selectedFiles:[],stage:null,progress:0,message:""}));return}const Y=R.length,M=R[0];c(ue=>({...ue,error:"",warning:D.join(" "),file:M,selectedFiles:R,parsedData:null,conflicts:[],showMergeModal:!1,summary:null,results:[]})),p("uploading",{totalFiles:Y});try{if(p("parsing",{totalFiles:Y}),a){const ue=new FormData;R.forEach(se=>{ue.append("files",se)}),ue.append("duplicate_option","overwrite"),p("importing",{totalFiles:Y});const ke=await G.post("/v1/candidates/bulk-resume-upload-async",ue,{headers:{"Content-Type":"multipart/form-data"}}),ve=(X=ke==null?void 0:ke.data)==null?void 0:X.task_id;if(!ve)throw new Error("Async upload did not return task_id");const je=Date.now();let ie=null;for(;Date.now()-je<C7e;){const se=await G.get(`/v1/candidates/bulk-upload-status/${ve}`),z=(se==null?void 0:se.data)||{},Te=String(z.status||"").toLowerCase(),fe=Number(z.progress||0);if(Te==="completed"){ie=z.result||{};break}if(Te==="failed")throw new Error(z.error||"Bulk resume upload failed");c(Ie=>({...Ie,stage:"importing",progress:Math.min(99,Math.max(Ie.progress||0,fe||1)),message:Te==="pending"?`Queued ${Y} resumes for processing...`:`Importing ${Y} candidates... (${Math.max(1,fe)}%)`})),await new Promise(Ie=>setTimeout(Ie,S7e))}if(!ie)throw new Error("Bulk upload status polling timed out");p("complete",{totalFiles:Y}),c(se=>({...se,summary:{success:ie.success??0,failed:ie.failed??0,duplicates:ie.duplicates??0,updated:ie.updated??0,total_processed:ie.total_processed??Y},results:Array.isArray(ie.results)?ie.results:[],parsedData:null,conflicts:[]})),typeof r=="function"&&r(),typeof s=="function"&&s((Array.isArray(ie.results)?ie.results:[]).map(se=>({type:"resume",name:se.name||"Unknown",email:se.email||"",status:se.status||"Processed",resume:se.resume||M.name})))}else{const ue=new FormData;ue.append("file",M);const ke=await G.post("/v1/candidate/resume/parse",ue,{headers:{"Content-Type":"multipart/form-data"}});p("validating",{totalFiles:1});const ve=j({...((ne=ke.data)==null?void 0:ne.parsed)||{},resume_url:(J=ke.data)==null?void 0:J.resume_url}),je=N(ve);je.length>0?c(ie=>({...ie,parsedData:ve,conflicts:je,showMergeModal:!0,mergeOption:"merge"})):(w(ve,"overwrite"),p("complete"),c(ie=>({...ie,parsedData:ve})))}}catch(ue){c(ke=>{var ve,je;return{...ke,error:((je=(ve=ue==null?void 0:ue.response)==null?void 0:ve.data)==null?void 0:je.detail)||(ue==null?void 0:ue.message)||td.errorMessages.uploadFailed,stage:null,progress:0,message:""}})}finally{i.current&&(i.current.value="")}},k=E=>{E.preventDefault();const O=Array.from(E.dataTransfer.files||[]);c(I=>({...I,dragging:!1})),O.length>0&&_(O)},C=async E=>{const O=I7e(E);if(!O.valid){u(I=>({...I,error:O.message,file:null}));return}u(I=>({...I,error:"",file:E,summary:null,uploadErrors:[]}));try{const I=await W1(()=>Promise.resolve().then(()=>U4),void 0),L=await E.arrayBuffer(),Z=I.read(L,{type:"array"}),H=Z.Sheets[Z.SheetNames[0]],R=I.utils.sheet_to_json(H,{header:1,defval:""}),[D=[],...Y]=R;if(!D.length){u(ne=>({...ne,error:"No headers found in the file."}));return}if(Y.length>Qv.maxRows){u(ne=>({...ne,error:`Row limit exceeded (max ${Qv.maxRows})`}));return}const M=Y.map(ne=>{const J={};return D.forEach((ue,ke)=>{J[ue]=ne[ke]??""}),J}),X={};D.forEach(ne=>{X[ne]=B7e(ne)}),u(ne=>({...ne,headers:D,rows:M,mapping:X,previewRows:M.slice(0,3),showMappingModal:!0}))}catch(I){u(L=>({...L,error:sg(I,"Failed to read the file. Please upload a valid Excel/CSV file.")}))}},T=async()=>{var R,D,Y;const E=d.mapping,O=d.rows.map(M=>yI(M,E));if(O.length===0){u(M=>({...M,error:"No data rows found to import."}));return}const I=[];O.forEach((M,X)=>{const ne=gI(M,X+2);ne.length&&ne.forEach(J=>{I.push({row:X+2,field:"Validation",message:J,fullName:M.name||M.fullName,email:M.email,phone:M.phone})})});const L=M7e(O),Z=L.map(M=>{const X=O[M.row-2]||{};return{row:M.row,field:"Duplicate",message:M.reason||"Duplicate in file",fullName:X.name||X.fullName||"",email:X.email||"",phone:X.phone||""}}),H=[...I,...Z];u(M=>({...M,validationErrors:I,duplicates:L,summary:D_(O.length,H),uploading:!0,progress:20,error:""}));try{const M=await H7e(O),X=new FormData;X.append("file",M);const ne=await G.post("/v1/candidates/bulk-upload",X,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:je=>{if(!je.total)return;const ie=Math.round(je.loaded/je.total*100);u(se=>({...se,progress:Math.max(se.progress,Math.min(95,ie))}))}}),J=bI(((R=ne==null?void 0:ne.data)==null?void 0:R.errors)||[],O),ue=[],ke=new Set;[...H,...J].forEach(je=>{const ie=`${je.row}|${je.field}|${je.message}`;ke.has(ie)||(ke.add(ie),ue.push(je))});const ve=D_(O.length,ue);u(je=>({...je,summary:ve,uploadErrors:ue,uploading:!1,progress:100,showMappingModal:!1})),typeof r=="function"&&r(),typeof s=="function"&&s(q7e(O,ue))}catch(M){const X=bI(((Y=(D=M==null?void 0:M.response)==null?void 0:D.data)==null?void 0:Y.errors)||[],O),ne=O.map((ve,je)=>({row:ve,rowNumber:je+2})).filter(ve=>!H.some(je=>Number(je.row)===ve.rowNumber)).map(ve=>({row:ve.rowNumber,field:"Upload",message:sg(M,"Upload failed."),fullName:ve.row.name||ve.row.fullName||"",email:ve.row.email||"",phone:ve.row.phone||""})),J=[],ue=new Set;[...H,...X,...ne].forEach(ve=>{const je=`${ve.row}|${ve.field}|${ve.message}`;ue.has(je)||(ue.add(je),J.push(ve))});const ke=D_(O.length,J);u(ve=>({...ve,summary:ke,uploadErrors:J,uploading:!1,progress:100,showMappingModal:!1,error:sg(M,"Upload failed.")}))}},P=async()=>{try{const E=await vI(),O=URL.createObjectURL(E),I=document.createElement("a");I.href=O,I.download="Candidate_Profile_Bulk_Template.xlsx",I.click(),URL.revokeObjectURL(O)}catch{try{const O=await vI(),I=URL.createObjectURL(O),L=document.createElement("a");L.href=I,L.download="Candidate_Profile_Bulk_Template.xlsx",L.click(),URL.revokeObjectURL(I)}catch(O){u(I=>({...I,error:sg(O,"Failed to download template.")}))}}};return n.jsxs("section",{className:"bulk-import",children:[n.jsx("div",{className:"bulk-import__tabs-header",children:n.jsx("div",{className:"bulk-import__tabs",role:"tablist","aria-label":"Resume and CSV upload tools",children:x.map(E=>{var H,R;const O=E.icon,I=f===E.id,Z=E.id==="resume"?((H=o.selectedFiles)==null?void 0:H.length)||0:((R=d.rows)==null?void 0:R.length)||0;return n.jsxs("button",{ref:D=>{g.current[E.id]=D},type:"button",id:`bulk-import-tab-${E.id}`,role:"tab","aria-selected":I,"aria-controls":`bulk-import-panel-${E.id}`,tabIndex:I?0:-1,"data-import-tab":E.id,className:`bulk-import__tab ${I?"bulk-import__tab--active":""}`,onClick:()=>m(E.id),onKeyDown:D=>b(D,E.id),children:[n.jsx("span",{className:"bulk-import__tab-icon","aria-hidden":"true",children:n.jsx(O,{size:16})}),n.jsxs("span",{className:"bulk-import__tab-content",children:[n.jsx("span",{className:"bulk-import__tab-label",children:E.label}),n.jsx("span",{className:"bulk-import__tab-meta",children:E.meta})]}),Z>0&&n.jsx("span",{className:"bulk-import__tab-badge","aria-label":`${Z} selected`,children:Z})]},E.id)})})}),n.jsx("div",{id:`bulk-import-panel-${f}`,role:"tabpanel","aria-labelledby":`bulk-import-tab-${f}`,className:"bulk-import__panel",children:f==="resume"?n.jsxs("div",{className:"bulk-import__card bulk-import__card--tabbed",children:[n.jsxs("div",{className:"bulk-import__card-header",children:[n.jsx("span",{className:"bulk-import__card-icon",children:n.jsx(GT,{size:16})}),n.jsxs("div",{children:[n.jsx("h4",{className:"bulk-import__title",children:"Upload Resume"}),n.jsx("p",{className:"bulk-import__subtitle",children:"Parse candidate data from resume"})]})]}),n.jsxs("div",{className:`bulk-import__dropzone ${o.dragging?"bulk-import__dropzone--active":""}`,onDragOver:E=>{E.preventDefault(),c(O=>({...O,dragging:!0}))},onDragLeave:()=>c(E=>({...E,dragging:!1})),onDrop:k,onClick:()=>{var E;return(E=i.current)==null?void 0:E.click()},role:"button",tabIndex:0,"aria-label":"Upload resume",onKeyDown:E=>{var O;(E.key==="Enter"||E.key===" ")&&((O=i.current)==null||O.click())},children:[n.jsx(JT,{className:"text-slate-500",size:20}),n.jsx("p",{className:"bulk-import__dropzone-title",children:a?"Drag and drop resumes or click to upload":"Drag and drop or click to upload"}),n.jsx("p",{className:"bulk-import__dropzone-meta",children:a?"PDF, DOC, DOCX, TXT  Max 5MB each":"PDF, DOC, DOCX, TXT  Max 5MB"}),a&&n.jsx("p",{className:"bulk-import__dropzone-hint",children:"Upload multiple resumes at once. Matching email/phone will auto-update existing candidate details."}),n.jsx("input",{ref:i,type:"file",multiple:a,accept:".pdf,.doc,.docx,.txt",className:"hidden",onChange:E=>_(Array.from(E.target.files||[]))})]}),a&&((A=o.selectedFiles)==null?void 0:A.length)>0&&n.jsxs("div",{className:"bulk-import__selection",children:[n.jsxs("div",{className:"bulk-import__selection-title",children:["Selected resumes: ",o.selectedFiles.length]}),n.jsxs("div",{className:"bulk-import__selection-list",children:[o.selectedFiles.slice(0,4).map(E=>n.jsx("span",{className:"bulk-import__selection-chip",children:E.name},`${E.name}-${E.size}`)),o.selectedFiles.length>4&&n.jsxs("span",{className:"bulk-import__selection-chip bulk-import__selection-chip--muted",children:["+",o.selectedFiles.length-4," more"]})]})]}),o.warning&&n.jsxs("div",{className:"bulk-import__warning",children:[n.jsx(Nj,{})," ",o.warning]}),o.error&&n.jsxs("div",{className:"bulk-import__error",children:[n.jsx(Nj,{})," ",o.error]}),o.stage&&n.jsxs("div",{className:"bulk-import__progress","aria-live":"polite",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:o.message}),n.jsxs("span",{className:"font-semibold",children:[o.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full mt-2",children:n.jsx("div",{className:"h-1.5 bg-blue-500 rounded-full transition-all",style:{width:`${o.progress}%`}})})]}),!a&&(e==null?void 0:e.resumeUrl)&&n.jsx("div",{className:"bulk-import__subtitle",children:"Current resume uploaded."}),a&&o.summary&&n.jsxs("div",{className:"bulk-import__summary",children:[n.jsxs("div",{className:"bulk-import__summary-title",children:[n.jsx(HT,{})," Resume import complete"]}),n.jsxs("div",{className:"bulk-import__stats",children:[n.jsxs("div",{children:["Total: ",o.summary.total_processed]}),n.jsxs("div",{children:["Imported: ",o.summary.success+o.summary.updated]}),n.jsxs("div",{children:["Duplicates: ",o.summary.duplicates]}),n.jsxs("div",{children:["Failed: ",o.summary.failed]}),n.jsxs("div",{children:["Updated: ",o.summary.updated]})]}),((S=o.results)==null?void 0:S.length)>0&&n.jsxs("div",{className:"mt-2 space-y-1 text-slate-700",children:[n.jsx("div",{className:"font-semibold text-slate-800",children:"Import log"}),n.jsx("ul",{className:"divide-y divide-emerald-100 rounded border border-emerald-100 bg-white",children:o.results.map((E,O)=>n.jsxs("li",{className:"px-3 py-2 text-xs",children:[n.jsxs("div",{className:"font-semibold",children:[E.name||"Unknown"," ",E.email?n.jsxs("span",{className:"text-slate-500",children:["(",E.email,")"]}):null]}),n.jsxs("div",{className:"text-slate-600",children:[E.resume||"resume"," - ",E.status||"Processed"]})]},O))})]})]})]}):n.jsxs("div",{className:"bulk-import__card bulk-import__card--tabbed",children:[n.jsxs("div",{className:"bulk-import__card-header",children:[n.jsx("span",{className:"bulk-import__card-icon bulk-import__card-icon--success",children:n.jsx(qT,{size:16})}),n.jsxs("div",{children:[n.jsx("h4",{className:"bulk-import__title",children:"Upload Excel/CSV"}),n.jsx("p",{className:"bulk-import__subtitle",children:"Import multiple candidates at once"})]})]}),n.jsxs("div",{className:`bulk-import__dropzone ${d.dragging?"bulk-import__dropzone--active":""}`,onDragOver:E=>{E.preventDefault(),u(O=>({...O,dragging:!0}))},onDragLeave:()=>u(E=>({...E,dragging:!1})),onDrop:E=>{var I;E.preventDefault(),u(L=>({...L,dragging:!1}));const O=(I=E.dataTransfer.files)==null?void 0:I[0];O&&C(O)},onClick:()=>{var E;return(E=l.current)==null?void 0:E.click()},role:"button",tabIndex:0,"aria-label":"Upload Excel or CSV",onKeyDown:E=>{var O;(E.key==="Enter"||E.key===" ")&&((O=l.current)==null||O.click())},children:[n.jsx(JT,{className:"text-slate-500",size:20}),n.jsx("p",{className:"bulk-import__dropzone-title",children:"Drag and drop or click to upload"}),n.jsx("p",{className:"bulk-import__dropzone-meta",children:"XLSX, CSV  Max 10MB / 5000 rows"}),n.jsx("input",{ref:l,type:"file",accept:".xlsx,.csv",className:"hidden",onChange:E=>{var O;return C((O=E.target.files)==null?void 0:O[0])}})]}),n.jsxs("button",{type:"button",onClick:P,className:"bulk-import__link",children:[n.jsx(d7,{})," Download Template"]}),d.error&&n.jsxs("div",{className:"bulk-import__error",children:[n.jsx(Nj,{})," ",d.error]}),d.uploading&&n.jsxs("div",{className:"bulk-import__progress","aria-live":"polite",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Uploading file..."}),n.jsxs("span",{className:"font-semibold",children:[d.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full mt-2",children:n.jsx("div",{className:"h-1.5 bg-emerald-500 rounded-full transition-all",style:{width:`${d.progress}%`}})})]}),d.summary&&n.jsxs("div",{className:"bulk-import__summary",children:[n.jsxs("div",{className:"bulk-import__summary-title",children:[n.jsx(HT,{})," Upload complete"]}),n.jsxs("div",{className:"bulk-import__stats",children:[n.jsxs("div",{children:["Total Rows: ",d.summary.total]}),n.jsxs("div",{children:["Imported: ",d.summary.successful]}),n.jsxs("div",{children:["Duplicates: ",d.summary.duplicates]}),n.jsxs("div",{children:["Failed: ",d.summary.failed]})]}),d.uploadErrors.length>0&&n.jsx("button",{type:"button",className:"bulk-import__link mt-2",onClick:()=>{const E=G7e(d.uploadErrors),O=new Blob([E],{type:"text/csv;charset=utf-8;"}),I=URL.createObjectURL(O),L=document.createElement("a");L.href=I,L.download="bulk_upload_errors.csv",L.click(),URL.revokeObjectURL(I)},children:"Download Error Report"})]})]})}),o.showMergeModal&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl p-6 w-full max-w-3xl",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Data Conflict Detected"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Existing profile has data. How would you like to proceed?"}),n.jsx("div",{className:"space-y-2 mb-4",children:[{value:"overwrite",label:"Overwrite all fields"},{value:"merge",label:"Merge (keep existing, add new)"},{value:"cancel",label:"Cancel"}].map(E=>n.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"radio",name:"mergeOption",value:E.value,checked:o.mergeOption===E.value,onChange:()=>c(O=>({...O,mergeOption:E.value}))}),E.label]},E.value))}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Field"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Existing"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Parsed"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Action"})]})}),n.jsx("tbody",{children:h.map(E=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 font-medium",children:E.label}),n.jsx("td",{className:"p-2 text-gray-600",children:E.existing||""}),n.jsx("td",{className:"p-2 text-gray-600",children:E.parsed||""}),n.jsx("td",{className:"p-2 text-gray-600",children:E.action})]},E.label))})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-gray-200 text-gray-700",onClick:()=>c(E=>({...E,showMergeModal:!1,parsedData:null,conflicts:[]})),children:"Cancel"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white",onClick:()=>{if(o.mergeOption==="cancel"){c(E=>({...E,showMergeModal:!1,parsedData:null,conflicts:[]}));return}w(o.parsedData,o.mergeOption),p("complete"),c(E=>({...E,showMergeModal:!1}))},children:"Proceed"})]})]})]}),d.showMappingModal&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Map Excel Columns to Profile Fields"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left font-semibold",children:"Excel Column"}),n.jsx("th",{className:"p-2 text-left font-semibold",children:"Profile Field"})]})}),n.jsx("tbody",{children:d.headers.map(E=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 font-medium",children:E}),n.jsx("td",{className:"p-2",children:n.jsx("select",{className:"border border-gray-300 rounded px-2 py-1 text-xs",value:d.mapping[E]||"",onChange:O=>u(I=>({...I,mapping:{...I.mapping,[E]:O.target.value}})),children:E7e.map(O=>n.jsx("option",{value:O.value,children:O.label},O.value))})})]},E))})]})}),n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Preview (first 3 rows):"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Name"}),n.jsx("th",{className:"p-2 text-left",children:"Email"}),n.jsx("th",{className:"p-2 text-left",children:"Phone"}),n.jsx("th",{className:"p-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:d.previewRows.map((E,O)=>{const I=yI(E,d.mapping),L=gI(I,O+2);return n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:I.name||I.fullName||"--"}),n.jsx("td",{className:"p-2",children:I.email||"--"}),n.jsx("td",{className:"p-2",children:I.phone||"--"}),n.jsx("td",{className:"p-2",children:L.length===0?n.jsx("span",{className:"text-green-600",children:""}):n.jsx("span",{className:"text-red-600",children:""})})]},O)})})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-gray-200 text-gray-700",onClick:()=>u(E=>({...E,showMappingModal:!1})),children:"Cancel"}),n.jsxs("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white",onClick:T,children:["Import ",d.rows.length," Candidates"]})]})]})]})]})}const K7e=new Set(["SUPER_ADMIN","HIRING_MANAGER","RECRUITER"]),jI=["new","applied","sourced","hold_revisit","rejected_by_recruiter"],_I=200,X7e=["resume upload","bulk resume upload","excel upload","bulk upload"],Y7e=e=>{const t=String((e==null?void 0:e.source)||"").toLowerCase();return X7e.some(r=>t.includes(r))},Z7e=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M4 5h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm0 2v9h16V7H4zm2 2h12v2H6V9zm0 4h8v2H6v-2z",fill:"currentColor"})}),Wr=(...e)=>{const t=new Set(["n/a","na","none","null","undefined","unknown","unassigned","--","","-"]);for(const r of e){if(r==null)continue;const s=String(r).trim();if(s&&!t.has(s.toLowerCase()))return s}return""},Q7e=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US")},gl=e=>String(e||"").trim().toLowerCase(),Cu=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),ag=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),ig=e=>{var t,r,s,a;return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.candidates)?e.candidates:Array.isArray(e==null?void 0:e.requirements)?e.requirements:Array.isArray(e==null?void 0:e.jobs)?e.jobs:Array.isArray(e==null?void 0:e.data)?e.data:Array.isArray((t=e==null?void 0:e.data)==null?void 0:t.items)?e.data.items:Array.isArray((r=e==null?void 0:e.data)==null?void 0:r.candidates)?e.data.candidates:Array.isArray((s=e==null?void 0:e.data)==null?void 0:s.requirements)?e.data.requirements:Array.isArray((a=e==null?void 0:e.data)==null?void 0:a.jobs)?e.data.jobs:[]},wI=(e={})=>{var t,r,s;return[e==null?void 0:e.id,e==null?void 0:e._id,e==null?void 0:e.candidate_id,e==null?void 0:e.public_id,e==null?void 0:e.publicId,(t=e==null?void 0:e.candidate)==null?void 0:t.id,(r=e==null?void 0:e.candidate)==null?void 0:r.candidate_id,(s=e==null?void 0:e.candidate)==null?void 0:s.public_id].map(gl).filter(Boolean)},eMe=(e,t)=>{var d,u,f,m,g,x,h,p,v,b,j,N,w,_,k,C,T,P,A,S,E,O,I,L,Z,H,R,D,Y,M,X,ne,J,ue,ke,ve,je,ie,se,z,Te;const r=String((t==null?void 0:t.status)||(e==null?void 0:e.status)||"").trim(),s=Wr(e==null?void 0:e.assignment_role,e==null?void 0:e.requirement_title,e==null?void 0:e.job_title,e==null?void 0:e.applied_role,e==null?void 0:e.applied_for,(d=e==null?void 0:e.requirement)==null?void 0:d.title,(u=e==null?void 0:e.requirement)==null?void 0:u.job_title,(f=e==null?void 0:e.job)==null?void 0:f.title,(m=e==null?void 0:e.job)==null?void 0:m.job_title,t==null?void 0:t.jobTitle,t==null?void 0:t.currentRole,t==null?void 0:t.designation),a=Wr(e==null?void 0:e.recruiter_name,e==null?void 0:e.recruiterName,e==null?void 0:e.assigned_recruiter_name,e==null?void 0:e.submitted_by_name,e==null?void 0:e.submittedByName,(g=e==null?void 0:e.submission)==null?void 0:g.recruiter_name,(x=e==null?void 0:e.submission)==null?void 0:x.submitted_by_name,(p=(h=e==null?void 0:e.submission)==null?void 0:h.recruiter)==null?void 0:p.name,(v=e==null?void 0:e.recruiter)==null?void 0:v.name,e==null?void 0:e.owner_name,(b=e==null?void 0:e.owner)==null?void 0:b.name),i=Wr((j=t==null?void 0:t.accountManager)==null?void 0:j.name,e==null?void 0:e.assigned_by_name,e==null?void 0:e.assigned_by,e==null?void 0:e.am_name,e==null?void 0:e.submitted_to_am_name,e==null?void 0:e.accountManagerName,e==null?void 0:e.account_manager_name,(N=e==null?void 0:e.account_manager)==null?void 0:N.name,(w=e==null?void 0:e.account_manager)==null?void 0:w.am_name,(_=e==null?void 0:e.submission)==null?void 0:_.account_manager_name,(C=(k=e==null?void 0:e.submission)==null?void 0:k.account_manager)==null?void 0:C.name,(T=e==null?void 0:e.requirement)==null?void 0:T.account_manager_name,(A=(P=e==null?void 0:e.requirement)==null?void 0:P.account_manager)==null?void 0:A.name,(S=e==null?void 0:e.job)==null?void 0:S.account_manager_name,(O=(E=e==null?void 0:e.job)==null?void 0:E.account_manager)==null?void 0:O.name,(I=e==null?void 0:e.job)==null?void 0:I.assigned_by_name,(L=e==null?void 0:e.job)==null?void 0:L.assigned_by),l=Wr(e==null?void 0:e.client_name,e==null?void 0:e.client_display_name,e==null?void 0:e.clientName,e==null?void 0:e.company_name,e==null?void 0:e.companyName,(Z=e==null?void 0:e.client)==null?void 0:Z.client_name,(H=e==null?void 0:e.client)==null?void 0:H.name,(R=e==null?void 0:e.submission)==null?void 0:R.client_name,(Y=(D=e==null?void 0:e.submission)==null?void 0:D.client)==null?void 0:Y.client_name,(X=(M=e==null?void 0:e.submission)==null?void 0:M.client)==null?void 0:X.name,(ne=e==null?void 0:e.requirement)==null?void 0:ne.client_name,(ue=(J=e==null?void 0:e.requirement)==null?void 0:J.client)==null?void 0:ue.client_name,(ve=(ke=e==null?void 0:e.requirement)==null?void 0:ke.client)==null?void 0:ve.name,(je=e==null?void 0:e.job)==null?void 0:je.client_name,(se=(ie=e==null?void 0:e.job)==null?void 0:ie.client)==null?void 0:se.client_name,(Te=(z=e==null?void 0:e.job)==null?void 0:z.client)==null?void 0:Te.name),o=Wr(e==null?void 0:e.last_action_by_name,e==null?void 0:e.updated_by_name,e==null?void 0:e.status_updated_by_name,e==null?void 0:e.modified_by_name),c=Q7e((e==null?void 0:e.status_updated_at)||(e==null?void 0:e.updated_at)||(e==null?void 0:e.last_action_at));return{statusRaw:r,statusLabel:r?Vs(r):"Unknown",roleName:s,recruiterName:a,amName:i,clientName:l,actedBy:o,actedOn:c}};function NI(){const e=Tt(),[t,r]=ea(),s=y.useRef(""),a=y.useRef(new Map),i=y.useRef(""),l=t.get("candidateId"),o=t.get("viewOnly")==="1",[c,d]=y.useState([]),[u,f]=y.useState(!1),[m,g]=y.useState([]),[x,h]=y.useState(new Set),[p,v]=y.useState(""),[b,j]=y.useState(""),[N,w]=y.useState(!1),[_,k]=y.useState(null),[C,T]=y.useState(!1),[P,A]=y.useState(""),[S,E]=y.useState(""),[O,I]=y.useState(!1),[L,Z]=y.useState(!1),[H,R]=y.useState(""),[D,Y]=y.useState("pdf"),[M,X]=y.useState(""),[ne,J]=y.useState(""),ue=y.useMemo(()=>{if(!P)return"";const xe=String(P).trim();return xe?xe.startsWith("blob:")||xe.includes("#")?xe:xe.toLowerCase().includes(".pdf")?`${xe}#toolbar=1&navpanes=0&view=FitH`:xe:""},[P]),[ke,ve]=y.useState(!1),[je,ie]=y.useState(null),[se,z]=y.useState(null),[Te,fe]=y.useState({open:!1,recipient:"am",candidate:null}),Ie=(localStorage.getItem("role")||"").toUpperCase(),ce=K7e.has(Ie);y.useEffect(()=>{qe()},[]);const Ce=xe=>String(xe||"").trim().toLowerCase(),Ye=(xe="")=>{const Re=String(xe||"").trim();if(!Re)return"";const le=Re.split("?")[0].split("#")[0],Me=le.lastIndexOf(".");return Me<0?"":le.slice(Me).toLowerCase()},at=(xe="")=>{const Re=String(xe||"").trim();if(!Re)return"";const le=/filename\*?=(?:UTF-8'')?"?([^";\r\n]+)"?/i.exec(Re);if(!(le!=null&&le[1]))return"";try{const Me=decodeURIComponent(le[1]);return Ye(Me)}catch{return Ye(le[1])}},pe=async xe=>{if(!(xe instanceof Blob)||xe.size<4)return!1;const Re=new Uint8Array(await xe.slice(0,4).arrayBuffer());return Re[0]===37&&Re[1]===80&&Re[2]===68&&Re[3]===70},ye=async xe=>{if(!(xe instanceof Blob)||xe.size<4)return!1;const Re=new Uint8Array(await xe.slice(0,4).arrayBuffer());return Re[0]===80&&Re[1]===75&&Re[2]===3&&Re[3]===4},Pe=()=>{i.current&&(URL.revokeObjectURL(i.current),i.current="")},et=()=>{I(!1),Z(!1),R(""),A(""),E(""),Y("pdf"),X(""),J(""),Pe()},We=async(xe,Re)=>{var Ve,Xe;const le=String(xe||"").trim(),Me=La(Re);if(!(!le&&!Me)){I(!0),E(le),R(""),Z(!0),A(""),Y("pdf"),X(""),J(""),Pe();try{let he=null;if(Me)try{he=await G.get(`/v1/candidates/${Me}/resume/download`,{responseType:"blob"})}catch{he=null}!he&&le&&(he=await G.get(le,{responseType:"blob"}));const W=he==null?void 0:he.data;if(!(W instanceof Blob))throw new Error("Invalid preview payload");const V=String(((Ve=he==null?void 0:he.headers)==null?void 0:Ve["content-type"])||"").toLowerCase(),Q=String(((Xe=he==null?void 0:he.headers)==null?void 0:Xe["content-disposition"])||"").toLowerCase(),K=at(Q)||Ye(le),q=await pe(W)||V.includes("application/pdf")||K===".pdf",F=V.startsWith("image/")||[".png",".jpg",".jpeg",".gif",".webp"].includes(K),ee=V.startsWith("text/")||K===".txt"||K===".log",me=V.includes("wordprocessingml")||K===".docx"||await ye(W)&&K!==".zip";if(q){const Ne=W.type==="application/pdf"?W:new Blob([W],{type:"application/pdf"}),ge=URL.createObjectURL(Ne);i.current=ge,Y("pdf"),A(ge);return}if(F){const Ne=W.type&&W.type.startsWith("image/")?W:new Blob([W],{type:V||"image/png"}),ge=URL.createObjectURL(Ne);i.current=ge,Y("image"),A(ge);return}if(ee){const Ne=await W.text();Y("text"),J(Ne||"No text content found in file.");return}if(me){const Ne=await W1(()=>import("./index-vjOrDB-k.js").then(Ue=>Ue.i),[]),ge=await W.arrayBuffer(),te=await Ne.convertToHtml({arrayBuffer:ge}),Se=String((te==null?void 0:te.value)||"").trim();if(!Se){R("DOCX parsed but no preview content was found."),Y("unsupported");return}Y("html"),X(Se);return}if(K===".doc"){Y("unsupported"),R("DOC format is not supported for inline preview. Please open/download the file.");return}Y("unsupported"),R("Unsupported file type for inline preview.")}catch(he){console.error("Failed to load resume preview",he),Y("unsupported"),R("Unable to render inline preview. Open in new tab instead.")}finally{Z(!1)}}},qe=async()=>{var xe,Re,le;try{f(!0);const[Me,Ve,Xe,he]=await Promise.allSettled([ln.listCandidates({limit:_I}),G.get("/workflow/candidates",{params:{limit:_I}}),G.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),Ep()]),W=Me.status==="fulfilled"?ig(Me.value):[],V=Ve.status==="fulfilled"?ig((xe=Ve.value)==null?void 0:xe.data):[],Q=Xe.status==="fulfilled"?ig((Re=Xe.value)==null?void 0:Re.data):[],K=he.status==="fulfilled"?ig((le=he.value)==null?void 0:le.data):[],q=new Map,F=new Map,ee=Array.from(new Set(K.map(B=>gl((B==null?void 0:B.id)||(B==null?void 0:B.job_id)||(B==null?void 0:B.jobId)||(B==null?void 0:B.requirement_id)||(B==null?void 0:B.requirementId))).filter(Boolean)));await Promise.allSettled(ee.map(async B=>{var re,st,ct,Ee;try{const Ft=await G.get(`/v1/recruiter/assigned-jobs/${B}`),pt=((re=Ft==null?void 0:Ft.data)==null?void 0:re.job)||(Ft==null?void 0:Ft.data)||{},Mt=(pt==null?void 0:pt.account_manager)||((st=Ft==null?void 0:Ft.data)==null?void 0:st.account_manager)||{},Bt={...pt,id:Wr(pt==null?void 0:pt.id,pt==null?void 0:pt.job_id,pt==null?void 0:pt.requirement_id,B),job_id:Wr(pt==null?void 0:pt.job_id,pt==null?void 0:pt.id,pt==null?void 0:pt.requirement_id,B),title:Wr(pt==null?void 0:pt.title,pt==null?void 0:pt.job_title,pt==null?void 0:pt.requirement_title),client_name:Wr(pt==null?void 0:pt.client_name,(ct=pt==null?void 0:pt.client)==null?void 0:ct.name,(Ee=pt==null?void 0:pt.client)==null?void 0:Ee.client_name,pt==null?void 0:pt.company_name),account_manager:Mt,account_manager_name:Wr(Mt==null?void 0:Mt.name,Mt==null?void 0:Mt.am_name,pt==null?void 0:pt.account_manager_name,pt==null?void 0:pt.assigned_by_name),account_manager_email:Wr(Mt==null?void 0:Mt.email,Mt==null?void 0:Mt.am_email,pt==null?void 0:pt.account_manager_email),account_manager_id:Wr(Mt==null?void 0:Mt.id,Mt==null?void 0:Mt.am_id,pt==null?void 0:pt.account_manager_id)},yr=gl((Bt==null?void 0:Bt.id)||(Bt==null?void 0:Bt.job_id)||B);yr&&q.set(yr,Bt);const Tr=Cu((Bt==null?void 0:Bt.title)||(Bt==null?void 0:Bt.job_title)||(Bt==null?void 0:Bt.requirement_title));Tr&&F.set(Tr,Bt)}catch{}}));const me=new Map,Ne=new Map;V.forEach(B=>{var st;wI(B).forEach(ct=>me.set(ct,B));const re=gl((B==null?void 0:B.email)||((st=B==null?void 0:B.candidate)==null?void 0:st.email));re&&Ne.set(re,B)});const ge=new Map,te=new Map,Se=new Map,Ue=new Map,Be=new Map,Ge=new Map,tt=new Map;[...Q,...K].forEach(B=>{var st,ct,Ee,Ft;[B==null?void 0:B.id,B==null?void 0:B._id,B==null?void 0:B.job_id,B==null?void 0:B.jobId,B==null?void 0:B.requirement_id,B==null?void 0:B.requirementId,B==null?void 0:B.assigned_job_id,(st=B==null?void 0:B.requirement)==null?void 0:st.id,(ct=B==null?void 0:B.job)==null?void 0:ct.id,(Ee=B==null?void 0:B.job)==null?void 0:Ee.job_id,(Ft=B==null?void 0:B.requirement)==null?void 0:Ft.requirement_id].map(gl).filter(Boolean).forEach(pt=>ge.set(pt,B)),[B==null?void 0:B.title,B==null?void 0:B.job_title,B==null?void 0:B.requirement_title,B==null?void 0:B.role,B==null?void 0:B.position_title,B==null?void 0:B.requirement_code].map(Cu).filter(Boolean).forEach(pt=>te.set(pt,B))}),K.forEach(B=>{var Mt,Bt,yr,Tr,Ps,vt;const re=Wr(B==null?void 0:B.client_name,(Mt=B==null?void 0:B.client)==null?void 0:Mt.client_name,(Bt=B==null?void 0:B.client)==null?void 0:Bt.name,B==null?void 0:B.company_name),st=Wr(B==null?void 0:B.title,B==null?void 0:B.job_title,B==null?void 0:B.requirement_title,B==null?void 0:B.role,B==null?void 0:B.position_title);[B==null?void 0:B.id,B==null?void 0:B._id,B==null?void 0:B.job_id,B==null?void 0:B.jobId,B==null?void 0:B.requirement_id,B==null?void 0:B.requirementId].map(gl).filter(Boolean).forEach(gn=>Se.set(gn,B)),[B==null?void 0:B.title,B==null?void 0:B.job_title,B==null?void 0:B.requirement_title,B==null?void 0:B.role].map(Cu).filter(Boolean).forEach(gn=>Ue.set(gn,B));const ct=Cu(st),Ee=ag(re);if(ct&&Ee){const gn=`${ct}||${Ee}`;Be.has(gn)||Be.set(gn,[]),Be.get(gn).push(B)}ct&&(Ge.has(ct)||Ge.set(ct,[]),Ge.get(ct).push(B));const Ft=Wr(B==null?void 0:B.assigned_by_name,B==null?void 0:B.account_manager_name,(yr=B==null?void 0:B.account_manager)==null?void 0:yr.name,(Tr=B==null?void 0:B.account_manager)==null?void 0:Tr.am_name,(Ps=B==null?void 0:B.am)==null?void 0:Ps.name,(vt=B==null?void 0:B.am)==null?void 0:vt.am_name),pt=ag(re);Ft&&pt&&(tt.has(pt)||tt.set(pt,[]),tt.get(pt).push(Ft))});const Je=[...W.map(B=>{var Oa,Os,oe,Le,Qe,dt,ae,Ke,U,de,Fe,$e,xt,It,er,Xt,Ut,br,vn,Jr,tn,ga,Sr,Fc,Cn,Oo,pu,$m,X4,Y4,Z4,Q4,eA,tA,rA,nA,sA,aA,iA,lA,oA,cA,dA,uA,fA,mA,hA,pA,xA,gA,yA,vA,bA,jA,_A,wA,NA,kA,SA,CA,AA,EA,TA,PA,OA,RA,LA,IA,FA,DA,$A,MA,BA,UA,zA,WA,VA,HA,qA,GA,JA,KA,XA,YA,ZA,QA,eE,tE,rE,nE,sE,aE,iE,lE,oE,cE,dE,uE,fE,mE,hE,pE,xE,gE,yE,vE,bE,jE,_E,wE,NE,kE,SE,CE,AE;const re=wI(B).map(H1=>me.get(H1)).find(Boolean)||Ne.get(gl(B==null?void 0:B.email)),st=gl((B==null?void 0:B.requirement_id)||(B==null?void 0:B.job_id)||(B==null?void 0:B.applied_job_id)||(B==null?void 0:B.appliedJobId)||(B==null?void 0:B.assigned_job_id)||((Oa=B==null?void 0:B.submission)==null?void 0:Oa.job_id)||((Os=B==null?void 0:B.submission)==null?void 0:Os.requirement_id)||(re==null?void 0:re.requirement_id)||(re==null?void 0:re.job_id)||(re==null?void 0:re.assigned_job_id)||((oe=re==null?void 0:re.submission)==null?void 0:oe.job_id)||((Le=re==null?void 0:re.submission)==null?void 0:Le.requirement_id)),ct=Cu((B==null?void 0:B.requirement_title)||(B==null?void 0:B.job_title)||(B==null?void 0:B.applied_role)||(B==null?void 0:B.applied_for)||((Qe=B==null?void 0:B.job)==null?void 0:Qe.title)||((dt=B==null?void 0:B.job)==null?void 0:dt.job_title)||(re==null?void 0:re.requirement_title)||(re==null?void 0:re.job_title)||(re==null?void 0:re.applied_role)||(re==null?void 0:re.applied_for)||((ae=re==null?void 0:re.job)==null?void 0:ae.title)||((Ke=re==null?void 0:re.job)==null?void 0:Ke.job_title)||(B==null?void 0:B.designation)||(B==null?void 0:B.current_designation)||(B==null?void 0:B.current_role)||(B==null?void 0:B.role)),Ee=ge.get(st)||te.get(ct),Ft=Wr(B==null?void 0:B.client_name,(U=B==null?void 0:B.client)==null?void 0:U.client_name,(de=B==null?void 0:B.client)==null?void 0:de.name,re==null?void 0:re.client_name,(Fe=re==null?void 0:re.client)==null?void 0:Fe.client_name,($e=re==null?void 0:re.client)==null?void 0:$e.name,Ee==null?void 0:Ee.client_name,(xt=Ee==null?void 0:Ee.client)==null?void 0:xt.client_name,(It=Ee==null?void 0:Ee.client)==null?void 0:It.name),pt=Cu(Wr(B==null?void 0:B.requirement_title,B==null?void 0:B.job_title,B==null?void 0:B.applied_role,B==null?void 0:B.applied_for,re==null?void 0:re.requirement_title,re==null?void 0:re.job_title,re==null?void 0:re.applied_role,re==null?void 0:re.applied_for,Ee==null?void 0:Ee.title,Ee==null?void 0:Ee.job_title,Ee==null?void 0:Ee.requirement_title,B==null?void 0:B.designation,B==null?void 0:B.current_designation)),Mt=`${pt}||${ag(Ft)}`,Bt=(()=>{const H1=ag(Ft),bV=tt.get(H1)||[],EE=Array.from(new Set(bV.filter(Boolean)));return EE.length===1?EE[0]:""})(),yr=Be.get(Mt)||[],Tr=Ge.get(pt)||[],Ps=yr.length===1?yr[0]:Tr.length===1?Tr[0]:null,vt=q.get(st)||q.get(gl((B==null?void 0:B.applied_job_id)||(B==null?void 0:B.job_id)||(B==null?void 0:B.jobId)||(re==null?void 0:re.job_id)||(re==null?void 0:re.applied_job_id)))||F.get(ct)||Ps||Se.get(st)||Se.get(gl((B==null?void 0:B.applied_job_id)||(B==null?void 0:B.job_id)||(B==null?void 0:B.jobId)||(re==null?void 0:re.job_id)||(re==null?void 0:re.applied_job_id)))||Ue.get(ct),gn=Wr(Ee==null?void 0:Ee.title,Ee==null?void 0:Ee.job_title,Ee==null?void 0:Ee.requirement_title,Ee==null?void 0:Ee.role,Ee==null?void 0:Ee.position_title,re==null?void 0:re.requirement_title,re==null?void 0:re.job_title,(er=re==null?void 0:re.job)==null?void 0:er.title,(Xt=re==null?void 0:re.job)==null?void 0:Xt.job_title,re==null?void 0:re.applied_role,re==null?void 0:re.applied_for,B==null?void 0:B.requirement_title,B==null?void 0:B.job_title,B==null?void 0:B.applied_role,B==null?void 0:B.applied_for,(Ut=B==null?void 0:B.job)==null?void 0:Ut.title,(br=B==null?void 0:B.job)==null?void 0:br.job_title),js=Wr(vt==null?void 0:vt.client_name,(vn=vt==null?void 0:vt.client)==null?void 0:vn.name,(Jr=vt==null?void 0:vt.client)==null?void 0:Jr.client_name,vt==null?void 0:vt.company_name,B==null?void 0:B.client_name,(tn=B==null?void 0:B.client)==null?void 0:tn.client_name,(ga=B==null?void 0:B.client)==null?void 0:ga.name,(Sr=B==null?void 0:B.client)==null?void 0:Sr.company_name,re==null?void 0:re.client_name,(Fc=re==null?void 0:re.client)==null?void 0:Fc.client_name,(Cn=re==null?void 0:re.client)==null?void 0:Cn.name,(Oo=re==null?void 0:re.client)==null?void 0:Oo.company_name,(pu=re==null?void 0:re.submission)==null?void 0:pu.client_name,(X4=($m=re==null?void 0:re.submission)==null?void 0:$m.client)==null?void 0:X4.client_name,(Z4=(Y4=re==null?void 0:re.submission)==null?void 0:Y4.client)==null?void 0:Z4.name,(eA=(Q4=re==null?void 0:re.submission)==null?void 0:Q4.client)==null?void 0:eA.company_name,(tA=re==null?void 0:re.requirement)==null?void 0:tA.client_name,(rA=re==null?void 0:re.job)==null?void 0:rA.client_name,Ee==null?void 0:Ee.client_name,(nA=Ee==null?void 0:Ee.client)==null?void 0:nA.client_name,(sA=Ee==null?void 0:Ee.client)==null?void 0:sA.name,(aA=Ee==null?void 0:Ee.client)==null?void 0:aA.company_name,Ee==null?void 0:Ee.company,Ee==null?void 0:Ee.company_name),xa=Wr(vt==null?void 0:vt.assigned_by_name,vt==null?void 0:vt.assigned_by,(iA=vt==null?void 0:vt.account_manager)==null?void 0:iA.name,(lA=vt==null?void 0:vt.account_manager)==null?void 0:lA.am_name,(oA=vt==null?void 0:vt.am)==null?void 0:oA.name,(cA=vt==null?void 0:vt.am)==null?void 0:cA.am_name,vt==null?void 0:vt.assigned_am_name,vt==null?void 0:vt.account_manager_name,B==null?void 0:B.account_manager_name,(dA=B==null?void 0:B.account_manager)==null?void 0:dA.name,(uA=B==null?void 0:B.account_manager)==null?void 0:uA.am_name,re==null?void 0:re.account_manager_name,(fA=re==null?void 0:re.account_manager)==null?void 0:fA.name,(mA=re==null?void 0:re.account_manager)==null?void 0:mA.am_name,re==null?void 0:re.am_name,re==null?void 0:re.submitted_to_am_name,(hA=re==null?void 0:re.submission)==null?void 0:hA.account_manager_name,(xA=(pA=re==null?void 0:re.submission)==null?void 0:pA.account_manager)==null?void 0:xA.name,(yA=(gA=re==null?void 0:re.submission)==null?void 0:gA.account_manager)==null?void 0:yA.am_name,(vA=re==null?void 0:re.requirement)==null?void 0:vA.account_manager_name,(jA=(bA=re==null?void 0:re.requirement)==null?void 0:bA.account_manager)==null?void 0:jA.name,(_A=re==null?void 0:re.job)==null?void 0:_A.account_manager_name,(NA=(wA=re==null?void 0:re.job)==null?void 0:wA.account_manager)==null?void 0:NA.name,(SA=(kA=re==null?void 0:re.job)==null?void 0:kA.account_manager)==null?void 0:SA.am_name,(CA=Ee==null?void 0:Ee.account_manager)==null?void 0:CA.name,(AA=Ee==null?void 0:Ee.account_manager)==null?void 0:AA.am_name,Ee==null?void 0:Ee.assigned_am_name,Ee==null?void 0:Ee.assigned_by_name,Ee==null?void 0:Ee.assigned_by,(EA=Ee==null?void 0:Ee.am)==null?void 0:EA.name,(TA=Ee==null?void 0:Ee.am)==null?void 0:TA.am_name,Ee==null?void 0:Ee.am_name,Ee==null?void 0:Ee.account_manager_name,Bt),yn=Wr((PA=vt==null?void 0:vt.account_manager)==null?void 0:PA.email,(OA=vt==null?void 0:vt.account_manager)==null?void 0:OA.am_email,(RA=vt==null?void 0:vt.am)==null?void 0:RA.email,(LA=vt==null?void 0:vt.am)==null?void 0:LA.am_email,vt==null?void 0:vt.account_manager_email,B==null?void 0:B.account_manager_email,(IA=B==null?void 0:B.account_manager)==null?void 0:IA.email,(FA=B==null?void 0:B.account_manager)==null?void 0:FA.am_email,re==null?void 0:re.account_manager_email,(DA=re==null?void 0:re.account_manager)==null?void 0:DA.email,($A=re==null?void 0:re.account_manager)==null?void 0:$A.am_email,(MA=re==null?void 0:re.submission)==null?void 0:MA.account_manager_email,(UA=(BA=re==null?void 0:re.submission)==null?void 0:BA.account_manager)==null?void 0:UA.email,(zA=re==null?void 0:re.requirement)==null?void 0:zA.account_manager_email,(WA=re==null?void 0:re.job)==null?void 0:WA.account_manager_email,(VA=Ee==null?void 0:Ee.account_manager)==null?void 0:VA.email,(HA=Ee==null?void 0:Ee.account_manager)==null?void 0:HA.am_email,(qA=Ee==null?void 0:Ee.am)==null?void 0:qA.email,(GA=Ee==null?void 0:Ee.am)==null?void 0:GA.am_email,Ee==null?void 0:Ee.account_manager_email),Br=Wr((JA=vt==null?void 0:vt.account_manager)==null?void 0:JA.id,(KA=vt==null?void 0:vt.account_manager)==null?void 0:KA.am_id,(XA=vt==null?void 0:vt.am)==null?void 0:XA.id,(YA=vt==null?void 0:vt.am)==null?void 0:YA.am_id,vt==null?void 0:vt.account_manager_id,B==null?void 0:B.account_manager_id,(ZA=B==null?void 0:B.account_manager)==null?void 0:ZA.id,(QA=B==null?void 0:B.account_manager)==null?void 0:QA.am_id,re==null?void 0:re.account_manager_id,(eE=re==null?void 0:re.account_manager)==null?void 0:eE.id,(tE=re==null?void 0:re.account_manager)==null?void 0:tE.am_id,(rE=re==null?void 0:re.submission)==null?void 0:rE.account_manager_id,(sE=(nE=re==null?void 0:re.submission)==null?void 0:nE.account_manager)==null?void 0:sE.id,(aE=re==null?void 0:re.requirement)==null?void 0:aE.account_manager_id,(iE=re==null?void 0:re.job)==null?void 0:iE.account_manager_id,(lE=Ee==null?void 0:Ee.account_manager)==null?void 0:lE.id,(oE=Ee==null?void 0:Ee.account_manager)==null?void 0:oE.am_id,(cE=Ee==null?void 0:Ee.am)==null?void 0:cE.id,(dE=Ee==null?void 0:Ee.am)==null?void 0:dE.am_id,Ee==null?void 0:Ee.account_manager_id);return{...re,...B,assignment_role:gn||(B==null?void 0:B.assignment_role),requirement_title:gn||(B==null?void 0:B.requirement_title)||(re==null?void 0:re.requirement_title),job_title:gn||(B==null?void 0:B.job_title)||(re==null?void 0:re.job_title),client_name:js||(B==null?void 0:B.client_name),account_manager_name:xa||(B==null?void 0:B.account_manager_name),account_manager_email:yn||(B==null?void 0:B.account_manager_email),account_manager_id:Br||(B==null?void 0:B.account_manager_id),recruiter_name:Wr(B==null?void 0:B.recruiter_name,re==null?void 0:re.recruiter_name,re==null?void 0:re.assigned_recruiter_name,re==null?void 0:re.submitted_by_name,(uE=re==null?void 0:re.submission)==null?void 0:uE.recruiter_name,(fE=re==null?void 0:re.submission)==null?void 0:fE.submitted_by_name),requirement:{...(vt==null?void 0:vt.requirement)||{},...(Ee==null?void 0:Ee.requirement)||{},...(re==null?void 0:re.requirement)||{},...(B==null?void 0:B.requirement)||{},title:Wr(Ee==null?void 0:Ee.title,Ee==null?void 0:Ee.requirement_title,(mE=re==null?void 0:re.requirement)==null?void 0:mE.title,(hE=re==null?void 0:re.requirement)==null?void 0:hE.requirement_title,(pE=B==null?void 0:B.requirement)==null?void 0:pE.title),client_name:Wr(js,Ee==null?void 0:Ee.client_name,vt==null?void 0:vt.client_name,(xE=re==null?void 0:re.requirement)==null?void 0:xE.client_name,(gE=B==null?void 0:B.requirement)==null?void 0:gE.client_name)},job:{...vt||{},...(Ee==null?void 0:Ee.job)||{},...(re==null?void 0:re.job)||{},...(B==null?void 0:B.job)||{},title:Wr(Ee==null?void 0:Ee.title,Ee==null?void 0:Ee.job_title,vt==null?void 0:vt.title,vt==null?void 0:vt.job_title,(yE=re==null?void 0:re.job)==null?void 0:yE.title,(vE=B==null?void 0:B.job)==null?void 0:vE.title,gn),client_name:Wr(js,(bE=Ee==null?void 0:Ee.job)==null?void 0:bE.client_name,vt==null?void 0:vt.client_name,(jE=re==null?void 0:re.job)==null?void 0:jE.client_name,(_E=B==null?void 0:B.job)==null?void 0:_E.client_name)},account_manager:{...(re==null?void 0:re.account_manager)||{},...(B==null?void 0:B.account_manager)||{},name:xa||((wE=B==null?void 0:B.account_manager)==null?void 0:wE.name),am_name:xa||((NE=B==null?void 0:B.account_manager)==null?void 0:NE.am_name),email:yn||((kE=B==null?void 0:B.account_manager)==null?void 0:kE.email),am_email:yn||((SE=B==null?void 0:B.account_manager)==null?void 0:SE.am_email),id:Br||((CE=B==null?void 0:B.account_manager)==null?void 0:CE.id),am_id:Br||((AE=B==null?void 0:B.account_manager)==null?void 0:AE.am_id)}}})].sort((B,re)=>{const st=new Date(B.created_at||B.updated_at||0).getTime();return new Date(re.created_at||re.updated_at||0).getTime()-st});d(Je)}catch(Me){console.error("Error fetching candidates",Me)}finally{f(!1)}};y.useEffect(()=>{const xe=Ce(l);if(!xe){s.current="";return}if(s.current===xe||u)return;const Re=c.find(le=>[La(le),le==null?void 0:le.id,le==null?void 0:le._id,le==null?void 0:le.candidate_id,le==null?void 0:le.public_id,le==null?void 0:le.publicId].some(Ve=>Ce(Ve)===xe));if(Re){s.current=xe,lr(Re);return}s.current=xe,(async()=>{try{T(!0);const le=await ln.getCandidateById(l);le&&(w(!0),k(le))}catch(le){console.error("Failed to open deep-linked candidate",le)}finally{T(!1)}})()},[c,l,u]),y.useEffect(()=>()=>{Pe()},[]);const ot=y.useMemo(()=>c.map(xe=>{const Re=fm(xe,ce);if(!Re)return{candidate:xe,profile:null};const le=String(Re.status||"").toLowerCase().trim();return(le==="new"||le==="verified")&&Y7e(xe)&&(Re.status="sourced"),{candidate:xe,profile:Re}}).filter(xe=>xe.profile),[c,ce]),Ct=y.useMemo(()=>{const xe=p.trim().toLowerCase();return ot.filter(({profile:Re})=>{const le=String(Re.status||"").toLowerCase().trim(),Me=b?le===b.toLowerCase():!0,Ve=xe?[Re.name,Re.email,Re.phone,Re.location,...Array.isArray(Re.skills)?Re.skills.map(Xe=>Xe.name||Xe):[]].filter(Boolean).some(Xe=>String(Xe).toLowerCase().includes(xe)):!0;return Me&&Ve})},[ot,p,b]),He=y.useMemo(()=>{const xe=new Set;return ot.forEach(({profile:le})=>{const Me=String((le==null?void 0:le.status)||"").toLowerCase().trim();Me&&xe.add(Me)}),[...jI,...Array.from(xe).filter(le=>!jI.includes(le))].map(le=>({value:le,label:Vs(le)}))},[ot]),mt=xe=>{h(Re=>{const le=new Set(Re);return le.has(xe)?le.delete(xe):le.add(xe),le})},rt=()=>h(new Set),wt=()=>{h(new Set(Ct.map(({profile:xe})=>xe.id||xe._id)))},At=x.size,$t=()=>{const xe=At>0?Ct.filter(({profile:W})=>x.has(W.id||W._id)):Ct;if(xe.length===0){alert("No candidates to export.");return}const Re=["Name","Email","Phone","Status","Experience","Notice Period","Location","Skills"],le=xe.map(({profile:W})=>[W.name||"",W.email||"",W.phone||"",W.status||"",W.totalExperience||"",W.noticePeriod||"",W.location||"",Array.isArray(W.skills)?W.skills.map(V=>V.name||V).join(", "):""]),Me=[Re,...le].map(W=>W.map(V=>`"${String(V).replace(/"/g,'""')}"`).join(",")).join(`
`),Ve=new Blob([Me],{type:"text/csv;charset=utf-8;"}),Xe=URL.createObjectURL(Ve),he=document.createElement("a");he.href=Xe,he.download="candidates.csv",he.click(),URL.revokeObjectURL(Xe)},Wt=_?fm(_,ce):null,lr=async xe=>{if(!xe)return;w(!0),k(xe);const Re=La(xe);if(Re)try{T(!0);const le=await ln.getCandidateById(Re);k({...xe,...le||{}})}catch(le){console.error("Failed to load candidate detail",le)}finally{T(!1)}},sr=()=>{if(w(!1),k(null),et(),l||o){const xe=new URLSearchParams(t);xe.delete("candidateId"),xe.delete("viewOnly"),r(xe,{replace:!0}),s.current=""}},De=xe=>{const Re=La(xe),le=Re?`?candidateId=${Re}`:"";e(`/recruiter/interviews/calendar${le}`)},yt=async xe=>{const Re=La(xe);if(Re)try{await ln.updateStatus(Re,{status:"shortlisted"}),qe()}catch(le){console.error("Failed to shortlist candidate",le)}},ut=async xe=>{const Re=La(xe);if(Re)try{await G.post(`/v1/candidate-workflow/${Re}/send-to-am`),alert("Candidate sent to Account Manager successfully!"),qe(),sr()}catch(le){console.error("Failed to send to Account Manager",le),alert("Failed to send candidate to Account Manager")}},Lt=async(xe,Re)=>{var Ve,Xe;const Me=La(xe||_);if(!Me)return{ok:!1,message:"Candidate ID not found"};if(!Re)return{ok:!1,message:"Please select a valid status"};try{if(await G.put(`/v1/workflow/candidates/${Me}/status`,{new_status:Re,notes:"Status updated from recruiter candidate profile"}),await qe(),_&&La(_)===Me){const he=await ln.getCandidateById(Me);k(W=>({...W||{},...he||{}}))}return{ok:!0}}catch(he){return console.error("Failed to update candidate status",he),{ok:!1,message:((Xe=(Ve=he==null?void 0:he.response)==null?void 0:Ve.data)==null?void 0:Xe.detail)||"Failed to update status"}}},Yt=(xe,Re=null)=>{ie(xe),z(Re||null),ve(!0)},be=async()=>{if(!_)return;const xe=La(_);if(xe)try{const Re=await ln.getCandidateById(xe);k(le=>({...le||{},...Re||{}}))}catch(Re){console.error("Failed to refresh candidate detail",Re)}},nt=xe=>{var Re,le,Me,Ve,Xe,he;return{id:(xe==null?void 0:xe.account_manager_id)||((Re=xe==null?void 0:xe.account_manager)==null?void 0:Re.id)||((le=xe==null?void 0:xe.account_manager)==null?void 0:le.am_id)||"",name:(xe==null?void 0:xe.account_manager_name)||((Me=xe==null?void 0:xe.account_manager)==null?void 0:Me.name)||((Ve=xe==null?void 0:xe.account_manager)==null?void 0:Ve.am_name)||"",email:(xe==null?void 0:xe.account_manager_email)||((Xe=xe==null?void 0:xe.account_manager)==null?void 0:Xe.email)||((he=xe==null?void 0:xe.account_manager)==null?void 0:he.am_email)||""}},ze=async xe=>{var Ve,Xe;if(!xe)return xe;const Re=nt(xe);if(Re.id||Re.email||Re.name)return xe;const le=(xe==null?void 0:xe.applied_job_id)||(xe==null?void 0:xe.job_id)||(xe==null?void 0:xe.jobId)||"";if(!le)return xe;const Me=a.current.get(le);if(Me)return{...xe,...Me};try{const he=await G.get(`/v1/recruiter/assigned-jobs/${le}`),W=((Ve=he==null?void 0:he.data)==null?void 0:Ve.account_manager)||{},V={account_manager_id:W.am_id||"",account_manager_name:W.am_name||"",account_manager_email:W.am_email||"",job_title:(xe==null?void 0:xe.job_title)||((Xe=he==null?void 0:he.data)==null?void 0:Xe.title)||""};return a.current.set(le,V),{...xe,...V}}catch{return xe}},ht=async(xe,Re)=>{if(!xe)return;const le=Re==="am"?await ze(xe):xe;fe({open:!0,recipient:Re,candidate:le})},Nt=async xe=>{const Re=Te.candidate,le=La(Re);if(!le)throw new Error("Candidate ID not found");const Me=(xe==null?void 0:xe.deliveryMode)||"email",Ve=Me==="email"||Me==="both",Xe=Me==="portal_note"||Me==="both",he=(xe==null?void 0:xe.recipient)||Te.recipient||"candidate",W=String((xe==null?void 0:xe.subject)||"").trim(),V=String((xe==null?void 0:xe.body)||"").trim(),Q=String((xe==null?void 0:xe.to)||"").trim(),K=String((xe==null?void 0:xe.cc)||"").trim();if(!V)throw new Error("Message body is required");if(Xe){const q=he==="am"?"Account Manager":"Candidate",F=W?`[Message to ${q}] ${W}
${V}`:`[Message to ${q}] ${V}`;await ln.addCandidateNote(le,{note:F})}if(Ve)if(he==="candidate"){const q=new FormData;q.append("subject",W||"Candidate Update"),q.append("message_body",V),q.append("candidate_ids",le),await G.post("/v1/candidates/email/send",q,{headers:{"Content-Type":"multipart/form-data"}})}else{const q=nt(Re),F=Q||q.email;if(!F)throw new Error("Account Manager email is not mapped for this job");const ee=new URLSearchParams;W&&ee.set("subject",W),V&&ee.set("body",V),K&&ee.set("cc",K),window.open(`mailto:${encodeURIComponent(F)}?${ee.toString()}`,"_blank")}await qe(),await be()},Oe=(xe=[])=>{!Array.isArray(xe)||xe.length===0||g(Re=>[...xe,...Re].slice(0,50))};return n.jsxs("div",{className:"candidate-profile",children:[n.jsxs("div",{className:"candidate-profile__header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"candidate-profile__title",children:"Candidate Profiles"}),n.jsx("p",{className:"candidate-profile__subtitle",children:"Every candidate in your pipeline, ready for quick review."})]}),n.jsx("div",{className:"candidate-profile__header-actions",children:n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:qe,children:"Refresh"})})]}),n.jsxs("details",{className:"candidate-profile__import-panel",children:[n.jsxs("summary",{className:"candidate-profile__import-summary",children:[n.jsx("span",{children:"Bulk Import"}),n.jsx("span",{className:"candidate-profile__import-summary-subtext",children:"Resume and CSV tools"})]}),n.jsx("div",{className:"candidate-profile__import-content",children:n.jsx(J7e,{onImportComplete:qe,onLog:Oe})})]}),n.jsxs("div",{className:"candidate-profile__toolbar",children:[n.jsxs("div",{className:"candidate-profile__filters",children:[n.jsx("input",{type:"text",placeholder:"Search name, email, or skills",value:p,onChange:xe=>v(xe.target.value)}),n.jsxs("select",{value:b,onChange:xe=>j(xe.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),He.map(xe=>n.jsx("option",{value:xe.value,children:xe.label},xe.value))]})]}),n.jsxs("div",{className:"candidate-profile__bulk",children:[n.jsxs("div",{className:"candidate-profile__bulk-meta",children:[n.jsx("span",{className:"candidate-profile__bulk-count",children:u?"Loading candidates...":`${Ct.length} candidates`}),n.jsxs("span",{className:"candidate-profile__bulk-count",children:["Selected ",At]})]}),n.jsxs("div",{className:"candidate-profile__bulk-actions",children:[n.jsx("button",{type:"button",className:"candidate-card__btn",onClick:wt,children:"Select All"}),n.jsx("button",{type:"button",className:"candidate-card__btn",onClick:rt,children:"Clear"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--icon",disabled:At===0,onClick:()=>{const xe=Array.from(x)[0],Re=ot.find(({profile:le})=>le.id===xe||le._id===xe);Re&&ht(Re.candidate,"am")},title:"Message AM","aria-label":"Message AM",children:n.jsx(Z7e,{})}),n.jsx("button",{type:"button",className:"candidate-card__btn",disabled:At===0,onClick:()=>{const xe=Array.from(x)[0],Re=ot.find(({profile:le})=>le.id===xe||le._id===xe);Re&&ht(Re.candidate,"candidate")},children:"Message Candidate"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:$t,children:"Export CSV"})]})]})]}),u?n.jsx("div",{className:"candidate-profile__loading",children:"Loading candidates..."}):Ct.length===0?n.jsx("div",{className:"candidate-profile__empty",children:"No candidates found. Try refreshing the list."}):n.jsx("div",{className:"candidate-grid",children:Ct.map(({candidate:xe,profile:Re})=>{const le=Re.id||xe.id;return n.jsx(X8e,{candidate:xe,profile:Re,workflowMeta:eMe(xe,Re),selectable:!0,selected:x.has(le),onSelect:mt,onViewDetails:lr},le)})}),N&&_&&Wt&&n.jsx(W4,{candidate:_,profile:Wt,loading:C,onClose:sr,onPreviewResume:We,onScheduleInterview:De,onShortlist:yt,onMessageAm:xe=>ht(xe,"am"),onMessageCandidate:xe=>ht(xe,"candidate"),onOpenFullProfile:()=>e(`/recruiter/candidate-profile/${La(_)}`),onOpenFeedback:Yt,onSendToAM:()=>ut(_),onUpdateStatus:Lt,workflowStatusOptions:He,hideQuickActions:o,hideStatusControls:!0,hideFeedbackSection:!0,hideSendToAMAction:!0,hideScheduleInterviewAction:!0,hideOpenFullProfileAction:!0}),O&&n.jsx("div",{className:"candidate-preview-modal",onClick:xe=>{xe.target===xe.currentTarget&&et()},children:n.jsxs("div",{className:"candidate-preview",children:[n.jsxs("div",{className:"candidate-preview__header",children:[n.jsx("span",{children:"Resume Preview"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:et,children:"Close"})]}),L?n.jsx("div",{className:"candidate-profile__loading",children:"Loading resume preview..."}):D==="html"?n.jsx("div",{className:"candidate-preview__html",dangerouslySetInnerHTML:{__html:M}}):D==="text"?n.jsx("pre",{className:"candidate-preview__text",children:ne}):D==="image"&&P?n.jsx("img",{className:"candidate-preview__image",src:P,alt:"Resume preview"}):P?n.jsx("iframe",{src:ue||P,title:"Resume preview"}):n.jsx("div",{className:"candidate-profile__empty",children:"Resume preview unavailable."}),H&&n.jsx("div",{className:"candidate-profile__empty",children:H}),n.jsx("div",{className:"candidate-preview__actions",children:n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>window.open(P||S,"_blank"),disabled:!P&&!S,children:"Open in new tab"})})]})}),ke&&je&&n.jsx(yU,{isOpen:ke,candidateId:La(je),candidateName:je.full_name||je.name||"Candidate",initialData:se,onClose:()=>{ve(!1),z(null)},onSuccess:()=>{ve(!1),z(null),qe(),be()}}),Te.open&&Te.candidate&&n.jsx(k7e,{candidate:Te.candidate,recipient:Te.recipient,onClose:()=>fe({open:!1,recipient:"am",candidate:null}),onSend:async xe=>{try{await Nt(xe)}catch(Re){alert((Re==null?void 0:Re.message)||"Failed to send message");return}fe({open:!1,recipient:"am",candidate:null})}}),m.length>0&&n.jsxs("div",{className:"candidate-profile__import-log",children:[n.jsx("h3",{className:"candidate-profile__import-log-title",children:"Recent Imports"}),n.jsx("div",{className:"candidate-profile__import-log-list",children:m.map((xe,Re)=>n.jsxs("div",{className:"candidate-profile__import-log-item",children:[n.jsxs("div",{className:"candidate-profile__import-log-primary",children:[n.jsx("span",{className:"candidate-profile__import-log-name",children:xe.name||"Unknown"}),xe.email&&n.jsx("span",{className:"candidate-profile__import-log-email",children:xe.email})]}),n.jsxs("div",{className:"candidate-profile__import-log-meta",children:[n.jsx("span",{className:"candidate-profile__import-log-pill",children:xe.type==="excel"?"Excel":"Resume"}),n.jsx("span",{className:"candidate-profile__import-log-status",children:xe.status}),xe.resume&&n.jsx("span",{className:"candidate-profile__import-log-file",children:xe.resume})]})]},Re))})]})]})}function tMe(){const[e,t]=y.useState([]),[r,s]=y.useState(new Set),[a,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,f]=y.useState("");y.useEffect(()=>{m()},[]);async function m(){i(!0);try{const p=await ln.listCandidates({limit:100}),v=Array.isArray(p)?p:(p==null?void 0:p.items)??[];t(v)}catch(p){console.error(p)}finally{i(!1)}}function g(p){s(v=>{const b=new Set(v);return b.has(p)?b.delete(p):b.add(p),b})}async function x(){var v;if(selectedIds.size===0){alert("Select at least one candidate");return}const p=new FormData;p.append("subject",l.trim()),p.append("message_body",message.trim()),Array.from(selectedIds).forEach(b=>{p.append("candidate_ids",b)});try{await api.post("/v1/candidates/email/send",p),alert("Emails sent successfully")}catch(b){console.error(((v=b.response)==null?void 0:v.data)||b),alert("Send email failed")}}async function h(){if(!u)return alert("Select status");try{await Promise.all(Array.from(r).map(p=>ln.updateStatus(p,{status:u}))),alert("Status updated"),f(""),m()}catch(p){console.error(p),alert("Bulk status update failed")}}return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Bulk Candidate Actions"}),n.jsx("div",{className:"bg-white rounded shadow p-4",children:a?"Loading...":n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map(p=>{const v=p.id??p._id;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:r.has(v),onChange:()=>g(v)})}),n.jsx("td",{children:p.name||"-"}),n.jsx("td",{children:p.email}),n.jsx("td",{children:p.status})]},v)})})]})}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Bulk Email"}),n.jsx("input",{value:l,onChange:p=>o(p.target.value),placeholder:"Subject",className:"w-full p-2 border rounded"}),n.jsx("textarea",{value:c,onChange:p=>d(p.target.value),placeholder:"Email body",rows:4,className:"w-full p-2 border rounded"}),n.jsx("button",{onClick:x,className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"Send Email"})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-3",children:[n.jsx("h3",{className:"font-semibold",children:"Bulk Status Update"}),n.jsxs("select",{value:u,onChange:p=>f(p.target.value),className:"p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select status"}),n.jsx("option",{value:"screening",children:"Screening"}),n.jsx("option",{value:"shortlisted",children:"Shortlisted"}),n.jsx("option",{value:"rejected",children:"Rejected"})]}),n.jsx("button",{onClick:h,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Update Status"})]})]})}function kI(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState(!1),[i,l]=y.useState(null),[o,c]=y.useState({name:"",email:"",classification:""}),[d,u]=y.useState(new Set),[f,m]=y.useState(1),g=20,[x,h]=y.useState(0),[p,v]=y.useState(""),[b,j]=y.useState(!1),[N,w]=y.useState(!1),[_,k]=y.useState([]),[C,T]=y.useState(""),[P,A]=y.useState(!1),[S,E]=y.useState(!1),[O,I]=y.useState(!1),[L,Z]=y.useState(""),[H,R]=y.useState(""),[D,Y]=y.useState(!1),[M]=ea(),X=M.get("job_id");y.useEffect(()=>{J()},[o,f]),y.useEffect(()=>{ne()},[]);async function ne(){try{const ce=await G.get("/v1/client/master");k(ce.data||[])}catch(ce){console.error("Failed to load clients",ce)}}async function J(){var ce,Ce,Ye,at;a(!0),l(null);try{const ye={q:o.email?o.email.trim():o.name?o.name.trim():void 0,classification:o.classification||void 0,status:"verified",page:f,limit:g},Pe=o.classification?await G.get("/v1/candidates/pool",{params:ye}).then(qe=>qe.data):await ln.listCandidates(ye),We=(Array.isArray(Pe)?Pe:(Pe==null?void 0:Pe.items)??[]).filter(qe=>qe.status==="verified");r(We),h(We.length)}catch(pe){if(console.error(pe),((ce=pe.response)==null?void 0:ce.status)===403)l("Access denied: You don't have permission to view the candidate pool. Please contact your administrator.");else if(((Ce=pe.response)==null?void 0:Ce.status)===404)l("Candidate pool endpoint not found. Please check your configuration.");else{const ye=((at=(Ye=pe.response)==null?void 0:Ye.data)==null?void 0:at.detail)||pe.message||"Unknown error occurred";l(`Failed to load candidates: ${ye}`)}}finally{a(!1)}}const ue=y.useMemo(()=>[...t].sort((ce,Ce)=>new Date(Ce.created_at||Ce.updated_at||0)-new Date(ce.created_at||ce.updated_at||0)),[t]),ke=ue.filter(ce=>d.has(ce.id??ce._id)),ve=ue.length>0&&ue.every(ce=>d.has(ce.id??ce._id));function je(ce){u(Ce=>{const Ye=new Set(Ce);return Ye.has(ce)?Ye.delete(ce):Ye.add(ce),console.log("SELECTED IDS =>",Array.from(Ye)),Ye})}function ie(){u(ve?new Set:new Set(ue.map(ce=>ce.id??ce._id)))}async function se(){if(d.size===0||!p){alert("Select candidates and classification");return}if(window.confirm(`Classify ${d.size} candidate(s) as ${p}?`)){j(!0);try{await Promise.all(Array.from(d).map(ce=>G.put(`/v1/candidates/${ce}/classification`,{classification:p}))),v(""),J()}finally{j(!1)}}}async function z(){var ce;if(!X){alert("Job ID missing");return}if(d.size===0){alert("Select at least one candidate");return}try{await Promise.all(Array.from(d).map(Ce=>G.post(`/v1/jobs/${X}/submissions`,{job_id:X,candidate_id:Ce}))),alert("Candidates successfully sent to Account Manager "),u(new Set)}catch(Ce){console.error("Attach failed:",((ce=Ce.response)==null?void 0:ce.data)||Ce),alert("Failed to attach candidates")}}async function Te(ce){if(d.size===0){alert("Select candidates first");return}if(ce==="employee"&&ke.some(Ce=>Ce.classification!=="payroll")){alert("Only Payroll candidates can be converted to Employee");return}if(ce==="consultant"){if(ke.some(Ce=>!Ce.classification||Ce.classification==="unclassified")){alert("Please classify candidate before converting to Consultant");return}if(!C){alert("Please assign client");return}}if(ce==="consultant"&&!C){alert("Please assign client");return}if(window.confirm(`Convert ${d.size} candidate(s) to ${ce}?`)){w(!0);try{await Promise.all(Array.from(d).map(Ce=>G.post(ce==="employee"?`/v1/employees/from-candidate/${Ce}`:`/v1/consultants/from-candidate/${Ce}`,ce==="consultant"?{client_id:C}:void 0))),u(new Set),J()}finally{w(!1)}}}function fe(){if(ue.length===0)return;const ce=ue.map(at=>({Name:at.full_name||"",Email:at.email||"",Phone:at.phone||"",Job:at.job_title||"",Classification:at.classification||"",Created:at.created_at?new Date(at.created_at).toLocaleDateString():""})),Ce=Ol.json_to_sheet(ce),Ye=Ol.book_new();Ol.book_append_sheet(Ye,Ce,"Candidates"),hp(Ye,"Candidate_Pool.xlsx")}async function Ie(){if(console.log("MERGE CLICKED WITH IDS:",Array.from(d)),d.size<2){alert("Select at least two candidates");return}E(!0);try{await ln.mergeCandidates({candidate_ids:Array.from(d)}),u(new Set),A(!1),await J(),alert("Candidates merged successfully ")}catch(ce){console.error("Merge failed:",ce),alert("Merge failed ")}finally{E(!1)}}return n.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-purple-50 via-purple-25 to-emerald-50 rounded-lg min-h-screen",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Candidate Pool"}),n.jsx("p",{className:"text-purple-100 mt-2",children:"Manage and convert candidates"})]}),n.jsx("button",{onClick:()=>e("/recruiter/assigned-jobs"),className:"px-4 py-2 bg-white text-purple-600 font-semibold rounded hover:bg-gray-100 transition",children:" Back to Assigned Jobs"})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 bg-white rounded-lg shadow-lg p-5 border border-purple-200",children:[n.jsx("button",{onClick:()=>Te("employee"),disabled:!d.size||N,className:"px-4 py-2 bg-gradient-to-r from-purple-100 to-purple-200 text-purple-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Convert  Employee"}),n.jsx("button",{onClick:()=>Te("consultant"),disabled:!d.size||N,className:"px-4 py-2 bg-gradient-to-r from-emerald-100 to-emerald-200 text-emerald-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Convert  Consultant"}),n.jsxs("select",{value:C,onChange:ce=>T(ce.target.value),className:"border-2 border-purple-300 px-3 py-2 rounded bg-white font-medium",children:[n.jsx("option",{value:"",children:"Assign Client"}),_.map(ce=>n.jsx("option",{value:ce.id,children:ce.company_name||ce.name||ce.email},ce.id))]}),n.jsxs("select",{value:p,onChange:ce=>v(ce.target.value),className:"border-2 border-purple-300 px-2 py-1 rounded bg-white font-medium",children:[n.jsx("option",{value:"",children:"Set Classification"}),n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]}),n.jsx("button",{onClick:se,disabled:!d.size||!p||b,className:"px-4 py-2 bg-gradient-to-r from-emerald-100 to-emerald-200 text-emerald-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Confirm Classification"}),X&&n.jsx("button",{onClick:z,disabled:!d.size,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-emerald-500 text-white rounded font-semibold disabled:opacity-40 hover:shadow-md transition",children:"Attach Selected  Job"}),n.jsx("button",{onClick:()=>I(!0),disabled:!d.size,title:"Bulk Email",className:`\r
     p-2 rounded \r
    bg-gradient-to-r from-red-500 to-red-600 text-white \r
    border-2 border-red-600\r
    hover:shadow-md\r
    disabled:opacity-40\r
    transition\r
    font-semibold\r
  `,children:""}),n.jsx("button",{onClick:fe,className:"px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border-2 border-gray-300 rounded font-semibold hover:shadow-md transition",children:"Export"}),n.jsx("button",{onClick:()=>{if(d.size<2){alert("Select at least two candidates");return}window.confirm("Are you sure you want to merge selected candidates?")&&Ie()},disabled:S,className:"px-4 py-2 bg-gradient-to-r from-red-100 to-red-200 text-red-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:S?"Merging...":"Merge Selected"})]}),n.jsx("div",{className:"bg-white border-2 border-purple-200 rounded-lg shadow-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border-collapse",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-50 to-emerald-50 border-b-2 border-purple-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 border-r border-purple-200 text-center w-10",children:n.jsx("input",{type:"checkbox",checked:ve,onChange:ie,className:"cursor-pointer w-4 h-4"})}),n.jsx("th",{className:"p-2 border-r border-purple-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:o.name,onChange:ce=>c(Ce=>({...Ce,name:ce.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none"}),!o.name&&n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none",children:"Name"})]})}),n.jsx("th",{className:"p-2 border-r border-purple-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:o.email,onChange:ce=>c(Ce=>({...Ce,email:ce.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none"}),!o.email&&n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none",children:"Email"})]})}),n.jsx("th",{className:"p-2 border-r border-purple-200 text-xs font-semibold text-center",children:"Phone"}),n.jsx("th",{className:"p-2 border-r border-purple-200 text-xs font-semibold text-center",children:"Applied Job"}),n.jsx("th",{className:"p-2",children:n.jsxs("select",{value:o.classification,onChange:ce=>c(Ce=>({...Ce,classification:ce.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",children:[n.jsx("option",{value:"",children:"Classification"}),n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]})})]})}),n.jsx("tbody",{children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"Loading..."})}):i?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-red-600 font-semibold",children:i})}):ue.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"No candidates found"})}):ue.map((ce,Ce)=>{const Ye=ce.id??ce._id,at=`${Ye}-${Ce}`;return n.jsxs("tr",{className:"border-b border-purple-100 hover:bg-purple-25 transition",children:[n.jsx("td",{className:"p-2 border-r border-purple-100",children:n.jsx("input",{type:"checkbox",checked:d.has(Ye),onChange:()=>je(Ye),className:"cursor-pointer w-4 h-4"})}),n.jsx("td",{className:"p-2 border-r border-purple-100 font-medium text-gray-900",children:ce.full_name}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ce.email}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ce.phone||""}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ce.job_title||""}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`px-2 py-1 bg-gradient-to-r from-purple-50 to-emerald-50/40\r
\r
 text-purple-700 rounded text-xs font-semibold`,children:ce.classification||""})})]},at)})})]})}),n.jsxs("div",{className:"flex justify-between items-center text-sm bg-white rounded-lg shadow-lg p-4 border border-purple-200",children:[n.jsxs("span",{className:"text-gray-700 font-semibold",children:["Showing ",ue.length," of ",x]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>m(ce=>Math.max(1,ce-1)),className:"px-3 py-1 border-2 border-purple-300 rounded font-semibold text-purple-700 hover:bg-purple-50 transition",children:"Prev"}),n.jsx("span",{className:"px-3 py-1 border-2 border-purple-300 rounded font-bold text-purple-700 bg-purple-50",children:f}),n.jsx("button",{onClick:()=>m(ce=>ce+1),className:"px-3 py-1 border-2 border-purple-300 rounded font-semibold text-purple-700 hover:bg-purple-50 transition",children:"Next"})]})]})]})}function rMe(){const[e,t]=y.useState([]),[r,s]=y.useState(!1),[a,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,f]=y.useState([]),[m,g]=y.useState(!1),[x,h]=y.useState(!1),[p,v]=y.useState([]),[b,j]=y.useState(!1),N=["identity","education","employment","address","criminal"],[w,_]=y.useState(["identity","education"]);y.useEffect(()=>{k(),C()},[]),y.useEffect(()=>{c?S(c.id||c._id):v([])},[c]);async function k(){s(!0);try{const L={q:a||void 0,status:l||void 0},Z=await ln.listCandidates(L),H=Array.isArray(Z)?Z:(Z==null?void 0:Z.items)??[];t(H)}catch(L){console.error("fetchCandidates error",L),alert("Failed to load candidates")}finally{s(!1)}}async function C(){var L;g(!0);try{const Z=await G.get("/v1/bgv/vendors");f(((L=Z.data)==null?void 0:L.data)??Z.data??[])}catch(Z){console.error("fetchVendors error",Z),f([])}finally{g(!1)}}function T(L){_(Z=>{const H=new Set(Z);return H.has(L)?H.delete(L):H.add(L),Array.from(H)})}async function P(L){if(L){if(w.length===0){alert("Select at least one check to initiate.");return}if(window.confirm(`Initiate BGV for candidate ${L} with checks: ${w.join(", ")}?`)){h(!0);try{const Z={checks:w};await ln.initiateBgvCheck(L,Z),alert("BGV initiated"),k(),S(L)}catch(Z){console.error("initiateBgv error",Z),alert("Failed to initiate BGV")}finally{h(!1)}}}}async function A(L,Z){if(!L||!Z){alert("Choose a vendor");return}if(window.confirm("Assign vendor for BGV?")){h(!0);try{await ln.assignBgvVendor(L,{vendor_id:Z}),alert("Vendor assigned"),k(),d(H=>H&&{...H,bgv_vendor_id:Z}),S(L)}catch(H){console.error("assignVendor error",H),alert("Failed to assign vendor")}finally{h(!1)}}}async function S(L){if(L){j(!0);try{const Z=await ln.getBgvReports(L),H=Array.isArray(Z)?Z:(Z==null?void 0:Z.items)??[];v(H)}catch(Z){console.error("getBgvReports error",Z),v([])}finally{j(!1)}}}async function E(L,Z,H){if(window.confirm(`Confirm mark candidate as ${Z}?`))try{await G.patch(`/v1/bgv/admin/verify/${L}`,{status:Z,remarks:H}),alert("Final verification updated"),k(),d(R=>R&&{...R,bgv_final_status:Z})}catch(R){console.error("final verify failed",R),alert("Failed to update")}}function O(L){d(L)}function I(){return b?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading reports..."}):!p||p.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No reports yet."}):n.jsx("ul",{className:"space-y-2",children:p.map(L=>{const Z=L.id??L._id??L.report_id,H=L.name||L.type||`Report ${Z}`,R=L.download_url||L.report_url||L.url,D=L.expiry_date||L.expires_at||L.expiry;return n.jsxs("li",{className:"p-2 border rounded flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:H}),n.jsx("div",{className:"text-xs text-gray-500",children:L.status||"unknown status"}),D&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Expiry: ",new Date(D).toLocaleDateString()]})]}),n.jsx("div",{className:"flex flex-col gap-2 items-end",children:R?n.jsx("a",{href:R,target:"_blank",rel:"noreferrer",className:"text-sm text-indigo-600 underline",children:"Open"}):n.jsx("span",{className:"text-xs text-gray-500",children:"No URL"})})]},Z)})})}return n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Background Verification"}),n.jsx("div",{className:"text-sm text-gray-500",children:"BGC initiation, vendor assignment, reports & expiry"})]}),n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("input",{placeholder:"Search name or email...",className:"p-2 border rounded flex-1",value:a,onChange:L=>i(L.target.value)}),n.jsxs("select",{value:l,onChange:L=>o(L.target.value),className:"p-2 border rounded",children:[n.jsx("option",{value:"",children:"All candidates"}),n.jsx("option",{value:"verified",children:"Verified / Eligible"}),n.jsx("option",{value:"bgv_pending",children:"BGV Pending"}),n.jsx("option",{value:"bgv_in_progress",children:"BGV In progress"}),n.jsx("option",{value:"bgv_complete",children:"BGV Complete"})]}),n.jsx("button",{onClick:()=>k(),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Refresh"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Candidates"}),r?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):e.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No candidates found."}):n.jsx("div",{className:"space-y-2",children:e.map(L=>{const Z=L.id??L._id;return n.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:L.full_name||L.email}),n.jsxs("div",{className:"text-xs text-gray-500",children:[L.email,"  ",L.phone||"N/A"]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["BGV status: ",L.bgv_status||L.status||"N/A"]})]}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{onClick:()=>O(L),className:"px-3 py-1 border rounded text-sm",children:"Open"}),n.jsx("button",{onClick:()=>P(Z),disabled:x,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:x?"Starting...":"Initiate BGV"}),n.jsx("div",{children:n.jsxs("select",{defaultValue:"",onChange:H=>{H.target.value&&A(Z,H.target.value)},className:"p-1 border rounded text-sm","aria-label":"Assign vendor",children:[n.jsx("option",{value:"",children:"Assign vendor"}),m?n.jsx("option",{children:"Loading vendors..."}):u.length===0?n.jsx("option",{children:"No vendors"}):u.map(H=>n.jsx("option",{value:H.id||H._id,children:H.name},H.id||H._id))]})})]})]},Z)})})]})}),n.jsxs("aside",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Selected Candidate"}),c?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"font-medium",children:c.name||c.email}),n.jsx("div",{className:"text-xs text-gray-500",children:c.email}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Phone: ",c.phone||"N/A"]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["BGV status:"," ",c.bgv_status||c.status||"N/A"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Select checks"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(L=>n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:w.includes(L),onChange:()=>T(L)}),n.jsx("span",{className:"capitalize",children:L})]},L))}),n.jsx("div",{className:"mt-2",children:n.jsx("button",{onClick:()=>P(c.id||c._id),disabled:x,className:"px-3 py-2 bg-green-600 text-white rounded",children:x?"Initiating...":"Initiate BGV"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Assigned Vendor"}),n.jsx("div",{children:n.jsxs("select",{value:c.bgv_vendor_id||"",onChange:L=>A(c.id||c._id,L.target.value),className:"p-2 border rounded w-full",children:[n.jsx("option",{value:"",children:"Select vendor"}),m?n.jsx("option",{children:"Loading vendors..."}):u.map(L=>n.jsx("option",{value:L.id||L._id,children:L.name||L.company_name},L.id||L._id))]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Reports"}),I()]}),n.jsxs("div",{className:"mt-4 p-3 border rounded",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Final HR Verification"}),n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["Current Status:"," ",n.jsx("span",{className:"font-semibold",children:(c==null?void 0:c.bgv_final_status)||"Not Reviewed"})]}),n.jsx("textarea",{className:"w-full border p-2 rounded mb-2",placeholder:"Remarks (optional)",onChange:L=>c._remarks=L.target.value}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-2 bg-green-600 text-white rounded",onClick:()=>E(c.id||c._id,"verified",c._remarks||""),children:"Approve"}),n.jsx("button",{className:"px-3 py-2 bg-red-600 text-white rounded",onClick:()=>E(c.id||c._id,"failed",c._remarks||""),children:"Reject"})]})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"Select a candidate to see BGV options and reports"})]})]})]})}const nMe=y.createContext({role:null,permissions:[],hasPermission:()=>!1,loading:!0,setPermissions:()=>{}});function SI({children:e}){const[t,r]=y.useState(null),[s,a]=y.useState([]),[i,l]=y.useState(!0),o=async()=>{var d;l(!0);try{const u=await G.get("/auth/me");r(((d=u.data)==null?void 0:d.role)||null);const m=(await G.get("/v1/permissions/me")).data||{},g=(m==null?void 0:m.modules)||{},x=Array.isArray(m)?m.map(h=>typeof h=="string"?h:h==null?void 0:h.key).filter(Boolean):Object.entries(g).flatMap(([h,p])=>(Array.isArray(p)?p:[]).map(v=>`${String(h).toLowerCase()}:${String(v).toLowerCase()}`));a(x)}catch{r(null),a([])}finally{l(!1)}};y.useEffect(()=>{let d=!0;o();const u=Ki.on("permissions:updated",()=>d&&o()),f=Ki.on("role-permissions:updated",()=>d&&o()),m=Ki.on("users:updated",()=>d&&o());return()=>{d=!1,u(),f(),m()}},[]);const c=d=>{const u=String(d||"").toLowerCase();return s.includes(u)};return n.jsx(nMe.Provider,{value:{role:t,permissions:s,hasPermission:c,loading:i,setPermissions:a},children:e})}const pa=e=>{var t;return((t=e.data)==null?void 0:t.data)||e.data},sMe=(e={})=>G.get("/v1/workflow/am/requirements",{params:e}).then(pa),aMe=e=>G.post("/v1/workflow/am/requirements",e).then(pa),iMe=e=>G.post("/v1/workflow/am/requirements/parse-email",{raw_email:e}).then(pa),lMe=(e,t)=>G.post(`/v1/workflow/am/requirements/${e}/assign`,t).then(pa),oMe=e=>G.get(`/v1/workflow/am/requirements/${e}`).then(pa),cMe=(e,t)=>G.post(`/v1/workflow/am/submissions/${e}/stage`,t).then(pa),dMe=e=>G.post(`/v1/workflow/am/interviews/${e}/client-informed`).then(pa),uMe=(e="assigned")=>G.get("/v1/workflow/recruiter/requirements",{params:{scope:e}}).then(pa),fMe=e=>G.get(`/v1/workflow/recruiter/requirements/${e}`).then(pa),mMe=(e,t=0)=>G.post(`/v1/workflow/recruiter/requirements/${e}/match`,{min_score:t}).then(pa),hMe=(e,t,r)=>G.post(`/v1/workflow/recruiter/requirements/${e}/candidates/${t}/call-note`,r).then(pa),pMe=(e,t)=>G.post(`/v1/workflow/recruiter/requirements/${e}/submit`,t).then(pa),xMe=e=>G.get(`/v1/workflow/recruiter/requirements/${e}/submissions`).then(pa),gMe=(e,t)=>G.post(`/v1/workflow/recruiter/submissions/${e}/schedule-interview`,t).then(pa),yMe=(e,t)=>G.post(`/v1/workflow/recruiter/submissions/${e}/interview-notes`,t).then(pa),Cs={getAmRequirements:sMe,createRequirement:aMe,parseRequirementEmail:iMe,assignRecruiters:lMe,getAmRequirementDetail:oMe,updateSubmissionStage:cMe,markClientInformed:dMe,getRecruiterRequirements:uMe,getRecruiterRequirementDetail:fMe,runMatch:mMe,addCallNote:hMe,submitCandidates:pMe,getRecruiterSubmissions:xMe,scheduleInterview:gMe,addInterviewNotes:yMe},vMe=()=>{const[e,t]=y.useState([]),[r,s]=y.useState(!1),[a,i]=y.useState(null),l=async()=>{s(!0),i(null);try{const o=await Cs.getRecruiterRequirements("assigned");t(o.requirements||[])}catch(o){i(o.message||"Failed to fetch requirements")}finally{s(!1)}};return y.useEffect(()=>{l()},[]),{requirements:e,loading:r,error:a,refetch:l}},bMe=()=>{const[e,t]=y.useState([]),[r,s]=y.useState(!1),[a,i]=y.useState(null),l=async()=>{var o,c,d,u,f,m,g,x,h;s(!0),i(null);try{const p=await Ep(),v=((o=p==null?void 0:p.data)==null?void 0:o.jobs)||((d=(c=p==null?void 0:p.data)==null?void 0:c.data)==null?void 0:d.jobs)||((u=p==null?void 0:p.data)==null?void 0:u.requirements)||((m=(f=p==null?void 0:p.data)==null?void 0:f.data)==null?void 0:m.requirements)||[];t(v)}catch(p){((g=p==null?void 0:p.response)==null?void 0:g.status)===403?i("You do not have access to assigned jobs for this account."):i(((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.detail)||p.message||"Failed to fetch assigned jobs")}finally{s(!1)}};return y.useEffect(()=>{l()},[]),{jobs:e,loading:r,error:a,refetch:l}},GW=y.forwardRef(({notifications:e,loading:t,unreadCount:r,onMarkAsRead:s,onMarkAllAsRead:a,onNotificationClick:i,onClose:l},o)=>{const c=h=>{const p=new Date,v=new Date(h),b=Math.floor((p-v)/(1e3*60*60));return b<1?`${Math.floor((p-v)/6e4)}m ago`:b<24?`${b}h ago`:`${Math.floor(b/24)}d ago`},d=h=>{switch(h){case"urgent":return n.jsx(yf,{className:"w-4 h-4 text-red-500"});case"high":return n.jsx(yf,{className:"w-4 h-4 text-amber-500"});default:return n.jsx(pn,{className:"w-4 h-4 text-blue-500"})}},u=(h,p)=>{if(p)return"border-l-4 border-gray-300";switch(h){case"urgent":return"border-l-4 border-red-500";case"high":return"border-l-4 border-amber-500";default:return"border-l-4 border-blue-500"}},f=h=>{var p;return String(((p=h==null?void 0:h.action)==null?void 0:p.type)||"").trim().toLowerCase()},m=h=>{var v,b;const p=f(h);return p==="view_interview_calendar"?!0:p!=="schedule_interview"?!1:!!((v=h==null?void 0:h.action)!=null&&v.candidate_id||(b=h==null?void 0:h.candidate)!=null&&b.id||h!=null&&h.reference_id)},g=h=>{const p=f(h);return p==="view_interview_calendar"?"Open calendar":p==="schedule_interview"?"Open scheduling":""},x=h=>m(h)?n.jsx(Ya,{className:"w-5 h-5 text-violet-600"}):(h==null?void 0:h.type)==="passive_requirement"?n.jsx(yf,{className:"w-5 h-5 text-amber-600"}):n.jsx(pn,{className:"w-5 h-5 text-blue-600"});return t?n.jsx("div",{ref:o,className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"flex items-center justify-center h-20",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})})})}):n.jsxs("div",{ref:o,className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 flex flex-col",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-50 rounded-t-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"}),r>0&&n.jsxs("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:[r," unread"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[r>0&&n.jsx("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"}),n.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:n.jsx(_r,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto max-h-80",children:e.length===0?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(ep,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-gray-500",children:"All caught up!"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No notifications to show"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:e.map(h=>{const p=m(h),v=g(h);return n.jsx("div",{onClick:()=>{p&&i&&i(h)},className:`p-3 hover:bg-gray-50 transition-colors ${u(h.priority,h.is_read)} ${h.is_read?"bg-white":"bg-blue-50"} ${p?"cursor-pointer":""}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:x(h)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:h.title}),n.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:h.message}),h.candidate&&n.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Candidate:"," ",n.jsx("span",{className:"font-medium text-gray-800",children:h.candidate.full_name||h.candidate.public_id||h.candidate.id})]}),h.requirement&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:[n.jsxs("p",{className:"font-medium text-gray-700",children:["Req: ",h.requirement.code||"N/A"]}),n.jsx("p",{className:"text-gray-600 truncate",children:h.requirement.title}),h.requirement.last_activity_at&&n.jsxs("p",{className:"text-gray-500 mt-1",children:["Last activity:"," ",c(h.requirement.last_activity_at)]})]})]}),n.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[d(h.priority),!h.is_read&&n.jsx("button",{onClick:b=>{b.stopPropagation(),s(h.id)},className:"p-1 hover:bg-blue-100 rounded",title:"Mark as read",children:n.jsx(il,{className:"w-3 h-3 text-blue-600"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:c(h.created_at)}),h.is_read&&h.read_at&&n.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[n.jsx(ep,{className:"w-3 h-3 mr-1"}),"Read"]}),p&&v&&n.jsx("span",{className:"text-xs text-violet-600 font-medium",children:v})]})]})]})},h.id)})})}),e.length>0&&n.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Showing ",e.length," recent notifications"]})})]})});GW.displayName="NotificationPanel";const JW=()=>{const e=Tt(),t=ys(),[r,s]=y.useState([]),[a,i]=y.useState(0),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,f]=y.useState(!1),[m,g]=y.useState(!1),x=y.useRef(null),h=y.useRef(null),p=async(A,S,E={})=>{var O;try{return await id.get(A,E)}catch(I){if(((O=I==null?void 0:I.response)==null?void 0:O.status)===404&&S)return id.get(S,E);throw I}},v=async(A,S,E={})=>{var O;try{return await id.post(A,E)}catch(I){if(((O=I==null?void 0:I.response)==null?void 0:O.status)===404&&S)return id.post(S,E);throw I}},b=async()=>{var A;if(!m)try{const E=(await p("/v1/notifications/summary","/api/notifications/summary")).data;i(Number((E==null?void 0:E.total_unread)||0)),d(!!(E!=null&&E.has_urgent)),g(!1),l&&await j()}catch(S){if(((A=S==null?void 0:S.response)==null?void 0:A.status)===403){g(!0),i(0),d(!1),s([]);return}console.error("Failed to fetch notification summary:",S)}},j=async()=>{var A,S,E;if(!m){f(!0);try{const O=await p("/v1/notifications","/api/notifications",{params:{limit:50,unread_only:!1}}),I=((A=O==null?void 0:O.data)==null?void 0:A.notifications)||((S=O==null?void 0:O.data)==null?void 0:S.data)||(O==null?void 0:O.data)||[];s(Array.isArray(I)?I:[])}catch(O){if(((E=O==null?void 0:O.response)==null?void 0:E.status)===403){g(!0),s([]);return}console.error("Failed to fetch notifications:",O)}finally{f(!1)}}},N=async A=>{try{await v(`/v1/notifications/${A}/mark-read`,`/api/notifications/${A}/mark-read`),s(S=>S.map(E=>E.id===A?{...E,is_read:!0,read_at:new Date().toISOString()}:E)),await b()}catch(S){console.error("Failed to mark notification as read:",S)}},w=async()=>{try{await v("/v1/notifications/mark-all-read","/api/notifications/mark-all-read"),s(A=>A.map(S=>({...S,is_read:!0,read_at:new Date().toISOString()}))),i(0),d(!1)}catch(A){console.error("Failed to mark all notifications as read:",A)}},_=()=>{o(!l)},k=(A,S)=>{var H,R,D,Y,M;const E=new URLSearchParams,O=((H=A==null?void 0:A.action)==null?void 0:H.candidate_id)||((R=A==null?void 0:A.candidate)==null?void 0:R.id)||(A==null?void 0:A.reference_id);O&&E.set("candidate_id",String(O));const I=((D=A==null?void 0:A.action)==null?void 0:D.requirement_id)||((Y=A==null?void 0:A.requirement)==null?void 0:Y.id);I&&E.set("requirement_id",String(I));const L=(M=A==null?void 0:A.action)==null?void 0:M.recruiter_name;L&&E.set("recruiter_name",String(L));const Z=E.toString();return Z?`${S}?${Z}`:S},C=A=>{var R,D,Y,M,X,ne,J,ue,ke,ve;if(!A||typeof A!="object")return"";const S=(R=A.action)==null?void 0:R.type;if(S==="view_interview_calendar"){const je=t.pathname.startsWith("/account-manager")?"/account-manager/interview-calendar":"/recruiter/interviews/calendar";return k(A,je)}if(S!=="schedule_interview")return"";if(t.pathname.startsWith("/account-manager"))return k(A,"/account-manager/interview-calendar");const E=((D=A.action)==null?void 0:D.candidate_id)||((Y=A.candidate)==null?void 0:Y.id)||A.reference_id;if(!E)return"";const O=new URLSearchParams;O.set("candidate_id",String(E));const I=((M=A.action)==null?void 0:M.job_id)||((X=A.requirement)==null?void 0:X.job_id)||((ne=A.action)==null?void 0:ne.requirement_id)||((J=A.requirement)==null?void 0:J.id);I&&O.set("jobId",String(I));const L=(ue=A.candidate)==null?void 0:ue.full_name;L&&O.set("candidate_name",String(L));const Z=(ke=A.requirement)==null?void 0:ke.title;Z&&O.set("jobTitle",String(Z));const H=(ve=A.requirement)==null?void 0:ve.code;return H&&O.set("requirement_code",String(H)),O.set("tab","sent_to_am"),`/recruiter/candidate-workflow?${O.toString()}`},T=async A=>{if(!A)return;!A.is_read&&A.id&&await N(A.id);const S=C(A);S&&(o(!1),e(S))};y.useEffect(()=>{const A=S=>{x.current&&!x.current.contains(S.target)&&h.current&&!h.current.contains(S.target)&&o(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]),y.useEffect(()=>{l&&j()},[l,m]),y.useEffect(()=>{if(m)return;b();const A=setInterval(b,6e4);return()=>clearInterval(A)},[m]);const P=()=>{let A="relative p-2 rounded-lg transition-all duration-200 cursor-pointer ";return c?A+"text-red-500 hover:bg-red-50 animate-pulse":a>0?A+"text-amber-500 hover:bg-amber-50":A+"text-gray-400 hover:bg-gray-100"};return n.jsxs("div",{className:"relative",children:[n.jsxs("div",{ref:h,onClick:_,className:P(),title:`${a} unread notifications`,children:[c?n.jsx(xCe,{className:"w-6 h-6"}):n.jsx(BC,{className:"w-6 h-6"}),a>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:a>99?"99+":a})]}),l&&n.jsx(GW,{ref:x,notifications:r,loading:u,unreadCount:a,onMarkAsRead:N,onMarkAllAsRead:w,onNotificationClick:T,onClose:()=>o(!1)})]})},jMe=()=>{const[e,t]=y.useState({active_requirements:0,passive_requirements:0,total_requirements:0,passive_details:[]}),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState(!1),c=async()=>{var p;const g=await id.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),x=((p=g==null?void 0:g.data)==null?void 0:p.data)||(g==null?void 0:g.data)||{},h=Array.isArray(x==null?void 0:x.requirements)?x.requirements:[];return{active_requirements:h.length,passive_requirements:0,total_requirements:h.length,passive_details:[]}},d=async()=>{var g;try{const x=await id.get("/v1/recruiter/requirements/summary");return(x==null?void 0:x.data)||{}}catch(x){if(((g=x==null?void 0:x.response)==null?void 0:g.status)===404){const h=await id.get("/api/recruiter/requirements/summary");return(h==null?void 0:h.data)||{}}throw x}},u=async()=>{var g;try{const x=await d();t(h=>({...h,...x})),o(!1),i(new Date)}catch(x){if(((g=x==null?void 0:x.response)==null?void 0:g.status)===403){o(!0);try{const h=await c();t(h),i(new Date)}catch{}return}console.error("Failed to fetch requirements summary:",x)}finally{s(!1)}},f=async()=>{s(!0),await u()};y.useEffect(()=>{if(l)return;u();const g=setInterval(u,12e4);return()=>clearInterval(g)},[l]);const m=g=>{const x=new Date,h=new Date(g),p=Math.floor((x-h)/(1e3*60*60));return p<1?`${Math.floor((x-h)/6e4)}m ago`:p<24?`${p}h ago`:`${Math.floor(p/24)}d ago`};return r&&!a?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(g=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]},g))}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(sU,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Active Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.active_requirements})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requirements with recent activity"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-amber-500",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:n.jsx(yf,{className:"w-6 h-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Passive Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.passive_requirements})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Inactive for 48+ hours"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(pn,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Total Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.total_requirements})]})]}),n.jsx("button",{onClick:f,children:n.jsx(jo,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),a&&n.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Updated ",m(a.toISOString())]})]})]})})};function lg({title:e,value:t,trend:r,color:s="blue"}){const a={blue:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-300",green:"bg-gradient-to-br from-emerald-50 to-emerald-50 border-emerald-200",red:"bg-gradient-to-br from-red-50 to-red-100 border-red-300",yellow:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-300"};return n.jsxs("div",{className:`border-2 p-4 rounded-lg shadow-md ${a[s]} hover:shadow-lg transition`,children:[n.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:e}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mt-2",children:t}),r&&n.jsxs("p",{className:`text-xs mt-1 font-semibold ${r>0?"text-emerald-400":"text-red-600"}`,children:[r>0?"":""," ",Math.abs(r),"% from last week"]})]})}function _Me({data:e,onStageClick:t=null}){const r=[{key:"applied",label:"Applied",color:"from-blue-500 to-blue-600"},{key:"screened",label:"Screened",color:"from-green-500 to-green-600"},{key:"submitted",label:"Submitted",color:"from-purple-500 to-purple-600"},{key:"interview",label:"Interview",color:"from-orange-500 to-orange-600"},{key:"offer",label:"Offer",color:"from-pink-500 to-pink-600"},{key:"hired",label:"Hired",color:"from-emerald-500 to-emerald-600"}],s=Math.max(...Object.values(e),10),a=Object.values(e).reduce((i,l)=>i+l,0);return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Recruitment Pipeline"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Total:"," ",n.jsx("span",{className:"font-semibold text-purple-600",children:a})]})]}),n.jsx("div",{className:"space-y-3",children:r.map(i=>{const l=e[i.key]||0,o=a>0?Math.round(l/a*100):0;return n.jsxs("div",{className:`${t?"cursor-pointer hover:bg-gray-50":""} p-2 rounded transition-colors`,onClick:()=>t&&t(i.key),children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsxs("span",{className:"font-medium text-gray-700",children:[i.label,i.key==="submitted"&&n.jsx("span",{className:"ml-1 text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full",children:"NEW"})]}),n.jsxs("span",{className:"text-purple-600 font-semibold",children:[l," (",o,"%)"]})]}),n.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full bg-gradient-to-r ${i.color} transition-all duration-300`,style:{width:`${l/s*100}%`}})})]},i.key)})}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:n.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[n.jsx("span",{children:"Pipeline Health:"}),n.jsx("span",{className:`font-semibold ${e.submitted>0?"text-green-600":"text-yellow-600"}`,children:e.submitted>0?"Active Submissions":"No Active Submissions"})]})})]})}function wMe({days:e}){const t=e<=14?"On Track":e<=21?"At Risk":"Critical",r=e<=14?"text-emerald-300":e<=21?"text-amber-600":"text-red-600";return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200 hover:shadow-xl transition",children:[n.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Avg. Time-to-Fill"}),n.jsxs("p",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mt-2",children:[e," days"]}),n.jsxs("p",{className:`text-sm font-semibold mt-2 ${r}`,children:[" ",t]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Target: 14 days"})]})}function og({icon:e,label:t,onClick:r,color:s="blue"}){const i={blue:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",border:"border-purple-300",text:"text-purple-700"},green:{bg:"bg-gradient-to-br from-slate-50 to-gray-50",border:"border-slate-200",text:"text-slate-600"},purple:{bg:"bg-gradient-to-br from-purple-100 to-purple-50",border:"border-purple-300",text:"text-purple-700"}}[s];return n.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition hover:shadow-md ${i.bg} ${i.border} ${i.text}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:e}),n.jsx("span",{className:"text-sm font-medium text-center",children:t})]})}function $_(){const e=Tt(),{requirements:t}=vMe(),[r,s]=y.useState(!0),[a,i]=y.useState([]),[l,o]=y.useState({}),[c,d]=y.useState(0),[u,f]=y.useState([]),[m,g]=y.useState([]),[x,h]=y.useState({applied:0,screened:0,submitted:0,interview:0,offer:0,hired:0}),[p,v]=y.useState(18),[b,j]=y.useState(null),[N,w]=y.useState(null),[_,k]=y.useState(!0),C=async()=>{try{const I=await G.get("/v1/dashboard/recruiter/pipeline");h({applied:I.data.applied||0,screened:I.data.screened||0,submitted:I.data.submitted||0,interview:I.data.interview||0,offer:I.data.offer||0,hired:I.data.hired||0}),j(new Date)}catch(I){console.error("Failed to fetch pipeline data:",I)}},T=I=>{e(`/candidates?status=${I}`)};if(y.useEffect(()=>{let I=!0;const L=H=>Array.isArray(H)?H:[];async function Z(){var H,R,D,Y,M;try{const X=await Ep(),ne=Array.isArray((H=X==null?void 0:X.data)==null?void 0:H.jobs)?X.data.jobs:[];i(ne),await C();const J={};await Promise.all(ne.map(async ue=>{var ke,ve,je,ie;try{const se=await G.get(`/v1/jobs/${ue.id}/candidates`);J[ue.id]=((ke=se.data)==null?void 0:ke.total_candidates)??((ve=se.data)==null?void 0:ve.total)??((ie=(je=se.data)==null?void 0:je.data)==null?void 0:ie.length)??0}catch{J[ue.id]=0}})),o(J);try{const ue=await G.get("/workflow/candidates",{params:{limit:500}}),ke=ue==null?void 0:ue.data,ve=Array.isArray(ke)?ke:(ke==null?void 0:ke.candidates)||(ke==null?void 0:ke.items)||(ke==null?void 0:ke.data)||[];d(Array.isArray(ve)?ve.length:0)}catch{try{const ue=await G.get("/v1/candidates"),ke=ue==null?void 0:ue.data,ve=Array.isArray(ke)?ke:(ke==null?void 0:ke.items)||(ke==null?void 0:ke.data)||[];d(Array.isArray(ve)?ve.length:0)}catch{d(0)}}try{const ue=await G.get("/v1/interviews",{params:{assigned_to:"me"}});f(L(ue.data))}catch(ue){console.error("Failed to fetch interviews:",ue),f([])}try{let ue;try{ue=await G.get("/api/notifications",{params:{limit:10,unread_only:!1}}),g(L(((R=ue==null?void 0:ue.data)==null?void 0:R.notifications)||((D=ue==null?void 0:ue.data)==null?void 0:D.data)||[]))}catch{ue=await G.get("/v1/notifications"),g(L(((Y=ue==null?void 0:ue.data)==null?void 0:Y.notifications)||((M=ue==null?void 0:ue.data)==null?void 0:M.data)||[]))}}catch{g([])}v(18)}catch(X){console.error("Recruiter dashboard error:",X)}finally{I&&s(!1)}}return Z(),()=>I=!1},[]),y.useEffect(()=>{if(!_)return;const I=setInterval(()=>{C()},3e4);return w(I),()=>{I&&clearInterval(I)}},[_]),y.useEffect(()=>()=>{N&&clearInterval(N)},[N]),r)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin mb-4",children:""}),n.jsx("p",{className:"text-gray-600",children:"Loading Recruiter Dashboard"})]})});const P=a.length,A=Object.values(l).reduce((I,L)=>I+L,0);a.filter(I=>I.status==="active").length;const S=u.filter(I=>{var R,D;const L=(((R=I==null?void 0:I.candidate)==null?void 0:R.full_name)||"").trim(),Z=(((D=I==null?void 0:I.job)==null?void 0:D.title)||"").trim(),H=I==null?void 0:I.scheduled_at;return!(!L||!Z||!H||L.toLowerCase()==="unknown"||Z.toLowerCase()==="position tbd")}),E=S.length,O=S.filter(I=>{const L=new Date().toDateString();return new Date(I.scheduled_at).toDateString()===L}).length;return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6 bg-gradient-to-br from-purple-50 via-purple-25 to-purple-50 rounded-lg",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Recruiter Dashboard"}),n.jsx("p",{className:"text-purple-100 mt-2 text-lg",children:"Manage your recruitment pipeline and candidates"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(JW,{})})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(lg,{title:"Assigned Jobs",value:P,color:"blue",trend:5}),n.jsx(lg,{title:"Total Candidates",value:A,color:"green",trend:12}),n.jsx(lg,{title:"Interviews Today",value:O,color:"purple"}),n.jsx(lg,{title:"Requirements Assigned",value:t.length,color:"yellow",trend:t.length>0?10:0})]}),n.jsx(jMe,{}),t.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"font-bold text-gray-900 text-lg",children:["Assigned Requirements (",t.length,")"]}),n.jsx("button",{onClick:()=>e("/recruiter/requirements"),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold",children:"View All "})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(0,3).map(I=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer",onClick:()=>e(`/recruiter/requirements/${I.id}`),children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:I.title}),n.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[I.positions_count||1," open"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:I.title||"Position"}),I.skills_mandatory&&I.skills_mandatory.length>0&&n.jsxs("div",{className:"flex gap-2 flex-wrap mb-3",children:[I.skills_mandatory.slice(0,3).map((L,Z)=>n.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:L},Z)),I.skills_mandatory.length>3&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",I.skills_mandatory.length-3," more"]})]}),n.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[n.jsxs("span",{children:["Client: ",I.client_name||"Client"]}),n.jsx("button",{onClick:L=>{L.stopPropagation(),e(`/recruiter/requirements/${I.id}`)},className:"text-blue-600 hover:text-blue-700 font-semibold",children:"View Details"})]})]},I.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${b&&Date.now()-b<6e4?"bg-green-500":"bg-yellow-500"} animate-pulse`}),n.jsx("span",{className:"text-sm text-gray-600",children:b?`Last updated: ${b.toLocaleTimeString()}`:"Loading..."})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>k(!_),className:`text-xs px-2 py-1 rounded ${_?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:["Auto-refresh ",_?"ON":"OFF"]}),n.jsx("button",{onClick:C,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:" Refresh Now"})]})]})}),n.jsx(_Me,{data:x,onStageClick:T})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(wMe,{days:p}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsx("h4",{className:"font-bold text-lg text-gray-800 mb-4",children:"Pipeline Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("/candidates?status=screened"),className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition",children:[" Review Screened Candidates (",x.screened,")"]}),n.jsxs("button",{onClick:()=>e("/candidates?status=submitted"),className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition",children:[" Track Submitted Candidates (",x.submitted,")"]}),n.jsxs("button",{onClick:()=>e("/candidates?status=interview"),className:"w-full px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition",children:[" Manage Interviews (",x.interview,")"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-4",children:[n.jsx(og,{icon:"",label:"Assigned Jobs",onClick:()=>e("/recruiter/assigned-jobs"),color:"green"}),n.jsx(og,{icon:"",label:"Schedule Interview",onClick:()=>e("/recruiter/interviews"),color:"purple"}),n.jsx(og,{icon:"",label:"View Reports",onClick:()=>e("/reports"),color:"purple"}),n.jsx(og,{icon:n.jsx(cn,{size:22}),label:"Trackers",onClick:()=>e("/recruiter/trackers"),color:"blue"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsxs("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-4",children:["Today's Interviews (",O,")"]}),E>0?n.jsx("div",{className:"space-y-3",children:S.slice(0,5).map(I=>n.jsxs("div",{className:"flex items-start justify-between p-3 border rounded hover:bg-gray-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:I.candidate.full_name}),n.jsx("p",{className:"text-sm text-gray-600",children:I.job.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(I.scheduled_at).toLocaleTimeString()})]}),n.jsx("span",{className:`px-3 py-1 text-xs rounded font-medium ${I.status==="completed"?"bg-green-100 text-green-700":I.status==="scheduled"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:I.status||"pending"})]},I.id))}):n.jsx("p",{className:"text-gray-600 text-center py-4",children:"No interviews scheduled for today"})]}),m.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Recent Notifications"}),n.jsx("div",{className:"space-y-2",children:m.slice(0,5).map((I,L)=>n.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:[n.jsx("p",{className:"font-medium text-blue-900",children:I.title||I.message}),n.jsx("p",{className:"text-xs text-blue-700 mt-1",children:I.created_at?new Date(I.created_at).toLocaleString():""})]},L))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"font-bold text-gray-900 text-lg flex items-center gap-2",children:[n.jsx(cn,{size:20,className:"text-purple-600"}),"Trackers"]}),n.jsx("button",{onClick:()=>e("/recruiter/trackers"),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold",children:"Go to Trackers "})]}),n.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Manage and export your daily recruitment tracker in spreadsheet format."}),n.jsxs("button",{onClick:()=>e("/recruiter/trackers"),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition text-sm font-semibold",children:[n.jsx(cn,{size:16}),"Open Trackers"]})]})]})}const CI=()=>{const e=Tt(),[t,r]=y.useState("assigned"),[s,a]=y.useState([]),[i,l]=y.useState(!1),[o,c]=y.useState(""),d=async u=>{l(!0),c("");try{const f=await Cs.getRecruiterRequirements(u);a(f.requirements||[])}catch{c("Failed to fetch requirements")}finally{l(!1)}};return y.useEffect(()=>{d(t)},[t]),i?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Requirements"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage assigned requirements and view all open requirements."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:`px-4 py-2 rounded ${t==="assigned"?"bg-blue-600 text-white":"bg-white border"}`,onClick:()=>r("assigned"),children:"My Assigned"}),n.jsx("button",{className:`px-4 py-2 rounded ${t==="all"?"bg-blue-600 text-white":"bg-white border"}`,onClick:()=>r("all"),children:"All Requirements"})]})]}),o&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-red-800",children:o})}),s.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[n.jsx(ua,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No requirements"}),n.jsx("p",{className:"text-gray-600 mt-2",children:t==="assigned"?"No assigned requirements yet.":"No open requirements available."})]}):n.jsx("div",{className:"grid gap-4",children:s.map(u=>{var f;return n.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:u.title}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Req ID: ",u.requirement_code||u.id]})]}),n.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:u.status})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Hr,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Positions"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.positions_count||1})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Oc,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Location"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:((f=u.location_details)==null?void 0:f.city)||"Any"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(ua,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Experience"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[u.experience_min||0,"+ yrs"]})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(u.skills_mandatory||[]).slice(0,6).map((m,g)=>n.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:m},g))})]}),n.jsxs("div",{className:"flex justify-between items-end pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:["Client: ",n.jsx("strong",{className:"ml-1",children:u.client_name||""})]}),t==="assigned"?n.jsxs("button",{onClick:()=>e(`/recruiter/requirements/${u.id}`),className:"flex items-center text-blue-600 hover:text-blue-700",children:["Find Matching Candidates",n.jsx(S1,{className:"h-4 w-4 ml-1"})]}):n.jsx("span",{className:"text-xs text-gray-400",children:"Read-only"})]})]})},u.id)})})]})})},KW=new Set(["selected","rejected","negotiation","hired","offer_declined"]),cg=({stage:e})=>{const t=e?e.replace(/_/g," "):"",r=KW.has(e)?"bg-gray-100 text-gray-700":e==="client_shortlisted"?"bg-emerald-100 text-emerald-700":e==="interview_scheduled"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700";return n.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:t})},NMe=({open:e,title:t,onClose:r,onSubmit:s,fields:a,setFields:i})=>e?n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t}),n.jsx("button",{className:"text-gray-500",onClick:r,children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",className:"w-full p-2 border rounded",value:a.rating,onChange:l=>i(o=>({...o,rating:Number(l.target.value)}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Strengths"}),n.jsx("input",{className:"w-full p-2 border rounded",value:a.strengths,onChange:l=>i(o=>({...o,strengths:l.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Concerns"}),n.jsx("input",{className:"w-full p-2 border rounded",value:a.concerns,onChange:l=>i(o=>({...o,concerns:l.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:a.free_text,onChange:l=>i(o=>({...o,free_text:l.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:r,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:s,children:"Save"})]})]})}):null,kMe=({open:e,onClose:t,onSubmit:r,fields:s,setFields:a})=>e?n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Schedule Interview"}),n.jsx("button",{className:"text-gray-500",onClick:t,children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Date"}),n.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:s.interview_date,onChange:i=>a(l=>({...l,interview_date:i.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Time"}),n.jsx("input",{type:"time",className:"w-full p-2 border rounded",value:s.interview_time,onChange:i=>a(l=>({...l,interview_time:i.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Mode"}),n.jsxs("select",{className:"w-full p-2 border rounded",value:s.interview_mode,onChange:i=>a(l=>({...l,interview_mode:i.target.value})),children:[n.jsx("option",{value:"in_person",children:"In person"}),n.jsx("option",{value:"video",children:"Video"}),n.jsx("option",{value:"phone",children:"Phone"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Interviewer Name"}),n.jsx("input",{className:"w-full p-2 border rounded",value:s.interviewer_name,onChange:i=>a(l=>({...l,interviewer_name:i.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Location / Link"}),n.jsx("input",{className:"w-full p-2 border rounded",value:s.location_or_link,onChange:i=>a(l=>({...l,location_or_link:i.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded",value:s.notes,onChange:i=>a(l=>({...l,notes:i.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:t,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:r,children:"Schedule"})]})]})}):null,AI=()=>{var R;const{requirementId:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState(!0),[u,f]=y.useState("matched"),[m,g]=y.useState(0),[x,h]=y.useState(new Set),[p,v]=y.useState({open:!1,candidate:null,mode:"call"}),[b,j]=y.useState({rating:4,strengths:"",concerns:"",free_text:""}),[N,w]=y.useState({open:!1,submission:null}),[_,k]=y.useState({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""}),C=async()=>{d(!0);try{const D=await Cs.getRecruiterRequirementDetail(e);s(D);const Y=await Cs.getRecruiterSubmissions(e);i(Y.submissions||[])}catch(D){console.error("Failed to load requirement",D)}finally{d(!1)}};y.useEffect(()=>{C()},[e]);const T=async()=>{try{const D=await Cs.runMatch(e,m);o(D.candidates||[])}catch(D){console.error("Match failed",D),alert("Match failed")}},P=y.useMemo(()=>{const D={};return a.forEach(Y=>{var M;(M=Y.notes)!=null&&M.some(X=>X.note_stage==="call_feedback")&&(D[Y.candidate_id]=!0)}),D},[a]),A=D=>{h(Y=>{const M=new Set(Y);return M.has(D)?M.delete(D):M.add(D),M})},S=async()=>{if(x.size===0){alert("Select candidates with call notes");return}try{await Cs.submitCandidates(e,{candidate_ids:Array.from(x)}),h(new Set),C()}catch(D){console.error("Submit failed",D),alert("Submit failed")}},E=async()=>{if(p.candidate)try{p.mode==="call"?await Cs.addCallNote(e,p.candidate.candidate_id,b):await Cs.addInterviewNotes(p.candidate.id,b),v({open:!1,candidate:null,mode:"call"}),j({rating:4,strengths:"",concerns:"",free_text:""}),C()}catch(D){console.error("Failed to add note",D),alert("Failed to add note")}},O=async()=>{if(N.submission){if(!_.interview_date||!_.interview_time){alert("Please provide interview date and time");return}try{await Cs.scheduleInterview(N.submission.id,_),w({open:!1,submission:null}),k({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""}),C()}catch(D){console.error("Schedule failed",D),alert("Schedule failed")}}},I=r==null?void 0:r.requirement,L=r==null?void 0:r.assignment,Z=a.filter(D=>["client_shortlisted","interview_scheduled","interview_completed"].includes(D.stage)),H=a.filter(D=>KW.has(D.stage));return c?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):I?n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("button",{onClick:()=>t("/recruiter/requirements"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[n.jsx(yR,{className:"h-5 w-5 mr-1"}),"Back to Requirements"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{className:"col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:I.title}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Client: ",I.client_name]})]}),n.jsx(cg,{stage:I.status})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 pb-6 border-b",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Positions"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:I.positions_count||1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Experience"}),n.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[I.experience_min||0,"+"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:((R=I.location_details)==null?void 0:R.city)||"Any"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(I.skills_mandatory||[]).map((D,Y)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium",children:D},Y))})]}),I.description&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Job Description"}),n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:I.description})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx("div",{className:"flex gap-2",children:[{key:"matched",label:"Matched Candidates"},{key:"submissions",label:"My Submissions"},{key:"interviews",label:"Interview Stage"},{key:"closed",label:"Closed"}].map(D=>n.jsx("button",{onClick:()=>f(D.key),className:`px-3 py-2 rounded text-sm font-medium ${u===D.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:D.label},D.key))})}),u==="matched"&&n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:T,children:"Run Match"}),n.jsxs("label",{className:"text-sm text-gray-600",children:["Min score: ",m,"%",n.jsx("input",{type:"range",min:"0",max:"100",value:m,onChange:D=>g(Number(D.target.value)),className:"ml-2 align-middle"})]})]}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:S,children:"Submit to AM"})]}),l.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidates matched yet. Click Run Match."}):n.jsx("div",{className:"divide-y",children:l.map(D=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.full_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:D.email}),D.current_location&&n.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[n.jsx(Oc,{className:"h-3 w-3 mr-1"}),D.current_location]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[n.jsx(hCe,{className:"h-4 w-4 mr-1"}),D.match_score,"%"]})})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(D.matched_skills||[]).map((Y,M)=>n.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:[" ",Y]},M)),(D.missing_skills||[]).slice(0,3).map((Y,M)=>n.jsxs("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs",children:[" ",Y]},M))]}),n.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{v({open:!0,candidate:D,mode:"call"}),j({rating:4,strengths:"",concerns:"",free_text:""})},children:"Add Call Notes"}),n.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[n.jsx("input",{type:"checkbox",checked:x.has(D.candidate_id),onChange:()=>A(D.candidate_id),disabled:!P[D.candidate_id]}),"Select for submission"]})]})]},D.candidate_id))})]}),u==="submissions"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:a.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No submissions yet."}):n.jsx("div",{className:"divide-y",children:a.map(D=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:D.email||""})]}),n.jsx(cg,{stage:D.stage})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Match Score: ",D.match_score||0,"%"]})]},D.id))})}),u==="interviews"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:Z.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No interviews scheduled yet."}):n.jsx("div",{className:"divide-y",children:Z.map(D=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:D.email||""})]}),n.jsx(cg,{stage:D.stage})]}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[D.stage==="client_shortlisted"&&n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>{w({open:!0,submission:D}),k({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""})},children:"Schedule Interview"}),D.stage==="interview_scheduled"&&n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{v({open:!0,candidate:D,mode:"interview"}),j({rating:4,strengths:"",concerns:"",free_text:""})},children:"Add Interview Notes"})]})]},D.id))})}),u==="closed"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:H.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No closed candidates yet."}):n.jsx("div",{className:"divide-y",children:H.map(D=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:D.email||""})]}),n.jsx(cg,{stage:D.stage})]})},D.id))})})]}),n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Notes"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"}),n.jsx("p",{className:"font-medium text-gray-900",children:L!=null&&L.assigned_at?new Date(L.assigned_at).toLocaleDateString():""})]}),L!=null&&L.notes?n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsx("p",{className:"text-blue-800 text-sm",children:L.notes})}):n.jsx("p",{className:"text-sm text-gray-500",children:"No notes from AM."}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[n.jsx(Hr,{className:"h-4 w-4"}),a.length," submissions"]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mt-2",children:[n.jsx(Ci,{className:"h-4 w-4"}),Z.length," in interview"]})]})]})})]})]}),n.jsx(NMe,{open:p.open,title:p.mode==="call"?"Add Call Notes":"Add Interview Notes",onClose:()=>v({open:!1,candidate:null,mode:"call"}),onSubmit:E,fields:b,setFields:j}),n.jsx(kMe,{open:N.open,onClose:()=>w({open:!1,submission:null}),onSubmit:O,fields:_,setFields:k})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("button",{onClick:()=>t("/recruiter/requirements"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-6",children:[n.jsx(yR,{className:"h-5 w-5 mr-1"}),"Back to Requirements"]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:"Requirement not found"})]})},XW=({isOpen:e,onClose:t,job:r})=>{const[s,a]=y.useState(null),[i,l]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState(null),[f,m]=y.useState(!1),[g,x]=y.useState(!1),[h,p]=y.useState({full_name:"",email:"",phone:"",location:"",skills:[],experiences:[],education:[]});y.useEffect(()=>{u(r?null:" No job selected. Cannot add candidate.")},[r]);const v=O=>O?typeof O=="string"?O:Array.isArray(O)?O.map(I=>(I==null?void 0:I.msg)||(I==null?void 0:I.message)||JSON.stringify(I)).join(", "):O.detail?v(O.detail):O.message?O.message:JSON.stringify(O):"Unknown error",b=()=>!h.full_name||!h.full_name.trim()?(u("Full Name is required"),!1):!h.email||!h.email.trim()?(u("Email is required"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)?r?(u(null),!0):(u("No job selected. Cannot add candidate."),!1):(u("Invalid email format"),!1),j=async O=>{var L,Z,H,R,D,Y,M,X,ne;if(!O)return;if(!r){u("Please select a job before uploading resume");return}a(O),l(!0),u(null),m(!1);const I=new FormData;I.append("job_id",r.job_id||r.id),I.append("resume",O);try{const J=await G.post("/v1/candidates/manual",I,{headers:{"Content-Type":"multipart/form-data"}});p({full_name:((L=J.data.parsed)==null?void 0:L.full_name)||h.full_name,email:((Z=J.data.parsed)==null?void 0:Z.email)||h.email,phone:((H=J.data.parsed)==null?void 0:H.phone)||h.phone,location:((R=J.data.parsed)==null?void 0:R.location)||h.location,skills:((D=J.data.parsed)==null?void 0:D.skills)||h.skills||[],experiences:((Y=J.data.parsed)==null?void 0:Y.experiences)||[],education:((M=J.data.parsed)==null?void 0:M.education)||[]}),u(null),m(" Resume parsed successfully! Review and edit details below.")}catch(J){console.error("Resume parsing error:",J);const ue=v(((ne=(X=J.response)==null?void 0:X.data)==null?void 0:ne.detail)||J.message);u(ue||"Failed to parse resume. Please try again."),a(null)}finally{l(!1)}},N=(O,I)=>{p(L=>({...L,[O]:I})),u(null)},w=O=>{const I=O.split(",").map(L=>L.trim()).filter(L=>L);p(L=>({...L,skills:I}))},_=()=>{p(O=>({...O,experiences:[...O.experiences,{company:"",role:"",start_date:"",end_date:"",description:""}]}))},k=(O,I,L)=>{p(Z=>{const H=[...Z.experiences];return H[O]={...H[O],[I]:L},{...Z,experiences:H}})},C=O=>{p(I=>({...I,experiences:I.experiences.filter((L,Z)=>Z!==O)}))},T=()=>{p(O=>({...O,education:[...O.education,{institution:"",degree:"",field_of_study:"",year:""}]}))},P=(O,I,L)=>{p(Z=>{const H=[...Z.education];return H[O]={...H[O],[I]:L},{...Z,education:H}})},A=O=>{p(I=>({...I,education:I.education.filter((L,Z)=>Z!==O)}))},S=async()=>{var O,I;if(b()){c(!0),u(null);try{const L=Array.isArray(h.education)?h.education.map(R=>typeof R=="string"?R:(R==null?void 0:R.degree)||(R==null?void 0:R.field_of_study)||(R==null?void 0:R.institution)||"").filter(Boolean).join(", "):h.education||"",Z={job_id:r.job_id||r.id,full_name:h.full_name,email:h.email,phone:h.phone||"",location:h.location||"",skills:Array.isArray(h.skills)?h.skills:[],education:L},H=await G.post("/v1/candidates/from-resume",Z);m(" Candidate added successfully!"),setTimeout(()=>{t(),E()},1500)}catch(L){console.error("Submission error:",L);const Z=v(((I=(O=L.response)==null?void 0:O.data)==null?void 0:I.detail)||L.message);u(Z||"Failed to add candidate. Please try again.")}finally{c(!1)}}},E=()=>{a(null),x(!1),p({full_name:"",email:"",phone:"",location:"",skills:[],experiences:[],education:[]}),u(null),m(!1)};return e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40",onClick:t}),n.jsx("div",{className:`fixed top-0 right-0 h-full bg-white shadow-xl z-50 transition-transform overflow-y-auto ${e?"translate-x-0":"translate-x-full"}`,style:{width:"500px"},children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Add New Candidate"}),n.jsx("button",{onClick:t,className:"text-2xl font-bold text-gray-400 hover:text-gray-600",children:""})]}),r?n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:n.jsx("div",{className:"font-semibold text-blue-900",children:r.title})}):n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700 font-semibold",children:" No job selected"}),d&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:d}),f&&n.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:f}),!s&&!g&&n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-3 font-semibold",children:"How would you like to add a candidate?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"entry-method",value:"resume",onChange:()=>{x(!1),u(null)},className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"ml-2 text-sm",children:" Upload Resume"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"entry-method",value:"manual",onChange:()=>{x(!0),u(null)},className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"ml-2 text-sm",children:" Enter Manually"})]})]})]}),!g&&n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Upload Resume (PDF, DOC, DOCX)"}),n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:O=>{var I;return j((I=O.target.files)==null?void 0:I[0])},disabled:i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm cursor-pointer hover:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i&&n.jsx("p",{className:"text-sm text-blue-600 mt-2 animate-pulse",children:" Parsing resume, please wait..."})]}),(s||g)&&!i&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Full Name *"}),n.jsx("input",{type:"text",value:h.full_name,onChange:O=>N("full_name",O.target.value),placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email *"}),n.jsx("input",{type:"email",value:h.email,onChange:O=>N("email",O.target.value),placeholder:"john@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone Number"}),n.jsx("input",{type:"tel",value:h.phone,onChange:O=>N("phone",O.target.value),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:h.location,onChange:O=>N("location",O.target.value),placeholder:"San Francisco, CA",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Skills (Comma Separated)"}),n.jsx("textarea",{value:h.skills.join(", "),onChange:O=>w(O.target.value),placeholder:"Python, React, Node.js, SQL",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Work Experience"}),n.jsx("button",{onClick:_,className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition",children:"+ Add Experience"})]}),h.experiences.length===0?n.jsx("p",{className:"text-xs text-gray-500 italic",children:"No experiences added yet"}):h.experiences.map((O,I)=>n.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Experience ",I+1]}),n.jsx("button",{onClick:()=>C(I),className:"text-red-600 text-xs hover:text-red-800 font-semibold",children:"Remove"})]}),n.jsx("input",{type:"text",placeholder:"Company Name",value:O.company,onChange:L=>k(I,"company",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Job Title / Role",value:O.role,onChange:L=>k(I,"role",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[n.jsx("input",{type:"month",placeholder:"Start Date",value:O.start_date,onChange:L=>k(I,"start_date",L.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs"}),n.jsx("input",{type:"month",placeholder:"End Date",value:O.end_date,onChange:L=>k(I,"end_date",L.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs"})]}),n.jsx("textarea",{placeholder:"Description (Optional)",value:O.description,onChange:L=>k(I,"description",L.target.value),rows:2,className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]},I))]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Education"}),n.jsx("button",{onClick:T,className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition",children:"+ Add Education"})]}),h.education.length===0?n.jsx("p",{className:"text-xs text-gray-500 italic",children:"No education added yet"}):h.education.map((O,I)=>n.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Education ",I+1]}),n.jsx("button",{onClick:()=>A(I),className:"text-red-600 text-xs hover:text-red-800 font-semibold",children:"Remove"})]}),n.jsx("input",{type:"text",placeholder:"Institution / University",value:O.institution,onChange:L=>P(I,"institution",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Degree (e.g., B.Tech, MBA)",value:O.degree,onChange:L=>P(I,"degree",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Field of Study",value:O.field_of_study,onChange:L=>P(I,"field_of_study",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"number",placeholder:"Graduation Year",value:O.year,onChange:L=>P(I,"year",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]},I))]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:S,disabled:o||!r,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:o?"Submitting...":" Add Candidate"}),n.jsx("button",{onClick:()=>{t(),E()},className:"flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg font-semibold hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})]}):null},SMe={query:"",experience:{min:"",max:"",type:"total"},location:{current:"",preferred:"",remote:!1},salary:{min:"",max:"",currency:"INR",type:"expected"},keywords:[],companies:[],designations:[],education:{degrees:[],institutions:[],majors:[],topTier:!1},certifications:[],activeCertsOnly:!1},CMe=["react","reactjs","redux","javascript","typescript","node.js","nodejs","express","python","java","spring boot","django","flask","fastapi","sql","postgresql","mysql","mongodb","redis","aws","azure","gcp","docker","kubernetes","html","css","tailwind","rest","graphql","microservices","machine learning","nlp"],AMe=["aws certified","aws certified solutions architect","pmp","scrum master","azure certified","google cloud certified"],EMe=["bachelor","bachelors","b.tech","be","master","masters","m.tech","mba","bca","mca"],TMe=["computer science","information technology","software engineering","electronics","electrical","data science"],PMe=["bangalore","bengaluru","hyderabad","chennai","pune","mumbai","delhi","noida","gurgaon","kolkata","ahmedabad"],OMe=new Set(["html","css","tailwind","javascript"]),YW=["must","required","mandatory","essential"],RMe=["preferred","nice to have","plus","good to have"],LMe=["remote","work from home","wfh","hybrid"],da=e=>String(e||"").toLowerCase().replace(/\s+/g," ").trim(),IMe=e=>e?Array.isArray(e)?e:String(e).split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[],FMe=e=>IMe(e).map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||(t==null?void 0:t.title)||(t==null?void 0:t.label)||(t==null?void 0:t.skill)||"").map(t=>t.trim()).filter(Boolean),DMe=e=>JSON.parse(JSON.stringify(e)),Xd=e=>String(e||"").split(" ").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),eb=(e,t)=>{const r=da(e);return t.some(s=>r.includes(da(s)))},xp=(e,t)=>{const r=da(e);return t.filter(s=>{const a=da(s).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${a}\\b`,"i").test(r)})},$Me=e=>String(e||"").split(/[\n.!?]+/).map(t=>t.trim()).filter(Boolean),EI=e=>{const t=da(e);return t==="reactjs"?"react":t==="nodejs"?"node.js":t},MMe=e=>{const t=da(e);let r=null,s=null;const a=t.match(/(\d{1,2})\s*(?:-|to)\s*(\d{1,2})\s*(?:\+)?\s*(?:years|year|yrs|yr)/i);if(a&&(r=Number(a[1]),s=Number(a[2])),r===null){const i=t.match(/(\d{1,2})\s*\+\s*(?:years|year|yrs|yr)/i);i&&(r=Number(i[1]),s="")}if(r===null){const i=t.match(/(?:minimum|min)\s*(\d{1,2})\s*(?:\+)?\s*(?:years|year|yrs|yr)/i);i&&(r=Number(i[1]),s="")}return{min_years:r===null?"":r,max_years:s===null?"":s,type:t.includes("relevant experience")?"relevant":"total"}},BMe=(e,t)=>{const r=da(t),s=String((e==null?void 0:e.location)||"").trim(),a=xp(r,PMe).map(o=>o==="bengaluru"?"bangalore":o).map(Xd),i=s||a[0]||"",l=a.filter(o=>da(o)!==da(i));return{primary:i,alternatives:l,remote_allowed:eb(r,LMe)}},UMe=e=>{const t=da(e),r=xp(t,EMe).map(Xd),s=xp(t,TMe).map(Xd);return{degrees:r,majors:s,institutions:[],tier:"any",required:eb(t,YW)}},zMe=e=>xp(e,AMe).map(t=>({name:Xd(t),required:!1})),WMe=(e,t)=>{const r=[],s=l=>{const o=String(l||"").trim();o&&(r.some(c=>da(c)===da(o))||r.push(o))};s(e==null?void 0:e.title);const a=/\b(?:senior|sr|lead|principal|staff|junior|jr)?\s*(?:software engineer|engineer|developer|architect|analyst|consultant|manager)\b/gi;return(String(t||"").match(a)||[]).forEach(l=>s(Xd(l))),r},VMe=(e={},t="")=>{const r=da([e==null?void 0:e.title,t].filter(Boolean).join(" "));return r.includes("frontend")||r.includes("front end")||r.includes("web")||r.includes("ui")||r.includes("react")||r.includes("angular")||r.includes("vue")},HMe=(e,t,r="text")=>{if(r==="job_skills")return"must_have";const s=da(e);for(const a of t){const i=da(a);if(i.includes(s)){if(eb(i,YW))return"must_have";if(eb(i,RMe))return"nice_to_have"}}return"nice_to_have"},qMe=(e,t)=>{const r=$Me(t),s=new Map,a=VMe(e,t);FMe(e==null?void 0:e.skills).forEach(o=>{const c=EI(o);c&&s.set(c,{source:"job_skills"})}),xp(t,CMe).forEach(o=>{const c=EI(o);c&&(!a&&OMe.has(c)||s.has(c)||s.set(c,{source:"text"}))});const i=[],l=[];return s.forEach((o,c)=>{const d=HMe(c,r,o.source),u={name:Xd(c),variations:[Xd(c)],weight:d==="must_have"?1:.5,category:"General"};d==="must_have"?i.push(u):l.push(u)}),{must_have:i,nice_to_have:l}},GMe=(e,t)=>{var a;const r=String((e==null?void 0:e.title)||"").trim();return r||(((a=t==null?void 0:t.skills)==null?void 0:a.must_have)||[]).map(i=>i.name).slice(0,3).join(" ").trim()},JMe=e=>{let t=0;(e.skills.must_have||[]).length>0&&(t+=1),(e.experience.min_years!==""||e.experience.max_years!=="")&&(t+=1),e.location.primary&&(t+=1),(e.education.degrees||[]).length>0&&(t+=1),(e.certifications||[]).length>0&&(t+=1),(e.designation.keywords||[]).length>0&&(t+=1);const r=.35+t/6*.6;return Math.max(.35,Math.min(.95,Number(r.toFixed(2))))},KMe=()=>DMe(SMe),ZW=(e={})=>{const t=[e==null?void 0:e.description,e==null?void 0:e.jd_text].filter(Boolean).join(`
`),r=[e==null?void 0:e.title,t].filter(Boolean).join(`
`),s={skills:qMe(e,r),experience:MMe(r),location:BMe(e,r),education:UMe(r),certifications:zMe(r),designation:{keywords:WMe(e,r)}};s.confidence_score=JMe(s);const a=XMe(s,{query:"",keywords:[]}),i=GMe(e,s)||a.query,l=a.keywords;return{analysis:s,query:i,keywords:l,filters:a}},XMe=(e={},t={})=>{var c,d,u,f,m,g,x,h,p,v,b,j,N,w,_;const r=KMe();r.query=String(t.query||"").trim(),r.keywords=Array.isArray(t.keywords)?[...t.keywords]:[];const s=(((c=e==null?void 0:e.skills)==null?void 0:c.must_have)||[]).map(k=>k.name),a=(((d=e==null?void 0:e.skills)==null?void 0:d.nice_to_have)||[]).map(k=>k.name),i=(s.length>0?s:a).map(k=>String(k||"").trim()).filter(Boolean);if(r.keywords.length===0&&i.length&&(r.keywords=i.slice(0,5)),!r.query){const k=(((u=e==null?void 0:e.designation)==null?void 0:u.keywords)||[]).slice(0,2),C=((f=e==null?void 0:e.location)==null?void 0:f.primary)||"";r.query=[...k,...r.keywords.slice(0,4),C].filter(Boolean).join(" ").trim()}const l=(m=e==null?void 0:e.experience)==null?void 0:m.min_years,o=(g=e==null?void 0:e.experience)==null?void 0:g.max_years;return r.experience.min=l===""||l===void 0?"":String(l),r.experience.max=o===""||o===void 0?"":String(o),r.experience.type=((x=e==null?void 0:e.experience)==null?void 0:x.type)==="relevant"?"relevant":"total",r.location.current=((h=e==null?void 0:e.location)==null?void 0:h.primary)||"",r.location.preferred=(((p=e==null?void 0:e.location)==null?void 0:p.alternatives)||[])[0]||"",r.location.remote=!!((v=e==null?void 0:e.location)!=null&&v.remote_allowed),r.designations=(((b=e==null?void 0:e.designation)==null?void 0:b.keywords)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.degrees=(((j=e==null?void 0:e.education)==null?void 0:j.degrees)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.majors=(((N=e==null?void 0:e.education)==null?void 0:N.majors)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.institutions=(((w=e==null?void 0:e.education)==null?void 0:w.institutions)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.topTier=!!((_=e==null?void 0:e.education)!=null&&_.top_tier),r.certifications=((e==null?void 0:e.certifications)||[]).map(k=>typeof k=="string"?k:(k==null?void 0:k.name)||"").map(k=>String(k||"").trim()).filter(Boolean),r},YMe=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,""),QW=e=>{try{const t=JSON.stringify(e||{}),r=new TextEncoder().encode(t);let s="";return r.forEach(a=>{s+=String.fromCharCode(a)}),YMe(window.btoa(s))}catch{return""}},TI=()=>{var T;const e=Tt(),{jobs:t,loading:r,error:s}=bMe(),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState(!1),[u,f]=y.useState(null),[m,g]=y.useState(""),[x,h]=y.useState(""),[p,v]=y.useState(""),b=P=>{if(!P)return;const A=new URLSearchParams;A.set("jobId",P.id||P.job_id),P.title&&A.set("jobTitle",P.title),A.set("tab","sent_to_am"),e(`/recruiter/candidate-workflow?${A.toString()}`)},j=t.filter(P=>{var S,E,O;const A=m.toLowerCase();return!A||((S=P.title)==null?void 0:S.toLowerCase().includes(A))||((E=P.location)==null?void 0:E.toLowerCase().includes(A))||((O=P.department)==null?void 0:O.toLowerCase().includes(A))||(P.skills||[]).some(I=>(typeof I=="string"?I:(I==null?void 0:I.name)||"").toLowerCase().includes(A))}),N=P=>{const A={active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",open:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",closed:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",draft:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"};return n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${A[P]||A.active}`,children:P||"Active"})},w=P=>{const A={hybrid:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",remote:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",onsite:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"};return P?n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${A[P]||A.hybrid}`,children:P}):null},_=P=>{var A;return(P==null?void 0:P.client_name)||((A=P==null?void 0:P.client)==null?void 0:A.client_name)||(P==null?void 0:P.client_display_name)||(P==null?void 0:P.company_name)||"Client not specified"},k=P=>{const A=String(P||"").toUpperCase();return A.includes("INR")||A.includes("")?_4e:Up},C=async P=>{const A=(P==null?void 0:P.id)||(P==null?void 0:P.job_id)||"";if(!A)return;v(""),h(A);const S=new URLSearchParams;try{const{analysis:E,query:O,keywords:I}=ZW(P),L=QW(E);O&&S.set("q",O),I.length&&S.set("keywords",I.join(",")),(P!=null&&P.job_id||P!=null&&P.id)&&S.set("job_id",P.job_id||P.id),P!=null&&P.title&&S.set("job_title",P.title),L&&S.set("analysis",L),S.set("auto_search","1"),e(`/recruiter/resdex/advanced-search?${S.toString()}`)}catch{v("Unable to analyze this JD. Please try manual search.")}finally{h("")}};return r?n.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Assigned Jobs"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Jobs assigned to you by Account Managers"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by title, location, department, skills...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:m,onChange:P=>g(P.target.value)})]})}),s&&n.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 flex items-center",children:[n.jsx(Ks,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),n.jsx("p",{className:"text-red-800 dark:text-red-300",children:s})]}),p&&n.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-6 flex items-center",children:[n.jsx(Ks,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 mr-3"}),n.jsx("p",{className:"text-amber-800 dark:text-amber-300",children:p})]}),j.length===0?n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-12 text-center",children:[n.jsx(ua,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"No assigned jobs"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Jobs assigned to you by Account Managers will appear here"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:j.map(P=>{var A;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-5 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[N(P.status),w(P.mode)]}),n.jsxs("span",{className:"text-purple-200 text-xs",children:["ID: ",P.job_id||((A=P.id)==null?void 0:A.slice(0,8))]})]}),n.jsx("h3",{className:"text-lg font-bold text-white mt-1 line-clamp-1",children:P.title})]}),n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(am,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:_(P)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Oc,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:P.location||"Location not specified"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(ua,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:P.experience||`${P.min_experience||0} - ${P.max_experience||"Any"} yrs`})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Hr,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[P.no_of_positions||1," position(s)"]})]}),(P.budget||P.salary_range)&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[we.createElement(k(P.budget||P.salary_range),{className:"w-4 h-4 text-green-500 flex-shrink-0"}),n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:P.budget||P.salary_range})]}),n.jsx("div",{className:"pt-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Array.isArray(P.skills)?P.skills:[]).slice(0,3).map((S,E)=>n.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 rounded-full text-xs",children:typeof S=="string"?S:(S==null?void 0:S.name)||S},E)),Array.isArray(P.skills)&&P.skills.length>3&&n.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full text-xs",children:["+",P.skills.length-3]})]})})]}),n.jsxs("div",{className:"px-4 pb-4 pt-0 flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>{f(P),d(!0)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:[n.jsx(il,{className:"w-4 h-4"}),"View Details"]}),n.jsxs("button",{onClick:()=>b(P),className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Submissions"]})]}),n.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[n.jsxs("button",{onClick:()=>C(P),disabled:x===(P.id||P.job_id),className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 border border-purple-500 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-sm disabled:opacity-60 disabled:cursor-not-allowed",children:[n.jsx(ps,{className:"w-4 h-4"}),x===(P.id||P.job_id)?"Analyzing JD...":"Smart Search"]}),n.jsxs("button",{onClick:()=>{o(P),i(!0)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[n.jsx(Fv,{className:"w-4 h-4"}),"Add Candidate"]})]})]},P.id)})}),c&&u&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-white",children:u.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs("span",{className:"text-purple-200 text-sm",children:["ID: ",u.job_id||((T=u.id)==null?void 0:T.slice(0,8))]}),N(u.status),w(u.mode)]})]}),n.jsx("button",{onClick:()=>{d(!1),f(null)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(_r,{className:"w-6 h-6 text-white"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Client"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:_(u)})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Client TA (Contact)"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.client_ta||u.client_contact||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Mode"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium capitalize",children:u.mode||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Experience"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.experience||`${u.min_experience||0} - ${u.max_experience||"Any"} years`})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.location||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.duration||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"No of Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-semibold text-lg",children:u.no_of_positions||1})]}),n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Budget / CTC"}),n.jsx("p",{className:"text-green-700 dark:text-green-300 mt-1 font-semibold",children:u.budget||u.salary_range||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.work_timings||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.joining_preference||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Posted"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:Bp(u.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 uppercase tracking-wide",children:"Skills Required"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(u.skills)?u.skills:[]).map((P,A)=>n.jsx("span",{className:"px-3 py-1.5 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 rounded-full text-sm font-medium",children:typeof P=="string"?P:(P==null?void 0:P.name)||P},A)),(!u.skills||u.skills.length===0)&&n.jsx("span",{className:"text-gray-400 italic",children:"No skills specified"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 uppercase tracking-wide",children:"Job Description"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:u.description||u.jd_text||"No description provided"})})]}),u.am_notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-amber-700 dark:text-amber-400 mb-3 uppercase tracking-wide",children:" Notes from Account Manager"}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-5 rounded-lg",children:n.jsx("p",{className:"text-amber-900 dark:text-amber-200 whitespace-pre-wrap leading-relaxed",children:u.am_notes})})]})]}),n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{d(!1),f(null)},className:"px-5 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Close"}),n.jsxs("button",{onClick:()=>b(u),className:"px-5 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium",children:[n.jsx(Hr,{className:"w-4 h-4"}),"View Submissions"]}),n.jsxs("button",{onClick:()=>{o(u),i(!0),d(!1)},className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium",children:[n.jsx(Fv,{className:"w-4 h-4"}),"Add Candidate"]})]})]})}),n.jsx(XW,{isOpen:a,onClose:()=>i(!1),job:l})]})})};function ZMe(){var C,T,P,A;const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState([]),[l,o]=y.useState(new Set),[c,d]=y.useState(!0),[u,f]=y.useState(!1),[m,g]=y.useState(!1),[x,h]=y.useState(!1),[p,v]=y.useState(""),[b,j]=y.useState("");y.useEffect(()=>{N()},[e]);async function N(){var S,E,O;try{v(""),d(!0);const I=await kee(e),L=I.data||((S=I.data)==null?void 0:S.data);if(console.log(" Job loaded:",L),!L)throw new Error("No job data in response");s(L)}catch(I){console.error(" Job load error:",I);const L=((O=(E=I.response)==null?void 0:E.data)==null?void 0:O.detail)||I.message||"Failed to load job details";v(L),s(null)}finally{d(!1)}}async function w(){var S;if(x){h(!1);return}try{v(""),f(!0);const E=await See(e),O=E.data||((S=E.data)==null?void 0:S.data);i(O.candidates||[]),h(!0)}catch(E){console.error("Candidate pool error:",E),v("Failed to fetch candidate pool")}finally{f(!1)}}function _(S){const E=new Set(l);E.has(S)?E.delete(S):E.add(S),o(E)}async function k(){var S,E,O;if(l.size===0){v("Please select at least one candidate");return}try{v(""),j(""),g(!0);const I=await Cee(e,Array.from(l)),L=I.data||((S=I.data)==null?void 0:S.data);j(`Successfully sent ${L.total_submitted} candidates to Account Manager`),o(new Set),setTimeout(()=>{w()},1e3)}catch(I){console.error("Send to AM error:",I),v(((O=(E=I.response)==null?void 0:E.data)==null?void 0:O.detail)||"Failed to send candidates")}finally{g(!1)}}return c?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(kj,{className:"animate-spin text-4xl text-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading job details..."})]}):r?n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[n.jsx(bN,{})," Back to Jobs"]})}),p&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-600",children:p}),b&&n.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 text-green-600 flex items-center gap-2",children:[n.jsx(_x,{className:"text-lg"})," ",b]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.location&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(u7,{})," ",r.location]}),r.job_type&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(Aee,{})," ",r.job_type]}),r.department&&n.jsxs("div",{className:"text-gray-600",children:[" ",r.department]})]})]}),n.jsxs("div",{className:"lg:col-span-1 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Account Manager"}),n.jsx("p",{className:"font-bold text-gray-900",children:((C=r.account_manager)==null?void 0:C.am_name)||"Unassigned"}),((T=r.account_manager)==null?void 0:T.am_email)&&n.jsx("p",{className:"text-sm text-gray-600",children:r.account_manager.am_email})]})]}),r.description&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-700 whitespace-pre-line line-clamp-3",children:r.description})]}),r.skills&&r.skills.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(c7,{})," Required Skills"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(r.skills)?r.skills:[]).map((S,E)=>n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:S},E))})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.min_experience!==void 0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"MIN EXPERIENCE"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.min_experience," years"]})]}),r.max_experience&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"MAX EXPERIENCE"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.max_experience," years"]})]}),r.salary_range&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"SALARY RANGE"}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:r.salary_range})]}),r.status&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"STATUS"}),n.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-bold",children:r.status.toUpperCase()})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[n.jsxs("div",{onClick:w,className:"p-6 cursor-pointer hover:bg-gray-50 transition flex items-center justify-between border-b",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Candidate Pool & Assignment"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Select candidates to send to"," ",((P=r.account_manager)==null?void 0:P.am_name)||"Account Manager"]})]}),n.jsx("div",{className:"text-gray-600",children:x?n.jsx(C1,{className:"h-6 w-6"}):n.jsx(io,{className:"h-6 w-6"})})]}),x&&n.jsx("div",{className:"p-6",children:u?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(kj,{className:"animate-spin text-2xl text-blue-600 mr-3"}),n.jsx("span",{className:"text-gray-600",children:"Matching candidates with job..."})]}):a.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No candidates available in the pool"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-3 mb-6",children:a.map(S=>{var R,D;const E=S.match_score??S.match_percentage??0,O=Number(E),I=Number.isFinite(O)?Math.round(O):0,L=S.fit_label,Z=I>=80?"bg-green-100 text-green-700":I>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700",H=I>=80?"bg-green-500":I>=50?"bg-yellow-500":"bg-gray-400";return n.jsx("div",{className:`border rounded-lg p-4 transition ${l.has(S.candidate_id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("input",{type:"checkbox",checked:l.has(S.candidate_id),onChange:()=>_(S.candidate_id),className:"w-5 h-5 mt-1 rounded cursor-pointer"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-900",children:S.full_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",S.public_id]})]}),n.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 ${Z}`,children:[n.jsx(_x,{className:"h-4 w-4"}),I,"% Match"]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${H}`,style:{width:`${Math.min(100,Math.max(0,I))}%`}})}),L&&n.jsx("span",{className:"text-xs font-semibold text-gray-600",children:L})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),n.jsx("p",{className:"text-gray-700",children:S.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),n.jsx("p",{className:"text-gray-700",children:S.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Experience"}),n.jsxs("p",{className:"text-gray-700",children:[S.experience_years," years",S.experience_match&&n.jsx("span",{className:"ml-1 text-green-600",children:""})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Location"}),n.jsx("p",{className:"text-gray-700",children:S.current_location||""})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(R=S.matched_skills)==null?void 0:R.map((Y,M)=>n.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium flex items-center gap-1",children:[n.jsx(_x,{className:"h-3 w-3"})," ",Y]},`matched-${M}`)),(D=S.unmatched_skills)==null?void 0:D.map((Y,M)=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium text-opacity-70",children:Y},`unmatched-${M}`))]})]})]})]})},S.candidate_id)})}),l.size>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-semibold",children:[l.size," candidate",l.size>1?"s":""," selected"]}),n.jsxs("p",{className:"text-sm text-blue-700",children:["Ready to send to"," ",((A=r.account_manager)==null?void 0:A.am_name)||"Account Manager"]})]}),n.jsx("button",{onClick:k,disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(kj,{className:"animate-spin"})," Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_x,{})," Send to Account Manager"]})})]})]})})]})]}):n.jsxs("div",{className:"p-8",children:[n.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-4",children:[n.jsx(bN,{})," Back"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[n.jsx("h2",{className:"font-bold text-lg mb-2 text-red-600",children:" Error Loading Job"}),n.jsx("p",{className:"text-red-700 mb-4",children:p||"Job not found"}),n.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]})]})}const QMe=()=>G.get("/v1/recruiter/profile").then(eV),e9e=e=>G.put("/v1/recruiter/profile",e).then(eV);function eV(e){var t;return((t=e.data)==null?void 0:t.data)||e.data}const t9e=e=>!e||e.trim().length===0?"Full name is required":e.length<2?"Full name must be at least 2 characters":e.length>100?"Full name cannot exceed 100 characters":e[0].match(/[A-Z]/)?null:"Full name must start with capital letter",r9e=e=>!e||e.trim().length===0?"Phone number is required":e.replace(/\D/g,"").length!==10?"Phone must be exactly 10 digits":null;function n9e(){const[e,t]=y.useState({email_notifications:!1,sms_alerts:!1,report_emails:!1,interview_reminders:!1,two_factor_enabled:!1}),[r,s]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState("");y.useEffect(()=>{c()},[]);async function c(){s(!0),i("");try{const u=await G.get("/v1/recruiter/preferences");t(u.data)}catch{i("Failed to load settings")}s(!1)}async function d(u){i(""),o("");const f={...e,[u]:!e[u]};t(f);try{const m=new URLSearchParams;Object.entries(f).forEach(([g,x])=>{m.append(g,String(x))}),await G.put("/v1/recruiter/preferences",m),o("Settings updated")}catch{i("Failed to update settings"),t(e)}}return r?n.jsx("div",{children:"Loading settings..."}):n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"font-medium mb-2",children:"Product Settings"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.email_notifications,onChange:()=>d("email_notifications")}),"Email Notifications"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.sms_alerts,onChange:()=>d("sms_alerts")}),"SMS Alerts"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.report_emails,onChange:()=>d("report_emails")}),"Report Emails"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.interview_reminders,onChange:()=>d("interview_reminders")}),"Interview Reminders"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.two_factor_enabled,onChange:()=>d("two_factor_enabled")}),"Two-Factor Authentication"]})]}),a&&n.jsx("div",{className:"text-xs text-red-500 mt-1",children:a}),l&&n.jsx("div",{className:"text-xs text-green-600 mt-1",children:l})]})}function s9e(){return n.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Settings"}),n.jsx(n9e,{})]})}function a9e(){const[e,t]=y.useState(null),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState(!1),[c,d]=y.useState({full_name:"",phone:""}),[u,f]=y.useState({}),[m,g]=y.useState(!1);y.useEffect(()=>{(async()=>{var j,N;try{s(!0),i(null);const w=await QMe();t(w),d({full_name:w.full_name||"",phone:w.phone||""})}catch(w){i(((N=(j=w.response)==null?void 0:j.data)==null?void 0:N.detail)||"Failed to load profile")}finally{s(!1)}})()},[]);const x=()=>{o(!0),f({})},h=()=>{o(!1),d({full_name:(e==null?void 0:e.full_name)||"",phone:(e==null?void 0:e.phone)||""}),f({})},p=async()=>{var w,_;const b={},j=t9e(c.full_name);j&&(b.full_name=j);const N=r9e(c.phone);if(N&&(b.phone=N),Object.keys(b).length>0){f(b);return}try{g(!0);const k=await e9e(c);t(k),o(!1),f({})}catch(k){f({submit:((_=(w=k.response)==null?void 0:w.data)==null?void 0:_.detail)||"Failed to update profile"})}finally{g(!1)}};if(r)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),n.jsx("p",{className:"text-gray-600 mt-4",children:"Loading profile..."})]})});if(a&&!e)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:a})})});const v=e;return n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center text-2xl font-bold text-indigo-600",children:v.full_name?v.full_name.charAt(0).toUpperCase():"R"}),n.jsxs("div",{className:"ml-6 text-white",children:[n.jsx("h1",{className:"text-2xl font-bold",children:v.full_name||"Recruiter"}),n.jsx("p",{className:"text-indigo-100",children:v.email}),n.jsxs("p",{className:"text-indigo-200 text-sm",children:["Role: ",v.role||"Recruiter"]})]})]}),!l&&n.jsx("button",{onClick:x,className:"bg-white text-indigo-600 px-4 py-2 rounded-lg font-medium hover:bg-indigo-50",children:"Edit Profile"})]})}),n.jsxs("div",{className:"px-6 py-8",children:[u.submit&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-700",children:u.submit})}),l?n.jsxs("div",{className:"max-w-2xl",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Edit Profile"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:c.full_name,onChange:b=>d({...c,full_name:b.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${u.full_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Enter full name"}),u.full_name&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.full_name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:c.phone,onChange:b=>d({...c,phone:b.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${u.phone?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Enter 10-digit phone number"}),u.phone&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.phone}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Format: +1234567890 (10 digits)"})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsx("button",{onClick:p,disabled:m,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:m?"Saving...":"Save Changes"}),n.jsx("button",{onClick:h,disabled:m,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 disabled:opacity-50",children:"Cancel"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),n.jsx("p",{className:"text-gray-900",children:v.full_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:v.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:v.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Role"}),n.jsx("p",{className:"text-gray-900",children:v.role||"Recruiter"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Username"}),n.jsx("p",{className:"text-gray-900",children:v.username||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Login"}),n.jsx("p",{className:"text-gray-900",children:v.last_login?new Date(v.last_login).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),n.jsx("p",{className:"text-green-600 font-medium",children:v.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Company"}),n.jsx("p",{className:"text-gray-900",children:v.company_name||"N/A"})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),n.jsx("p",{className:"text-gray-900 break-all",children:v.id||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),n.jsx("p",{className:"text-gray-900",children:v.created_at?new Date(v.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Updated At"}),n.jsx("p",{className:"text-gray-900",children:v.updated_at?new Date(v.updated_at).toLocaleDateString():"N/A"})]})]})]})]}),n.jsx(s9e,{})]})]})})}function i9e(){const[e,t]=y.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[r,s]=y.useState({}),[a,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,f]=y.useState(!1),[m,g]=y.useState(!1),[x,h]=y.useState(null),p=Tt();y.useEffect(()=>{(async()=>{try{const w=await G.get("/v1/recruiter/profile");h(w.data)}catch(w){console.error("Failed to fetch user profile:",w)}})()},[]);const v=()=>{const N={};return e.oldPassword.trim()||(N.oldPassword="Current password is required"),e.newPassword.trim()?e.newPassword.length<8?N.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=])[A-Za-z\d!@#$%^&*()_+\-=]{8,}/.test(e.newPassword)||(N.newPassword="Password must contain uppercase, lowercase, number and special character"):N.newPassword="New password is required",e.confirmPassword.trim()?e.newPassword!==e.confirmPassword&&(N.confirmPassword="Passwords do not match"):N.confirmPassword="Please confirm your new password",s(N),Object.keys(N).length===0},b=async N=>{var w,_,k,C;if(N.preventDefault(),!!v()&&window.confirm("Are you sure you want to change your password? You will be logged out after the change.")){i(!0),o("");try{const T=new FormData;T.append("current_password",e.oldPassword),T.append("new_password",e.newPassword),await G.post("/v1/recruiter/change-password",T),o("Password changed successfully! You will be redirected to login."),setTimeout(()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),p("/login")},2e3)}catch(T){const P=((_=(w=T.response)==null?void 0:w.data)==null?void 0:_.detail)||((C=(k=T.response)==null?void 0:k.data)==null?void 0:C.message)||"Failed to change password";o(P)}finally{i(!1)}}},j=(N,w)=>{t(_=>({..._,[N]:w})),r[N]&&s(_=>({..._,[N]:""}))};return n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Change Password"}),n.jsx("p",{className:"text-gray-600",children:"Update your password to keep your account secure"})]}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:c?"text":"password",value:e.oldPassword,onChange:N=>j("oldPassword",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.oldPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.oldPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:u?"text":"password",value:e.newPassword,onChange:N=>j("newPassword",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.newPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.newPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:m?"text":"password",value:e.confirmPassword,onChange:N=>j("confirmPassword",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.confirmPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Changing Password...":"Change Password"})}),l&&n.jsx("div",{className:`p-4 rounded-lg ${l.includes("successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l})]})]})]})}const fk={new:{label:"New",color:"bg-blue-100 text-blue-700",icon:Hr},applied:{label:"Applied",color:"bg-blue-100 text-blue-700",icon:Hr},sourced:{label:"Sourced",color:"bg-blue-100 text-blue-700",icon:Hr},called:{label:"Called",color:"bg-indigo-100 text-indigo-700",icon:E1},feedback_added:{label:"Feedback Added",color:"bg-purple-100 text-purple-700",icon:lU},hold_revisit:{label:"Hold/Revisit",color:"bg-amber-100 text-amber-700",icon:pn},rejected_by_recruiter:{label:"Rejected",color:"bg-red-100 text-red-700",icon:Ja},sent_to_am:{label:"Sent to AM",color:"bg-teal-100 text-teal-700",icon:Ai},am_shortlisted:{label:"AM Shortlisted",color:"bg-green-100 text-green-700",icon:lm},am_rejected:{label:"AM Rejected",color:"bg-red-100 text-red-700",icon:xAe},sent_to_client:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:Ai},client_shortlisted:{label:"Client Shortlisted",color:"bg-green-100 text-green-700",icon:Ci},client_hold:{label:"Client Hold",color:"bg-amber-100 text-amber-700",icon:pn},client_rejected:{label:"Client Rejected",color:"bg-red-100 text-red-700",icon:Ja},interview_scheduled:{label:"Interview Scheduled",color:"bg-violet-100 text-violet-700",icon:Ya},interview_completed:{label:"Interview Done",color:"bg-violet-100 text-violet-700",icon:Ci},selected:{label:"Selected",color:"bg-emerald-100 text-emerald-700",icon:lm},negotiation:{label:"Negotiation",color:"bg-yellow-100 text-yellow-700",icon:Up},hired:{label:"Hired",color:"bg-green-100 text-green-700",icon:oU},offer_declined:{label:"Offer Declined",color:"bg-gray-100 text-gray-700",icon:Ja}},Xl=e=>{const t=String(e||"new").toLowerCase().trim();return t==="am_viewed"?"sent_to_am":t==="client_viewed"?"sent_to_client":t},co=e=>String(e||"").toLowerCase().trim(),l9e=["new","applied","sourced","called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","am_shortlisted","hold_revisit","am_rejected","sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],PI=["sent_to_am","am_shortlisted","hold_revisit","am_rejected","sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],tV=(e,t={})=>{var r;return e==="hold_revisit"&&t.isJobScoped?"AM Hold":((r=fk[e])==null?void 0:r.label)||e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")},mm=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,rr=(...e)=>{for(const t of e)if(mm(t))return typeof t=="string"?t.trim():t;return""},mk=e=>String(e||"").trim().toLowerCase(),o9e=/^[a-z]{2,6}-c-\d{3,}$/i,c9e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,d9e=/^[0-9a-f]{24}$/i,u9e=/^[0-9a-f]{32}$/i,f9e=/^[0-9A-HJKMNP-TV-Z]{26}$/,m9e=/^\d+$/,h9e=e=>o9e.test(String(e||"").trim()),rV=e=>{const t=String(e||"").trim();return!t||h9e(t)?!1:c9e.test(t)||d9e.test(t)||u9e.test(t)||f9e.test(t)||m9e.test(t)},p9e=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=new Set([e==null?void 0:e.application_id,e==null?void 0:e.applicationId,t==null?void 0:t.application_id,t==null?void 0:t.applicationId].map(a=>mk(a)).filter(Boolean)),s=[e==null?void 0:e.candidate_uuid,t==null?void 0:t.candidate_uuid,e==null?void 0:e.candidate_id,t==null?void 0:t.candidate_id,e==null?void 0:e.id,t==null?void 0:t.id];for(const a of s){const i=String(a||"").trim();if(!i)continue;const l=mk(i);if(l&&!r.has(l)&&rV(i))return i}return""},x9e=e=>{if(!mm(e))return"--";const t=String(e).trim();return t?/yr|year/i.test(t)?t:`${t} yrs`:"--"},g9e=(e=new Date)=>{const t=o=>String(o).padStart(2,"0"),r=e.getFullYear(),s=t(e.getMonth()+1),a=t(e.getDate()),i=t(e.getHours()),l=t(e.getMinutes());return`${r}-${s}-${a}T${i}:${l}`},y9e=()=>{const e=String(localStorage.getItem("user_id")||localStorage.getItem("id")||"").trim();if(e)return e;try{const t=localStorage.getItem("user");if(!t)return"";const r=JSON.parse(t);return String((r==null?void 0:r.id)||(r==null?void 0:r.user_id)||"").trim()}catch{return""}},v9e=(e={})=>String(rr(e==null?void 0:e.assigned_recruiter_id,e==null?void 0:e.recruiter_id,e==null?void 0:e.submitted_by)||"").trim(),b9e=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e,t];return r.some(o=>mm(rr(o==null?void 0:o.interview_id,o==null?void 0:o.next_interview_id,o==null?void 0:o.latest_interview_id,o==null?void 0:o.upcoming_interview_id)))||r.some(o=>{const c=rr(o==null?void 0:o.scheduled_at,o==null?void 0:o.interview_scheduled_at,o==null?void 0:o.next_interview_date,o==null?void 0:o.interview_date,o==null?void 0:o.interview_datetime);if(!c)return!1;const d=new Date(c).getTime();return Number.isFinite(d)&&d>0})||r.some(o=>{const c=Number(rr(o==null?void 0:o.interview_count,o==null?void 0:o.interviews_count,o==null?void 0:o.scheduled_interviews_count,o==null?void 0:o.upcoming_interviews_count,o==null?void 0:o.total_interviews)||0);return Number.isFinite(c)&&c>0})?!0:[e==null?void 0:e.interviews,t==null?void 0:t.interviews,e==null?void 0:e.interview_logs,t==null?void 0:t.interview_logs].some(o=>!Array.isArray(o)||o.length===0?!1:o.some(c=>{const d=Xl((c==null?void 0:c.status)||(c==null?void 0:c.stage)||"");if(d==="cancelled"||d==="rejected")return!1;const u=rr(c==null?void 0:c.scheduled_at,c==null?void 0:c.interview_date,c==null?void 0:c.interview_datetime);if(u){const f=new Date(u).getTime();if(Number.isFinite(f)&&f>0)return!0}return mm(rr(c==null?void 0:c.id,c==null?void 0:c.interview_id,c==null?void 0:c.uuid))}))},V1=(e={},t="new")=>{const r=Xl((e==null?void 0:e.status)||(e==null?void 0:e.stage)||t||"new");if(r==="interview_scheduled"&&!b9e(e)){const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},a=!!rr(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready),i=String(rr(e==null?void 0:e.interview_scheduling_note,s==null?void 0:s.interview_scheduling_note)||"").trim();return!a&&i?"interview_scheduled":"client_shortlisted"}return r},hk=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id,t==null?void 0:t.id,t==null?void 0:t.candidate_id,t==null?void 0:t.public_id];return Array.from(new Set(r.map(s=>String(s||"").trim().toLowerCase()).filter(Boolean)))},M_=(e={})=>String(rr(e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id)||"").trim().toLowerCase(),j9e=(e=[])=>{const t=new Map,r=new Map,s=(a,i)=>{if(!a)return!0;const l=new Date((a==null?void 0:a.scheduledAt)||0).getTime();return new Date(i||0).getTime()>=l};return e.forEach(a=>{var m,g,x;const i=Xl((a==null?void 0:a.status)||"scheduled");if(["cancelled","rejected","no_show"].includes(i))return;const l=i==="completed"?"interview_completed":"interview_scheduled",o=rr(a==null?void 0:a.scheduled_at,a==null?void 0:a.scheduledAt),c=String(rr((m=a==null?void 0:a.candidate)==null?void 0:m.id,a==null?void 0:a.candidate_id,(g=a==null?void 0:a.candidate)==null?void 0:g.candidate_id)||"").trim().toLowerCase(),d=String(rr((x=a==null?void 0:a.job)==null?void 0:x.id,a==null?void 0:a.job_id)||"").trim().toLowerCase();if(!c)return;const u={status:l,scheduledAt:o||null,interviewStatus:i};if(d){const h=`${c}::${d}`,p=t.get(h);s(p,o)&&t.set(h,u)}const f=r.get(c);s(f,o)&&r.set(c,u)}),{byCandidateJob:t,byCandidate:r}},OI=(e={},t="",r="")=>{const s=String(t||"").trim().toLowerCase(),a=String(r||"").trim().toLowerCase();if(s&&hk(e).includes(s))return!0;if(a){const i=String(rr(e==null?void 0:e.full_name,e==null?void 0:e.candidate_name,e==null?void 0:e.name)||"").trim().toLowerCase();if(i&&(i.includes(a)||a.includes(i)))return!0}return!1},nV=(e={},t="")=>{const r=V1(e);if(!["client_shortlisted","interview_scheduled","interview_completed"].includes(r))return!1;const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{};if(r==="client_shortlisted"){const i=!!rr(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready),l=String(rr(e==null?void 0:e.interview_scheduling_note,s==null?void 0:s.interview_scheduling_note)||"").trim();if(!i||!l)return!1}const a=v9e(e);return a&&t?a===String(t).trim():((e==null?void 0:e.is_assigned_recruiter)===!0,!0)},V4=e=>String(e||"").trim().split(/[\s_]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),RI={shortlisted:{label:"Shortlisted",icon:Ci,markerClass:"bg-green-50 border-green-200 text-green-700",badgeClass:"bg-green-50 border-green-200 text-green-700",latestClass:"ring-2 ring-green-200 border-green-200 shadow-md"},sent:{label:"Sent to Client",icon:Ai,markerClass:"bg-blue-50 border-blue-200 text-blue-700",badgeClass:"bg-blue-50 border-blue-200 text-blue-700",latestClass:"ring-2 ring-blue-200 border-blue-200 shadow-md"},interview:{label:"Interview",icon:Ya,markerClass:"bg-violet-50 border-violet-200 text-violet-700",badgeClass:"bg-violet-50 border-violet-200 text-violet-700",latestClass:"ring-2 ring-violet-200 border-violet-200 shadow-md"},hold:{label:"On Hold",icon:pn,markerClass:"bg-orange-50 border-orange-200 text-orange-700",badgeClass:"bg-orange-50 border-orange-200 text-orange-700",latestClass:"ring-2 ring-orange-200 border-orange-200 shadow-md"},rejected:{label:"Rejected",icon:Ja,markerClass:"bg-red-50 border-red-200 text-red-700",badgeClass:"bg-red-50 border-red-200 text-red-700",latestClass:"ring-2 ring-red-200 border-red-200 shadow-md"}},_9e=e=>{const t=co(e);return t.includes("reject")?"rejected":t.includes("hold")?"hold":t.includes("interview")?"interview":t.includes("shortlist")||["selected","hired","joined","offer_accepted"].includes(t)?"shortlisted":"sent"},w9e=(e={})=>{const t=co(e==null?void 0:e.status);if(t==="am_rejected")return"Account Manager";if(t==="client_rejected")return"Client";const r=V4(rr(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")||String(rr(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name)).trim().toLowerCase().includes("client")?"Client":""},gp=(e={})=>{const t=V4(rr(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();if(t.includes("account manager"))return"Account Manager";if(t.includes("client"))return"Client";if(t.includes("recruiter"))return"Recruiter";if(t.includes("candidate"))return"Candidate";const r=String(rr(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name)).trim().toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")?"Client":r.includes("recruiter")?"Recruiter":r.includes("candidate")?"Candidate":""},N9e=(e={})=>{const t=co(e==null?void 0:e.status);return t==="am_hold"||t==="hold_revisit"?"Account Manager":t==="client_hold"?"Client":gp(e)},k9e=(e={})=>{const t=co(e==null?void 0:e.status);return t==="am_shortlisted"?"Account Manager":t==="client_shortlisted"?"Client":gp(e)},S9e=(e={})=>{const t=co(e==null?void 0:e.status),r=gp(e);return r||(t==="sent_to_client"?"Account Manager":t==="sent_to_am"?"Recruiter":t==="client_viewed"?"Client":t==="am_viewed"?"Account Manager":"")},C9e=(e={},t="sent")=>{const r=co(e==null?void 0:e.status);if(r==="am_viewed")return`Viewed by ${gp(e)||"Account Manager"}`;if(r==="client_viewed")return`Viewed by ${gp(e)||"Client"}`;if(t==="hold"){const a=N9e(e);return a?`On Hold by ${a}`:"On Hold"}if(t==="interview")return r==="interview_completed"?"Interview Completed":r==="interview_scheduled"?"Interview Scheduled":"Interview";if(t==="shortlisted"){const a=k9e(e);return a?`Shortlisted by ${a}`:"Shortlisted"}if(t==="sent"){const a=S9e(e);return r==="sent_to_am"?a&&a!=="Account Manager"?`Sent to Account Manager by ${a}`:"Sent to Account Manager":r==="sent_to_client"?a&&a!=="Client"?`Sent to Client by ${a}`:"Sent to Client":a?`Sent by ${a}`:"Sent"}const s=w9e(e);return s?`Rejected by ${s}`:"Rejected"},A9e=e=>{if(!e)return"Date unavailable";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Date unavailable";const r=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t);return`${r}  ${s}`},E9e=e=>{const t=String(e||"").trim();return!t||/status\s+changed\s+from/i.test(t)||/(?:from|to)\s+[a-z]+_[a-z0-9_]+/i.test(t)||/\b[a-z]+_[a-z0-9_]+\b/i.test(t)?"":t},T9e=(...e)=>{const t=rr(...e);if(!t)return"";const r=String(t).trim(),a=r.toUpperCase().match(/^[A-Z]+-C-(\d+)$/);return a?`ATS-C-${a[1].padStart(4,"0")}`:r},dg=(e=[])=>{const t=a=>{const i=String(a||"").trim().toUpperCase().match(/^ATS-C-(\d+)$/);if(!i)return null;const l=Number(i[1]);return Number.isFinite(l)&&l>0?l:null};let r=e.reduce((a,i)=>{const l=t(i==null?void 0:i.public_id);return l&&l>a?l:a},0)+1;const s=new Set;return e.map(a=>{let l=t(a==null?void 0:a.public_id);if(!l||s.has(l)){for(;s.has(r);)r+=1;l=r,r+=1}return s.add(l),{...a,public_id:`ATS-C-${String(l).padStart(4,"0")}`}})},Au=(e={},t={})=>{const r=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},s=rr(e==null?void 0:e.candidate_id,e==null?void 0:e.id,e==null?void 0:e.application_id,r==null?void 0:r.candidate_id,r==null?void 0:r.id,e==null?void 0:e.public_id),a=Array.isArray(e==null?void 0:e.skills)?e.skills:Array.isArray(r==null?void 0:r.skills)?r.skills:[];return{...e,...t,id:s?String(s):"",candidate_id:rr(e==null?void 0:e.candidate_id,e==null?void 0:e.id,r==null?void 0:r.candidate_id,r==null?void 0:r.id,s),application_id:rr(e==null?void 0:e.application_id,e==null?void 0:e.applicationId,e==null?void 0:e.id),full_name:rr(e==null?void 0:e.full_name,e==null?void 0:e.candidate_name,e==null?void 0:e.name,r==null?void 0:r.full_name,r==null?void 0:r.candidate_name,r==null?void 0:r.name)||"Unknown",public_id:T9e(e==null?void 0:e.public_id,e==null?void 0:e.candidate_code,r==null?void 0:r.public_id,r==null?void 0:r.candidate_code),email:rr(e==null?void 0:e.email,e==null?void 0:e.candidate_email,r==null?void 0:r.email,r==null?void 0:r.candidate_email),phone:rr(e==null?void 0:e.phone,e==null?void 0:e.mobile,e==null?void 0:e.phone_number,r==null?void 0:r.phone,r==null?void 0:r.mobile,r==null?void 0:r.phone_number),current_location:rr(e==null?void 0:e.current_location,e==null?void 0:e.currentLocation,e==null?void 0:e.location,e==null?void 0:e.city,e==null?void 0:e.preferred_location,r==null?void 0:r.current_location,r==null?void 0:r.currentLocation,r==null?void 0:r.location,r==null?void 0:r.city,r==null?void 0:r.preferred_location),experience_years:rr(e==null?void 0:e.experience_years,e==null?void 0:e.experience,e==null?void 0:e.total_experience,r==null?void 0:r.experience_years,r==null?void 0:r.experience,r==null?void 0:r.total_experience),skills:a,status:V1(e,(t==null?void 0:t.status)||"new"),updated_at:(e==null?void 0:e.updated_at)||(e==null?void 0:e.sent_to_am_at)||(e==null?void 0:e.sent_to_client_at)||(e==null?void 0:e.created_at)||(t==null?void 0:t.updated_at)||null}};function P9e({candidate:e,onViewProfile:t,onViewTimeline:r,onScheduleInterview:s,currentUserId:a,isJobScoped:i,isHighlighted:l=!1,candidateCardKey:o=""}){var p;const c=V1(e,(e==null?void 0:e.status)||"new"),d=fk[c]||fk.new,u=tV(c,{isJobScoped:i}),f=nV(e,a),m=rr(e==null?void 0:e.email,e==null?void 0:e.candidate_email),g=rr(e==null?void 0:e.phone,e==null?void 0:e.mobile,e==null?void 0:e.phone_number),x=rr(e==null?void 0:e.current_location,e==null?void 0:e.location,e==null?void 0:e.city,e==null?void 0:e.preferred_location),h=rr(e==null?void 0:e.experience_years,e==null?void 0:e.experience,e==null?void 0:e.total_experience);return n.jsxs("div",{"data-candidate-key":o||void 0,className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow ${l?"ring-2 ring-violet-500 border-violet-300":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.full_name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.public_id||((p=e.id)==null?void 0:p.slice(0,8))})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.color}`,children:u})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(iu,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:m||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(E1,{className:"w-3 h-3"}),n.jsx("span",{children:g||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(Oc,{className:"w-3 h-3"}),n.jsx("span",{children:x||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(ua,{className:"w-3 h-3"}),n.jsx("span",{children:x9e(h)})]})]}),e.skills&&e.skills.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.skills.slice(0,4).map((v,b)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:typeof v=="string"?v:v==null?void 0:v.name},b)),e.skills.length>4&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.skills.length-4]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>t(e.id),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:[n.jsx(il,{className:"w-3 h-3"}),"View Details"]}),f&&n.jsxs("button",{onClick:()=>s(e),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-violet-600 text-white rounded-lg text-sm hover:bg-violet-700 transition-colors disabled:opacity-50",children:[n.jsx(Ya,{className:"w-3 h-3"}),"Schedule Interview"]}),n.jsxs("button",{onClick:()=>r(e),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(pn,{className:"w-3 h-3"}),"Timeline"]})]})]})}function LI(){const[e]=ea(),t=e.get("jobId")||"",r=e.get("jobTitle")||"",s=(e.get("candidate_id")||e.get("candidateId")||"").trim(),a=(e.get("candidate_name")||e.get("candidateName")||"").trim(),i=!!(s||a),l=!!t,o=y.useMemo(()=>y9e(),[]),[c,d]=y.useState([]),[u,f]=y.useState(!0),[m,g]=y.useState(!1),[x,h]=y.useState(""),[p,v]=y.useState(""),[b,j]=y.useState(!1),[N,w]=y.useState(null),[_,k]=y.useState(!1),[C,T]=y.useState(!1),[P,A]=y.useState(!1),[S,E]=y.useState(""),[O,I]=y.useState([]),L=y.useRef({}),Z=(localStorage.getItem("role")||"").toUpperCase(),H=["SUPER_ADMIN","HIRING_MANAGER","RECRUITER"].includes(Z),[R,D]=y.useState(!1),[Y,M]=y.useState(null),[X,ne]=y.useState(""),[J,ue]=y.useState(3),[ke,ve]=y.useState(!1),[je,ie]=y.useState(null),[se,z]=y.useState(""),[Te,fe]=y.useState(""),[Ie,ce]=y.useState("ai_chat"),[Ce,Ye]=y.useState(""),[at,pe]=y.useState(""),[ye,Pe]=y.useState(""),[et,We]=y.useState(""),[qe,ot]=y.useState(""),[Ct,He]=y.useState(!1),[mt,rt]=y.useState(!1),wt=l?PI:l9e;y.useEffect(()=>{Lt()},[t]),y.useEffect(()=>{rt(!1)},[t,s,a]);const At=async(W,V={})=>{var Q;try{return await G.get(W,V)}catch(K){if(((Q=K==null?void 0:K.response)==null?void 0:Q.status)===404)return G.get(`/v1${W}`,V);throw K}},$t=async(W,V={},Q={})=>{var K;try{return await G.post(W,V,Q)}catch(q){if(((K=q==null?void 0:q.response)==null?void 0:K.status)===404)return G.post(`/v1${W}`,V,Q);throw q}},Wt=async(W={})=>{var V;try{return await G.post("/v1/interviews/recruiter/schedule-bulk",W)}catch(Q){if(((V=Q==null?void 0:Q.response)==null?void 0:V.status)===404)return G.post("/interviews/recruiter/schedule-bulk",W);throw Q}},lr=async()=>{var W;try{const V=await G.get("/v1/interviews/recruiter/list"),Q=(V==null?void 0:V.data)??{};return Array.isArray(Q==null?void 0:Q.results)?Q.results:Array.isArray(Q==null?void 0:Q.data)?Q.data:Array.isArray(Q)?Q:[]}catch(V){if(((W=V==null?void 0:V.response)==null?void 0:W.status)===404){const Q=await G.get("/interviews/recruiter/list"),K=(Q==null?void 0:Q.data)??{};if(Array.isArray(K==null?void 0:K.results))return K.results;if(Array.isArray(K==null?void 0:K.data))return K.data;if(Array.isArray(K))return K}return[]}},sr=async(W=[])=>{if(!Array.isArray(W)||W.length===0)return W;const V=await lr();if(!Array.isArray(V)||V.length===0)return W;const{byCandidateJob:Q,byCandidate:K}=j9e(V);if(Q.size===0&&K.size===0)return W;const q=new Set(["rejected_by_recruiter","am_rejected","client_rejected","hired","joined","rejected","offer_declined"]);return W.map(F=>{const ee=Xl((F==null?void 0:F.status)||"");if(q.has(ee))return F;const me=hk(F);if(me.length===0)return F;const Ne=String(rr(F==null?void 0:F.job_id,F==null?void 0:F.requirement_id)||"").trim().toLowerCase();let ge=null;return Ne&&(ge=me.map(te=>Q.get(`${te}::${Ne}`)).find(Boolean)),ge||(ge=me.map(te=>K.get(te)).find(Boolean)),ge?Au({...F,status:ge.status,stage:ge.status,interview_status:ge.interviewStatus,scheduled_at:ge.scheduledAt,interview_scheduled_at:ge.scheduledAt,updated_at:ge.scheduledAt||(F==null?void 0:F.updated_at)}):F})},De=(W={})=>{var q,F;const V=[W==null?void 0:W.candidate_id,W==null?void 0:W.id,W==null?void 0:W.public_id,W==null?void 0:W.application_id,(q=W==null?void 0:W.candidate)==null?void 0:q.id,(F=W==null?void 0:W.candidate)==null?void 0:F.candidate_id],Q=new Set,K=[];return V.forEach(ee=>{const me=String(ee||"").trim();if(!me)return;const Ne=me.toLowerCase();Q.has(Ne)||(Q.add(Ne),K.push({raw:me,cacheKey:Ne}))}),K},yt=(W={})=>{const V=p9e(W);if(!V)return[];const Q=mk(V);return Q?[{raw:V,cacheKey:Q}]:[]},ut=async(W=[])=>{if(!Array.isArray(W)||W.length===0)return W;const V=q=>{const F=!mm(rr(q==null?void 0:q.current_location,q==null?void 0:q.location,q==null?void 0:q.city,q==null?void 0:q.preferred_location)),ee=!mm(rr(q==null?void 0:q.experience_years,q==null?void 0:q.experience,q==null?void 0:q.total_experience));return F||ee},Q=[],K=new Set;return W.filter(V).forEach(q=>{yt(q).forEach(F=>{L.current[F.cacheKey]||K.has(F.cacheKey)||(K.add(F.cacheKey),Q.push(F))})}),Q.length>0&&(await Promise.allSettled(Q.map(F=>G.get(`/v1/candidates/${F.raw}`)))).forEach((F,ee)=>{var ge,te,Se;const me=Q[ee];if(!me||F.status!=="fulfilled")return;const Ne=((te=(ge=F.value)==null?void 0:ge.data)==null?void 0:te.data)??((Se=F.value)==null?void 0:Se.data)??null;Ne&&typeof Ne=="object"&&(L.current[me.cacheKey]=Ne,De(Ne).forEach(Ue=>{L.current[Ue.cacheKey]=Ne}))}),W.map(q=>{const ee=De(q).find(Se=>!!L.current[Se.cacheKey]);if(!ee)return q;const me=L.current[ee.cacheKey];if(!me||typeof me!="object")return q;const Ne=(me==null?void 0:me.candidate)||(me==null?void 0:me.candidate_details)||(me==null?void 0:me.profile)||{},ge=fm(me,H)||{},te=Array.isArray(ge==null?void 0:ge.skills)?ge.skills.map(Se=>typeof Se=="string"?Se:(Se==null?void 0:Se.name)||"").filter(Boolean):[];return Au({...q,email:rr(q==null?void 0:q.email,me==null?void 0:me.email,Ne==null?void 0:Ne.email,ge==null?void 0:ge.email),phone:rr(q==null?void 0:q.phone,me==null?void 0:me.phone,me==null?void 0:me.mobile,me==null?void 0:me.phone_number,Ne==null?void 0:Ne.phone,Ne==null?void 0:Ne.mobile,Ne==null?void 0:Ne.phone_number,ge==null?void 0:ge.phone),current_location:rr(q==null?void 0:q.current_location,q==null?void 0:q.location,q==null?void 0:q.city,q==null?void 0:q.preferred_location,me==null?void 0:me.current_location,me==null?void 0:me.location,me==null?void 0:me.city,me==null?void 0:me.preferred_location,Ne==null?void 0:Ne.current_location,Ne==null?void 0:Ne.location,Ne==null?void 0:Ne.city,Ne==null?void 0:Ne.preferred_location,ge==null?void 0:ge.location,ge==null?void 0:ge.city,ge==null?void 0:ge.preferredLocation),experience_years:rr(q==null?void 0:q.experience_years,q==null?void 0:q.experience,q==null?void 0:q.total_experience,me==null?void 0:me.experience_years,me==null?void 0:me.experience,me==null?void 0:me.total_experience,Ne==null?void 0:Ne.experience_years,Ne==null?void 0:Ne.experience,Ne==null?void 0:Ne.total_experience,ge==null?void 0:ge.totalExperience),skills:Array.isArray(q==null?void 0:q.skills)&&q.skills.length>0?q.skills:Array.isArray(me==null?void 0:me.skills)&&me.skills.length>0?me.skills:Array.isArray(Ne==null?void 0:Ne.skills)&&Ne.skills.length>0?Ne.skills:te})})},Lt=async()=>{var W,V,Q,K;f(!0);try{if(l){const Se=(((W=(await G.get(`/v1/recruiter/jobs/${t}/submissions`)).data)==null?void 0:W.candidates)||[]).map(Ge=>Au({...Ge,id:Ge.candidate_id||Ge.id||Ge.application_id,candidate_id:Ge.candidate_id||Ge.id||Ge.application_id,application_id:Ge.application_id,full_name:Ge.full_name||Ge.candidate_name||Ge.name,public_id:Ge.public_id,status:Xl(Ge.status||"sent_to_am"),sent_to_am_at:Ge.sent_to_am_at,sent_to_client_at:Ge.sent_to_client_at,job_id:Ge.job_id||t,requirement_id:Ge.requirement_id||Ge.job_id||t,job_title:Ge.job_title||r,requirement_title:Ge.requirement_title||Ge.job_title||r,is_final:["rejected_by_recruiter","am_rejected","client_rejected","hired","rejected","offer_declined"].includes(Xl(Ge.status)),updated_at:Ge.updated_at||Ge.sent_to_am_at||Ge.sent_to_client_at||Ge.created_at||null})),Ue=await ut(Se),Be=await sr(Ue);d(dg(Be));return}const q=await At("/workflow/candidates",{params:{limit:500}}),ee=Array.from(new Map((((V=q.data)==null?void 0:V.candidates)||[]).map(ge=>[String((ge==null?void 0:ge.candidate_id)||(ge==null?void 0:ge.id)||(ge==null?void 0:ge.application_id)||(ge==null?void 0:ge.public_id)||""),ge])).values()).map(ge=>Au(ge)).sort((ge,te)=>new Date(te.updated_at||0)-new Date(ge.updated_at||0)),me=await ut(ee),Ne=await sr(me);d(dg(Ne))}catch(q){console.error("Failed to fetch candidates:",q);try{const F=await G.get("/v1/candidates"),ee=((Q=F.data)==null?void 0:Q.items)||((K=F.data)==null?void 0:K.data)||F.data||[],me=(Array.isArray(ee)?ee:[]).map(te=>Au(te)),Ne=await ut(me),ge=await sr(Ne);d(dg(ge))}catch(F){console.error("Fallback also failed:",F)}}finally{f(!1)}},Yt=()=>{ve(!1),ie(null),z(""),fe(""),ce("ai_chat"),Ye(""),pe(""),Pe(""),We(""),ot(""),He(!1)},be=(W={})=>{var q,F,ee,me,Ne,ge;const V=rr(W==null?void 0:W.candidate_id,W==null?void 0:W.id,W==null?void 0:W.application_id,(q=W==null?void 0:W.candidate)==null?void 0:q.id,(F=W==null?void 0:W.candidate)==null?void 0:F.candidate_id),Q=rr(W==null?void 0:W.job_id,W==null?void 0:W.requirement_id,(ee=W==null?void 0:W.job)==null?void 0:ee.id,(me=W==null?void 0:W.job)==null?void 0:me.job_id,t),K=rr(W==null?void 0:W.job_title,W==null?void 0:W.requirement_title,(Ne=W==null?void 0:W.job)==null?void 0:Ne.title,(ge=W==null?void 0:W.requirement)==null?void 0:ge.title,r)||String(Q||"");if(!V){alert("Candidate details are missing. Please refresh and try again.");return}if(!Q){alert("Job details are missing for this candidate. Open this workflow from a job and try again.");return}ie({...W,candidate_id:String(V)}),z(String(Q)),fe(K),ce("ai_chat"),Ye(""),pe(""),Pe(""),We(""),ot(""),ve(!0)},nt=async()=>{var K,q;const W=String((je==null?void 0:je.candidate_id)||"").trim(),V=String(se||"").trim();if(ot(""),!W||!V){ot("Missing candidate or job context for scheduling.");return}if(!Ce){ot("Select schedule date and time.");return}if(!Ie){ot("Select an interview type.");return}const Q=new Date(Ce);if(Number.isNaN(Q.getTime())){ot("Select a valid schedule date and time.");return}if(Q<new Date){ot("Schedule time must be in the future.");return}if(Ie==="video"&&!at.trim()){ot("Meeting link is required for Google Meet.");return}if(Ie==="in_person"&&!ye.trim()){ot("Location is required for in-person interviews.");return}He(!0);try{const F=Q.toISOString();await Wt({job_id:V,candidate_ids:[W],interview_type:Ie,scheduled_at:F,meeting_link:Ie==="video"?at.trim():null,location:Ie==="in_person"?ye.trim():null,contact_person:Ie==="in_person"?et.trim():null});let ee=!1;try{await $t(`/workflow/candidates/${W}/schedule-interview`,{job_id:V,interview_date:F,notes:`Interview scheduled via recruiter workflow (${Ie}).`}),ee=!0}catch(ge){console.warn("Interview was created but workflow status sync failed:",ge)}const me=W.toLowerCase(),Ne=ge=>!ge||typeof ge!="object"||!hk(ge).includes(me)?ge:Au({...ge,status:"interview_scheduled",stage:"interview_scheduled",scheduled_at:F,interview_scheduled_at:F,interview_scheduling_ready:!1,updated_at:F});d(ge=>dg((Array.isArray(ge)?ge:[]).map(Ne))),w(ge=>{if(!ge)return ge;const te=Ne(ge);return te&&typeof te=="object"?te:ge}),Yt(),ee&&Lt()}catch(F){ot(((q=(K=F==null?void 0:F.response)==null?void 0:K.data)==null?void 0:q.detail)||"Failed to schedule interview. Please try again.")}finally{He(!1)}},ze=async(W,V,Q=null)=>{var K,q;g(!0);try{const F=W&&typeof W=="object"?W:{id:W},ee=(F==null?void 0:F.candidate_id)||(F==null?void 0:F.id)||W,me=(F==null?void 0:F.job_id)||(F==null?void 0:F.requirement_id)||t||null;if(!ee)throw new Error("Candidate id missing for workflow action");let Ne="",ge={};switch(V){case"call":Ne=`/workflow/candidates/${ee}/call`;break;case"add_feedback":M(ee),D(!0),g(!1);return;case"hold":Ne=`/workflow/candidates/${ee}/hold`;break;case"reject":Ne=`/workflow/candidates/${ee}/reject`,ge={rejection_type:Q||"recruiter"};break;case"send_to_am":Ne=`/workflow/candidates/${ee}/send-to-am`,ge=me?{job_id:me}:{};break;case"schedule_interview":be({...F,candidate_id:String(ee),job_id:me?String(me):F==null?void 0:F.job_id});return;case"select":Ne=`/workflow/candidates/${ee}/select`;break;case"hire":Ne=`/workflow/candidates/${ee}/hire`;break;default:console.error("Unknown action:",V);return}await $t(Ne,ge),Lt()}catch(F){console.error("Action failed:",F),alert(((q=(K=F.response)==null?void 0:K.data)==null?void 0:q.detail)||"Action failed")}finally{g(!1)}},ht=async()=>{var W,V;if(!(!Y||!X.trim())){g(!0);try{await $t(`/workflow/candidates/${Y}/add-feedback`,null,{params:{feedback:X,rating:J}}),D(!1),ne(""),ue(3),M(null),Lt()}catch(Q){console.error("Feedback submission failed:",Q),alert(((V=(W=Q.response)==null?void 0:W.data)==null?void 0:V.detail)||"Failed to add feedback")}finally{g(!1)}}},Nt=async W=>{var Q;if(!W)return;const V=c.find(K=>String((K==null?void 0:K.id)||"")===String(W)||String((K==null?void 0:K.candidate_id)||"")===String(W));V?(w(V),j(!0)):(w(null),j(!0));try{k(!0);const K=V&&((Q=yt(V)[0])==null?void 0:Q.raw)||(()=>{const F=String(W||"").trim();return rV(F)?F:""})();if(!K)return;const q=await ln.getCandidateById(K);q&&(Array.from(new Set([W,K,q==null?void 0:q.id,q==null?void 0:q.candidate_id,q==null?void 0:q.public_id].map(ee=>String(ee||"").trim().toLowerCase()).filter(Boolean))).forEach(ee=>{L.current[ee]=q}),w(ee=>{const me={...ee||{},...q||{}};return{...me,status:V1(me,(me==null?void 0:me.status)||"new")}}))}catch(K){console.error("Failed to load candidate detail",K)}finally{k(!1)}},Oe=async W=>{var Q,K;if(W!=null&&W.candidate_id||W!=null&&W.id||W!=null&&W.application_id){T(!0),A(!0),I([]),E((W==null?void 0:W.full_name)||"Candidate");try{const q=Array.from(new Set([W==null?void 0:W.candidate_id,W==null?void 0:W.id,W==null?void 0:W.application_id].filter(Boolean).map(Ne=>String(Ne))));let F=[];for(const Ne of q)try{const ge=await At(`/workflow/candidates/${Ne}/timeline`),te=((Q=ge==null?void 0:ge.data)==null?void 0:Q.timeline)||((K=ge==null?void 0:ge.data)==null?void 0:K.data)||[];if(Array.isArray(te)&&te.length>0){F=te;break}Array.isArray(te)&&F.length===0&&(F=te)}catch{}let ee=Array.isArray(F)?F:[];if(!ee.some(Ne=>co(Ne==null?void 0:Ne.status).includes("interview"))&&q.length>0){const Ne=await lr(),ge=new Set(q.map(Se=>String(Se||"").trim().toLowerCase()).filter(Boolean)),te=(Array.isArray(Ne)?Ne:[]).filter(Se=>{var Be,Ge;const Ue=String(rr((Be=Se==null?void 0:Se.candidate)==null?void 0:Be.id,Se==null?void 0:Se.candidate_id,(Ge=Se==null?void 0:Se.candidate)==null?void 0:Ge.candidate_id)||"").trim().toLowerCase();return Ue&&ge.has(Ue)}).map(Se=>{var _e,Je;const Be=co(Se==null?void 0:Se.status)==="completed"?"interview_completed":"interview_scheduled",Ge=String((Se==null?void 0:Se.mode)||"interview").replace(/_/g," ").trim();return{id:`iv-${(Se==null?void 0:Se.id)||Math.random()}`,status:Be,note:Be==="interview_completed"?`Interview completed (${Ge}).`:`Interview scheduled (${Ge}).`,by:rr((_e=Se==null?void 0:Se.recruiter)==null?void 0:_e.full_name,(Je=Se==null?void 0:Se.recruiter)==null?void 0:Je.email),role:"Recruiter",at:rr(Se==null?void 0:Se.scheduled_at,Se==null?void 0:Se.created_at),created_at:rr(Se==null?void 0:Se.scheduled_at,Se==null?void 0:Se.created_at)}});if(te.length>0){const Se=new Map;[...te,...ee].forEach(Ue=>{const Be=[co(Ue==null?void 0:Ue.status),String((Ue==null?void 0:Ue.at)||(Ue==null?void 0:Ue.created_at)||"").trim()].join("::");Se.has(Be)||Se.set(Be,Ue)}),ee=Array.from(Se.values())}}I(ee)}catch(q){console.error("Failed to load candidate timeline:",q),I([])}finally{A(!1)}}},xe=y.useMemo(()=>{const W=c.map(Q=>Xl(Q.status)).filter(Boolean),V=new Set;return[...wt,...W].filter(Q=>!Q||V.has(Q)?!1:(V.add(Q),!0))},[wt,c]),Re=y.useMemo(()=>{const W=l?c.filter(q=>PI.includes(Xl(q.status))):c,V=i?W.filter(q=>OI(q,s,a)):W,Q=p&&!i?V.filter(q=>Xl(q.status)===p):V;if(!x.trim())return Q;const K=x.toLowerCase();return Q.filter(q=>{var F,ee,me,Ne;return((F=q.full_name)==null?void 0:F.toLowerCase().includes(K))||((ee=q.email)==null?void 0:ee.toLowerCase().includes(K))||((me=q.phone)==null?void 0:me.includes(K))||((Ne=q.skills)==null?void 0:Ne.some(ge=>(typeof ge=="string"?ge:(ge==null?void 0:ge.name)||"").toLowerCase().includes(K)))})},[c,x,l,p,i,s,a]),le=y.useMemo(()=>{if(!i)return"";const W=Re.find(V=>OI(V,s,a));return M_(W)},[Re,i,s,a]);y.useEffect(()=>{if(!le||mt)return;const W=Array.from(document.querySelectorAll("[data-candidate-key]")).find(V=>{var Q;return String(((Q=V==null?void 0:V.dataset)==null?void 0:Q.candidateKey)||"").trim().toLowerCase()===le});W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),rt(!0))},[le,mt]);const Me=y.useMemo(()=>N?fm(N,H):null,[H,N]),Ve=y.useMemo(()=>xe.map(W=>({value:W,label:tV(W,{isJobScoped:l})})),[l,xe]),Xe=y.useMemo(()=>{if(!Array.isArray(O))return[];const W=V=>{const Q=(V==null?void 0:V.at)||(V==null?void 0:V.created_at)||(V==null?void 0:V.updated_at)||null;if(!Q)return 0;const K=new Date(Q).getTime();return Number.isFinite(K)?K:0};return[...O].sort((V,Q)=>W(Q)-W(V))},[O]),he=y.useMemo(()=>nV(N,o),[N,o]);return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Candidate Workflow"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l?"Job-specific workflow and submissions timeline":"Track and manage candidates through the recruitment pipeline"}),l&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg bg-indigo-50 text-indigo-800 px-3 py-1.5 text-sm",children:[n.jsx("span",{className:"font-medium",children:"Requirement:"}),n.jsx("span",{children:r||t})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, email, phone, skills...",value:x,onChange:W=>h(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.jsxs("select",{value:p,onChange:W=>v(W.target.value),className:"w-44 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:"",children:"All Status"}),Ve.map(W=>n.jsx("option",{value:W.value,children:W.label},W.value))]}),n.jsxs("button",{onClick:()=>{Lt()},className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(jo,{className:"w-4 h-4"}),"Refresh"]})]}),u?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx(Ws,{className:"w-8 h-8 animate-spin text-blue-600"}),n.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading candidates..."})]}):Re.length===0?n.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsx(Hr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No candidates found"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x?"Try adjusting your search terms":"No candidates found for the selected filters"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Re.map(W=>n.jsx(P9e,{candidate:W,onViewProfile:Nt,onViewTimeline:Oe,onScheduleInterview:V=>ze(V,"schedule_interview"),currentUserId:o,isJobScoped:l,isHighlighted:le===M_(W),candidateCardKey:M_(W)},W.id))}),C&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-2xl max-h-[80vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl flex flex-col",children:[n.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Status Timeline"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:S})]}),n.jsx("button",{onClick:()=>{T(!1),I([]),E("")},className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500",children:n.jsx(Ja,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"px-5 py-4 overflow-y-auto",children:P?n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Loading timeline..."]}):Xe.length===0?n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline entries found."}):n.jsx("div",{className:"space-y-4",children:Xe.map((W,V)=>{const Q=_9e(W==null?void 0:W.status),K=RI[Q]||RI.sent,q=K.icon,F=C9e(W,Q),ee=rr(W==null?void 0:W.by,W==null?void 0:W.user,W==null?void 0:W.actor_name),me=V4(rr(W==null?void 0:W.role,W==null?void 0:W.actor_role)),Ne=E9e(W==null?void 0:W.note),ge=A9e((W==null?void 0:W.at)||(W==null?void 0:W.created_at)||(W==null?void 0:W.updated_at)),te=V===0;return n.jsxs("div",{className:"relative pl-12",children:[V<Xe.length-1&&n.jsx("span",{className:"absolute left-[17px] top-10 bottom-[-16px] w-px bg-gray-200 dark:bg-gray-700"}),n.jsx("span",{className:`absolute left-0 top-2 flex h-9 w-9 items-center justify-center rounded-full border ${K.markerClass}`,children:n.jsx(q,{className:"h-4 w-4"})}),n.jsxs("div",{className:`rounded-xl border bg-white dark:bg-gray-900 px-4 py-3 shadow-sm ${te?K.latestClass:"border-gray-200 dark:border-gray-700"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold ${K.badgeClass}`,children:F}),te&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-semibold text-gray-600 dark:bg-gray-800 dark:text-gray-300",children:"Latest"})]}),n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:ge})]}),(ee||me)&&n.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[ee||"System",me?`  ${me}`:""]}),Ne&&n.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:Ne})]})]},W.id||`${W.status||"status"}-${W.at||V}`)})})})]})}),ke&&je&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Schedule Interview"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Candidate: ",(je==null?void 0:je.full_name)||"Candidate"]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Job: ",Te||se]})]}),n.jsx("button",{onClick:Yt,className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500","aria-label":"Close schedule interview modal",children:n.jsx(Ja,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-5 py-4 space-y-4",children:[qe&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:qe}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Interview Type"}),n.jsxs("select",{value:Ie,onChange:W=>ce(W.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"ai_chat",children:"AI Chat Interview"}),n.jsx("option",{value:"video",children:"Google Meet"}),n.jsx("option",{value:"in_person",children:"In-Person"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Date & Time"}),n.jsx("input",{type:"datetime-local",value:Ce,onChange:W=>Ye(W.target.value),min:g9e(new Date),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),Ie==="video"&&n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Meet Link"}),n.jsx("input",{type:"url",value:at,onChange:W=>pe(W.target.value),placeholder:"https://meet.google.com/...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),Ie==="in_person"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),n.jsx("input",{value:ye,onChange:W=>Pe(W.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Contact Person"}),n.jsx("input",{value:et,onChange:W=>We(W.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),n.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:Yt,className:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:nt,disabled:Ct||!Ce||!Ie,className:"px-4 py-2 rounded-lg bg-violet-600 text-white hover:bg-violet-700 transition-colors disabled:opacity-60",children:Ct?"Scheduling...":"Schedule Interview"})]})]})}),b&&N&&Me&&n.jsx(W4,{candidate:N,profile:Me,loading:_,hideQuickActions:!he,customQuickActions:he?[{label:"Schedule Interview",variant:"primary",disabled:m,onClick:W=>ze(W,"schedule_interview")}]:void 0,workflowStatusOptions:Ve,onClose:()=>{j(!1),w(null),k(!1)},onPreviewResume:W=>{W&&window.open(W,"_blank")}}),R&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[n.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Call Feedback"})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rating"}),n.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(W=>n.jsx("button",{onClick:()=>ue(W),className:`w-10 h-10 rounded-lg font-medium transition-colors ${J>=W?"bg-yellow-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:W},W))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Feedback Notes"}),n.jsx("textarea",{value:X,onChange:W=>ne(W.target.value),placeholder:"Enter your call feedback...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>{D(!1),ne(""),M(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ht,disabled:!X.trim()||m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:m?"Saving...":"Save Feedback"})]})]})})]})}const II=[{key:"checkbox",label:"",width:"50px",fixed:!0},{key:"serial",label:"S#",width:"60px",fixed:!0},{key:"recruiterName",label:"Recruiter Name",width:"150px"},{key:"status",label:"Status",width:"120px"},{key:"comment",label:"Comment",width:"150px"},{key:"month",label:"Month",width:"80px"},{key:"date",label:"Date",width:"120px"},{key:"clients",label:"Clients",width:"120px"},{key:"reqJrId",label:"Req / JR ID",width:"120px"},{key:"spocHm",label:"SPOC / HM",width:"120px"},{key:"clientTaBu",label:"Client TA / BU",width:"130px"},{key:"amName",label:"AM Name",width:"120px"},{key:"skills",label:"Skills",width:"150px"},{key:"candidateName",label:"Candidate Name",width:"150px"},{key:"contactNumber",label:"Contact #",width:"120px"},{key:"emailId",label:"Email ID",width:"180px"},{key:"currentCompany",label:"Current Company",width:"150px"},{key:"designation",label:"Designation",width:"120px"},{key:"experienceInField",label:"Experience in Field",width:"140px"},{key:"totalExperience",label:"Total Experience",width:"130px"},{key:"relevantExperience",label:"Relevant Experience",width:"150px"},{key:"currentCtc",label:"Current CTC",width:"120px"},{key:"expectedCtc",label:"Expected CTC",width:"120px"},{key:"noticePeriod",label:"Notice Period (LWD)",width:"160px"},{key:"qualification",label:"Qualification",width:"120px"},{key:"currentLocation",label:"Current Location",width:"140px"},{key:"preferredLocation",label:"Preferred Location",width:"160px"},{key:"certifications",label:"Certifications",width:"150px"},{key:"vendors",label:"Vendors",width:"120px"},{key:"actions",label:"Actions",width:"100px"}],sV=y.forwardRef(({isAdmin:e},t)=>{const[r,s]=y.useState([]),[a,i]=y.useState(new Set),[l,o]=y.useState(1),[c,d]=y.useState(10),[u,f]=y.useState(!0);y.useImperativeHandle(t,()=>({addEntry:N=>{const w=[...r,{...N,id:Date.now(),serial:r.length+1,date:m(N.date),noticePeriod:N.noticePeriod?m(N.noticePeriod):""}];s(w),localStorage.setItem("recruiterTrackerData",JSON.stringify(w))}})),y.useEffect(()=>{const N=localStorage.getItem("recruiterTrackerData");if(N)s(JSON.parse(N));else{const w=[{id:1,serial:1,recruiterName:"John Doe",status:"In Progress",comment:"Good candidate",month:"JAN",date:"15 JAN 2024",clients:"ABC Corp",reqJrId:"JR001",spocHm:"Jane Smith",clientTaBu:"IT",amName:"Mike Johnson",skills:["React","Node.js"],candidateName:"Alice Brown",contactNumber:"9876543210",emailId:"alice@example.com",currentCompany:"XYZ Ltd",designation:"Developer",experienceInField:3,totalExperience:5,relevantExperience:3,currentCtc:6e5,expectedCtc:8e5,noticePeriod:"15 FEB 2024",qualification:"B.Tech",currentLocation:"Mumbai",preferredLocation:"Bangalore",certifications:["AWS"],vendors:"Vendor A"}];s(w),localStorage.setItem("recruiterTrackerData",JSON.stringify(w))}f(!1)},[]);const m=N=>{if(!N)return"";const w=new Date(N),_=w.getDate().toString().padStart(2,"0"),k=w.toLocaleString("default",{month:"short"}).toUpperCase(),C=w.getFullYear();return`${_} ${k} ${C}`},g=N=>{i(N?new Set(b.map(w=>w.id)):new Set)},x=(N,w)=>{const _=new Set(a);w?_.add(N):_.delete(N),i(_)},h=N=>{if(e||confirm("Are you sure you want to delete this entry?")){const w=r.filter(_=>_.id!==N);s(w),localStorage.setItem("recruiterTrackerData",JSON.stringify(w)),i(_=>{const k=new Set(_);return k.delete(N),k})}},p=()=>{if(!e&&a.size>0){alert("You can only delete your own entries.");return}if(confirm(`Delete ${a.size} selected entries?`)){const N=r.filter(w=>!a.has(w.id));s(N),localStorage.setItem("recruiterTrackerData",JSON.stringify(N)),i(new Set)}},v=(N=!1)=>{const w=N&&a.size>0?r.filter(A=>a.has(A.id)):r,_=Ol.json_to_sheet(w.map(A=>({...A,skills:Array.isArray(A.skills)?A.skills.join(", "):A.skills,certifications:Array.isArray(A.certifications)?A.certifications.join(", "):A.certifications}))),k=Ol.book_new();Ol.book_append_sheet(k,_,"Recruiter Tracker");const C=new Date().toLocaleString("default",{month:"short"}).toUpperCase(),T=new Date().getFullYear(),P=`Recruiter_Tracker_${C}_${T}.xlsx`;hp(k,P)},b=r.slice((l-1)*c,l*c),j=Math.ceil(r.length/c);return u?n.jsx("div",{className:"p-8 text-center",children:"Loading tracker data..."}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"flex items-center gap-4",children:a.size>0&&n.jsxs("span",{className:"text-sm text-gray-600",children:[a.size," row",a.size>1?"s":""," selected"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[a.size>0&&n.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-red-600 to-red-700 text-white rounded-md hover:from-red-700 hover:to-red-800 focus:ring-2 focus:ring-red-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(om,{className:"w-4 h-4"}),"Delete Selected"]}),n.jsxs("button",{onClick:()=>v(!1),className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-md hover:from-emerald-700 hover:to-emerald-800 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(Lv,{className:"w-4 h-4"}),"Export All"]}),a.size>0&&n.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(Lv,{className:"w-4 h-4"}),"Export Selected"]})]})]}),n.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsx("tr",{children:II.map(N=>n.jsx("th",{className:`px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-gray-200 ${N.fixed?"sticky left-0 bg-gray-50 z-20":""}`,style:{width:N.width,minWidth:N.width},children:N.key==="checkbox"?n.jsx("input",{type:"checkbox",checked:a.size===b.length&&b.length>0,onChange:w=>g(w.target.checked),className:"rounded border-gray-300"}):N.label},N.key))})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((N,w)=>n.jsx("tr",{className:w%2===0?"bg-white":"bg-gray-50",children:II.map(_=>n.jsx("td",{className:`px-3 py-2 text-sm text-gray-900 border-r border-gray-200 ${_.fixed?"sticky left-0 bg-inherit z-10":""}`,style:{width:_.width,minWidth:_.width},children:_.key==="checkbox"?n.jsx("input",{type:"checkbox",checked:a.has(N.id),onChange:k=>x(N.id,k.target.checked),className:"rounded border-gray-300"}):_.key==="serial"?N.serial:_.key==="skills"||_.key==="certifications"?Array.isArray(N[_.key])?N[_.key].join(", "):N[_.key]:_.key==="actions"?n.jsx("button",{onClick:()=>h(N.id),className:"inline-flex items-center justify-center p-1.5 text-red-600 hover:text-white hover:bg-gradient-to-r hover:from-red-600 hover:to-red-700 rounded-md transition-all duration-200 focus:ring-2 focus:ring-red-500 focus:ring-offset-1",title:"Delete row",children:n.jsx(om,{className:"w-4 h-4"})}):N[_.key]||""},_.key))},N.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Rows per page:"}),n.jsxs("select",{value:c,onChange:N=>{d(Number(N.target.value)),o(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm text-gray-700",children:[Math.min((l-1)*c+1,r.length)," -"," ",Math.min(l*c,r.length)," of ",r.length]}),n.jsx("button",{onClick:()=>o(N=>Math.max(N-1,1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-1",children:"Previous"}),n.jsx("button",{onClick:()=>o(N=>Math.min(N+1,j)),disabled:l===j,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-1",children:"Next"})]})]})]})});sV.displayName="TrackerTable";const O9e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],R9e=["New","In Progress","Submitted","Interview","Offered","Joined","Closed"];function L9e({isAdmin:e,onSubmit:t}){const[r,s]=y.useState({recruiterName:"",status:"",comment:"",month:new Date().toLocaleString("default",{month:"short"}).toUpperCase(),date:new Date().toISOString().split("T")[0],clients:"",reqJrId:"",spocHm:"",clientTaBu:"",amName:"",skills:[],candidateName:"",contactNumber:"",emailId:"",currentCompany:"",designation:"",experienceInField:"",totalExperience:"",relevantExperience:"",currentCtc:"",expectedCtc:"",noticePeriod:"",qualification:"",currentLocation:"",preferredLocation:"",certifications:[],vendors:""}),[a,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState(!1),u=(p,v)=>{s(b=>({...b,[p]:v}))},f=()=>{a.trim()&&!r.skills.includes(a.trim())&&(s(p=>({...p,skills:[...p.skills,a.trim()]})),i(""))},m=p=>{s(v=>({...v,skills:v.skills.filter(b=>b!==p)}))},g=()=>{l.trim()&&!r.certifications.includes(l.trim())&&(s(p=>({...p,certifications:[...p.certifications,l.trim()]})),o(""))},x=p=>{s(v=>({...v,certifications:v.certifications.filter(b=>b!==p)}))},h=async p=>{p.preventDefault();const b=["recruiterName","status","month","date","clients","candidateName","contactNumber","emailId"].filter(w=>!r[w]);if(b.length>0){alert(`Please fill in required fields: ${b.join(", ")}`);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.emailId)){alert("Please enter a valid email address");return}if(!/^(\+91)?[6-9]\d{9}$/.test(r.contactNumber.replace(/\s+/g,""))){alert("Please enter a valid Indian phone number");return}d(!0);try{t&&await t(r),s({recruiterName:"",status:"",comment:"",month:new Date().toLocaleString("default",{month:"short"}).toUpperCase(),date:new Date().toISOString().split("T")[0],clients:"",reqJrId:"",spocHm:"",clientTaBu:"",amName:"",skills:[],candidateName:"",contactNumber:"",emailId:"",currentCompany:"",designation:"",experienceInField:"",totalExperience:"",relevantExperience:"",currentCtc:"",expectedCtc:"",noticePeriod:"",qualification:"",currentLocation:"",preferredLocation:"",certifications:[],vendors:""}),alert("Entry added successfully!")}catch{alert("Error adding entry. Please try again.")}finally{d(!1)}};return n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Add New Tracker Entry"}),n.jsxs("form",{onSubmit:h,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Basic Tracking Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recruiter Name *"}),n.jsx("input",{type:"text",value:r.recruiterName,onChange:p=>u("recruiterName",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),n.jsxs("select",{value:r.status,onChange:p=>u("status",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Status"}),R9e.map(p=>n.jsx("option",{value:p,children:p},p))]})]}),n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),n.jsx("textarea",{value:r.comment,onChange:p=>u("comment",p.target.value),rows:1,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Requirement / Client Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month *"}),n.jsx("select",{value:r.month,onChange:p=>u("month",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:O9e.map(p=>n.jsx("option",{value:p,children:p},p))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),n.jsx("input",{type:"date",value:r.date,onChange:p=>u("date",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clients *"}),n.jsx("input",{type:"text",value:r.clients,onChange:p=>u("clients",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Req / JR ID"}),n.jsx("input",{type:"text",value:r.reqJrId,onChange:p=>u("reqJrId",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SPOC / HM"}),n.jsx("input",{type:"text",value:r.spocHm,onChange:p=>u("spocHm",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client TA / BU"}),n.jsx("input",{type:"text",value:r.clientTaBu,onChange:p=>u("clientTaBu",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AM Name"}),n.jsx("input",{type:"text",value:r.amName,onChange:p=>u("amName",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Skill + Candidate Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:a,onChange:p=>i(p.target.value),onKeyPress:p=>p.key==="Enter"&&(p.preventDefault(),f()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add skill"}),n.jsx("button",{type:"button",onClick:f,className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200 font-medium",children:"Add"})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:r.skills.map(p=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[p,n.jsx("button",{type:"button",onClick:()=>m(p),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-200 rounded-full w-4 h-4 flex items-center justify-center transition-all duration-150",children:""})]},p))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Candidate Name *"}),n.jsx("input",{type:"text",value:r.candidateName,onChange:p=>u("candidateName",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number *"}),n.jsx("input",{type:"tel",value:r.contactNumber,onChange:p=>u("contactNumber",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"9876543210",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email ID *"}),n.jsx("input",{type:"email",value:r.emailId,onChange:p=>u("emailId",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Experience Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Company"}),n.jsx("input",{type:"text",value:r.currentCompany,onChange:p=>u("currentCompany",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),n.jsx("input",{type:"text",value:r.designation,onChange:p=>u("designation",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience in Field"}),n.jsx("input",{type:"number",value:r.experienceInField,onChange:p=>u("experienceInField",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Experience"}),n.jsx("input",{type:"number",value:r.totalExperience,onChange:p=>u("totalExperience",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relevant Experience"}),n.jsx("input",{type:"number",value:r.relevantExperience,onChange:p=>u("relevantExperience",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Compensation Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current CTC"}),n.jsx("input",{type:"number",value:r.currentCtc,onChange:p=>u("currentCtc",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected CTC"}),n.jsx("input",{type:"number",value:r.expectedCtc,onChange:p=>u("expectedCtc",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Notice & Education"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notice Period (LWD)"}),n.jsx("input",{type:"date",value:r.noticePeriod,onChange:p=>u("noticePeriod",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification"}),n.jsx("input",{type:"text",value:r.qualification,onChange:p=>u("qualification",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Location"}),n.jsx("input",{type:"text",value:r.currentLocation,onChange:p=>u("currentLocation",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Location"}),n.jsx("input",{type:"text",value:r.preferredLocation,onChange:p=>u("preferredLocation",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Certification + Vendor"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certifications"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:l,onChange:p=>o(p.target.value),onKeyPress:p=>p.key==="Enter"&&(p.preventDefault(),g()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add certification"}),n.jsx("button",{type:"button",onClick:g,className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200 font-medium",children:"Add"})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:r.certifications.map(p=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[p,n.jsx("button",{type:"button",onClick:()=>x(p),className:"text-green-600 hover:text-green-800 hover:bg-green-200 rounded-full w-4 h-4 flex items-center justify-center transition-all duration-150",children:""})]},p))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendors"}),n.jsx("input",{type:"text",value:r.vendors,onChange:p=>u("vendors",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed font-medium focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:c?"Adding...":"Add To Tracker"})})]})]})}function I9e(){const t=ys().pathname.includes("/admin/"),r=y.useRef();return n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Recruiter Tracker Management":"Recruiter Tracker"}),n.jsx("p",{className:"text-gray-600 mt-2",children:t?"Manage and monitor all recruiter tracking activities":"Spreadsheet-style tracker for daily recruitment operations"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx(L9e,{isAdmin:t,onSubmit:s=>{r.current&&r.current.addEntry&&r.current.addEntry(s)}})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n.jsx(sV,{ref:r,isAdmin:t})})]})})}const FI=["#7c3aed","#06b6d4","#f97316","#10b981","#ef4444"],Eu=e=>e.toISOString().slice(0,10),F9e=e=>{const t=new Date;if(e==="today")return{from:Eu(t),to:Eu(t)};if(e==="week"){const s=(t.getDay()+6)%7,a=new Date(t);return a.setDate(t.getDate()-s),{from:Eu(a),to:Eu(t)}}if(e==="month"){const r=new Date(t.getFullYear(),t.getMonth(),1);return{from:Eu(r),to:Eu(t)}}return{from:"",to:""}};function D9e(){var O,I,L,Z;const[e,t]=y.useState("month"),[r,s]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState(""),[u,f]=y.useState(null),[m,g]=y.useState(null),[x,h]=y.useState(null),[p,v]=y.useState(null),[b,j]=y.useState("candidates"),[N,w]=y.useState("csv"),_=y.useMemo(()=>e==="custom"?{from:r,to:a}:F9e(e),[e,r,a]),k=y.useMemo(()=>{const H={};return _.from&&(H.from=_.from),_.to&&(H.to=_.to),H},[_]);y.useEffect(()=>{(async()=>{o(!0),d("");try{const[R,D,Y,M]=await Promise.all([G.get("/v1/reports/candidates",{params:k}),G.get("/v1/reports/jobs",{params:k}),G.get("/v1/reports/interviews",{params:k}),G.get("/v1/reports/recruiters",{params:k})]);f(R.data),g(D.data),h(Y.data),v(M.data)}catch(R){console.error("Failed to load reports:",R),d("Failed to load reports. Please try again.")}finally{o(!1)}})()},[k]);const C=async()=>{try{const H=await G.get("/v1/reports/export",{params:{type:b,format:N,...k},responseType:"blob"}),R=new Blob([H.data]),D=window.URL.createObjectURL(R),Y=document.createElement("a");Y.href=D,Y.download=`${b}_report.${N}`,Y.click(),window.URL.revokeObjectURL(D)}catch(H){console.error("Export failed:",H),d("Export failed. Please try again.")}},T=((O=u==null?void 0:u.candidates_by_status)==null?void 0:O.map(H=>({name:H.status,value:H.count})))||[],P=((I=u==null?void 0:u.candidates_by_source)==null?void 0:I.map(H=>({name:H.source,count:H.count})))||[],A=((L=m==null?void 0:m.jobs_by_department)==null?void 0:L.map(H=>({name:H.department,count:H.count})))||[],S=(u==null?void 0:u.trend)||[],E=(x==null?void 0:x.trend)||[];return n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Reports"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Real-time recruiting analytics and performance"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:e,onChange:H=>t(H.target.value),children:[n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"This week"}),n.jsx("option",{value:"month",children:"This month"}),n.jsx("option",{value:"custom",children:"Custom range"})]}),e==="custom"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"date",value:r,onChange:H=>s(H.target.value),className:"px-3 py-2 border rounded text-sm bg-white"}),n.jsx("input",{type:"date",value:a,onChange:H=>i(H.target.value),className:"px-3 py-2 border rounded text-sm bg-white"})]}),n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:b,onChange:H=>j(H.target.value),children:[n.jsx("option",{value:"candidates",children:"Candidates"}),n.jsx("option",{value:"jobs",children:"Jobs"}),n.jsx("option",{value:"interviews",children:"Interviews"}),n.jsx("option",{value:"recruiters",children:"Recruiters"})]}),n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:N,onChange:H=>w(H.target.value),children:[n.jsx("option",{value:"csv",children:"CSV"}),n.jsx("option",{value:"xlsx",children:"Excel"}),n.jsx("option",{value:"pdf",children:"PDF"})]}),n.jsx("button",{onClick:C,className:"px-4 py-2 bg-purple-600 text-white rounded text-sm",children:"Export"})]})]}),c&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:c}),l?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center text-gray-500",children:"Loading reports..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Candidates"}),n.jsx("div",{className:"text-2xl font-semibold",children:(u==null?void 0:u.total_candidates)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"New Candidates"}),n.jsx("div",{className:"text-2xl font-semibold",children:(u==null?void 0:u.new_candidates)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Jobs"}),n.jsx("div",{className:"text-2xl font-semibold",children:(m==null?void 0:m.total_jobs)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Interviews"}),n.jsx("div",{className:"text-2xl font-semibold",children:(x==null?void 0:x.total_interviews)??0})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Status"}),n.jsx("div",{className:"h-64",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Z2,{children:[n.jsx(al,{data:T,dataKey:"value",nameKey:"name",outerRadius:90,children:T.map((H,R)=>n.jsx(Fd,{fill:FI[R%FI.length]},`cell-${H.name}-${R}`))}),n.jsx(Qn,{}),n.jsx(gd,{})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Sources"}),n.jsx("div",{className:"h-64",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Y2,{data:P,children:[n.jsx(tc,{strokeDasharray:"3 3"}),n.jsx(yi,{dataKey:"name"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(vo,{dataKey:"count",fill:"#7c3aed"})]})})})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Jobs by Department"}),n.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-600 mb-3",children:[n.jsxs("span",{className:"bg-gray-50 px-2 py-1 rounded",children:["Active: ",(m==null?void 0:m.active_jobs)??0]}),n.jsxs("span",{className:"bg-gray-50 px-2 py-1 rounded",children:["Closed: ",(m==null?void 0:m.closed_jobs)??0]})]}),n.jsx("div",{className:"h-64",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(Y2,{data:A,children:[n.jsx(tc,{strokeDasharray:"3 3"}),n.jsx(yi,{dataKey:"name"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(vo,{dataKey:"count",fill:"#10b981"})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Interview Outcomes"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Scheduled: ",(x==null?void 0:x.scheduled_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Scheduled today: ",(x==null?void 0:x.scheduled_today)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Completed: ",(x==null?void 0:x.completed_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Cancelled: ",(x==null?void 0:x.cancelled_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["No-show rate:"," ",(((x==null?void 0:x.no_show_rate)??0)*100).toFixed(1),"%"]})]})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(X2,{data:S,children:[n.jsx(tc,{strokeDasharray:"3 3"}),n.jsx(yi,{dataKey:"date"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(zd,{type:"monotone",dataKey:"count",stroke:"#7c3aed"})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Interview Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(X2,{data:E,children:[n.jsx(tc,{strokeDasharray:"3 3"}),n.jsx(yi,{dataKey:"date"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(zd,{type:"monotone",dataKey:"count",stroke:"#06b6d4"})]})})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Recruiter Performance"}),(Z=p==null?void 0:p.recruiters)!=null&&Z.length?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Recruiter"}),n.jsx("th",{className:"border p-2 text-left",children:"Candidates Sourced"}),n.jsx("th",{className:"border p-2 text-left",children:"Interviews Scheduled"}),n.jsx("th",{className:"border p-2 text-left",children:"Hires Made"})]})}),n.jsx("tbody",{children:p.recruiters.map(H=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:H.recruiter_name}),n.jsx("td",{className:"border p-2",children:H.candidates_sourced}),n.jsx("td",{className:"border p-2",children:H.interviews_scheduled}),n.jsx("td",{className:"border p-2",children:H.hires_made})]},H.recruiter_id))})]})}):n.jsx("div",{className:"text-sm text-gray-500",children:"No recruiter data found."})]})]})]})})}function aV({candidate:e,onClose:t,setExternalForm:r,onSubmit:s}){if(!e)return n.jsx("div",{className:"p-6 bg-white rounded shadow",children:"No candidate selected"});const[a,i]=y.useState({job_title:e.job_title||"",department:"",employment_type:"Full-time",start_date:"",compensation:"",currency:"INR",work_location:"",probation_period:"3 months",reporting_manager:"",acceptance_deadline:""});y.useEffect(()=>{r==null||r(a)},[]);function l(c){const d={...a,[c.target.name]:c.target.value};i(d),r==null||r(d)}async function o(){if(!a.job_title||!a.start_date||!a.compensation){alert("Please fill required fields");return}await s({candidate_id:e.id||e._id,candidate_name:e.full_name,candidate_email:e.email,...a})}return n.jsxs("div",{className:"p-6 bg-white rounded shadow space-y-4 w-full max-w-lg",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Send Offer Letter"}),n.jsx("input",{value:e.full_name,disabled:!0,className:"w-full p-2 border rounded bg-gray-50"}),n.jsx("input",{value:e.email,disabled:!0,className:"w-full p-2 border rounded bg-gray-50"}),n.jsx("input",{name:"job_title",value:a.job_title,placeholder:"Job Title *",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"department",value:a.department,placeholder:"Department",onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("select",{name:"employment_type",value:a.employment_type,onChange:l,className:"w-full p-2 border rounded",children:[n.jsx("option",{children:"Full-time"}),n.jsx("option",{children:"Part-time"}),n.jsx("option",{children:"Contract"})]}),n.jsx("input",{type:"date",name:"start_date",value:a.start_date,onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"compensation",value:a.compensation,placeholder:"Compensation Amount *",onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("select",{name:"currency",value:a.currency,onChange:l,className:"w-full p-2 border rounded",children:[n.jsx("option",{children:"INR"}),n.jsx("option",{children:"USD"})]}),n.jsx("input",{name:"work_location",value:a.work_location,placeholder:"Work Location",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"probation_period",value:a.probation_period,placeholder:"Probation Period",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"reporting_manager",value:a.reporting_manager,placeholder:"Reporting Manager",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{type:"date",name:"acceptance_deadline",value:a.acceptance_deadline,onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{onClick:o,className:"px-4 py-2 bg-green-600 text-white rounded",children:"Send Offer"})]})]})}function $9e(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(""),l=Tt();y.useEffect(()=>{o()},[]);async function o(){var c;try{s(!0);const d=await G.get("/v1/consultants"),u=((c=d.data)==null?void 0:c.data)??d.data??[];t(Array.isArray(u)?u:[])}catch(d){console.error(d),t([])}finally{s(!1)}}return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultants"}),n.jsx("input",{value:a,onChange:c=>i(c.target.value),placeholder:"Search name / email",className:"border rounded px-3 py-1"})]}),n.jsx("div",{className:"bg-white border rounded shadow-sm overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:"Name"}),n.jsx("th",{className:"px-4 py-3",children:"Type"}),n.jsx("th",{className:"px-4 py-3",children:"Status"}),n.jsx("th",{className:"px-4 py-3",children:"Payroll Ready"}),n.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center",children:"Loading..."})}):e.filter(c=>{if(!a)return!0;const d=a.toLowerCase();return(c.full_name||"").toLowerCase().includes(d)||(c.email||"").toLowerCase().includes(d)}).map(c=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-4 py-3",children:c.full_name}),n.jsx("td",{className:"px-4 py-3 capitalize",children:c.type}),n.jsx("td",{className:"px-4 py-3",children:c.status?c.status.charAt(0).toUpperCase()+c.status.slice(1).toLowerCase():""}),n.jsx("td",{className:"px-4 py-3",children:c.payrollReady?"Yes":"No"}),n.jsxs("td",{className:"px-4 py-3 flex gap-2",children:[n.jsx("button",{onClick:()=>l(`/consultants/${c.id}`),className:"px-2 py-1 bg-blue-600 text-white rounded",children:"View"}),c.type==="payroll"&&n.jsx("button",{onClick:()=>l(`/consultants/${c.id}/deploy`),className:"px-2 py-1 bg-green-600 text-white rounded",children:"Deploy"})]})]},c.id))})]})})]})}const iV=e=>G.get(`/v1/consultants/${e}`),M9e=(e,t)=>G.put(`/v1/consultants/${e}/sourcing-config`,t),B9e=(e,t)=>G.put(`/v1/consultants/${e}/payroll-setup`,t),U9e=e=>G.get(`/v1/consultants/${e}/deployment-eligibility`),z9e=e=>G.post(`/v1/consultants/${e}/validate-eligibility`),W9e=e=>G.get(`/v1/consultants/${e}/summary`),V9e=e=>G.post("/v1/consultant-deployments",e),lV=e=>G.get("/v1/consultant-deployments",{params:e}),H9e=e=>G.get(`/v1/consultant-deployments/${e}`),q9e=e=>G.put(`/v1/consultant-deployments/${e}/end`);function oV({consultant:e,showActions:t=!0}){const r=Tt();if(!e)return null;const s=e.status==="deployed",a=e.type==="payroll";return n.jsxs("div",{className:"bg-white border rounded-lg p-6 flex justify-between items-center",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h2",{className:"text-xl font-semibold",children:e.name||e.full_name||"Unnamed Consultant"}),n.jsx("p",{className:"text-sm text-gray-500",children:e.email||"No email"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(B_,{label:e.type,color:a?"indigo":"purple"}),n.jsx(B_,{label:e.status||"available",color:s?"red":"green"}),a&&n.jsx(B_,{label:e.payrollReady?"Payroll Ready":"Payroll Pending",color:e.payrollReady?"green":"yellow"})]})]}),t&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>r(`/consultants/${e.id}`),className:"px-3 py-1 border rounded text-sm",children:"View"}),a&&e.payrollReady&&!s&&n.jsx("button",{onClick:()=>r(`/consultants/${e.id}/deploy`),className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Deploy"})]})]})}function B_({label:e,color:t}){const r={green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",indigo:"bg-indigo-100 text-indigo-700",purple:"bg-purple-100 text-purple-700",yellow:"bg-yellow-100 text-yellow-700"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${r[t]||"bg-gray-100 text-gray-600"}`,children:e})}function G9e({consultant:e,onUpdated:t}){const[r,s]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState("");y.useEffect(()=>{e!=null&&e.billing_rate&&s(e.billing_rate),e!=null&&e.payout_rate&&i(e.payout_rate)},[e]);function u(){if(!r||!a)return"Billing rate and payout rate are required";const m=Number(r),g=Number(a);return m<=0||g<=0?"Rates must be positive values":g>m?"Payout rate cannot exceed billing rate":""}async function f(){var g,x;const m=u();if(m){d(m);return}o(!0),d("");try{await B9e(e.id,{billing_rate:Number(r),payout_rate:Number(a)}),t==null||t()}catch(h){console.error(h),d(((x=(g=h==null?void 0:h.response)==null?void 0:g.data)==null?void 0:x.message)||"Failed to save payroll configuration")}finally{o(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Payroll Configuration"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Configure billing and payout rates for this consultant."})]}),n.jsx("div",{className:"flex gap-3 text-sm",children:n.jsx(J9e,{label:"Payroll Ready",value:e.payrollReady?"Yes":"No",color:e.payrollReady?"green":"red"})}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Billing Rate (per month)"}),n.jsx("input",{type:"number",value:r,onChange:m=>s(m.target.value),className:"w-full border rounded px-3 py-2",placeholder:"e.g. 100000"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Payout Rate (per month)"}),n.jsx("input",{type:"number",value:a,onChange:m=>i(m.target.value),className:"w-full border rounded px-3 py-2",placeholder:"e.g. 70000"})]})]}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:f,disabled:l,className:`px-4 py-2 rounded text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?"Saving...":"Save Payroll Config"})})]})}function J9e({label:e,value:t,color:r}){const s={green:"border-green-200 text-green-700",red:"border-red-200 text-red-700"};return n.jsxs("span",{className:`px-3 py-1 border rounded-full text-xs ${s[r]}`,children:[e,": ",n.jsx("b",{children:t})]})}function K9e({consultant:e,onUpdated:t}){const[r,s]=y.useState("percentage"),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState("");y.useEffect(()=>{e!=null&&e.sourcing_fee_type&&s(e.sourcing_fee_type),e!=null&&e.sourcing_fee_amount&&i(e.sourcing_fee_amount)},[e]);function u(){if(!a)return"Fee amount is required";const m=Number(a);return m<=0?"Fee amount must be greater than zero":r==="percentage"&&m>100?"Percentage fee cannot exceed 100%":""}async function f(){var g,x;const m=u();if(m){d(m);return}o(!0),d("");try{await M9e(e.id,{fee_type:r,fee_amount:Number(a)}),t==null||t()}catch(h){console.error(h),d(((x=(g=h==null?void 0:h.response)==null?void 0:g.data)==null?void 0:x.message)||"Failed to save sourcing configuration")}finally{o(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Sourcing Configuration"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Configure referral or sourcing fee for this consultant."})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"feeType",value:"percentage",checked:r==="percentage",onChange:()=>s("percentage")}),n.jsx("span",{className:"text-sm",children:"Percentage (%)"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"feeType",value:"flat",checked:r==="flat",onChange:()=>s("flat")}),n.jsx("span",{className:"text-sm",children:"Flat Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Fee Amount ",r==="percentage"?"(%)":""]}),n.jsx("input",{type:"number",value:a,onChange:m=>i(m.target.value),className:"w-full border rounded px-3 py-2",placeholder:r==="percentage"?"e.g. 10":"e.g. 50000"})]}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:f,disabled:l,className:`px-4 py-2 text-white rounded ${l?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?"Saving...":"Save Sourcing Config"})})]})}function cV({consultantId:e,strict:t=!1,onEligible:r}){const[s,a]=y.useState(!0),[i,l]=y.useState(!1),[o,c]=y.useState([]),[d,u]=y.useState("");y.useEffect(()=>{e&&f()},[e]);async function f(){var m,g,x,h;a(!0),u("");try{const v=(t?await z9e(e):await U9e(e)).data||{};l(!!v.eligible),c(v.reasons||[]),v.eligible&&(r==null||r())}catch(p){console.error(p);const v=((g=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:g.message)||"Consultant is not eligible for deployment";l(!1),u(v),(h=(x=p==null?void 0:p.response)==null?void 0:x.data)!=null&&h.reasons&&c(p.response.data.reasons)}finally{a(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Deployment Eligibility"}),n.jsx("p",{className:"text-sm text-gray-500",children:"System validation before consultant deployment."})]}),s?n.jsx("div",{className:"text-sm text-gray-500",children:"Checking eligibility..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(X9e,{value:i?"Eligible":"Not Eligible",color:i?"green":"red"}),!i&&n.jsx("button",{onClick:f,className:"text-sm text-indigo-600 underline",children:"Recheck"})]}),!i&&n.jsxs("div",{className:"border border-red-300 bg-red-50 rounded p-4 text-sm",children:[n.jsx("p",{className:"font-medium mb-2",children:"Deployment blocked for the following reasons:"}),n.jsx("ul",{className:"list-disc ml-5 space-y-1",children:o.length>0?o.map((m,g)=>n.jsx("li",{children:m},g)):n.jsx("li",{children:d})})]}),i&&n.jsx("div",{className:"border border-green-300 bg-green-50 rounded p-4 text-sm text-green-800",children:"Consultant is fully eligible for deployment."})]})]})}function X9e({value:e,color:t}){const r={green:"border-green-300 text-green-700",red:"border-red-300 text-red-700"};return n.jsx("span",{className:`px-3 py-1 border rounded-full text-xs font-medium ${r[t]}`,children:e})}function Y9e({deployments:e=[],loading:t=!1,onRowClick:r,showConsultant:s=!1}){const a=y.useMemo(()=>[...e].sort((i,l)=>new Date(l.start_date)-new Date(i.start_date)),[e]);return n.jsx("div",{className:"bg-white border rounded-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[s&&n.jsx("th",{className:"border px-4 py-2 text-left",children:"Consultant"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Client"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Project"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Start Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"End Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:t?n.jsx("tr",{children:n.jsx("td",{colSpan:s?6:5,className:"p-6 text-center",children:"Loading deployments..."})}):a.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:s?6:5,className:"p-6 text-center",children:"No deployments found"})}):a.map(i=>n.jsxs("tr",{onClick:()=>r==null?void 0:r(i),className:"hover:bg-gray-50 cursor-pointer",children:[s&&n.jsx("td",{className:"border px-4 py-2",children:i.consultant_name||i.consultant_id}),n.jsx("td",{className:"border px-4 py-2",children:i.client}),n.jsx("td",{className:"border px-4 py-2",children:i.project||""}),n.jsx("td",{className:"border px-4 py-2",children:i.start_date}),n.jsx("td",{className:"border px-4 py-2",children:i.end_date||""}),n.jsx("td",{className:"border px-4 py-2",children:n.jsx(Z9e,{status:i.status})})]},i.id))})]})})}function Z9e({status:e}){const t={active:"bg-green-100 text-green-700",ended:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${t[e]||"bg-gray-100 text-gray-600"}`,children:e})}function Q9e(){var g;const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState(null),[l,o]=y.useState([]),[c,d]=y.useState("overview"),[u,f]=y.useState(!0);y.useEffect(()=>{m()},[e]);async function m(){var x;try{f(!0);const[h,p,v]=await Promise.all([iV(e),W9e(e),lV({consultant_id:e})]);s(h.data),i(p.data);const b=((x=v.data)==null?void 0:x.data)??v.data??[];o(b.sort((j,N)=>new Date(N.start_date)-new Date(j.start_date)))}catch(h){console.error("Failed to load consultant",h)}finally{f(!1)}}return u?n.jsx("div",{className:"p-6",children:"Loading consultant"}):r?n.jsxs("div",{className:"max-w-7xl space-y-6",children:[n.jsx(oV,{consultant:r}),n.jsx("div",{className:"flex gap-6 border-b",children:["overview","configuration","deployments"].map(x=>n.jsx("button",{onClick:()=>d(x),className:`px-4 py-2 capitalize border-b-2 ${c===x?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500"}`,children:x},x))}),c==="overview"&&n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsx(U_,{label:"Total Deployments",value:a==null?void 0:a.totalDeployments}),n.jsx(U_,{label:"Active Deployment",value:a!=null&&a.activeDeployment?"Yes":"No"}),n.jsx(U_,{label:"Current Client",value:((g=a==null?void 0:a.activeDeployment)==null?void 0:g.client)||""})]}),c==="configuration"&&n.jsxs("div",{className:"space-y-6",children:[r.type==="payroll"&&n.jsxs(n.Fragment,{children:[n.jsx(G9e,{consultant:r,onUpdated:m}),n.jsx(cV,{consultantId:r.id})]}),r.type==="sourcing"&&n.jsx(K9e,{consultant:r,onUpdated:m})]}),c==="deployments"&&n.jsx(Y9e,{deployments:l,onRowClick:x=>t(`/consultant-deployments/${x.id}`)})]}):n.jsx("div",{className:"p-6 text-red-600",children:"Consultant not found"})}function U_({label:e,value:t}){return n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:e}),n.jsx("p",{className:"text-xl font-bold mt-1",children:t??""})]})}function eBe({onSubmit:e,submitting:t=!1,disabled:r=!1}){const[s,a]=y.useState({client_name:"",client_id:"",project:"",start_date:"",end_date:"",notes:""}),[i,l]=y.useState("");function o(d,u){a(f=>({...f,[d]:u}))}function c(d){if(d.preventDefault(),!s.client_name||!s.start_date){l("Client name and start date are required.");return}l(""),e==null||e({client:s.client_name,client_id:s.client_id||void 0,project:s.project||void 0,start_date:s.start_date,end_date:s.end_date||null,notes:s.notes||void 0})}return n.jsxs("form",{onSubmit:c,className:`bg-white border rounded-lg p-6 space-y-4 ${r?"opacity-50 pointer-events-none":""}`,children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Deployment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Name *"}),n.jsx("input",{value:s.client_name,onChange:d=>o("client_name",d.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Client / Company name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project / Assignment"}),n.jsx("input",{value:s.project,onChange:d=>o("project",d.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Project name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date *"}),n.jsx("input",{type:"date",value:s.start_date,onChange:d=>o("start_date",d.target.value),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date (optional)"}),n.jsx("input",{type:"date",value:s.end_date,onChange:d=>o("end_date",d.target.value),className:"w-full border rounded px-3 py-2"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes (optional)"}),n.jsx("textarea",{value:s.notes,onChange:d=>o("notes",d.target.value),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Additional deployment notes"})]}),i&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:i}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx("button",{type:"submit",disabled:t,className:`px-4 py-2 rounded text-white ${t?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:t?"Deploying...":"Deploy Consultant"})})]})}function tBe(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState(!1),[l,o]=y.useState(!1),[c,d]=y.useState("");y.useEffect(()=>{u()},[e]);async function u(){try{const m=await iV(e);s(m.data)}catch(m){console.error("Failed to load consultant",m)}}async function f(m){var g,x,h;if(a){o(!0),d("");try{const p=await V9e({consultant_id:e,client_id:m.client_id||void 0,client:m.client_name,project:m.project,start_date:m.start_date,end_date:m.end_date||null,notes:m.notes}),v=((g=p.data)==null?void 0:g.data)||p.data;if(!(v!=null&&v.id))throw new Error("Invalid deployment response");alert("Consultant deployed successfully"),t(`/consultant-deployments/${v.id}`)}catch(p){console.error(p),d(((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.message)||(p==null?void 0:p.message)||"Failed to deploy consultant")}finally{o(!1)}}}return n.jsxs("div",{className:"max-w-4xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Deploy Consultant"}),n.jsx("button",{onClick:()=>t(-1),className:"text-sm px-3 py-1 border rounded",children:"Back"})]}),r&&n.jsx(oV,{consultant:r,showActions:!1}),n.jsx(cV,{consultantId:e,strict:!0,onEligible:()=>i(!0)}),n.jsx(eBe,{disabled:!a,submitting:l,onSubmit:f}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c})]})}function rBe(){const e=Tt(),[t]=ea(),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,f]=y.useState(""),m=t.get("consultant_id");y.useEffect(()=>{g()},[l,c,u,m]);async function g(){var x;i(!0);try{const p=await lV({consultant_id:m||void 0,status:l||void 0,start_date_from:c||void 0,start_date_to:u||void 0}),v=((x=p.data)==null?void 0:x.data)??p.data??[];v.sort((b,j)=>new Date(j.start_date)-new Date(b.start_date)),s(v)}catch(h){console.error(h),s([])}finally{i(!1)}}return n.jsxs("div",{className:"max-w-7xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Deployments"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track active and past consultant assignments"})]}),n.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 border rounded text-sm",children:"Back"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4 flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"ended",children:"Ended"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From Date"}),n.jsx("input",{type:"date",value:c,onChange:x=>d(x.target.value),className:"border rounded px-2 py-1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To Date"}),n.jsx("input",{type:"date",value:u,onChange:x=>f(x.target.value),className:"border rounded px-2 py-1"})]}),n.jsx("button",{onClick:g,className:"px-3 py-1 bg-indigo-600 text-white rounded text-sm",children:"Apply Filters"})]}),n.jsx("div",{className:"bg-white border rounded-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border px-4 py-2 text-left",children:"Consultant"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Client"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Project"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Start Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"End Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:a?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-6 text-center",children:"Loading deployments..."})}):r.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-6 text-center",children:"No deployments found"})}):r.map(x=>n.jsxs("tr",{onClick:()=>e(`/consultant-deployments/${x.id}`),className:"hover:bg-gray-50 cursor-pointer",children:[n.jsx("td",{className:"border px-4 py-2",children:x.consultant_name||x.consultant_id}),n.jsx("td",{className:"border px-4 py-2",children:x.client}),n.jsx("td",{className:"border px-4 py-2",children:x.project||""}),n.jsx("td",{className:"border px-4 py-2",children:x.start_date}),n.jsx("td",{className:"border px-4 py-2",children:x.end_date||""}),n.jsx("td",{className:"border px-4 py-2 capitalize",children:n.jsx(nBe,{status:x.status})})]},x.id))})]})})]})}function nBe({status:e}){const t={active:"bg-green-100 text-green-700",ended:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[e]||"bg-gray-100 text-gray-600"}`,children:e})}function sBe(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState(!0),[l,o]=y.useState(!1),[c,d]=y.useState("");y.useEffect(()=>{u()},[e]);async function u(){var g;try{i(!0);const x=await H9e(e),h=((g=x.data)==null?void 0:g.data)||x.data;s(h)}catch(x){console.error(x),d("Failed to load deployment")}finally{i(!1)}}async function f(){var x,h;if(!(!r||!window.confirm("Are you sure you want to end this deployment?"))){o(!0);try{await q9e(r.id),alert("Deployment ended successfully"),await u()}catch(p){console.error(p),alert(((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.message)||(p==null?void 0:p.message)||"Failed to end deployment")}finally{o(!1)}}}if(a)return n.jsx("div",{children:"Loading deployment..."});if(c)return n.jsx("div",{className:"text-red-600",children:c});if(!r)return n.jsx("div",{children:"Deployment not found"});const m=r.status==="active";return n.jsxs("div",{className:"max-w-5xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Deployment Details"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Deployment ID: ",r.id]})]}),n.jsx("button",{onClick:()=>t(-1),className:"px-3 py-1 border rounded text-sm",children:"Back"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx(aBe,{value:r.status,color:m?"green":"gray"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Started on"," ",n.jsx("b",{children:r.start_date})]}),r.end_date&&n.jsxs("span",{className:"text-sm text-gray-600",children:["Ended on ",n.jsx("b",{children:r.end_date})]})]}),m&&n.jsx("button",{onClick:f,disabled:l,className:`px-4 py-2 rounded text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:l?"Ending...":"End Deployment"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-6 grid grid-cols-2 gap-6",children:[n.jsx(Tu,{label:"Consultant ID",value:r.consultant_id}),n.jsx(Tu,{label:"Client",value:r.client}),n.jsx(Tu,{label:"Project",value:r.project||""}),n.jsx(Tu,{label:"Notes",value:r.notes||""}),n.jsx(Tu,{label:"Start Date",value:r.start_date}),n.jsx(Tu,{label:"End Date",value:r.end_date||""})]})]})}function Tu({label:e,value:t}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:"font-medium",children:t})]})}function aBe({value:e,color:t}){const r={green:"border-green-300 text-green-700",gray:"border-gray-300 text-gray-600"};return n.jsx("span",{className:`px-3 py-1 border rounded-full text-xs font-medium capitalize ${r[t]}`,children:e})}function iBe(){const[e,t]=y.useState(!0),[r,s]=y.useState(null),[a,i]=y.useState("");y.useEffect(()=>{l()},[]);async function l(){try{t(!0);const c=await G.get("/v1/consultant/dashboard");s(c.data)}catch(c){console.error(c),i("Failed to load consultant dashboard")}finally{t(!1)}}if(e)return n.jsx("div",{className:"p-6",children:"Loading dashboard..."});if(a)return n.jsx("div",{className:"p-6 text-red-500",children:a});const o=r==null?void 0:r.active_deployment;return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"My assignment, timesheets & attendance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Assignment"}),n.jsx("p",{className:"text-lg font-semibold",children:o?"Active":"Not Assigned"}),o&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.client_name,"  ",o.role]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Deployments"}),n.jsx("p",{className:"text-lg font-semibold",children:r.total_deployments})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Payroll Status"}),n.jsx("p",{className:"text-lg font-semibold",children:r.payroll_ready?"Ready":"Pending"})]})]})]})}function lBe(){const[e,t]=y.useState(null),[r,s]=y.useState(!1),[a,i]=y.useState(!1),[l,o]=y.useState(!1),[c,d]=y.useState(""),[u,f]=y.useState(""),[m,g]=y.useState(!1),[x,h]=y.useState(!0),[p,v]=y.useState(null);y.useEffect(()=>{N()},[]);async function b(){try{i(!0),await G.put("/v1/consultant/me",{phone:e.phone,current_location:e.current_location,education:e.education,experience_years:e.experience_years,skills:e.skills}),s(!1)}catch{alert("Failed to save profile")}finally{i(!1)}}const j=async()=>{var w,_,k,C;if(!c||!u){alert("Both password fields are required");return}if(c!==u){alert("Passwords do not match");return}try{g(!0),await G.post("/v1/consultant/change-password",{password:c,confirm_password:u}),alert("Password reset successfully"),o(!1),d(""),f("")}catch(T){alert(((_=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:_.detail)||((C=(k=T==null?void 0:T.response)==null?void 0:k.data)==null?void 0:C.message)||"Failed to reset password")}finally{g(!1)}};async function N(){try{const w=await G.get("/v1/consultant/me");t(w.data)}catch(w){console.error(w),v("Failed to load consultant profile")}finally{h(!1)}}return x?n.jsx("div",{className:"p-6",children:"Loading profile..."}):p?n.jsx("div",{className:"p-6 text-red-600",children:p}):e?n.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Profile"}),n.jsxs("div",{className:"flex gap-2",children:[!r&&n.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded",children:"Edit Profile"}),n.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1 text-sm bg-red-600 text-white rounded",children:"Reset Password"})]})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Basic Information"}),n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",e.full_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Designation:"})," ",e.designation||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Email:"})," ",e.email||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Phone:"})," ",r?n.jsx("input",{value:e.phone||"",onChange:w=>t({...e,phone:w.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.phone||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Location:"})," ",r?n.jsx("input",{value:e.current_location||"",onChange:w=>t({...e,current_location:w.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.current_location||""]})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Professional Details"}),n.jsxs("p",{children:[n.jsx("b",{children:"Experience:"})," ",r?n.jsx("input",{type:"number",value:e.experience_years??"",onChange:w=>t({...e,experience_years:w.target.value}),className:"border px-2 py-1 rounded ml-2 w-24"}):e.experience_years??""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Education:"})," ",r?n.jsx("input",{value:e.education||"",onChange:w=>t({...e,education:w.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.education||""]}),n.jsxs("div",{children:[n.jsx("b",{children:"Skills:"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(e.skills||[]).length===0&&n.jsx("span",{children:""}),(e.skills||[]).map(w=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:w},w))]})]})]}),r&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:b,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded",children:a?"Saving...":"Save"}),n.jsx("button",{onClick:()=>{s(!1),N()},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Consultant Status"}),n.jsxs("p",{children:[n.jsx("b",{children:"Consultant Code:"})," ",e.consultant_code]}),n.jsxs("p",{children:[n.jsx("b",{children:"Type:"})," ",e.type]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",e.status]}),n.jsxs("p",{children:[n.jsx("b",{children:"Payroll Ready:"})," ",e.payroll_ready?"Yes":"No"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-96 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reset Consultant Password"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"Email"}),n.jsx("input",{type:"email",value:e.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"New Password"}),n.jsx("input",{type:"password",value:c,onChange:w=>d(w.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),n.jsx("input",{type:"password",value:u,onChange:w=>f(w.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:m,className:"px-4 py-1 bg-red-600 text-white rounded",children:m?"Resetting...":"Reset"})]})]})})]}):null}const ol={getRequirements:async()=>(await G.get("/v1/client/requirements")).data,createRequirement:async e=>G.post("/v1/client/requirements",e),parseJD:async e=>G.post("/v1/client/parse-jd",{description:e}),uploadRequirementsExcel:async e=>(await G.post("/v1/client/requirements/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,getSubmissions:async e=>(await G.get(`/v1/client/jobs/${e}/submissions`)).data,getAllSubmissions:async()=>(await G.get("/v1/client/submissions/all")).data,submitInterviewFeedback:async e=>G.post("/v1/client/interview-feedback",e),submitFinalDecision(e){return G.post("/v1/client/final-decision",e)},getDeployments:async()=>(await G.get("/v1/client/deployments")).data,getInvoices:async()=>(await G.get("/v1/client/invoices")).data,getDashboard:async()=>(await G.get("/v1/client/dashboard")).data,getClientRequirements:async e=>(await G.get(`/v1/client/${e}/requirements`)).data,createClientRequirement:async(e,t)=>G.post(`/v1/client/${e}/requirements`,t)};function z_(){var c,d,u,f,m,g,x,h,p,v,b;const e=Tt(),[t,r]=y.useState(null),[s,a]=y.useState(!0),[i,l]=y.useState("");y.useEffect(()=>{o()},[]);async function o(){try{a(!0);const j=await ol.getDashboard();r(j)}catch(j){console.error(j),l("Unable to load dashboard data")}finally{a(!1)}}return s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Loading dashboard"})]})}):i?n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-red-900",children:"Error"}),n.jsx("p",{className:"text-red-700 text-sm",children:i})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Overview of requirements, candidates, deployments & billing"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(ug,{title:"Active Requirements",value:(t==null?void 0:t.requirements)||0,sub:"Open hiring needs",icon:"",color:"indigo",onClick:()=>e("/client/requirements")}),n.jsx(ug,{title:"Candidates Received",value:(t==null?void 0:t.candidates_received)||0,sub:"Total submissions",icon:"",color:"blue"}),n.jsx(ug,{title:"Active Deployments",value:(t==null?void 0:t.active_deployments)||0,sub:"Currently working",icon:"",color:"green",onClick:()=>e("/client/deployments")}),n.jsx(ug,{title:"Pending Invoices",value:(t==null?void 0:t.pending_invoices)||0,sub:"Awaiting payment",icon:"",color:(t==null?void 0:t.pending_invoices)>0?"yellow":"gray",onClick:()=>e("/client/invoices")})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Hiring Pipeline"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(fg,{label:"New Submissions",value:((c=t==null?void 0:t.pipeline)==null?void 0:c.new)||0,color:"blue"}),n.jsx(fg,{label:"Shortlisted",value:((d=t==null?void 0:t.pipeline)==null?void 0:d.shortlisted)||0,color:"indigo"}),n.jsx(fg,{label:"Interviewing",value:((u=t==null?void 0:t.pipeline)==null?void 0:u.interview)||0,color:"amber"}),n.jsx(fg,{label:"Selected",value:((f=t==null?void 0:t.pipeline)==null?void 0:f.selected)||0,color:"green"})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["Total candidates in pipeline:"," ",n.jsx("span",{className:"font-bold text-gray-900",children:(((m=t==null?void 0:t.pipeline)==null?void 0:m.new)||0)+(((g=t==null?void 0:t.pipeline)==null?void 0:g.shortlisted)||0)+(((x=t==null?void 0:t.pipeline)==null?void 0:x.interview)||0)+(((h=t==null?void 0:t.pipeline)==null?void 0:h.selected)||0)})]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" SLA Status"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(W_,{label:"Submission SLA",status:(p=t==null?void 0:t.sla)==null?void 0:p.submission}),n.jsx(W_,{label:"Interview SLA",status:(v=t==null?void 0:t.sla)==null?void 0:v.interview}),n.jsx(W_,{label:"Deployment SLA",status:(b=t==null?void 0:t.sla)==null?void 0:b.deployment})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded px-3 py-2",children:n.jsxs("p",{className:"text-xs text-amber-800",children:[n.jsx("span",{className:"font-semibold",children:" Note:"})," Delays may impact delivery timelines. Contact your recruiter for updates."]})})})]})]})]})}const tb={indigo:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700",icon:"bg-indigo-100"},blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",icon:"bg-blue-100"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",icon:"bg-green-100"},yellow:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",icon:"bg-yellow-100"},gray:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",icon:"bg-gray-100"}};function ug({title:e,value:t,sub:r,icon:s,color:a="gray",onClick:i}){const l=tb[a]||tb.gray;return n.jsxs("div",{onClick:i,className:`bg-white border rounded-lg shadow-sm p-5 transition-all ${i?"cursor-pointer hover:shadow-md hover:border-gray-300":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:e}),n.jsx("span",{className:`text-2xl ${l.icon} p-2 rounded-lg`,children:s})]}),n.jsx("p",{className:`text-3xl font-bold ${l.text} mb-1`,children:t}),n.jsx("p",{className:"text-xs text-gray-500",children:r})]})}function fg({label:e,value:t,color:r="gray"}){const s=tb[r]||tb.gray,i=Math.min(t/50*100,100);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:e}),n.jsx("span",{className:`font-bold text-lg ${s.text}`,children:t})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${s.bg.replace("bg-","bg-")}`,style:{width:`${i}%`,backgroundColor:r==="blue"?"#3b82f6":r==="indigo"?"#6366f1":r==="amber"?"#f59e0b":r==="green"?"#10b981":"#6b7280"}})})]})}function W_({label:e,status:t}){const s={on_time:{label:" On Time",color:"text-green-700",bg:"bg-green-50",border:"border-green-200"},delayed:{label:" Delayed",color:"text-red-700",bg:"bg-red-50",border:"border-red-200"},at_risk:{label:" At Risk",color:"text-amber-700",bg:"bg-amber-50",border:"border-amber-200"}}[t]||{label:"Pending",color:"text-gray-700",bg:"bg-gray-50",border:"border-gray-200"};return n.jsx("div",{className:`rounded-lg border p-3 ${s.bg} ${s.border}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-800",children:e}),n.jsx("span",{className:`text-sm font-bold ${s.color}`,children:s.label})]})})}function DI(){const[e,t]=y.useState(!1),[r,s]=y.useState([]),a=Tt();y.useEffect(()=>{i()},[]);async function i(){const o=await ol.getRequirements();s((o==null?void 0:o.requirements)||o||[])}async function l(o){const c=o.target.files[0];if(!c)return;const d=new FormData;d.append("file",c);try{t(!0),await ol.uploadRequirementsExcel(d),alert("Requirements uploaded successfully!"),i()}catch(u){console.error(u),alert("Failed to upload file")}finally{t(!1)}}return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"My Requirements"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>a("/client/requirements/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"+ New Requirement"}),n.jsxs("a",{href:"/templates/requirements_template_lowercase.xlsx",download:!0,className:`\r
    border border-emerald-600\r
    text-emerald-600\r
    hover:bg-emerald-50\r
    px-4 py-2 rounded-md\r
    text-sm font-medium\r
    inline-flex items-center gap-2\r
  `,children:[n.jsx(d7,{size:16}),"Download Template"]}),n.jsxs("label",{className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer",children:["Upload Excel",n.jsx("input",{type:"file",accept:".xlsx,.xls",hidden:!0,onChange:l,disabled:e})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-gray-600 text-sm",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("th",{className:"p-2",children:"Requirement ID"})," ",n.jsx("th",{className:"p-2",children:"Job Title"}),n.jsx("th",{children:"Created On"})," ",n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((o,c)=>n.jsxs("tr",{className:"border-t hover:bg-slate-50 transition",children:[n.jsx("td",{className:"p-2 font-medium",children:c+1})," ",n.jsx("td",{className:"p-2 text-gray-700",children:o.requirement_code||""}),n.jsx("td",{className:"p-2",children:o.title}),n.jsx("td",{className:"text-sm text-gray-700",children:o.created_at?(()=>{const d=new Date(o.created_at),u=d.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),f=d.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${u} | ${f}`})():"-"}),n.jsxs("td",{children:[o.status==="NEW"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:"NEW"}),o.status==="APPROVED"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:"APPROVED"}),o.status==="CONVERTED_TO_JOB"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"CONVERTED TO JOB"})]}),n.jsx("td",{children:o.job_id?n.jsxs("button",{onClick:()=>a(`/client/jobs/${o.job_id}/submissions`),className:`inline-flex items-center gap-1 \r
             text-blue-600 text-sm font-medium\r
             hover:text-blue-700 hover:underline\r
             cursor-pointer`,children:[n.jsx(Pee,{size:15}),"View Submissions"]}):n.jsx("span",{className:"text-gray-400 text-sm italic",children:"Job not created"})})]},o.id))})]})})]})}const Pu={hired:{label:"Hire",icon:"",color:"green",description:"Send offer letters to selected candidates"},rejected:{label:"Reject",icon:"",color:"red",description:"Mark selected candidates as rejected"},shortlisted:{label:"Hold",icon:"",color:"amber",description:"Keep candidates in pending review"}};function c0(){const{jobId:e}=Or(),[t,r]=y.useState([]),[s,a]=y.useState([]),[i,l]=y.useState(null),[o,c]=y.useState(!1),[d,u]=y.useState("");y.useEffect(()=>{f()},[e]);async function f(){if(e)try{const v=await ol.getSubmissions(e);r(v.submissions||[]),a([]),u("")}catch(v){u("Failed to load submissions"),console.error(v)}}const m=v=>{a(b=>b.includes(v)?b.filter(j=>j!==v):[...b,v])},g=()=>{s.length===t.length?a([]):a(t.map(v=>v.application_id))},x=v=>{s.length!==0&&(l({decision:v,step:"confirm"}),u(""))},h=async()=>{var v,b;if(i){c(!0),u("");try{const{decision:j}=i,N=[];for(const w of s)try{await ol.submitFinalDecision({application_id:w,decision:j})}catch(_){N.push(w),console.error("Failed to update:",w,_)}if(N.length===0)l({...i,step:"success"}),await new Promise(w=>setTimeout(w,1500)),await f();else if(N.length<s.length)u(`Updated ${s.length-N.length}/${s.length} candidates. ${N.length} failed.`),await f();else throw new Error("All updates failed")}catch(j){u(((b=(v=j==null?void 0:j.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to update candidates"),console.error(j)}finally{c(!1),(i==null?void 0:i.step)==="success"&&l(null)}}},p=v=>({pending:"bg-gray-100 text-gray-700",hired:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",shortlisted:"bg-amber-100 text-amber-700"})[v]||"bg-gray-100 text-gray-700";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-900",children:"Candidate Submissions"}),n.jsx("p",{className:"text-gray-600",children:"Review and make final hiring decisions on candidates sent by recruiters"})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Error"}),n.jsx("p",{className:"text-sm mt-1",children:d})]})]}),s.length>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("p",{className:"text-blue-900 font-medium mb-3",children:[s.length," candidate",s.length!==1?"s":""," ","selected"]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(Pu).map(([v,b])=>n.jsxs("button",{onClick:()=>x(v),disabled:o,className:`px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-${b.color}-600 hover:bg-${b.color}-700`,children:[b.icon," ",b.label," (",s.length,")"]},v))})]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left",children:n.jsx("input",{type:"checkbox",checked:s.length===t.length&&t.length>0,onChange:g,className:"cursor-pointer"})}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Candidate"}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Sent On"}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Status"})]})}),n.jsx("tbody",{children:t.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:4,className:"text-center p-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("p",{className:"text-gray-500 font-medium",children:"No submissions yet"}),n.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Candidates sent by recruiters will appear here"})]})}):t.map(v=>{var b,j;return n.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors ${s.includes(v.application_id)?"bg-blue-50":""}`,children:[n.jsx("td",{className:"p-3",children:n.jsx("input",{type:"checkbox",checked:s.includes(v.application_id),onChange:()=>m(v.application_id),className:"cursor-pointer"})}),n.jsxs("td",{className:"p-3",children:[n.jsx("p",{className:"font-medium text-gray-900",children:v.candidate_name}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:v.candidate_email})]}),n.jsx("td",{className:"p-3 text-gray-600",children:v.sent_to_client_at?new Date(v.sent_to_client_at).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-block px-2.5 py-0.5 rounded-full text-xs font-semibold ${p(v.status)}`,children:((b=v.status)==null?void 0:b.charAt(0).toUpperCase())+((j=v.status)==null?void 0:j.slice(1))||"Pending"})})]},v.application_id)})})]})}),i&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-6 w-full max-w-md",children:[i.step==="confirm"&&n.jsxs(n.Fragment,{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Confirm ",Pu[i.decision].label]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[n.jsxs("p",{className:"text-blue-900",children:[n.jsx("span",{className:"font-semibold",children:s.length})," ","candidate",s.length!==1?"s":""," will be marked as"," ",n.jsx("span",{className:"font-semibold",children:Pu[i.decision].label.toLowerCase()}),"."]}),n.jsx("p",{className:"text-blue-800 text-sm mt-2",children:Pu[i.decision].description})]}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"This action cannot be undone. Do you want to continue?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:h,disabled:o,className:`flex-1 px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-${Pu[i.decision].color}-600 hover:bg-${Pu[i.decision].color}-700`,children:o?"Processing...":"Confirm"}),n.jsx("button",{onClick:()=>l(null),disabled:o,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"})]})]}),i.step==="success"&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-5xl mb-4",children:""}),n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:[s.length," Candidates Updated"]}),n.jsx("p",{className:"text-gray-600",children:"Decision recorded successfully. Refreshing..."})]})]})})]})}function $I(){const[e,t]=y.useState([]);return y.useEffect(()=>{ol.getDeployments().then(t)},[]),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"Consultant"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Deployed On"})," ",n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map((r,s)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 text-center font-medium",children:s+1}),n.jsx("td",{className:"p-2",children:r.consultant_name}),n.jsx("td",{children:r.role}),n.jsx("td",{className:"text-sm text-gray-700",children:r.start_date?(()=>{const a=new Date(r.start_date),i=a.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),l=a.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${i} | ${l}`})():"-"}),n.jsx("td",{children:r.status})]},r.id))})]})})}function MI(){const[e,t]=y.useState([]);return y.useEffect(()=>{ol.getInvoices().then(t)},[]),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"Invoice #"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map(r=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:r.invoice_number}),n.jsx("td",{children:r.amount}),n.jsx("td",{children:r.status})]},r.id))})]})})}function oBe({onLogout:e}){const t=Tt(),r=ys(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition",i="bg-blue-600 text-white",l="text-slate-200 hover:bg-slate-800",o=()=>r.pathname.includes("requirements")?"Requirements":r.pathname.includes("deployments")?"Deployments":r.pathname.includes("timesheets")?"Timesheets":r.pathname.includes("invoices")?"Invoices":"Dashboard";return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-64 bg-slate-900 text-slate-100 flex flex-col",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-slate-800",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Client Portal"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Manage hiring & billing"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs(cr,{to:"/client/dashboard",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(im,{size:18}),"Dashboard"]}),n.jsxs(cr,{to:"/client/requirements",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(bl,{size:18}),"Requirements"]}),n.jsxs(cr,{to:"/client/deployments",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(ua,{size:18}),"Deployments"]}),n.jsxs(cr,{to:"/client/timesheets",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(pn,{size:18}),"Timesheets"]}),n.jsxs(cr,{to:"/client/timesheet-history",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(pn,{size:18}),"Timesheet History"]}),n.jsxs(cr,{to:"/client/invoices",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(cn,{size:18}),"Invoices"]})]}),n.jsx("div",{className:"p-4 border-t border-slate-800",children:n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-red-400 hover:text-red-500",children:[n.jsx(zp,{size:16}),"Logout"]})})]}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsx("header",{className:"bg-white border-b px-6 py-4",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:o()})}),n.jsx("main",{className:"flex-1 p-6",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:n.jsx(po,{})})})]})]})}const ii=({isActive:e})=>`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-semibold transition ${e?"bg-white/20 text-white":"text-white/85 hover:bg-white/10 hover:text-white"}`,zc=({title:e,children:t})=>n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-xs font-extrabold uppercase tracking-wide text-white/90",children:e}),n.jsx("div",{className:"space-y-1",children:t})]});function cBe(){const e=Tt(),t=ys(),r=t.pathname.includes("/dashboard")?"Dashboard":t.pathname.includes("/candidate-profile")?"Candidate Profile":t.pathname.includes("/assigned-jobs")?"Assigned Jobs":t.pathname.includes("/interviews")?"Interviews":t.pathname.includes("/trackers")?"Trackers":"Recruiter Portal",s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("token"),localStorage.removeItem("candidate_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e("/login",{replace:!0}),window.location.assign("/login")};return n.jsxs("div",{className:"min-h-screen bg-slate-100 flex",children:[n.jsxs("aside",{className:"w-72 shrink-0 bg-gradient-to-b from-purple-700 to-indigo-700 text-white p-4",children:[n.jsxs("div",{className:"mb-4 border-b border-white/20 pb-4",children:[n.jsx("h1",{className:"text-3xl font-extrabold",children:"Recruiter Portal"}),n.jsx("p",{className:"text-sm text-white/80",children:"Manage recruitment & hiring"})]}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs(zc,{title:"Talent Acquisition",children:[n.jsxs(cr,{to:"/recruiter/dashboard",className:ii,children:[n.jsx(g4e,{size:18})," Dashboard"]}),n.jsxs(cr,{to:"/recruiter/assigned-jobs",className:ii,children:[n.jsx(bl,{size:18})," Assigned Jobs"]}),n.jsxs(cr,{to:"/recruiter/candidate-workflow",className:ii,children:[n.jsx(Hr,{size:18})," Candidate Workflow"]})]}),n.jsx(zc,{title:"Resdex",children:n.jsxs(cr,{to:"/recruiter/resdex/advanced-search",className:ii,children:[n.jsx(ps,{size:18})," Semantic Search"]})}),n.jsx(zc,{title:"Candidate Management",children:n.jsxs(cr,{to:"/recruiter/candidate-profile",className:ii,children:[n.jsx(_o,{size:18})," Candidate Profile"]})}),n.jsxs(zc,{title:"Interviews",children:[n.jsxs(cr,{to:"/recruiter/interviews",className:ii,children:[n.jsx(Ya,{size:18})," Interviews"]}),n.jsxs(cr,{to:"/recruiter/interview-calendar",className:ii,children:[n.jsx(pn,{size:18})," Interview Calendar"]}),n.jsxs(cr,{to:"/recruiter/interview-logs",className:ii,children:[n.jsx(cn,{size:18})," Interview Logs"]})]}),n.jsx(zc,{title:"Trackers",children:n.jsxs(cr,{to:"/recruiter/trackers",className:ii,children:[n.jsx(bl,{size:18})," Trackers"]})}),n.jsx(zc,{title:"Reports",children:n.jsxs(cr,{to:"/recruiter/reports",className:ii,children:[n.jsx(KCe,{size:18})," Reports"]})}),n.jsxs(zc,{title:"Account",children:[n.jsxs(cr,{to:"/recruiter/my-profile",className:ii,children:[n.jsx(_o,{size:18})," My Profile"]}),n.jsxs(cr,{to:"/recruiter/settings",className:ii,children:[n.jsx(T1,{size:18})," Settings"]})]})]})]}),n.jsxs("main",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:r}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50",type:"button",children:n.jsx(BC,{size:18})}),n.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 font-semibold hover:bg-slate-50",type:"button",onClick:s,children:[n.jsx(zp,{size:16})," Logout"]})]})]}),n.jsx("div",{className:"p-4",children:n.jsx(po,{})})]})]})}function dBe({onLogout:e}){const t=Tt(),r=ys(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",i="bg-white/20 backdrop-blur text-white font-semibold border border-white/20",l="text-white/80 hover:bg-white/10 hover:text-white",o=()=>r.pathname.includes("dashboard")?"Dashboard":r.pathname.includes("my-interviews")?"My Interviews":r.pathname.includes("notifications")?"Notifications & Alerts":r.pathname.includes("complete-profile")?"Complete Profile":r.pathname.includes("apply-jobs")?"Apply Jobs":r.pathname.includes("applied-jobs")?"Applied Jobs":r.pathname.includes("my-applications")?"My Applications":"Candidate Portal",c=r.pathname.includes("complete-profile");return y.useEffect(()=>{Array.from(document.querySelectorAll("div")).filter(u=>{const f=u.className||"";return typeof f=="string"&&f.includes("fixed")&&f.includes("inset-0")&&f.includes("bg-black")}).forEach(u=>{u.style.pointerEvents="none",u.style.display="none"})},[]),n.jsxs("div",{className:"min-h-screen flex bg-gray-50 relative z-[9999] pointer-events-auto",children:[n.jsxs("aside",{className:"w-56 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg relative z-[60] pointer-events-auto",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white border-opacity-20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Candidate Portal"}),n.jsx("p",{className:"text-xs text-white text-opacity-80",children:"Explore & apply jobs"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:`text-[11px] font-semibold uppercase tracking-wider text-white/70\r
 mb-2`,children:"Menu"}),n.jsxs(cr,{to:"/candidate/dashboard",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(im,{size:18}),"Dashboard"]}),n.jsxs(cr,{to:"/candidate/notifications",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(BC,{size:18}),"Notifications & Alerts"]}),n.jsxs(cr,{to:"/candidate/complete-profile",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(_o,{size:18}),"Complete Profile"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Jobs"}),n.jsxs(cr,{to:"/candidate/apply-jobs",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(ua,{size:18}),"Apply Jobs"]}),n.jsxs(cr,{to:"/candidate/applied-jobs",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(Ci,{size:18}),"Applied Jobs"]}),n.jsxs(cr,{to:"/candidate/my-applications",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(ua,{size:18}),"My Applications"]}),n.jsxs(cr,{to:"/candidate/my-interviews",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(aU,{size:18}),"My Interviews"]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative z-[60] pointer-events-auto",children:[n.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0 flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-extrabold text-gray-800",children:o()}),n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-red-600 transition font-semibold",children:[n.jsx(zp,{size:16}),"Logout"]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:c?n.jsx(po,{}):n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsx(po,{})})})]})]})}function uBe({onLogout:e}){const t=Tt(),r=ys(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition duration-200",i="!bg-white !text-gray-900 font-bold !shadow-lg",l="text-white hover:bg-white hover:text-gray-900 transition-all duration-200 hover:shadow-md",o=()=>r.pathname.includes("dashboard")?"Dashboard":r.pathname.includes("requirements")?"Requirements":r.pathname.includes("submissions")?"Recruiter Submissions":r.pathname.includes("interview-calendar")?"Interview Calendar":r.pathname.includes("interview-logs")?"Interview Logs":r.pathname.includes("candidate-review")?"Candidate Review":r.pathname.includes("timesheets")&&r.pathname.includes("history")?"Timesheet History":r.pathname.includes("timesheets")?"Timesheets":r.pathname.includes("clients")?"Client Directory":r.pathname.includes("assignments")?"Consultant Assignments":r.pathname.includes("reports")?"Reports":r.pathname.includes("settings")?"Settings":r.pathname.includes("profile")?"My Profile":"Account Manager";return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white border-opacity-20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Account Manager"}),n.jsx("p",{className:"text-xs text-white text-opacity-80",children:"Manage clients & accounts"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Overview"}),n.jsxs(cr,{to:"/account-manager/dashboard",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(im,{size:18}),"Dashboard"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Pipeline"}),n.jsxs(cr,{to:"/account-manager/requirements",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(cn,{size:18}),"Requirements"]}),n.jsxs(cr,{to:"/account-manager/candidate-review",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(Hr,{size:18}),"Candidate Review"]}),null,n.jsxs(cr,{to:"/account-manager/interview-calendar",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(Ya,{size:18}),"Interview Calendar"]}),n.jsxs(cr,{to:"/account-manager/interview-logs",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(iu,{size:18}),"Interview Logs"]})]}),null,null,n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Reports & Analytics"}),n.jsxs(cr,{to:"/account-manager/reports",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(oAe,{size:18}),"Reports"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Account"}),n.jsxs(cr,{to:"/account-manager/profile",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(_o,{size:18}),"My Profile"]}),n.jsxs(cr,{to:"/account-manager/settings",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(T1,{size:18}),"Settings"]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0 flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-extrabold text-gray-800",children:o()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(JW,{}),n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-red-600 transition font-semibold",children:[n.jsx(zp,{size:16}),"Logout"]})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsx(po,{})})})]})]})}const BI=[{title:"Overview",defaultOpen:!0,items:[{label:"Dashboard",to:"/dashboard",icon:im,roles:["admin","recruiter","employee","internal_hr"]}]},{title:"Talent Acquisition",items:[{label:"Jobs",to:"/jobs",icon:ua,roles:["admin","recruiter"]},{label:"Job Submissions",to:"/recruitment/jobs/submissions",icon:bl,roles:["admin","recruiter","account_manager"]}]},{title:"Candidate Management",items:[{label:"Candidate Intake",to:"/candidates",icon:Hr,roles:["admin","recruiter"]},{label:"Candidate Pool",to:"/matching",icon:i4e,roles:["admin","recruiter"]},{label:"Candidate Profile",to:"/candidates/:id",icon:_o,roles:["admin","recruiter"]},{label:"Background Verification",to:"/candidates/verification",icon:x0,roles:["admin","internal_hr"]}]},{title:"Interviews",items:[{label:"Interview Calendar",to:"/interviews/calendar",icon:aU,roles:["admin","recruiter","account_manager"]},{label:"Interview Schedule",to:"/interviews",icon:bl,roles:["admin","recruiter"]},{label:"Interview Logs",to:"/interviews/logs",icon:cn,roles:["admin","recruiter","account_manager"]}]},{title:"Boarding Procedures",items:[{label:"Offer Letter",to:"/offer-letter",icon:YCe,roles:["admin","internal_hr"]},{label:"Onboarding",to:"/onboarding",icon:bl,roles:["admin","internal_hr"]}]},{title:"Consultant Management",items:[{label:"Consultant Pool",to:"/consultants",icon:Hr,roles:["admin","consultant_manager","account_manager","internal_hr"]},{label:"Client Management",to:"/clients",icon:Rv,roles:["admin","account_manager"]},{label:"Contract Management",to:"/contracts",icon:cn,roles:["admin","account_manager"]},{label:"Consultant Deployments",to:"/consultant-deployments",icon:bR,roles:["admin","account_manager"]}]},{title:"Employee Management",items:[{label:"Employees",to:"/employees",icon:Hr,roles:["admin","internal_hr"]},{label:"Employee Dashboard",to:"/employee/dashboard",icon:im,roles:["employee"]},{label:"Employee Directory",to:"/employees/directory",icon:cn,roles:["admin","internal_hr"]},{label:"Leaves",to:"/leaves",icon:bl,roles:["admin","internal_hr","employee"]},{label:"Attendance",to:"/attendance",icon:bl,roles:["admin","employee","internal_hr","recruiter"]},{label:"Performance",to:"/performance",icon:iU,roles:["admin","employee","recruiter"]},{label:"Payroll",to:"/payroll",icon:cU,roles:["admin","internal_hr"]},{label:"Invoices",to:"/invoices",icon:cn,roles:["admin","internal_hr","finance"]},{label:"Alumni",to:"/alumni",icon:p4e,roles:["admin","employee","internal_hr"]}]},{title:"Client Section",items:[{label:"Client List",to:"/clients",icon:Rv,roles:["admin","account_manager"]},{label:"Client Requirements",to:"/client/requirements",icon:bl,roles:["client","admin"]},{label:"Client Deployments",to:"/client/deployments",icon:bR,roles:["client","admin"]},{label:"Client Invoices",to:"/client/invoices",icon:cn,roles:["client","admin"]},{label:"Client Timesheets",to:"/client/timesheets",icon:bl,roles:["client","admin"]}]},{title:"MarCom",items:[{label:"Leads",to:"/leads",icon:_R,roles:["admin"]},{label:"Campaigns",to:"/campaigns",icon:_R,roles:["admin"]}]},{title:"Administration",items:[{label:"User Management",to:"/users",icon:mAe,roles:["admin"]},{label:"Roles",to:"/roles",icon:x0,roles:["admin"]},{label:"Permissions",to:"/permissions",icon:x0,roles:["admin"]},{label:"Roles List",to:"/roles-list",icon:cn,roles:["admin"]},{label:"Permissions List",to:"/permissions-list",icon:cn,roles:["admin"]},{label:"Role-Permission Matrix",to:"/role-permission-matrix",icon:x0,roles:["admin"]},{label:"Settings",to:"/settings",icon:T1,roles:["admin"]}]}],fBe=(e,t)=>!e||e.length===0||t==="consultant"&&e.includes("employee")?!0:e.includes(t);function mBe({onLogout:e,children:t,currentRole:r}){const s=(r||localStorage.getItem("role")||"admin").toLowerCase(),a=ys(),i=Tt(),[l,o]=y.useState(()=>{const x={};return BI.forEach(h=>{x[h.title]=!!h.defaultOpen}),x}),c=y.useMemo(()=>BI.map(x=>{const h=x.items.filter(p=>fBe(p.roles,s));return{...x,items:h}}).filter(x=>x.items.length>0),[s]),d=()=>{const x=a.pathname;return x.includes("/dashboard")?"Admin Dashboard":x.includes("/recruiter/dashboard")?"Recruiter Dashboard":x.includes("/jobs")?"Jobs":x.includes("/recruitment/jobs/submissions")?"Job Submissions":x.includes("/candidates/verification")?"Background Verification":x.includes("/candidates/bulk-actions")?"Bulk Actions":x.includes("/candidates")?"Candidate Intake":x.includes("/matching")?"Candidate Pool":x.includes("/interviews/calendar")?"Interview Calendar":x.includes("/interviews/logs")?"Interview Logs":x.includes("/interviews")?"Interview Schedule":x.includes("/onboarding")?"Onboarding":x.includes("/offer-letter")?"Offer Letter":x.includes("/consultant-deployments")?"Consultant Deployments":x.includes("/consultants")?"Consultant Pool":x.includes("/employees/directory")?"Employee Directory":x.includes("/employee/dashboard")?"Employee Dashboard":x.includes("/employees")?"Employees":x.includes("/leaves")?"Leaves":x.includes("/attendance")?"Attendance":x.includes("/performance")?"Performance":x.includes("/payroll")?"Payroll":x.includes("/invoices")?"Invoices":x.includes("/alumni")?"Alumni":x.includes("/client/requirements")?"Client Requirements":x.includes("/client/deployments")?"Client Deployments":x.includes("/client/invoices")?"Client Invoices":x.includes("/client/timesheets")?"Client Timesheets":x.includes("/clients")?"Client List":x.includes("/leads")?"Leads":x.includes("/campaigns")?"Campaigns":x.includes("/users")?"User Management":x.includes("/roles-list")?"Roles List":x.includes("/permissions-list")?"Permissions List":x.includes("/role-permission-matrix")?"Role-Permission Matrix":x.includes("/roles")?"Roles":x.includes("/permissions")?"Permissions":x.includes("/settings")?"Settings":"Admin Panel"},u="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition duration-200",f="bg-white text-gray-900 font-semibold shadow",m="text-white/90 hover:bg-white/20 hover:text-white transition-all",g=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),i("/login",{replace:!0})};return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-72 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white/20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Admin Portal"}),n.jsx("p",{className:"text-xs text-white/80",children:"Enterprise HR Console"})]}),n.jsx("nav",{className:"flex-1 px-4 py-4 space-y-3 overflow-y-auto",children:c.map(x=>n.jsxs("div",{className:"mb-2",children:[n.jsxs("button",{type:"button",onClick:()=>o(h=>({...h,[x.title]:!h[x.title]})),className:"w-full flex items-center justify-between px-3 py-2 text-white/90 hover:bg-white/10 rounded-lg",children:[n.jsx("span",{className:"text-xs font-extrabold uppercase tracking-wider",children:x.title}),n.jsx("span",{className:"text-xs",children:l[x.title]?"-":"+"})]}),l[x.title]&&n.jsx("div",{className:"mt-2 space-y-1",children:x.items.map(h=>{const p=h.icon;return h.disabled?n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm text-white/50 cursor-not-allowed",children:[n.jsx(p,{size:18}),n.jsx("span",{children:h.label})]},h.label):n.jsxs(cr,{to:h.to,end:h.to==="/interviews"||h.to==="/employees",className:({isActive:v})=>`${u} ${v?f:m}`,children:[n.jsx(p,{size:18}),n.jsx("span",{children:h.label})]},h.label)})})]},x.title))})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 px-6 py-4 flex items-center justify-between text-white shadow-sm",children:[n.jsx("h1",{className:"text-xl font-extrabold text-white",children:d()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search candidates...",className:"bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/30 focus:bg-white/20 transition-all duration-200 w-64"}),n.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),n.jsxs("button",{onClick:g,className:"flex items-center gap-2 text-sm bg-white/20 hover:bg-white/30 text-white border border-white/30 hover:border-white/50 transition-all duration-200 font-semibold px-4 py-2 rounded-lg shadow-sm",children:[n.jsx(zp,{size:16}),"Logout"]})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t||n.jsx(po,{})})})]})]})}const V_=[{label:"Dashboard",to:"/super-admin/dashboard",icon:im},{label:"Business Setup",to:"/super-admin/business-setup",icon:tAe},{label:"Clients & Tenants",to:"/super-admin/clients",icon:Rv},{label:"Admin Management",to:"/super-admin/admin-management",icon:Hr},{label:"Roles & Permissions",to:"/super-admin/roles-permissions",icon:x0},{label:"Tracker Metrics",to:"/super-admin/tracker-dashboard",icon:CCe},{label:"Workflow Builder",to:"/super-admin/workflow-builder",icon:m4e},{label:"Nomenclature",to:"/super-admin/nomenclature",icon:S4e},{label:"User Management",to:"/super-admin/users",icon:Hr},{label:"Operations Analytics",to:"/super-admin/operations-analytics",icon:iU},{label:"Finance & Billing",to:"/super-admin/finance-billing",icon:cU},{label:"Compliance & Security",to:"/super-admin/compliance-security",icon:sU},{label:"System Settings",to:"/super-admin/system-settings",icon:T1},{label:"Audit Logs",to:"/super-admin/audit-logs",icon:cn}],hBe={"/super-admin/dashboard":"Super Admin Dashboard","/super-admin/business-setup":"Business Setup","/super-admin/clients":"Clients & Tenants","/super-admin/admin-management":"Admin Management","/super-admin/roles-permissions":"Roles & Permissions","/super-admin/tracker-dashboard":"Tracker Metrics","/super-admin/workflow-builder":"Workflow Builder","/super-admin/nomenclature":"Nomenclature Manager","/super-admin/users":"User Management","/super-admin/operations-analytics":"Operations Analytics","/super-admin/finance-billing":"Finance & Billing","/super-admin/compliance-security":"Compliance & Security","/super-admin/system-settings":"System Settings","/super-admin/audit-logs":"Audit Logs"};function pBe({onLogout:e,children:t}){const r=ys(),s=Tt(),[a,i]=y.useState(""),[l,o]=y.useState(!1),c=y.useMemo(()=>{const x=hBe[r.pathname];if(x)return x;const h=V_.find(p=>r.pathname.startsWith(p.to));return h?h.label:"Super Admin"},[r.pathname]),d="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition",u="bg-white text-slate-900 shadow",f="text-white/90 hover:bg-white/15",m=y.useMemo(()=>{const x=a.trim().toLowerCase();return x?V_.filter(h=>h.label.toLowerCase().includes(x)).slice(0,6):[]},[a]),g=()=>{if(m.length===0)return;const x=a.trim(),h=m[0].to;s(x?`${h}?q=${encodeURIComponent(x)}`:h),o(!1)};return n.jsxs("div",{className:"min-h-screen flex bg-slate-100",children:[n.jsxs("aside",{className:"w-72 flex-shrink-0 bg-gradient-to-b from-purple-700 to-emerald-600 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white/20",children:[n.jsx("div",{className:"text-lg font-extrabold",children:"ATS-HR"}),n.jsx("div",{className:"text-xs text-white/80",children:"Super Admin - Governance"})]}),n.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:V_.map(x=>{const h=x.icon;return n.jsxs(cr,{to:x.to,className:({isActive:p})=>`${d} ${p?u:f}`,children:[n.jsx(h,{size:18}),n.jsx("span",{children:x.label})]},x.to)})}),n.jsx("div",{className:"px-4 py-4 border-t border-white/20",children:n.jsx("button",{className:"w-full rounded-md bg-white/15 hover:bg-white/25 px-3 py-2 text-sm font-semibold",onClick:e,children:"Logout"})})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center gap-6 justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Super Admin"}),n.jsx("h1",{className:"text-xl font-extrabold text-slate-900",children:c})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-700 border border-slate-200",children:"Production"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:a,onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),120),onChange:x=>{i(x.target.value),o(!0)},onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),g())},placeholder:"Search clients, admins, users",className:"w-64 rounded-md border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),l&&a.trim()&&n.jsx("div",{className:"absolute right-0 top-11 z-10 w-72 overflow-hidden rounded-md border border-slate-200 bg-white shadow-lg",children:m.length===0?n.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"}):m.map(x=>n.jsx("button",{onMouseDown:h=>{h.preventDefault();const p=a.trim();s(p?`${x.to}?q=${encodeURIComponent(p)}`:x.to),o(!1)},className:"block w-full border-b border-slate-100 px-3 py-2 text-left text-xs text-slate-700 hover:bg-slate-50 last:border-b-0",children:x.label},x.to))})]}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Logout"})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-slate-100",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:t||n.jsx(po,{})})})]})]})}const UI={purple:"from-purple-50 to-purple-100 border-purple-200 text-purple-700",blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-700",emerald:"from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700",amber:"from-amber-50 to-amber-100 border-amber-200 text-amber-700"},mg=({label:e,value:t,tone:r="purple"})=>{const s=UI[r]||UI.purple;return n.jsxs("div",{className:`rounded-xl border bg-gradient-to-br p-5 shadow-sm ${s}`,children:[n.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:e}),n.jsx("div",{className:"mt-2 text-4xl font-extrabold leading-none",children:t})]})},zI=[{name:"Mon",value:2},{name:"Tue",value:3},{name:"Wed",value:2},{name:"Thu",value:4},{name:"Fri",value:3},{name:"Sat",value:2},{name:"Sun",value:1}];function xBe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function gBe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function yBe(){const[e,t]=y.useState(null),[r,s]=y.useState([]),[a,i]=y.useState("");y.useEffect(()=>{let d=!0;return Promise.allSettled([G.get("/v1/super-admin/dashboard"),G.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(u=>{var g,x;if(!d)return;const f=u[0],m=u[1];if(f.status==="fulfilled"?t(f.value.data||{}):t({}),m.status==="fulfilled"){const h=(x=(g=m.value)==null?void 0:g.data)==null?void 0:x.logs;s(Array.isArray(h)?h:[]),i("")}else s([]),i("Workflow activity unavailable")}),()=>{d=!1}},[]);const l=y.useMemo(()=>{const d=Number((e==null?void 0:e.revenue_mtd)||0);return Number.isFinite(d)?`Rs ${d.toLocaleString("en-IN")}`:"--"},[e==null?void 0:e.revenue_mtd]),o=y.useMemo(()=>{const d=Number((e==null?void 0:e.active_jobs)||0),u=Number((e==null?void 0:e.recruiter_productivity)||0);return zI.map((f,m)=>({...f,value:Math.max(0,f.value+Math.round(d/2)-m%2+u)}))},[e==null?void 0:e.active_jobs,e==null?void 0:e.recruiter_productivity]),c=y.useMemo(()=>{const d=Number((e==null?void 0:e.active_clients)||0);return zI.map((u,f)=>({...u,value:Math.max(1,u.value+f%3+d)}))},[e==null?void 0:e.active_clients]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-8 text-white shadow-lg",children:[n.jsx("h2",{className:"text-4xl font-extrabold",children:"Super Admin Dashboard"}),n.jsx("p",{className:"mt-2 text-white/90",children:"Governance, controls, and platform health"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsx(mg,{label:"Active Clients",value:(e==null?void 0:e.active_clients)??"--",tone:"purple"}),n.jsx(mg,{label:"Active Jobs",value:(e==null?void 0:e.active_jobs)??"--",tone:"blue"}),n.jsx(mg,{label:"Recruiter Productivity",value:(e==null?void 0:e.recruiter_productivity)??"--",tone:"emerald"}),n.jsx(mg,{label:"Revenue (MTD)",value:l,tone:"amber"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-3xl font-semibold text-slate-900",children:"Hiring Funnel Health"}),n.jsx("p",{className:"mb-3 text-sm text-slate-500",children:"Weekly movement across top-of-funnel activity."}),n.jsx("div",{className:"h-52",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(YO,{data:o,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"hiringFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#7c3aed",stopOpacity:.55}),n.jsx("stop",{offset:"95%",stopColor:"#7c3aed",stopOpacity:.05})]})}),n.jsx(tc,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(yi,{dataKey:"name"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(bo,{type:"monotone",dataKey:"value",stroke:"#7c3aed",strokeWidth:2,fill:"url(#hiringFill)"})]})})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-3xl font-semibold text-slate-900",children:"Time-to-Hire Trend"}),n.jsx("p",{className:"mb-3 text-sm text-slate-500",children:"Monitoring turnaround consistency by day."}),n.jsx("div",{className:"h-52",children:n.jsx(Gi,{width:"100%",height:"100%",children:n.jsxs(YO,{data:c,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"tthFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#0f766e",stopOpacity:.5}),n.jsx("stop",{offset:"95%",stopColor:"#0f766e",stopOpacity:.05})]})}),n.jsx(tc,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(yi,{dataKey:"name"}),n.jsx(vi,{}),n.jsx(Qn,{}),n.jsx(bo,{type:"monotone",dataKey:"value",stroke:"#0f766e",strokeWidth:2,fill:"url(#tthFill)"})]})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-2xl font-semibold text-red-800",children:"SLA Breach Alerts"}),n.jsx("p",{className:"mt-2 text-4xl font-extrabold text-red-700",children:Number((e==null?void 0:e.sla_breaches)??0)}),n.jsx("p",{className:"mt-1 text-sm text-red-700/80",children:"active alerts"})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg border border-emerald-200 bg-white px-3 py-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Recruiter workflow events"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:r.length})]}),n.jsx("div",{className:"mt-3 space-y-2",children:a?n.jsx("p",{className:"text-sm text-emerald-700/80",children:a}):r.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter activity yet"}):r.slice(0,5).map(d=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:xBe(d.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:gBe(d.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",d.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",d.candidate_id||"--"," | Job: ",d.job_id||"--"]})]},d.id))})]})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-2xl font-semibold text-amber-800",children:"System Warnings"}),n.jsx("p",{className:"mt-2 text-4xl font-extrabold text-amber-700",children:Number((e==null?void 0:e.system_warnings)??0)}),n.jsx("p",{className:"mt-1 text-sm text-amber-700/80",children:"warnings"}),n.jsxs("div",{className:"mt-4 rounded-lg border border-amber-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Governance Snapshot"}),n.jsxs("div",{className:"mt-2 space-y-2 text-sm text-slate-700",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Active Clients"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.active_clients)??"--"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Active Jobs"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.active_jobs)??"--"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Productivity"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.recruiter_productivity)??"--"})]})]})]})]})]})]})}const vBe=[{key:"organization_structure",title:"Organization Structure",description:"Define departments, locations, and designations",cta:"Manage",icon:Rv,iconTone:"bg-amber-100 text-amber-700",ctaTone:"bg-amber-50 text-amber-800 border-amber-200 hover:bg-amber-100",bullets:[{label:"Departments",countKey:"departments"},{label:"Locations",countKey:"locations"},{label:"Designations",countKey:"designations"}]},{key:"job_settings",title:"Job Settings",description:"Standardize jobs and configure hiring stages",cta:"Configure",icon:vCe,iconTone:"bg-violet-100 text-violet-700",ctaTone:"bg-violet-50 text-violet-800 border-violet-200 hover:bg-violet-100",bullets:[{label:"Job Templates",countKey:"job_templates"},{label:"Hiring Stages",countKey:"hiring_stages"}]},{key:"company_profile",title:"Company Profile",description:"Set up branding and portal preferences",cta:"Customize",icon:N4e,iconTone:"bg-blue-100 text-blue-700",ctaTone:"bg-blue-50 text-blue-800 border-blue-200 hover:bg-blue-100",bullets:[{label:"Branding",countKey:"branding_profiles"},{label:"Portal Preferences",countKey:"portal_preferences"}]},{key:"email_templates",title:"Email Templates",description:"Customize and standardize system emails",cta:"Edit",icon:iu,iconTone:"bg-emerald-100 text-emerald-700",ctaTone:"bg-emerald-50 text-emerald-800 border-emerald-200 hover:bg-emerald-100",bullets:[{label:"Candidate Emails",countKey:"candidate_email_templates"},{label:"Notification Emails",countKey:"notification_email_templates"}]},{key:"approval_workflows",title:"Approval Workflows",description:"Configure multi-step approval chains",cta:"Set Up",icon:ep,iconTone:"bg-cyan-100 text-cyan-700",ctaTone:"bg-cyan-50 text-cyan-800 border-cyan-200 hover:bg-cyan-100",bullets:[{label:"Job Approval Workflow",countKey:"job_workflows"},{label:"Offer Approval Workflow",countKey:"offer_workflows"}]},{key:"integrations",title:"Integrations",description:"Connect with external recruitment platforms",cta:"Integrate",icon:E4e,iconTone:"bg-yellow-100 text-yellow-700",ctaTone:"bg-yellow-50 text-yellow-800 border-yellow-200 hover:bg-yellow-100",bullets:[{label:"LinkedIn, Naukri, & More",countKey:"connected_integrations"}]}],pk={departments:0,locations:0,designations:0,job_templates:0,hiring_stages:0,branding_profiles:0,portal_preferences:0,candidate_email_templates:0,notification_email_templates:0,job_workflows:0,offer_workflows:0,connected_integrations:0,total_users:0,active_users:0,inactive_users:0,job_users:0,operations_jobs:0};function H_(e){return Array.isArray(e)?e:[]}function bBe(e){const t=(e==null?void 0:e.stats)||(e==null?void 0:e.data)||e||{};return{...pk,...t}}function Wc(e){if(e==null)return 0;const t=Number(e);return Number.isFinite(t)?t:0}function jBe(){const[e,t]=y.useState(pk),[r,s]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{let o=!0;return(async()=>{var d,u,f,m;try{const g=await Promise.allSettled([G.get("/api/stats/summary"),G.get("/v1/super-admin/system-settings"),G.get("/v1/super-admin/dashboard"),G.get("/v1/users")]),x=g[0].status==="fulfilled"?(d=g[0].value)==null?void 0:d.data:null,h=g[1].status==="fulfilled"?(u=g[1].value)==null?void 0:u.data:[],p=g[2].status==="fulfilled"?(f=g[2].value)==null?void 0:f.data:{},v=g[3].status==="fulfilled"?(m=g[3].value)==null?void 0:m.data:[],b=bBe(x),N=H_(h).filter(P=>String((P==null?void 0:P.module_name)||"")==="business_setup"),w=H_((v==null?void 0:v.items)||(v==null?void 0:v.data)||v),_=P=>{var A;return(A=N.find(S=>String((S==null?void 0:S.setting_key)||"")===P))==null?void 0:A.setting_value},k=P=>H_(_(P)).length,C=w.filter(P=>!!((P==null?void 0:P.is_active)??(P==null?void 0:P.active))).length,T={...b,departments:b.departments||k("departments"),locations:b.locations||k("locations"),designations:b.designations||k("designations"),job_templates:b.job_templates||k("job_templates"),hiring_stages:b.hiring_stages||k("hiring_stages"),branding_profiles:b.branding_profiles||(_("company_profile")?1:0),portal_preferences:b.portal_preferences||(_("portal_preferences")?1:0),candidate_email_templates:b.candidate_email_templates||k("email_templates_candidate"),notification_email_templates:b.notification_email_templates||k("email_templates_notification"),job_workflows:b.job_workflows||k("approval_workflow_job"),offer_workflows:b.offer_workflows||k("approval_workflow_offer"),connected_integrations:b.connected_integrations||k("integrations"),total_users:b.total_users||w.length||(p==null?void 0:p.active_clients)||0,active_users:b.active_users||C,inactive_users:b.inactive_users||Math.max((b.total_users||w.length||0)-C,0),job_users:b.job_users||(p==null?void 0:p.active_jobs)||0,operations_jobs:b.operations_jobs||Number((p==null?void 0:p.active_jobs)||0)+Number((p==null?void 0:p.recruiter_productivity)||0)};o&&t(T)}catch{o&&t(pk)}finally{o&&s(!1)}})(),()=>{o=!1}},[]);const l=y.useMemo(()=>vBe,[]);return n.jsxs("div",{className:"space-y-5 pb-14",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Business Setup"}),n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Configure organizational hierarchy, job settings, and portal details."})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:l.map(o=>{const c=o.icon;return n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:shadow-md",children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`rounded-xl p-2.5 ${o.iconTone}`,children:n.jsx(c,{size:20})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:o.title}),n.jsx("p",{className:"text-sm text-slate-600",children:o.description})]})]})}),n.jsx("div",{className:"my-4 border-b border-slate-100"}),n.jsx("div",{className:"space-y-2",children:o.bullets.map(d=>n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-400"}),n.jsxs("span",{children:[d.label," (",r?"...":Wc(e[d.countKey]),")"]})]},d.label))}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsxs("button",{type:"button",onClick:()=>i(o),className:`inline-flex items-center gap-1 rounded-lg border px-3 py-1.5 text-sm font-semibold transition ${o.ctaTone}`,children:[o.cta," ",n.jsx(dCe,{size:14})]})})]},o.key)})}),n.jsx("div",{className:"sticky bottom-0 z-20 rounded-xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-slate-700 md:grid-cols-3 xl:grid-cols-6",children:[n.jsxs("div",{children:["Total Users: ",n.jsx("span",{className:"font-semibold",children:Wc(e.total_users)})]}),n.jsxs("div",{children:["Active: ",n.jsx("span",{className:"font-semibold text-emerald-700",children:Wc(e.active_users)})]}),n.jsxs("div",{children:["Inactive: ",n.jsx("span",{className:"font-semibold text-amber-700",children:Wc(e.inactive_users)})]}),n.jsxs("div",{children:["Job Users: ",n.jsx("span",{className:"font-semibold",children:Wc(e.job_users)})]}),n.jsxs("div",{children:["Oper. & Jobs: ",n.jsx("span",{className:"font-semibold",children:Wc(e.operations_jobs)})]}),n.jsxs("div",{className:"inline-flex items-center gap-2",children:[n.jsx(ps,{size:15})," Search"]})]})}),a&&n.jsxs("div",{className:"fixed inset-0 z-40",children:[n.jsx("button",{type:"button",className:"absolute inset-0 bg-black/35",onClick:()=>i(null),"aria-label":"Close overlay"}),n.jsxs("aside",{className:"absolute right-0 top-0 h-full w-full max-w-2xl overflow-auto border-l border-slate-200 bg-white p-6 shadow-2xl",children:[n.jsxs("div",{className:"mb-4 flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:a.title}),n.jsx("p",{className:"text-sm text-slate-600",children:a.description})]}),n.jsx("button",{type:"button",onClick:()=>i(null),className:"rounded-md border border-slate-200 p-2 text-slate-600 hover:bg-slate-50",children:n.jsx(_r,{size:16})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[n.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-slate-700",children:"Module Snapshot"}),n.jsx("div",{className:"mt-3 space-y-2 text-sm text-slate-700",children:a.bullets.map(o=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:o.label}),n.jsx("span",{className:"font-semibold",children:Wc(e[o.countKey])})]},o.label))})]}),n.jsx("p",{className:"mt-4 rounded-lg border border-indigo-100 bg-indigo-50 px-4 py-3 text-sm text-indigo-800",children:"This panel is ready for full module forms and workflows. Current implementation restores the business setup landing experience and connects live counters."})]})]})]})}function _Be(){const[e,t]=y.useState([]),[r,s]=y.useState(""),[a]=ea(),i=(a.get("q")||"").trim().toLowerCase(),l=()=>{G.get("/v1/super-admin/clients").then(d=>t(Array.isArray(d.data)?d.data:[])).catch(()=>t([]))};y.useEffect(()=>{l()},[]);const o=y.useMemo(()=>i?e.filter(d=>[d==null?void 0:d.name,d==null?void 0:d.email,d==null?void 0:d.status,d==null?void 0:d.account_manager_id,d==null?void 0:d.active_jobs,d==null?void 0:d.subscription_plan].join(" ").toLowerCase().includes(i)):e,[e,i]),c=async d=>{const f=!(String((d==null?void 0:d.status)||"").toLowerCase()==="active"),m=window.prompt(`${f?"Activate":"Suspend"} client ${d.name||d.email}. Reason (optional):`,"");s(d.id);try{await G.put(`/v1/super-admin/clients/${d.id}/status`,{is_active:f,reason:m||null}),l()}catch{}finally{s("")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Manage organizations using ATS-HR."}),n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Client Name"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Account Manager"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Active Jobs"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Plan"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),n.jsxs("tbody",{children:[o.map(d=>{const u=String(d.status||"").toLowerCase()==="active",f=r===d.id;return n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:d.name||d.email}),n.jsx("td",{className:"px-4 py-3",children:d.status}),n.jsx("td",{className:"px-4 py-3",children:d.account_manager_id||"?"}),n.jsx("td",{className:"px-4 py-3",children:d.active_jobs}),n.jsx("td",{className:"px-4 py-3",children:d.subscription_plan||"Standard"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{disabled:f,onClick:()=>c(d),className:`rounded-md px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-60 ${u?"bg-red-600":"bg-emerald-600"}`,children:f?"Saving...":u?"Suspend":"Activate"})})]},d.id)}),o.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-6 text-center text-slate-500",colSpan:"6",children:i?"No clients match this search.":"No clients found."})})]})]})})]})}const WI={full_name:"",username:"",email:"",password:""};function wBe(e){if(!e)return"Never logged in";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()}function NBe(){const[e,t]=y.useState([]),[r,s]=y.useState(!1),[a,i]=y.useState(WI),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u]=ea(),f=(u.get("q")||"").trim().toLowerCase(),m=()=>{G.get("/v1/super-admin/admins").then(h=>t(Array.isArray(h.data)?h.data:[])).catch(()=>t([]))};y.useEffect(()=>{m()},[]);const g=y.useMemo(()=>f?e.filter(h=>[h==null?void 0:h.full_name,h==null?void 0:h.email,h==null?void 0:h.role,h==null?void 0:h.scope,h==null?void 0:h.last_login,h==null?void 0:h.status].join(" ").toLowerCase().includes(f)):e,[e,f]),x=async h=>{var p,v;if(h.preventDefault(),o(""),!a.username||!a.email||!a.password){o("Username, email and password are required.");return}d(!0);try{await G.post("/v1/super-admin/admins",{username:a.username.trim(),email:a.email.trim(),password:a.password,role:"admin",full_name:a.full_name.trim()||null}),i(WI),s(!1),m()}catch(b){o(((v=(p=b==null?void 0:b.response)==null?void 0:p.data)==null?void 0:v.detail)||"Failed to create admin.")}finally{d(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Govern admin users and access scope."}),n.jsx("button",{className:"rounded-md bg-purple-600 px-4 py-2 text-sm text-white",onClick:()=>{o(""),s(h=>!h)},children:r?"Close":"Create Admin"})]}),r&&n.jsxs("form",{onSubmit:x,className:"rounded-lg border border-purple-200 bg-purple-50 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Full Name",value:a.full_name,onChange:h=>i(p=>({...p,full_name:h.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Username *",value:a.username,onChange:h=>i(p=>({...p,username:h.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Email *",type:"email",value:a.email,onChange:h=>i(p=>({...p,email:h.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Password *",type:"password",value:a.password,onChange:h=>i(p=>({...p,password:h.target.value}))})]}),l&&n.jsx("p",{className:"mt-3 text-sm text-red-600",children:l}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"submit",disabled:c,className:"rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:c?"Creating...":"Save Admin"})})]}),n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Admin Name"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Role"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Scope"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Last Login"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),n.jsxs("tbody",{children:[g.map(h=>n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:h.full_name||h.email}),n.jsx("td",{className:"px-4 py-3",children:h.role}),n.jsx("td",{className:"px-4 py-3",children:h.scope}),n.jsx("td",{className:"px-4 py-3",children:wBe(h.last_login)}),n.jsx("td",{className:"px-4 py-3",children:h.status})]},h.id)),g.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-6 text-center text-slate-500",colSpan:"5",children:f?"No admins match this search.":"No admins found."})})]})]})})]})}const VI=new Set(["super_admin","admin","candidate"]),kBe=[25,50,100,500],q_=["create","view","update","delete"],SBe=new Set(["settings","roles_permissions","system_settings","users"]),HI={super_admin:"Full governance access across tenants and policies.",admin:"Operational administration for hiring workflows.",recruiter:"Day-to-day recruitment and candidate management access.",account_manager:"Client and account ownership operations.",candidate:"Self-service candidate portal permissions."},CBe={candidates:"Candidates",client:"Clients",finance:"Finance",interviews:"Interviews",job_applications:"Job Applications",jobs:"Jobs"},ABe={create:"Add",view:"View",update:"Edit",delete:"Delete"},EBe={create:"",update:"",view:"",delete:""},hg={search:"",role_name:"",module_name:"",action_name:"",status:"all",date_from:"",date_to:"",sort_by:"created_at",sort_order:"desc"};function Ou(e){if(!e)return"-";try{return new Date(e).toLocaleString()}catch{return"-"}}function TBe(e,t,r="text/plain"){const s=new Blob([t],{type:r}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=e,i.click(),URL.revokeObjectURL(a)}function H4(e){return String(e||"").replace(/_/g," ").trim().replace(/\b\w/g,t=>t.toUpperCase())}function Vl(e){if(!e)return"";const t=String(e).trim().toLowerCase();return CBe[t]||H4(t)}function ql(e){if(!e)return"";const t=String(e).trim().toLowerCase();return ABe[t]||H4(t)}function PBe(e){const t=String(e||"").trim().toLowerCase();return`${EBe[t]||""} ${ql(e)}`.trim()}function qI(e){const r=String(e||"").trim().replace(/^[\u2713\u2714]\s*/u,"").replace(/^check\s+/i,"");return H4(r)}function pg(e){return ll(Vt(e).toLowerCase(),"Role name",{pattern:/^[a-z0-9_ ]+$/,patternMessage:"Role name can only contain lowercase letters, numbers, spaces, and underscores."})}function OBe(){var Oa,Os;const[e]=ea(),t=(e.get("q")||"").trim(),[r,s]=y.useState(t),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState(!0),[u,f]=y.useState(!1),[m,g]=y.useState(""),[x,h]=y.useState([]),[p,v]=y.useState([]),[b,j]=y.useState({}),[N,w]=y.useState(""),[_,k]=y.useState(""),[C,T]=y.useState(""),[P,A]=y.useState(""),[S,E]=y.useState(null),[O,I]=y.useState(!1),[L,Z]=y.useState({open:!1,role:null,name:""}),[H,R]=y.useState({open:!1,id:"",role_name:"",module_name:"",action_name:""}),[D,Y]=y.useState({module_name:"",action_name:""}),[M,X]=y.useState(""),[ne,J]=y.useState({x:0,y:0}),[ue,ke]=y.useState(!1),[ve,je]=y.useState({}),[ie,se]=y.useState(""),[z,Te]=y.useState("grid"),[fe,Ie]=y.useState({}),[ce,Ce]=y.useState({}),[Ye,at]=y.useState({module_name:"",actions:{}}),[pe,ye]=y.useState(new Set),[Pe,et]=y.useState(hg),[We,qe]=y.useState(hg),[ot,Ct]=y.useState([]),[He,mt]=y.useState(1),[rt,wt]=y.useState(25),[At,$t]=y.useState(0),[Wt,lr]=y.useState(1),[sr,De]=y.useState({roles:[],modules:[],actions:[]}),[yt,ut]=y.useState(""),[Lt,Yt]=y.useState([]),[be,nt]=y.useState(null),[ze,ht]=y.useState([]),Nt=y.useRef(null),Oe=y.useRef({originX:0,originY:0,startX:0,startY:0}),xe=oe=>{ht(Le=>[{text:oe,at:new Date().toISOString()},...Le].slice(0,12))},Re=async()=>{var U,de;const[oe,Le]=await Promise.all([G.get("/v1/roles"),G.get("/v1/permissions-matrix/roles-summary",{params:{search:""}})]),Qe=Array.isArray(oe==null?void 0:oe.data)?oe.data:Array.isArray((U=oe==null?void 0:oe.data)==null?void 0:U.roles)?oe.data.roles:[];j(Qe.reduce((Fe,$e)=>($e!=null&&$e.name&&($e==null?void 0:$e.id)!=null&&(Fe[$e.name]=$e.id),Fe),{}));const dt=Array.isArray((de=Le==null?void 0:Le.data)==null?void 0:de.items)?Le.data.items:[],ae=new Map(Qe.map(Fe=>[Fe.name,Fe.id])),Ke=dt.map(Fe=>({...Fe,id:ae.get(Fe.name)||null}));v(Ke),!_&&Ke.length&&k(Ke[0].name)},le=async()=>{var Le;const oe=await G.get("/v1/permissions-matrix");je(((Le=oe==null?void 0:oe.data)==null?void 0:Le.matrix)||{})},Me=async(oe,Le,Qe)=>{f(!0);const dt={...oe,search:[oe.search,r].filter(Boolean).join(" ").trim(),page:Le,limit:Qe};try{const ae=await G.get("/v1/permissions-matrix/list",{params:dt}),Ke=(ae==null?void 0:ae.data)||{};Ct(Array.isArray(Ke.items)?Ke.items:[]),$t(Number(Ke.total||0)),lr(Number(Ke.total_pages||1)),De(Ke.filters||{roles:[],modules:[],actions:[]}),ye(new Set)}finally{f(!1)}},Ve=async oe=>{var Qe;if(!oe){Yt([]);return}const Le=await G.get("/v1/permissions-matrix/list",{params:{role_name:oe,page:1,limit:500,sort_by:"module_name",sort_order:"asc"}});Yt(Array.isArray((Qe=Le==null?void 0:Le.data)==null?void 0:Qe.items)?Le.data.items:[])};y.useEffect(()=>{d(!0),Promise.all([Re(),le(),Me(Pe,He,rt),Ve(_)]).catch(oe=>{var Le,Qe;return i(((Qe=(Le=oe==null?void 0:oe.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Failed to load roles & permissions.")}).finally(()=>d(!1))},[]),y.useEffect(()=>{if(!a)return;const oe=Date.now().toString();h(Qe=>[...Qe,{id:oe,text:a}].slice(-4));const Le=setTimeout(()=>{h(Qe=>Qe.filter(dt=>dt.id!==oe))},2600);return()=>clearTimeout(Le)},[a]),y.useEffect(()=>{Me(Pe,He,rt).catch(oe=>{var Le,Qe;i(((Qe=(Le=oe==null?void 0:oe.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Failed to load permission records.")})},[Pe,He,rt,r]),y.useEffect(()=>{Ve(_).catch(()=>Yt([]))},[_]),y.useMemo(()=>p.find(oe=>oe.name===_)||null,[p,_]);const Xe=y.useMemo(()=>{const oe=[N,r].filter(Boolean).join(" ").toLowerCase().trim();return oe?p.filter(Le=>Le.name.toLowerCase().includes(oe)):p},[p,N,r]),he=y.useMemo(()=>{const oe=Object.entries(ve||{}).map(([Qe,dt])=>({moduleName:Qe,actions:Object.entries(dt||{}).map(([ae,Ke])=>({actionName:ae,roleNames:Array.isArray(Ke)?Ke:[]}))})),Le=[ie,r].filter(Boolean).join(" ").toLowerCase().trim();return Le?oe.map(Qe=>({...Qe,actions:Qe.actions.filter(dt=>[Qe.moduleName,dt.actionName,...dt.roleNames||[]].join(" ").toLowerCase().includes(Le))})).filter(Qe=>Qe.actions.length>0||Qe.moduleName.toLowerCase().includes(Le)):oe},[ve,ie,r]),W=y.useMemo(()=>Array.from(new Set([...Object.keys(ve||{}),...sr.modules||[]])).sort(),[ve,sr.modules]),V=y.useMemo(()=>{const oe=Ye.module_name,Le=oe?Object.keys(ve[oe]||{}):[];return Array.from(new Set([...Le,...q_])).sort()},[Ye.module_name,ve]),Q=y.useMemo(()=>Array.from(new Set([...sr.actions||[],...q_])).sort(),[sr.actions]),K=y.useMemo(()=>ot.filter(oe=>pe.has(oe.id)),[ot,pe]),q=y.useMemo(()=>{const oe=Lt.reduce((Le,Qe)=>{const dt=Qe.module_name||"unknown";return Le[dt]||(Le[dt]=[]),Le[dt].push(Qe),Le},{});return Object.entries(oe).sort(([Le],[Qe])=>Le.localeCompare(Qe))},[Lt]),F=y.useMemo(()=>S!=null&&S.name?Lt.filter(oe=>oe.role_name===S.name):[],[Lt,S]),ee=y.useMemo(()=>{const oe=F.reduce((Le,Qe)=>{const dt=Qe.module_name||"unknown";return Le[dt]||(Le[dt]=[]),Le[dt].push(Qe),Le},{});return Object.entries(oe).map(([Le,Qe])=>({moduleName:Le,items:[...Qe].sort((dt,ae)=>(dt.action_name||"").localeCompare(ae.action_name||""))})).sort((Le,Qe)=>Le.moduleName.localeCompare(Qe.moduleName))},[F]),me=y.useMemo(()=>{const oe=S==null?void 0:S.name,Le=[];oe&&he.forEach(Ke=>{Ke.actions.some(de=>(de.roleNames||[]).includes(oe))&&Le.push(Ke.moduleName)});const Qe=Array.from(new Set([...W||[],...he.map(Ke=>Ke.moduleName)])),dt=Array.from(new Set(Le)).sort(),ae=Qe.filter(Ke=>!dt.includes(Ke)).sort();return[...dt,...ae]},[S,he,W]),Ne=y.useMemo(()=>{const oe=(D.module_name||"").trim().toLowerCase();if(!oe)return[];const Le=he.find(dt=>String(dt.moduleName||"").trim().toLowerCase()===oe),Qe=Le?Le.actions.map(dt=>dt.actionName):[];return Qe.length>0?Array.from(new Set(Qe)).sort():[...q_]},[D.module_name,he]);y.useMemo(()=>q.map(([oe,Le])=>({moduleName:oe,actions:Array.from(new Set(Le.map(Qe=>Qe.action_name))).sort()})).sort((oe,Le)=>oe.moduleName.localeCompare(Le.moduleName)),[q]),y.useMemo(()=>he.map(oe=>{const Le={};return oe.actions.forEach(Qe=>{Le[Qe.actionName]=Qe.roleNames||[]}),{moduleName:oe.moduleName,canCreate:(Le.create||[]).includes(_),canView:(Le.view||[]).includes(_),canUpdate:(Le.update||[]).includes(_),canDelete:(Le.delete||[]).includes(_)}}),[he,_]);const ge=y.useMemo(()=>{const oe=(p||[]).map(Qe=>Qe.name).filter(Boolean),Le=new Set;return he.forEach(Qe=>{Qe.actions.forEach(dt=>{(dt.roleNames||[]).forEach(ae=>Le.add(ae))})}),Array.from(new Set([...oe,...Array.from(Le)])).sort((Qe,dt)=>Qe.localeCompare(dt))},[p,he]),te=y.useMemo(()=>he.map(oe=>{const Le={};return ge.forEach(Qe=>{Le[Qe]=[]}),oe.actions.forEach(Qe=>{(Qe.roleNames||[]).forEach(dt=>{Le[dt]||(Le[dt]=[]),Le[dt].push(Qe.actionName)})}),Object.keys(Le).forEach(Qe=>{Le[Qe]=Array.from(new Set(Le[Qe])).sort()}),{moduleName:oe.moduleName,roleActionMap:Le}}),[he,ge]);V.every(oe=>!!Ye.actions[oe]);const Se=async()=>{var ae,Ke;const oe=window.prompt("Create role: enter role name"),Le=Vt(oe).toLowerCase(),Qe=pg(Le);if(Qe){i(Qe);return}if((p||[]).some(U=>Vt(U==null?void 0:U.name).toLowerCase()===Le)){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}o(!0),i("");try{await G.post("/v1/roles",{name:Le,description:""}),k(Le),xe(`Created role '${Le}'`),await Re()}catch(U){i(((Ke=(ae=U==null?void 0:U.response)==null?void 0:ae.data)==null?void 0:Ke.detail)||"Failed to create role.")}finally{o(!1)}},Ue=async(oe,Le)=>{let Qe=1,dt=1;for(;Qe<=dt;){const ae=await G.get("/v1/permissions-matrix/list",{params:{role_name:oe,page:Qe,limit:500,sort_by:"created_at",sort_order:"asc"}}),Ke=(ae==null?void 0:ae.data)||{},U=Array.isArray(Ke.items)?Ke.items:[];dt=Number(Ke.total_pages||1);for(const de of U)try{await G.post("/v1/permissions-matrix",{role_name:Le,module_name:de.module_name,action_name:de.action_name})}catch{}Qe+=1}},Be=async(oe,Le)=>{var ae,Ke;if(!oe)return;T("");const Qe=(oe==null?void 0:oe.id)??(b==null?void 0:b[oe==null?void 0:oe.name]),dt={...oe,id:Qe};if(!dt.id&&(Le==="edit"||Le==="archive"||Le==="delete")){i("Role action unavailable: role id not found.");return}o(!0),i("");try{if(Le==="edit"){const U=Vt(window.prompt("Rename role",dt.name)).toLowerCase(),de=pg(U);if(de){i(de);return}if((p||[]).some($e=>Vt($e==null?void 0:$e.name).toLowerCase()===U&&Vt($e==null?void 0:$e.name).toLowerCase()!==Vt(dt.name).toLowerCase())){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}if(!U||U===dt.name)return;await G.put(`/v1/roles/${dt.id}`,{name:U,description:""}),k(U),xe(`Renamed role '${dt.name}' -> '${U}'`)}if(Le==="duplicate"){const U=Vt(window.prompt("Duplicate role as",`${dt.name}_copy`)).toLowerCase(),de=pg(U);if(de){i(de);return}if((p||[]).some($e=>Vt($e==null?void 0:$e.name).toLowerCase()===U)){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}await G.post("/v1/roles",{name:U,description:""}),await Ue(dt.name,U),k(U),xe(`Duplicated role '${dt.name}' into '${U}'`)}if(Le==="archive"){const U=`${dt.name}_archived_${Date.now().toString().slice(-6)}`;await G.put(`/v1/roles/${dt.id}`,{name:U,description:""}),k(U),xe(`Archived role '${dt.name}'`)}if(Le==="delete"){if(VI.has(dt.name)){i("Reserved role cannot be deleted.");return}if(!window.confirm(`Delete role '${dt.name}'? This cannot be undone.`))return;await G.delete(`/v1/roles/${dt.id}`),k(""),xe(`Deleted role '${dt.name}'`)}await Promise.all([Re(),le(),Me(Pe,He,rt)])}catch(U){i(((Ke=(ae=U==null?void 0:U.response)==null?void 0:ae.data)==null?void 0:Ke.detail)||"Role action failed.")}finally{o(!1)}},Ge=oe=>{k(oe),A(Le=>Le===oe?"":oe)},tt=oe=>{k(oe.name),A(""),J({x:0,y:0}),Y({module_name:"",action_name:""}),X(""),E(oe),Ve(oe.name).catch(()=>{})},_e=oe=>{A(""),Z({open:!0,role:oe,name:(oe==null?void 0:oe.name)||""})},Je=async()=>{var Ke,U;const oe=L.role;if(!oe)return;const Le=Vt(L.name).toLowerCase(),Qe=pg(Le);if(Qe){i(Qe);return}if((p||[]).some(de=>Vt(de==null?void 0:de.name).toLowerCase()===Le&&Vt(de==null?void 0:de.name).toLowerCase()!==Vt(oe.name).toLowerCase())){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}if(Le===oe.name){Z({open:!1,role:null,name:""});return}const ae=(oe==null?void 0:oe.id)??(b==null?void 0:b[oe==null?void 0:oe.name]);if(!ae){i("Cannot edit role: role id not found.");return}o(!0),i("");try{await G.put(`/v1/roles/${ae}`,{name:Le,description:""}),k(Le),Z({open:!1,role:null,name:""}),xe(`Renamed role '${oe.name}' -> '${Le}'`),await Promise.all([Re(),le(),Me(Pe,He,rt)])}catch(de){i(((U=(Ke=de==null?void 0:de.response)==null?void 0:Ke.data)==null?void 0:U.detail)||"Failed to edit role.")}finally{o(!1)}},B=oe=>{R({open:!0,id:(oe==null?void 0:oe.id)||"",role_name:(oe==null?void 0:oe.role_name)||_||"",module_name:(oe==null?void 0:oe.module_name)||"",action_name:(oe==null?void 0:oe.action_name)||""})},re=async()=>{var Qe,dt;if(!(S!=null&&S.name))return;const oe=(D.module_name||"").trim().toLowerCase().replace(/\s+/g,"_"),Le=(D.action_name||"").trim().toLowerCase().replace(/\s+/g,"_");if(!oe||!Le){X("Module and action are required.");return}o(!0),i(""),X("");try{await G.post("/v1/permissions-matrix",{role_name:S.name,module_name:oe,action_name:Le}),Y({module_name:"",action_name:""}),xe(`Created permission '${S.name} | ${oe} | ${Le}'`),await Promise.all([Me(Pe,He,rt),le(),Ve(S.name),Re()])}catch(ae){const Ke=((dt=(Qe=ae==null?void 0:ae.response)==null?void 0:Qe.data)==null?void 0:dt.detail)||"Failed to create permission.";X(Ke),i(Ke)}finally{o(!1)}},st=async oe=>{var Qe,dt;if(!(!(oe!=null&&oe.id)||!window.confirm(`Are you sure you want to delete '${oe.module_name} | ${oe.action_name}'?`))){o(!0),i("");try{await G.delete(`/v1/permissions-matrix/${oe.id}`),xe(`Removed permission '${oe.id}'`),await Promise.all([Me(Pe,He,rt),le(),Ve((S==null?void 0:S.name)||_),Re()])}catch(ae){i(((dt=(Qe=ae==null?void 0:ae.response)==null?void 0:Qe.data)==null?void 0:dt.detail)||"Failed to remove permission.")}finally{o(!1)}}},ct=async()=>{var Le,Qe;if(!H.id)return;const oe={role_name:(H.role_name||"").trim(),module_name:(H.module_name||"").trim(),action_name:(H.action_name||"").trim()};if(!oe.role_name||!oe.module_name||!oe.action_name){i("Role, module and action are required.");return}o(!0),i("");try{await G.put(`/v1/permissions-matrix/${H.id}`,oe),R({open:!1,id:"",role_name:"",module_name:"",action_name:""}),xe(`Edited permission '${oe.role_name} | ${oe.module_name} | ${oe.action_name}'`),await Promise.all([Me(Pe,He,rt),le(),Ve((S==null?void 0:S.name)||_),Re()])}catch(dt){i(((Qe=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Failed to edit permission.")}finally{o(!1)}},Ee=oe=>{oe.preventDefault(),Oe.current={originX:ne.x,originY:ne.y,startX:oe.clientX,startY:oe.clientY},ke(!0)};y.useEffect(()=>{if(!ue)return;const oe=Qe=>{const dt=Qe.clientX-Oe.current.startX,ae=Qe.clientY-Oe.current.startY;J({x:Oe.current.originX+dt,y:Oe.current.originY+ae})},Le=()=>ke(!1);return window.addEventListener("mousemove",oe),window.addEventListener("mouseup",Le),()=>{window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",Le)}},[ue]);const Ft=()=>{mt(1),et({...We})},pt=()=>{qe(hg),et(hg),mt(1)},Mt=oe=>{if(oe){ye(new Set(ot.map(Le=>Le.id)));return}ye(new Set)},Bt=(oe,Le)=>{ye(Qe=>{const dt=new Set(Qe);return Le?dt.add(oe):dt.delete(oe),dt})},yr=async()=>{var Le,Qe;if(!(!K.length||!window.confirm(`Remove ${K.length} permission record(s)?`))){o(!0),i("");try{await G.post("/v1/permissions-matrix/bulk-delete",{ids:K.map(dt=>dt.id)}),xe(`Bulk removed ${K.length} permission(s)`),await Promise.all([Me(Pe,He,rt),le(),Ve(_),Re()])}catch(dt){i(((Qe=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Bulk remove failed.")}finally{o(!1)}}},Tr=async oe=>{var Le,Qe;if(K.length){o(!0),i("");try{await G.post("/v1/permissions-matrix/bulk-lock",{ids:K.map(dt=>dt.id),lock:oe}),xe(`${oe?"Locked":"Unlocked"} ${K.length} permission(s)`),await Me(Pe,He,rt)}catch(dt){i(((Qe=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Bulk lock action failed.")}finally{o(!1)}}},Ps=async()=>{var Le,Qe;if(!K.length)return;const oe=(window.prompt("Bulk edit action name (e.g., view/update/delete)")||"").trim();if(oe){o(!0),i("");try{for(const dt of K)await G.put(`/v1/permissions-matrix/${dt.id}`,{role_name:dt.role_name,module_name:dt.module_name,action_name:oe});xe(`Bulk edited ${K.length} permission(s) to action '${oe}'`),await Promise.all([Me(Pe,He,rt),le(),Ve(_)])}catch(dt){i(((Qe=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:Qe.detail)||"Bulk edit failed.")}finally{o(!1)}}},vt=async()=>{var oe,Le;o(!0),i("");try{const Qe={...Pe,search:[Pe.search,r].filter(Boolean).join(" ").trim()},dt=await G.get("/v1/permissions-matrix/export",{params:Qe,responseType:"blob"}),ae=URL.createObjectURL(dt.data),Ke=document.createElement("a");Ke.href=ae,Ke.download="permissions_export.csv",Ke.click(),URL.revokeObjectURL(ae),xe("Exported filtered permission records")}catch(Qe){i(((Le=(oe=Qe==null?void 0:Qe.response)==null?void 0:oe.data)==null?void 0:Le.detail)||"Export failed.")}finally{o(!1)}},gn=()=>{if(!K.length)return;const oe=["id,role_name,module_name,action_name,status,last_updated"];K.forEach(Le=>{oe.push([Le.id,Le.role_name,Le.module_name,Le.action_name,Le.status,Le.updated_at].map(Qe=>`"${String(Qe??"").replaceAll('"','""')}"`).join(","))}),TBe("permissions_selected.csv",oe.join(`
`),"text/csv"),xe(`Exported ${K.length} selected permission(s)`)},js=async(oe,Le)=>{var Qe,dt;if(ut(""),Le==="history"){try{const ae=await G.get(`/v1/permissions-matrix/history/${oe.id}`);nt((ae==null?void 0:ae.data)||null)}catch{nt({permission_id:oe.id,events:[]})}return}o(!0),i("");try{if(Le==="edit"){const ae=(window.prompt("Role",oe.role_name)||"").trim(),Ke=(window.prompt("Module",oe.module_name)||"").trim(),U=(window.prompt("Action",oe.action_name)||"").trim();if(!ae||!Ke||!U)return;await G.put(`/v1/permissions-matrix/${oe.id}`,{role_name:ae,module_name:Ke,action_name:U}),xe(`Edited permission '${oe.id}'`)}if(Le==="remove"){if(!window.confirm("Remove this permission?"))return;await G.delete(`/v1/permissions-matrix/${oe.id}`),xe(`Removed permission '${oe.id}'`)}if(Le==="clone"){const ae=(window.prompt("Clone to role",oe.role_name)||"").trim();if(!ae)return;await G.post("/v1/permissions-matrix",{role_name:ae,module_name:oe.module_name,action_name:oe.action_name}),xe(`Cloned permission '${oe.id}' to role '${ae}'`)}await Promise.all([Me(Pe,He,rt),le(),Ve(_),Re()])}catch(ae){i(((dt=(Qe=ae==null?void 0:ae.response)==null?void 0:Qe.data)==null?void 0:dt.detail)||"Permission action failed.")}finally{o(!1)}},xa=async oe=>{var de,Fe,$e;const Le=(de=oe.target.files)==null?void 0:de[0];if(!Le)return;const dt=(await Le.text()).split(/\r?\n/).map(xt=>xt.trim()).filter(Boolean);if(dt.length<=1){i("CSV has no permission rows.");return}const ae=dt[0].toLowerCase(),U=ae.includes("role")&&ae.includes("module")&&ae.includes("action")?dt.slice(1):dt;o(!0),i("");try{let xt=0;for(const It of U){const er=It.split(",").map(vn=>vn.trim().replace(/^"|"$/g,"")),Xt=er[0],Ut=er[1],br=er[2];if(!(!Xt||!Ut||!br))try{await G.post("/v1/permissions-matrix",{role_name:Xt,module_name:Ut,action_name:br}),xt+=1}catch{}}xe(`Imported ${xt} permission(s) from CSV`),i(`Import completed. Added ${xt} permission(s).`),await Promise.all([Me(Pe,He,rt),le(),Ve(_),Re()])}catch(xt){i((($e=(Fe=xt==null?void 0:xt.response)==null?void 0:Fe.data)==null?void 0:$e.detail)||"Import failed.")}finally{o(!1),oe.target.value=""}},yn=ot.length>0&&ot.every(oe=>pe.has(oe.id)),Br="w-full rounded-xl border border-slate-200 bg-slate-50/70 py-2.5 pl-10 pr-10 text-sm text-slate-800 shadow-sm outline-none transition focus:border-violet-400 focus:bg-white focus:ring-4 focus:ring-violet-100";return n.jsxs("div",{className:"space-y-4 bg-slate-50/60 p-1",children:[n.jsx("div",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:n.jsxs("div",{className:"flex flex-col gap-3 xl:flex-row xl:items-end xl:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Roles & Permissions"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Manage role access and system security"})]}),n.jsxs("div",{className:"flex w-full flex-col gap-2 xl:w-auto xl:min-w-[560px]",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ps,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:r,onChange:oe=>s(oe.target.value),placeholder:"Search roles, modules, permissions",className:Br,"aria-label":"Global search"}),r&&n.jsx("button",{type:"button",onClick:()=>s(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear global search",children:n.jsx(_r,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{Te("grid"),I(!0)},className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50",children:[n.jsx(wR,{className:"h-4 w-4"}),"System Access Overview"]}),n.jsxs("button",{type:"button",onClick:Se,disabled:l,className:"inline-flex items-center gap-2 rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-violet-700 disabled:opacity-60",children:[n.jsx(bi,{className:"h-4 w-4"}),"Create Role"]}),n.jsxs("button",{type:"button",onClick:vt,disabled:l,className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 disabled:opacity-60",children:[n.jsx(Lv,{className:"h-4 w-4"}),"Export"]}),n.jsxs("button",{type:"button",onClick:()=>{var oe;return(oe=Nt.current)==null?void 0:oe.click()},disabled:l,className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 disabled:opacity-60",children:[n.jsx(b4e,{className:"h-4 w-4"}),"Import Permissions"]}),n.jsx("input",{ref:Nt,type:"file",accept:".csv,text/csv",className:"hidden",onChange:xa})]})]})]})}),n.jsx("div",{className:"fixed right-6 top-6 z-50 space-y-2",children:x.map(oe=>n.jsx("div",{className:"rounded-lg bg-slate-900/95 px-3 py-2 text-sm text-white shadow-lg transition-all",children:oe.text},oe.id))}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Role Management"}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700",children:Xe.length})]}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(ps,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:N,onChange:oe=>w(oe.target.value),placeholder:"Search role",className:Br}),N&&n.jsx("button",{type:"button",onClick:()=>w(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear role search",children:n.jsx(_r,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"max-h-[640px] space-y-2 overflow-auto pr-1",children:[c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"}),n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"}),n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"})]}),!c&&Xe.map(oe=>{const Le=oe.name===_,Qe=VI.has(oe.name),dt=String(oe.name||"").includes("_archived_");return n.jsxs("div",{title:HI[oe.name]||"Custom role",className:`relative rounded-lg p-3 shadow-sm ring-1 transition hover:-translate-y-0.5 hover:shadow ${Le?"bg-violet-50 ring-violet-300":"bg-white ring-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>Ge(oe.name),className:"flex-1 text-left",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wR,{className:`h-4 w-4 ${Qe?"text-amber-600":"text-violet-600"}`}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:oe.name}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:oe.permissions_count||0}),n.jsx("span",{className:`rounded-full px-2 py-0.5 text-[10px] font-semibold ${dt?"bg-slate-100 text-slate-600 ring-1 ring-slate-200":"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"}`,children:dt?"archived":"active"})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Modified: ",Ou(oe.last_modified)]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>T(ae=>ae===oe.name?"":oe.name),className:"rounded-md border border-slate-200 p-1 text-slate-600","aria-label":`Actions for ${oe.name}`,children:n.jsx(vR,{className:"h-4 w-4"})}),C===oe.name&&n.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-36 rounded-md border border-slate-200 bg-white p-1 shadow-lg",children:[n.jsx("button",{type:"button",onClick:()=>Be(oe,"edit"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"duplicate"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Duplicate"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"archive"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Archive"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"delete"),className:"w-full rounded px-2 py-1 text-left text-xs text-red-700 hover:bg-red-50",children:"Delete"})]})]})]}),P===oe.name&&n.jsxs("div",{className:"mt-3 rounded-xl bg-gradient-to-br from-violet-50 via-white to-slate-50 p-3 shadow-lg ring-1 ring-violet-200 transition-all duration-200",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Quick Actions"}),n.jsx("button",{type:"button",onClick:()=>A(""),className:"rounded-md px-2 py-0.5 text-xs font-semibold text-slate-600 hover:bg-slate-100",children:"Close"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:HI[oe.name]||"Custom role with configurable access."}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Permissions: ",oe.permissions_count||0," | Updated: ",Ou(oe.last_modified)]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>tt(oe),className:"rounded-md bg-violet-600 px-2 py-1 text-xs font-semibold text-white hover:bg-violet-700",children:"View Details"}),n.jsx("button",{type:"button",onClick:()=>_e(oe),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"duplicate"),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Duplicate"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"archive"),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Archive"}),n.jsx("button",{type:"button",onClick:()=>Be(oe,"delete"),className:"rounded-md bg-red-50 px-2 py-1 text-xs font-semibold text-red-700 ring-1 ring-red-200 hover:bg-red-100",children:"Delete"})]})]})]},oe.name)})]})]}),n.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Permission Table"}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700",children:At})]}),n.jsxs("div",{className:"rounded-lg p-3 ring-1 ring-slate-200",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-3",children:[n.jsxs("div",{className:"relative xl:col-span-2",children:[n.jsx(ps,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:We.search,onChange:oe=>qe(Le=>({...Le,search:oe.target.value})),placeholder:"Search module, role, action",className:Br}),We.search&&n.jsx("button",{type:"button",onClick:()=>qe(oe=>({...oe,search:""})),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear permission table search",children:n.jsx(_r,{className:"h-4 w-4"})})]}),n.jsxs("select",{value:We.role_name,onChange:oe=>qe(Le=>({...Le,role_name:oe.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All roles"}),(sr.roles||[]).map(oe=>n.jsx("option",{value:oe,children:oe},oe))]}),n.jsxs("select",{value:We.module_name,onChange:oe=>qe(Le=>({...Le,module_name:oe.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All modules"}),(sr.modules||[]).map(oe=>n.jsx("option",{value:oe,children:Vl(oe)},oe))]}),n.jsxs("select",{value:We.action_name,onChange:oe=>qe(Le=>({...Le,action_name:oe.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All actions"}),(sr.actions||[]).map(oe=>n.jsx("option",{value:oe,children:ql(oe)},oe))]}),n.jsx("input",{type:"datetime-local",value:We.date_from,onChange:oe=>qe(Le=>({...Le,date_from:oe.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{type:"datetime-local",value:We.date_to,onChange:oe=>qe(Le=>({...Le,date_to:oe.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsxs("select",{value:`${We.sort_by}:${We.sort_order}`,onChange:oe=>{const[Le,Qe]=oe.target.value.split(":");qe(dt=>({...dt,sort_by:Le,sort_order:Qe}))},className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"created_at:desc",children:"Newest first"}),n.jsx("option",{value:"created_at:asc",children:"Oldest first"}),n.jsx("option",{value:"role_name:asc",children:"Role A-Z"}),n.jsx("option",{value:"module_name:asc",children:"Module A-Z"}),n.jsx("option",{value:"action_name:asc",children:"Action A-Z"})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:pt,className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:"Reset Filters"}),n.jsxs("button",{type:"button",onClick:Ft,className:"inline-flex items-center gap-2 rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-violet-700",children:[n.jsx(A1,{className:"h-4 w-4"}),"Apply Filters"]})]})]}),K.length>0&&n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded-md border border-indigo-200 bg-indigo-50 p-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-indigo-900",children:[K.length," selected"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:Ps,disabled:l,className:"rounded bg-white px-2 py-1 text-xs font-semibold text-slate-700 disabled:opacity-60",children:"Bulk Edit"}),n.jsxs("button",{type:"button",onClick:yr,disabled:l,className:"inline-flex items-center gap-1 rounded bg-red-100 px-2 py-1 text-xs font-semibold text-red-700 disabled:opacity-60",children:[n.jsx(om,{className:"h-3 w-3"}),"Bulk Remove"]}),n.jsx("button",{type:"button",onClick:gn,className:"rounded bg-white px-2 py-1 text-xs font-semibold text-slate-700",children:"Export Selected"}),n.jsxs("button",{type:"button",onClick:()=>Tr(!0),disabled:l,className:"inline-flex items-center gap-1 rounded bg-amber-100 px-2 py-1 text-xs font-semibold text-amber-700 disabled:opacity-60",children:[n.jsx(jR,{className:"h-3 w-3"}),"Lock Permissions"]}),n.jsxs("button",{type:"button",onClick:()=>Tr(!1),disabled:l,className:"inline-flex items-center gap-1 rounded bg-emerald-100 px-2 py-1 text-xs font-semibold text-emerald-700 disabled:opacity-60",children:[n.jsx(R4e,{className:"h-3 w-3"}),"Unlock"]})]})]}),n.jsx("div",{className:"mt-3 max-h-[520px] overflow-x-auto overflow-y-auto rounded-lg ring-1 ring-slate-200",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-100 text-xs uppercase tracking-wide text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:yn,onChange:oe=>Mt(oe.target.checked)})}),n.jsx("th",{className:"px-3 py-2",children:"Role"}),n.jsx("th",{className:"px-3 py-2",children:"Module"}),n.jsx("th",{className:"px-3 py-2",children:"Action"}),n.jsx("th",{className:"px-3 py-2",children:"Assigned By"}),n.jsx("th",{className:"px-3 py-2",children:"Last Updated"}),n.jsx("th",{className:"px-3 py-2",children:"Status"}),n.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),n.jsxs("tbody",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})}),n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})}),n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})})]}),!u&&ot.map((oe,Le)=>n.jsxs("tr",{className:`border-t border-slate-200 text-slate-800 transition hover:bg-violet-50 ${Le%2?"bg-white":"bg-slate-50/60"}`,children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:pe.has(oe.id),onChange:Qe=>Bt(oe.id,Qe.target.checked)})}),n.jsx("td",{className:"px-3 py-2 font-medium",children:oe.role_name}),n.jsx("td",{className:"px-3 py-2",children:Vl(oe.module_name)}),n.jsx("td",{className:"px-3 py-2",children:ql(oe.action_name)}),n.jsx("td",{className:"px-3 py-2",children:oe.assigned_by||"system"}),n.jsx("td",{className:"px-3 py-2",children:Ou(oe.updated_at||oe.created_at)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold ${oe.status==="locked"?"bg-amber-50 text-amber-700 ring-1 ring-amber-200":"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"}`,children:oe.status||"active"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>ut(Qe=>Qe===oe.id?"":oe.id),className:"rounded-md border border-slate-200 p-1 text-slate-600","aria-label":`Actions for permission ${oe.id}`,children:n.jsx(vR,{className:"h-4 w-4"})}),yt===oe.id&&n.jsxs("div",{className:"absolute right-0 z-30 mt-1 w-40 rounded-md border border-slate-200 bg-white p-1 shadow-lg",children:[n.jsx("button",{type:"button",onClick:()=>js(oe,"edit"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Edit permission"}),n.jsx("button",{type:"button",onClick:()=>js(oe,"remove"),className:"w-full rounded px-2 py-1 text-left text-xs text-red-700 hover:bg-red-50",children:"Remove permission"}),n.jsx("button",{type:"button",onClick:()=>js(oe,"history"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"View audit history"}),n.jsx("button",{type:"button",onClick:()=>js(oe,"clone"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Clone permission"})]})]})})]},oe.id)),!u&&ot.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-8 text-center text-sm text-slate-500",children:"No permission records found."})})]})]})}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-xs text-slate-600",children:["Showing ",(He-1)*rt+1,"-",Math.min(He*rt,At)," of ",At]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs text-slate-600",children:"Page size"}),n.jsx("select",{value:rt,onChange:oe=>{wt(Number(oe.target.value)),mt(1)},className:"rounded border border-slate-300 px-2 py-1 text-sm",children:kBe.map(oe=>n.jsx("option",{value:oe,children:oe},oe))}),n.jsx("button",{type:"button",onClick:()=>mt(oe=>Math.max(1,oe-1)),disabled:He<=1,className:"rounded border border-slate-300 px-2 py-1 text-sm disabled:opacity-40",children:"Prev"}),n.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",He," / ",Wt]}),n.jsx("button",{type:"button",onClick:()=>mt(oe=>Math.min(Wt,oe+1)),disabled:He>=Wt,className:"rounded border border-slate-300 px-2 py-1 text-sm disabled:opacity-40",children:"Next"})]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 p-3",children:[n.jsx("p",{className:"mb-2 text-xs font-semibold uppercase text-slate-500",children:"Audit Log"}),n.jsxs("div",{className:"max-h-36 space-y-1 overflow-auto",children:[ze.map((oe,Le)=>n.jsxs("p",{className:"text-xs text-slate-600",children:[Ou(oe.at)," - ",oe.text]},`${oe.at}-${Le}`)),ze.length===0&&n.jsx("p",{className:"text-xs text-slate-500",children:"No recent activity."})]})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 p-3",children:[n.jsx("p",{className:"mb-2 text-xs font-semibold uppercase text-slate-500",children:"Permission History"}),!be&&n.jsx("p",{className:"text-xs text-slate-500",children:"Select a row action: View audit history."}),be&&n.jsxs("div",{className:"max-h-36 space-y-1 overflow-auto",children:[(be.events||[]).map((oe,Le)=>n.jsxs("p",{className:"text-xs text-slate-600",children:[Ou(oe.at)," - ",oe.event," by ",oe.by]},`${oe.at}-${Le}`)),(!be.events||be.events.length===0)&&n.jsx("p",{className:"text-xs text-slate-500",children:"No audit events found."})]})]})]})]})]}),O&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-6",children:n.jsxs("div",{className:"flex h-[88vh] w-full max-w-6xl flex-col rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4 flex items-start justify-between rounded-lg bg-slate-50 px-3 py-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"System Access"}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Role Permission Matrix"}),n.jsx("p",{className:"text-sm text-slate-600",children:"System-wide RBAC configuration."})]}),n.jsx("button",{type:"button",onClick:()=>I(!1),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Close"})]}),n.jsxs("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto pr-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Te("list"),className:`rounded px-3 py-1.5 text-sm ${z==="list"?"bg-violet-600 text-white":"bg-slate-100 text-slate-700"}`,children:"List"}),n.jsx("button",{type:"button",onClick:()=>Te("grid"),className:`rounded px-3 py-1.5 text-sm ${z==="grid"?"bg-violet-600 text-white":"bg-slate-100 text-slate-700"}`,children:"Grid"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const oe={};he.forEach(Le=>{oe[Le.moduleName]=!0}),Ie(oe)},className:"rounded bg-slate-100 px-3 py-1.5 text-sm text-slate-700",children:"Collapse All"}),n.jsx("button",{type:"button",onClick:()=>Ie({}),className:"rounded bg-slate-100 px-3 py-1.5 text-sm text-slate-700",children:"Expand All"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(ps,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:ie,onChange:oe=>se(oe.target.value),placeholder:"Search inside matrix",className:Br}),ie&&n.jsx("button",{type:"button",onClick:()=>se(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear matrix search",children:n.jsx(_r,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[z==="list"&&he.map(oe=>{const Le=!!fe[oe.moduleName];return n.jsxs("div",{className:"rounded border border-slate-200 p-2",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(Qe=>({...Qe,[oe.moduleName]:!Qe[oe.moduleName]})),className:"flex w-full items-center justify-between text-left",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 text-sm font-semibold text-slate-800",children:[SBe.has(oe.moduleName)&&n.jsx(jR,{className:"h-3.5 w-3.5 text-amber-600"}),Vl(oe.moduleName)]}),Le?n.jsx(S1,{className:"h-4 w-4"}):n.jsx(io,{className:"h-4 w-4"})]}),!Le&&n.jsx("div",{className:"mt-2 space-y-1",children:oe.actions.map(Qe=>n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("span",{className:"font-semibold text-slate-700",children:ql(Qe.actionName)})," : ",Qe.roleNames.length?Qe.roleNames.map(qI).join(", "):"No role"]},`${oe.moduleName}-${Qe.actionName}`))})]},oe.moduleName)}),z==="grid"&&n.jsx("div",{className:"overflow-auto rounded-md ring-1 ring-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-100 text-slate-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"sticky left-0 z-10 min-w-[200px] bg-slate-100 px-3 py-2 text-left font-semibold",children:"Module"}),ge.map(oe=>n.jsx("th",{className:"min-w-[140px] px-3 py-2 text-left font-semibold",children:qI(oe)},`col-${oe}`))]})}),n.jsx("tbody",{children:te.map((oe,Le)=>n.jsxs("tr",{className:Le%2?"bg-white":"bg-slate-50",children:[n.jsx("td",{className:"sticky left-0 z-10 bg-inherit px-3 py-2 font-semibold text-slate-800",children:Vl(oe.moduleName)}),ge.map(Qe=>{const dt=oe.roleActionMap[Qe]||[];return n.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:dt.length?dt.map(ql).join(", "):n.jsx("span",{className:"text-slate-300",children:"-"})},`${oe.moduleName}-${Qe}`)})]},oe.moduleName))})]})})]})]})]})})}),S&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto overscroll-contain bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-6",children:n.jsxs("div",{style:{transform:`translate(${ne.x}px, ${ne.y}px)`},className:"flex h-[88vh] w-full max-w-5xl flex-col rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200 transition-transform",children:[n.jsxs("div",{onMouseDown:Ee,className:"mb-4 flex cursor-move items-start justify-between rounded-lg bg-slate-50 px-2 py-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Role Details"}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:S.name}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Permissions: ",S.permissions_count||0," | Last modified: ",Ou(S.last_modified)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>J({x:0,y:0}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Reset Position"}),n.jsx("button",{type:"button",onClick:()=>E(null),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Close"})]})]}),n.jsxs("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto overscroll-contain pr-1",onWheel:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"rounded-lg bg-slate-50 p-3 ring-1 ring-slate-200",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Create Permission"}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-[1fr_1fr_auto]",children:[n.jsx("input",{value:D.module_name,onChange:oe=>Y(Le=>({...Le,module_name:oe.target.value,action_name:""})),list:"details-module-options",placeholder:"Module",className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm"}),n.jsx("input",{value:D.action_name,onChange:oe=>Y(Le=>({...Le,action_name:oe.target.value})),list:Ne.length>0?"details-action-options":"action-options",placeholder:(Oa=D.module_name)!=null&&Oa.trim()?"Action":"Select module first",disabled:!((Os=D.module_name)!=null&&Os.trim()),className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm"}),n.jsx("button",{type:"button",onClick:re,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Create"})]}),M&&n.jsx("p",{className:"mt-2 text-xs font-semibold text-red-600",children:M}),n.jsx("datalist",{id:"details-module-options",children:(me.length?me:W).map(oe=>n.jsx("option",{value:oe},`details-module-${oe}`))}),n.jsx("datalist",{id:"details-action-options",children:Ne.map(oe=>n.jsx("option",{value:oe},`details-action-${oe}`))})]}),n.jsxs("div",{className:"rounded-lg bg-white p-3 ring-1 ring-slate-200",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-900",children:"Role Permissions"}),n.jsxs("div",{className:"space-y-2",children:[ee.map(oe=>n.jsxs("div",{className:"rounded-lg bg-slate-50 p-3 ring-1 ring-slate-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-slate-900",children:Vl(oe.moduleName)}),n.jsxs("p",{className:"text-xs text-slate-500",children:[oe.items.length," permissions"]})]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:oe.items.map(Le=>n.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-sm ring-1 ring-slate-200",children:[n.jsx("span",{className:"font-medium text-slate-800",children:PBe(Le.action_name)}),n.jsx("button",{type:"button",onClick:()=>B(Le),className:"rounded p-1 text-violet-700 transition hover:bg-violet-100",title:`Edit ${ql(Le.action_name)} on ${Vl(Le.module_name)}`,"aria-label":`Edit ${ql(Le.action_name)} on ${Vl(Le.module_name)}`,children:n.jsx(U4e,{className:"h-3.5 w-3.5"})}),n.jsx("button",{type:"button",onClick:()=>st(Le),className:"rounded p-1 text-red-700 transition hover:bg-red-100",title:`Delete ${ql(Le.action_name)} on ${Vl(Le.module_name)}`,"aria-label":`Delete ${ql(Le.action_name)} on ${Vl(Le.module_name)}`,children:n.jsx(om,{className:"h-3.5 w-3.5"})})]},Le.id))})]},oe.moduleName)),ee.length===0&&n.jsx("p",{className:"py-3 text-sm text-slate-500",children:"No permissions for this role."})]})]})]})]})})}),L.open&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-10",children:n.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Edit Role"}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Update role details"})]}),n.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Role name"}),n.jsx("input",{value:L.name,onChange:oe=>Z(Le=>({...Le,name:oe.target.value})),className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm",autoFocus:!0}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Z({open:!1,role:null,name:""}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Je,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Save Changes"})]})]})})}),H.open&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-10",children:n.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Edit Permission"}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Update permission mapping"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{value:H.role_name,onChange:oe=>R(Le=>({...Le,role_name:oe.target.value})),placeholder:"role_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{value:H.module_name,onChange:oe=>R(Le=>({...Le,module_name:oe.target.value})),list:"module-options",placeholder:"module_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{value:H.action_name,onChange:oe=>R(Le=>({...Le,action_name:oe.target.value})),list:"action-options",placeholder:"action_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>R({open:!1,id:"",role_name:"",module_name:"",action_name:""}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:ct,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Save Permission"})]})]})})}),n.jsx("datalist",{id:"action-options",children:Q.map(oe=>n.jsx("option",{value:oe},oe))}),n.jsx("datalist",{id:"module-options",children:W.map(oe=>n.jsx("option",{value:oe},oe))})]})}function RBe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function LBe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function IBe(){const[e,t]=y.useState(null),[r,s]=y.useState([]);y.useEffect(()=>{let i=!0;return Promise.allSettled([G.get("/v1/super-admin/operations-analytics"),G.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(l=>{var d,u,f;if(!i)return;const o=l[0],c=l[1];if(o.status==="fulfilled"?t(((d=o.value)==null?void 0:d.data)||{}):t({}),c.status==="fulfilled"){const m=(f=(u=c.value)==null?void 0:u.data)==null?void 0:f.logs;s(Array.isArray(m)?m:[])}else s([])}),()=>{i=!1}},[]);const a=y.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const l=i.getTime();return r.filter(o=>{const c=new Date((o==null?void 0:o.timestamp)||"").getTime();return Number.isFinite(c)&&c>=l}).length},[r]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Operations Analytics"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Cross-team throughput and recruiter activity"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-xl border border-purple-200 bg-purple-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Jobs"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-purple-700",children:(e==null?void 0:e.total_jobs)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Applications"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-blue-700",children:(e==null?void 0:e.total_applications)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Interviews"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:(e==null?void 0:e.total_interviews)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Recruiter Actions Today"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:a})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Pipeline Throughput"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Current aggregate counts from operations services."}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Applications per Job"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:Number((e==null?void 0:e.total_jobs)||0)>0?(Number((e==null?void 0:e.total_applications)||0)/Number((e==null?void 0:e.total_jobs)||1)).toFixed(2):"0.00"})]}),n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Interviews per Application"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:Number((e==null?void 0:e.total_applications)||0)>0?(Number((e==null?void 0:e.total_interviews)||0)/Number((e==null?void 0:e.total_applications)||1)).toFixed(2):"0.00"})]})]})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:r.length})]}),n.jsx("div",{className:"space-y-2",children:r.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):r.slice(0,8).map(i=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:RBe(i.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:LBe(i.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",i.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",i.candidate_id||"--"," | Job: ",i.job_id||"--"]})]},i.id))})]})]})]})}function FBe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function DBe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function G_(e){return`Rs ${Number(e||0).toLocaleString("en-IN")}`}function $Be(){const[e,t]=y.useState(null),[r,s]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState("all"),[c,d]=y.useState(""),[u,f]=y.useState(""),[m]=ea(),g=(m.get("q")||"").trim().toLowerCase(),x=()=>G.get("/v1/super-admin/finance/summary").then(_=>t(_.data||{})).catch(()=>t({})),h=(_="all")=>{const k=_&&_!=="all"?{status:_}:void 0;return G.get("/v1/invoices",{params:k}).then(C=>{const T=C.data;s(Array.isArray(T)?T:[])}).catch(()=>s([]))};y.useEffect(()=>{let _=!0;return Promise.allSettled([G.get("/v1/super-admin/finance/summary"),G.get("/v1/invoices"),G.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(k=>{var A,S,E,O;if(!_)return;const C=k[0],T=k[1],P=k[2];if(C.status==="fulfilled"?t(((A=C.value)==null?void 0:A.data)||{}):t({}),T.status==="fulfilled"){const I=(S=T.value)==null?void 0:S.data;s(Array.isArray(I)?I:[])}else s([]);if(P.status==="fulfilled"){const I=(O=(E=P.value)==null?void 0:E.data)==null?void 0:O.logs;i(Array.isArray(I)?I:[])}else i([])}),()=>{_=!1}},[]),y.useEffect(()=>{h(l)},[l]);const p=async(_,k)=>{d(_),f("");try{await G.put(`/v1/invoices/${_}/status`,null,{params:{status:k}}),await Promise.allSettled([x(),h(l)]),f(`Invoice status updated to ${k}.`)}catch{f("Failed to update invoice status.")}finally{d("")}},v=Number((e==null?void 0:e.paid_amount)||0),b=Number((e==null?void 0:e.total_amount)||0),j=y.useMemo(()=>b<=0?0:v/b*100,[v,b]),N=y.useMemo(()=>g?r.filter(_=>[_==null?void 0:_.invoice_number,_==null?void 0:_.client_name,_==null?void 0:_.amount,_==null?void 0:_.status,_==null?void 0:_.due_date].join(" ").toLowerCase().includes(g)):r,[r,g]),w=y.useMemo(()=>g?a.filter(_=>[_==null?void 0:_.action,_==null?void 0:_.recruiter_name,_==null?void 0:_.candidate_id,_==null?void 0:_.job_id].join(" ").toLowerCase().includes(g)):a,[a,g]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Finance & Billing"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Invoice exposure, collections, and finance operations"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-xl border border-purple-200 bg-purple-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Invoices"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-purple-700",children:(e==null?void 0:e.total_invoices)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Amount"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-blue-700",children:G_(e==null?void 0:e.total_amount)})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Pending Amount"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:G_(e==null?void 0:e.pending_amount)})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Collection Rate"}),n.jsxs("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:[j.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-3",children:[n.jsxs("div",{className:"xl:col-span-2 rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Invoices"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Live invoice table with quick status actions."})]}),n.jsxs("select",{value:l,onChange:_=>o(_.target.value),className:"rounded-md border border-slate-200 px-2 py-1 text-xs",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"sent",children:"Sent"}),n.jsx("option",{value:"paid",children:"Paid"}),n.jsx("option",{value:"overdue",children:"Overdue"})]})]}),u&&n.jsx("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:u}),n.jsx("div",{className:"mt-4 overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Invoice"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Client"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Amount"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Due Date"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Action"})]})}),n.jsxs("tbody",{children:[N.slice(0,12).map(_=>n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-3 py-2 font-medium text-slate-900",children:_.invoice_number||_.id}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:_.client_name||"--"}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:G_(_.amount)}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:_.status||"--"}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:_.due_date||"--"}),n.jsx("td",{className:"px-3 py-2",children:(_.status||"").toLowerCase()==="paid"?n.jsx("span",{className:"rounded bg-emerald-100 px-2 py-1 text-xs font-semibold text-emerald-700",children:"Paid"}):n.jsx("button",{disabled:c===_.id,onClick:()=>p(_.id,"paid"),className:"rounded bg-emerald-600 px-2 py-1 text-xs font-semibold text-white disabled:opacity-50",children:c===_.id?"Saving...":"Mark Paid"})})]},_.id)),N.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-5 text-center text-slate-500",colSpan:"6",children:g?"No invoices match this search.":"No invoice rows available."})})]})]})})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:w.length})]}),n.jsx("div",{className:"space-y-2",children:w.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):w.slice(0,8).map(_=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:FBe(_.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:DBe(_.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",_.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",_.candidate_id||"--"," | Job: ",_.job_id||"--"]})]},_.id))})]})]})]})}function GI(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function JI(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function MBe(){const[e,t]=y.useState(null),[r,s]=y.useState([]),[a,i]=y.useState([]);y.useEffect(()=>{let o=!0;return Promise.allSettled([G.get("/v1/super-admin/compliance/summary"),G.get("/v1/super-admin/audit-logs",{params:{limit:150}}),G.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(c=>{var m,g,x,h;if(!o)return;const d=c[0],u=c[1],f=c[2];if(d.status==="fulfilled"?t(((m=d.value)==null?void 0:m.data)||{}):t({}),u.status==="fulfilled"){const p=(g=u.value)==null?void 0:g.data,v=Array.isArray(p)?p:Array.isArray(p==null?void 0:p.items)?p.items:[];s(v)}else s([]);if(f.status==="fulfilled"){const p=(h=(x=f.value)==null?void 0:x.data)==null?void 0:h.logs;i(Array.isArray(p)?p:[])}else i([])}),()=>{o=!1}},[]);const l=y.useMemo(()=>r.filter(o=>{const c=String((o==null?void 0:o.action)||"").toUpperCase();return c.includes("LOGIN")||c.includes("PASSWORD")||c.includes("PERMISSION")||c.includes("ROLE")||c.includes("LOCK")}).length,[r]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Compliance & Security"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Security posture, access governance, and recruiter activity"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Failed Logins"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-red-700",children:(e==null?void 0:e.failed_logins)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Security Flags"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:l})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Recruiter Activity Events"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:a.length})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-3",children:[n.jsxs("div",{className:"xl:col-span-2 rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Security Timeline"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Recent authentication, permission, and system control events."}),n.jsx("div",{className:"mt-4 space-y-2",children:r.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No compliance events available."}):r.slice(0,12).map(o=>n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:GI(o.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:JI(o.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Actor: ",o.user_id||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Entity: ",o.entity_type||"--",":",o.entity_id||"--"]})]},o.id))})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:a.length})]}),n.jsx("div",{className:"space-y-2",children:a.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):a.slice(0,8).map(o=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:GI(o.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:JI(o.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",o.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",o.candidate_id||"--"," | Job: ",o.job_id||"--"]})]},o.id))})]})]})]})}function BBe(){const[e,t]=y.useState([]),[r,s]=y.useState(""),[a,i]=y.useState("");y.useEffect(()=>{G.get("/v1/super-admin/feature-flags").then(d=>{const u=Array.isArray(d.data)?d.data:[];t(u.map(f=>({key:Vt(f.key),enabled:!!f.enabled,description:Vt(f.description||""),isDirty:!1})))}).catch(()=>t([]))},[]);const l=y.useMemo(()=>e.filter(d=>d.isDirty).length,[e]),o=d=>{i(""),t(u=>u.map(f=>f.key===d?{...f,enabled:!f.enabled,isDirty:!0}:f))},c=async d=>{const u=Vt(d.key),f=Vt(d.description),m=ll(u,"Feature name",{pattern:/^[A-Za-z0-9_. -]+$/,patternMessage:"Feature name can only contain letters, numbers, spaces, underscores, hyphens, and dots."});if(m){i(m);return}const g=wo(f,{minLength:20,required:!0});if(g){i(g);return}if(e.some(h=>h.key!==d.key&&Vt(h.key).toLowerCase()===u.toLowerCase())){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}s(d.key),i("");try{await G.put("/v1/super-admin/feature-flags",{key:u,enabled:!!d.enabled,description:f||null}),t(h=>h.map(p=>p.key===d.key?{...p,key:u,description:f,isDirty:!1}:p)),i(`Saved ${d.key}`)}catch{i(`Failed to save ${d.key}`)}finally{s("")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Control feature flags and platform configuration."}),n.jsxs("div",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:["Dirty Flags: ",l]})]}),a&&n.jsx("div",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",children:a}),n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.map(d=>{const u=r===d.key;return n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:d.key}),n.jsx("input",{value:d.description,onChange:f=>{const m=f.target.value;t(g=>g.map(x=>x.key===d.key?{...x,description:m,isDirty:!0}:x)),i("")},onBlur:f=>{const m=Vt(f.target.value);t(g=>g.map(x=>x.key===d.key?{...x,description:m,isDirty:!0}:x))},placeholder:"Feature description (min 20 chars)",className:"mt-1 w-80 max-w-full rounded border border-slate-300 px-2 py-1 text-xs text-slate-700"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o(d.key),className:`rounded-md px-3 py-1.5 text-xs font-semibold ${d.enabled?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"}`,children:d.enabled?"Enabled":"Disabled"}),n.jsx("button",{disabled:u||!d.isDirty,onClick:()=>c(d),className:"rounded-md bg-purple-600 px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:u?"Saving...":"Save"})]})]},d.key)}),e.length===0&&n.jsx("div",{className:"text-sm text-slate-500",children:"No feature flags configured."})]})]})}function UBe({search:e,onSearchChange:t,onExport:r,onRefresh:s}){return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Audit Logs"}),n.jsx("p",{className:"text-white/90",children:"Super Admin Governance"})]}),n.jsx("span",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold",children:"Production"})]})}),n.jsx("div",{className:"rounded-xl border bg-white p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"relative w-full md:max-w-md",children:[n.jsx(ps,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),n.jsx("input",{value:e,onChange:a=>t(a.target.value),className:"w-full rounded border py-2 pl-9 pr-3 text-sm",placeholder:"Search actor/email/entity/action/ip"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 rounded border px-3 py-2 text-sm",children:[n.jsx(Lv,{size:16}),"Export"]}),n.jsxs("button",{onClick:s,className:"inline-flex items-center gap-2 rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:[n.jsx(jo,{size:16}),"Refresh"]})]})]})})]})}function zBe({summary:e,onCardClick:t}){return n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsxs("button",{onClick:()=>t("total"),className:"rounded-xl border bg-white p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Total"}),n.jsx("p",{className:"text-2xl font-extrabold",children:e.total})]}),n.jsxs("button",{onClick:()=>t("critical"),className:"rounded-xl border border-red-200 bg-red-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-red-700",children:"Critical"}),n.jsx("p",{className:"text-2xl font-extrabold text-red-700",children:e.critical})]}),n.jsxs("button",{onClick:()=>t("failed_login"),className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-amber-700",children:"Failed Login"}),n.jsx("p",{className:"text-2xl font-extrabold text-amber-700",children:e.failedLogin})]}),n.jsxs("button",{onClick:()=>t("active_users"),className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-emerald-700",children:"Active Users Today"}),n.jsx("p",{className:"text-2xl font-extrabold text-emerald-700",children:e.activeUsers})]}),n.jsxs("button",{onClick:()=>t("exports"),className:"rounded-xl border border-blue-200 bg-blue-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-blue-700",children:"Exports"}),n.jsx("p",{className:"text-2xl font-extrabold text-blue-700",children:e.exports})]})]})}const Lr=e=>String(e??"").trim(),Js=e=>Lr(e).replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),xk=e=>{const t=Lr(e);if(!t)return null;const r=new Date(/(?:[zZ]|[+-]\d{2}(?::?\d{2})?)$/.test(t)?t:`${t}Z`);return Number.isNaN(r.getTime())?null:r},dV=e=>{const t=xk(e);if(!t)return"--";const r=Math.max(1,Math.floor((Date.now()-t.getTime())/6e4));if(r<60)return`${r}m ago`;const s=Math.floor(r/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},KI=e=>xk(e)?xk(e).toLocaleString():"--",WBe=(e,t)=>{const r=Lr((e==null?void 0:e.action_type)||(e==null?void 0:e.action)||(e==null?void 0:e.event)||"unknown_action").toLowerCase(),s=Lr((e==null?void 0:e.status)||((e==null?void 0:e.success)===!1?"failed":"success")).toLowerCase(),a=Lr(e==null?void 0:e.severity).toLowerCase()||(r.includes("delete")||r.includes("export")||r.includes("override")?"critical":s==="failed"?"warning":"info");return{id:Lr((e==null?void 0:e.id)||(e==null?void 0:e.log_id)||`${r}-${(e==null?void 0:e.timestamp)||t}`),timestamp:(e==null?void 0:e.timestamp)||(e==null?void 0:e.created_at)||null,actor_id:Lr((e==null?void 0:e.actor_id)||(e==null?void 0:e.user_id)),actor_name:Lr((e==null?void 0:e.actor_name)||(e==null?void 0:e.user_name)||(e==null?void 0:e.username)||(e==null?void 0:e.email)||"System"),actor_role:Lr((e==null?void 0:e.actor_role)||(e==null?void 0:e.role)||"unknown"),actor_email:Lr((e==null?void 0:e.actor_email)||(e==null?void 0:e.email)),action_type:r,action_label:Lr((e==null?void 0:e.action_label)||Js(r)),module:Lr((e==null?void 0:e.module)||(e==null?void 0:e.entity_type)||"system").toLowerCase(),entity_type:Lr((e==null?void 0:e.entity_type)||(e==null?void 0:e.resource_type)||"entity").toLowerCase(),entity_id:Lr((e==null?void 0:e.entity_id)||(e==null?void 0:e.resource_id)),entity_name:Lr((e==null?void 0:e.entity_name)||(e==null?void 0:e.entity_label)),old_value:(e==null?void 0:e.old_value)??(e==null?void 0:e.old_values)??null,new_value:(e==null?void 0:e.new_value)??(e==null?void 0:e.new_values)??null,ip_address:Lr((e==null?void 0:e.ip_address)||(e==null?void 0:e.ip)||"--"),user_agent:Lr(e==null?void 0:e.user_agent),location:Lr((e==null?void 0:e.location)||(e==null?void 0:e.geo_location)||(e==null?void 0:e.country)),failure_reason:Lr((e==null?void 0:e.failure_reason)||(e==null?void 0:e.error_reason)||(e==null?void 0:e.reason)||(e==null?void 0:e.error_message)||(e==null?void 0:e.message)),status:s,severity:a}},gk={severity:e=>e==="critical"?"bg-purple-100 text-purple-700":e==="error"?"bg-red-100 text-red-700":e==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-700",status:e=>e==="failed"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700",role:e=>e.includes("super")?"bg-violet-100 text-violet-700":e.includes("admin")?"bg-blue-100 text-blue-700":e.includes("recruiter")?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"},VBe=e=>{const t=e==null?"":typeof e=="object"?JSON.stringify(e):String(e);return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t};function HBe({draft:e,setDraft:t,options:r,groupBy:s,groupOptions:a,onGroupChange:i,onApply:l,onClear:o}){return n.jsxs("div",{className:"rounded-xl border bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm font-semibold",children:[n.jsx(A1,{size:15}),"Filters"]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-4 xl:grid-cols-8",children:[n.jsx("input",{type:"date",value:e.date_from,onChange:c=>t(d=>({...d,date_from:c.target.value})),className:"rounded border px-2 py-2 text-sm"}),n.jsx("input",{type:"date",value:e.date_to,onChange:c=>t(d=>({...d,date_to:c.target.value})),className:"rounded border px-2 py-2 text-sm"}),n.jsxs("select",{value:e.role,onChange:c=>t(d=>({...d,role:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Roles"}),r.roles.map(c=>n.jsx("option",{value:c,children:Js(c)},c))]}),n.jsx("input",{list:"audit-users",value:e.user_id,onChange:c=>t(d=>({...d,user_id:c.target.value})),className:"rounded border px-2 py-2 text-sm",placeholder:"User"}),n.jsx("datalist",{id:"audit-users",children:r.users.map(c=>n.jsx("option",{value:c},c))}),n.jsxs("select",{value:e.module,onChange:c=>t(d=>({...d,module:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Modules"}),r.modules.map(c=>n.jsx("option",{value:c,children:Js(c)},c))]}),n.jsxs("select",{value:e.action_type,onChange:c=>t(d=>({...d,action_type:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Actions"}),r.actions.map(c=>n.jsx("option",{value:c,children:Js(c)},c))]}),n.jsxs("select",{value:e.severity,onChange:c=>t(d=>({...d,severity:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Severity"}),n.jsx("option",{value:"info",children:"Info"}),n.jsx("option",{value:"warning",children:"Warning"}),n.jsx("option",{value:"critical",children:"Critical"})]}),n.jsxs("select",{value:e.status,onChange:c=>t(d=>({...d,status:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"success",children:"Success"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",children:"Group By"}),n.jsx("select",{value:s,onChange:c=>i(c.target.value),className:"rounded border px-2 py-1.5 text-sm",children:a.map(c=>n.jsx("option",{value:c,children:Js(c)},c))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:o,className:"rounded border px-3 py-1.5 text-sm",children:"Clear"}),n.jsx("button",{onClick:l,className:"rounded bg-indigo-600 px-3 py-1.5 text-sm font-semibold text-white",children:"Apply"})]})]})]})}function XI({active:e,direction:t,onClick:r,children:s}){return n.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1 text-left font-semibold text-slate-700 hover:text-slate-900",type:"button",children:[s,n.jsx(fCe,{size:13,className:e?"text-indigo-600":"text-slate-400"}),e&&n.jsx("span",{className:"text-xs text-indigo-600",children:t==="asc"?"ASC":"DESC"})]})}function YI({row:e,expandedRow:t,selected:r,onToggleExpand:s,onToggleSelect:a,onOpenUser:i,onSeverityClick:l}){const o=t===e.id;return n.jsxs(we.Fragment,{children:[n.jsxs("tr",{className:`border-b transition hover:bg-gray-50 ${e.severity==="critical"?"bg-purple-50/30":""}`,children:[n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("input",{type:"checkbox",checked:r.has(e.id),onChange:()=>a(e.id)})}),n.jsx("td",{className:"px-4 py-3 align-top",title:KI(e.timestamp),children:dV(e.timestamp)}),n.jsxs("td",{className:"px-4 py-3 align-top",children:[n.jsx("button",{className:"text-left font-medium hover:underline",onClick:()=>i(e),children:e.actor_name}),n.jsx("div",{className:"mt-1 text-xs text-slate-500",children:Js(e.actor_role)})]}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs text-slate-700",children:Js(e.module)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs font-medium ${gk.status(e.status)}`,children:Js(e.status)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("button",{onClick:()=>l(e.severity),className:`rounded px-2 py-1 text-xs font-medium ${gk.severity(e.severity)}`,type:"button",title:`Filter by ${Js(e.severity)}`,children:Js(e.severity)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("button",{onClick:()=>s(e.id),className:"cursor-pointer rounded-md p-2 transition hover:bg-gray-200",type:"button",title:o?"Collapse details":"Expand details",children:n.jsx(S1,{className:`transition-transform ${o?"rotate-90":""}`,size:16})})})]}),n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"p-0",children:n.jsx("div",{className:`overflow-hidden transition-all duration-300 ${o?"max-h-96":"max-h-0"}`,children:n.jsx("div",{className:"bg-gray-50 px-6 py-4 text-sm text-slate-700",children:n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP Address:"})," ",e.ip_address||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Device:"})," ",e.user_agent||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Browser:"})," ",e.user_agent||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",e.location||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Failure Reason:"})," ",e.failure_reason||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created At:"})," ",KI(e.timestamp)]})]})})})})})]},e.id)}function qBe({loading:e,error:t,rows:r,groups:s,groupBy:a,expandedRow:i,selected:l,sortBy:o,sortDir:c,allVisibleSelected:d,onToggleSelectAll:u,onSort:f,onToggleExpand:m,onToggleSelect:g,onOpenUser:x,onSeverityClick:h}){const p=n.jsx("thead",{className:"sticky top-0 z-10 bg-gray-100 text-left text-sm font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:n.jsx("input",{type:"checkbox",checked:d,onChange:u})}),n.jsx("th",{className:"px-4 py-3",children:n.jsx(XI,{active:o==="time",direction:c,onClick:()=>f("time"),children:"Time"})}),n.jsx("th",{className:"px-4 py-3",children:n.jsx(XI,{active:o==="user",direction:c,onClick:()=>f("user"),children:"User"})}),n.jsx("th",{className:"px-4 py-3",children:"Module"}),n.jsx("th",{className:"px-4 py-3",children:"Status"}),n.jsx("th",{className:"px-4 py-3",children:"Severity"}),n.jsx("th",{className:"px-4 py-3",children:"Actions"})]})});return n.jsxs("div",{className:"rounded-xl border bg-white",children:[t&&n.jsx("div",{className:"border-b bg-red-50 px-4 py-2 text-sm text-red-700",children:t}),e?n.jsx("div",{className:"p-8 text-center text-slate-600",children:"Loading audit logs..."}):a==="none"?n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[p,n.jsxs("tbody",{children:[r.map(v=>n.jsx(YI,{row:v,expandedRow:i,selected:l,onToggleExpand:m,onToggleSelect:g,onOpenUser:x,onSeverityClick:h},v.id)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-8 text-center text-slate-500",colSpan:7,children:"No logs found."})})]})]})}):n.jsxs("div",{className:"divide-y",children:[s.map(([v,b])=>n.jsxs("div",{children:[n.jsxs("div",{className:"bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-800",children:[v," (",b.length,")"]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[p,n.jsx("tbody",{children:b.map(j=>n.jsx(YI,{row:j,expandedRow:i,selected:l,onToggleExpand:m,onToggleSelect:g,onOpenUser:x,onSeverityClick:h},j.id))})]})})]},v)),s.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-500",children:"No logs found."})]})]})}function GBe({user:e,logs:t,onClose:r,onViewFull:s}){if(!e)return null;const a=t.filter(i=>`${i.actor_id} ${i.actor_name} ${i.actor_email}`.toLowerCase().includes((e.actor_id||e.actor_name||e.actor_email||"").toLowerCase()));return n.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-black/30",children:n.jsxs("div",{className:"h-full w-full max-w-md overflow-y-auto bg-white p-5",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"User Activity"}),n.jsx("button",{onClick:r,children:n.jsx(_r,{size:18})})]}),n.jsxs("div",{className:"rounded border p-3",children:[n.jsx("p",{className:"font-semibold",children:e.actor_name}),n.jsx("p",{className:"text-xs text-slate-600",children:e.actor_email||"--"}),n.jsx("p",{className:`mt-1 inline-flex rounded px-2 py-0.5 text-xs ${gk.role((e.actor_role||"").toLowerCase())}`,children:Js(e.actor_role)})]}),n.jsx("div",{className:"mt-4 space-y-2",children:a.slice(0,12).map(i=>n.jsxs("div",{className:"rounded border p-2",children:[n.jsx("p",{className:"text-sm font-semibold",children:i.action_label}),n.jsxs("p",{className:"text-xs text-slate-600",children:[dV(i.timestamp)," - ",Js(i.module)]})]},i.id))}),n.jsx("button",{onClick:()=>s(e),className:"mt-4 w-full rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:"View Full Logs"})]})})}function JBe({open:e,counts:t,onClose:r,onExport:s}){const[a,i]=y.useState("current"),[l,o]=y.useState("csv");if(!e)return null;const c=a==="selected"?t.selected:a==="all"?t.all:t.current;return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:n.jsxs("div",{className:"w-full max-w-md rounded-xl border bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Export Logs"}),n.jsx("button",{onClick:r,children:n.jsx(_r,{size:18})})]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Records: ",c]}),n.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[n.jsx("button",{onClick:()=>i("current"),className:`rounded border px-2 py-2 text-sm ${a==="current"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Current"}),n.jsx("button",{onClick:()=>i("all"),className:`rounded border px-2 py-2 text-sm ${a==="all"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"All"}),n.jsx("button",{onClick:()=>i("selected"),className:`rounded border px-2 py-2 text-sm ${a==="selected"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Selected"})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[n.jsx("button",{onClick:()=>o("csv"),className:`rounded border px-2 py-2 text-sm ${l==="csv"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"CSV"}),n.jsx("button",{onClick:()=>o("xlsx"),className:`rounded border px-2 py-2 text-sm ${l==="xlsx"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Excel"})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:r,className:"rounded border px-3 py-2 text-sm",children:"Cancel"}),n.jsx("button",{onClick:()=>s(a,l),className:"rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:"Export"})]})]})})}function KBe({page:e,totalPages:t,limit:r,pageSizes:s,totalCount:a,onPageChange:i,onLimitChange:l}){return n.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border bg-white p-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{children:"Page Size"}),n.jsx("select",{value:r,onChange:o=>l(Number(o.target.value)),className:"rounded border px-2 py-1",children:s.map(o=>n.jsx("option",{value:o,children:o},o))}),n.jsxs("span",{children:["Total: ",a]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>i(Math.max(1,e-1)),disabled:e===1,className:"rounded border px-3 py-1 text-sm disabled:opacity-40",children:"Prev"}),n.jsxs("span",{className:"text-sm",children:["Page ",e," / ",t]}),n.jsx("button",{onClick:()=>i(Math.min(t,e+1)),disabled:e>=t,className:"rounded border px-3 py-1 text-sm disabled:opacity-40",children:"Next"})]})]})}const XBe=e=>Array.isArray(e)?{items:e,total:e.length}:Array.isArray(e==null?void 0:e.items)?{items:e.items,total:Number(e.total??e.items.length)}:{items:[],total:0},YBe=async(e={})=>{const t=await G.get("/v1/super-admin/audit-logs",{params:e});return XBe(t==null?void 0:t.data)},ZBe=async(e={})=>G.get("/audit-logs/export",{params:e,responseType:"blob"}),ZI=async(e={})=>{try{await G.post("/v1/super-admin/audit-logs",{action_type:"DATA_EXPORT",module:"audit_logs",entity_type:"audit_log_export",status:"success",severity:"warning",...e})}catch{}},xg={date_from:"",date_to:"",role:"",user_id:"",module:"",action_type:"",severity:"",status:""},QBe=["none","role","user","module","action_type","date","severity"],eUe=[25,50,100];function tUe(e,t){var a;const s=Lr((a=e==null?void 0:e.headers)==null?void 0:a["content-disposition"]).match(/filename\*?=(?:UTF-8''|")?([^\";]+)/i);return decodeURIComponent(((s==null?void 0:s[1])||t).replace(/"/g,""))}function QI(e,t){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}function rUe(e){const t=["id","timestamp","actor_id","actor_name","actor_role","actor_email","action_type","action_label","module","entity_type","entity_id","entity_name","ip_address","status","severity","old_value","new_value"],r=t.join(","),s=e.map(a=>t.map(i=>{const l=i==="old_value"||i==="new_value"?a[i]??null:a[i];return VBe(l)}).join(","));return[r,...s].join(`
`)}function nUe(){const[e,t]=y.useState([]),[r,s]=y.useState(0),[a,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,f]=y.useState(xg),[m,g]=y.useState(xg),[x,h]=y.useState("none"),[p,v]=y.useState(null),[b,j]=y.useState(new Set),[N,w]=y.useState(null),[_,k]=y.useState(!1),[C,T]=y.useState(1),[P,A]=y.useState(50),[S,E]=y.useState(0),[O,I]=y.useState("time"),[L,Z]=y.useState("desc"),H=y.useCallback(async()=>{var se,z;i(!0),o("");try{const Te={page:C,limit:P,search:Lr(c),...m};Object.keys(Te).forEach(ce=>{Te[ce]===""&&delete Te[ce]});const fe=await YBe(Te),Ie=((fe==null?void 0:fe.items)||[]).map((ce,Ce)=>WBe(ce,Ce));t(Ie),s(Number((fe==null?void 0:fe.total)??Ie.length))}catch(Te){t([]),s(0),o(Lr(((z=(se=Te==null?void 0:Te.response)==null?void 0:se.data)==null?void 0:z.detail)||(Te==null?void 0:Te.message)||"Failed to fetch audit logs"))}finally{i(!1)}},[m,P,C,c]);y.useEffect(()=>{H()},[H,S]);const R=y.useMemo(()=>{const se=z=>Array.from(new Set(z.map(Lr).filter(Boolean))).sort();return{roles:se(e.map(z=>z.actor_role)),users:se(e.map(z=>z.actor_id||z.actor_email||z.actor_name)),modules:se(e.map(z=>z.module)),actions:se(e.map(z=>z.action_type))}},[e]),D=y.useMemo(()=>{const se=[...e];return se.sort((z,Te)=>{if(O==="user"){const ce=Lr(z.actor_name).toLowerCase(),Ce=Lr(Te.actor_name).toLowerCase();return ce<Ce?L==="asc"?-1:1:ce>Ce?L==="asc"?1:-1:0}const fe=z.timestamp?new Date(z.timestamp).getTime():0,Ie=Te.timestamp?new Date(Te.timestamp).getTime():0;return L==="asc"?fe-Ie:Ie-fe}),se},[e,O,L]),Y=y.useMemo(()=>{if(x==="none")return[];const se=D.reduce((z,Te)=>{let fe="Unknown";return x==="role"&&(fe=Js(Te.actor_role||"unknown")),x==="user"&&(fe=Te.actor_name||Te.actor_email||"Unknown"),x==="module"&&(fe=Js(Te.module||"unknown")),x==="action_type"&&(fe=Js(Te.action_type||"unknown")),x==="severity"&&(fe=Js(Te.severity||"unknown")),x==="date"&&(fe=Te.timestamp?new Date(Te.timestamp).toLocaleDateString():"Unknown"),z.has(fe)||z.set(fe,[]),z.get(fe).push(Te),z},new Map);return Array.from(se.entries())},[x,D]),M=y.useMemo(()=>{const se=D.filter(ce=>ce.severity==="critical").length,z=D.filter(ce=>ce.status==="failed"&&(ce.action_type.includes("login")||ce.action_label.toLowerCase().includes("login"))).length,Te=D.filter(ce=>ce.action_type.includes("export")).length,fe=new Date().toDateString(),Ie=new Set(D.filter(ce=>ce.timestamp?new Date(ce.timestamp).toDateString()===fe:!1).map(ce=>ce.actor_id||ce.actor_email||ce.actor_name)).size;return{total:r,critical:se,failedLogin:z,activeUsers:Ie,exports:Te}},[D,r]),X=y.useMemo(()=>D.length>0&&D.every(se=>b.has(se.id)),[b,D]),ne=Math.max(1,Math.ceil(r/P)),J=se=>{v(z=>z===se?null:se)},ue=se=>j(z=>{const Te=new Set(z);return Te.has(se)?Te.delete(se):Te.add(se),Te}),ke=async(se,z)=>{var fe,Ie,ce,Ce;const Te=se==="all";try{if(Te){const Ye={...m,search:Lr(c),format:z,scope:"all"};Object.keys(Ye).forEach(ye=>{Ye[ye]===""&&delete Ye[ye]});const at=await ZBe(Ye),pe=tUe(at,`audit-logs-all-${new Date().toISOString().slice(0,10)}.${z==="xlsx"?"xlsx":"csv"}`);QI(at.data,pe)}else{const Ye=se==="selected"?D.filter(Pe=>b.has(Pe.id)):D,at=rUe(Ye),pe=new Blob([at],{type:"text/csv;charset=utf-8;"}),ye=`audit-logs-${se}-${new Date().toISOString().slice(0,10)}.csv`;QI(pe,ye)}await ZI({action_label:"Audit Logs Exported",status:"success",severity:"warning",module:"audit_logs",entity_type:"audit_log_export",new_value:{scope:se,format:z,filters:m,search:Lr(c),page:C,limit:P,selected_count:b.size}}),k(!1)}catch(Ye){o(Lr(((Ie=(fe=Ye==null?void 0:Ye.response)==null?void 0:fe.data)==null?void 0:Ie.detail)||(Ye==null?void 0:Ye.message)||"Export failed")),await ZI({action_label:"Audit Logs Export Failed",status:"failed",severity:"critical",module:"audit_logs",entity_type:"audit_log_export",new_value:{scope:se,format:z,error:Lr(((Ce=(ce=Ye==null?void 0:Ye.response)==null?void 0:ce.data)==null?void 0:Ce.detail)||(Ye==null?void 0:Ye.message)||"unknown_error")}})}},ve=()=>{g(u),T(1)},je=()=>{f(xg),g(xg),d(""),T(1)},ie=se=>{if(se==="critical"){f(z=>({...z,severity:"critical"})),g(z=>({...z,severity:"critical"})),T(1);return}if(se==="failed_login"){f(z=>({...z,status:"failed"})),g(z=>({...z,status:"failed"})),T(1);return}if(se==="exports"){f(z=>({...z,action_type:"data_export"})),g(z=>({...z,action_type:"data_export"})),T(1);return}je()};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(UBe,{search:c,onSearchChange:se=>{d(se),T(1)},onExport:()=>k(!0),onRefresh:()=>E(se=>se+1)}),n.jsx(zBe,{summary:M,onCardClick:ie}),n.jsx(HBe,{draft:u,setDraft:f,options:R,groupBy:x,groupOptions:QBe,onGroupChange:h,onApply:ve,onClear:je}),n.jsx(qBe,{loading:a,error:l,rows:D,groups:Y,groupBy:x,expandedRow:p,selected:b,sortBy:O,sortDir:L,allVisibleSelected:X,onToggleSelectAll:()=>j(se=>{const z=new Set(se);return X?D.forEach(Te=>z.delete(Te.id)):D.forEach(Te=>z.add(Te.id)),z}),onSort:se=>{if(O===se){Z(z=>z==="asc"?"desc":"asc");return}I(se),Z(se==="user"?"asc":"desc")},onToggleExpand:J,onToggleSelect:ue,onOpenUser:w,onSeverityClick:se=>{f(z=>({...z,severity:se})),g(z=>({...z,severity:se})),T(1)}}),n.jsx(KBe,{page:C,totalPages:ne,limit:P,pageSizes:eUe,totalCount:r,onPageChange:T,onLimitChange:se=>{A(se),T(1)}}),n.jsx(GBe,{user:N,logs:D,onClose:()=>w(null),onViewFull:se=>{const z=(se==null?void 0:se.actor_id)||(se==null?void 0:se.actor_email)||(se==null?void 0:se.actor_name)||"";f(Te=>({...Te,user_id:z})),g(Te=>({...Te,user_id:z})),w(null),T(1)}}),n.jsx(JBe,{open:_,counts:{current:D.length,all:r,selected:b.size},onClose:()=>k(!1),onExport:ke})]})}function eF(){const e=ys(),[t,r]=y.useState({keyword:"",logic:"OR",min_exp:"",max_exp:"",location:""}),[s,a]=y.useState(!1),[i,l]=y.useState([]),[o,c]=y.useState([]),[d,u]=y.useState(!1),[f,m]=y.useState(!1),[g,x]=y.useState(null),[h,p]=y.useState(0),[v,b]=y.useState(1),[j,N]=y.useState(!1),[w,_]=y.useState(!1),[k,C]=y.useState(""),T=20,[P,A]=y.useState(!1),[S,E]=y.useState(null),[O,I]=y.useState(!1),[L,Z]=y.useState(!1),[H,R]=y.useState(null),[D,Y]=y.useState(""),[M,X]=y.useState(!1),[ne,J]=y.useState(null),ue=y.useMemo(()=>t.keyword||t.min_exp||t.max_exp||t.location,[t]);y.useEffect(()=>{const ce=new URLSearchParams(e.search);if(ce.size===0)return;const Ce={keyword:ce.get("keyword")||"",logic:ce.get("logic")||"OR",min_exp:ce.get("min_exp")||"",max_exp:ce.get("max_exp")||"",location:ce.get("location")||""};r(Ce),ve(Ce)},[e.search]);const ke=ce=>{const{name:Ce,value:Ye}=ce.target;r(at=>({...at,[Ce]:Ye}))},ve=async(ce,Ce=1)=>{var at,pe;const Ye=ce||t;try{m(!0),x(null);const ye={keyword:Ye.keyword||void 0,logic:Ye.logic,min_exp:Ye.min_exp?parseFloat(Ye.min_exp):void 0,max_exp:Ye.max_exp?parseFloat(Ye.max_exp):void 0,location:Ye.location||void 0,limit:T,offset:(Ce-1)*T},Pe=await xU(ye),et=Pe.results.map(We=>({id:We.id,name:We.name,email:We.email,phone:We.phone,experience:We.experience||0,location:We.location||"Not specified",skills:Array.isArray(We.skills)?We.skills:typeof We.skills=="string"?We.skills.split(",").map(qe=>qe.trim()):[],salary:We.salary||0,profileMatch:85,designation:We.designation,employer:We.employer,resume_url:We.resume_url,status:We.status}));c(et),p(Pe.total),b(Ce),u(!0),l([])}catch(ye){x(((pe=(at=ye.response)==null?void 0:at.data)==null?void 0:pe.message)||ye.message||"Failed to search candidates. Please try again."),c([]),p(0),u(!0)}finally{m(!1)}},je=Math.max(1,Math.ceil(h/T)),ie=ce=>{l(Ce=>Ce.includes(ce)?Ce.filter(Ye=>Ye!==ce):[...Ce,ce])},se=()=>{i.length===o.length?l([]):l(o.map(ce=>ce.id))},z=async ce=>{try{I(!0),A(!0);const Ce=await pU(ce);E(Ce)}catch{E(null)}finally{I(!1)}},Te=(ce,Ce)=>{R({id:ce,name:Ce}),Z(!0)},fe=async()=>{var Ye,at;const ce=Vt(k),Ce=ll(ce,"Search name");if(Ce){x(Ce);return}try{N(!0),await G.post("/v1/resdex/saved-search",{name:ce,query:Vt(t.keyword),logic:t.logic,min_exp:t.min_exp||null,max_exp:t.max_exp||null,location:Vt(t.location)||null}),C(""),_(!1)}catch(pe){x(((at=(Ye=pe.response)==null?void 0:Ye.data)==null?void 0:at.detail)||"Failed to save search. Please try again.")}finally{N(!1)}},Ie=async()=>{var ce,Ce,Ye;if(H)try{X(!0);const at=await G.post("/v1/resdex/invite",{candidate_id:H.id,message:D});J(((ce=at.data)==null?void 0:ce.message)||"Invite sent successfully!"),Y(""),setTimeout(()=>{Z(!1),J(null),R(null)},1800)}catch(at){J({error:((Ye=(Ce=at.response)==null?void 0:Ce.data)==null?void 0:Ye.detail)||at.message||"Failed to send invite"})}finally{X(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Search Candidates"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Keyword"}),n.jsx("input",{type:"text",name:"keyword",value:t.keyword,onChange:ke,placeholder:"Skills, name, company...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search across name, skills, company, and resume"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search Logic"}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"logic",value:"AND",checked:t.logic==="AND",onChange:ke}),"AND"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"logic",value:"OR",checked:t.logic==="OR",onChange:ke}),"OR"]})]})]}),n.jsxs("button",{onClick:()=>a(ce=>!ce),className:"text-sm text-purple-600 font-semibold flex items-center gap-1",children:[n.jsx(A1,{size:14}),"Advanced Filters"]}),s&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Min Experience"}),n.jsx("input",{type:"number",name:"min_exp",value:t.min_exp,onChange:ke,placeholder:"0",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Max Experience"}),n.jsx("input",{type:"number",name:"max_exp",value:t.max_exp,onChange:ke,placeholder:"50",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",name:"location",value:t.location,onChange:ke,placeholder:"e.g., Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),n.jsx("button",{onClick:()=>ve(t,1),disabled:f,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-700 transition flex items-center justify-center gap-2 disabled:opacity-50",children:f?n.jsxs(n.Fragment,{children:[n.jsx(l_,{size:16,className:"animate-spin"}),"Searching..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ps,{size:16}),"Search"]})}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[n.jsx("span",{children:"Save this search for later use"}),n.jsx("button",{type:"button",onClick:()=>_(ce=>!ce),className:"text-purple-600 font-semibold",children:w?"Cancel":"Save Search"})]}),w&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{value:k,onChange:ce=>C(ce.target.value),onBlur:ce=>C(Vt(ce.target.value)),placeholder:"Search name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),n.jsx("button",{onClick:fe,disabled:j,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition disabled:opacity-50",children:j?"Saving...":"Save"})]})]})]})}),n.jsx("div",{className:"lg:col-span-3",children:d?f?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(l_,{size:48,className:"mx-auto text-purple-400 mb-4 animate-spin"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Searching Candidates"}),n.jsx("p",{className:"text-gray-600",children:"Please wait while we search the database..."})]}):g?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ks,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Search Error"}),n.jsx("p",{className:"text-red-700",children:g}),n.jsx("button",{onClick:()=>ve(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition",children:"Try Again"})]})]})}):o.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(ps,{size:48,className:"mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Results Found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"No candidates match your search criteria. Try adjusting your filters."}),ue&&n.jsx("button",{onClick:()=>{r({keyword:"",logic:"OR",min_exp:"",max_exp:"",location:""}),u(!1)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition",children:"Clear Filters"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Search Results"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",o.length," of ",h," candidates"]})]}),n.jsx("button",{onClick:se,className:"px-3 py-2 text-sm font-semibold text-purple-600 hover:bg-purple-50 rounded-lg transition",children:i.length===o.length?"Deselect All":"Select All"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Page ",v," of ",je]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ve(t,Math.max(1,v-1)),disabled:v===1||f,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),n.jsx("button",{onClick:()=>ve(t,Math.min(je,v+1)),disabled:v===je||f,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),n.jsx("div",{className:"space-y-3",children:o.map(ce=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-5 border border-gray-100",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("input",{type:"checkbox",className:"mt-1",checked:i.includes(ce.id),onChange:()=>ie(ce.id)}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:ce.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[ce.designation||"Role not specified","  ",ce.experience," years"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[ce.location,"  ",ce.email]}),ce.skills.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ce.skills.slice(0,6).map(Ce=>n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full",children:Ce},Ce))})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>z(ce.id),className:"px-3 py-2 text-sm font-semibold text-gray-700 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(il,{size:14}),"View"]}),n.jsxs("button",{onClick:()=>Te(ce.id,ce.name),className:"px-3 py-2 text-sm font-semibold text-white bg-purple-600 rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[n.jsx(Ai,{size:14}),"NVite"]})]})]})},ce.id))})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(ps,{size:48,className:"mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start Searching"}),n.jsx("p",{className:"text-gray-600",children:"Use the filters on the left to search for candidates matching your criteria"})]})})]}),P&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Candidate Profile"}),n.jsx("button",{onClick:()=>A(!1),children:n.jsx(_r,{size:18})})]}),n.jsx("div",{className:"p-6",children:O?n.jsx("div",{className:"text-center text-gray-600",children:"Loading..."}):S?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Name:"})," ",S.full_name||S.name||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",S.email||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",S.phone||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Date of Birth:"})," ",S.dob||S.date_of_birth||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Location:"})," ",S.current_location||S.currentLocation||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"City:"})," ",S.city||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Pincode:"})," ",S.pincode||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Address:"})," ",S.current_address||S.currentAddress||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Permanent Address:"})," ",S.permanent_address||S.permanentAddress||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Applied Job:"})," ",S.job_title||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Classification:"})," ",S.classification||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Source:"})," ",S.source||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Referral:"})," ",S.referral||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Skills:"})," ",Array.isArray(S.skills)?S.skills.join(", "):S.skills||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Experience (years):"})," ",S.experience_years||S.experience||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Education:"})," ",S.education||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Employer:"})," ",S.current_employer||S.currentEmployer||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Previous Employers:"})," ",S.previous_employers||S.previousEmployers||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Notice Period:"})," ",S.notice_period||S.noticePeriod||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Expected CTC:"})," ",S.expected_salary||S.expectedCtc||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Preferred Location:"})," ",S.preferred_location||S.preferredLocation||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Languages Known:"})," ",S.languages_known||S.languagesKnown||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Ready to Relocate:"})," ",S.ready_to_relocate!==void 0?S.ready_to_relocate?"Yes":"No":S.readyToRelocate!==void 0?S.readyToRelocate?"Yes":"No":""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"LinkedIn:"})," ",S.linkedin_url||S.linkedinUrl||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"GitHub:"})," ",S.github_url||S.githubUrl||""]})]}):n.jsx("div",{className:"text-center text-gray-600",children:"No data found."})})]})}),L&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Send NVite"}),n.jsx("button",{onClick:()=>Z(!1),children:n.jsx(_r,{size:18})})]}),n.jsx("div",{className:"p-6",children:ne?n.jsx("div",{className:"text-center",children:ne.error?n.jsx("p",{className:"text-red-600",children:ne.error}):n.jsx("p",{className:"text-green-600",children:ne})}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Candidate: ",H==null?void 0:H.name]}),n.jsx("textarea",{value:D,onChange:ce=>Y(ce.target.value),placeholder:"Add a personal message...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:"4"}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-900 hover:bg-gray-50 transition",children:"Cancel"}),n.jsx("button",{onClick:Ie,disabled:M,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:M?n.jsxs(n.Fragment,{children:[n.jsx(l_,{size:16,className:"animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(iu,{size:16}),"Send Invite"]})})]})]})})]})})]})}function tF(){const e=`Dear {{name}},

Greetings from {{company}}!

We came across your profile and believe you could be a great fit for the position of {{job_title}} at our organization.

 Job Role: {{job_title}}
 Location: {{location}}

If you are interested, we would love for you to apply using the link below:

 Apply Here: {{apply_link}}

Our team will review your application and get in touch if your profile matches our requirements.

Best regards,
{{recruiter}}
{{company}}`,[t,r]=y.useState([]),[s,a]=y.useState([]),[i,l]=y.useState(""),[o,c]=y.useState(new Set),[d,u]=y.useState(""),[f,m]=y.useState(""),[g,x]=y.useState(""),[h,p]=y.useState(""),[v,b]=y.useState(""),[j,N]=y.useState(""),[w,_]=y.useState(e),[k,C]=y.useState(!1),[T,P]=y.useState(!1),[A,S]=y.useState(!1),[E,O]=y.useState(null),[I,L]=y.useState(""),[Z,H]=y.useState([]),[R,D]=y.useState(!1),Y=(ie,se="")=>ie==null?se:typeof ie=="object"?ie.full_name?String(ie.full_name):ie.name?String(ie.name):JSON.stringify(ie):String(ie);y.useEffect(()=>{M(),X(),ne();const ie=localStorage.getItem("user");if(ie)try{const se=JSON.parse(ie);N((se==null?void 0:se.full_name)||(se==null?void 0:se.name)||(se==null?void 0:se.email)||""),b((se==null?void 0:se.company_name)||(se==null?void 0:se.company)||"")}catch{N(""),b("")}},[]);async function M(ie=""){var se,z,Te;C(!0),L("");try{const fe=await G.get("/v1/candidates",{params:{search:ie||void 0}}),Ie=((se=fe.data)==null?void 0:se.data)??fe.data??[];r(Array.isArray(Ie)?Ie:[]),c(new Set)}catch(fe){L(Y((Te=(z=fe==null?void 0:fe.response)==null?void 0:z.data)==null?void 0:Te.detail,"Failed to load candidates. Please try again."))}finally{C(!1)}}async function X(){var ie,se;P(!0);try{const z=await Ep(),Te=((ie=z.data)==null?void 0:ie.jobs)??((se=z.data)==null?void 0:se.data)??z.data??[];if(a(Array.isArray(Te)?Te:[]),Array.isArray(Te)&&Te.length>0){const fe=Te[0];m(fe.title||fe.job_title||""),x(fe.location||"");const Ie=fe.job_id||fe.id||"";Ie&&p(`${window.location.origin}/careers/${Ie}`)}}catch{a([])}finally{P(!1)}}async function ne(){var ie;D(!0);try{const se=await G.get("/v1/resdex/invite");H(((ie=se.data)==null?void 0:ie.results)||[])}catch{H([])}finally{D(!1)}}const J=y.useMemo(()=>{if(!i.trim())return t;const ie=i.toLowerCase();return t.filter(se=>[se.full_name,se.name,se.email,se.phone].filter(Boolean).some(z=>String(z).toLowerCase().includes(ie)))},[t,i]),ue=J.length>0&&J.every(ie=>o.has(ie.id??ie._id));function ke(ie){c(se=>{const z=new Set(se);return z.has(ie)?z.delete(ie):z.add(ie),z})}function ve(){c(ue?new Set:new Set(J.map(ie=>ie.id??ie._id)))}async function je(){var ie,se;if(o.size===0){L("Please select at least one candidate.");return}if(!d){L("Please select a job.");return}if(!h){L("Apply link is required.");return}S(!0),L(""),O(null);try{const z={candidate_ids:Array.from(o),job_id:d,job_title:f,job_location:g,apply_link:h,recruiter_name:j||"Recruiter",company_name:v||"Company",message_template:w||""},Te=await G.post("/nvite/send-job-invite",z);O(Te.data),c(new Set),S(!1),ne()}catch(z){L(Y((se=(ie=z==null?void 0:z.response)==null?void 0:ie.data)==null?void 0:se.detail,"Failed to send job invites. Please try again.")),S(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Send NVite"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Select candidates, choose a job, and send NVites in real time"})]}),n.jsxs("button",{onClick:()=>{M(),X()},className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(jo,{size:16}),"Refresh"]})]}),I&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Ks,{size:18,className:"mt-0.5"}),n.jsx("span",{children:Y(I,"")})]}),E&&n.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ci,{size:18}),"Sent: ",E.sent,"  Failed: ",E.failed]}),Array.isArray(E.details)&&E.details.length>0&&n.jsx("div",{className:"text-sm text-green-800",children:E.details.slice(0,6).map((ie,se)=>n.jsxs("div",{children:[Y(ie.candidate),": ",Y(ie.status)]},`${ie.candidate}-${se}`))})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"xl:col-span-2 bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(ps,{size:18}),"Candidates"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:i,onChange:ie=>l(ie.target.value),placeholder:"Search by name, email, phone",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),n.jsx("button",{onClick:()=>M(i),className:"px-3 py-2 rounded-lg bg-gray-100 text-sm font-semibold",children:"Search"})]})]}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm text-gray-600",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:ue,onChange:ve}),"Select all (",J.length,")"]}),n.jsxs("span",{children:["Selected: ",o.size]})]}),k?n.jsx("div",{className:"text-gray-600",children:"Loading candidates..."}):J.length===0?n.jsx("div",{className:"text-gray-600",children:"No candidates found."}):n.jsx("div",{className:"space-y-2 max-h-[420px] overflow-y-auto",children:J.map(ie=>n.jsxs("label",{className:"flex items-center justify-between gap-3 p-3 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:o.has(ie.id??ie._id),onChange:()=>ke(ie.id??ie._id)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Y(ie.full_name||ie.name)}),n.jsxs("p",{className:"text-xs text-gray-600",children:[Y(ie.email),"  ",Y(ie.phone)]})]})]}),n.jsx("span",{className:"text-xs text-gray-500",children:Y(ie.status)})]},ie.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"NVite Details"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Choose a job and include a short message"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job (optional)"}),n.jsxs("select",{value:d,onChange:ie=>{const se=ie.target.value;u(se);const z=(Array.isArray(s)?s:[]).find(Te=>Te.id===se);if(z){m(z.title||z.job_title||""),x(z.location||"");const Te=z.job_id||z.id||"";Te&&p(`${window.location.origin}/careers/${Te}`)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select job"}),T?n.jsx("option",{children:"Loading jobs..."}):(Array.isArray(s)?s:[]).map(ie=>n.jsx("option",{value:ie.id,children:ie.title||ie.job_title||"Untitled Job"},ie.id))]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Recruiter Name"}),n.jsx("input",{value:j,onChange:ie=>N(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Company Name"}),n.jsx("input",{value:v,onChange:ie=>b(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Title"}),n.jsx("input",{value:f,onChange:ie=>m(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Location"}),n.jsx("input",{value:g,onChange:ie=>x(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Apply Link"}),n.jsx("input",{value:h,onChange:ie=>p(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message Template"}),n.jsx("textarea",{value:w,onChange:ie=>_(ie.target.value),placeholder:"Use {{name}}, {{job_title}}, {{company}}, {{location}}, {{apply_link}}, {{recruiter}}",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"5"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tip: Use ","{{name}}"," to auto-insert candidate name."]})]}),n.jsxs("button",{onClick:je,disabled:A||o.size===0,className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[n.jsx(Ai,{size:16}),A?"Sending...":"Send NVite"]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"NVite History"}),n.jsxs("button",{onClick:ne,className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(jo,{size:16}),"Refresh"]})]}),R?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading invites..."}):Z.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No NVites sent yet."}):n.jsx("div",{className:"divide-y",children:Z.map(ie=>n.jsxs("div",{className:"p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Y(ie.candidate_name||"Candidate")}),n.jsx("p",{className:"text-sm text-gray-600",children:Y(ie.job_title||"No job selected")})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-semibold",children:"Status:"})," ",Y(ie.status||"sent")]}),n.jsx("div",{className:"text-sm text-gray-500",children:ie.sent_at?new Date(ie.sent_at).toLocaleString():""})]},ie.id))})]})]})}function rF(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState(!1),[i,l]=y.useState(""),[o,c]=y.useState(!1),[d,u]=y.useState(!1),[f,m]=y.useState([]),[g,x]=y.useState({search_name:"",skills:"",location:"",experience_min:"",experience_max:"",folder_id:""});y.useEffect(()=>{h(),p()},[]);async function h(){var k,C,T;a(!0),l("");try{const P=await G.get("/searches");r(((k=P.data)==null?void 0:k.results)||[])}catch(P){l(((T=(C=P==null?void 0:P.response)==null?void 0:C.data)==null?void 0:T.detail)||"Failed to load saved searches. Please try again.")}finally{a(!1)}}async function p(){var k;try{const C=await G.get("/v1/folders");m(((k=C.data)==null?void 0:k.results)||[])}catch(C){console.error("Failed to load folders:",C)}}function v(k){const{name:C,value:T}=k.target;x(P=>({...P,[C]:T}))}async function b(k){var O,I;k.preventDefault();const C=Vt(g.search_name),T=g.folder_id||null,P=ll(C,"Search name");if(P){l(P);return}if(SAe({list:t,name:C,groupValue:T,nameKey:"search_name",groupKey:"folder_id"})){l("Duplicate Feature name under the same Sub-Category is not allowed.");return}const E={skills:g.skills.split(",").map(L=>L.trim()).filter(Boolean),location:Vt(g.location)||null,experience_min:g.experience_min?Number(g.experience_min):null,experience_max:g.experience_max?Number(g.experience_max):null};u(!0),l("");try{await G.post("/searches/save",{search_name:C,filters:E,folder_id:T}),x({search_name:"",skills:"",location:"",experience_min:"",experience_max:"",folder_id:""}),c(!1),await h()}catch(L){l(((I=(O=L==null?void 0:L.response)==null?void 0:O.data)==null?void 0:I.detail)||"Unable to save search. Please try again.")}finally{u(!1)}}async function j(k){var C,T;if(window.confirm("Delete this saved search?"))try{await G.delete(`/searches/${k}`),await h()}catch(P){l(((T=(C=P==null?void 0:P.response)==null?void 0:C.data)==null?void 0:T.detail)||"Unable to delete saved search. Please try again.")}}async function N(k){var C,T,P;try{const S=((C=(await G.get(`/searches/${k}/run`)).data)==null?void 0:C.filters)||{},E=new URLSearchParams;S.skills&&S.skills.length>0&&E.set("keyword",S.skills.join(" ")),S.location&&E.set("location",S.location),S.experience_min!==null&&S.experience_min!==void 0&&E.set("min_exp",String(S.experience_min)),S.experience_max!==null&&S.experience_max!==void 0&&E.set("max_exp",String(S.experience_max)),e(`/recruiter/resdex/search-resumes?${E.toString()}`)}catch(A){l(((P=(T=A==null?void 0:A.response)==null?void 0:T.data)==null?void 0:P.detail)||"Unable to run search. Please try again.")}}const w=k=>{if(!k)return"No filters";const C=[];return k.skills&&k.skills.length>0&&C.push(`Skills: ${k.skills.join(", ")}`),k.location&&C.push(`Location: ${k.location}`),k.experience_min!==null&&k.experience_min!==void 0&&C.push(`Min Exp: ${k.experience_min}`),k.experience_max!==null&&k.experience_max!==void 0&&C.push(`Max Exp: ${k.experience_max}`),C.length?C.join(" | "):"No filters"},_=f.reduce((k,C)=>(k[C.id]=C.name,k),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Searches"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Save, reuse, and organize your Resdex searches"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:h,className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(jo,{size:16}),"Refresh"]}),n.jsxs("button",{onClick:()=>c(k=>!k),className:"px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 flex items-center gap-2",children:[n.jsx(bi,{size:16}),"New Search"]})]})]}),i&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Ks,{size:18,className:"mt-0.5"}),n.jsx("span",{children:i})]}),o&&n.jsxs("form",{onSubmit:b,className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Search Name"}),n.jsx("input",{name:"search_name",value:g.search_name,onChange:v,onBlur:k=>x(C=>({...C,search_name:Vt(k.target.value)})),placeholder:"e.g., React Developers Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Skills (comma separated)"}),n.jsx("input",{name:"skills",value:g.skills,onChange:v,placeholder:"React, Node, SQL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Location"}),n.jsx("input",{name:"location",value:g.location,onChange:v,placeholder:"Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Experience Min"}),n.jsx("input",{name:"experience_min",type:"number",min:"0",value:g.experience_min,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Experience Max"}),n.jsx("input",{name:"experience_max",type:"number",min:"0",value:g.experience_max,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Folder (optional)"}),n.jsxs("select",{name:"folder_id",value:g.folder_id,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:"Unfiled"}),f.map(k=>n.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 rounded-lg border text-gray-700",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 disabled:opacity-50",children:d?"Saving...":"Save Search"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(ps,{size:18}),"Saved Searches"]}),n.jsx("div",{className:"text-sm text-gray-500",children:s?"Loading...":`${t.length} saved`})]}),s?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading saved searches..."}):t.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No saved searches yet."}):n.jsx("div",{className:"divide-y",children:t.map(k=>n.jsxs("div",{className:"p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.search_name}),n.jsx("p",{className:"text-sm text-gray-600",children:w(k.filters)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Folder: ",k.folder_id?_[k.folder_id]||"Unknown":"Unfiled"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>N(k.id),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Run Search"}),n.jsxs("button",{onClick:()=>j(k.id),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold flex items-center gap-1",children:[n.jsx(om,{size:14}),"Delete"]})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Results: ",k.result_count||0,"  Created: ",k.created_at?new Date(k.created_at).toLocaleDateString():""]})]},k.id))})]})]})}function nF(){const e=Tt(),[t,r]=y.useState([]),[s,a]=y.useState([]),[i,l]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState(""),[f,m]=y.useState(""),[g,x]=y.useState(""),[h,p]=y.useState(!1),[v,b]=y.useState("list"),[j,N]=y.useState(null),[w,_]=y.useState([]),[k,C]=y.useState(!1);y.useEffect(()=>{T(),P()},[]);async function T(){var R,D,Y;l(!0),u("");try{const M=await G.get("/v1/folders");r(((R=M.data)==null?void 0:R.results)||[])}catch(M){u(((Y=(D=M==null?void 0:M.response)==null?void 0:D.data)==null?void 0:Y.detail)||"Failed to load folders. Please try again.")}finally{l(!1)}}async function P(){var R;c(!0);try{const Y=((R=(await G.get("/searches")).data)==null?void 0:R.results)||[];return a(Y),Y}catch(D){return console.error("Failed to load searches:",D),[]}finally{c(!1)}}async function A(R){var J,ue;R.preventDefault();const D=Vt(f),Y=Vt(g),M=ll(D,"Folder name");if(M){u(M);return}const X=wo(Y,{minLength:20});if(X){u(X);return}if(t.some(ke=>Vt(ke==null?void 0:ke.name).toLowerCase()===D.toLowerCase())){u("Duplicate Feature name under the same Sub-Category is not allowed.");return}p(!0),u("");try{await G.post("/v1/folders",{name:D,description:Y||null}),m(""),x(""),await T()}catch(ke){u(((ue=(J=ke==null?void 0:ke.response)==null?void 0:J.data)==null?void 0:ue.detail)||"Unable to create folder. Please try again.")}finally{p(!1)}}async function S(R){var D,Y;if(window.confirm("Delete this folder? Searches will be moved to Unfiled."))try{await G.delete(`/v1/folders/${R}`),(j==null?void 0:j.id)===R&&(b("list"),N(null),_([])),await T(),await P()}catch(M){u(((Y=(D=M==null?void 0:M.response)==null?void 0:D.data)==null?void 0:Y.detail)||"Unable to delete folder. Please try again.")}}const E=y.useMemo(()=>s.filter(R=>!R.folder_id),[s]);y.useMemo(()=>{const R={};return t.forEach(D=>{R[D.id]=D}),R},[t]);const O=R=>{if(!R)return"No filters";const D=[];return R.skills&&R.skills.length>0&&D.push(`Skills: ${R.skills.join(", ")}`),R.location&&D.push(`Location: ${R.location}`),R.experience_min!==null&&R.experience_min!==void 0&&D.push(`Min Exp: ${R.experience_min}`),R.experience_max!==null&&R.experience_max!==void 0&&D.push(`Max Exp: ${R.experience_max}`),D.length?D.join(" | "):"No filters"};async function I(R){var D,Y,M;if(N(R),b("folder"),R.id==="unfiled"){_(E);return}C(!0);try{const X=await G.get(`/v1/folders/${R.id}/searches`);_(((D=X.data)==null?void 0:D.results)||[])}catch(X){u(((M=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:M.detail)||"Unable to load folder contents. Please try again."),_([])}finally{C(!1)}}async function L(R,D){var Y,M;try{await G.put(`/searches/${R}/folder`,{folder_id:D||null}),await T();const X=await P();j&&(j.id==="unfiled"?_(X.filter(ne=>!ne.folder_id)):await I(j))}catch(X){u(((M=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:M.detail)||"Unable to move search. Please try again.")}}async function Z(R){var D,Y,M;try{const ne=((D=(await G.get(`/searches/${R.id}/run`)).data)==null?void 0:D.filters)||{},J=new URLSearchParams;ne.skills&&ne.skills.length>0&&J.set("keyword",ne.skills.join(" ")),ne.location&&J.set("location",ne.location),ne.experience_min!==null&&ne.experience_min!==void 0&&J.set("min_exp",String(ne.experience_min)),ne.experience_max!==null&&ne.experience_max!==void 0&&J.set("max_exp",String(ne.experience_max)),e(`/recruiter/resdex/search-resumes?${J.toString()}`)}catch(X){u(((M=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:M.detail)||"Unable to run search. Please try again.")}}const H=t.length+1;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Folders"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Organize your saved searches into folders"})]}),n.jsxs("button",{onClick:()=>{T(),P()},className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(jo,{size:16}),"Refresh"]})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Ks,{size:18,className:"mt-0.5"}),n.jsx("span",{children:d})]}),v==="list"&&n.jsxs(n.Fragment,{children:[n.jsxs("form",{onSubmit:A,className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(o4e,{size:18}),"Create Folder"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Folder Name"}),n.jsx("input",{value:f,onChange:R=>m(R.target.value),onBlur:R=>m(Vt(R.target.value)),placeholder:"e.g., Senior Frontend",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description (optional)"}),n.jsx("input",{value:g,onChange:R=>x(R.target.value),onBlur:R=>x(Vt(R.target.value)),placeholder:"Short description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 rounded-lg bg-emerald-600 text-white font-semibold hover:bg-emerald-700 disabled:opacity-50",children:h?"Creating...":"Create Folder"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(d4e,{size:18}),"Your Folders"]}),n.jsx("div",{className:"text-sm text-gray-500",children:i?"Loading...":`${H} folders`})]}),i||o?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading folders..."}):n.jsxs("div",{className:"divide-y",children:[n.jsxs("div",{className:"p-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Unfiled Searches"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Searches without a folder"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[E.length," searches"]}),n.jsx("button",{onClick:()=>I({id:"unfiled",name:"Unfiled Searches"}),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"View"})]})]}),t.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No folders yet."}):t.map(R=>n.jsxs("div",{className:"p-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.name}),n.jsx("p",{className:"text-sm text-gray-600",children:R.description||"No description"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[R.search_count," searches"]}),n.jsx("button",{onClick:()=>I(R),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Open"}),n.jsxs("button",{onClick:()=>S(R.id),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold flex items-center gap-1",children:[n.jsx(om,{size:14}),"Delete"]})]})]},R.id))]})]})]}),v==="folder"&&j&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{b("list"),N(null),_([])},className:"px-3 py-2 border rounded-lg text-sm flex items-center gap-2",children:[n.jsx(Qh,{size:16}),"Back"]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.name}),n.jsx("p",{className:"text-sm text-gray-600",children:j.description||"Saved searches in this folder"})]})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[w.length," searches"]})]}),k?n.jsx("div",{className:"text-sm text-gray-600",children:"Loading searches..."}):w.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No searches in this folder."}):n.jsx("div",{className:"divide-y",children:w.map(R=>n.jsx("div",{className:"py-4 flex flex-col gap-2",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:R.search_name}),n.jsx("p",{className:"text-sm text-gray-600",children:O(R.filters)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Results: ",R.result_count||0]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:()=>Z(R),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Run Search"}),n.jsxs("select",{value:R.folder_id||"",onChange:D=>L(R.id,D.target.value),className:"px-3 py-2 rounded-lg border text-sm bg-white",children:[n.jsx("option",{value:"",children:"Unfiled"}),t.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),R.folder_id&&n.jsx("button",{onClick:()=>L(R.id,null),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold",children:"Remove"})]})]})},R.id))})]})]})}const Mo={experience:{min:"",max:"",type:"total"},location:{current:"",preferred:"",remote:!1},salary:{min:"",max:"",currency:"INR",type:"expected"},keywords:[],companies:[],designations:[],education:{degrees:[],institutions:[],majors:[],topTier:!1},certifications:[],activeCertsOnly:!1},Jg=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),Uo=e=>Array.isArray(e)?e.map(t=>String(t||"").trim()).filter(Boolean):Jg(e),Vc=e=>Uo(e).join(", "),J_=(e={})=>{var t,r,s;return{keywords:Vc(e.keywords),companies:Vc(e.companies),designations:Vc(e.designations),certifications:Vc(e.certifications),educationDegrees:Vc((t=e.education)==null?void 0:t.degrees),educationMajors:Vc((r=e.education)==null?void 0:r.majors),educationInstitutions:Vc((s=e.education)==null?void 0:s.institutions)}},sF=(e={},t=[])=>{var r,s,a,i,l,o,c,d,u,f,m,g,x,h;return{...Mo,...e,query:String(e.query||""),keywords:t.length>0?t:Uo(e.keywords),companies:Uo(e.companies),designations:Uo(e.designations),certifications:Uo(e.certifications),experience:{...Mo.experience,...e.experience||{},min:String(((r=e==null?void 0:e.experience)==null?void 0:r.min)||""),max:String(((s=e==null?void 0:e.experience)==null?void 0:s.max)||""),type:((a=e==null?void 0:e.experience)==null?void 0:a.type)==="relevant"?"relevant":Mo.experience.type},location:{...Mo.location,...e.location||{},current:String(((i=e==null?void 0:e.location)==null?void 0:i.current)||""),preferred:String(((l=e==null?void 0:e.location)==null?void 0:l.preferred)||""),remote:!!((o=e==null?void 0:e.location)!=null&&o.remote)},salary:{...Mo.salary,...e.salary||{},min:String(((c=e==null?void 0:e.salary)==null?void 0:c.min)||""),max:String(((d=e==null?void 0:e.salary)==null?void 0:d.max)||""),currency:String(((u=e==null?void 0:e.salary)==null?void 0:u.currency)||Mo.salary.currency),type:((f=e==null?void 0:e.salary)==null?void 0:f.type)==="current"?"current":Mo.salary.type},education:{...Mo.education,...e.education||{},degrees:Uo((m=e==null?void 0:e.education)==null?void 0:m.degrees),majors:Uo((g=e==null?void 0:e.education)==null?void 0:g.majors),institutions:Uo((x=e==null?void 0:e.education)==null?void 0:x.institutions),topTier:!!((h=e==null?void 0:e.education)!=null&&h.topTier)},activeCertsOnly:!!e.activeCertsOnly}};function sUe({onSearch:e,loading:t,initialQuery:r="",initialKeywords:s=[],initialFilters:a=null,showSmartHint:i=!1}){const l=y.useMemo(()=>Array.isArray(s)?s.map(j=>String(j).trim()).filter(Boolean):Jg(s),[s]),o=y.useMemo(()=>sF(a||{},l),[a,l]),[c,d]=y.useState(String(r||"")),[u,f]=y.useState(o),[m,g]=y.useState(J_(o));y.useEffect(()=>{d(String(r||"")),f(o),g(J_(o))},[r,o]),y.useEffect(()=>{const j=setTimeout(()=>{e({query:c.trim(),...u})},250);return()=>clearTimeout(j)},[c,u,e]);const x=(j,N,w)=>{f(_=>({..._,[j]:{..._[j],[N]:w}}))},h=(j,N,w=j)=>{g(_=>({..._,[w]:N})),f(_=>({..._,[j]:Jg(N)}))},p=(j,N,w)=>{g(_=>({..._,[w]:N})),f(_=>({..._,education:{..._.education,[j]:Jg(N)}}))},v=()=>{e({query:c.trim(),...u})},b=()=>{const j=sF({},[]);d(""),f(j),g(J_(j)),e({query:"",...j})};return n.jsxs("div",{className:"search-filters-panel",children:[n.jsxs("div",{className:"search-filters-panel__header",children:[n.jsx("h3",{children:"Search & Filters"}),i&&n.jsx("p",{className:"smart-fill-hint",children:"AI filters auto-filled from job description"})]}),n.jsxs("div",{className:"filter-section filter-section--quick-search",children:[n.jsx("label",{className:"filter-label filter-label--quick-search",htmlFor:"semantic-quick-search",children:"Quick Search"}),n.jsxs("div",{className:"search-bar-section",children:[n.jsx("input",{id:"semantic-quick-search",type:"text",className:"semantic-search-input",placeholder:"e.g., React developer 5 years Bangalore",value:c,onChange:j=>d(j.target.value),onKeyDown:j=>j.key==="Enter"?v():null}),n.jsx("button",{type:"button",className:"search-btn",onClick:v,disabled:t,children:t?"Searching...":"Search"})]})]}),n.jsx("div",{className:"filters-divider"}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Keywords & Skills"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"React, Node.js, Python",value:m.keywords,onChange:j=>h("keywords",j.target.value,"keywords")}),n.jsx("small",{className:"filter-hint",children:"Comma-separated"})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Experience (Years)"}),n.jsxs("div",{className:"range-inputs",children:[n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Min",value:u.experience.min,onChange:j=>x("experience","min",j.target.value)}),n.jsx("span",{className:"range-separator",children:"to"}),n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Max",value:u.experience.max,onChange:j=>x("experience","max",j.target.value)})]}),n.jsxs("div",{className:"radio-group",children:[n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"expType",checked:u.experience.type==="total",onChange:()=>x("experience","type","total")}),n.jsx("span",{className:"option-label-text",children:"Total Experience"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"expType",checked:u.experience.type==="relevant",onChange:()=>x("experience","type","relevant")}),n.jsx("span",{className:"option-label-text",children:"Relevant Only"})]})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Location"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Current location",value:u.location.current,onChange:j=>x("location","current",j.target.value)}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Preferred location",value:u.location.preferred,onChange:j=>x("location","preferred",j.target.value)}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.location.remote,onChange:j=>x("location","remote",j.target.checked)}),n.jsx("span",{className:"option-label-text",children:"Open to remote work"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Salary Range"}),n.jsxs("div",{className:"radio-group",children:[n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"salaryType",checked:u.salary.type==="current",onChange:()=>x("salary","type","current")}),n.jsx("span",{className:"option-label-text",children:"Current CTC"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"salaryType",checked:u.salary.type==="expected",onChange:()=>x("salary","type","expected")}),n.jsx("span",{className:"option-label-text",children:"Expected CTC"})]})]}),n.jsxs("div",{className:"range-inputs",children:[n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Min",value:u.salary.min,onChange:j=>x("salary","min",j.target.value)}),n.jsx("span",{className:"range-separator",children:"to"}),n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Max",value:u.salary.max,onChange:j=>x("salary","max",j.target.value)})]}),n.jsxs("select",{className:"filter-select",value:u.salary.currency,onChange:j=>x("salary","currency",j.target.value),children:[n.jsx("option",{value:"INR",children:"INR (LPA)"}),n.jsx("option",{value:"USD",children:"USD (Annual)"}),n.jsx("option",{value:"EUR",children:"EUR (Annual)"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Companies"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Google, Amazon, Microsoft",value:m.companies,onChange:j=>h("companies",j.target.value,"companies")}),n.jsx("small",{className:"filter-hint",children:"Current or previous employers"})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Designation / Role"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Software Engineer, Senior Dev",value:m.designations,onChange:j=>h("designations",j.target.value,"designations")})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Education"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Degree (e.g., B.Tech, MBA)",value:m.educationDegrees,onChange:j=>p("degrees",j.target.value,"educationDegrees")}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Major (e.g., Computer Science)",value:m.educationMajors,onChange:j=>p("majors",j.target.value,"educationMajors")}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Institution (e.g., IIT, MIT)",value:m.educationInstitutions,onChange:j=>p("institutions",j.target.value,"educationInstitutions")}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.education.topTier,onChange:j=>x("education","topTier",j.target.checked)}),n.jsx("span",{className:"option-label-text",children:"Only top-tier institutions"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Certifications"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"AWS, PMP, Scrum Master",value:m.certifications,onChange:j=>h("certifications",j.target.value,"certifications")}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.activeCertsOnly,onChange:j=>f(N=>({...N,activeCertsOnly:j.target.checked}))}),n.jsx("span",{className:"option-label-text",children:"Only active certifications"})]})]}),n.jsxs("div",{className:"filter-actions",children:[n.jsx("button",{type:"button",className:"btn-apply",onClick:v,disabled:t,children:"Apply Filters"}),n.jsxs("button",{type:"button",className:"btn-clear",onClick:b,children:[n.jsx("span",{className:"btn-clear__icon","aria-hidden":"true",children:""}),"Clear All"]})]})]})}const Hl=(...e)=>{for(const t of e)if(t!=null&&!(typeof t=="string"&&t.trim()===""))return t;return null},aUe=e=>{if(e==null)return null;const t=String(e).trim();return!t||t==="0"||t.toLowerCase()==="n/a"||t===""||t==="--"?null:t},iUe=e=>{if(e==null||e==="")return null;const t=Number(e);return Number.isFinite(t)?Math.min(100,Math.max(0,Math.round(t))):null},lUe=e=>!e||typeof e!="string"||!e.includes("@")?"":(e.split("@")[0]||"").replace(/[._-]+/g," ").replace(/\b\w/g,r=>r.toUpperCase()),oUe=e=>{if(!e)return null;const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?e:t.toLocaleString("en-IN")},cUe=e=>String(e).split(" ").map(t=>t.trim()).filter(Boolean).map(t=>t[0]).join("").slice(0,2).toUpperCase(),dUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M4 5h16a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V7a2 2 0 012-2zm0 2l8 5 8-5H4zm16 10V9l-8 5-8-5v8h16z",fill:"currentColor"})}),uUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M6.6 10.8a15.6 15.6 0 006.6 6.6l2.2-2.2a1 1 0 011-.25 11.4 11.4 0 003.6.6 1 1 0 011 1v3.4a1 1 0 01-1 1A18 18 0 013 5a1 1 0 011-1h3.4a1 1 0 011 1 11.4 11.4 0 00.6 3.6 1 1 0 01-.24 1z",fill:"currentColor"})}),fUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M9 3h6a2 2 0 012 2v2h3a2 2 0 012 2v9a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2h3V5a2 2 0 012-2zm0 4h6V5H9v2zm12 4H3v7h18v-7z",fill:"currentColor"})}),mUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M20.6 13.3l-7.3 7.3a2 2 0 01-2.8 0l-8.1-8.1A2 2 0 012 11.1V4a2 2 0 012-2h7.1a2 2 0 011.4.6l8.1 8.1a2 2 0 010 2.8zM7.5 7A1.5 1.5 0 109 8.5 1.5 1.5 0 007.5 7z",fill:"currentColor"})}),hUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M12 2a7 7 0 00-7 7c0 5 7 13 7 13s7-8 7-13a7 7 0 00-7-7zm0 9a2 2 0 110-4 2 2 0 010 4z",fill:"currentColor"})}),pUe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M20 6H6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2zm0 2v2h-4a2 2 0 100 4h4v2H6V8h14z",fill:"currentColor"})});function xUe({candidate:e,selected:t,onSelect:r,onViewDetails:s}){const a=Hl(e.id,e._id,e.candidate_id),i=Hl(e.full_name,e.name)||lUe(e.email)||"Candidate",l=Hl(e.email),o=Hl(e.phone,e.mobile,e.phone_number),c=aUe(Hl(e.current_location,e.location,e.city)),d=Hl(e.experience_years,e.experience),f=d!=null&&String(d).trim()!==""?`${String(d).trim()} years experience`:null,g=(Array.isArray(e.skills)?e.skills:typeof e.skills=="string"?e.skills.split(/,|;/).map(_=>_.trim()).filter(Boolean):[]).slice(0,3),x=Hl(e.expected_ctc,e.expected_salary,e.current_ctc),h=Number(String(x??"").replace(/[^0-9.]/g,"")),p=Number.isFinite(h)&&h>0?x:null,v=iUe(Hl(e.semantic_score,e.match_score,e.relevance_score)),b=Zv(Hl(e.photo_url,e.photoUrl,e.avatar_url,e.avatarUrl,e.profile_picture,e.profilePicture,e.photo,e.image_url,e.imageUrl)),j=cUe(i)||"CA",[N,w]=y.useState(!1);return y.useEffect(()=>{w(!1)},[b,a]),n.jsxs("div",{className:`candidate-result-card ${t?"selected":""}`,children:[n.jsxs("div",{className:"card-header",children:[n.jsx("input",{type:"checkbox",className:"card-checkbox",checked:t,onChange:()=>r(a),"aria-label":`Select ${i}`}),n.jsx("div",{className:"card-avatar",children:b&&!N?n.jsx("img",{src:b,alt:`${i} profile`,className:"avatar-image",loading:"lazy",onError:()=>w(!0)}):n.jsx("div",{className:"avatar-placeholder",children:j})}),n.jsxs("div",{className:"card-info",children:[n.jsxs("div",{className:"card-title-row",children:[n.jsx("h3",{className:"card-name",children:i}),v!==null&&v>0&&n.jsxs("span",{className:"match-badge",children:[v,"% Match"]})]}),n.jsxs("div",{className:"card-contact",children:[l&&n.jsxs("span",{className:"contact-link",children:[n.jsx("span",{className:"contact-icon",children:n.jsx(dUe,{})}),l]}),o&&n.jsxs("span",{className:"contact-link",children:[n.jsx("span",{className:"contact-icon",children:n.jsx(uUe,{})}),o]})]})]})]}),n.jsxs("div",{className:"card-body",children:[f&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(fUe,{})}),n.jsx("span",{children:f})]}),g.length>0&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(mUe,{})}),n.jsx("span",{children:g.join(", ")})]}),c&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(hUe,{})}),n.jsx("span",{children:c})]}),p&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(pUe,{})}),n.jsxs("span",{children:["INR ",oUe(p)," LPA"]})]})]}),n.jsx("div",{className:"card-actions",children:n.jsx("button",{type:"button",className:"btn-primary",onClick:()=>s(e),children:"View Details"})})]})}const Ru=5,gUe=(e,t)=>t<=7?Array.from({length:t},(r,s)=>s+1):e<=4?[1,2,3,4,5,"...",t]:e>=t-3?[1,"...",t-4,t-3,t-2,t-1,t]:[1,"...",e-1,e,e+1,"...",t];function yUe({candidates:e,loading:t,sortBy:r,onSortChange:s,onViewDetails:a}){const[i,l]=y.useState([]),[o,c]=y.useState(1),d=y.useRef(null),u=Math.max(1,Math.ceil(e.length/Ru)),f=y.useMemo(()=>{const p=(o-1)*Ru;return e.slice(p,p+Ru)},[e,o]),m=y.useMemo(()=>gUe(o,u),[o,u]),g=e.length?(o-1)*Ru+1:0,x=Math.min(o*Ru,e.length);y.useEffect(()=>{l([])},[e]),y.useEffect(()=>{c(1)},[e]),y.useEffect(()=>{o>u&&c(u)},[o,u]),y.useEffect(()=>{d.current&&d.current.scrollTo({top:0,behavior:"smooth"})},[o]);const h=p=>{l(v=>v.includes(p)?v.filter(b=>b!==p):[...v,p])};return n.jsxs("div",{className:"candidate-results-list",children:[n.jsxs("div",{className:"results-header",children:[n.jsxs("div",{className:"results-info",children:[n.jsx("span",{className:"results-count",children:t?"Searching...":`${e.length} candidates found`}),!t&&e.length>0&&n.jsxs("span",{className:"results-page-range",children:["Showing ",g,"-",x]}),i.length>0&&n.jsxs("span",{className:"results-selected",children:[i.length," selected"]})]}),n.jsx("div",{className:"results-controls",children:n.jsxs("div",{className:"results-sort-wrap",children:[n.jsx("label",{htmlFor:"results-sort-select",className:"results-sort-label",children:"Sort By"}),n.jsxs("select",{id:"results-sort-select",className:"sort-select",value:r,onChange:p=>s(p.target.value),children:[n.jsx("option",{value:"relevance",children:"Relevance"}),n.jsx("option",{value:"experience",children:"Experience"}),n.jsx("option",{value:"salary",children:"Salary"}),n.jsx("option",{value:"recent",children:"Recently Updated"}),n.jsx("option",{value:"name",children:"Name"})]})]})})]}),n.jsx("div",{className:"results-container",ref:d,children:t?n.jsxs("div",{className:"loading-state",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Searching candidates..."})]}):e.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-icon",children:"No results"}),n.jsx("h3",{children:"No candidates found"}),n.jsx("p",{children:"Try adjusting filters or search keywords."})]}):n.jsx("div",{className:"results-grid",children:f.map(p=>n.jsx(xUe,{candidate:p,selected:i.includes(p.id),onSelect:h,onViewDetails:a},p.id))})}),!t&&e.length>Ru&&n.jsxs("div",{className:"results-pagination",children:[n.jsx("button",{type:"button",className:"results-pagination__btn",onClick:()=>c(p=>Math.max(1,p-1)),disabled:o===1,children:"Previous"}),n.jsx("div",{className:"results-pagination__pages",children:m.map((p,v)=>p==="..."?n.jsx("span",{className:"results-pagination__ellipsis",children:"..."},`ellipsis-${v}`):n.jsx("button",{type:"button",className:`results-pagination__page ${o===p?"is-active":""}`,onClick:()=>c(p),"aria-current":o===p?"page":void 0,children:p},p))}),n.jsx("button",{type:"button",className:"results-pagination__btn",onClick:()=>c(p=>Math.min(u,p+1)),disabled:o===u,children:"Next"})]})]})}const os=e=>String(e||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),vUe=e=>e?os(e).split(" ").filter(Boolean):[],Du=e=>e?Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[]:[],$u=e=>e==null?"":typeof e=="string"?e:typeof e=="number"?String(e):typeof e=="object"?e.name||e.title||e.skill||e.label||"":String(e),aF=e=>{if(e==null)return null;const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?null:t},Hc=e=>Du(e).map(t=>os($u(t))).filter(Boolean),bUe=e=>e.id||e._id||e.candidate_id||e.candidateId||e.public_id||e.email;class jUe{buildCandidateText(t){const r=Du(t.skills).map(l=>$u(l)).join(" "),s=Du(t.certifications).map(l=>$u(l)).join(" "),a=[t.current_employer,t.current_company,t.previous_employers].join(" "),i=[t.education,t.degree,t.major,t.institution,t.university].join(" ");return os([t.full_name,t.name,t.email,t.job_title,t.current_role,r,s,a,i,t.current_location,t.preferred_location].join(" "))}matchesArray(t,r=[]){if(!r||r.length===0)return!0;const s=os(t);return r.some(a=>s.includes(os(a)))}matchesList(t,r=[]){if(!r||r.length===0)return!0;const s=t.map(a=>os($u(a)));return r.some(a=>s.some(i=>i.includes(os(a))))}matchesRange(t,r,s){return r===""&&s===""?!0:!(t==null||r!==""&&t<Number(r)||s!==""&&t>Number(s))}isActiveCertification(t){if(!t)return!1;const r=t.expiry_date||t.expiryDate;if(!r)return!0;const s=new Date(r);return Number.isNaN(s.getTime())?!0:s.getTime()>Date.now()}search(t,r={},s=[]){var j,N,w,_,k,C,T,P,A,S,E,O,I,L,Z,H,R;const a=vUe(t),i=Hc(r.keywords),l=Hc(r.companies),o=Hc(r.designations),c=Hc(r.certifications),d=Hc((j=r.education)==null?void 0:j.degrees),u=Hc((N=r.education)==null?void 0:N.majors),f=Hc((w=r.education)==null?void 0:w.institutions),m=((_=r.experience)==null?void 0:_.min)!==""||((k=r.experience)==null?void 0:k.max)!=="",g=((C=r.salary)==null?void 0:C.min)!==""||((T=r.salary)==null?void 0:T.max)!=="",x=!!String(((P=r.location)==null?void 0:P.current)||"").trim(),h=!!String(((A=r.location)==null?void 0:A.preferred)||"").trim(),p=!!((S=r.location)!=null&&S.remote),v=a.length>0||i.length>0||m||g||x||h||p||l.length>0||o.length>0||c.length>0||d.length>0||u.length>0||f.length>0||!!r.activeCertsOnly,b=[];for(const D of s){const Y=this.buildCandidateText(D),M=Du(D.skills).map(ye=>$u(ye)),X=Du(D.certifications),ne=Du(D.current_employer||D.current_company||D.previous_employers),J=aF(D.experience_years||D.experience||D.total_experience),ue=aF(((E=r.salary)==null?void 0:E.type)==="current"?D.current_ctc||D.current_salary:D.expected_ctc||D.expected_salary),ke=os(D.current_location||D.location||""),ve=os(D.preferred_location||""),je=D.remote||D.remote_ready||D.preferred_work_mode==="remote",ie=os([D.job_title,D.current_role,D.designation].join(" ")),se=os([D.education,D.degree,D.major,D.institution,D.university].join(" ")),z=M.map(ye=>os(ye)),Te=ne.map(ye=>os($u(ye))),fe=X.map(ye=>typeof ye=="string"?ye:ye.name||""),Ie=fe.map(ye=>os(ye));if(!(a.length===0||a.some(ye=>Y.includes(ye)))||!this.matchesRange(J,(O=r.experience)==null?void 0:O.min,(I=r.experience)==null?void 0:I.max)||(L=r.location)!=null&&L.current&&!ke.includes(os(r.location.current))||(Z=r.location)!=null&&Z.preferred&&!ve.includes(os(r.location.preferred))||p&&!je||!this.matchesRange(ue,(H=r.salary)==null?void 0:H.min,(R=r.salary)==null?void 0:R.max)||!this.matchesList(M,i)||!this.matchesList(ne,l)||!this.matchesArray(ie,o)||d.length&&!this.matchesArray(se,d)||u.length&&!this.matchesArray(se,u)||f.length&&!this.matchesArray(se,f)||c.length&&!this.matchesList(fe,c)||r.activeCertsOnly&&X.length>0&&X.filter(Pe=>this.isActiveCertification(Pe)).length===0)continue;let Ce=0,Ye=0;const at=(ye,Pe)=>{if(!Number.isFinite(ye)||ye<=0)return;const et=Number.isFinite(Pe)?Math.max(0,Math.min(1,Pe)):0;Ye+=ye,Ce+=et*ye};if(a.length>0){const ye=a.filter(et=>Y.includes(et)).length;at(35,ye/a.length);const Pe=a.filter(et=>z.some(We=>We.includes(et))).length;at(15,Pe/a.length)}if(i.length>0){const ye=i.filter(Pe=>z.some(et=>et.includes(Pe))||Y.includes(Pe)).length;at(25,ye/i.length)}if(o.length>0){const ye=o.filter(Pe=>ie.includes(Pe)).length;at(10,ye/o.length)}if(l.length>0){const ye=l.filter(Pe=>Te.some(et=>et.includes(Pe))).length;at(8,ye/l.length)}if(c.length>0){const ye=c.filter(Pe=>Ie.some(et=>et.includes(Pe))).length;at(8,ye/c.length)}if(d.length>0){const ye=d.filter(Pe=>se.includes(Pe)).length;at(6,ye/d.length)}if(u.length>0){const ye=u.filter(Pe=>se.includes(Pe)).length;at(5,ye/u.length)}if(f.length>0){const ye=f.filter(Pe=>se.includes(Pe)).length;at(6,ye/f.length)}if(x&&at(6,ke.includes(os(r.location.current))?1:0),h&&at(5,ve.includes(os(r.location.preferred))?1:0),p&&at(4,je?1:0),m&&at(5,J!==null?1:0),g&&at(4,ue!==null?1:0),r.activeCertsOnly){const ye=X.filter(Pe=>this.isActiveCertification(Pe)).length;at(3,ye>0?1:0)}const pe=Ye>0?Math.min(100,Math.max(0,Math.round(Ce/Ye*100))):0;b.push({...D,id:bUe(D),semantic_score:v?pe:0})}return b}}const _Ue=new jUe,wUe=200,gg=e=>{const t=Number(String(e??"").replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},NUe=(e,t)=>{const r=[...e];switch(t){case"experience":return r.sort((s,a)=>gg(a.experience_years||a.experience||a.total_experience)-gg(s.experience_years||s.experience||s.total_experience));case"salary":return r.sort((s,a)=>gg(a.expected_ctc||a.expected_salary||a.current_ctc)-gg(s.expected_ctc||s.expected_salary||s.current_ctc));case"recent":return r.sort((s,a)=>new Date(a.updated_at||a.created_at||0).getTime()-new Date(s.updated_at||s.created_at||0).getTime());case"name":return r.sort((s,a)=>String(s.full_name||s.name||"").localeCompare(String(a.full_name||a.name||"")));case"relevance":default:return r.sort((s,a)=>Number(a.semantic_score||a.match_score||0)-Number(s.semantic_score||s.match_score||0))}},kUe=(e,t="Unable to load candidates for semantic search.")=>{var s,a;const r=(a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.detail;if(typeof r=="string"&&r.trim())return r;if(Array.isArray(r)){const i=r.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.msg||l.message)||"").filter(Boolean);if(i.length)return i.join(", ")}return r&&typeof r=="object"?r.msg||r.message||JSON.stringify(r):typeof(e==null?void 0:e.message)=="string"&&e.message.trim()?e.message:t};function iF(){const e=Tt(),[t,r]=ea(),[s,a]=y.useState([]),[i,l]=y.useState([]),[o,c]=y.useState(!1),[d,u]=y.useState(t.get("q")||""),[f,m]=y.useState("relevance"),[g,x]=y.useState(""),[h,p]=y.useState(null),v=y.useCallback(async()=>{c(!0),x("");try{const w=await ln.listCandidates({limit:wUe}),_=Array.isArray(w)?w:(w==null?void 0:w.items)||[];a(_),l(_)}catch(w){x(kUe(w)),a([]),l([])}finally{c(!1)}},[]);y.useEffect(()=>{v()},[v]),y.useEffect(()=>{const w=t.get("keywords"),_=w?w.split(",").map(k=>k.trim()).filter(Boolean):[];u(t.get("q")||""),p(_.length>0?{keywords:_}:null)},[t]);const b=y.useCallback(({query:w="",..._})=>{const k=_Ue.search(w,_,s);l(k),u(w);const C=new URLSearchParams(t);w?C.set("q",w):C.delete("q"),r(C,{replace:!0})},[s,t,r]),j=y.useMemo(()=>NUe(i,f),[i,f]),N=t.get("analysis");return n.jsxs("div",{className:"semantic-search-page",children:[n.jsxs("div",{className:"semantic-search-page__header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"semantic-search-page__title",children:"Semantic Search"}),n.jsx("p",{className:"semantic-search-page__subtitle",children:"Smart filtering and relevance scoring across every candidate profile."})]}),n.jsx("div",{className:"semantic-search-page__header-actions",children:n.jsx("button",{type:"button",className:"semantic-search-refresh",onClick:v,children:"Refresh"})})]}),N&&n.jsxs("div",{className:"semantic-search-page__context semantic-search-page__context--ai",children:[n.jsx("span",{className:"semantic-search-page__context-badge",children:"AI Analysis"}),n.jsx("p",{className:"semantic-search-page__context-text",children:N}),n.jsxs("span",{className:"semantic-search-page__context-score",children:["Query: ",d||"Not specified"]})]}),g&&n.jsx("div",{className:"semantic-search-page__context",children:n.jsx("span",{className:"semantic-search-page__context-text",children:g})}),n.jsxs("div",{className:"semantic-search-page__content",children:[n.jsx(sUe,{onSearch:b,loading:o,initialQuery:d,initialKeywords:(h==null?void 0:h.keywords)||[],initialFilters:h,showSmartHint:!!N}),n.jsx(yUe,{candidates:j,loading:o,sortBy:f,onSortChange:m,onViewDetails:w=>e(`/recruiter/candidate-profile/${(w==null?void 0:w.id)||(w==null?void 0:w.candidate_id)||""}`)})]})]})}const SUe=["JavaScript","Python","Java","C++","C#","TypeScript","Go","Rust","PHP","Ruby","Swift","Kotlin","R","MATLAB","Scala","React","Vue.js","Angular","Next.js","Svelte","Ember.js","HTML5","CSS3","Tailwind CSS","Bootstrap","Material UI","Redux","Vuex","Node.js","Django","Flask","FastAPI","Spring Boot","Express.js","Laravel","ASP.NET","Ruby on Rails",".NET Core","MySQL","PostgreSQL","MongoDB","Redis","Elasticsearch","Firebase","DynamoDB","Oracle","SQL Server","Cassandra","AWS","Azure","Google Cloud","Docker","Kubernetes","Jenkins","GitLab CI/CD","Terraform","Ansible","React Native","Flutter","iOS","Android","Xamarin","Machine Learning","Deep Learning","TensorFlow","PyTorch","Scikit-learn","NLP","Computer Vision","Pandas","NumPy","Git","GitHub","GitLab","Bitbucket","Jira","Confluence","Slack","Figma","Adobe XD","REST API","GraphQL","WebSocket","Microservices","Message Queues","RabbitMQ","Kafka","Nginx","Apache","Linux","Windows","macOS","Leadership","Communication","Team Management","Project Management","Problem Solving","Critical Thinking","Agile","Scrum","Kanban","Cybersecurity","OWASP","SSL/TLS","Authentication","Authorization","Data Encryption"],lF=[...SUe].sort(),CUe=e=>{if(!e||e.trim().length===0)return lF;const t=e.toLowerCase();return lF.filter(r=>r.toLowerCase().includes(t)).slice(0,10)},j0=[{value:"remote",label:"Remote"},{value:"hybrid",label:"Hybrid"},{value:"onsite",label:"Onsite"}],q4=["3 Months","6 Months","12 Months","Full-Time"],G4=["Immediate","15 Days","30 Days","Negotiable"],uV=["INR","USD","EUR","GBP","AUD"],AUe=[{key:"active",label:"Active"},{key:"high_budget",label:"High Budget"},{key:"urgent",label:"Urgent"},{key:"remote",label:"Remote"}],EUe=["aws","azure","gcp","cloud","kubernetes","docker","devops","terraform"],TUe=["sql","mysql","postgres","postgresql","mongodb","oracle","redis","db","database","snowflake"],PUe=["java","spring","node","backend","python","django","flask",".net","dotnet","php","golang","api","microservice"],OUe=new Set(["title","location"]),RUe=new Set(["AI","API","AWS","BA","BI","BPO","CRM","ERP","ETL","GCP","HR","HRMS","IT","L2","L3","ML","PM","PMO","QA","REST","SAP","SRE","SQL","UI","UX"]),yk=/[\u203C-\u3299\uD83C-\uDBFF\uDC00-\uDFFF\uFE0F\u200D]/gu,LUe=/^[A-Za-z0-9 ]+$/,IUe=/^[A-Za-z0-9@.+\-()' ]+$/,oF=/^[A-Za-z0-9,\- ]+$/,fV=/^[A-Za-z0-9+.#/\- ]+$/,qt=e=>typeof e=="string"?e.replace(/\s+/g," ").trim():e,Mi=e=>typeof e=="string"?e.trim():e,zo=e=>!e||typeof e!="string"?!1:(yk.lastIndex=0,yk.test(e)),Kg=e=>typeof e=="string"&&/[@+\d]/.test(e),cF=e=>{if(!e)return!1;const t=String(e).replace(/[^A-Za-z0-9]/g,"");if(!t)return!1;const r=t.toUpperCase();return!!(RUe.has(r)||/\d/.test(t)||/^[A-Z]{2,4}$/.test(e))},FUe=e=>e?cF(e)?e.toUpperCase():/^[A-Za-z]+$/.test(e)?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.split(/([.+#/\-])/).map(t=>!t||/[.+#/\-]/.test(t)?t:cF(t)?t.toUpperCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""):"",nn=e=>{const t=qt(e);return t?t.split(" ").map(r=>FUe(r)).join(" "):""},_0=e=>{const t=qt(e);return t?t===nn(t):!1},K_=(e,t,r)=>{if(Number.isFinite(t)||Number.isFinite(r))return{experience_min:Number.isFinite(t)?String(t):"",experience_max:Number.isFinite(r)?String(r):""};const s=qt(e||"");if(!s)return{experience_min:"",experience_max:""};const a=s.match(/\d+/g)||[];return{experience_min:a[0]||"",experience_max:a[1]||a[0]||""}},dF=e=>{const t=qt(e||"");if(!t)return{ctc_currency:"INR",ctc_min:"",ctc_max:""};const r=t.match(/\b(INR|USD|EUR|GBP|AUD)\b/i),s=t.replace(/,/g,"").match(/\d+(\.\d+)?/g)||[];return{ctc_currency:r?r[1].toUpperCase():"INR",ctc_min:s[0]||"",ctc_max:s[1]||s[0]||""}},uF=e=>{const t=qt(e||"");if(!t)return{work_start_time:"",work_end_time:""};const r=t.match(/([01]?\d|2[0-3]):([0-5]\d)\s*-\s*([01]?\d|2[0-3]):([0-5]\d)/);if(r)return{work_start_time:`${r[1].padStart(2,"0")}:${r[2]}`,work_end_time:`${r[3].padStart(2,"0")}:${r[4]}`};const s=i=>{const l=i.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!l)return"";let o=Number(l[1]);const c=l[2],d=l[3].toUpperCase();return d==="AM"&&o===12&&(o=0),d==="PM"&&o!==12&&(o+=12),`${String(o).padStart(2,"0")}:${c}`},a=t.split("-").map(i=>i.trim());return a.length===2?{work_start_time:s(a[0]),work_end_time:s(a[1])}:{work_start_time:"",work_end_time:""}},X_=e=>String(e||"").trim().toLowerCase(),DUe=(e,t,r)=>!t||!r?"":`${e} ${t} - ${r}`,$Ue=(e,t)=>e===""&&t===""?"":e!==""&&t!==""?`${e}-${t}`:e||t||"",Y_=e=>{const t=qt(e||"").toLowerCase();return q4.find(r=>r.toLowerCase()===t)||""},Z_=e=>{const t=qt(e||"").toLowerCase();return G4.find(r=>r.toLowerCase()===t)||""},fF=({form:e,clients:t,requirements:r,editingJobId:s})=>{const a={},i={},l=qt(e.title),o=qt(e.client_ta),c=qt(e.location),d=Mi(e.jd_text),u=Mi(e.notes_for_recruiter||""),f=(e.skills||[]).map(k=>qt(k));if((!l||l.length<3||l.length>80||!LUe.test(l)||/^\d+$/.test(l)||zo(l))&&(a.title="Enter a valid job title (e.g., Senior React Developer)"),e.client_id?t.some(C=>String(C.id)===String(e.client_id))||(a.client_id="Please select a valid client from the list"):a.client_id="Please select a client",o){const k=Kg(o);o.length<2||o.length>60||!IUe.test(o)||zo(o)?a.client_ta="Client TA must be 2-60 characters (name in Title Case or valid contact details)":!k&&!_0(o)&&(a.client_ta="Client TA name must be in Title Case (e.g., John Smith)")}j0.some(k=>k.value===e.mode)||(a.mode="Select a valid mode");const m=String(e.experience_min??"").trim(),g=String(e.experience_max??"").trim(),x=Number(m),h=Number(g),p=k=>/^\d+$/.test(k);(!m||!g||!p(m)||!p(g)||x<0||h>30||x>h)&&(a.experience="Experience must be between 0 and 30 years"),e.mode!=="remote"?c?(c.length<2||c.length>100||!oF.test(c)||!_0(c)||zo(c))&&(a.location="Location must be 2-100 characters in Title Case (letters, numbers, commas, hyphens only)"):a.location="Location is required for Hybrid and Onsite jobs":c&&(!oF.test(c)||!_0(c)||zo(c))&&(a.location="Location must be in Title Case with supported characters only"),e.duration&&!q4.includes(e.duration)&&(a.duration="Select a valid duration");const v=String(e.no_of_positions??"").trim();if(!/^\d+$/.test(v))a.no_of_positions="Number of positions must be a whole number";else{const k=Number(v);(k<1||k>500)&&(a.no_of_positions="Number of positions must be between 1 and 500")}const b=String(e.ctc_min??"").trim(),j=String(e.ctc_max??"").trim();if(!!(b||j)){if(!b||!j)a.ctc_range="Enter both Min CTC and Max CTC";else if(!/^\d+(\.\d{1,2})?$/.test(b)||!/^\d+(\.\d{1,2})?$/.test(j))a.ctc_range="CTC values must be numeric";else{const k=Number(b),C=Number(j);k<0||C<0?a.ctc_range="CTC values cannot be negative":k>C?a.ctc_range="Min CTC cannot be greater than Max CTC":k>0&&(C/k>8||C>1e8)&&(i.ctc_range="Warning: Salary range looks unusually wide. Please verify budget values.")}uV.includes(e.ctc_currency)||(a.ctc_range="Select a valid currency")}const w=e.work_start_time||"",_=e.work_end_time||"";if((w||_)&&(!w||!_?a.work_timings="Select both start and end time":w>=_&&(a.work_timings="Start time must be earlier than end time")),e.joining_preference&&!G4.includes(e.joining_preference)&&(a.joining_preference="Select a valid joining preference"),f.length<1||f.length>30)a.skills="Add at least one valid skill";else{const k=new Set;for(const C of f){if(C.length<2||C.length>30||!fV.test(C)||!_0(C)||zo(C)){a.skills="Add at least one valid skill";break}const T=C.toLowerCase();if(k.has(T)){a.skills="Duplicate skills are not allowed";break}k.add(T)}}if(d?zo(d)&&(a.jd_text="Emojis are not allowed in Job Description"):a.jd_text="Job description is required",u){const k=wo(u,{minLength:20,required:!1,label:"Recruiter notes"});k&&(a.notes_for_recruiter=k)}if(zo(e.notes_for_recruiter||"")&&(a.notes_for_recruiter="Emojis are not allowed in recruiter notes"),e.client_id&&l){const k=t.find(P=>String(P.id)===String(e.client_id)),C=qt((k==null?void 0:k.client_name)||(k==null?void 0:k.name)||"").toLowerCase();r.find(P=>{if(s&&String(P.id)===String(s))return!1;const A=qt(P.job_title||P.title||"").toLowerCase(),S=String(P.client_id||""),E=qt(P.client_name||"").toLowerCase();return A===l.toLowerCase()&&(S===String(e.client_id)||C&&E===C)})&&(i.duplicate="Potential duplicate detected: same Client + Job Title already exists.")}return{errors:a,warnings:i,isValid:Object.keys(a).length===0}},Q_={title:"",client_id:"",client_name:"",client_ta:"",mode:"hybrid",skills:[],jd_text:"",experience_min:"",experience_max:"",location:"",duration:"",no_of_positions:"1",ctc_currency:"INR",ctc_min:"",ctc_max:"",budget:"",work_start_time:"",work_end_time:"",work_timings:"",joining_preference:"",assign_recruiters:[],notes_for_recruiter:"",status:"open"},mF={job_id:"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[],last_date_to_apply:"",status:"draft"};function hF(){var ae,Ke;Tt();const[e,t]=ea(),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(X_(e.get("status"))),[u,f]=y.useState(""),[m,g]=y.useState(""),[x,h]=y.useState([]),[p,v]=y.useState(!1),[b,j]=y.useState(!1),[N,w]=y.useState(!1),[_,k]=y.useState(!1),[C,T]=y.useState(null),[P,A]=y.useState("manual"),[S,E]=y.useState(!1),[O,I]=y.useState(null),[L,Z]=y.useState(""),[H,R]=y.useState([]),[D,Y]=y.useState(7),[M,X]=y.useState(5),[ne,J]=y.useState(!1),[ue,ke]=y.useState([]),[ve,je]=y.useState(Q_),[ie,se]=y.useState(mF),[z,Te]=y.useState(""),[fe,Ie]=y.useState(null),[ce,Ce]=y.useState(""),[Ye,at]=y.useState(""),[pe,ye]=y.useState(""),[Pe,et]=y.useState([]),[We,qe]=y.useState(!1),ot=y.useRef(null),Ct=y.useRef(null),[He,mt]=y.useState([]),[rt,wt]=y.useState([]),[At,$t]=y.useState(null),[Wt,lr]=y.useState(!1),[sr,De]=y.useState(!1),[yt,ut]=y.useState(null),[Lt,Yt]=y.useState(null),[be,nt]=y.useState({}),[ze,ht]=y.useState({});y.useEffect(()=>{d(X_(e.get("status")))},[e]);const Nt=U=>{const de=X_(U);d(de);const Fe=new URLSearchParams(e);de?Fe.set("status",de):Fe.delete("status"),t(Fe,{replace:!0})},Oe=y.useMemo(()=>fF({form:ve,clients:rt,requirements:r,editingJobId:At}),[ve,rt,r,At]),xe=y.useMemo(()=>({...Oe.errors,...ze}),[Oe.errors,ze]),Re=Oe.warnings,le=Oe.isValid&&Object.keys(ze).length===0,Me=U=>{h(de=>de.includes(U)?de.filter(Fe=>Fe!==U):[...de,U])},Ve=U=>{const de=Number(U==null?void 0:U.ctc_max);if(Number.isFinite(de)&&de>0)return de;const Fe=qt((U==null?void 0:U.budget)||"");if(!Fe)return null;const $e=Fe.replace(/,/g,"").match(/\d+(\.\d+)?/g)||[];if($e.length===0)return null;const xt=Number($e[$e.length>1?1:0]);return Number.isFinite(xt)?xt:null},Xe=U=>{if(qt((U==null?void 0:U.joining_preference)||"").toLowerCase()==="immediate")return!0;const Fe=(U==null?void 0:U.date_created)||(U==null?void 0:U.created_at);if(Fe){const xt=new Date(Fe);if(!Number.isNaN(xt.getTime())&&(Date.now()-xt.getTime())/864e5<=7)return!0}const $e=Number((U==null?void 0:U.no_of_positions)||0);return Number.isFinite($e)&&$e>=5},he=y.useMemo(()=>{const U=l.trim().toLowerCase();return r.filter(de=>{var Ut,br,vn,Jr;const Fe=Array.isArray(de.skills)?de.skills.map(tn=>typeof tn=="string"?tn:(tn==null?void 0:tn.name)||""):[],$e=U?((Ut=de.job_title||de.title)==null?void 0:Ut.toLowerCase().includes(U))||((br=de.client_name)==null?void 0:br.toLowerCase().includes(U))||((vn=de.serial_number)==null?void 0:vn.toLowerCase().includes(U))||Fe.some(tn=>String(tn).toLowerCase().includes(U)):!0,xt=c?de.status===c:!0,It=u?((Jr=de.client_name)==null?void 0:Jr.toLowerCase())===u.toLowerCase()||de.client_id===u:!0,er=m?de.mode===m:!0,Xt=x.every(tn=>{if(tn==="active")return["active","open","in_progress"].includes(String(de.status||"").toLowerCase());if(tn==="remote")return de.mode==="remote";if(tn==="high_budget"){const ga=Ve(de);return Number.isFinite(ga)&&ga>=20}return tn==="urgent"?Xe(de):!0});return $e&&xt&&It&&er&&Xt})},[r,l,c,u,m,x]),W=y.useMemo(()=>r.filter(U=>U.status==="closed"),[r]),V=y.useMemo(()=>c==="closed"?he:he.filter(U=>U.status!=="closed"),[he,c]),Q=async()=>{i(!0);try{const U=await G.get("/v1/job-management/requirements",{params:{status:c||void 0,client_name:u||void 0,search:l||void 0}});s(U.data.jobs||U.data.requirements||[])}catch(U){console.error("Error fetching requirements:",U);try{const de=await Cs.getAmRequirements({status:c||void 0,client_name:u||void 0,q:l||void 0});s(de.requirements||[])}catch(de){console.error("Fallback also failed:",de)}}finally{i(!1)}},K=async()=>{try{const U=await G.get("/v1/users?role=recruiter");mt(U.data.users||U.data||[])}catch{try{const de=await G.get("/v1/am/recruiters");mt(de.data||[])}catch(de){console.error("Failed to load recruiters",de)}}},q=async()=>{var U;try{const de=await G.get("/v1/am/clients"),$e=(((U=de.data)==null?void 0:U.clients)||de.data||[]).map(xt=>({id:xt.id||xt.client_id||qt(xt.client_name||xt.name||"").toLowerCase().replace(/\s+/g,"_"),client_name:qt(xt.client_name||xt.name||xt.company_name||"")})).filter(xt=>xt.id&&xt.client_name);wt($e)}catch(de){console.error("Failed to load clients",de),wt([])}},F=async U=>{var de,Fe;I(U.id),Z(U.title||U.job_title||""),R([]),Y(7),X(5),E(!0);try{const $e=await G.get("/v1/am/recruiters");ke(((de=$e.data)==null?void 0:de.data)||$e.data||[])}catch($e){console.error("Failed to load recruiters:",$e);try{const xt=await G.get("/v1/users?role=recruiter"),It=((Fe=xt.data)==null?void 0:Fe.users)||xt.data||[];ke(It.map(er=>({id:er.id,full_name:er.full_name||er.name,email:er.email,workload:0,status:"available",specialization:[]})))}catch(xt){console.error("Fallback also failed:",xt)}}},ee=U=>{let de=U.client_id||"";const Fe=qt(U.client_name||"");if(Fe&&rt.length>0){const Ut=rt.find(br=>qt(br.client_name||br.name||"").toLowerCase()===Fe.toLowerCase());Ut&&(de=Ut.id)}const $e=(()=>{const Ut=String(U.mode||"").toLowerCase();return Ut==="on-site"||Ut==="on site"?"onsite":j0.some(br=>br.value===Ut)?Ut:"hybrid"})(),xt=K_(U.experience,Number.isFinite(Number(U.min_experience))?Number(U.min_experience):void 0,Number.isFinite(Number(U.max_experience))?Number(U.max_experience):void 0),It=dF(U.budget),er=uF(U.work_timings),Xt=(Array.isArray(U.skills)?U.skills:[]).map(Ut=>nn(qt(Ut))).filter(Boolean).slice(0,30);je({...Q_,title:nn(qt(U.title||U.job_title||"")),client_id:de,client_name:Fe,client_ta:(()=>{const Ut=qt(U.client_ta||"");return Kg(Ut)?Ut:nn(Ut)})(),mode:$e,skills:Xt,jd_text:Mi(U.jd_text||U.description||""),experience_min:xt.experience_min,experience_max:xt.experience_max,location:$e==="remote"?"Remote":nn(qt(U.location||"")),duration:Y_(U.duration),no_of_positions:U.no_of_positions&&Number(U.no_of_positions)>0?String(U.no_of_positions):"1",ctc_currency:It.ctc_currency,ctc_min:It.ctc_min,ctc_max:It.ctc_max,budget:qt(U.budget||""),work_start_time:er.work_start_time,work_end_time:er.work_end_time,work_timings:qt(U.work_timings||""),joining_preference:Z_(U.joining_preference),assign_recruiters:(U.recruiters||[]).map(Ut=>Ut.id),notes_for_recruiter:Mi(U.notes_for_recruiter||""),status:U.status||"active"}),nt({}),ht({}),at(""),et([]),qe(!1),$t(U.id),v(!0)},me=async()=>{if(H.length===0){ut("Please select at least one recruiter");return}J(!0);try{await G.post("/v1/am/requirements/assign",{requirement_id:O,recruiter_ids:H,sla_deadline_days:parseInt(D),target_cv_count:parseInt(M)}),Yt(`Successfully assigned ${H.length} recruiter(s)!`),E(!1),Q(),setTimeout(()=>Yt(null),3e3)}catch(U){console.error("Assignment failed:",U),ut("Failed to assign recruiters. Please try again."),setTimeout(()=>ut(null),3e3)}finally{J(!1)}},Ne=U=>{R(de=>de.includes(U)?de.filter(Fe=>Fe!==U):[...de,U])},ge=async(U,de)=>{const Fe=de==="closed"?"close":"revoke (reopen)",$e=de==="closed"?"Are you sure you want to close this requirement? It will be moved to Closed Requirements.":"Are you sure you want to revoke (reopen) this requirement? It will become active again.";if(window.confirm($e))try{await G.put(`/v1/job-management/requirements/${U}`,{status:de}),Yt(de==="closed"?"Requirement closed successfully!":"Requirement revoked (reopened) successfully!"),Q(),setTimeout(()=>Yt(null),3e3)}catch(xt){console.error(`Failed to ${Fe} requirement:`,xt),ut(`Failed to ${Fe} requirement. Please try again.`),setTimeout(()=>ut(null),3e3)}};y.useEffect(()=>{Q(),K(),q()},[]),y.useEffect(()=>{const U=de=>{Ct.current&&!Ct.current.contains(de.target)&&ot.current&&!ot.current.contains(de.target)&&qe(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const te=U=>{nt(de=>({...de,[U]:!0}))},Se=U=>{ht(de=>{if(!de||Object.keys(de).length===0)return de;const Fe={...de};return delete Fe[U],(U==="experience_min"||U==="experience_max")&&delete Fe.experience,(U==="ctc_min"||U==="ctc_max"||U==="ctc_currency")&&delete Fe.ctc_range,(U==="work_start_time"||U==="work_end_time")&&delete Fe.work_timings,Fe})},Ue=(U,de)=>{te(U),Se(U),yt&&ut(null);let Fe=de;U==="title"?Fe=String(de).replace(/[^A-Za-z0-9 ]/g,""):U==="client_ta"?Fe=String(de).replace(/[^A-Za-z0-9@.+\-()' ]/g,""):U==="location"?Fe=String(de).replace(/[^A-Za-z0-9,\- ]/g,""):U==="experience_min"||U==="experience_max"?Fe=String(de).replace(/[^\d]/g,""):U==="no_of_positions"?Fe=String(de).replace(/[^\d]/g,""):U==="ctc_min"||U==="ctc_max"?Fe=String(de).replace(/[^\d.]/g,"").replace(/^(\d*\.?\d{0,2}).*$/,"$1"):U==="jd_text"||U==="notes_for_recruiter"?Fe=String(de).replace(yk,""):typeof Fe=="string"&&(Fe=String(Fe)),je($e=>{const xt={...$e,[U]:Fe};return U==="mode"&&Fe==="remote"&&(xt.location="Remote"),U==="mode"&&Fe!=="remote"&&qt($e.location)==="Remote"&&(xt.location=""),xt})},Be=U=>{te(U),Se(U),je(de=>{const Fe={...de};return typeof Fe[U]=="string"&&(U==="jd_text"||U==="notes_for_recruiter"?Fe[U]=Mi(Fe[U]):(Fe[U]=qt(Fe[U]),(OUe.has(U)||U==="client_ta"&&Fe[U]&&!Kg(Fe[U]))&&(Fe[U]=nn(Fe[U])))),Fe})},Ge=(U,de=null)=>xe[U]||(de?xe[de]:null),tt=(U,de=null,Fe="")=>{const $e=!!Ge(U,de),xt=!!be[U]||!!be[de];return`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${$e?"border-red-500 focus:ring-red-300":xt?"border-green-500 focus:ring-green-200":"border-gray-300 dark:border-gray-600 focus:ring-purple-200"} ${Fe}`},_e=U=>{te("skills");let de=[...ve.skills],Fe="";U.forEach($e=>{const xt=nn(qt($e||""));if(!xt)return;if(xt.length<2||xt.length>30||!fV.test(xt)||zo(xt)||!_0(xt)){Fe="Each skill must be 2-30 characters in Title Case using supported characters";return}if(de.length>=30){Fe="Maximum 30 skills are allowed";return}if(de.some(er=>er.toLowerCase()===xt.toLowerCase())){Fe="Duplicate skills are not allowed";return}de.push(xt)}),de.length!==ve.skills.length&&je($e=>({...$e,skills:de})),ht(Fe?$e=>({...$e,skills:Fe}):$e=>{const xt={...$e};return delete xt.skills,xt})},Je=()=>{const U=Ye.split(",").map(de=>de.trim()).filter(Boolean);U.length!==0&&(_e(U),at(""),et([]),qe(!1))},B=U=>{te("skills"),Se("skills"),je(de=>({...de,skills:de.skills.filter(Fe=>Fe!==U)}))},re=U=>{Se("skills");const de=String(U).replace(/[^A-Za-z0-9+.#/\- ,]/g,"");if(at(de),!de.trim()){et([]),qe(!1);return}const Fe=CUe(de).map($e=>nn($e)).filter($e=>!ve.skills.some(xt=>xt.toLowerCase()===$e.toLowerCase())).slice(0,8);et(Fe),qe(!0)},st=U=>{(U.key==="Enter"||U.key===",")&&(U.preventDefault(),Je())},ct=(U,de)=>{se(Fe=>({...Fe,[U]:de}))},Ee=()=>{const U=nn(qt(pe));U&&!ie.skills.some(de=>String(de||"").toLowerCase()===U.toLowerCase())&&(se(de=>({...de,skills:[...de.skills,U]})),ye(""))},Ft=U=>{se(de=>({...de,skills:de.skills.filter(Fe=>Fe!==U)}))},pt=U=>{(U.key==="Enter"||U.key===",")&&(U.preventDefault(),Ee())},Mt=U=>{const de=U.target.files[0];if(de){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(de.type)){ut("Please upload a PDF or DOCX file");return}if(de.size>5*1024*1024){ut("File size must be less than 5MB");return}Ie(de),ut(null)}},Bt=async()=>{if(!fe&&!ce.trim()){ut("Please upload a file or paste JD text");return}De(!0),ut(null);try{let U;if(fe){const Fe=new FormData;Fe.append("file",fe),U=await G.post("/v1/job-management/parse-jd",Fe,{headers:{"Content-Type":"multipart/form-data"}})}else U=await G.post("/v1/job-management/parse-jd-text",{text:ce});const de=U.data;je(Fe=>{const $e=String(de.mode||"").toLowerCase(),xt=j0.some(br=>br.value===$e)?$e:Fe.mode,It=K_(de.experience,Number.isFinite(Number(de.experience_min))?Number(de.experience_min):void 0,Number.isFinite(Number(de.experience_max))?Number(de.experience_max):void 0),er=dF(de.budget||de.ctc||""),Xt=uF(de.work_timings||""),Ut=(Array.isArray(de.skills)?de.skills:[]).map(br=>nn(qt(br))).filter(Boolean).slice(0,30);return{...Fe,title:nn(qt(de.job_title||de.title||Fe.title)),mode:xt,skills:Ut.length>0?Ut:Fe.skills,experience_min:It.experience_min||Fe.experience_min,experience_max:It.experience_max||Fe.experience_max,location:xt==="remote"?"Remote":nn(qt(de.location||Fe.location)),ctc_currency:er.ctc_currency||Fe.ctc_currency,ctc_min:er.ctc_min||Fe.ctc_min,ctc_max:er.ctc_max||Fe.ctc_max,work_start_time:Xt.work_start_time||Fe.work_start_time,work_end_time:Xt.work_end_time||Fe.work_end_time,duration:Y_(de.duration||Fe.duration),joining_preference:Z_(de.joining_preference||Fe.joining_preference),jd_text:Mi(de.jd_text||ce||Fe.jd_text)}}),A("manual"),Yt("JD parsed successfully! Review and edit the fields."),setTimeout(()=>Yt(null),3e3)}catch(U){console.error("Error parsing JD:",U),ut("Failed to parse JD. Please enter manually.")}finally{De(!1)}},yr=()=>{je(Q_),nt({}),ht({}),at(""),et([]),qe(!1),Ie(null),Ce(""),Te(""),$t(null),ut(null),Yt(null)},Tr=()=>{se(mF),ye(""),ut(null),Yt(null)},Ps=async(U,de="open")=>{var It,er;U.preventDefault();const Fe=(ve.skills||[]).map(Xt=>nn(qt(Xt))).filter(Boolean),$e={...ve,title:nn(qt(ve.title)),client_ta:(()=>{const Xt=qt(ve.client_ta);return Kg(Xt)?Xt:nn(Xt)})(),location:ve.mode==="remote"?"Remote":nn(qt(ve.location)),jd_text:Mi(ve.jd_text),notes_for_recruiter:Mi(ve.notes_for_recruiter),skills:Fe,experience_min:String(ve.experience_min||""),experience_max:String(ve.experience_max||""),ctc_min:String(ve.ctc_min||""),ctc_max:String(ve.ctc_max||""),no_of_positions:String(ve.no_of_positions||"")},xt=fF({form:$e,clients:rt,requirements:r,editingJobId:At});if(je($e),nt({title:!0,client_id:!0,client_ta:!0,mode:!0,experience_min:!0,experience_max:!0,location:!0,duration:!0,no_of_positions:!0,ctc_min:!0,ctc_max:!0,ctc_currency:!0,work_start_time:!0,work_end_time:!0,joining_preference:!0,skills:!0,jd_text:!0,notes_for_recruiter:!0}),!xt.isValid){ht({}),ut("Please fix the highlighted fields before submitting.");return}lr(!0),ut(null),ht({});try{const Xt=rt.find(Sr=>String(Sr.id)===String($e.client_id)),Ut=Number($e.experience_min),br=Number($e.experience_max),vn=!!($e.ctc_min&&$e.ctc_max),Jr=vn?DUe($e.ctc_currency,$e.ctc_min,$e.ctc_max):qt($e.budget||""),tn=$e.work_start_time&&$e.work_end_time?`${$e.work_start_time} - ${$e.work_end_time}`:qt($e.work_timings||""),ga={job_title:$e.title,date_created:new Date().toISOString().split("T")[0],client_id:$e.client_id||null,client_name:(Xt==null?void 0:Xt.client_name)||(Xt==null?void 0:Xt.name)||$e.client_name||null,client_ta:$e.client_ta||null,mode:$e.mode,skills:$e.skills,jd_text:$e.jd_text,experience:$Ue($e.experience_min,$e.experience_max),experience_min:Ut,experience_max:br,location:$e.mode==="remote"?"Remote":$e.location||"",duration:$e.duration||null,no_of_positions:Number($e.no_of_positions)||1,ctc_currency:vn?$e.ctc_currency:null,ctc_min:vn?Number($e.ctc_min):null,ctc_max:vn?Number($e.ctc_max):null,budget:Jr,work_start_time:$e.work_start_time||null,work_end_time:$e.work_end_time||null,work_timings:tn||null,joining_preference:$e.joining_preference||null,recruiter_ids:$e.assign_recruiters,am_notes:$e.notes_for_recruiter?[$e.notes_for_recruiter]:null,status:de||"open"};At?(await G.put(`/v1/job-management/requirements/${At}`,ga),Yt("Job updated successfully!")):(await G.post("/v1/job-management/requirements",ga),Yt("Job created successfully!")),yr(),v(!1),Q()}catch(Xt){console.error("Failed to save job",Xt);const Ut=(er=(It=Xt.response)==null?void 0:It.data)==null?void 0:er.detail;Ut!=null&&Ut.errors&&typeof Ut.errors=="object"?(ht(Ut.errors),ut(Ut.message||"Please fix highlighted fields and try again."),nt(br=>({...br,...Object.keys(Ut.errors).reduce((vn,Jr)=>({...vn,[Jr]:!0}),{})}))):ut(typeof Ut=="string"?Ut:"Failed to save job")}finally{lr(!1)}},vt=async(U,de="active")=>{var tn,ga;U.preventDefault();const Fe=nn(qt(ie.title)),$e=qt(ie.client_display_name),xt=Mi(ie.jd_content),It=nn(qt(ie.location)),er=qt(ie.experience),Xt=qt(ie.ctc),Ut=(ie.skills||[]).map(Sr=>nn(qt(Sr))).filter(Boolean),br=ll(Fe,"Posting title");if(br){ut(br);return}if(!$e){ut("Company display name is required");return}const vn=wo(xt,{minLength:20,required:!0,label:"Job description"});if(vn){ut(vn);return}if(!It){ut("Location is required");return}if(!ie.last_date_to_apply){ut("Last date to apply is required");return}if(r.some(Sr=>{var Oo;const Fc=Vt((Sr==null?void 0:Sr.job_title)||(Sr==null?void 0:Sr.title)).toLowerCase(),Cn=Vt(((Oo=Sr==null?void 0:Sr.client)==null?void 0:Oo.client_name)||(Sr==null?void 0:Sr.client_name)||(Sr==null?void 0:Sr.client_display_name)).toLowerCase();return Fc===Fe.toLowerCase()&&Cn===$e.toLowerCase()})){ut("Duplicate Feature name under the same Sub-Category is not allowed.");return}lr(!0),ut(null),se(Sr=>({...Sr,title:Fe,client_display_name:$e,jd_content:xt,location:It,experience:er,ctc:Xt,skills:Ut}));try{const Sr={job_id:ie.job_id||null,title:Fe,client_display_name:$e,jd_content:xt,ctc:Xt||"",location:It,mode:ie.mode,experience_required:er||"",skills:Ut,last_date_to_apply:ie.last_date_to_apply};await G.post("/v1/job-management/postings",Sr),Yt("Job posting created successfully!"),Tr(),j(!1)}catch(Sr){console.error("Failed to create posting",Sr),ut(((ga=(tn=Sr.response)==null?void 0:tn.data)==null?void 0:ga.detail)||"Failed to create posting")}finally{lr(!1)}},gn=async()=>{const U=Mi(z);if(!U)return;const de=wo(U,{minLength:20,required:!0,label:"Email content"});if(de){ut(de);return}De(!0);try{const Fe=await Cs.parseRequirementEmail(U);Te(U),je($e=>{const xt=K_("",Number.isFinite(Number(Fe.experience_min))?Number(Fe.experience_min):void 0,Number.isFinite(Number(Fe.experience_max))?Number(Fe.experience_max):void 0),It=String(Fe.mode||"").toLowerCase(),er=j0.some(Ut=>Ut.value===It)?It:$e.mode,Xt=(Array.isArray(Fe.skills_mandatory)?Fe.skills_mandatory:[]).map(Ut=>nn(qt(Ut))).filter(Boolean).slice(0,30);return{...$e,title:nn(qt(Fe.title||$e.title)),skills:Xt.length>0?Xt:$e.skills,experience_min:xt.experience_min||$e.experience_min,experience_max:xt.experience_max||$e.experience_max,location:er==="remote"?"Remote":nn(qt(Fe.location||$e.location)),mode:er,duration:Y_(Fe.duration||$e.duration),joining_preference:Z_(Fe.joining_preference||$e.joining_preference),jd_text:Mi(z)}}),w(!1),v(!0),Yt("Email parsed successfully!"),setTimeout(()=>Yt(null),3e3)}catch(Fe){console.error("Email parse failed",Fe),ut("Failed to parse email")}finally{De(!1)}},js=U=>{if(!U)return"--";const de=new Date(U);return Number.isNaN(de.getTime())?"--":de.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},xa=U=>{const de={active:"bg-emerald-50 text-emerald-700 border border-emerald-200",open:"bg-emerald-50 text-emerald-700 border border-emerald-200",in_progress:"bg-sky-50 text-sky-700 border border-sky-200",closed:"bg-red-50 text-red-700 border border-red-200",on_hold:"bg-amber-50 text-amber-700 border border-amber-200",draft:"bg-violet-50 text-violet-700 border border-violet-200"};return n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${de[U]||de.active}`,children:(U||"active").replace("_"," ").toUpperCase()})},yn=U=>{const de={hybrid:"bg-violet-50 text-violet-700 border border-violet-200",remote:"bg-blue-50 text-blue-700 border border-blue-200",onsite:"bg-orange-50 text-orange-700 border border-orange-200",contract:"bg-fuchsia-50 text-fuchsia-700 border border-fuchsia-200"};return n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${de[U]||de.hybrid}`,children:(U||"hybrid").toUpperCase()})},Br=U=>{const de=qt(U||"").toLowerCase();return de?EUe.some(Fe=>de.includes(Fe))?"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-500/40 dark:bg-blue-900/20 dark:text-blue-300":TUe.some(Fe=>de.includes(Fe))?"border-teal-200 bg-teal-50 text-teal-700 dark:border-teal-500/40 dark:bg-teal-900/20 dark:text-teal-300":PUe.some(Fe=>de.includes(Fe))?"border-violet-200 bg-violet-50 text-violet-700 dark:border-violet-500/40 dark:bg-violet-900/20 dark:text-violet-300":"border-gray-200 bg-gray-100 text-gray-700 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200":"border-gray-200 bg-gray-100 text-gray-700 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Oa=U=>{var de;return((de=U==null?void 0:U.client)==null?void 0:de.client_name)||(U==null?void 0:U.client_name)||"--"},Os=U=>{const de=qt((U==null?void 0:U.experience)||"");if(de)return/year|yr/i.test(de)?de:`${de} yrs`;const Fe=(U==null?void 0:U.min_experience)!==null&&(U==null?void 0:U.min_experience)!==void 0?Number(U.min_experience):null,$e=(U==null?void 0:U.max_experience)!==null&&(U==null?void 0:U.max_experience)!==void 0?Number(U.max_experience):null;return Number.isFinite(Fe)&&Number.isFinite($e)?`${Fe}-${$e} yrs`:Number.isFinite(Fe)?`${Fe}+ yrs`:Number.isFinite($e)?`0-${$e} yrs`:"--"},oe=U=>{const de=qt((U==null?void 0:U.budget)||"");if(de)return de;const Fe=(U==null?void 0:U.ctc_min)!==null&&(U==null?void 0:U.ctc_min)!==void 0?Number(U.ctc_min):null,$e=(U==null?void 0:U.ctc_max)!==null&&(U==null?void 0:U.ctc_max)!==void 0?Number(U.ctc_max):null,xt=qt((U==null?void 0:U.ctc_currency)||"INR")||"INR";return Number.isFinite(Fe)&&Number.isFinite($e)?`${xt} ${Fe} - ${$e}`:"--"},Le=U=>(Array.isArray(U==null?void 0:U.skills)?U.skills:[]).map(de=>qt(typeof de=="string"?de:(de==null?void 0:de.name)||"")).filter(Boolean),Qe=(U,de,Fe=!1)=>{const $e=U.job_title||U.title||"Untitled Role",xt=Oa(U),It=qt(U.location||"")||"--",er=Os(U),Xt=oe(U),Ut=Le(U),br=Ut.slice(0,3),vn=Math.max(0,Ut.length-br.length);return n.jsxs("article",{className:`group h-full min-h-[248px] rounded-xl border p-4 shadow-sm transition-all duration-200 ease-out flex flex-col cursor-pointer ${Fe?"bg-white dark:bg-gray-800 border-red-100 dark:border-red-900/40 hover:border-red-200 dark:hover:border-red-700/60 hover:shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-500/60 hover:shadow-md hover:-translate-y-0.5"}`,onClick:()=>{T(U),k(!0)},children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"text-[11px] font-medium text-gray-500 dark:text-gray-400",children:["#",U.serial_number||de+1]}),Fe?n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold bg-red-50 text-red-700 border border-red-200",children:"CLOSED"}):xa(U.status)]}),n.jsx("h3",{className:`text-[19px] font-semibold leading-6 line-clamp-2 ${Fe?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:$e})]}),yn(U.mode)]}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-x-4 gap-y-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Client"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-gray-900 dark:text-white truncate",children:xt})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-gray-700 dark:text-gray-200 truncate",children:It})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-indigo-700 dark:text-indigo-300 truncate",children:er})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Budget"}),n.jsx("p",{className:"mt-1 text-[15px] font-semibold text-emerald-700 dark:text-emerald-300 truncate",children:Xt})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2",children:"Skills"}),n.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px]",children:br.length>0?n.jsxs(n.Fragment,{children:[br.map((Jr,tn)=>n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-md border text-[11px] font-medium ${Br(Jr)}`,children:Jr},`${U.id||de}-skill-${tn}`)),vn>0?n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[11px] font-semibold text-gray-500 dark:text-gray-400",children:["+",vn," more"]}):null]}):n.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),n.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-2",children:[n.jsxs("button",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border text-xs font-medium transition-colors ${Fe?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600":"border-indigo-200 dark:border-indigo-500/50 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-100 dark:hover:bg-indigo-900/30"}`,onClick:Jr=>{Jr.stopPropagation(),T(U),k(!0)},children:[n.jsx(il,{className:"w-3.5 h-3.5"}),"Details"]}),n.jsx("div",{className:"flex items-center gap-1",children:Fe?n.jsx("button",{className:"p-1.5 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors",title:"Revoke (Reopen) Requirement",onClick:Jr=>{Jr.stopPropagation(),ge(U.id,"active")},children:n.jsx(q4e,{className:"w-4 h-4"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Edit",onClick:Jr=>{Jr.stopPropagation(),ee(U)},children:n.jsx(UC,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1.5 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-md transition-colors",title:"Assign Recruiters",onClick:Jr=>{Jr.stopPropagation(),F(U)},children:n.jsx(Hr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",title:"Close Requirement",onClick:Jr=>{Jr.stopPropagation(),ge(U.id,"closed")},children:n.jsx(Ja,{className:"w-4 h-4"})})]})})]})]},U.id)},dt=new Date().toISOString().split("T")[0];return a?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(Ws,{className:"w-8 h-8 animate-spin text-purple-600"})}):n.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:["Job Requirements (",r.length,")"]}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage job requirements and postings"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg shadow-sm hover:bg-purple-700 transition-colors",onClick:()=>{yr(),v(!0)},children:[n.jsx(bi,{className:"w-4 h-4"}),"Create Job"]}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>w(!0),children:[n.jsx(iu,{className:"w-4 h-4"}),"Import from Email"]}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>j(!0),children:[n.jsx(Iv,{className:"w-4 h-4"}),"Create Posting"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by title, skill, client...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:l,onChange:U=>o(U.target.value)})]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:u,onChange:U=>f(U.target.value),children:[n.jsx("option",{value:"",children:"All Clients"}),rt.map(U=>n.jsx("option",{value:U.client_name,children:U.client_name},U.id))]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:c,onChange:U=>Nt(U.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"on_hold",children:"On Hold"})]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:m,onChange:U=>g(U.target.value),children:[n.jsx("option",{value:"",children:"All Modes"}),n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:AUe.map(U=>{const de=x.includes(U.key);return n.jsx("button",{type:"button",onClick:()=>Me(U.key),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition-colors ${de?"bg-purple-50 dark:bg-purple-900/20 border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:U.label},U.key)})}),V.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ua,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No requirements found"}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",onClick:()=>{yr(),v(!0)},children:[n.jsx(bi,{className:"w-4 h-4"}),"Create Your First Job"]})]}):n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 auto-rows-fr",children:V.map((U,de)=>Qe(U,de,U.status==="closed"))}),W.length>0&&c!=="closed"&&n.jsxs("div",{className:"mt-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Closed Requirements"}),n.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:W.length})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 auto-rows-fr",children:W.map((U,de)=>Qe(U,de,!0))})]}),_&&C&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:C.job_title||C.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"text-sm text-gray-500",children:["#",C.serial_number||((ae=C.id)==null?void 0:ae.slice(0,8))]}),xa(C.status),yn(C.mode)]})]}),n.jsx("button",{onClick:()=>{k(!1),T(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(_r,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Client"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:((Ke=C.client)==null?void 0:Ke.client_name)||C.client_name||"--"})]}),C.client_ta&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Client TA"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:C.client_ta})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:C.location||"--"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[C.experience||`${C.min_experience||0} - ${C.max_experience||"N/A"}`," ","years"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-semibold",children:C.no_of_positions||1})]}),C.duration&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:C.duration})]}),C.budget&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Budget / CTC"}),n.jsx("p",{className:"text-green-600 dark:text-green-400 mt-1 font-semibold",children:C.budget})]}),C.work_timings&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:C.work_timings})]}),C.joining_preference&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:C.joining_preference})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:js(C.date_created||C.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(C.skills)?C.skills:[]).map((U,de)=>n.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:typeof U=="string"?U:(U==null?void 0:U.name)||U},de)),(!C.skills||C.skills.length===0)&&n.jsx("span",{className:"text-gray-400",children:"No skills specified"})]})]}),(C.jd_text||C.description)&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Job Description"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-sm",children:C.jd_text||C.description})})]}),C.notes_for_recruiter&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Notes for Recruiter"}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-sm",children:C.notes_for_recruiter})})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{k(!1),T(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"}),n.jsxs("button",{onClick:()=>{k(!1),F(C)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Assign Recruiters"]})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:At?"Edit Job":"Create New Job"}),n.jsx("p",{className:"text-sm text-gray-500",children:At?"Update job requirement details":"Add a new job requirement"})]}),n.jsx("button",{onClick:()=>{v(!1),yr()},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(_r,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"px-6 pt-4 flex gap-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>A("manual"),className:`pb-3 px-1 text-sm font-medium transition-colors ${P==="manual"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Manual Entry"}),n.jsx("button",{onClick:()=>A("import"),className:`pb-3 px-1 text-sm font-medium transition-colors ${P==="import"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Import from JD"})]}),yt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Ks,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:yt}),n.jsx("button",{onClick:()=>ut(null),className:"ml-auto",children:n.jsx(_r,{className:"w-4 h-4 text-red-600"})})]}),Lt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-2",children:[n.jsx(yc,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:Lt})]}),P==="import"&&n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center mb-4",children:fe?n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(cn,{className:"w-8 h-8 text-purple-600"}),n.jsx("span",{className:"text-gray-900 dark:text-white",children:fe.name}),n.jsx("button",{onClick:()=>Ie(null),className:"p-1 hover:bg-gray-200 rounded",children:n.jsx(_r,{className:"w-4 h-4 text-gray-500"})})]}):n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(zC,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag & drop a JD file or click to upload"}),n.jsx("p",{className:"text-sm text-gray-500",children:"PDF, DOCX | Max 5MB"}),n.jsx("input",{type:"file",accept:".pdf,.docx,.doc",onChange:Mt,className:"hidden"})]})}),n.jsx("div",{className:"text-center text-gray-500 my-4",children:"OR"}),n.jsx("textarea",{placeholder:"Paste raw JD text here...",value:ce,onChange:U=>Ce(U.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{type:"button",onClick:Bt,disabled:sr||!fe&&!ce.trim(),className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:sr?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Parsing JD..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"w-4 h-4"}),"Parse JD"]})})]}),P==="manual"&&n.jsxs("form",{onSubmit:U=>Ps(U,"open"),className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ve.title,onChange:U=>Ue("title",U.target.value),onBlur:()=>Be("title"),maxLength:80,placeholder:"e.g., Senior SAP FICO Consultant",className:tt("title")}),Ge("title")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("title")}),Re.duplicate&&!Ge("title")&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:Re.duplicate})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Client ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:ve.client_id,onChange:U=>{const de=U.target.value,Fe=rt.find($e=>String($e.id)===String(de));Ue("client_id",de),je($e=>({...$e,client_name:(Fe==null?void 0:Fe.client_name)||(Fe==null?void 0:Fe.name)||""}))},onBlur:()=>te("client_id"),className:tt("client_id"),children:[n.jsx("option",{value:"",children:"Select Client"}),rt.map(U=>n.jsx("option",{value:U.id,children:U.client_name||U.name},U.id))]}),Ge("client_id")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("client_id")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client TA (Contact)"}),n.jsx("input",{type:"text",value:ve.client_ta,onChange:U=>Ue("client_ta",U.target.value),onBlur:()=>Be("client_ta"),maxLength:60,placeholder:"Client's HR/TA contact name",className:tt("client_ta")}),Ge("client_ta")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("client_ta")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:ve.mode,onChange:U=>Ue("mode",U.target.value),onBlur:()=>te("mode"),className:tt("mode"),children:j0.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),Ge("mode")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("mode")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience (Years) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"text",value:ve.experience_min,onChange:U=>Ue("experience_min",U.target.value),onBlur:()=>te("experience_min"),placeholder:"Min (0-30)",className:tt("experience_min","experience")}),n.jsx("input",{type:"text",value:ve.experience_max,onChange:U=>Ue("experience_max",U.target.value),onBlur:()=>te("experience_max"),placeholder:"Max (0-30)",className:tt("experience_max","experience")})]}),Ge("experience_min","experience")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("experience_min","experience")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location"," ",ve.mode!=="remote"&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ve.location,onChange:U=>Ue("location",U.target.value),onBlur:()=>Be("location"),maxLength:100,disabled:ve.mode==="remote",placeholder:"e.g., Bengaluru, India",className:tt("location",null,ve.mode==="remote"?"opacity-80 cursor-not-allowed":"")}),Ge("location")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("location")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),n.jsxs("select",{value:ve.duration,onChange:U=>Ue("duration",U.target.value),onBlur:()=>te("duration"),className:tt("duration"),children:[n.jsx("option",{value:"",children:"Select Duration"}),q4.map(U=>n.jsx("option",{value:U,children:U},U))]}),Ge("duration")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("duration")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Number of Positions ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ve.no_of_positions,onChange:U=>Ue("no_of_positions",U.target.value),onBlur:()=>te("no_of_positions"),placeholder:"1 - 500",className:tt("no_of_positions")}),Ge("no_of_positions")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("no_of_positions")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Budget / CTC"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("select",{value:ve.ctc_currency,onChange:U=>Ue("ctc_currency",U.target.value),onBlur:()=>te("ctc_currency"),className:tt("ctc_currency","ctc_range"),children:uV.map(U=>n.jsx("option",{value:U,children:U},U))}),n.jsx("input",{type:"text",value:ve.ctc_min,onChange:U=>Ue("ctc_min",U.target.value),onBlur:()=>te("ctc_min"),placeholder:"Min CTC",className:tt("ctc_min","ctc_range")}),n.jsx("input",{type:"text",value:ve.ctc_max,onChange:U=>Ue("ctc_max",U.target.value),onBlur:()=>te("ctc_max"),placeholder:"Max CTC",className:tt("ctc_max","ctc_range")})]}),Ge("ctc_min","ctc_range")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("ctc_min","ctc_range")}),!Ge("ctc_min","ctc_range")&&Re.ctc_range&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:Re.ctc_range})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Timings"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"time",value:ve.work_start_time,onChange:U=>Ue("work_start_time",U.target.value),onBlur:()=>te("work_start_time"),className:tt("work_start_time","work_timings")}),n.jsx("input",{type:"time",value:ve.work_end_time,onChange:U=>Ue("work_end_time",U.target.value),onBlur:()=>te("work_end_time"),className:tt("work_end_time","work_timings")})]}),Ge("work_start_time","work_timings")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("work_start_time","work_timings")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Joining Preference"}),n.jsxs("select",{value:ve.joining_preference,onChange:U=>Ue("joining_preference",U.target.value),onBlur:()=>te("joining_preference"),className:tt("joining_preference"),children:[n.jsx("option",{value:"",children:"Select Joining Preference"}),G4.map(U=>n.jsx("option",{value:U,children:U},U))]}),Ge("joining_preference")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("joining_preference")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Skills ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:ve.skills.map((U,de)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300 rounded-full text-sm",children:[U,n.jsx("button",{type:"button",onClick:()=>B(U),children:n.jsx(_r,{className:"w-3 h-3"})})]},de))}),n.jsxs("div",{className:"flex gap-2 relative",children:[n.jsx("input",{ref:ot,type:"text",value:Ye,onChange:U=>re(U.target.value),onKeyDown:st,onFocus:()=>{Pe.length>0&&qe(!0)},onBlur:()=>{te("skills"),setTimeout(()=>qe(!1),100)},placeholder:"Type a skill and press Enter",className:tt("skills")}),n.jsx("button",{type:"button",onClick:Je,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300",children:n.jsx(bi,{className:"w-5 h-5"})}),We&&Pe.length>0&&n.jsx("div",{ref:Ct,className:"absolute z-20 top-[42px] left-0 right-14 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-44 overflow-y-auto",children:Pe.map(U=>n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onMouseDown:de=>de.preventDefault(),onClick:()=>{_e([U]),at(""),qe(!1),et([])},children:U},U))})]}),n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[ve.skills.length,"/30 skills added"]}),Ge("skills")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("skills")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:ve.jd_text,onChange:U=>Ue("jd_text",U.target.value),onBlur:()=>Be("jd_text"),rows:8,placeholder:"Enter the full job description...",className:tt("jd_text")}),Ge("jd_text")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("jd_text")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes for Recruiter (Internal)"}),n.jsx("textarea",{value:ve.notes_for_recruiter,onChange:U=>Ue("notes_for_recruiter",U.target.value),onBlur:()=>Be("notes_for_recruiter"),rows:3,placeholder:"Private instructions for assigned recruiters...",className:tt("notes_for_recruiter")}),Ge("notes_for_recruiter")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ge("notes_for_recruiter")})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("button",{type:"button",onClick:()=>{v(!1),yr()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:U=>Ps(U,"draft"),disabled:Wt||!le,className:"px-4 py-2 border border-purple-600 text-purple-600 rounded-lg hover:bg-purple-50 disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:Wt||!le,className:"flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:Wt?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),At?"Updating...":"Creating..."]}):At?"Update Job":"Publish Job"})]})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Job Posting"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Create an external job posting for candidates"})]}),n.jsx("button",{onClick:()=>{j(!1),Tr()},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(_r,{className:"w-5 h-5 text-gray-500"})})]}),yt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Ks,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:yt}),n.jsx("button",{onClick:()=>ut(null),className:"ml-auto",children:n.jsx(_r,{className:"w-4 h-4 text-red-600"})})]}),n.jsxs("form",{onSubmit:U=>vt(U,"active"),className:"p-6",children:[n.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Existing Job (Optional)"}),n.jsxs("select",{value:ie.job_id,onChange:U=>{const de=U.target.value;if(de){const Fe=r.find($e=>$e.id===de||$e.id===Number(de));Fe&&se($e=>{var xt;return{...$e,job_id:de,title:Fe.job_title||Fe.title||"",client_display_name:((xt=Fe.client)==null?void 0:xt.client_name)||Fe.client_name||"",jd_content:Fe.jd_text||Fe.description||"",ctc:Fe.budget||"",location:Fe.location||"",mode:Fe.mode||"hybrid",experience:Fe.experience||"",skills:Fe.skills||[]}})}else ct("job_id","")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"-- Create standalone posting --"}),r.map(U=>{var de;return n.jsxs("option",{value:U.id,children:[U.job_title||U.title," -"," ",((de=U.client)==null?void 0:de.client_name)||U.client_name||"Unknown"]},U.id)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Posting Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ie.title,onChange:U=>ct("title",U.target.value),onBlur:U=>ct("title",nn(qt(U.target.value))),required:!0,placeholder:"e.g., Senior Software Engineer",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Company Display Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ie.client_display_name,onChange:U=>ct("client_display_name",U.target.value),onBlur:U=>ct("client_display_name",Vt(U.target.value)),required:!0,placeholder:"e.g., Leading IT MNC",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ie.location,onChange:U=>ct("location",U.target.value),onBlur:U=>ct("location",nn(qt(U.target.value))),required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Mode"}),n.jsxs("select",{value:ie.mode,onChange:U=>ct("mode",U.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Experience"}),n.jsx("input",{type:"text",value:ie.experience,onChange:U=>ct("experience",U.target.value),onBlur:U=>ct("experience",Vt(U.target.value)),placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"CTC / Salary Range"}),n.jsx("input",{type:"text",value:ie.ctc,onChange:U=>ct("ctc",U.target.value),onBlur:U=>ct("ctc",Vt(U.target.value)),placeholder:"e.g., INR 15-20 LPA",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Last Date to Apply ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:ie.last_date_to_apply,onChange:U=>ct("last_date_to_apply",U.target.value),required:!0,min:dt,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:ie.skills.map((U,de)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[U,n.jsx("button",{type:"button",onClick:()=>Ft(U),children:n.jsx(_r,{className:"w-3 h-3"})})]},de))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:pe,onChange:U=>ye(U.target.value),onKeyPress:pt,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{type:"button",onClick:Ee,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg",children:n.jsx(bi,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:ie.jd_content,onChange:U=>ct("jd_content",U.target.value),onBlur:U=>ct("jd_content",Vt(U.target.value)),required:!0,rows:8,placeholder:"Enter the job description that will be visible to candidates...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This description will be visible to candidates. Remove any confidential information."})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),Tr()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:U=>vt(U,"draft"),disabled:Wt,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:Wt,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:Wt?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Publishing..."]}):"Publish Posting"})]})]})]})}),N&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Import from Email"}),n.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(_r,{className:"w-5 h-5 text-gray-500"})})]}),yt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Ks,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:yt})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white min-h-[200px]",placeholder:"Paste raw email content here...",value:z,onChange:U=>Te(U.target.value),onBlur:U=>Te(Vt(U.target.value))}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>w(!1),children:"Cancel"}),n.jsx("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",onClick:gn,disabled:sr||!z.trim(),children:sr?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Parsing..."]}):"Parse Requirement"})]})]})]})}),S&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Assign Recruiters"}),n.jsxs("p",{className:"text-purple-200 text-sm mt-1",children:["Job: ",n.jsx("span",{className:"font-semibold",children:L})]})]}),n.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(_r,{className:"w-6 h-6 text-white"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Available Recruiters"}),n.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:[ue.length," Total"]})]}),ue.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(Hr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No recruiters available"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ue.map(U=>{var Fe;const de=H.includes(U.id);return n.jsxs("div",{onClick:()=>Ne(U.id),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${de?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-200":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-purple-300"}`,children:[de&&n.jsx(yc,{className:"absolute top-3 right-3 text-purple-600",size:20}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 flex items-center justify-center font-bold text-sm",children:((Fe=U.full_name)==null?void 0:Fe.charAt(0))||"R"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:U.full_name}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:U.email})]})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400",children:[n.jsx(ua,{size:14}),n.jsxs("span",{children:[U.workload||0," Active Jobs"]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${U.status==="busy"?"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:U.status||"available"})]}),U.specialization&&U.specialization.length>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-1",children:U.specialization.slice(0,3).map($e=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-[10px]",children:$e},$e))})]},U.id)})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5 space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"SLA & Targets"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"1st CV Deadline (Days)"}),n.jsx("input",{type:"number",value:D,onChange:U=>Y(U.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target CV Count"}),n.jsx("input",{type:"number",value:M,onChange:U=>X(U.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"1"})]})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 flex gap-3",children:[n.jsx(Ks,{className:"text-blue-500 shrink-0",size:20}),n.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 leading-relaxed",children:["Assigning multiple recruiters activates"," ",n.jsx("b",{children:"competitive sourcing mode"}),". First to submit quality profiles wins the slot."]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[n.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:["Selected (",H.length,")"]}),n.jsxs("ul",{className:"space-y-2 max-h-40 overflow-y-auto",children:[ue.filter(U=>H.includes(U.id)).map(U=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:U.full_name}),n.jsx("button",{onClick:de=>{de.stopPropagation(),Ne(U.id)},className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},U.id)),H.length===0&&n.jsx("li",{className:"text-sm text-gray-400 italic",children:"No recruiters selected"})]})]})]})]})}),n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-between",children:[n.jsx("button",{onClick:()=>E(!1),className:"px-5 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),n.jsx("button",{onClick:me,disabled:ne||H.length===0,className:`px-6 py-2.5 rounded-lg font-semibold transition-all flex items-center gap-2 ${ne||H.length===0?"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-200 dark:shadow-purple-900/30"}`,children:ne?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Hr,{className:"w-4 h-4"}),"Assign ",H.length," Recruiter",H.length!==1?"s":""]})})]})]})})]})}const mV=new Set(["selected","rejected","negotiation","hired","offer_declined"]),yg=({stage:e})=>{const t=e?e.replace(/_/g," "):"",r=mV.has(e)?"bg-gray-100 text-gray-700":e==="client_shortlisted"?"bg-emerald-100 text-emerald-700":e==="am_shortlisted"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700";return n.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:t})};function pF(){var ne;const{id:e}=Or(),[t,r]=y.useState(!0),[s,a]=y.useState(null),[i,l]=y.useState("submissions"),[o,c]=y.useState([]),[d,u]=y.useState(!1),[f,m]=y.useState([]),[g,x]=y.useState(""),[h,p]=y.useState({open:!1,submissionId:null,stage:"",title:""}),[v,b]=y.useState({rating:4,strengths:"",concerns:"",free_text:""}),[j,N]=y.useState({open:!1,submissionId:null}),[w,_]=y.useState("selected"),[k,C]=y.useState(""),T=async()=>{var J;r(!0);try{const ue=await Cs.getAmRequirementDetail(e);a(ue)}catch(ue){console.error("Failed to load from workflow API, trying job-management...",ue);try{const ke=await G.get(`/v1/job-management/requirements/${e}`),ve=((J=ke.data)==null?void 0:J.job)||ke.data;ve&&a({requirement:{id:ve.id,title:ve.title||ve.job_title,description:ve.description||ve.jd_text,client_name:ve.client_name||null,client_contact:ve.client_ta,status:ve.status,skills_mandatory:ve.skills||[],skills_good_to_have:[],experience_min:ve.min_experience||0,experience_max:ve.max_experience,location_details:{city:ve.location,type:ve.mode},positions_count:ve.no_of_positions||1,budget:ve.budget,duration:ve.duration,work_timings:ve.work_timings,joining_preference:ve.joining_preference,notes_for_recruiter:ve.notes_for_recruiter,mode:ve.mode,jd_text:ve.jd_text||ve.description,created_at:ve.created_at,updated_at:ve.updated_at},assignments:ve.assignments||[],submissions:[]})}catch(ke){console.error("Fallback also failed:",ke)}}finally{r(!1)}},P=async()=>{try{const J=await G.get("/v1/am/recruiters");c(J.data||[])}catch(J){console.error("Failed to load recruiters",J)}};y.useEffect(()=>{T(),P()},[]);const A=s==null?void 0:s.requirement,S=(s==null?void 0:s.submissions)||[],E=(s==null?void 0:s.assignments)||[],O=y.useMemo(()=>S.filter(J=>["recruiter_review","sent_to_am","am_shortlisted","am_rejected"].includes(J.stage)),[S]),I=y.useMemo(()=>S.filter(J=>["sent_to_client","client_shortlisted","client_rejected"].includes(J.stage)),[S]),L=y.useMemo(()=>S.filter(J=>["client_shortlisted","interview_scheduled","interview_completed"].includes(J.stage)),[S]),Z=y.useMemo(()=>S.filter(J=>mV.has(J.stage)),[S]),H=(J,ue,ke)=>{p({open:!0,submissionId:J,stage:ue,title:ke}),b({rating:4,strengths:"",concerns:"",free_text:""})},R=async()=>{if(h.submissionId)try{await Cs.updateSubmissionStage(h.submissionId,{stage:h.stage,...v}),p({open:!1,submissionId:null,stage:"",title:""}),T()}catch(J){console.error("Failed to add note",J),alert("Failed to add note")}},D=async(J,ue)=>{try{await Cs.updateSubmissionStage(J,{stage:ue}),T()}catch(ke){console.error("Stage update failed",ke),alert("Stage update failed")}},Y=async()=>{if(j.submissionId)try{await Cs.updateSubmissionStage(j.submissionId,{stage:w,free_text:k||void 0,rating:k?4:void 0}),N({open:!1,submissionId:null}),C(""),T()}catch(J){console.error("Failed to update decision",J),alert("Failed to update decision")}},M=async()=>{if(f.length!==0)try{await Cs.assignRecruiters(e,{recruiter_ids:f,notes:g}),m([]),x(""),u(!1),T()}catch(J){console.error("Failed to assign recruiter",J),alert("Failed to assign recruiter")}},X=(J,ue)=>{const ke=J.filter(ve=>ve.note_stage===ue);return ke.length?ke[ke.length-1]:null};return t?n.jsx("p",{children:"Loading requirement..."}):A?n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded shadow",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Requirement Info"}),n.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Title:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.title})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Client:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.client_name||""})]}),A.client_contact&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Client TA:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.client_contact})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Status:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:Vs(A.status)})]}),A.mode&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Mode:"})," ",n.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded text-xs uppercase",children:A.mode})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Experience:"})," ",n.jsxs("span",{className:"text-gray-900 dark:text-white",children:[A.experience_min||0," -"," ",A.experience_max||""," yrs"]})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Location:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:((ne=A.location_details)==null?void 0:ne.city)||A.location_details||""})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Positions:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.positions_count||1})]}),A.budget&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Budget:"})," ",n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:A.budget})]}),(A.ctc_min||A.ctc_max)&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"CTC Range:"})," ",n.jsxs("span",{className:"text-gray-900 dark:text-white",children:[A.ctc_min||""," - ",A.ctc_max||""]})]}),A.duration&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Duration:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.duration})]}),A.work_timings&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Work Timings:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.work_timings})]}),(A.urgency||A.joining_preference)&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Joining:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.joining_preference||A.urgency})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Skills:"}),n.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(A.skills_mandatory||[]).map((J,ue)=>n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-xs",children:typeof J=="string"?J:(J==null?void 0:J.name)||J},ue)),(A.skills_good_to_have||[]).map((J,ue)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs",children:typeof J=="string"?J:(J==null?void 0:J.name)||J},`gth-${ue}`))]})]}),(A.description||A.jd_text)&&n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Job Description:"}),n.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg whitespace-pre-wrap",children:A.jd_text||A.description})]}),A.notes_for_recruiter&&n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Notes for Recruiter:"}),n.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-200 dark:border-amber-800",children:A.notes_for_recruiter})]})]}),n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Assignments"}),n.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400",onClick:()=>u(!0),children:"Assign Recruiter"})]}),n.jsx("div",{className:"mt-3 space-y-2 text-sm",children:E.length===0?n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recruiters assigned"}):E.map(J=>n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:J.recruiter_name||"Recruiter"}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",new Date(J.assigned_at).toLocaleDateString()]}),J.notes&&n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:J.notes})]},J.id))})]})]}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("div",{className:"flex gap-2 mb-4",children:[{key:"submissions",label:"Recruiter Submissions"},{key:"client",label:"Sent to Client"},{key:"interviews",label:"Interview Stage"},{key:"closed",label:"Closed"}].map(J=>n.jsx("button",{onClick:()=>l(J.key),className:`px-3 py-2 rounded text-sm font-medium ${i===J.key?"bg-purple-600 text-white":"bg-gray-100 text-gray-600"}`,children:J.label},J.key))}),i==="submissions"&&n.jsx("div",{className:"space-y-3",children:O.length===0?n.jsx("p",{className:"text-gray-500",children:"No submissions yet."}):O.map(J=>{const ue=X(J.notes,"call_feedback");return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:J.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",J.match_score||0,"%"]})]}),n.jsx(yg,{stage:J.stage})]}),ue&&n.jsxs("div",{className:"mt-3 bg-gray-50 p-3 rounded text-sm",children:[n.jsx("p",{className:"font-medium",children:"Recruiter Call Feedback"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Rating: ",ue.rating||""]}),n.jsx("p",{className:"mt-1",children:ue.free_text})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[J.stage==="recruiter_review"||J.stage==="sent_to_am"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>D(J.id,"am_shortlisted"),children:"AM Shortlist"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded text-xs",onClick:()=>D(J.id,"am_rejected"),children:"AM Reject"})]}):null,n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>H(J.id,J.stage,"Add AM Feedback"),children:"Add AM Feedback"}),J.stage==="am_shortlisted"&&n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>D(J.id,"sent_to_client"),children:"Send to Client"})]})]},J.id)})}),i==="client"&&n.jsx("div",{className:"space-y-3",children:I.length===0?n.jsx("p",{className:"text-gray-500",children:"No candidates sent to client yet."}):I.map(J=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:J.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",J.match_score||0,"%"]})]}),n.jsx(yg,{stage:J.stage})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[J.stage==="sent_to_client"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>D(J.id,"client_shortlisted"),children:"Client Shortlisted"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded text-xs",onClick:()=>D(J.id,"client_rejected"),children:"Client Rejected"})]}),n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>H(J.id,J.stage,"Add Client Feedback"),children:"Add Client Feedback"})]})]},J.id))}),i==="interviews"&&n.jsx("div",{className:"space-y-3",children:L.length===0?n.jsx("p",{className:"text-gray-500",children:"No candidates in interview stage."}):L.map(J=>{var ke;const ue=(ke=J.interviews)==null?void 0:ke[0];return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:J.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",J.match_score||0,"%"]})]}),n.jsx(yg,{stage:J.stage})]}),ue&&n.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Scheduled: ",ue.interview_date," ",ue.interview_time," (",ue.interview_mode,")"]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[ue&&!ue.client_informed&&n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>Cs.markClientInformed(ue.id).then(T),children:"Mark Client Informed"}),n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>N({open:!0,submissionId:J.id}),children:"Enter Final Decision"})]})]},J.id)})}),i==="closed"&&n.jsx("div",{className:"space-y-3",children:Z.length===0?n.jsx("p",{className:"text-gray-500",children:"No closed candidates yet."}):Z.map(J=>n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:J.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Final Stage"})]}),n.jsx(yg,{stage:J.stage})]})},J.id))})]})]}),d&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Assign Recruiters"}),n.jsx("button",{className:"text-gray-500",onClick:()=>u(!1),children:"Close"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-auto border rounded p-2",children:o.map(J=>n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(J.id),onChange:()=>m(ue=>ue.includes(J.id)?ue.filter(ke=>ke!==J.id):[...ue,J.id])}),J.full_name||J.email]},J.id))}),n.jsx("textarea",{className:"w-full p-2 border rounded mt-3",placeholder:"Notes for recruiter",value:g,onChange:J=>x(J.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>u(!1),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded",onClick:M,children:"Assign"})]})]})}),h.open&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:h.title}),n.jsx("button",{className:"text-gray-500",onClick:()=>p({open:!1,submissionId:null,stage:"",title:""}),children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",className:"w-full p-2 border rounded",value:v.rating,onChange:J=>b(ue=>({...ue,rating:Number(J.target.value)}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Strengths"}),n.jsx("input",{className:"w-full p-2 border rounded",value:v.strengths,onChange:J=>b(ue=>({...ue,strengths:J.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Concerns"}),n.jsx("input",{className:"w-full p-2 border rounded",value:v.concerns,onChange:J=>b(ue=>({...ue,concerns:J.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:v.free_text,onChange:J=>b(ue=>({...ue,free_text:J.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>p({open:!1,submissionId:null,stage:"",title:""}),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:R,children:"Save Note"})]})]})}),j.open&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Final Decision"}),n.jsx("button",{className:"text-gray-500",onClick:()=>N({open:!1,submissionId:null}),children:"Close"})]}),n.jsx("label",{className:"text-sm font-medium",children:"Decision"}),n.jsxs("select",{className:"w-full p-2 border rounded mt-1",value:w,onChange:J=>_(J.target.value),children:[n.jsx("option",{value:"selected",children:"Selected"}),n.jsx("option",{value:"rejected",children:"Rejected"}),n.jsx("option",{value:"negotiation",children:"Negotiation"}),n.jsx("option",{value:"hired",children:"Hired"}),n.jsx("option",{value:"offer_declined",children:"Offer Declined"})]}),n.jsx("label",{className:"text-sm font-medium mt-3 block",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:k,onChange:J=>C(J.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>N({open:!1,submissionId:null}),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:Y,children:"Save Decision"})]})]})})]}):n.jsx("p",{children:"Requirement not found"})}function xF(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState(7),[u,f]=y.useState(5),[m,g]=y.useState(!0),[x,h]=y.useState(!1);y.useEffect(()=>{p()},[]);const p=async()=>{var j,N;try{g(!0);const[w,_]=await Promise.all([G.get("/v1/am/recruiters"),G.get(`/v1/recruiter/jobs/${e}`)]);i(((j=w.data)==null?void 0:j.data)||[]),s(_.data),(N=_.data)!=null&&N.recruiters&&o(_.data.recruiters.map(k=>k.id))}catch(w){console.error("Failed to load assignment data:",w)}finally{g(!1)}},v=j=>{o(N=>N.includes(j)?N.filter(w=>w!==j):[...N,j])},b=async()=>{if(l.length===0){alert("Please select at least one recruiter");return}try{h(!0);const j=(r==null?void 0:r.requirement_id)||(r==null?void 0:r.id);await G.post("/v1/am/requirements/assign",{requirement_id:j,recruiter_ids:l,sla_deadline_days:parseInt(c),target_cv_count:parseInt(u)}),alert("Recruiters Assigned & SLA Set! "),t(-1)}catch(j){console.error("Assignment failed:",j),alert("Failed to assign. Check console.")}finally{h(!1)}};return m?n.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading recruiters..."}):n.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assign Recruiters"}),n.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Job: ",n.jsx("span",{className:"font-semibold text-purple-700",children:r==null?void 0:r.title})," (",r==null?void 0:r.job_id,")"]})]}),n.jsx("button",{onClick:()=>t(-1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Cancel"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-gray-400",children:"Available Recruiters"}),n.jsxs("span",{className:"text-xs text-gray-500",children:[a.length," Total"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(j=>{var w,_;const N=l.includes(j.id);return n.jsxs("div",{onClick:()=>v(j.id),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${N?"border-purple-600 bg-purple-50 ring-2 ring-purple-100":"border-gray-100 bg-white hover:border-gray-300"}`,children:[N&&n.jsx(ep,{className:"absolute top-3 right-3 text-purple-600",size:20}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 text-purple-700 flex items-center justify-center font-bold text-sm",children:((w=j.full_name)==null?void 0:w.charAt(0))||"R"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:j.full_name}),n.jsx("p",{className:"text-xs text-gray-500",children:j.email})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-gray-600",children:[n.jsx(ua,{size:14,className:"text-gray-400"}),n.jsxs("span",{children:[j.workload," Active Jobs"]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${j.status==="busy"?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600"}`,children:j.status})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex flex-wrap gap-1",children:((_=j.specialization)==null?void 0:_.map(k=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-[10px] font-medium",children:k},k)))||n.jsx("span",{className:"text-[10px] text-gray-400",children:"No specialization data"})})]},j.id)})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm space-y-6",children:[n.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-gray-400",children:"SLA & Targets"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1st CV Deadline (Days)"}),n.jsxs("div",{className:"relative",children:[n.jsx(pn,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),n.jsx("input",{type:"number",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"7"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target CV Count"}),n.jsxs("div",{className:"relative",children:[n.jsx(lm,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),n.jsx("input",{type:"number",value:u,onChange:j=>f(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"5"})]})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl flex gap-3",children:[n.jsx(Ks,{className:"text-blue-500 shrink-0",size:20}),n.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed",children:["Assigning multiple recruiters activates ",n.jsx("b",{children:"competitive sourcing mode"}),". First to submit quality profiles wins the slot."]})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{onClick:b,disabled:x||l.length===0,className:`w-full py-3 rounded-xl font-bold text-sm transition-all ${x||l.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-100"}`,children:x?"Processing...":`Assign ${l.length} Recruiter${l.length>1?"s":""}`})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[n.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Selection Summary"}),n.jsxs("ul",{className:"space-y-2",children:[a.filter(j=>l.includes(j.id)).map(j=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-700 font-medium",children:j.full_name}),n.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-100 px-2 py-0.5 rounded uppercase",children:"Selected"})]},j.id)),l.length===0&&n.jsx("li",{className:"text-sm text-gray-400 italic",children:"No recruiters selected"})]})]})]})]})]})}function MUe(){const{jobId:e}=Or(),[t,r]=y.useState(!0),[s,a]=y.useState([]),i=async()=>{try{const l=await G.get("/v1/am/recruiter-submissions",{params:{job_id:e}});a(l.data.submissions||[])}catch(l){console.error("Failed to load submissions:",l),alert("Failed to fetch recruiter submissions")}finally{r(!1)}};return y.useEffect(()=>{i()},[]),t?n.jsx("h2",{children:"Loading..."}):n.jsxs("div",{className:"p-6 bg-white shadow rounded",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Recruiter Submissions  Job: ",e]}),s.length?n.jsxs("table",{className:"w-full border",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 border",children:"Candidate"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Status"}),n.jsx("th",{className:"p-2 border",children:"Fit Score"}),n.jsx("th",{className:"p-2 border",children:"Submitted"})]})}),n.jsx("tbody",{children:s.map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:l.candidate_name}),n.jsx("td",{className:"border p-2",children:l.email}),n.jsx("td",{className:"border p-2",children:Vs(l.status)}),n.jsx("td",{className:"border p-2",children:l.fit_score||"N/A"}),n.jsx("td",{className:"border p-2",children:Bp(l.submitted_at)})]},l.application_id))})]}):n.jsx("p",{children:"No submissions found"})]})}const gF=[{id:"cookieman",name:"CookieMan"},{id:"itc_infotech",name:"ITC Infotech"},{id:"itc_ltd",name:"ITC Ltd"},{id:"tcl",name:"TCL"},{id:"tctsl",name:"TCTSL"}],yF={sent_to_am:{label:"Sent to AM",color:"bg-teal-100 text-teal-700",icon:Ai},am_viewed:{label:"Sent to AM",color:"bg-cyan-100 text-cyan-700",icon:il},am_shortlisted:{label:"AM Shortlisted",color:"bg-green-100 text-green-700",icon:lm},am_hold:{label:"AM Hold",color:"bg-amber-100 text-amber-700",icon:pn},am_rejected:{label:"AM Rejected",color:"bg-red-100 text-red-700",icon:Ja},sent_to_client:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:Ai},client_viewed:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:il},client_shortlisted:{label:"Client Shortlisted",color:"bg-green-100 text-green-700",icon:Ci},client_hold:{label:"Client Hold",color:"bg-amber-100 text-amber-700",icon:pn},client_rejected:{label:"Client Rejected",color:"bg-red-100 text-red-700",icon:Ja},interview_scheduled:{label:"Interview Scheduled",color:"bg-violet-100 text-violet-700",icon:Ya},interview_completed:{label:"Interview Done",color:"bg-violet-100 text-violet-700",icon:Ci},selected:{label:"Selected",color:"bg-emerald-100 text-emerald-700",icon:lm},negotiation:{label:"Negotiation",color:"bg-yellow-100 text-yellow-700",icon:Up},hired:{label:"Hired",color:"bg-green-100 text-green-700",icon:oU}},Zc=[{id:"inbox",label:"Inbox (Sent to AM)",statuses:["sent_to_am","am_viewed"],icon:Ai},{id:"shortlisted",label:"AM Shortlisted",statuses:["am_shortlisted"],icon:lm},{id:"am_hold",label:"AM Hold",statuses:["am_hold"],icon:pn},{id:"rejected",label:"AM Rejected",statuses:["am_rejected"],icon:Ja},{id:"sent_to_client",label:"Sent to Client",statuses:["sent_to_client"],icon:am},{id:"client_shortlisted",label:"Client Shortlisted",statuses:["client_shortlisted"],icon:Ci},{id:"interview_scheduled",label:"Interview Scheduled",statuses:["interview_scheduled","interview_completed"],icon:Ya},{id:"client_hold",label:"Client Hold",statuses:["client_hold"],icon:pn},{id:"client_rejected",label:"Client Rejected",statuses:["client_rejected"],icon:Ja}],BUe=new Set(["closed","cancelled","canceled","archived","inactive","deleted","filled","completed"]),Er=e=>{const t=String(e||"").trim().toLowerCase();if(!t)return"";const r=t.replace(/[\s-]+/g,"_");return r==="hold_revisit"?"am_hold":r==="am_viewed"?"sent_to_am":r==="client_viewed"?"sent_to_client":r.startsWith("interview_schedule")?"interview_scheduled":r.startsWith("interview_complete")?"interview_completed":r},ew=Array.from(new Set(Zc.flatMap(e=>e.statuses.map(t=>Er(t))))),tw=15e3,UUe=8e3,zUe=60,vF=8,Jt=e=>String(e||"").trim().toLowerCase(),WUe=/^[a-z]{2,6}-c-\d{3,}$/i,VUe=e=>WUe.test(String(e||"").trim()),d0=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=new Set([e==null?void 0:e.application_id,e==null?void 0:e.applicationId,t==null?void 0:t.application_id,t==null?void 0:t.applicationId].map(a=>Jt(a)).filter(Boolean)),s=[e==null?void 0:e.candidate_uuid,t==null?void 0:t.candidate_uuid,e==null?void 0:e.candidate_id,t==null?void 0:t.candidate_id,e==null?void 0:e.id,t==null?void 0:t.id];for(const a of s){const i=String(a||"").trim();if(i&&!r.has(Jt(i))&&!VUe(i))return i}return""},Ia=e=>String(e||"").trim().toLowerCase().replace(/\s+/g,"_"),vg=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),bg=e=>Array.isArray(e)?e:Array.isArray(e==null?void 0:e.requirements)?e.requirements:Array.isArray(e==null?void 0:e.jobs)?e.jobs:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.data)?e.data:[],HUe=e=>{var i;const t=(e==null?void 0:e.job_id)||(e==null?void 0:e.requirement_id)||(e==null?void 0:e.id),r=String(t||"").trim(),s=(e==null?void 0:e.client_name)||(e==null?void 0:e.client_display_name)||(e==null?void 0:e.company_name)||((i=e==null?void 0:e.client)==null?void 0:i.name)||"",a=(e==null?void 0:e.client_id)||Ia(s);return{...e,id:r,job_id:String((e==null?void 0:e.job_id)||r||""),requirement_id:String((e==null?void 0:e.requirement_id)||r||""),title:(e==null?void 0:e.title)||(e==null?void 0:e.job_title)||(e==null?void 0:e.requirement_title)||(e==null?void 0:e.requirement_code)||"Untitled Requirement",requirement_code:(e==null?void 0:e.requirement_code)||(e==null?void 0:e.job_id)||r,client_name:s||"Client not specified",client_id:a,status:Er((e==null?void 0:e.status)||"open")}},qUe=e=>!BUe.has(Er(e==null?void 0:e.status)),GUe={sent_to_am:10,am_shortlisted:20,am_hold:30,am_rejected:40,sent_to_client:50,client_shortlisted:60,client_hold:70,client_rejected:80,interview_scheduled:90,interview_completed:100,selected:110,negotiation:120,hired:130},rb=e=>GUe[Er(e)]||0,JUe=(e=[])=>{const t=new Map;return e.forEach(r=>{const s=Jt((r==null?void 0:r.candidate_id)||(r==null?void 0:r.id)),a=Jt((r==null?void 0:r.job_id)||(r==null?void 0:r.requirement_id)),i=Jt(r==null?void 0:r.application_id),l=s&&a&&`${s}::${a}`||i||s;if(!l)return;if(!t.has(l)){t.set(l,r);return}const o=t.get(l),c=rb((o==null?void 0:o.status)||(o==null?void 0:o.stage)),d=rb((r==null?void 0:r.status)||(r==null?void 0:r.stage));if(d>c){t.set(l,r);return}if(d<c)return;const u=new Date((o==null?void 0:o.updated_at)||(o==null?void 0:o.submitted_at)||0).getTime();new Date((r==null?void 0:r.updated_at)||(r==null?void 0:r.submitted_at)||0).getTime()>=u&&t.set(l,r)}),Array.from(t.values()).sort((r,s)=>new Date((s==null?void 0:s.updated_at)||(s==null?void 0:s.submitted_at)||0).getTime()-new Date((r==null?void 0:r.updated_at)||(r==null?void 0:r.submitted_at)||0).getTime())},KUe=(e=[])=>e.reduce((t,r)=>{const s=Er((r==null?void 0:r.status)||(r==null?void 0:r.stage));return s&&(t[s]=(t[s]||0)+1),t},{}),XUe=e=>{if(!e)return{};if(typeof e=="object")return e;if(typeof e!="string")return{};try{const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch{return{}}},YUe=e=>{var t;return e?Array.isArray(e)?e:Array.isArray(e.feedbacks)?e.feedbacks:Array.isArray((t=e.data)==null?void 0:t.feedbacks)?e.data.feedbacks:Array.isArray(e.items)?e.items:e.feedback&&typeof e.feedback=="object"?[e.feedback]:[]:[]},hV=(e,t=0)=>{const r=XUe((e==null?void 0:e.meta)||(e==null?void 0:e.metadata)||(e==null?void 0:e.note_meta)||(e==null?void 0:e.payload)),s=e!=null&&e.ratings&&typeof e.ratings=="object"?e.ratings:r!=null&&r.ratings&&typeof r.ratings=="object"?r.ratings:{};return{id:(e==null?void 0:e.id)||(e==null?void 0:e.feedback_id)||(e==null?void 0:e.note_id)||`feedback-${t}`,decision:(e==null?void 0:e.decision)||(r==null?void 0:r.decision)||(e==null?void 0:e.status)||(e==null?void 0:e.note_type)||"",call_type:(e==null?void 0:e.call_type)||(r==null?void 0:r.call_type)||"Call Feedback",call_date:(e==null?void 0:e.call_date)||(e==null?void 0:e.created_at)||(e==null?void 0:e.updated_at)||(e==null?void 0:e.timestamp)||"",rating:Number((e==null?void 0:e.rating)||(r==null?void 0:r.rating)||0),ratings:s,salary_alignment:(e==null?void 0:e.salary_alignment)||(r==null?void 0:r.salary_alignment)||"",candidate_intent:(e==null?void 0:e.candidate_intent)||(r==null?void 0:r.candidate_intent)||"",strengths:(e==null?void 0:e.strengths)||(r==null?void 0:r.strengths)||"",concerns:(e==null?void 0:e.concerns)||(r==null?void 0:r.concerns)||"",additional_notes:(e==null?void 0:e.additional_notes)||(r==null?void 0:r.additional_notes)||"",rejection_reason:(e==null?void 0:e.rejection_reason)||(r==null?void 0:r.rejection_reason)||"",summary:(e==null?void 0:e.summary)||(e==null?void 0:e.free_text)||(e==null?void 0:e.note)||(e==null?void 0:e.note_text)||(e==null?void 0:e.content)||(r==null?void 0:r.summary)||(r==null?void 0:r.free_text)||"",recruiter_name:(e==null?void 0:e.recruiter_name)||(e==null?void 0:e.created_by_name)||(e==null?void 0:e.author_name)||"",source:(e==null?void 0:e.source)||(e==null?void 0:e.note_stage)||(e!=null&&e.note_type?"note":"call_feedback")}},pV=(e=[])=>{const t=e.map((s,a)=>hV(s,a)).filter(s=>{const a=s.rating>0||Object.values(s.ratings||{}).some(i=>Number(i)>0);return!!(s.summary||s.decision||s.strengths||s.concerns||s.additional_notes||a)}),r=new Map;return t.forEach(s=>{const a=`${s.id}::${s.call_date}::${s.summary}`;r.has(a)||r.set(a,s)}),Array.from(r.values()).sort((s,a)=>{const i=new Date(s.call_date||0).getTime();return new Date(a.call_date||0).getTime()-i})},ZUe=e=>{const r=(Array.isArray(e==null?void 0:e.notes)?e.notes:[]).filter(a=>String((a==null?void 0:a.note_stage)||"").toLowerCase()==="call_feedback").map(a=>hV(a)),s=[...Array.isArray(e==null?void 0:e.feedbacks)?e.feedbacks:[],...Array.isArray(e==null?void 0:e.call_feedbacks)?e.call_feedbacks:[],...e!=null&&e.latest_call_feedback?[e.latest_call_feedback]:[],...e!=null&&e.call_feedback?[e.call_feedback]:[]];return e!=null&&e.feedback_summary&&!s.length&&!r.length&&s.push({summary:e.feedback_summary,decision:e.decision||e.feedback_decision||"Send to AM",call_date:e.submitted_at||e.updated_at||e.created_at,source:"summary"}),pV([...s,...r])},QUe=e=>{if(!e)return"Date not available";const t=new Date(e);return Number.isNaN(t.getTime())?"Date not available":t.toLocaleString()},eze=e=>{const t=e!=null&&e.ratings&&typeof e.ratings=="object"?Object.values(e.ratings).map(r=>Number(r)).filter(r=>r>0):[];return t.length>0?(t.reduce((r,s)=>r+s,0)/t.length).toFixed(1):Number(e==null?void 0:e.rating)>0?Number(e.rating).toFixed(1):""},kd=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,zt=(...e)=>{for(const t of e)if(kd(t))return typeof t=="string"?t.trim():t;return""},bF=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g,"").trim(),jF=(e,t={})=>{const r=bF(e);return r?[t==null?void 0:t.full_name,t==null?void 0:t.candidate_name,t==null?void 0:t.name,String((t==null?void 0:t.email)||"").split("@")[0],t==null?void 0:t.public_id,t==null?void 0:t.id,t==null?void 0:t.candidate_id].map(bF).filter(Boolean).some(a=>a?!!(r===a||a.length>=7&&r.includes(a)||r.length>=7&&a.includes(r)):!1):!1},tze=e=>{if(!kd(e))return"--";const t=String(e).trim();return t?/yr|year/i.test(t)?t:`${t} yrs`:"--"},J4=e=>String(e||"").trim().split(/[\s_]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),rze=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id,e==null?void 0:e.email,e==null?void 0:e.candidate_email,t==null?void 0:t.id,t==null?void 0:t.candidate_id,t==null?void 0:t.public_id,t==null?void 0:t.email,t==null?void 0:t.candidate_email];return Array.from(new Set(r.map(s=>String(s||"").trim().toLowerCase()).filter(Boolean)))},nze=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e,t];return r.some(o=>kd(zt(o==null?void 0:o.interview_id,o==null?void 0:o.next_interview_id,o==null?void 0:o.latest_interview_id,o==null?void 0:o.upcoming_interview_id)))||r.some(o=>{const c=zt(o==null?void 0:o.scheduled_at,o==null?void 0:o.interview_scheduled_at,o==null?void 0:o.next_interview_date,o==null?void 0:o.interview_date,o==null?void 0:o.interview_datetime);if(!c)return!1;const d=new Date(c).getTime();return Number.isFinite(d)&&d>0})||r.some(o=>{const c=Number(zt(o==null?void 0:o.interview_count,o==null?void 0:o.interviews_count,o==null?void 0:o.scheduled_interviews_count,o==null?void 0:o.upcoming_interviews_count,o==null?void 0:o.total_interviews)||0);return Number.isFinite(c)&&c>0})?!0:[e==null?void 0:e.interviews,t==null?void 0:t.interviews,e==null?void 0:e.interview_logs,t==null?void 0:t.interview_logs].some(o=>!Array.isArray(o)||o.length===0?!1:o.some(c=>{const d=Er((c==null?void 0:c.status)||(c==null?void 0:c.stage)||"");if(["cancelled","rejected","no_show"].includes(d))return!1;const u=zt(c==null?void 0:c.scheduled_at,c==null?void 0:c.interview_date,c==null?void 0:c.interview_datetime);if(u){const f=new Date(u).getTime();if(Number.isFinite(f)&&f>0)return!0}return kd(zt(c==null?void 0:c.id,c==null?void 0:c.interview_id,c==null?void 0:c.uuid))}))},jg=(e={},t="")=>{const r=Er(t||(e==null?void 0:e.status)||(e==null?void 0:e.stage)||"");if(r!=="interview_scheduled"||nze(e))return r;const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},a=!!zt(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready),i=String(zt(e==null?void 0:e.interview_scheduling_note,s==null?void 0:s.interview_scheduling_note)||"").trim();return!a&&i?"interview_scheduled":"client_shortlisted"},sze=(e=[])=>{const t=new Map,r=new Map,s=(a,i)=>{if(!a)return!0;const l=new Date((a==null?void 0:a.scheduledAt)||0).getTime();return new Date(i||0).getTime()>=l};return e.forEach(a=>{var f,m,g,x,h,p,v,b,j,N,w,_,k,C,T,P,A,S,E,O,I;const i=Er((a==null?void 0:a.status)||"scheduled");if(["cancelled","rejected","no_show"].includes(i))return;const l=i==="completed"?"interview_completed":"interview_scheduled",o=zt(a==null?void 0:a.scheduled_at,a==null?void 0:a.scheduledAt,a==null?void 0:a.start_time,a==null?void 0:a.start_at),c=Array.from(new Set([(f=a==null?void 0:a.candidate)==null?void 0:f.id,a==null?void 0:a.candidate_id,(m=a==null?void 0:a.candidate)==null?void 0:m.candidate_id,(g=a==null?void 0:a.candidate)==null?void 0:g.public_id,a==null?void 0:a.candidate_public_id,a==null?void 0:a.candidate_email,(x=a==null?void 0:a.candidate)==null?void 0:x.email,(p=(h=a==null?void 0:a.submission)==null?void 0:h.candidate)==null?void 0:p.id,(v=a==null?void 0:a.submission)==null?void 0:v.candidate_id,(j=(b=a==null?void 0:a.submission)==null?void 0:b.candidate)==null?void 0:j.candidate_id,(w=(N=a==null?void 0:a.submission)==null?void 0:N.candidate)==null?void 0:w.public_id,(k=(_=a==null?void 0:a.submission)==null?void 0:_.candidate)==null?void 0:k.email].map(L=>String(L||"").trim().toLowerCase()).filter(Boolean))),d=Array.from(new Set([(C=a==null?void 0:a.job)==null?void 0:C.id,a==null?void 0:a.job_id,a==null?void 0:a.requirement_id,(T=a==null?void 0:a.job)==null?void 0:T.job_id,(A=(P=a==null?void 0:a.submission)==null?void 0:P.job)==null?void 0:A.id,(S=a==null?void 0:a.submission)==null?void 0:S.job_id,(E=a==null?void 0:a.submission)==null?void 0:E.requirement_id,(I=(O=a==null?void 0:a.submission)==null?void 0:O.job)==null?void 0:I.job_id].map(L=>String(L||"").trim().toLowerCase()).filter(Boolean)));if(!c.length)return;const u={status:l,scheduledAt:o||null,interviewStatus:i,interviewId:zt(a==null?void 0:a.id,a==null?void 0:a.interview_id)};d.length>0&&c.forEach(L=>{d.forEach(Z=>{const H=`${L}::${Z}`,R=t.get(H);s(R,o)&&t.set(H,u)})}),c.forEach(L=>{const Z=r.get(L);s(Z,o)&&r.set(L,u)})}),{byCandidateJob:t,byCandidate:r}},aze=e=>{var t,r;return e?Array.isArray(e)?e:Array.isArray(e==null?void 0:e.interview_logs)?e.interview_logs:Array.isArray((t=e==null?void 0:e.data)==null?void 0:t.interview_logs)?e.data.interview_logs:Array.isArray(e==null?void 0:e.interviews)?e.interviews:Array.isArray((r=e==null?void 0:e.data)==null?void 0:r.interviews)?e.data.interviews:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.data)?e.data:[]:[]},_F={shortlisted:{label:"Shortlisted",icon:Ci,markerClass:"bg-green-50 border-green-200 text-green-700",badgeClass:"bg-green-50 border-green-200 text-green-700",latestClass:"ring-2 ring-green-200 border-green-200 shadow-md"},sent:{label:"Sent to Client",icon:Ai,markerClass:"bg-blue-50 border-blue-200 text-blue-700",badgeClass:"bg-blue-50 border-blue-200 text-blue-700",latestClass:"ring-2 ring-blue-200 border-blue-200 shadow-md"},hold:{label:"On Hold",icon:pn,markerClass:"bg-orange-50 border-orange-200 text-orange-700",badgeClass:"bg-orange-50 border-orange-200 text-orange-700",latestClass:"ring-2 ring-orange-200 border-orange-200 shadow-md"},rejected:{label:"Rejected",icon:Ja,markerClass:"bg-red-50 border-red-200 text-red-700",badgeClass:"bg-red-50 border-red-200 text-red-700",latestClass:"ring-2 ring-red-200 border-red-200 shadow-md"}},ize=e=>{const t=Er(e);return t.includes("reject")?"rejected":t.includes("hold")?"hold":t.includes("shortlist")||["selected","hired","joined","offer_accepted"].includes(t)?"shortlisted":"sent"},lze=(e={})=>{const t=Er(e==null?void 0:e.status);if(t==="am_rejected")return"Account Manager";if(t==="client_rejected")return"Client";const r=J4(zt(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")||String(zt(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name,e==null?void 0:e.created_by_name)).trim().toLowerCase().includes("client")?"Client":""},K4=(e={})=>{const t=J4(zt(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();if(t.includes("account manager"))return"Account Manager";if(t.includes("client"))return"Client";if(t.includes("recruiter"))return"Recruiter";if(t.includes("candidate"))return"Candidate";const r=String(zt(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name,e==null?void 0:e.created_by_name)).trim().toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")?"Client":r.includes("recruiter")?"Recruiter":r.includes("candidate")?"Candidate":""},oze=(e={})=>{const t=Er(e==null?void 0:e.status);return t==="am_hold"||t==="hold_revisit"?"Account Manager":t==="client_hold"?"Client":K4(e)},cze=(e={})=>{const t=Er(e==null?void 0:e.status);return t==="am_shortlisted"?"Account Manager":t==="client_shortlisted"?"Client":K4(e)},dze=(e={})=>{const t=Er(e==null?void 0:e.status),r=K4(e);return r||(t==="sent_to_client"?"Account Manager":t==="sent_to_am"?"Recruiter":t==="client_viewed"?"Client":t==="am_viewed"?"Account Manager":"")},uze=(e={},t="sent")=>{if(t==="hold"){const s=oze(e);return s?`On Hold by ${s}`:"On Hold"}if(t==="shortlisted"){const s=cze(e);return s?`Shortlisted by ${s}`:"Shortlisted"}if(t==="sent"){const s=Er(e==null?void 0:e.status),a=dze(e);return s==="sent_to_am"||s==="am_viewed"?a&&a!=="Account Manager"?`Sent to Account Manager by ${a}`:"Sent to Account Manager":s==="sent_to_client"||s==="client_viewed"?a&&a!=="Client"?`Sent to Client by ${a}`:"Sent to Client":a?`Sent by ${a}`:"Sent"}const r=lze(e);return r?`Rejected by ${r}`:"Rejected"},fze=e=>{if(!e)return"Date unavailable";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Date unavailable";const r=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t);return`${r}  ${s}`},mze=e=>{const t=String(e||"").trim();return!t||/status\s+changed\s+from/i.test(t)||/(?:from|to)\s+[a-z]+_[a-z0-9_]+/i.test(t)||/\b[a-z]+_[a-z0-9_]+\b/i.test(t)?"":t};function hze({candidate:e,onAction:t,onViewProfile:r,onViewFeedback:s,onViewTimeline:a}){var w;const i=e.status||"sent_to_am",l=Er(i),o=yF[l]||yF.sent_to_am,c=e.is_final,d=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},u=zt(e.email,d.email,e.candidate_email),f=zt(e.phone,d.phone,e.mobile,e.phone_number),m=zt(e.current_location,e.currentLocation,e.location,e.city,e.preferred_location,d.current_location,d.location,d.city),g=zt(e.experience_years,e.experience,e.total_experience,d.experience_years,d.experience,d.total_experience),x=zt(e.current_employer,e.current_company,d.current_employer,d.current_company),h=zt(e.current_designation,e.designation,e.job_title,e.requirement_title,e.role,d.current_designation,d.designation,d.role),p=jF(x,e)?"":x,v=jF(h,e)?"":h,b=p||v,j=p?am:_o,N=zt(e.expected_ctc,e.expected_salary,e.expectedCtc,d.expected_ctc,d.expected_salary,d.expectedCtc);return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.full_name||e.candidate_name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.public_id||((w=e.id)==null?void 0:w.slice(0,8))})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.color}`,children:o.label})]}),(e.client_name||e.job_title||e.requirement_title||e.recruiter_name||e.submitted_by_name)&&n.jsxs("div",{className:"mb-3 p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:[e.client_name&&n.jsxs("div",{className:"flex items-center gap-1 text-green-700 dark:text-green-300 text-sm mb-1",children:[n.jsx(am,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium truncate",children:e.client_name})]}),(e.job_title||e.requirement_title)&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-700 dark:text-purple-300 text-sm mb-1",children:[n.jsx(cn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium truncate",children:e.job_title||e.requirement_title})]}),(e.recruiter_name||e.submitted_by_name)&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400 text-xs",children:[n.jsx(_o,{className:"w-3 h-3"}),n.jsxs("span",{children:["Sent by:"," ",e.recruiter_name||e.submitted_by_name]})]}),e.submitted_at&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-500 dark:text-purple-400 text-xs mt-1",children:[n.jsx(pn,{className:"w-3 h-3"}),n.jsx("span",{children:new Date(e.submitted_at).toLocaleDateString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(iu,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:u||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(E1,{className:"w-3 h-3"}),n.jsx("span",{children:f||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(Oc,{className:"w-3 h-3"}),n.jsx("span",{children:m||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(ua,{className:"w-3 h-3"}),n.jsx("span",{children:tze(g)})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[we.createElement(j,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:b||"Not Provided"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(Up,{className:"w-3 h-3"}),n.jsx("span",{children:N||"--"})]})]}),e.skills&&e.skills.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.skills.slice(0,5).map((_,k)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:typeof _=="string"?_:_==null?void 0:_.name},k)),e.skills.length>5&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.skills.length-5]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>{r&&r(e),i==="sent_to_am"&&t(e,"am_view")},className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:[n.jsx(il,{className:"w-3 h-3"}),"View Detail"]}),n.jsxs("button",{onClick:()=>s&&s(e),className:"flex items-center gap-1 px-3 py-1.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg text-sm hover:bg-emerald-100 transition-colors",children:[n.jsx(lU,{className:"w-3 h-3"}),"View Feedback"]}),n.jsxs("button",{onClick:()=>a&&a(e),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-200 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:[n.jsx(pn,{className:"w-3 h-3"}),"Timeline"]}),c&&n.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-500 rounded-lg text-sm",children:[n.jsx(Ks,{className:"w-3 h-3"}),"Final Status"]})]})]})}function pze(){var lr,sr,De,yt,ut,Lt,Yt;const e=Tt(),[t,r]=ea(),s=t.get("tab")||"inbox",a=s==="viewed"?"inbox":s==="client_viewed"?"sent_to_client":["interview_scheduled","interview_completed"].includes(s)?"interview_scheduled":s,i=Zc.some(be=>be.id===a)?a:"inbox",[l,o]=y.useState([]),[c,d]=y.useState([]),[u,f]=y.useState(gF),[m,g]=y.useState({}),[x,h]=y.useState(!0),[p,v]=y.useState(!1),[b,j]=y.useState(""),[N,w]=y.useState(i),[_,k]=y.useState(t.get("requirement")||"all"),[C,T]=y.useState(t.get("client")||"all"),[P,A]=y.useState(!1),[S,E]=y.useState(""),[O,I]=y.useState(null),[L,Z]=y.useState(null),[H,R]=y.useState(!1),[D,Y]=y.useState({open:!1,candidate:null,loading:!1,error:"",feedbacks:[]}),[M,X]=y.useState({open:!1,candidate:null,loading:!1,error:"",items:[]}),ne=y.useRef(0),J=y.useRef({}),ue=y.useRef({}),ke=y.useRef(new Set),ve=y.useRef(""),je=y.useRef(new Set),ie=(be={},nt=tw)=>({...be||{},timeout:typeof(be==null?void 0:be.timeout)=="number"&&be.timeout>0?be.timeout:nt}),se=(be,nt={},ze=tw)=>G.get(be,ie(nt,ze)),z=(be,nt,ze={},ht=tw)=>G.post(be,nt,ie(ze,ht)),Te=y.useMemo(()=>{const be={};return(Array.isArray(c)?c:[]).forEach(ze=>{const ht=Ia(ze.client_id||ze.client_name),Nt=Jt(ze.id||ze.job_id||ze.requirement_id);ht&&(be[ht]||(be[ht]=[]),Nt&&be[ht].push(Nt))}),be},[c]),fe=y.useMemo(()=>{const be=Array.isArray(c)?c:[];if(C==="all")return be;const nt=Te[Ia(C)]||[];return be.filter(ze=>nt.includes(Jt(ze.id||ze.job_id||ze.requirement_id)))},[c,C,Te]),Ie=async(be=[])=>{if(!Array.isArray(be)||be.length===0)return be;const nt=Oe=>{var xe,Re,le;return Array.from(new Set([Jt(d0(Oe)),Jt(Oe==null?void 0:Oe.candidate_id),Jt(Oe==null?void 0:Oe.candidate_uuid),Jt(Oe==null?void 0:Oe.id),Jt((xe=Oe==null?void 0:Oe.candidate)==null?void 0:xe.candidate_id),Jt((Re=Oe==null?void 0:Oe.candidate)==null?void 0:Re.candidate_uuid),Jt((le=Oe==null?void 0:Oe.candidate)==null?void 0:le.id),Jt(Oe==null?void 0:Oe.public_id)].filter(Boolean)))},ze=Oe=>{const xe=d0(Oe);return xe?[xe]:[]},ht=Oe=>{const xe=kd(zt(Oe==null?void 0:Oe.current_location,Oe==null?void 0:Oe.location,Oe==null?void 0:Oe.city,Oe==null?void 0:Oe.preferred_location)),Re=kd(zt(Oe==null?void 0:Oe.experience_years,Oe==null?void 0:Oe.experience,Oe==null?void 0:Oe.total_experience)),le=kd(zt(Oe==null?void 0:Oe.current_employer,Oe==null?void 0:Oe.current_company,Oe==null?void 0:Oe.current_designation,Oe==null?void 0:Oe.designation,Oe==null?void 0:Oe.role));return!(xe&&Re&&le)},Nt=Array.from(new Set(be.filter(ht).flatMap(ze).filter(Boolean))).filter(Oe=>{const xe=Jt(Oe);return!(!xe||ue.current[xe]||ke.current.has(xe))}).slice(0,zUe);if(Nt.length>0)for(let Oe=0;Oe<Nt.length;Oe+=vF){const xe=Nt.slice(Oe,Oe+vF);(await Promise.allSettled(xe.map(le=>se(`/v1/candidates/${le}`,{},UUe)))).forEach((le,Me)=>{var W,V,Q,K,q;const Ve=xe[Me],Xe=Jt(Ve);if(le.status!=="fulfilled"){const F=(V=(W=le.reason)==null?void 0:W.response)==null?void 0:V.status;Xe&&[400,404,422].includes(F)&&ke.current.add(Xe);return}const he=((K=(Q=le.value)==null?void 0:Q.data)==null?void 0:K.data)??((q=le.value)==null?void 0:q.data)??null;he&&typeof he=="object"?Xe&&(ue.current[Xe]=he,ke.current.delete(Xe)):Xe&&ke.current.add(Xe)})}return be.map(Oe=>{const Re=nt(Oe).find(he=>ue.current[he]);if(!Re)return Oe;const le=ue.current[Re];if(!le||typeof le!="object")return Oe;const Me=(le==null?void 0:le.candidate)||(le==null?void 0:le.candidate_details)||(le==null?void 0:le.profile)||{},Ve=fm(le,!0)||{},Xe=zt(Oe==null?void 0:Oe.current_designation,Oe==null?void 0:Oe.designation,Oe==null?void 0:Oe.role,le==null?void 0:le.current_designation,le==null?void 0:le.designation,le==null?void 0:le.role,Me==null?void 0:Me.current_designation,Me==null?void 0:Me.designation,Me==null?void 0:Me.role,Ve==null?void 0:Ve.designation,Ve==null?void 0:Ve.currentRole);return{...Oe,email:zt(Oe==null?void 0:Oe.email,le==null?void 0:le.email,le==null?void 0:le.candidate_email,Me==null?void 0:Me.email,Ve==null?void 0:Ve.email),phone:zt(Oe==null?void 0:Oe.phone,le==null?void 0:le.phone,le==null?void 0:le.mobile,le==null?void 0:le.phone_number,Me==null?void 0:Me.phone,Me==null?void 0:Me.mobile,Ve==null?void 0:Ve.phone),current_location:zt(Oe==null?void 0:Oe.current_location,Oe==null?void 0:Oe.location,Oe==null?void 0:Oe.city,Oe==null?void 0:Oe.preferred_location,le==null?void 0:le.current_location,le==null?void 0:le.location,le==null?void 0:le.city,le==null?void 0:le.preferred_location,Me==null?void 0:Me.current_location,Me==null?void 0:Me.location,Me==null?void 0:Me.city,Me==null?void 0:Me.preferred_location,Ve==null?void 0:Ve.location,Ve==null?void 0:Ve.city,Ve==null?void 0:Ve.preferredLocation),experience_years:zt(Oe==null?void 0:Oe.experience_years,Oe==null?void 0:Oe.experience,Oe==null?void 0:Oe.total_experience,le==null?void 0:le.experience_years,le==null?void 0:le.experience,le==null?void 0:le.total_experience,Me==null?void 0:Me.experience_years,Me==null?void 0:Me.experience,Me==null?void 0:Me.total_experience,Ve==null?void 0:Ve.totalExperience),current_employer:zt(Oe==null?void 0:Oe.current_employer,Oe==null?void 0:Oe.current_company,le==null?void 0:le.current_employer,le==null?void 0:le.current_company,Me==null?void 0:Me.current_employer,Me==null?void 0:Me.current_company,Ve==null?void 0:Ve.currentCompany),current_designation:Xe,designation:zt(Oe==null?void 0:Oe.designation,Xe),expected_ctc:zt(Oe==null?void 0:Oe.expected_ctc,Oe==null?void 0:Oe.expected_salary,le==null?void 0:le.expected_ctc,le==null?void 0:le.expected_salary,Me==null?void 0:Me.expected_ctc,Me==null?void 0:Me.expected_salary,Ve==null?void 0:Ve.expectedCtcDisplay)}})};y.useEffect(()=>{if(_==="all"||!c.length)return;const be=Jt(_);fe.some(ze=>Jt(ze.id||ze.job_id||ze.requirement_id)===be)||(k("all"),r({tab:N,client:C,requirement:"all"}))},[N,fe,c.length,C,_,r]);const ce=()=>{if(S.trim()){const be={id:S.toLowerCase().replace(/\s+/g,"_"),name:S.trim()};f([...u,be]),E(""),A(!1)}},Ce=async be=>{var nt;I(be),R(!0);try{const ze=d0(be);if(!ze){Z(be);return}const ht=await G.get(`/v1/candidates/${ze}`),Nt=((nt=ht==null?void 0:ht.data)==null?void 0:nt.data)??(ht==null?void 0:ht.data)??{},Oe=Jt(ze);Oe&&Nt&&typeof Nt=="object"&&(ue.current[Oe]=Nt),Z(Nt)}catch(ze){console.error("Failed to fetch candidate details:",ze),Z(be)}finally{R(!1)}},Ye=()=>{I(null),Z(null)},at=()=>{Y({open:!1,candidate:null,loading:!1,error:"",feedbacks:[]})},pe=async be=>{var xe,Re,le;const nt=d0(be),ze=ZUe(be);if(Y({open:!0,candidate:be,loading:!0,error:"",feedbacks:ze}),!nt){Y(Me=>({...Me,loading:!1,error:ze.length?"":"Candidate id missing, unable to fetch recruiter feedback"}));return}const ht=[`/v1/recruiter/candidates/${nt}/call-feedback`,`/v1/am/candidates/${nt}/call-feedback`,`/v1/candidates/${nt}/call-feedback`];let Nt=[],Oe="";for(const Me of ht)try{const Ve=await G.get(Me);if(Nt=pV(YUe(Ve==null?void 0:Ve.data)),Nt.length>0)break}catch(Ve){const Xe=(xe=Ve==null?void 0:Ve.response)==null?void 0:xe.status;if(Xe===401||Xe===403||Xe===404)continue;Oe=((le=(Re=Ve==null?void 0:Ve.response)==null?void 0:Re.data)==null?void 0:le.detail)||(Ve==null?void 0:Ve.message)||"Failed to fetch recruiter feedback"}Y(Me=>({...Me,loading:!1,feedbacks:Nt.length>0?Nt:Me.feedbacks,error:Nt.length>0?"":Oe&&Me.feedbacks.length===0?Oe:""}))},ye=()=>{X({open:!1,candidate:null,loading:!1,error:"",items:[]})},Pe=async be=>{var xe,Re,le,Me,Ve;const nt=(be==null?void 0:be.full_name)||(be==null?void 0:be.candidate_name)||"Candidate",ze=Array.from(new Set([be==null?void 0:be.candidate_id,be==null?void 0:be.id,be==null?void 0:be.application_id,be==null?void 0:be.candidate_uuid,be==null?void 0:be.public_id,(xe=be==null?void 0:be.candidate)==null?void 0:xe.candidate_id,(Re=be==null?void 0:be.candidate)==null?void 0:Re.id].filter(Boolean).map(Xe=>String(Xe).trim())));if(X({open:!0,candidate:{...be||{},full_name:nt},loading:!0,error:"",items:[]}),ze.length===0){X(Xe=>({...Xe,loading:!1,error:"Candidate id missing, unable to load timeline"}));return}const ht=Xe=>{var W;const he=(Xe==null?void 0:Xe.timeline)||((W=Xe==null?void 0:Xe.data)==null?void 0:W.timeline)||(Xe==null?void 0:Xe.data)||Xe||[];return Array.isArray(he)?he:[]};let Nt=[],Oe="";for(const Xe of ze){const he=[`/workflow/candidates/${Xe}/timeline`,`/v1/workflow/candidates/${Xe}/timeline`,`/v1/candidates/${Xe}/timeline`];for(const W of he)try{const V=await G.get(W),Q=ht(V==null?void 0:V.data);if(Q.length>0){Nt=Q;break}Nt.length||(Nt=Q)}catch(V){const Q=(le=V==null?void 0:V.response)==null?void 0:le.status;if(Q===401||Q===403||Q===404)continue;Oe=((Ve=(Me=V==null?void 0:V.response)==null?void 0:Me.data)==null?void 0:Ve.detail)||(V==null?void 0:V.message)||"Failed to load timeline"}if(Nt.length>0)break}X(Xe=>({...Xe,loading:!1,items:Nt,error:Nt.length?"":Oe}))},et=(be,nt)=>{const ze=be&&typeof be=="object"?be:{id:be},ht=jg(ze,nt);if(!ht)return;const Nt=Jt((ze==null?void 0:ze.candidate_id)||(ze==null?void 0:ze.id)),Oe=Jt(ze==null?void 0:ze.application_id),xe=Jt((ze==null?void 0:ze.job_id)||(ze==null?void 0:ze.requirement_id)),Re=jg(ze,ze==null?void 0:ze.status),le=Zc.find(Xe=>Xe.id===N),Me=new Set(((le==null?void 0:le.statuses)||[]).map(Er));Nt&&(J.current[Nt]=ht);const Ve=Xe=>{if(Oe)return Jt(Xe==null?void 0:Xe.application_id)===Oe;const he=Jt((Xe==null?void 0:Xe.id)||(Xe==null?void 0:Xe.candidate_id)),W=Jt((Xe==null?void 0:Xe.job_id)||(Xe==null?void 0:Xe.requirement_id));return he===Nt&&(!xe||W===xe)};o(Xe=>{const he=[];return Xe.forEach(W=>{if(!Ve(W)){he.push(W);return}Me.has(ht)&&he.push({...W,status:ht,updated_at:new Date().toISOString()})}),he}),g(Xe=>{const he={...Xe||{}};return Re&&(he[Re]=Math.max(0,(he[Re]||0)-1)),he[ht]=(he[ht]||0)+1,he}),I(Xe=>Xe&&Ve(Xe)?{...Xe,status:ht}:Xe),Z(Xe=>Xe&&{...Xe,status:ht})};y.useEffect(()=>{qe(),We()},[]),y.useEffect(()=>{rt()},[N,_,C,c]);const We=async()=>{var be;try{const nt=await G.get("/v1/am/clients"),ze=Array.isArray((be=nt.data)==null?void 0:be.clients)?nt.data.clients:Array.isArray(nt.data)?nt.data:[];if(ze.length>0){const ht=ze.map(Oe=>({id:String(Oe.id||Oe.client_id||"").trim(),name:Oe.name||Oe.client_name||Oe.full_name})).filter(Oe=>Oe.name),Nt=[...gF];ht.forEach(Oe=>{Nt.find(xe=>{var Re;return xe.name.toLowerCase()===((Re=Oe.name)==null?void 0:Re.toLowerCase())})||Nt.push({id:Oe.id||Ia(Oe.name),name:Oe.name})}),f(Nt)}}catch{}},qe=async()=>{var xe,Re;const[be,nt]=await Promise.allSettled([G.get("/v1/am/requirements"),G.get("/v1/job-management/requirements",{params:{skip:0,limit:500}})]),ze=[];be.status==="fulfilled"?ze.push(...bg((xe=be.value)==null?void 0:xe.data)):console.error("Failed to fetch requirements from /v1/am/requirements:",be.reason),nt.status==="fulfilled"?ze.push(...bg((Re=nt.value)==null?void 0:Re.data)):console.error("Failed to fetch requirements from /v1/job-management/requirements:",nt.reason);const ht=ze.map(HUe).filter(le=>Jt(le.id)),Oe=Array.from(new Map(ht.map(le=>[Jt(le.id),le])).values()).filter(qUe);d(Oe),f(le=>{const Me=[...le];return Oe.forEach(Ve=>{if(!Ve.client_name)return;const Xe=String(Ve.client_name).trim();if(!Xe)return;Me.find(W=>Ia(W.name)===Ia(Xe))||Me.push({id:Ve.client_id||Ia(Xe),name:Xe})}),Me})},ot=async(be=[],nt=[])=>{var xe;const ze=new Set(nt.map(Er)),ht=Ia(C),Nt=new Set((Te[ht]||[]).map(Jt)),Oe=[];for(const Re of be){const le=Jt(Re);if(!le)continue;let Me;try{Me=await se(`/v1/recruiter/jobs/${le}/submissions`)}catch{try{Me=await se(`/v1/jobs/${le}/submissions`)}catch(W){console.error(`Failed to fetch submissions for requirement ${le}:`,W);continue}}const Ve=c.find(he=>Jt(he.id||he.job_id||he.requirement_id)===le);bg((xe=Me==null?void 0:Me.data)!=null&&xe.candidates?Me.data:Me==null?void 0:Me.data).forEach(he=>{var Be,Ge,tt;const W=Jt((he==null?void 0:he.job_id)||(he==null?void 0:he.requirement_id)||((Be=he==null?void 0:he.requirement)==null?void 0:Be.id)||((Ge=he==null?void 0:he.job)==null?void 0:Ge.id));if(W&&W!==le)return;const V=Er((he==null?void 0:he.status)||(he==null?void 0:he.stage));if(!ze.has(V))return;const Q=W||le,K=Ia((he==null?void 0:he.client_id)||(he==null?void 0:he.client_name)||(Ve==null?void 0:Ve.client_id)||(Ve==null?void 0:Ve.client_name));if(ht!=="all"&&(Nt.size>0&&(!Q||!Nt.has(Q))||Nt.size===0&&K!==ht))return;const q=(he==null?void 0:he.candidate_id)||((tt=he==null?void 0:he.candidate)==null?void 0:tt.id)||(he==null?void 0:he.candidate_uuid)||(he==null?void 0:he.id)||(he==null?void 0:he.application_id);if(!q)return;const F=(he==null?void 0:he.candidate)||(he==null?void 0:he.candidate_details)||(he==null?void 0:he.profile)||{},ee=zt(he==null?void 0:he.email,F==null?void 0:F.email,he==null?void 0:he.candidate_email),me=zt(he==null?void 0:he.phone,F==null?void 0:F.phone,he==null?void 0:he.mobile,he==null?void 0:he.phone_number),Ne=zt(he==null?void 0:he.experience_years,he==null?void 0:he.experience,he==null?void 0:he.total_experience,F==null?void 0:F.experience_years,F==null?void 0:F.experience,F==null?void 0:F.total_experience),ge=zt(he==null?void 0:he.current_location,he==null?void 0:he.location,he==null?void 0:he.city,F==null?void 0:F.current_location,F==null?void 0:F.location,F==null?void 0:F.city),te=zt(he==null?void 0:he.current_employer,he==null?void 0:he.current_company,F==null?void 0:F.current_employer,F==null?void 0:F.current_company),Se=zt(he==null?void 0:he.current_designation,he==null?void 0:he.designation,he==null?void 0:he.role,F==null?void 0:F.current_designation,F==null?void 0:F.designation,F==null?void 0:F.role),Ue=zt(he==null?void 0:he.expected_ctc,he==null?void 0:he.expected_salary,F==null?void 0:F.expected_ctc,F==null?void 0:F.expected_salary);Oe.push({...he,id:q,candidate_id:q,application_id:(he==null?void 0:he.application_id)||(he==null?void 0:he.id),public_id:he==null?void 0:he.public_id,full_name:(he==null?void 0:he.candidate_name)||(he==null?void 0:he.full_name),email:ee,phone:me,status:V,skills:(he==null?void 0:he.skills)||[],job_id:Q,requirement_id:Q,job_title:(Ve==null?void 0:Ve.title)||(he==null?void 0:he.job_title)||(he==null?void 0:he.requirement_title),requirement_title:(Ve==null?void 0:Ve.title)||(he==null?void 0:he.requirement_title)||(he==null?void 0:he.job_title),client_name:(Ve==null?void 0:Ve.client_name)||(he==null?void 0:he.client_name),client_id:(Ve==null?void 0:Ve.client_id)||(he==null?void 0:he.client_id),recruiter_name:(he==null?void 0:he.recruiter_name)||(he==null?void 0:he.submitted_by_name),submitted_by_name:(he==null?void 0:he.submitted_by_name)||(he==null?void 0:he.recruiter_name),submitted_at:(he==null?void 0:he.submitted_at)||(he==null?void 0:he.sent_to_am_at)||(he==null?void 0:he.created_at),updated_at:(he==null?void 0:he.updated_at)||(he==null?void 0:he.sent_to_am_at),match_score:he==null?void 0:he.match_score,experience_years:Ne,current_location:ge,current_employer:te,current_designation:Se,designation:Se,expected_ctc:Ue,notes:Array.isArray(he==null?void 0:he.notes)?he.notes:[],latest_call_feedback:(he==null?void 0:he.latest_call_feedback)||(he==null?void 0:he.call_feedback)||null})})}return Oe},Ct=async(be=[])=>{var Oe,xe,Re,le,Me,Ve,Xe,he;const nt=Array.from(new Set(be.map(Er).filter(Boolean)));if(!nt.length)return[];const ze=new Set(nt),ht=(W={},V="")=>{var Ge,tt,_e,Je,B,re,st,ct,Ee,Ft;const Q=Er((W==null?void 0:W.status)||(W==null?void 0:W.stage)||V);if(!Q||!ze.has(Q))return null;const K=Jt((W==null?void 0:W.job_id)||(W==null?void 0:W.requirement_id)||((Ge=W==null?void 0:W.requirement)==null?void 0:Ge.id)||((tt=W==null?void 0:W.job)==null?void 0:tt.id)),q=c.find(pt=>Jt(pt.id||pt.job_id||pt.requirement_id)===K),F=(W==null?void 0:W.candidate)||(W==null?void 0:W.candidate_details)||(W==null?void 0:W.profile)||{},ee=(W==null?void 0:W.candidate_id)||(W==null?void 0:W.candidate_uuid)||((_e=W==null?void 0:W.candidate)==null?void 0:_e.id)||((Je=W==null?void 0:W.candidate)==null?void 0:Je.candidate_id)||(W==null?void 0:W.id)||(W==null?void 0:W.application_id);if(!ee)return null;const me=zt(W==null?void 0:W.email,F==null?void 0:F.email,W==null?void 0:W.candidate_email),Ne=zt(W==null?void 0:W.phone,F==null?void 0:F.phone,W==null?void 0:W.mobile,W==null?void 0:W.phone_number),ge=zt(W==null?void 0:W.experience_years,W==null?void 0:W.experience,W==null?void 0:W.total_experience,F==null?void 0:F.experience_years,F==null?void 0:F.experience,F==null?void 0:F.total_experience),te=zt(W==null?void 0:W.current_location,W==null?void 0:W.location,W==null?void 0:W.city,F==null?void 0:F.current_location,F==null?void 0:F.location,F==null?void 0:F.city),Se=zt(W==null?void 0:W.current_employer,W==null?void 0:W.current_company,F==null?void 0:F.current_employer,F==null?void 0:F.current_company),Ue=zt(W==null?void 0:W.current_designation,W==null?void 0:W.designation,W==null?void 0:W.role,F==null?void 0:F.current_designation,F==null?void 0:F.designation,F==null?void 0:F.role),Be=zt(W==null?void 0:W.expected_ctc,W==null?void 0:W.expected_salary,F==null?void 0:F.expected_ctc,F==null?void 0:F.expected_salary);return{...W,id:ee,candidate_id:ee,application_id:(W==null?void 0:W.application_id)||(W==null?void 0:W.id)||`${ee}-${K||"no-job"}`,full_name:(W==null?void 0:W.candidate_name)||(W==null?void 0:W.full_name)||(F==null?void 0:F.full_name)||(F==null?void 0:F.name)||"",public_id:(W==null?void 0:W.public_id)||(F==null?void 0:F.public_id),email:me,phone:Ne,status:Q,skills:(W==null?void 0:W.skills)||(F==null?void 0:F.skills)||[],job_id:K||(W==null?void 0:W.job_id)||(W==null?void 0:W.requirement_id),requirement_id:K||(W==null?void 0:W.requirement_id)||(W==null?void 0:W.job_id),job_title:(q==null?void 0:q.title)||(W==null?void 0:W.job_title)||(W==null?void 0:W.requirement_title)||((B=W==null?void 0:W.job)==null?void 0:B.title)||((re=W==null?void 0:W.requirement)==null?void 0:re.title),requirement_title:(q==null?void 0:q.title)||(W==null?void 0:W.requirement_title)||(W==null?void 0:W.job_title)||((st=W==null?void 0:W.requirement)==null?void 0:st.title)||((ct=W==null?void 0:W.job)==null?void 0:ct.title),client_name:(q==null?void 0:q.client_name)||(W==null?void 0:W.client_name)||((Ee=W==null?void 0:W.client)==null?void 0:Ee.name),client_id:(q==null?void 0:q.client_id)||(W==null?void 0:W.client_id)||((Ft=W==null?void 0:W.client)==null?void 0:Ft.id),recruiter_name:(W==null?void 0:W.recruiter_name)||(W==null?void 0:W.submitted_by_name),submitted_by_name:(W==null?void 0:W.submitted_by_name)||(W==null?void 0:W.recruiter_name),submitted_at:(W==null?void 0:W.submitted_at)||(W==null?void 0:W.created_at)||(W==null?void 0:W.updated_at),updated_at:(W==null?void 0:W.updated_at)||(W==null?void 0:W.submitted_at)||(W==null?void 0:W.created_at),match_score:W==null?void 0:W.match_score,experience_years:ge,current_location:te,current_employer:Se,current_designation:Ue,designation:Ue,expected_ctc:Be,notes:Array.isArray(W==null?void 0:W.notes)?W.notes:[],latest_call_feedback:(W==null?void 0:W.latest_call_feedback)||(W==null?void 0:W.call_feedback)||null}};try{const W=await se("/workflow/candidates",{params:{limit:500}}),V=((Oe=W==null?void 0:W.data)==null?void 0:Oe.candidates)||((xe=W==null?void 0:W.data)==null?void 0:xe.items)||((Re=W==null?void 0:W.data)==null?void 0:Re.data)||[];return(Array.isArray(V)?V:[]).map(K=>ht(K)).filter(Boolean)}catch(W){const V=(le=W==null?void 0:W.response)==null?void 0:le.status;[401,403,404,405,422].includes(V)||console.warn("Failed to fetch workflow candidates in bulk:",W)}const Nt=[];for(const W of nt)try{const V=await se("/workflow/candidates",{params:{status:W,limit:500}}),Q=((Me=V==null?void 0:V.data)==null?void 0:Me.candidates)||((Ve=V==null?void 0:V.data)==null?void 0:Ve.items)||((Xe=V==null?void 0:V.data)==null?void 0:Xe.data)||[];(Array.isArray(Q)?Q:[]).forEach(q=>{const F=ht(q,W);F&&Nt.push(F)})}catch(V){const Q=(he=V==null?void 0:V.response)==null?void 0:he.status;[401,403,404,405,422].includes(Q)||console.warn(`Failed to fetch workflow candidates for status "${W}"`,V)}return Nt},He=async()=>{var Re;const be=[{endpoint:"/v1/am/interview-logs"}],nt=je.current,ze=ve.current,ht=[];if(ze&&!nt.has(ze)){const le=be.find(Me=>Me.endpoint===ze);le&&ht.push(le)}be.forEach(le=>{nt.has(le.endpoint)||ht.some(Me=>Me.endpoint===le.endpoint)||ht.push(le)});const Nt=[];let Oe=!1;for(const{endpoint:le,params:Me}of ht)try{const Ve=Me&&Object.keys(Me).length>0?{params:Me}:void 0,Xe=await se(le,Ve);Oe=!0,ve.current=le;const he=aze(Xe==null?void 0:Xe.data);he.length>0&&Nt.push(...he)}catch(Ve){const Xe=(Re=Ve==null?void 0:Ve.response)==null?void 0:Re.status;if((Xe===404||Xe===405||Xe===422)&&(nt.add(le),ve.current===le&&(ve.current="")),Xe===401||Xe===403||Xe===404||Xe===405||Xe===422)continue;console.warn(`Failed to fetch interviews from ${le}:`,Ve)}const xe=new Map;return Nt.forEach(le=>{var Q,K,q,F,ee,me,Ne,ge,te,Se,Ue,Be,Ge,tt,_e,Je,B,re,st,ct,Ee;const Me=Jt(zt(le==null?void 0:le.candidate_id,(Q=le==null?void 0:le.candidate)==null?void 0:Q.id,(K=le==null?void 0:le.candidate)==null?void 0:K.candidate_id,(q=le==null?void 0:le.candidate)==null?void 0:q.public_id,le==null?void 0:le.candidate_public_id,le==null?void 0:le.candidate_email,(F=le==null?void 0:le.candidate)==null?void 0:F.email,(ee=le==null?void 0:le.submission)==null?void 0:ee.candidate_id,(Ne=(me=le==null?void 0:le.submission)==null?void 0:me.candidate)==null?void 0:Ne.id,(te=(ge=le==null?void 0:le.submission)==null?void 0:ge.candidate)==null?void 0:te.candidate_id,(Ue=(Se=le==null?void 0:le.submission)==null?void 0:Se.candidate)==null?void 0:Ue.public_id,(Ge=(Be=le==null?void 0:le.submission)==null?void 0:Be.candidate)==null?void 0:Ge.email)),Ve=Jt(zt(le==null?void 0:le.job_id,(tt=le==null?void 0:le.job)==null?void 0:tt.id,le==null?void 0:le.requirement_id,(_e=le==null?void 0:le.job)==null?void 0:_e.job_id,(Je=le==null?void 0:le.submission)==null?void 0:Je.job_id,(re=(B=le==null?void 0:le.submission)==null?void 0:B.job)==null?void 0:re.id,(st=le==null?void 0:le.submission)==null?void 0:st.requirement_id,(Ee=(ct=le==null?void 0:le.submission)==null?void 0:ct.job)==null?void 0:Ee.job_id)),Xe=Jt(zt(le==null?void 0:le.id,le==null?void 0:le.interview_id))||`${Me||"unknown-candidate"}::${Ve||"unknown-job"}::${String(zt(le==null?void 0:le.scheduled_at,le==null?void 0:le.start_time,le==null?void 0:le.created_at)||"").trim()}`,he=xe.get(Xe),W=new Date(zt(he==null?void 0:he.scheduled_at,he==null?void 0:he.updated_at,he==null?void 0:he.created_at)||0).getTime(),V=new Date(zt(le==null?void 0:le.scheduled_at,le==null?void 0:le.updated_at,le==null?void 0:le.created_at)||0).getTime();(!he||V>=W)&&xe.set(Xe,le)}),{records:Array.from(xe.values()),hasReachableInterviewSource:Oe}},mt=async(be=[])=>{if(!Array.isArray(be)||be.length===0)return be;let nt={byCandidateJob:new Map,byCandidate:new Map};try{const{records:ze}=await He();nt=sze(ze)}catch(ze){console.warn("Failed to build AM interview status overlay:",ze)}return be.map(ze=>{var xe,Re;const ht=rze(ze),Nt=Array.from(new Set([Jt((ze==null?void 0:ze.job_id)||(ze==null?void 0:ze.requirement_id)),Jt(((xe=ze==null?void 0:ze.job)==null?void 0:xe.id)||((Re=ze==null?void 0:ze.requirement)==null?void 0:Re.id))].filter(Boolean)));let Oe=null;for(const le of ht){for(const Me of Nt){const Ve=nt.byCandidateJob.get(`${le}::${Me}`);if(Ve){Oe=Ve;break}}if(Oe)break}if(!Oe)for(const le of ht){const Me=nt.byCandidate.get(le);if(Me){Oe=Me;break}}return Oe?{...ze,status:Oe.status,stage:Oe.status,interview_status:Oe.interviewStatus,interview_id:(ze==null?void 0:ze.interview_id)||Oe.interviewId,interview_scheduled_at:Oe.scheduledAt||(ze==null?void 0:ze.interview_scheduled_at)||(ze==null?void 0:ze.scheduled_at),interview_scheduling_ready:!1}:ze})},rt=async()=>{var W,V,Q,K;const be=++ne.current,nt=()=>ne.current===be;h(!0);const ze=Zc.find(q=>q.id===N),ht=((ze==null?void 0:ze.statuses)||["sent_to_am"]).map(Er),Nt=new Set(ht),Oe=new Set(ew),xe=Jt(_),Re=vg((W=c.find(q=>Jt(q.id||q.job_id||q.requirement_id)===xe))==null?void 0:W.title),le=Ia(C),Me=new Set((Te[le]||[]).map(Jt)),Ve=q=>{var F,ee;return Jt((q==null?void 0:q.job_id)||(q==null?void 0:q.requirement_id)||((F=q==null?void 0:q.requirement)==null?void 0:F.id)||((ee=q==null?void 0:q.job)==null?void 0:ee.id))},Xe=q=>{const F=Ve(q),ee=vg((q==null?void 0:q.requirement_title)||(q==null?void 0:q.job_title));if(xe!=="all"){if(F){if(F!==xe)return!1}else if(!Re||ee!==Re)return!1}if(le!=="all"){if(Me.size>0){if(!F||!Me.has(F))return!1}else if(Ia((q==null?void 0:q.client_id)||(q==null?void 0:q.client_name))!==le)return!1}return!0},he=(q=[])=>{if(!nt())return;const F=JUe(q).map(ee=>{var Ue;const me=jg(ee,((Ue=ee==null?void 0:ee.status)==null?void 0:Ue.value)||(ee==null?void 0:ee.status)||(ee==null?void 0:ee.stage)),Ne=Jt((ee==null?void 0:ee.candidate_id)||(ee==null?void 0:ee.id)),ge=Ne?J.current[Ne]:"",te=ge?jg({...ee,status:ge,stage:ge},ge):"",Se=te&&rb(te)>=rb(me)?te:me;return{...ee,id:(ee==null?void 0:ee.candidate_id)||(ee==null?void 0:ee.id)||(ee==null?void 0:ee.application_id),status:Se}}).filter(ee=>Jt(ee.id)).filter(ee=>Oe.has(Er(ee.status))).filter(Xe);g(KUe(F)),o(F.filter(ee=>Nt.has(Er(ee.status))))};try{let q=[];try{const ge=(((V=(await se("/v1/am/submissions")).data)==null?void 0:V.submissions)||[]).filter(te=>Oe.has(Er((te==null?void 0:te.status)||(te==null?void 0:te.stage)))).filter(Xe).map(te=>{var Ee;const Se=Ve(te),Ue=c.find(Ft=>Jt(Ft.id||Ft.job_id||Ft.requirement_id)===Se),Be=(te==null?void 0:te.candidate)||(te==null?void 0:te.candidate_details)||(te==null?void 0:te.profile)||{},Ge=(te==null?void 0:te.candidate_id)||(te==null?void 0:te.candidate_uuid)||((Ee=te==null?void 0:te.candidate)==null?void 0:Ee.id)||(te==null?void 0:te.application_id),tt=zt(te==null?void 0:te.email,Be==null?void 0:Be.email,te==null?void 0:te.candidate_email),_e=zt(te==null?void 0:te.phone,Be==null?void 0:Be.phone,te==null?void 0:te.mobile,te==null?void 0:te.phone_number),Je=zt(te==null?void 0:te.experience_years,te==null?void 0:te.experience,te==null?void 0:te.total_experience,Be==null?void 0:Be.experience_years,Be==null?void 0:Be.experience,Be==null?void 0:Be.total_experience),B=zt(te==null?void 0:te.current_location,te==null?void 0:te.location,te==null?void 0:te.city,Be==null?void 0:Be.current_location,Be==null?void 0:Be.location,Be==null?void 0:Be.city),re=zt(te==null?void 0:te.current_employer,te==null?void 0:te.current_company,Be==null?void 0:Be.current_employer,Be==null?void 0:Be.current_company),st=zt(te==null?void 0:te.current_designation,te==null?void 0:te.designation,te==null?void 0:te.role,Be==null?void 0:Be.current_designation,Be==null?void 0:Be.designation,Be==null?void 0:Be.role),ct=zt(te==null?void 0:te.expected_ctc,te==null?void 0:te.expected_salary,Be==null?void 0:Be.expected_ctc,Be==null?void 0:Be.expected_salary);return{...te,id:Ge,candidate_id:Ge,application_id:(te==null?void 0:te.application_id)||(te==null?void 0:te.id)||`${Ge}-${Se}`,full_name:(te==null?void 0:te.candidate_name)||(te==null?void 0:te.full_name)||"",public_id:te==null?void 0:te.public_id,email:tt,phone:_e,status:Er((te==null?void 0:te.status)||(te==null?void 0:te.stage)||"sent_to_am"),skills:(te==null?void 0:te.skills)||[],job_id:Se,requirement_id:Se,job_title:(Ue==null?void 0:Ue.title)||(te==null?void 0:te.job_title)||(te==null?void 0:te.requirement_title),requirement_title:(Ue==null?void 0:Ue.title)||(te==null?void 0:te.requirement_title)||(te==null?void 0:te.job_title),client_name:(Ue==null?void 0:Ue.client_name)||(te==null?void 0:te.client_name),client_id:(Ue==null?void 0:Ue.client_id)||(te==null?void 0:te.client_id),recruiter_name:(te==null?void 0:te.recruiter_name)||(te==null?void 0:te.submitted_by_name),submitted_by_name:(te==null?void 0:te.submitted_by_name)||(te==null?void 0:te.recruiter_name),submitted_at:(te==null?void 0:te.submitted_at)||(te==null?void 0:te.sent_to_am_at)||(te==null?void 0:te.created_at),updated_at:(te==null?void 0:te.updated_at)||(te==null?void 0:te.submitted_at),match_score:te==null?void 0:te.match_score,experience_years:Je,current_location:B,current_employer:re,current_designation:st,designation:st,expected_ctc:ct,notes:Array.isArray(te==null?void 0:te.notes)?te.notes:[],latest_call_feedback:(te==null?void 0:te.latest_call_feedback)||(te==null?void 0:te.call_feedback)||null}}).filter(te=>Jt(te.id));q.push(...ge)}catch(me){const Ne=(Q=me==null?void 0:me.response)==null?void 0:Q.status;[401,403,404,405,422].includes(Ne)||console.warn("AM submissions endpoint failed, loading requirement-wise submissions:",me)}const F=xe!=="all"?[xe]:q.length===0?fe.map(me=>Jt(me.id||me.job_id||me.requirement_id)):[];if(F.length>0){const me=await ot(F,ew);q.push(...me)}const ee=await Ct(ew);if(q.push(...ee),q.length>0){const me=await Ie(q),Ne=await mt(me);he(Ne);return}try{const me=await se("/workflow/candidates",{params:{limit:500}}),Ne=Array.isArray((K=me==null?void 0:me.data)==null?void 0:K.candidates)?me.data.candidates:[];if(Ne.length>0){const ge=await Ie(Ne),te=await mt(ge);he(te)}}catch(me){console.warn("Workflow fallback endpoint failed:",me)}}catch(q){console.error("Failed to fetch candidates:",q);try{const F=await se("/v1/candidates"),ee=bg(F.data),me=await Ie(ee),Ne=await mt(me);he(Ne)}catch(F){console.error("Fallback also failed:",F),nt()&&(g({}),o([]))}}finally{nt()&&h(!1)}},wt=async(be,nt,ze=null)=>{var ht,Nt,Oe;v(!0);try{const xe=be&&typeof be=="object"?be:{id:be},Re=d0(xe),le=(xe==null?void 0:xe.job_id)||(xe==null?void 0:xe.requirement_id)||(_!=="all"?_:null);if(!Re){alert("Candidate internal id missing. Please refresh the page and open this candidate again.");return}let Me="",Ve={};switch(nt){case"am_view":Me=`/workflow/candidates/${Re}/am-view`,Ve={job_id:le};break;case"am_shortlist":Me=`/workflow/candidates/${Re}/am-shortlist`,Ve={job_id:le};break;case"am_hold":Me=`/workflow/candidates/${Re}/am-hold`,Ve={job_id:le};break;case"am_reject":Me=`/workflow/candidates/${Re}/reject`,Ve={rejection_type:"am",job_id:le};break;case"send_to_client":Me=`/workflow/candidates/${Re}/send-to-client`,Ve={job_id:le};break;case"client_decision":Me=`/workflow/candidates/${Re}/client-decision`,Ve={decision:ze,job_id:le};break;case"mark_interview_ready":if(Er((xe==null?void 0:xe.status)||(xe==null?void 0:xe.stage))!=="client_shortlisted"){alert("Interview scheduling can be enabled only when candidate is Client Shortlisted.");return}Me=`/workflow/candidates/${Re}/mark-interview-ready`,Ve={job_id:le,notes:ze&&typeof ze=="object"&&String(ze.notes||"").trim()||void 0};break;default:console.error("Unknown action:",nt);return}const Xe=await z(Me,Ve),he=Er((ht=Xe==null?void 0:Xe.data)==null?void 0:ht.status),W=nt==="client_decision"?`client_${Er(ze)}`:{am_view:"am_viewed",am_shortlist:"am_shortlisted",am_hold:"am_hold",am_reject:"am_rejected",send_to_client:"sent_to_client",mark_interview_ready:"client_shortlisted"}[nt]||"",V=he||W;V&&et(xe,V),await rt()}catch(xe){console.error("Action failed:",xe),alert(((Oe=(Nt=xe.response)==null?void 0:Nt.data)==null?void 0:Oe.detail)||"Action failed")}finally{v(!1)}},At=y.useMemo(()=>{var xe;const be=Jt(_),nt=vg((xe=c.find(Re=>Jt(Re.id||Re.job_id||Re.requirement_id)===be))==null?void 0:xe.title),ze=Ia(C),ht=new Set((Te[ze]||[]).map(Jt)),Nt=b.trim().toLowerCase(),Oe=l.filter(Re=>{var Xe,he;const le=Jt((Re==null?void 0:Re.job_id)||(Re==null?void 0:Re.requirement_id)||((Xe=Re==null?void 0:Re.requirement)==null?void 0:Xe.id)||((he=Re==null?void 0:Re.job)==null?void 0:he.id)),Me=vg((Re==null?void 0:Re.requirement_title)||(Re==null?void 0:Re.job_title));return be==="all"||(le?le===be:!!(nt&&Me===nt))?ze!=="all"?ht.size>0?!!(le&&ht.has(le)):Ia((Re==null?void 0:Re.client_id)||(Re==null?void 0:Re.client_name))===ze:!0:!1});return Nt?Oe.filter(Re=>{var le,Me,Ve,Xe,he,W,V,Q;return((le=Re.full_name)==null?void 0:le.toLowerCase().includes(Nt))||((Me=Re.email)==null?void 0:Me.toLowerCase().includes(Nt))||((Ve=Re.phone)==null?void 0:Ve.includes(Nt))||((Xe=Re.job_title)==null?void 0:Xe.toLowerCase().includes(Nt))||((he=Re.requirement_title)==null?void 0:he.toLowerCase().includes(Nt))||((W=Re.recruiter_name)==null?void 0:W.toLowerCase().includes(Nt))||((V=Re.submitted_by_name)==null?void 0:V.toLowerCase().includes(Nt))||((Q=Re.skills)==null?void 0:Q.some(K=>(typeof K=="string"?K:(K==null?void 0:K.name)||"").toLowerCase().includes(Nt)))}):Oe},[l,Te,c,b,C,_]),$t=y.useMemo(()=>{if(!Array.isArray(M.items))return[];const be=nt=>{const ze=(nt==null?void 0:nt.at)||(nt==null?void 0:nt.created_at)||(nt==null?void 0:nt.updated_at)||null;if(!ze)return 0;const ht=new Date(ze).getTime();return Number.isFinite(ht)?ht:0};return[...M.items].sort((nt,ze)=>be(ze)-be(nt))},[M.items]),Wt=be=>be.statuses.reduce((nt,ze)=>nt+(m[ze]||0),0);return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Candidate Review"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review candidates submitted by recruiters and track client decisions"})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, email, phone, skills...",value:b,onChange:be=>j(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.jsxs("button",{onClick:()=>{qe(),rt()},className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(jo,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.jsx(am,{className:"w-3 h-3 inline mr-1"}),"Client"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:C,onChange:be=>{T(be.target.value),k("all"),r({tab:N,client:be.target.value,requirement:"all"})},className:"appearance-none w-48 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Clients"}),u.map((be,nt)=>n.jsx("option",{value:be.id,children:be.name},`${be.id||"client"}-${be.name||"name"}-${nt}`))]}),n.jsx(io,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),n.jsx("button",{onClick:()=>A(!0),className:"flex items-center gap-1 px-3 py-2.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Add new client",children:n.jsx(bi,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.jsx(A1,{className:"w-3 h-3 inline mr-1"}),"Requirement"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:_,onChange:be=>{k(be.target.value),r({tab:N,client:C,requirement:be.target.value})},className:"appearance-none w-64 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Requirements"}),fe.map((be,nt)=>{var ze;return n.jsx("option",{value:be.id,children:be.title||be.requirement_code||`REQ-${(ze=be.id)==null?void 0:ze.slice(0,8)}`},`${be.id||"req"}-${be.requirement_code||be.title||nt}`)})]}),n.jsx(io,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:N,onChange:be=>{w(be.target.value),r({tab:be.target.value,client:C,requirement:_})},className:"appearance-none w-56 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer",children:Zc.map(be=>{const nt=Wt(be);return n.jsxs("option",{value:be.id,children:[be.label," ",nt>0?`(${nt})`:""]},be.id)})}),n.jsx(io,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 ml-auto flex-wrap",children:[C!=="all"&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg",children:[n.jsx(am,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300 max-w-[150px] truncate",children:((lr=u.find(be=>be.id===C))==null?void 0:lr.name)||"Selected Client"}),n.jsx("button",{onClick:()=>{T("all"),k("all"),r({tab:N,client:"all",requirement:"all"})},className:"ml-1 text-green-400 hover:text-green-600",children:n.jsx(_r,{className:"w-4 h-4"})})]}),_!=="all"&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-lg",children:[n.jsx(cn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),n.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 max-w-[200px] truncate",children:((sr=c.find(be=>Jt(be.id||be.job_id||be.requirement_id)===Jt(_)))==null?void 0:sr.title)||"Selected Requirement"}),n.jsx("button",{onClick:()=>{k("all"),r({tab:N,client:C,requirement:"all"})},className:"ml-1 text-purple-400 hover:text-purple-600",children:n.jsx(_r,{className:"w-4 h-4"})})]}),(()=>{const be=Zc.find(ht=>ht.id===N),nt=(be==null?void 0:be.icon)||Ai,ze=Wt(be);return n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsx(nt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:be==null?void 0:be.label}),ze>0&&n.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-white rounded-full text-xs font-medium",children:ze})]})})(),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[At.length," candidate",At.length!==1?"s":""]})]})]}),x?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx(Ws,{className:"w-8 h-8 animate-spin text-blue-600"}),n.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading candidates..."})]}):At.length===0?n.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsx(Hr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No candidates found"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:b?"Try adjusting your search terms":`No candidates in ${(De=Zc.find(be=>be.id===N))==null?void 0:De.label} stage`})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:At.map((be,nt)=>n.jsx(hze,{candidate:be,onAction:wt,onViewProfile:Ce,onViewFeedback:pe,onViewTimeline:Pe},be.application_id||`${be.id||"candidate"}-${be.job_id||be.requirement_id||"no-job"}-${nt}`))}),M.open&&n.jsx("div",{className:"fixed inset-0 z-[96] bg-black/50 flex items-center justify-center p-4",onClick:be=>{be.target===be.currentTarget&&ye()},children:n.jsxs("div",{className:"w-full max-w-3xl max-h-[86vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Status Timeline"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:((yt=M.candidate)==null?void 0:yt.full_name)||((ut=M.candidate)==null?void 0:ut.candidate_name)||"Candidate"})]}),n.jsx("button",{type:"button",onClick:ye,className:"p-1.5 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Close timeline",children:n.jsx(_r,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-6 py-4 overflow-y-auto space-y-4",children:[M.loading&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Loading timeline..."]}),!M.loading&&M.error&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:border-red-900/40 dark:text-red-300",children:M.error}),!M.loading&&$t.length===0&&n.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 text-sm text-gray-600 dark:text-gray-300",children:"No timeline entries found."}),!M.loading&&$t.length>0&&n.jsx("div",{className:"space-y-4",children:$t.map((be,nt)=>{const ze=ize(be==null?void 0:be.status),ht=_F[ze]||_F.sent,Nt=ht.icon,Oe=uze(be,ze),xe=zt(be==null?void 0:be.by,be==null?void 0:be.user,be==null?void 0:be.actor_name,be==null?void 0:be.created_by_name),Re=J4(zt(be==null?void 0:be.role,be==null?void 0:be.actor_role)),le=mze((be==null?void 0:be.note)||(be==null?void 0:be.message)||(be==null?void 0:be.summary)),Me=fze((be==null?void 0:be.at)||(be==null?void 0:be.created_at)||(be==null?void 0:be.updated_at)),Ve=nt===0;return n.jsxs("div",{className:"relative pl-12",children:[nt<$t.length-1&&n.jsx("span",{className:"absolute left-[17px] top-10 bottom-[-16px] w-px bg-gray-200 dark:bg-gray-700"}),n.jsx("span",{className:`absolute left-0 top-2 flex h-9 w-9 items-center justify-center rounded-full border ${ht.markerClass}`,children:n.jsx(Nt,{className:"h-4 w-4"})}),n.jsxs("div",{className:`rounded-xl border bg-white dark:bg-gray-900 px-4 py-3 shadow-sm ${Ve?ht.latestClass:"border-gray-200 dark:border-gray-700"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold ${ht.badgeClass}`,children:Oe}),Ve&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-semibold text-gray-600 dark:bg-gray-800 dark:text-gray-300",children:"Latest"})]}),n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:Me})]}),(xe||Re)&&n.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[xe||"System",Re?`  ${Re}`:""]}),le&&n.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:le})]})]},be.id||`${be.status||"status"}-${be.at||nt}`)})})]})]})}),D.open&&n.jsx("div",{className:"fixed inset-0 z-[95] bg-black/50 flex items-center justify-center p-4",onClick:be=>{be.target===be.currentTarget&&at()},children:n.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 max-h-[88vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recruiter Feedback"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:((Lt=D.candidate)==null?void 0:Lt.full_name)||((Yt=D.candidate)==null?void 0:Yt.candidate_name)||"Candidate"})]}),n.jsx("button",{type:"button",onClick:at,className:"p-1.5 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Close feedback",children:n.jsx(_r,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-6 py-4 overflow-y-auto space-y-4",children:[D.loading&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Loading feedback..."]}),!D.loading&&D.error&&D.feedbacks.length===0&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:border-red-900/40 dark:text-red-300",children:D.error}),!D.loading&&D.feedbacks.length===0&&n.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 text-sm text-gray-600 dark:text-gray-300",children:"No recruiter feedback found for this candidate."}),!D.loading&&D.feedbacks.map((be,nt)=>{const ze=eze(be);return n.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-900/20",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:be.decision||"Feedback"}),ze&&n.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",children:["Rating: ",ze,"/5"]})]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:QUe(be.call_date)})]}),be.summary&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Summary"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:be.summary})]}),(be.strengths||be.concerns||be.additional_notes)&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[be.strengths&&n.jsxs("div",{className:"rounded-md bg-emerald-50 dark:bg-emerald-900/20 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300 uppercase mb-1",children:"Strengths"}),n.jsx("p",{className:"text-sm text-emerald-900 dark:text-emerald-100",children:be.strengths})]}),be.concerns&&n.jsxs("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 dark:text-red-300 uppercase mb-1",children:"Concerns"}),n.jsx("p",{className:"text-sm text-red-900 dark:text-red-100",children:be.concerns})]}),be.additional_notes&&n.jsxs("div",{className:"rounded-md bg-gray-50 dark:bg-gray-800 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase mb-1",children:"Additional Notes"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:be.additional_notes})]})]}),(be.salary_alignment||be.candidate_intent)&&n.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[be.salary_alignment&&n.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-violet-100 text-violet-700 dark:bg-violet-900/20 dark:text-violet-300",children:["Salary: ",be.salary_alignment]}),be.candidate_intent&&n.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-cyan-100 text-cyan-700 dark:bg-cyan-900/20 dark:text-cyan-300",children:["Intent: ",be.candidate_intent]})]})]},`${be.id}-${nt}`)})]})]})}),O&&L&&(()=>{const be=Er((O==null?void 0:O.status)||(L==null?void 0:L.status)),nt=be==="am_shortlisted",ze=be==="am_hold",ht=be==="am_rejected",Nt=be==="am_shortlisted",Oe=["interview_scheduled","interview_completed"].includes(be),xe=["sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed"].includes(be),Re=be==="client_shortlisted",le=be==="client_hold",Me=be==="client_rejected",Ve=!!(O!=null&&O.interview_scheduling_ready||L!=null&&L.interview_scheduling_ready),Xe=xe&&!Oe,he={...O||{},...L||{},status:Er(O==null?void 0:O.status)||Er(L==null?void 0:L.status)||(L==null?void 0:L.status),job_id:(L==null?void 0:L.job_id)||(O==null?void 0:O.job_id)||(O==null?void 0:O.requirement_id),requirement_id:(L==null?void 0:L.requirement_id)||(O==null?void 0:O.requirement_id)||(O==null?void 0:O.job_id),job_title:(L==null?void 0:L.job_title)||(L==null?void 0:L.requirement_title)||(O==null?void 0:O.job_title)||(O==null?void 0:O.requirement_title),requirement_title:(L==null?void 0:L.requirement_title)||(L==null?void 0:L.job_title)||(O==null?void 0:O.requirement_title)||(O==null?void 0:O.job_title),client_name:(L==null?void 0:L.client_name)||(O==null?void 0:O.client_name),client_id:(L==null?void 0:L.client_id)||(O==null?void 0:O.client_id)};return n.jsx(W4,{candidate:he,profile:fm(he,!0),loading:H,onClose:Ye,onPreviewResume:W=>window.open(W,"_blank"),hideFeedbackSection:!0,customQuickActions:[...ht||nt||xe?[]:[{label:"AM Shortlist",variant:"success",onClick:()=>{wt(O,"am_shortlist")}}],...ht||xe?[]:[{label:"Send to Client",variant:"primary",disabled:p||!Nt,onClick:()=>{wt(O,"send_to_client")}}],...!ht&&!nt&&!ze&&!xe?[{label:"AM Hold",variant:"warning",onClick:()=>{wt(O,"am_hold")}}]:[],...ht||nt||xe?[]:[{label:"AM Reject",variant:"danger",onClick:()=>{wt(O,"am_reject")}}],...ht||Re||Me||Oe?[]:[{label:"Client Shortlisted",variant:"success",disabled:p||!Xe,onClick:()=>{wt(O,"client_decision","shortlisted")}},...le?[]:[{label:"Client Hold",variant:"warning",disabled:p||!Xe,onClick:()=>{wt(O,"client_decision","hold")}}],{label:"Client Rejected",variant:"danger",disabled:p||!Xe,onClick:()=>{wt(O,"client_decision","rejected")}}],...ht||!Re||Ve?[]:[{label:"Interview Scheduling Ready",variant:"primary",disabled:p,onClick:()=>{const V=window.prompt("Add internal note for recruiter (optional)","Client shortlisted candidate. Marked Interview Scheduling Ready for recruiter.");V!==null&&wt(O,"mark_interview_ready",{notes:V})}}],...ht||!Re||!Ve?[]:[{label:"Interview Scheduling Ready",variant:"success",disabled:!0,onClick:()=>{}}],{label:"Message Recruiter",variant:"primary",onClick:W=>{const V=L==null?void 0:L.recruiter_email;V?window.location.href=`mailto:${V}?subject=Regarding Candidate: ${(L==null?void 0:L.full_name)||(L==null?void 0:L.candidate_name)}`:alert("Recruiter contact not available")}},{label:"Open Full Profile",variant:"ghost",onClick:()=>{Ye(),e(`/candidates/${O.id}`)}}]})})(),P&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Client"}),n.jsx("button",{onClick:()=>{A(!1),E("")},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:n.jsx(_r,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client Name"}),n.jsx("input",{type:"text",value:S,onChange:be=>E(be.target.value),placeholder:"Enter client name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>{A(!1),E("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ce,disabled:!S.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Client"})]})]})})]})}const xze=e=>{switch((e||"").toLowerCase()){case"active":return{label:"Active",className:"bg-green-100 text-green-800"};case"closed":return{label:"Closed",className:"bg-red-100 text-red-800"};case"on_hold":case"on hold":return{label:"On Hold",className:"bg-yellow-100 text-yellow-800"};case"draft":return{label:"Draft",className:"bg-gray-100 text-gray-700"};default:return{label:"Active",className:"bg-green-100 text-green-800"}}};function wF(){var N,w;const e=(_,k)=>_==null||k===null||k===void 0?"Not specified":`${_} - ${k} yrs`,{id:t}=Or(),r=Tt(),[s,a]=y.useState(!0),[i,l]=y.useState([]),[o,c]=y.useState(null),[d,u]=y.useState(!1),[f,m]=y.useState(null),[g,x]=y.useState(""),[h,p]=y.useState(""),v=_=>{if(!_)return;const k=new URLSearchParams;k.set("jobId",_.id||_.job_id),_.title&&k.set("jobTitle",_.title),k.set("tab","sent_to_am"),r(`/recruiter/candidate-workflow?${k.toString()}`)};y.useEffect(()=>{b()},[]);async function b(){var _;try{const k=await Ep(),C=((_=k==null?void 0:k.data)==null?void 0:_.jobs)||[];l(C)}catch(k){console.error("Failed to load assigned jobs",k)}finally{a(!1)}}const j=async _=>{const k=(_==null?void 0:_.id)||(_==null?void 0:_.job_id)||"";if(!k)return;p(""),x(k);const C=new URLSearchParams;try{const{analysis:T,query:P,keywords:A}=ZW(_),S=QW(T);P&&C.set("q",P),A.length&&C.set("keywords",A.join(",")),(_!=null&&_.job_id||_!=null&&_.id)&&C.set("job_id",_.job_id||_.id),_!=null&&_.title&&C.set("job_title",_.title),S&&C.set("analysis",S),C.set("auto_search","1"),r(`/recruiter/resdex/advanced-search?${C.toString()}`)}catch{p("Unable to analyze this JD. Please try manual search.")}finally{x("")}};return s?n.jsx("div",{className:"p-6 text-center",children:"Loading job details..."}):i.length===0?n.jsx("div",{className:"p-6 text-center text-gray-600",children:"No assigned jobs found"}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Assigned Jobs"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Jobs assigned to you by Account Managers"}),h&&n.jsx("p",{className:"text-amber-700 mt-2 text-sm",children:h})]}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Job Title"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Department"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Experience"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Account Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:i.map(_=>{var k,C;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:[n.jsx("div",{children:_.title}),n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",_.job_id]})]}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:_.location||""}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:_.department||""}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e(_.min_experience,_.max_experience)}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((k=_.account_manager)==null?void 0:k.name)||((C=_.account_manager)==null?void 0:C.am_name)||""}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{const T=xze(_.status);return n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${T.className}`,children:T.label})})()}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>c(_),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 transition",children:"View Details"}),n.jsx("button",{onClick:()=>v(_),className:"px-3 py-1 bg-indigo-600 text-white rounded text-xs font-medium hover:bg-indigo-700 transition",children:"View Submissions"}),n.jsx("button",{onClick:()=>j(_),disabled:g===(_.id||_.job_id),className:"px-3 py-1 bg-purple-600 text-white rounded text-xs font-medium hover:bg-purple-700 transition disabled:opacity-60 disabled:cursor-not-allowed",children:g===(_.id||_.job_id)?"Analyzing JD...":"Smart Search"}),n.jsx("button",{onClick:()=>{m(_),u(!0)},className:"px-3 py-1 bg-green-600 text-white rounded text-xs font-medium hover:bg-green-700 transition",children:"+ Add New Candidate"})]})})]},_.id)})})]})})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 p-6 text-white flex justify-between items-center sticky top-0",children:[n.jsx("h2",{className:"text-2xl font-bold",children:o.title}),n.jsx("button",{onClick:()=>c(null),className:"text-2xl font-bold hover:text-gray-200 transition",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Role Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Role"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Location"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.location||"N/A"})]})]})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Experience & Compensation"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Experience"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e(o.min_experience,o.max_experience)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"CTC"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.salary_range||"Not specified"})]})]})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Job Description"}),n.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:o.description||"No description available"})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(o.skills||[]).length>0?(o.skills||[]).map((_,k)=>n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold",children:_},k)):n.jsx("p",{className:"text-gray-500",children:"No skills specified"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Department"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:o.department||"N/A"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:o.status||"N/A"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded col-span-2",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Account Manager"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:((N=o.account_manager)==null?void 0:N.name)||((w=o.account_manager)==null?void 0:w.am_name)||""})]})]})]}),n.jsx("button",{onClick:()=>c(null),className:"w-full px-4 py-3 bg-purple-600 text-white font-semibold rounded hover:bg-purple-700 transition",children:"Close"})]})]})}),d&&n.jsx(XW,{isOpen:d,onClose:()=>u(!1),job:f})]})}function gze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const yze=y.forwardRef(gze);function vze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const bze=y.forwardRef(vze);function jze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const _ze=y.forwardRef(jze);function wze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const NF=y.forwardRef(wze);function Nze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const kze=y.forwardRef(Nze);function Sze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const kF=y.forwardRef(Sze);function Cze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const rw=y.forwardRef(Cze);function Aze({title:e,titleId:t,...r},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const SF=y.forwardRef(Aze);function Eze(){const e=Tt(),[t,r]=y.useState(!1),[s,a]=y.useState("basic"),[i,l]=y.useState({title:"",description:"",skills_mandatory:[],skills_good_to_have:[],experience_min:0,experience_max:"",ctc_min:"",ctc_max:"",location_details:{city:"",type:"On-site"},certifications:[],positions_count:1,interview_stages:["Screening","Technical","HR"],urgency:"Normal",target_start_date:"",department:"",reporting_manager:"",priority:"Medium"}),[o,c]=y.useState({mandatory:"",good:""}),d=h=>{const{name:p,value:v}=h.target;if(p.includes(".")){const[b,j]=p.split(".");l({...i,[b]:{...i[b],[j]:v}})}else l({...i,[p]:v})},u=h=>{const p=h==="mandatory"?o.mandatory:o.good;if(!p)return;const v=h==="mandatory"?"skills_mandatory":"skills_good_to_have";i[v].includes(p)||l({...i,[v]:[...i[v],p]}),c({...o,[h]:""})},f=(h,p)=>{const v=h==="mandatory"?"skills_mandatory":"skills_good_to_have";l({...i,[v]:i[v].filter(b=>b!==p)})},m=async()=>{if(!i.description){alert("Please paste a Job Description first!");return}r(!0);try{const p=(await ol.parseJD(i.description)).data;l(v=>{var b,j;return{...v,skills_mandatory:[...new Set([...v.skills_mandatory,...p.skills_mandatory||[]])],skills_good_to_have:[...new Set([...v.skills_good_to_have,...p.skills_good_to_have||[]])],experience_min:p.experience_min||v.experience_min,experience_max:p.experience_max||v.experience_max,ctc_min:p.ctc_min||v.ctc_min,ctc_max:p.ctc_max||v.ctc_max,urgency:p.urgency||v.urgency,location_details:{...v.location_details,city:((b=p.location_details)==null?void 0:b.city)||v.location_details.city,type:((j=p.location_details)==null?void 0:j.type)||v.location_details.type}}}),alert("AI has successfully extracted requirements from the JD!"),a("skills")}catch(h){console.error("AI Parsing Error:",h),alert("Failed to parse JD. But you can still fill it manually.")}finally{r(!1)}},g=async h=>{var p,v;h.preventDefault(),r(!0);try{await ol.createRequirement(i),alert("Requirement Created Successfully!"),e("/client/requirements")}catch(b){console.error("Submission Error:",b),alert(((v=(p=b.response)==null?void 0:p.data)==null?void 0:v.detail)||"Failed to create requirement")}finally{r(!1)}},x=({icon:h,title:p,subtitle:v})=>n.jsxs("div",{className:"flex items-center space-x-3 mb-6 border-b pb-4",children:[n.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600",children:n.jsx(h,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:p}),n.jsx("p",{className:"text-sm text-gray-500",children:v})]})]});return n.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Post New Requirement"}),n.jsx("p",{className:"text-gray-500 mt-1",children:"Detailed intake for faster and better matching"})]}),n.jsx("button",{onClick:()=>e(-1),className:"text-gray-500 hover:text-gray-700 font-medium",children:"Cancel"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"md:col-span-1 space-y-2",children:[["basic","description","skills","experience","logistics","process"].map(h=>n.jsx("button",{onClick:()=>a(h),className:`w-full text-left px-4 py-3 rounded-xl font-medium transition-all ${s===h?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"text-gray-600 hover:bg-gray-100"}`,children:h.charAt(0).toUpperCase()+h.slice(1)},h)),n.jsxs("div",{className:"mt-8 p-4 bg-amber-50 rounded-xl border border-amber-100",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-amber-700 mb-2",children:[n.jsx(rw,{className:"w-5 h-5"}),n.jsx("span",{className:"font-bold text-sm",children:"AI Tip"})]}),n.jsx("p",{className:"text-xs text-amber-600 leading-relaxed",children:"Adding mandatory vs good-to-have skills helps our matching engine prioritize candidates better."})]})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsxs("form",{onSubmit:g,className:"bg-white rounded-2xl shadow-sm border p-8 space-y-8",children:[s==="basic"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:yze,title:"Basic Details",subtitle:"Core information about the position"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Title*"}),n.jsx("input",{name:"title",required:!0,value:i.title,onChange:d,placeholder:"e.g. Senior Fullstack Engineer",className:"w-full border-gray-200 rounded-lg p-2.5 focus:ring-2 focus:ring-indigo-500 transition-all border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Department"}),n.jsx("input",{name:"department",value:i.department,onChange:d,placeholder:"e.g. Engineering",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Positions Count"}),n.jsx("input",{type:"number",name:"positions_count",value:i.positions_count,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Urgency"}),n.jsxs("select",{name:"urgency",value:i.urgency,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"Immediate"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Flexible"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"High"}),n.jsx("option",{children:"Medium"}),n.jsx("option",{children:"Low"})]})]})]})]}),s==="description"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:NF,title:"Job Description",subtitle:"Detailed role responsibilities"}),n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{name:"description",rows:12,value:i.description,onChange:d,placeholder:"Paste the full job description here...",className:"w-full border-gray-200 rounded-xl p-4 focus:ring-2 focus:ring-indigo-500 transition-all border"}),n.jsxs("button",{type:"button",onClick:m,className:"absolute bottom-4 right-4 bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg font-bold text-sm flex items-center space-x-2 border border-indigo-100 hover:bg-indigo-100 transition-colors",children:[n.jsx(rw,{className:"w-4 h-4"}),n.jsx("span",{children:"AI Parse JD"})]})]})]}),s==="skills"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:rw,title:"Skills & Qualifications",subtitle:"What skills should the candidate have?"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mandatory Skills"}),n.jsxs("div",{className:"flex space-x-2 mb-3",children:[n.jsx("input",{value:o.mandatory,onChange:h=>c({...o,mandatory:h.target.value}),onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),u("mandatory")),placeholder:"Add skill and press Enter",className:"flex-1 border-gray-200 rounded-lg p-2 border text-sm"}),n.jsx("button",{type:"button",onClick:()=>u("mandatory"),className:"p-2 bg-indigo-600 text-white rounded-lg",children:n.jsx(kF,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills_mandatory.map(h=>n.jsxs("span",{className:"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1 border border-indigo-100",children:[n.jsx("span",{children:h}),n.jsx(SF,{className:"w-3 h-3 cursor-pointer hover:text-indigo-900",onClick:()=>f("mandatory",h)})]},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Good to Have Skills"}),n.jsxs("div",{className:"flex space-x-2 mb-3",children:[n.jsx("input",{value:o.good,onChange:h=>c({...o,good:h.target.value}),onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),u("good")),placeholder:"Add skill...",className:"flex-1 border-gray-200 rounded-lg p-2 border text-sm"}),n.jsx("button",{type:"button",onClick:()=>u("good"),className:"p-2 bg-emerald-600 text-white rounded-lg",children:n.jsx(kF,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills_good_to_have.map(h=>n.jsxs("span",{className:"bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1 border border-emerald-100",children:[n.jsx("span",{children:h}),n.jsx(SF,{className:"w-3 h-3 cursor-pointer hover:text-emerald-900",onClick:()=>f("good",h)})]},h))})]})]})]}),s==="experience"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:bze,title:"Experience & Compensation",subtitle:"Expectations and budget"}),n.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider",children:"Experience (Years)"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),n.jsx("input",{type:"number",name:"experience_min",value:i.experience_min,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),n.jsx("input",{type:"number",name:"experience_max",value:i.experience_max,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider",children:"Salary / CTC Range"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),n.jsx("input",{type:"number",name:"ctc_min",value:i.ctc_min,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),n.jsx("input",{type:"number",name:"ctc_max",value:i.ctc_max,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]})]})]})]})]}),s==="logistics"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:kze,title:"Location & Logistics",subtitle:"Where and how will they work?"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"City / Base Location"}),n.jsx("input",{name:"location_details.city",value:i.location_details.city,onChange:d,placeholder:"e.g. Hyderabad, India",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work Type"}),n.jsxs("select",{name:"location_details.type",value:i.location_details.type,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"On-site"}),n.jsx("option",{children:"Remote"}),n.jsx("option",{children:"Hybrid"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Target Start Date"}),n.jsx("input",{type:"date",name:"target_start_date",value:i.target_start_date,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border"})]})]})]}),s==="process"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:NF,title:"Process & Reporting",subtitle:"Interview stages and management"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Reporting Manager"}),n.jsx("input",{name:"reporting_manager",value:i.reporting_manager,onChange:d,placeholder:"Name of hiring manager",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Interview Stages"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:["Screening","Technical Round 1","Technical Round 2","Management","HR"].map(h=>n.jsxs("label",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg border cursor-pointer hover:bg-white transition-colors",children:[n.jsx("input",{type:"checkbox",checked:i.interview_stages.includes(h),onChange:p=>{p.target.checked?l({...i,interview_stages:[...i.interview_stages,h]}):l({...i,interview_stages:i.interview_stages.filter(v=>v!==h)})},className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:h})]},h))})]})]})]}),n.jsxs("div",{className:"pt-6 border-t flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-gray-500",children:s!=="process"&&n.jsxs("button",{type:"button",onClick:()=>{const h=["basic","description","skills","experience","logistics","process"];a(h[h.indexOf(s)+1])},className:"flex items-center space-x-1 text-indigo-600 font-bold hover:text-indigo-800",children:[n.jsx("span",{children:"Next Section"}),n.jsx(_ze,{className:"w-4 h-4"})]})}),n.jsx("button",{type:"submit",disabled:t,className:`px-8 py-3 rounded-xl font-bold text-white shadow-xl transition-all ${t?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200 hover:-translate-y-0.5"}`,children:t?"Creating...":"Confirm & Post Requirement"})]})]})})]})]})}const CF={open:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",closed:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300"},Tze={hybrid:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",remote:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300",onsite:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",contract:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},AF=({userRole:e="recruiter"})=>{const t=Tt(),[r,s]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(null),[c,d]=y.useState(0),[u,f]=y.useState(""),[m,g]=y.useState(""),[x,h]=y.useState(""),[p,v]=y.useState(""),[b,j]=y.useState("assigned"),[N,w]=y.useState([]),[_,k]=y.useState(0),[C]=y.useState(20),T=async()=>{i(!0);try{const H=new URLSearchParams;H.append("skip",_*C),H.append("limit",C),m&&H.append("status",m),x&&H.append("client_id",x),p&&H.append("mode",p);const R=await G.get(`/v1/job-management/requirements?${H}`);s(R.data.jobs||[]),d(R.data.total||0)}catch(H){console.error("Error fetching jobs:",H),o("Failed to load jobs")}finally{i(!1)}},P=async()=>{try{const H=await G.get("/v1/clients");w(H.data.clients||H.data||[])}catch(H){console.error("Error fetching clients:",H)}};y.useEffect(()=>{T(),P()},[_,m,x,p]);const A=y.useMemo(()=>{if(!u)return r;const H=u.toLowerCase();return r.filter(R=>{var D,Y,M,X;return((D=R.title)==null?void 0:D.toLowerCase().includes(H))||((Y=R.job_title)==null?void 0:Y.toLowerCase().includes(H))||((M=R.skills)==null?void 0:M.some(ne=>ne.toLowerCase().includes(H)))||((X=R.location)==null?void 0:X.toLowerCase().includes(H))})},[r,u]),S=y.useMemo(()=>e!=="recruiter"?[]:A.filter(H=>H.is_assigned),[A,e]),E=y.useMemo(()=>e!=="recruiter"?A:A.filter(H=>!H.is_assigned),[A,e]),O=e==="recruiter"?b==="assigned"?S:E:A,I=()=>{t(e==="account_manager"?"/am/jobs/new":"/recruiter/jobs/new")},L=H=>{t(e==="account_manager"?`/am/jobs/${H}`:`/recruiter/jobs/${H}`)},Z=H=>{t(e==="account_manager"?`/am/jobs/${H}/edit`:`/recruiter/jobs/${H}/edit`)};return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e==="account_manager"?"Jobs / Requirements":"Jobs"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[c," total jobs"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(bi,{className:"w-4 h-4"}),"Create New Job"]}),n.jsxs("button",{onClick:()=>t(e==="account_manager"?"/am/jobs/posting/new":"/recruiter/jobs/posting/new"),className:"flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",children:[n.jsx(cn,{className:"w-4 h-4"}),"Create Job Posting"]})]})]}),e==="recruiter"&&n.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>j("assigned"),className:`pb-3 px-1 font-medium transition-colors ${b==="assigned"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"My Assigned Jobs"}),n.jsx("button",{onClick:()=>j("all"),className:`pb-3 px-1 font-medium transition-colors ${b==="all"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"All Jobs (Read-Only)"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by skill, role, client...",value:u,onChange:H=>f(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex gap-3 flex-wrap",children:[n.jsxs("select",{value:x,onChange:H=>h(H.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Clients"}),N.map(H=>n.jsx("option",{value:H.id,children:H.client_name},H.id))]}),n.jsxs("select",{value:m,onChange:H=>g(H.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"on_hold",children:"On Hold"})]}),n.jsxs("select",{value:p,onChange:H=>v(H.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Modes"}),n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]})]}),n.jsx("div",{className:"flex gap-2 mt-4 flex-wrap",children:N.slice(0,6).map(H=>n.jsx("button",{onClick:()=>h(x===H.id?"":H.id),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${x===H.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"}`,children:H.client_name},H.id))})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[a?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Loading jobs..."})]}):l?n.jsx("div",{className:"p-8 text-center text-red-500",children:l}):O.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(ua,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No jobs found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"S#"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Job Title"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mode"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Skills"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Exp"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Positions"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:O.map((H,R)=>{var D,Y;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>L(H.id),children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:H.serial_number||R+1}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:H.date_created?new Date(H.date_created).toLocaleDateString():"-"}),n.jsxs("td",{className:"px-4 py-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:H.title||H.job_title}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:H.job_id})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((D=H.client)==null?void 0:D.client_name)||H.company_name||"-"}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:H.mode&&n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Tze[H.mode]||"bg-gray-100 text-gray-800"}`,children:H.mode})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(H.skills||[]).slice(0,3).map((M,X)=>n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 text-xs rounded",children:M},X)),(H.skills||[]).length>3&&n.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 text-xs rounded",children:["+",H.skills.length-3]})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:H.experience||`${H.min_experience||0}-${H.max_experience||0} yrs`}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Oc,{className:"w-4 h-4"}),H.location||"-"]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:H.no_of_positions||1}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${CF[H.status]||CF.open}`,children:((Y=H.status)==null?void 0:Y.replace("_"," "))||"Open"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:M=>M.stopPropagation(),children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>L(H.id),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"View",children:n.jsx(il,{className:"w-4 h-4"})}),(e==="account_manager"||H.is_assigned)&&n.jsx("button",{onClick:()=>Z(H.id),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"Edit",children:n.jsx(UC,{className:"w-4 h-4"})}),e==="account_manager"&&n.jsx("button",{onClick:()=>t(`/am/jobs/${H.id}/assign`),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"Assign Recruiter",children:n.jsx(Fv,{className:"w-4 h-4"})})]})})]},H.id)})})]})}),c>C&&n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",_*C+1," to"," ",Math.min((_+1)*C,c)," of ",c," jobs"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k(Math.max(0,_-1)),disabled:_===0,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("button",{onClick:()=>k(_+1),disabled:(_+1)*C>=c,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})},nw=[{key:"job_title",label:"Job Title",default:!0},{key:"client_name",label:"Client Name",default:!0},{key:"location",label:"Location",default:!0},{key:"mode",label:"Work Mode",default:!0},{key:"experience",label:"Experience",default:!0},{key:"skills",label:"Required Skills",default:!0},{key:"budget",label:"CTC / Budget",default:!0},{key:"duration",label:"Duration",default:!1},{key:"work_timings",label:"Work Timings",default:!1},{key:"joining_preference",label:"Joining Preference",default:!1},{key:"no_of_positions",label:"No of Positions",default:!1},{key:"jd_text",label:"Job Description",default:!0}],Pze=({job:e,candidate:t=null,onClose:r})=>{const[s,a]=y.useState(nw.filter(P=>P.default).map(P=>P.key)),[i,l]=y.useState(""),[o,c]=y.useState([]),[d,u]=y.useState(!1),[f,m]=y.useState(!1),[g,x]=y.useState(!1),[h,p]=y.useState(!1);y.useEffect(()=>{v()},[]);const v=async()=>{try{const P=await G.get(`/v1/job-management/requirements/${e.id}/templates`);c(P.data||[])}catch(P){console.error("Error fetching templates:",P)}},b=P=>{a(A=>A.includes(P)?A.filter(S=>S!==P):[...A,P])},j=()=>{a(nw.map(P=>P.key))},N=()=>{a([])},w=P=>{a(P.visible_fields||[]),u(!1)},_=()=>{var A;const P=[];if(s.includes("job_title")&&P.push(` *Job Title:* ${e.title||e.job_title||"N/A"}`),s.includes("client_name")&&P.push(` *Company:* ${((A=e.client)==null?void 0:A.client_name)||"Confidential"}`),s.includes("location")&&P.push(` *Location:* ${e.location||"N/A"}`),s.includes("mode")&&P.push(` *Work Mode:* ${(e.mode||"hybrid").charAt(0).toUpperCase()+(e.mode||"hybrid").slice(1)}`),s.includes("experience")&&P.push(` *Experience:* ${e.experience||"N/A"}`),s.includes("skills")){const S=Array.isArray(e.skills)?e.skills.join(", "):e.skills||"N/A";P.push(` *Skills:* ${S}`)}return s.includes("budget")&&P.push(` *CTC:* ${e.budget||"As per market standards"}`),s.includes("duration")&&P.push(` *Duration:* ${e.duration||"Permanent"}`),s.includes("work_timings")&&P.push(` *Work Timings:* ${e.work_timings||"Standard"}`),s.includes("joining_preference")&&P.push(` *Joining:* ${e.joining_preference||"Flexible"}`),s.includes("no_of_positions")&&P.push(` *Positions:* ${e.no_of_positions||1}`),s.includes("jd_text")&&(P.push(""),P.push("*Job Description:*"),P.push(e.jd_text||e.description||"Please contact for detailed JD")),P.join(`
`)},k=async()=>{const P=_();try{await navigator.clipboard.writeText(P),m(!0),setTimeout(()=>m(!1),2e3)}catch(A){console.error("Failed to copy:",A)}},C=async()=>{if(i.trim()){x(!0);try{await G.post(`/v1/job-management/requirements/${e.id}/templates`,{template_name:i.trim(),visible_fields:s}),p(!0),l(""),v(),setTimeout(()=>p(!1),2e3)}catch(P){console.error("Error saving template:",P)}finally{x(!1)}}},T=()=>{var S;const P=`
      <html>
        <head>
          <title>Job Details - ${e.title||e.job_title}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
            h1 { color: #4F46E5; margin-bottom: 20px; }
            .field { margin-bottom: 12px; }
            .label { font-weight: bold; color: #374151; }
            .value { color: #1F2937; }
            .jd { margin-top: 20px; padding: 15px; background: #F9FAFB; border-radius: 8px; white-space: pre-wrap; }
          </style>
        </head>
        <body>
          <h1>${e.title||e.job_title}</h1>
          ${s.includes("client_name")?`<div class="field"><span class="label">Company:</span> <span class="value">${((S=e.client)==null?void 0:S.client_name)||"Confidential"}</span></div>`:""}
          ${s.includes("location")?`<div class="field"><span class="label">Location:</span> <span class="value">${e.location||"N/A"}</span></div>`:""}
          ${s.includes("mode")?`<div class="field"><span class="label">Work Mode:</span> <span class="value">${e.mode||"Hybrid"}</span></div>`:""}
          ${s.includes("experience")?`<div class="field"><span class="label">Experience:</span> <span class="value">${e.experience||"N/A"}</span></div>`:""}
          ${s.includes("skills")?`<div class="field"><span class="label">Skills:</span> <span class="value">${Array.isArray(e.skills)?e.skills.join(", "):e.skills}</span></div>`:""}
          ${s.includes("budget")?`<div class="field"><span class="label">CTC:</span> <span class="value">${e.budget||"As per market"}</span></div>`:""}
          ${s.includes("duration")?`<div class="field"><span class="label">Duration:</span> <span class="value">${e.duration||"Permanent"}</span></div>`:""}
          ${s.includes("work_timings")?`<div class="field"><span class="label">Work Timings:</span> <span class="value">${e.work_timings||"Standard"}</span></div>`:""}
          ${s.includes("joining_preference")?`<div class="field"><span class="label">Joining:</span> <span class="value">${e.joining_preference||"Flexible"}</span></div>`:""}
          ${s.includes("no_of_positions")?`<div class="field"><span class="label">Positions:</span> <span class="value">${e.no_of_positions||1}</span></div>`:""}
          ${s.includes("jd_text")?`<div class="jd"><strong>Job Description:</strong><br/>${e.jd_text||e.description||"N/A"}</div>`:""}
        </body>
      </html>
    `,A=window.open("","_blank");A.document.write(P),A.document.close(),A.print()};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Customize & Send to Candidate"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select fields to include in the job summary"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(_r,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row max-h-[calc(90vh-140px)] overflow-hidden",children:[n.jsxs("div",{className:"w-full md:w-1/2 p-4 border-r border-gray-200 dark:border-gray-700 overflow-y-auto",children:[o.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:()=>u(!d),className:"flex items-center justify-between w-full p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Saved Templates (",o.length,")"]}),d?n.jsx(C1,{className:"w-4 h-4 text-gray-500"}):n.jsx(io,{className:"w-4 h-4 text-gray-500"})]}),d&&n.jsx("div",{className:"mt-2 space-y-2",children:o.map(P=>n.jsx("button",{onClick:()=>w(P),className:"w-full p-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:P.template_name},P.id))})]}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("button",{onClick:j,className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:N,className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Deselect All"})]}),n.jsx("div",{className:"space-y-2",children:nw.map(P=>n.jsxs("label",{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${s.includes(P.key)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-indigo-300"}`,children:[n.jsx("input",{type:"checkbox",checked:s.includes(P.key),onChange:()=>b(P.key),className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:P.label})]},P.key))}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:i,onChange:P=>l(P.target.value),placeholder:"Template name...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{onClick:C,disabled:!i.trim()||g,className:"flex items-center gap-1 px-3 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 disabled:opacity-50",children:h?n.jsx(yc,{className:"w-4 h-4"}):n.jsx(J4e,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"w-full md:w-1/2 p-4 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Preview"}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 min-h-[300px]",children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 font-sans",children:_()||"Select fields to generate preview"})})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),n.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:[n.jsx(cn,{className:"w-4 h-4"}),"Generate PDF"]}),n.jsx("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:f?n.jsxs(n.Fragment,{children:[n.jsx(yc,{className:"w-4 h-4"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(zCe,{className:"w-4 h-4"}),"Copy to Clipboard"]})})]})]})})},EF=({userRole:e="recruiter"})=>{var S;const{id:t}=Or(),r=Tt(),[s,a]=y.useState(null),[i,l]=y.useState(!0),[o,c]=y.useState(null),[d,u]=y.useState("recruiters"),[f,m]=y.useState(!1),[g,x]=y.useState(!1),[h,p]=y.useState(null),[v,b]=y.useState([]),[j,N]=y.useState([]),[w,_]=y.useState([]);y.useEffect(()=>{k()},[t]),y.useEffect(()=>{s&&C()},[s,d]);const k=async()=>{try{l(!0);const E=await G.get(`/v1/job-management/requirements/${t}`);a(E.data),b(E.data.assignments||[])}catch(E){console.error("Error fetching job:",E),c("Failed to load job details")}finally{l(!1)}},C=async()=>{try{if(d==="candidates"){const E=await G.get(`/v1/job-management/requirements/${t}/candidates`);N(E.data.candidates||[])}else if(d==="postings"){const E=await G.get(`/v1/job-management/requirements/${t}/postings`);_(E.data||[])}}catch(E){console.error("Error fetching tab data:",E)}},T=E=>{const O={open:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",in_progress:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",closed:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300",draft:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O[E]||O.open}`,children:(E||"open").replace("_"," ").toUpperCase()})},P=E=>{const O={hybrid:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",remote:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300",onsite:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",contract:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300"};return n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${O[E]||O.hybrid}`,children:(E||"hybrid").toUpperCase()})},A=(E=null)=>{p(E),x(!0)};return i?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:n.jsx(Ws,{className:"w-8 h-8 animate-spin text-indigo-600"})}):o||!s?n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsx("button",{onClick:()=>r(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Qh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})}),n.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg p-6 flex items-center gap-3",children:[n.jsx(Ks,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),n.jsx("p",{className:"text-red-700 dark:text-red-300",children:o||"Job not found"})]})]}):n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>r(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Qh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.title||s.job_title}),T(s.status)]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.serial_number?`#${s.serial_number}  `:"",((S=s.client)==null?void 0:S.client_name)||"No Client","  Created"," ",new Date(s.date_created||s.created_at).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[e==="account_manager"&&n.jsxs(n.Fragment,{children:[n.jsxs(wr,{to:`${e==="account_manager"?"/am":"/recruiter"}/jobs/${t}/edit`,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(UC,{className:"w-4 h-4"}),"Edit Job"]}),n.jsxs("button",{onClick:()=>r(`/am/jobs/${t}/assign`),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Fv,{className:"w-4 h-4"}),"Assign Recruiter"]})]}),e==="recruiter"&&n.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Ai,{className:"w-4 h-4"}),"Customize & Send"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Job Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ua,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mode"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:P(s.mode)})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Oc,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.location||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.experience||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Up,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Budget / CTC"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.budget||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Hr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No of Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.no_of_positions||1})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ya,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.duration||"Permanent"})]})]}),s.work_timings&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.work_timings})]})]}),s.joining_preference&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ya,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.joining_preference})]})]}),s.client_ta&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Hr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client TA"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.client_ta})]})]})]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Required Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(s.skills||[]).map((E,O)=>n.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded text-sm",children:E},O)),(!s.skills||s.skills.length===0)&&n.jsx("span",{className:"text-gray-400",children:"No skills specified"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("button",{onClick:()=>m(!f),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(cn,{className:"w-5 h-5 text-gray-400"}),n.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Job Description"})]}),f?n.jsx(C1,{className:"w-5 h-5 text-gray-400"}):n.jsx(io,{className:"w-5 h-5 text-gray-400"})]}),f&&n.jsx("div",{className:"p-4 pt-0 border-t border-gray-200 dark:border-gray-700",children:n.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-700 dark:text-gray-300",children:s.jd_text||s.description||"No job description available"})})})]}),e==="recruiter"&&s.notes_for_recruiter&&n.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Notes from AM"}),n.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:s.notes_for_recruiter})]})]}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>u("recruiters"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="recruiters"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(Hr,{className:"w-4 h-4 inline-block mr-2"}),"Assigned Recruiters (",v.length,")"]}),n.jsxs("button",{onClick:()=>u("candidates"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="candidates"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(Hr,{className:"w-4 h-4 inline-block mr-2"}),"Candidates Pipeline (",j.length,")"]}),n.jsxs("button",{onClick:()=>u("postings"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="postings"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(Iv,{className:"w-4 h-4 inline-block mr-2"}),"Job Postings (",w.length,")"]})]}),n.jsxs("div",{className:"p-6",children:[d==="recruiters"&&n.jsx("div",{children:v.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Hr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recruiters assigned yet"}),e==="account_manager"&&n.jsxs("button",{onClick:()=>r(`/am/jobs/${t}/assign`),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[n.jsx(bi,{className:"w-4 h-4"}),"Assign Recruiter"]})]}):n.jsx("div",{className:"space-y-3",children:v.map(E=>{var O,I,L;return n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-medium",children:((I=(O=E.recruiter)==null?void 0:O.full_name)==null?void 0:I.charAt(0))||"R"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((L=E.recruiter)==null?void 0:L.full_name)||"Unknown Recruiter"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Assigned"," ",new Date(E.assigned_at||E.created_at).toLocaleDateString()]})]})]}),n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:E.status||"Active"})]},E.id)})})}),d==="candidates"&&n.jsx("div",{children:j.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Hr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No candidates in pipeline yet"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Candidate"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Submitted By"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),n.jsx("tbody",{children:j.map(E=>n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:E.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:E.email})]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded text-xs",children:E.status||"Submitted"})}),n.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:E.submitted_by||"Unknown"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:n.jsx(il,{className:"w-4 h-4"})})})]},E.id))})]})})}),d==="postings"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsxs(wr,{to:`${e==="account_manager"?"/am":"/recruiter"}/jobs/${t}/posting/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[n.jsx(bi,{className:"w-4 h-4"}),"Create Posting"]})}),w.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Iv,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No job postings created yet"})]}):n.jsx("div",{className:"space-y-3",children:w.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:E.title}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[E.client_display_name,"  Expires"," ",new Date(E.last_date_to_apply).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":E.status==="expired"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:E.status||"Draft"}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:n.jsx(il,{className:"w-4 h-4"})})]})]},E.id))})]})]})]})})]}),g&&n.jsx(Pze,{job:s,candidate:h,onClose:()=>x(!1)})]})},TF=({userRole:e="recruiter"})=>{const t=Tt(),[r,s]=y.useState("manual"),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState(!1),[u,f]=y.useState({date_created:new Date().toISOString().split("T")[0],client_id:"",client_ta:"",job_title:"",mode:"hybrid",skills:[],jd_text:"",experience:"",location:"",duration:"",no_of_positions:1,budget:"",work_timings:"",joining_preference:"",recruiter_ids:[],am_notes:[]}),[m,g]=y.useState(""),[x,h]=y.useState(null),[p,v]=y.useState(""),[b,j]=y.useState(!1),[N,w]=y.useState({}),[_,k]=y.useState([]),[C,T]=y.useState([]);y.useEffect(()=>{P(),e==="account_manager"&&A()},[e]);const P=async()=>{try{const D=await G.get("/v1/clients");k(D.data.clients||D.data||[])}catch(D){console.error("Error fetching clients:",D)}},A=async()=>{try{const D=await G.get("/v1/users?role=recruiter");T(D.data.users||D.data||[])}catch(D){console.error("Error fetching recruiters:",D)}},S=D=>{const{name:Y,value:M}=D.target;f(X=>({...X,[Y]:M}))},E=()=>{m.trim()&&!u.skills.includes(m.trim())&&(f(D=>({...D,skills:[...D.skills,m.trim()]})),g(""))},O=D=>{f(Y=>({...Y,skills:Y.skills.filter(M=>M!==D)}))},I=D=>{(D.key==="Enter"||D.key===",")&&(D.preventDefault(),E())},L=D=>{f(Y=>{const M=Y.recruiter_ids.includes(D)?Y.recruiter_ids.filter(X=>X!==D):[...Y.recruiter_ids,D];return{...Y,recruiter_ids:M}})},Z=D=>{const Y=D.target.files[0];if(Y){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(Y.type)){o("Please upload a PDF or DOCX file");return}if(Y.size>5*1024*1024){o("File size must be less than 5MB");return}h(Y),o(null)}},H=async()=>{if(!x&&!p.trim()){o("Please upload a file or paste JD text");return}j(!0),o(null);try{let D;if(x){const M=new FormData;M.append("file",x),D=await G.post("/v1/job-management/parse-jd",M,{headers:{"Content-Type":"multipart/form-data"}})}else D=await G.post("/v1/job-management/parse-jd-text",{text:p});const Y=D.data;w(Y),f(M=>({...M,job_title:Y.job_title||M.job_title,skills:Y.skills||M.skills,experience:Y.experience||M.experience,location:Y.location||M.location,mode:Y.mode||M.mode,jd_text:Y.jd_text||p||M.jd_text}))}catch(D){console.error("Error parsing JD:",D),o("Failed to parse JD. Please try again or enter manually.")}finally{j(!1)}},R=async(D,Y="open")=>{var M,X;if(D.preventDefault(),!u.job_title.trim()){o("Job title is required");return}if(!u.jd_text.trim()){o("Job description is required");return}if(u.skills.length===0){o("At least one skill is required");return}i(!0),o(null);try{const ne={...u,status:Y},J=await G.post("/v1/job-management/requirements",ne);d(!0),setTimeout(()=>{t(e==="account_manager"?"/am/jobs":"/recruiter/jobs")},1500)}catch(ne){console.error("Error creating job:",ne),o(((X=(M=ne.response)==null?void 0:M.data)==null?void 0:X.detail)||"Failed to create job. Please try again.")}finally{i(!1)}};return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Qh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create New Job"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add a new job requirement"})]})]}),c&&n.jsxs("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-3",children:[n.jsx(yc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Job created successfully! Redirecting..."})]}),l&&n.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-3",children:[n.jsx(Ks,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-700 dark:text-red-300",children:l}),n.jsx("button",{onClick:()=>o(null),className:"ml-auto",children:n.jsx(_r,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]}),n.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>s("manual"),className:`pb-3 px-1 font-medium transition-colors ${r==="manual"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"Manual Entry"}),n.jsx("button",{onClick:()=>s("import"),className:`pb-3 px-1 font-medium transition-colors ${r==="import"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"Import from JD"})]}),n.jsxs("form",{onSubmit:D=>R(D,"open"),children:[r==="import"&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upload or Paste JD"}),n.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center mb-4",children:x?n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(cn,{className:"w-8 h-8 text-indigo-600"}),n.jsx("span",{className:"text-gray-900 dark:text-white",children:x.name}),n.jsx("button",{type:"button",onClick:()=>h(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",children:n.jsx(_r,{className:"w-4 h-4 text-gray-500"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(zC,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag & drop a JD file or click to upload"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"PDF, DOCX  Max 5MB"}),n.jsx("input",{type:"file",accept:".pdf,.docx,.doc",onChange:Z,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),n.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 my-4",children:"OR"}),n.jsx("textarea",{placeholder:"Paste raw JD text here...",value:p,onChange:D=>v(D.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:H,disabled:b||!x&&!p.trim(),className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Parsing JD..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"w-4 h-4"}),"Parse JD"]})}),Object.keys(N).length>0&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:n.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 flex items-center gap-2",children:[n.jsx(yc,{className:"w-4 h-4"}),"Fields auto-filled from JD. Review and edit below."]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",name:"date_created",value:u.date_created,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Client ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"client_id",value:u.client_id,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select Client"}),_.map(D=>n.jsx("option",{value:D.id,children:D.client_name},D.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client TA (Contact)"}),n.jsx("input",{type:"text",name:"client_ta",value:u.client_ta,onChange:S,placeholder:"Client's HR/TA contact name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Title ",n.jsx("span",{className:"text-red-500",children:"*"}),N.job_title&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"job_title",value:u.job_title,onChange:S,required:!0,placeholder:"e.g., Senior SAP FICO Consultant",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"mode",value:u.mode,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience ",n.jsx("span",{className:"text-red-500",children:"*"}),N.experience&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"experience",value:u.experience,onChange:S,required:!0,placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"}),N.location&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"location",value:u.location,onChange:S,required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),n.jsx("input",{type:"text",name:"duration",value:u.duration,onChange:S,placeholder:"e.g., 6 months, Full-time permanent",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["No of Positions ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"no_of_positions",value:u.no_of_positions,onChange:S,required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Budget / CTC ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"budget",value:u.budget,onChange:S,required:!0,placeholder:"e.g., 15-20 LPA",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Timings"}),n.jsx("input",{type:"text",name:"work_timings",value:u.work_timings,onChange:S,placeholder:"e.g., 5:30 AM - 2:30 PM (Australian Shift)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Joining Preference"}),n.jsx("input",{type:"text",name:"joining_preference",value:u.joining_preference,onChange:S,placeholder:"e.g., Immediate joiners only",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Skills ",n.jsx("span",{className:"text-red-500",children:"*"}),N.skills&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:u.skills.map((D,Y)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[D,n.jsx("button",{type:"button",onClick:()=>O(D),className:"hover:text-indigo-900 dark:hover:text-indigo-100",children:n.jsx(_r,{className:"w-3 h-3"})})]},Y))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:m,onChange:D=>g(D.target.value),onKeyPress:I,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:n.jsx(bi,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"jd_text",value:u.jd_text,onChange:S,required:!0,rows:10,placeholder:"Enter the full job description...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),e==="account_manager"&&C.length>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign Recruiters"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:C.map(D=>n.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-colors ${u.recruiter_ids.includes(D.id)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-300 dark:border-gray-600 hover:border-indigo-300"}`,children:[n.jsx("input",{type:"checkbox",checked:u.recruiter_ids.includes(D.id),onChange:()=>L(D.id),className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:D.full_name||D.email})]},D.id))})]}),e==="account_manager"&&n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes for Recruiter (Internal)"}),n.jsx("textarea",{name:"notes_for_recruiter",value:u.notes_for_recruiter||"",onChange:D=>f(Y=>({...Y,notes_for_recruiter:D.target.value})),rows:3,placeholder:"Private instructions for assigned recruiters...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:D=>R(D,"draft"),disabled:a,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Publish Job"})]})]})]})]})},PF=({userRole:e="recruiter"})=>{const{jobId:t}=Or(),[r]=ea(),s=t||r.get("jobId"),a=Tt(),[i,l]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState(null),[f,m]=y.useState(!1),[g,x]=y.useState({job_id:s||"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[],last_date_to_apply:"",status:"draft"}),[h,p]=y.useState(""),[v,b]=y.useState([]);y.useEffect(()=>{j(),s&&N(s)},[s]);const j=async()=>{try{const S=await G.get("/v1/job-management/requirements");b(S.data.jobs||S.data||[])}catch(S){console.error("Error fetching jobs:",S)}},N=async S=>{c(!0);try{const O=(await G.get(`/v1/job-management/requirements/${S}`)).data;x(I=>{var L;return{...I,job_id:S,title:O.title||O.job_title||"",client_display_name:((L=O.client)==null?void 0:L.client_name)||"",jd_content:O.jd_text||O.description||"",ctc:O.budget||"",location:O.location||"",mode:O.mode||"hybrid",experience:O.experience||"",skills:O.skills||[]}})}catch(E){console.error("Error fetching job details:",E)}finally{c(!1)}},w=S=>{const{name:E,value:O}=S.target;x(I=>({...I,[E]:O}))},_=S=>{const E=S.target.value;E?N(E):x(O=>({...O,job_id:"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[]}))},k=()=>{h.trim()&&!g.skills.includes(h.trim())&&(x(S=>({...S,skills:[...S.skills,h.trim()]})),p(""))},C=S=>{x(E=>({...E,skills:E.skills.filter(O=>O!==S)}))},T=S=>{(S.key==="Enter"||S.key===",")&&(S.preventDefault(),k())},P=async(S,E="draft")=>{var O,I;if(S.preventDefault(),!g.title.trim()){u("Title is required");return}if(!g.jd_content.trim()){u("Job description is required");return}if(!g.last_date_to_apply){u("Last date to apply is required");return}l(!0),u(null);try{const L={...g,status:E,job_id:g.job_id||null},Z=g.job_id?`/v1/job-management/requirements/${g.job_id}/postings`:"/v1/job-management/postings";await G.post(Z,L),m(!0),setTimeout(()=>{a(g.job_id?`${e==="account_manager"?"/am":"/recruiter"}/jobs/${g.job_id}`:`${e==="account_manager"?"/am":"/recruiter"}/jobs`)},1500)}catch(L){console.error("Error creating posting:",L),u(((I=(O=L.response)==null?void 0:O.data)==null?void 0:I.detail)||"Failed to create posting. Please try again.")}finally{l(!1)}},A=new Date().toISOString().split("T")[0];return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Qh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Job Posting"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create an external job posting for candidates"})]})]}),f&&n.jsxs("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-3",children:[n.jsx(yc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Job posting created successfully! Redirecting..."})]}),d&&n.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-3",children:[n.jsx(Ks,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-700 dark:text-red-300",children:d}),n.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:n.jsx(_r,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]}),n.jsx("form",{onSubmit:S=>P(S,"active"),children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Existing Job (Optional)"}),n.jsxs("select",{name:"job_id",value:g.job_id,onChange:_,disabled:!!s,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-100 dark:disabled:bg-gray-600",children:[n.jsx("option",{value:"",children:"-- Create standalone posting --"}),v.map(S=>{var E;return n.jsxs("option",{value:S.id,children:[S.title||S.job_title," -"," ",((E=S.client)==null?void 0:E.client_name)||"Unknown Client"]},S.id)})]}),o&&n.jsxs("p",{className:"mt-2 text-sm text-indigo-600 flex items-center gap-2",children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Loading job details..."]}),g.job_id&&!o&&n.jsxs("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[n.jsx(yc,{className:"w-4 h-4"}),"Fields auto-filled from linked job"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Posting Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"title",value:g.title,onChange:w,required:!0,placeholder:"e.g., Senior Software Engineer",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Company Display Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"client_display_name",value:g.client_display_name,onChange:w,required:!0,placeholder:"e.g., Leading IT MNC or actual company name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"location",value:g.location,onChange:w,required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Work Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"mode",value:g.mode,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"experience",value:g.experience,onChange:w,required:!0,placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["CTC / Salary Range ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"ctc",value:g.ctc,onChange:w,required:!0,placeholder:"e.g., 15-20 LPA or As per market standards",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Last Date to Apply ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",name:"last_date_to_apply",value:g.last_date_to_apply,onChange:w,required:!0,min:A,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx(Ya,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Required Skills ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.skills.map((S,E)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[S,n.jsx("button",{type:"button",onClick:()=>C(S),className:"hover:text-indigo-900 dark:hover:text-indigo-100",children:n.jsx(_r,{className:"w-3 h-3"})})]},E))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:h,onChange:S=>p(S.target.value),onKeyPress:T,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:n.jsx(bi,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"jd_content",value:g.jd_content,onChange:w,required:!0,rows:10,placeholder:"Enter the job description that will be visible to candidates...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This description will be visible to candidates. Remove any confidential information."})]}),n.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>a(-1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:S=>P(S,"draft"),disabled:i,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"w-4 h-4 animate-spin"}),"Publishing..."]}):"Publish Posting"})]})]})})]})};function Oze(){const e=Tt(),t=({isActive:s})=>`block px-4 py-2 rounded-md text-sm font-medium transition ${s?"bg-blue-600 text-white":"text-gray-200 hover:bg-gray-700"}`;function r(){localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e("/login",{replace:!0}),window.location.reload()}return n.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[n.jsxs("aside",{className:"w-64 bg-gray-900 text-white flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-700",children:[n.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Vendor Portal"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supply Partner Access"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[n.jsx(cr,{to:"/vendor/dashboard",className:t,children:"Dashboard"}),n.jsx(cr,{to:"/vendor/candidates",className:t,children:"Candidates"}),n.jsx(cr,{to:"/vendor/bgv-assigned",className:t,children:"Assigned BGV"}),n.jsx(cr,{to:"/vendor/documents",className:t,children:"Documents"}),n.jsx(cr,{to:"/vendor/profile",className:t,children:"Profile"})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-700",children:n.jsx("button",{onClick:r,className:"w-full text-left text-sm px-4 py-2 rounded-md text-red-400 hover:bg-red-500/10 hover:text-red-300 transition",children:"Logout"})}),n.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 text-center",children:[" ",new Date().getFullYear()," ATS Platform"]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n.jsx(po,{})})]})}function Zp(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function Rze(e){if(!e)throw new Error("formData is required");const t=await G.post("/v1/vendor/candidates",e,{headers:{"Content-Type":"multipart/form-data"}});return Zp(t)}async function Lze(){const e=await G.get("/v1/vendor/candidates");return Zp(e)}async function Ize(){const e=await G.get("/v1/vendor/dashboard");return Zp(e)}async function Fze(){const e=await G.get("/v1/vendor/profile");return Zp(e)}async function Dze(e){if(!e)throw new Error("payload is required");const t=await G.put("/v1/vendor/profile",e);return Zp(t)}function OF(){var o,c,d,u,f,m,g;const[e,t]=y.useState(null),[r,s]=y.useState(!0),[a,i]=y.useState("");y.useEffect(()=>{l()},[]);async function l(){try{s(!0);const x=await Ize();t(x)}catch(x){console.error(x),i("Unable to load dashboard data")}finally{s(!1)}}return r?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading vendor dashboard"}):a?n.jsx("div",{className:"text-sm text-red-600",children:a}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Dashboard"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Overview of your candidate supply, deployments, and payouts"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(_g,{title:"Candidates Supplied",value:e.total_candidates,sub:"Total profiles submitted"}),n.jsx(_g,{title:"Active Deployments",value:e.active_deployments,sub:"Currently working",highlight:!0}),n.jsx(_g,{title:"Pending Timesheets",value:e.pending_timesheets,sub:"Awaiting approval",warning:e.pending_timesheets>0}),n.jsx(_g,{title:"Expected Payout",value:`${$ze(e.expected_payout)}`,sub:"Based on approved work",success:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Supply Pipeline Snapshot"}),n.jsx(wg,{label:"New / Screening",value:((o=e.pipeline)==null?void 0:o.new)||0}),n.jsx(wg,{label:"Shortlisted",value:((c=e.pipeline)==null?void 0:c.shortlisted)||0}),n.jsx(wg,{label:"Interviewing",value:((d=e.pipeline)==null?void 0:d.interview)||0}),n.jsx(wg,{label:"Selected",value:((u=e.pipeline)==null?void 0:u.selected)||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Compliance Status"}),n.jsx(sw,{label:"GST / Agreement",status:(f=e.compliance)==null?void 0:f.gst}),n.jsx(sw,{label:"Insurance",status:(m=e.compliance)==null?void 0:m.insurance}),n.jsx(sw,{label:"Tax Documents",status:(g=e.compliance)==null?void 0:g.tax}),n.jsx("p",{className:"text-xs text-gray-400 mt-3",children:" Payouts may be held if documents expire or are rejected."})]})]})]})}function _g({title:e,value:t,sub:r,highlight:s,warning:a,success:i}){let l="text-gray-800";return s&&(l="text-indigo-600"),a&&(l="text-yellow-600"),i&&(l="text-green-600"),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:`text-2xl font-semibold ${l}`,children:t}),n.jsx("p",{className:"text-xs text-gray-400",children:r})]})}function wg({label:e,value:t}){return n.jsxs("div",{className:"flex justify-between text-sm py-1",children:[n.jsx("span",{className:"text-gray-600",children:e}),n.jsx("span",{className:"font-medium text-gray-800",children:t})]})}function sw({label:e,status:t}){const r=t==="approved"?"text-green-600":t==="rejected"?"text-red-600":"text-yellow-600";return n.jsxs("div",{className:"flex justify-between text-sm py-1",children:[n.jsx("span",{className:"text-gray-600",children:e}),n.jsx("span",{className:`font-medium ${r}`,children:t||"pending"})]})}function $ze(e=0){return Number(e).toLocaleString("en-IN")}function Mze({onSuccess:e}){const[t,r]=y.useState({full_name:"",email:"",phone:"",experience_years:"",billing_rate:"",skills:""}),[s,a]=y.useState(null),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,u]=y.useState("");function f(g){const{name:x,value:h}=g.target;r(p=>({...p,[x]:h}))}async function m(g){if(g.preventDefault(),c(""),u(""),!s){c("Resume is required");return}try{l(!0);const x=new FormData;x.append("full_name",t.full_name),x.append("email",t.email),x.append("phone",t.phone),x.append("experience_years",t.experience_years),x.append("billing_rate",t.billing_rate),x.append("skills",t.skills),x.append("resume",s),await Rze(x),u("Candidate uploaded successfully"),r({full_name:"",email:"",phone:"",experience_years:"",billing_rate:"",skills:""}),a(null),e&&e()}catch(x){console.error(x),c("Failed to upload candidate")}finally{l(!1)}}return n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-medium mb-3",children:"Upload New Candidate"}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("input",{name:"full_name",value:t.full_name,onChange:f,placeholder:"Full Name",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"email",type:"email",value:t.email,onChange:f,placeholder:"Email",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"phone",value:t.phone,onChange:f,placeholder:"Phone",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"experience_years",type:"number",value:t.experience_years,onChange:f,placeholder:"Experience (years)",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"billing_rate",type:"number",value:t.billing_rate,onChange:f,placeholder:"Billing Rate",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"skills",value:t.skills,onChange:f,placeholder:"Skills (comma separated)",className:"border rounded px-3 py-2 text-sm"})]}),n.jsx("div",{children:n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:g=>a(g.target.files[0]),className:"text-sm"})}),o&&n.jsx("p",{className:"text-sm text-red-600",children:o}),d&&n.jsx("p",{className:"text-sm text-green-600",children:d}),n.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm disabled:opacity-60",children:i?"Uploading...":"Upload Candidate"})]})]})}const Bze={new:{label:"New",className:"bg-gray-100 text-gray-700"},screened:{label:"Screened",className:"bg-blue-100 text-blue-700"},shortlisted:{label:"Shortlisted",className:"bg-indigo-100 text-indigo-700"},interview:{label:"Interview",className:"bg-purple-100 text-purple-700"},selected:{label:"Selected",className:"bg-green-100 text-green-700"},rejected:{label:"Rejected",className:"bg-red-100 text-red-700"}};function Uze({status:e}){const t=Bze[e]||{label:e||"Unknown",className:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${t.className}`,children:t.label})}function zze({candidate:e}){return n.jsxs("div",{className:"border rounded-lg p-4 flex justify-between items-start",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:e.full_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[e.email,"  ",e.phone]}),e.experience_years!==void 0&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Experience: ",e.experience_years," years"]}),e.skills&&e.skills.length>0&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Skills:"," ",Array.isArray(e.skills)?e.skills.join(", "):e.skills]}),e.billing_rate&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Billing Rate: ",e.billing_rate]})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[n.jsx(Uze,{status:e.status}),n.jsx("span",{className:"text-[10px] text-gray-400",children:"Source: Vendor"})]})]})}function Wze(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState("");y.useEffect(()=>{l()},[]);async function l(){try{s(!0),i("");const o=await Lze();t((o==null?void 0:o.data)??[])}catch(o){console.error(o),i("Failed to load candidates")}finally{s(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Candidates"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload and track candidates submitted by your organization."})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx(Mze,{onSuccess:l})}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h2",{className:"text-md font-medium mb-4",children:"Uploaded Candidates"}),r&&n.jsx("p",{className:"text-sm text-gray-500",children:"Loading candidates..."}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),!r&&e.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No candidates uploaded yet."}),n.jsx("div",{className:"grid gap-3",children:e.map(o=>n.jsx(zze,{candidate:o},o.id))})]})]})}function xV(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function Vze(e){if(!e)throw new Error("formData is required");const t=await G.post("/v1/vendor/documents",e,{headers:{"Content-Type":"multipart/form-data"}});return xV(t)}async function Hze(){const e=await G.get("/v1/vendor/documents");return xV(e)}function qze({onSuccess:e}){const[t,r]=y.useState(""),[s,a]=y.useState(null),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,u]=y.useState("");async function f(m){if(m.preventDefault(),c(""),u(""),!t){c("Please select a document type");return}if(!s){c("Please select a file");return}try{l(!0);const g=new FormData;g.append("document_type",t),g.append("file",s),await Vze(g),u("Document uploaded successfully"),r(""),a(null),e&&e()}catch(g){console.error(g),c("Failed to upload document")}finally{l(!1)}}return n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-medium mb-3",children:"Upload Compliance Document"}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsx("div",{className:"flex flex-col gap-2",children:n.jsxs("select",{value:t,onChange:m=>r(m.target.value),className:"border rounded p-2",required:!0,children:[n.jsx("option",{value:"",children:"Select Document Type"}),n.jsx("option",{value:"GST",children:"GST Certificate"}),n.jsx("option",{value:"NDA",children:"NDA"}),n.jsx("option",{value:"Insurance",children:"Insurance"}),n.jsx("option",{value:"Other",children:"Other"})]})}),n.jsx("div",{className:"flex flex-col gap-2",children:n.jsx("input",{type:"file",onChange:m=>a(m.target.files[0]),className:"border rounded p-2",required:!0})}),o&&n.jsx("p",{className:"text-sm text-red-600",children:o}),d&&n.jsx("p",{className:"text-sm text-green-600",children:d}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:i,children:i?"Uploading...":"Upload Document"})]})]})}function Gze(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState("");y.useEffect(()=>{l()},[]);async function l(){try{s(!0),i("");const o=await Hze();t(o||[])}catch(o){console.error(o),i("Failed to load documents")}finally{s(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Compliance Documents"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload required documents for compliance and payments."})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx(qze,{onSuccess:l})}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h2",{className:"text-md font-medium mb-4",children:"Uploaded Documents"}),r&&n.jsx("p",{className:"text-sm text-gray-500",children:"Loading documents..."}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),!r&&e.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No documents uploaded yet."}),n.jsx("div",{className:"space-y-3",children:e.map(o=>n.jsxs("div",{className:"border rounded-md p-3 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.document_type}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded on ",new Date(o.created_at).toLocaleDateString()]})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o.status==="approved"?"bg-green-100 text-green-700":o.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:o.status})]},o.id))})]})]})}function Jze(){const[e,t]=y.useState(null),[r,s]=y.useState(!0),[a,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState("");y.useEffect(()=>{u()},[]);async function u(){try{s(!0);const g=await Fze();t(g)}catch(g){console.error(g),o("Failed to load vendor profile")}finally{s(!1)}}function f(g){const{name:x,value:h}=g.target;t(p=>({...p,[x]:h}))}async function m(){try{i(!0),o(""),d("");const g={company_name:e.company_name,primary_contact_name:e.primary_contact_name,primary_contact_email:e.primary_contact_email,primary_contact_phone:e.primary_contact_phone};await Dze(g),d("Profile updated successfully")}catch(g){console.error(g),o("Failed to update profile")}finally{i(!1)}}return r?n.jsx("p",{className:"text-sm text-gray-500",children:"Loading profile"}):e?n.jsxs("div",{className:"max-w-3xl space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Profile"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Company and contact information"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Company Details"}),n.jsx(Ng,{label:"Company Name",name:"company_name",value:e.company_name,onChange:f}),n.jsx(RF,{label:"GST Number",value:e.gst_number}),n.jsx(RF,{label:"Payment Terms",value:e.payment_terms})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Primary Contact"}),n.jsx(Ng,{label:"Contact Name",name:"primary_contact_name",value:e.primary_contact_name,onChange:f}),n.jsx(Ng,{label:"Contact Email",name:"primary_contact_email",value:e.primary_contact_email,onChange:f}),n.jsx(Ng,{label:"Contact Phone",name:"primary_contact_phone",value:e.primary_contact_phone,onChange:f}),l&&n.jsx("p",{className:"text-sm text-red-600",children:l}),c&&n.jsx("p",{className:"text-sm text-green-600",children:c}),n.jsx("button",{onClick:m,disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm disabled:opacity-60",children:a?"Saving...":"Save Changes"})]})]}):n.jsx("p",{className:"text-sm text-red-600",children:"Unable to load profile"})}function RF({label:e,value:t}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:"text-sm font-medium text-gray-800",children:t||""})]})}function Ng({label:e,name:t,value:r,onChange:s}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("input",{name:t,value:r||"",onChange:s,className:"border rounded px-3 py-2 text-sm w-full"})]})}function Kze(){const[e,t]=y.useState(!0),[r,s]=y.useState([]);y.useEffect(()=>{a()},[]);async function a(){var i;try{const l=await G.get("/v1/vendor/bgv/assigned");s(((i=l==null?void 0:l.data)==null?void 0:i.items)||[])}catch(l){console.error("Failed to load assigned candidates",l),alert("Failed to load assigned candidates")}finally{t(!1)}}return n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Assigned BGV Candidates"}),e?n.jsx("p",{children:"Loading..."}):r.length===0?n.jsx("div",{className:"p-6 bg-yellow-50 border rounded",children:"No candidates assigned for BGV yet."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(i=>n.jsxs("div",{className:"p-4 border rounded shadow bg-white",children:[n.jsx("h2",{className:"text-lg font-semibold",children:i.full_name}),n.jsx("p",{className:"text-sm text-gray-600",children:i.email}),n.jsxs("p",{className:"mt-2",children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{className:"px-2 py-1 rounded bg-gray-100",children:i.bgv_status||"new"})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Assigned: ",i.bgv_assigned_at||"-"]}),n.jsx("div",{className:"mt-3",children:i.bgv_report_url?n.jsx("a",{href:i.bgv_report_url,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-green-600 text-white rounded",children:"View Report"}):n.jsx("button",{onClick:()=>window.location.href=`/vendor/bgv-submit/${i.id}`,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Submit Report"})})]},i.id))})]})}function Xze(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState("clear"),[a,i]=y.useState(""),[l,o]=y.useState(null),[c,d]=y.useState(!1);async function u(f){if(f.preventDefault(),!l)return alert("Please upload report file");const m=new FormData;m.append("status",r),m.append("remarks",a),m.append("file",l);try{d(!0),await G.post(`/v1/vendor/bgv/${e}/submit`,m,{headers:{"Content-Type":"multipart/form-data"}}),alert("Report submitted successfully"),t("/vendor/bgv-assigned")}catch(g){console.error(g),alert("Failed to submit report")}finally{d(!1)}}return n.jsxs("div",{className:"max-w-xl bg-white p-6 rounded shadow",children:[n.jsx("h1",{className:"text-xl font-bold mb-4",children:"Submit BGV Report"}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{children:"Status*"}),n.jsxs("select",{className:"w-full border p-2 rounded",value:r,onChange:f=>s(f.target.value),children:[n.jsx("option",{value:"clear",children:"Clear"}),n.jsx("option",{value:"red_flag",children:"Red Flag"}),n.jsx("option",{value:"insufficient",children:"Insufficient"})]})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Remarks"}),n.jsx("textarea",{className:"w-full border p-2 rounded",rows:"3",value:a,onChange:f=>i(f.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Upload Report*"}),n.jsx("input",{type:"file",className:"w-full",onChange:f=>o(f.target.files[0])})]}),n.jsx("button",{disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:c?"Submitting...":"Submit Report"})]})]})}function LF(){const[e,t]=y.useState({}),[r,s]=y.useState(!0),[a,i]=y.useState("organization"),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,f]=y.useState(""),[m,g]=y.useState(""),[x,h]=y.useState(!1),[p,v]=y.useState(!1),[b,j]=y.useState(""),[N,w]=y.useState(""),[_,k]=y.useState(null),C=y.useRef(null),[T,P]=y.useState({}),[A,S]=y.useState(""),[E,O]=y.useState("");y.useEffect(()=>{I()},[]);const I=async()=>{var ie,se,z,Te,fe,Ie;try{const ce=await G.get("/v1/settings");t(ce.data);const Ce=((z=(se=(ie=ce.data)==null?void 0:ie.access)==null?void 0:se.two_factor)==null?void 0:z.value)||((Ie=(fe=(Te=ce.data)==null?void 0:Te.security)==null?void 0:fe.two_factor)==null?void 0:Ie.value)||{};P(Ce),s(!1)}catch(ce){console.error("Error loading settings:",ce),s(!1)}},L=async(ie,se,z)=>{try{await G.put("/v1/settings",{module_name:ie,setting_key:se,setting_value:z}),o("Settings saved successfully!"),setTimeout(()=>o(""),3e3),I()}catch(Te){console.error("Error saving settings:",Te),o("Error saving settings")}},Z=[{id:"organization",label:"Organization Profile",icon:""},{id:"access",label:"Access & Roles",icon:""},{id:"recruitment",label:"Recruitment Automation",icon:""},{id:"employee",label:"Employee Management",icon:""},{id:"payroll",label:"Payroll & Finance",icon:""},{id:"communications",label:"Communications",icon:""},{id:"ai",label:"AI & Data Governance",icon:""},{id:"integrations",label:"Integrations & Audit",icon:""},{id:"data",label:"Data Operations",icon:""}],H=()=>{var z;const se=((z=(e.organization||{}).profile)==null?void 0:z.value)||{};return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),n.jsx("input",{type:"text",placeholder:"ATS HR Solutions",value:se.company_name||"",onChange:Te=>L("organization","profile",{...se,company_name:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Industry"}),n.jsxs("select",{value:se.industry||"",onChange:Te=>L("organization","profile",{...se,industry:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Industry"}),n.jsx("option",{value:"technology",children:"Technology"}),n.jsx("option",{value:"finance",children:"Finance"}),n.jsx("option",{value:"healthcare",children:"Healthcare"}),n.jsx("option",{value:"manufacturing",children:"Manufacturing"}),n.jsx("option",{value:"retail",children:"Retail"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Size"}),n.jsxs("select",{value:se.company_size||"",onChange:Te=>L("organization","profile",{...se,company_size:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Size"}),n.jsx("option",{value:"1-10",children:"1-10 employees"}),n.jsx("option",{value:"11-50",children:"11-50 employees"}),n.jsx("option",{value:"51-200",children:"51-200 employees"}),n.jsx("option",{value:"201-500",children:"201-500 employees"}),n.jsx("option",{value:"500+",children:"500+ employees"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),n.jsxs("select",{value:se.timezone||"",onChange:Te=>L("organization","profile",{...se,timezone:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Timezone"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsx("option",{value:"EST",children:"EST (Eastern)"}),n.jsx("option",{value:"PST",children:"PST (Pacific)"}),n.jsx("option",{value:"IST",children:"IST (India)"}),n.jsx("option",{value:"GMT",children:"GMT (London)"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),n.jsx("textarea",{placeholder:"Company address",value:se.address||"",onChange:Te=>L("organization","profile",{...se,address:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:2})]})]})]})})},R=()=>{var Te,fe,Ie;const se=((Te=(e.access||{}).security)==null?void 0:Te.value)||{},z=((Ie=(fe=e==null?void 0:e.access)==null?void 0:fe.roles)==null?void 0:Ie.value)||(T==null?void 0:T.roles)||{admin:"Admin",recruiter:"Recruiter",account_manager:"Account Manager",internal_hr:"Internal HR",consultant:"Consultant",employee:"Employee",accounts:"Accounts",consultant_support:"Consultant Support",candidate:"Candidate"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Security Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin users"})]}),n.jsx("input",{type:"checkbox",checked:se.require_2fa||!1,onChange:ce=>L("access","security",{...se,require_2fa:ce.target.checked}),className:"w-5 h-5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),n.jsx("input",{type:"number",min:"15",max:"480",value:se.session_timeout||60,onChange:ce=>L("access","security",{...se,session_timeout:parseInt(ce.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Password Length"}),n.jsx("input",{type:"number",min:"6",max:"20",value:se.min_password_length||8,onChange:ce=>L("access","security",{...se,min_password_length:parseInt(ce.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Role Permissions Matrix"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Current role-based access control is predefined. Contact support for custom role creation."}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left",children:"Module"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Admin"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Recruiter"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Employee"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200",children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Talent Acquisition"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Employee Management"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" View Only"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Self Only"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Finance & Payroll"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"User Management"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for sensitive roles. Users in enabled roles must configure an authenticator app on next login."})]}),E&&n.jsx("span",{className:"text-sm text-red-600",children:E})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Description"}),n.jsx("th",{className:"px-4 py-2 text-center font-medium text-gray-500",children:"Require 2FA"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.keys(z).map(ce=>{var at;const Ce=!!T[ce],Ye=((at=z[ce])==null?void 0:at.name)||z[ce]||ce.replace(/_/g," ");return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 font-medium text-gray-900 capitalize",children:Ye}),n.jsx("td",{className:"px-4 py-2 text-gray-500",children:ce==="admin"?"Full platform access":ce==="recruiter"?"Manages talent pipeline":ce==="accounts"?"Finance & payroll operations":"Application user"}),n.jsx("td",{className:"px-4 py-2 text-center",children:n.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:Ce,disabled:A===ce,onChange:pe=>Y(ce,pe.target.checked)}),A===ce&&n.jsx("span",{className:"text-xs text-gray-500",children:"Saving"})]})})]},ce)})})]})})]})]})},D=()=>{var se,z,Te,fe,Ie,ce,Ce,Ye;const ie=e.recruitment||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Auto Screening"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Enable Auto Screening"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Automatically screen candidates using AI"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:((z=(se=ie.auto_screening_enabled)==null?void 0:se.value)==null?void 0:z.enabled)||!1,onChange:at=>{var pe,ye;return L("recruitment","auto_screening_enabled",{enabled:at.target.checked,threshold:((ye=(pe=ie.auto_screening_enabled)==null?void 0:pe.value)==null?void 0:ye.threshold)||70})},className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screening Threshold (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:((fe=(Te=ie.auto_screening_enabled)==null?void 0:Te.value)==null?void 0:fe.threshold)||70,onChange:at=>{var pe,ye;return L("recruitment","auto_screening_enabled",{enabled:((ye=(pe=ie.auto_screening_enabled)==null?void 0:pe.value)==null?void 0:ye.enabled)||!0,threshold:parseInt(at.target.value)})},className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interview Configuration"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Text Interviews"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Enable text-based AI interviews"})]}),n.jsx("input",{type:"checkbox",checked:((ce=(Ie=ie.interview_modes)==null?void 0:Ie.value)==null?void 0:ce.text)||!1,onChange:at=>{var pe;return L("recruitment","interview_modes",{...(pe=ie.interview_modes)==null?void 0:pe.value,text:at.target.checked})},className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Video Interviews"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Enable video-based AI interviews"})]}),n.jsx("input",{type:"checkbox",checked:((Ye=(Ce=ie.interview_modes)==null?void 0:Ce.value)==null?void 0:Ye.video)||!1,onChange:at=>{var pe;return L("recruitment","interview_modes",{...(pe=ie.interview_modes)==null?void 0:pe.value,video:at.target.checked})},className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Lead Scoring Rules"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure automatic lead qualification scoring"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"LinkedIn profile present"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+20 points"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Email engagement (opens/clicks)"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+30 points"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Referred by employee"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+40 points"})]})]})]})]})},Y=async(ie,se)=>{var z,Te;O(""),S(ie);try{await G.put("/v1/settings/2fa",{role:ie,enabled:se}),P(fe=>({...fe,[ie]:se}))}catch(fe){console.error("Failed to update two-factor setting",fe),O(((Te=(z=fe==null?void 0:fe.response)==null?void 0:z.data)==null?void 0:Te.detail)||"Unable to update the two-factor requirement right now.")}finally{S("")}},M=()=>{var Te,fe;const ie=e.leaves||{},se=((Te=ie.leave_policy)==null?void 0:Te.value)||{},z=((fe=ie.approval_workflow)==null?void 0:fe.value)||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Leave Allocation (Days per Year)"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(se).filter(([Ie])=>Ie!=="auto_approve_threshold").map(([Ie,ce])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 capitalize",children:Ie.replace("_"," ")}),n.jsx("input",{type:"number",value:ce,onChange:Ce=>L("leaves","leave_policy",{...se,[Ie]:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},Ie))})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Approval Workflow"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Require Manager Approval"}),n.jsx("p",{className:"text-sm text-gray-600",children:"All leave requests need manager approval"})]}),n.jsx("input",{type:"checkbox",checked:z.requires_manager_approval||!1,onChange:Ie=>L("leaves","approval_workflow",{...z,requires_manager_approval:Ie.target.checked}),className:"w-5 h-5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auto-approve leaves up to (days)"}),n.jsx("input",{type:"number",value:z.auto_approve_days||2,onChange:Ie=>L("leaves","approval_workflow",{...z,auto_approve_days:parseInt(Ie.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Management"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review Cycle Frequency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"semi-annual",children:"Semi-Annual"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Enable Self-Assessment"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Allow employees to self-evaluate"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Probation Settings"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Probation Period (days)"}),n.jsx("input",{type:"number",defaultValue:90,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})},X=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Configuration"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pay Frequency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"biweekly",children:"Bi-weekly"}),n.jsx("option",{value:"weekly",children:"Weekly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"USD",children:"USD ($)"}),n.jsx("option",{value:"EUR",children:"EUR ()"}),n.jsx("option",{value:"GBP",children:"GBP ()"}),n.jsx("option",{value:"INR",children:"INR ()"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fiscal Year Start"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"january",children:"January"}),n.jsx("option",{value:"april",children:"April"}),n.jsx("option",{value:"july",children:"July"}),n.jsx("option",{value:"october",children:"October"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Calculation Method"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"automatic",children:"Automatic"}),n.jsx("option",{value:"manual",children:"Manual"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Standard Deduction Types"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Income Tax"}),n.jsx("span",{className:"text-blue-600",children:"Percentage-based"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Provident Fund (PF)"}),n.jsx("span",{className:"text-blue-600",children:"Percentage-based"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Health Insurance"}),n.jsx("span",{className:"text-blue-600",children:"Fixed Amount"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Loans & Advances"}),n.jsx("span",{className:"text-blue-600",children:"One-time"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Settings"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Invoice Number Format"}),n.jsx("input",{type:"text",placeholder:"INV-{YYYY}-{MM}-{###}",defaultValue:"INV-{YYYY}-{MM}-{###}",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Placeholders: ","{YYYY}"," year, ","{MM}"," month, ","{###}"," auto-increment"]})]})]})]}),ne=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Configuration (SMTP)"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"SMTP Host"}),n.jsx("input",{type:"text",placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"SMTP Port"}),n.jsx("input",{type:"number",placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Encryption"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"tls",children:"TLS"}),n.jsx("option",{value:"ssl",children:"SSL"}),n.jsx("option",{value:"none",children:"None"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),n.jsx("input",{type:"text",placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),n.jsx("input",{type:"password",placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Provider (Twilio)"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account SID"}),n.jsx("input",{type:"text",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auth Token"}),n.jsx("input",{type:"password",placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"WhatsApp Business API"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number ID"}),n.jsx("input",{type:"text",placeholder:"123456789012345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Account ID"}),n.jsx("input",{type:"text",placeholder:"123456789012345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Slack Integration"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook URL"}),n.jsx("input",{type:"url",placeholder:"https://hooks.slack.com/services/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Candidate stage change notifications"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Leave request notifications"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Performance review reminders"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]})]}),J=()=>{var z;const se=((z=(e.ai||{}).models)==null?void 0:z.value)||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AI Models Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Resume Parser Model"}),n.jsxs("select",{value:se.resume_parser||"local-nlp-v1",onChange:Te=>L("ai","models",{...se,resume_parser:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"local-nlp-v1",children:"Local NLP v1 (No API costs)"}),n.jsx("option",{value:"local-nlp-v2",children:"Local NLP v2 (Improved accuracy)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interview Bot Model"}),n.jsxs("select",{value:se.interview_bot||"local-llm-v1",onChange:Te=>L("ai","models",{...se,interview_bot:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"local-llm-v1",children:"Local LLM v1 (Fast, basic)"}),n.jsx("option",{value:"local-llm-v2",children:"Local LLM v2 (Slower, better)"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Bias Detection"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Monitor AI decisions for bias"})]}),n.jsx("input",{type:"checkbox",checked:se.bias_detection==="enabled",onChange:Te=>L("ai","models",{...se,bias_detection:Te.target.checked?"enabled":"disabled"}),className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Governance & Privacy"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data Retention Period (days)"}),n.jsx("input",{type:"number",defaultValue:365,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep candidate/employee data after departure"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Anonymize PII in Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Remove personally identifiable information from analytics"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Explainable AI"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Provide explanations for all AI decisions"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Resume Data Extraction"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure which data fields to extract from resumes"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Skills","Experience","Education","Certifications","Projects","Languages"].map(Te=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:Te})]},Te))})]})]})},ue=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Third-Party Integrations"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Connect external services to Akshu HR"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"SMTP Email"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Configure in Communications tab"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Slack"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Team notifications"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Twilio SMS"}),n.jsx("p",{className:"text-xs text-gray-500",children:"SMS notifications"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"API Keys & Webhooks"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"API Key (for external integrations)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:"ak_live_xxxxxxxxxxxxxxxxxxxxxxxx",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Regenerate"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook Endpoint"}),n.jsx("input",{type:"url",placeholder:"https://your-domain.com/webhooks/akshu-hr",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive real-time event notifications"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Audit Logs"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Total events logged"}),n.jsx("span",{className:"font-semibold",children:"1,247"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"User actions tracked"}),n.jsx("span",{className:"font-semibold",children:"892"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"System events"}),n.jsx("span",{className:"font-semibold",children:"355"})]})]}),n.jsx("button",{className:"mt-4 w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Export Audit Logs"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Backup & Export"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:"Automatic Backups"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Daily backup at 2:00 AM UTC"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Create Manual Backup Now"}),n.jsx("button",{className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Export All Data (CSV)"})]})]})]}),ke=async()=>{var ie,se;if(f(""),!m.trim()){h(!0);return}d(!0);try{const z=await G.get("/v1/jobs/export",{params:{format:"xlsx",password:m},responseType:"blob"}),Te=new Blob([z.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),fe=window.URL.createObjectURL(Te),Ie=document.createElement("a");Ie.href=fe,Ie.setAttribute("download",`jobs-export-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(Ie),Ie.click(),Ie.parentNode.removeChild(Ie),window.URL.revokeObjectURL(fe)}catch(z){console.error("Job export failed",z),f(((se=(ie=z==null?void 0:z.response)==null?void 0:ie.data)==null?void 0:se.detail)||"Failed to export jobs. Please try again.")}finally{d(!1),g(""),h(!1)}},ve=async ie=>{var z,Te;if(ie.preventDefault(),w(""),j(""),!_){w("Please select a CSV or XLSX file before uploading.");return}const se=new FormData;se.append("file",_),v(!0);try{await G.post("/v1/jobs/bulk",se,{headers:{"Content-Type":"multipart/form-data"}}),j("Bulk jobs uploaded successfully."),k(null),C.current&&(C.current.value="")}catch(fe){console.error("Bulk upload failed",fe),w(((Te=(z=fe==null?void 0:fe.response)==null?void 0:z.data)==null?void 0:Te.detail)||"Failed to upload jobs. Please review the file and try again.")}finally{v(!1)}},je=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Export Jobs"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download the latest job postings in Excel format for offline audits or sharing."}),n.jsxs("div",{className:"mb-4 border border-dashed border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Password protection required"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admins must set a download password before exporting to ensure the XLSX file stays secure."}),n.jsx("button",{type:"button",onClick:()=>{h(!0),f("")},className:"mt-3 text-sm text-indigo-600 hover:underline",children:"Set password & export"})]}),u&&n.jsx("div",{className:"mb-3 rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:u}),n.jsx("button",{onClick:()=>{x||h(!0)},disabled:c,className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",children:c?"Preparing file...":"Export Jobs (.xlsx)"})]}),x&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Protect Export"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter a password that will encrypt the XLSX download. Recipients must use it to open the file."}),n.jsx("input",{type:"password",value:m,onChange:ie=>g(ie.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Enter password"}),n.jsxs("div",{className:"flex gap-3 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{h(!1),g("")},className:"px-4 py-2 border rounded text-gray-600",children:"Cancel"}),n.jsx("button",{type:"button",disabled:!m||c,onClick:ke,className:"px-4 py-2 rounded bg-indigo-600 text-white disabled:opacity-60",children:c?"Encrypting...":"Export with password"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bulk Job Upload"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload multiple job postings at once using a CSV or Excel template. Ensure required headings like title, department, location, and status are present."}),n.jsxs("form",{className:"space-y-4",onSubmit:ve,children:[n.jsxs("div",{children:[n.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",ref:C,onChange:ie=>{var se;k(((se=ie.target.files)==null?void 0:se[0])||null),w(""),j("")},className:"w-full rounded border border-gray-300 px-3 py-2"}),_&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",n.jsx("strong",{children:_.name})]})]}),N&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:N}),b&&n.jsx("div",{className:"rounded border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-700",children:b}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"submit",disabled:p,className:"flex-1 rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700 disabled:opacity-60",children:p?"Uploading...":"Upload Jobs"}),n.jsx("button",{type:"button",onClick:()=>{k(null),w(""),j(""),C.current&&(C.current.value="")},className:"rounded border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50",children:"Clear"})]})]})]})]});return r?n.jsx("div",{className:"p-8",children:"Loading settings..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"System Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure your HR platform modules and preferences"})]}),l&&n.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:l}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:n.jsx("div",{className:"flex overflow-x-auto",children:Z.map(ie=>n.jsxs("button",{onClick:()=>i(ie.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 transition-all whitespace-nowrap ${a===ie.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"text-lg",children:ie.icon}),n.jsx("span",{className:"font-medium text-sm",children:ie.label})]},ie.id))})}),n.jsxs("div",{className:"p-8",children:[a==="organization"&&H(),a==="access"&&R(),a==="recruitment"&&D(),a==="employee"&&M(),a==="payroll"&&X(),a==="communications"&&ne(),a==="ai"&&J(),a==="integrations"&&ue(),a==="data"&&je()]})]})]})}function Yze(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState([]),[u,f]=y.useState(""),m=Tt(),g=async()=>{try{const p=localStorage.getItem("access_token"),v=await G.get("/v1/client/master",{headers:{Authorization:`Bearer ${p}`}});t(v.data||[])}catch(p){console.error("Failed to load clients",p)}finally{s(!1)}};if(y.useEffect(()=>{g()},[]),r)return n.jsx("div",{className:"p-4",children:"Loading clients..."});const x=async p=>{var v;try{const b=localStorage.getItem("access_token");o(p),f(((v=p.account_manager)==null?void 0:v.id)||""),i(!0);const j=await G.get("/v1/client/admin/account-managers",{headers:{Authorization:`Bearer ${b}`}});d(j.data||[])}catch(b){console.error("Failed to load account managers",b),alert("Failed to load account managers")}},h=async()=>{if(!u){alert("Please select an Account Manager");return}try{const p=localStorage.getItem("access_token");await G.put(`/v1/client/master/${l.id}/assign-account-manager`,{account_manager_id:u},{headers:{Authorization:`Bearer ${p}`}}),alert("Account Manager assigned successfully"),i(!1),g()}catch(p){console.error("Assign failed",p),alert("Failed to assign Account Manager")}};return n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsx("h1",{className:"text-2xl font-bold",children:"Client List"})}),e.length===0?n.jsx("div",{className:"text-gray-500",children:"No clients found"}):n.jsx("div",{className:"mt-6 rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 border",children:"S. No."})," ",n.jsx("th",{className:"p-2 border",children:"Name"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Company"}),n.jsx("th",{className:"p-2 border",children:"Account Manager"}),n.jsx("th",{className:"p-2 border",children:"Status"}),n.jsx("th",{className:"p-2 border",children:"Action"})]})}),n.jsx("tbody",{children:e.map((p,v)=>{var b,j;return n.jsxs("tr",{className:"border hover:bg-slate-50 transition",children:[n.jsx("td",{className:"p-2 border text-center font-medium",children:v+1}),n.jsx("td",{className:"p-2 border",children:p.name||"N/A"}),n.jsx("td",{className:"p-2 border",children:p.email||"N/A"}),n.jsx("td",{className:"p-2 border",children:p.company_name||"N/A"}),n.jsx("td",{className:"p-2 border",children:(b=p.account_manager)!=null&&b.name?n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:p.account_manager.name}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:"Not Assigned"})}),n.jsx("td",{className:"p-2 border",children:p.is_active?n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Active"}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-200 text-gray-600",children:"Inactive"})}),n.jsxs("td",{className:"p-2 border text-center space-x-2",children:[n.jsx("button",{onClick:()=>m(`/clients/${p.id}/requirements`),className:"px-3 py-1.5 rounded-md text-sm bg-slate-100 text-slate-700 hover:bg-slate-200",children:"View"}),n.jsx("button",{onClick:()=>x(p),className:"px-3 py-1.5 rounded-md text-sm bg-blue-600 text-white hover:bg-blue-700",children:(j=p.account_manager)!=null&&j.id?"Change Account Manager":"Assign Account Manager"})]})]},p.id)})})]})}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl w-[400px] shadow-lg",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Assign Account Manager"}),n.jsxs("p",{className:"text-sm mb-2",children:["Client:"," ",n.jsx("b",{children:(l==null?void 0:l.company_name)||(l==null?void 0:l.name)})]}),n.jsxs("select",{className:"w-full border p-2 rounded mb-4",value:u,onChange:p=>f(p.target.value),children:[n.jsx("option",{value:"",children:"Select Account Manager"}),c.map(p=>n.jsx("option",{value:p.id,children:p.full_name},p.id))]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>i(!1),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded",onClick:h,children:"Assign"})]})]})})]})}function IF(){const{clientId:e}=Or(),[t,r]=y.useState([]),s=Tt();y.useEffect(()=>{a()},[]);async function a(){try{const i=await ol.getClientRequirements(e);r(i||[])}catch(i){console.error("Failed to load client requirements",i)}}return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Client Requirements"}),n.jsx("button",{onClick:()=>s(`/clients/${e}/requirements/create`),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ New Requirement"})]}),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("th",{className:"p-2",children:"Requirement ID"})," ",n.jsx("th",{className:"p-2",children:"Job Title"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created"})]})}),n.jsx("tbody",{children:t.length===0?n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:3,children:"No requirements found"})}):t.map((i,l)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 text-center font-medium",children:l+1}),n.jsx("td",{className:"p-2 text-gray-700",children:i.requirement_code||""}),n.jsx("td",{className:"p-2",children:i.title}),n.jsx("td",{children:i.status||"N/A"}),n.jsx("td",{className:"text-sm text-gray-700",children:i.created_at?(()=>{const o=new Date(i.created_at),c=o.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),d=o.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${c} | ${d}`})():"-"})]},i.requirement_code))})]})})]})}function FF(){const{clientId:e}=Or(),t=Tt(),[r,s]=y.useState({title:"",skills:"",location:"",budget:"",duration:"",sla:""});function a(l){s({...r,[l.target.name]:l.target.value})}async function i(){try{await ol.createClientRequirement(e,{...r,skills:r.skills.split(",").map(l=>l.trim())}),alert("Requirement created successfully"),t(`/clients/${e}/requirements`)}catch(l){console.error("Requirement create failed",l),alert("Failed to create requirement")}}return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow p-6 rounded",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create Requirement"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Job Title"}),n.jsx("input",{name:"title",className:"border p-2 w-full rounded",placeholder:"e.g. Python Developer",value:r.title,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Location"}),n.jsx("input",{name:"location",className:"border p-2 w-full rounded",placeholder:"e.g. Bangalore",value:r.location,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Skills"}),n.jsx("input",{name:"skills",className:"border p-2 w-full rounded",placeholder:"e.g. Python, Django, AWS",value:r.skills,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Budget"}),n.jsx("input",{name:"budget",className:"border p-2 w-full rounded",placeholder:"e.g. 12 LPA",value:r.budget,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Duration"}),n.jsx("input",{name:"duration",className:"border p-2 w-full rounded",placeholder:"e.g. 6 Months",value:r.duration,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"SLA"}),n.jsx("input",{name:"sla",className:"border p-2 w-full rounded",placeholder:"e.g. 30 Days",value:r.sla,onChange:a})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:i,className:"bg-green-600 text-white px-5 py-2 rounded",children:"Save"}),n.jsx("button",{onClick:()=>t(-1),className:"bg-gray-300 px-5 py-2 rounded",children:"Cancel"})]})]})}function Zze(){const{clientId:e}=Or();return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-4 border-b mb-4 pb-2",children:[n.jsx(cr,{to:`/clients/${e}/requirements`,className:({isActive:t})=>t?"font-bold text-blue-600":"text-gray-600",children:"Requirements"}),n.jsx(cr,{to:`/clients/${e}/requirements/create`,className:({isActive:t})=>t?"font-bold text-blue-600":"text-gray-600",children:"+ Create Requirement"})]}),n.jsx(po,{})]})}function Qze({candidate:e,offer:t}){return e?n.jsxs("div",{className:"p-8 bg-white border rounded text-sm leading-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-lg font-bold",children:"ASUUKI PRIVATE LIMITED"}),n.jsx("p",{children:"Off# 216, Prajay Corporate House, 1-10-64, Chikoti Gardens, Begumpet, Hyderabad, Telangana  500016"}),n.jsx("p",{children:"www.asuuki.com | hr@asuuki.com"})]}),n.jsxs("p",{className:"mb-4",children:[n.jsx("b",{children:"Date:"})," ",new Date().toLocaleDateString()]}),n.jsx("p",{className:"mb-4",children:n.jsxs("b",{children:["Dear ",e.full_name,","]})}),n.jsx("p",{children:"Welcome to Asuuki Private Limited!"}),n.jsxs("p",{children:["We have greatly enjoyed our recent discussions with you and are pleased to offer you the role of ",n.jsx("b",{children:t.job_title}),' with Asuuki Private Limited ("Asuuki"). Your place of posting will be'," ",n.jsx("b",{children:t.work_location}),"."]}),n.jsxs("p",{children:["Your Annual Gross remuneration package inclusive of all perks and details of your salary package is mentioned in Annexure  A of this letter. Your total CTC will be"," ",n.jsxs("b",{children:[t.currency," ",t.compensation]}),"."]}),n.jsxs("p",{children:["You are expected to join on ",n.jsx("b",{children:t.start_date}),". If you are unable to join by this date, please notify us immediately to seek an extension."]}),n.jsxs("p",{children:["You will be on probation for a period of ",n.jsx("b",{children:t.probation_period})," ","from your joining date. During probation, your employment may be terminated by either party with one months notice."]}),n.jsx("p",{children:"You are required to maintain the confidentiality of company information, and any work developed during employment remains the intellectual property of the company."}),n.jsx("p",{children:"At the time of joining, you need to bring the documents mentioned in Annexure B for verification."}),n.jsxs("p",{children:["Please sign the duplicate copy of this letter in token of your acceptance of the above on or before ",n.jsx("b",{children:t.acceptance_deadline}),"."]}),n.jsx("p",{className:"mt-6",children:"We look forward to working with you and wish you success in your career with us."}),n.jsxs("p",{className:"mt-6",children:["For Asuuki Private Limited,",n.jsx("br",{}),n.jsx("b",{children:"Shekhar Singh"}),n.jsx("br",{}),"HR Manager"]})]}):n.jsx("div",{className:"p-6 border rounded text-gray-500",children:"Select candidate to preview offer letter"})}const eWe=e=>G.post("/v1/offers/send",e);function tWe({candidate:e,onClose:t}){const[r,s]=y.useState({});async function a(i){await eWe(i),alert("Offer letter sent successfully"),t==null||t()}return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(aV,{candidate:e,onClose:t,setExternalForm:s,onSubmit:a}),n.jsx(Qze,{candidate:e,offer:r})]})}const hu=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??null:null},rWe=async(e,t)=>{const r=await G.post(`/v1/timesheets/deployments/${e}`,t);return hu(r)},nWe=async e=>{const t=await G.post(`/v1/timesheets/${e}/submit`);return hu(t)},sWe=async()=>(await G.get("/v1/timesheets/consultant")).data,aWe=async()=>{const e=await G.get("/v1/timesheets/am/timesheets");return hu(e)},iWe=async e=>{const t=await G.post(`/v1/timesheets/${e}/am-approve`);return hu(t)},gV=async(e,t)=>{const r=await G.post(`/v1/timesheets/${e}/reject`,{reason:t});return hu(r)},yV=async()=>{const e=await G.get("/v1/timesheets/client");return hu(e)},lWe=async e=>{const t=await G.post(`/v1/timesheets/${e}/client-approve`);return hu(t)},oWe=e=>({draft:" Draft",submitted:" Submitted",am_approved:" AM Approved",client_approved:" Client Approved",rejected:" Rejected",locked:" Locked"})[e]||e;function cWe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),a=Tt(),i=async()=>{var l;try{const o=await sWe();t((o==null?void 0:o.timesheets)||((l=o==null?void 0:o.data)==null?void 0:l.timesheets)||[])}catch{alert("Failed to load timesheets")}finally{s(!1)}};return y.useEffect(()=>{i()},[]),y.useEffect(()=>{const l=()=>i();return window.addEventListener("focus",l),()=>window.removeEventListener("focus",l)},[]),r?n.jsx("p",{children:"Loading..."}):n.jsxs("div",{style:{padding:20},children:[n.jsx("h2",{children:"My Timesheets"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[n.jsxs("p",{style:{color:"#555"},children:["Total Timesheets: ",e.length]}),n.jsx("button",{style:{padding:"8px 16px",background:"#2563eb",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},onClick:()=>a("/consultant/timesheets/new"),children:"+ Create Timesheet"})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:12},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f9fafb"},children:[n.jsx("th",{style:kg,children:"Period"}),n.jsx("th",{style:kg,children:"Total Hours"}),n.jsx("th",{style:kg,children:"Status"}),n.jsx("th",{style:kg,children:"Action"})]})}),n.jsx("tbody",{children:e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:40,color:"#777"},children:n.jsxs("div",{children:[n.jsx("p",{children:"No timesheets created yet."}),n.jsx("button",{style:{marginTop:12,padding:"8px 16px",background:"#2563eb",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},onClick:()=>a("/consultant/timesheets/new"),children:"+ Create First Timesheet"})]})})}):e.map(l=>n.jsxs("tr",{children:[n.jsxs("td",{style:Sg,children:[l.period_start,"  ",l.period_end]}),n.jsx("td",{style:Sg,children:l.total_hours}),n.jsx("td",{style:Sg,children:oWe(l.status)}),n.jsx("td",{style:Sg,children:(l.status==="draft"||l.status==="rejected")&&n.jsx("button",{style:{padding:"4px 10px",background:"#fde68a",border:"1px solid #f59e0b",borderRadius:4,cursor:"pointer"},onClick:()=>a(`/consultant/timesheets/edit/${l.id}`),children:"Edit"})})]},l.id))})]})]})}const kg={border:"1px solid #e5e7eb",padding:"10px",textAlign:"left",fontWeight:600},Sg={border:"1px solid #e5e7eb",padding:"10px"};function DF(){const{id:e}=Or(),t=Tt(),[r,s]=y.useState(null),[a,i]=y.useState(""),[l,o]=y.useState("weekly"),[c,d]=y.useState(""),[u,f]=y.useState(""),[m,g]=y.useState([{work_date:"",hours:0,description:""}]),[x,h]=y.useState(null),[p,v]=y.useState("draft"),[b,j]=y.useState(!1),N=!["draft","rejected"].includes(p);y.useEffect(()=>{e?_(e):w()},[e]);const w=async()=>{var S,E,O;try{const I=await G.get("/v1/consultant/dashboard"),L=((S=I.data)==null?void 0:S.active_deployment)||((O=(E=I.data)==null?void 0:E.data)==null?void 0:O.active_deployment);if(!L){alert("No active deployment found");return}s(L),i(L.id)}catch(I){console.error(I),alert("Failed to load deployment")}},_=async S=>{var E,O,I,L;try{const Z=await G.get(`/v1/timesheets/${S}`),H=((E=Z.data)==null?void 0:E.data)||Z.data;h(H.id),i(H.deployment_id),o(H.period_type),d((O=H.period_start)==null?void 0:O.slice(0,10)),f((I=H.period_end)==null?void 0:I.slice(0,10)),v(H.status),g((L=H.entries)!=null&&L.length?H.entries.map(R=>{var Y,M,X;const D=(Y=R.work_date)==null?void 0:Y.slice(0,10);return D<((M=H.period_start)==null?void 0:M.slice(0,10))||D>((X=H.period_end)==null?void 0:X.slice(0,10))?{...R,work_date:""}:{...R,work_date:D}}):[{work_date:"",hours:0,description:""}])}catch(Z){console.error(Z),alert("Failed to load timesheet")}},k=()=>{g([...m,{work_date:"",hours:0,description:""}])},C=(S,E,O)=>{const I=[...m];I[S][E]=O,g(I)},T=async()=>{if(console.log(" SAVE CLICKED"),console.log("deploymentId:",a),console.log("current timesheetId BEFORE save:",x),!a){alert("No deployment found");return}if(u<c){alert("End date cannot be before start date");return}for(let S of m){if(!S.work_date){alert("Work date is required");return}if(S.work_date<c||S.work_date>u){alert("Work date must be within selected period");return}}try{j(!0);const E=await rWe(a,{period_type:l,period_start:c,period_end:u,entries:m});console.log(" SAVE RESPONSE ID:",E.id),v("draft"),h(E.id),t(`/consultant/timesheets/edit/${E.id}`),alert("Timesheet saved as draft")}catch(S){console.error(S),alert("Failed to save timesheet")}finally{j(!1)}},P=async()=>{var S,E,O,I,L,Z;if(console.log(" SUBMIT CLICKED"),console.log("timesheetId at submit time:",x),!x){alert("Timesheet ID missing");return}try{j(!0);const H=await G.get(`/v1/timesheets/${x}`);if((((E=(S=H.data)==null?void 0:S.data)==null?void 0:E.status)||((O=H.data)==null?void 0:O.status))!=="draft"){alert("Timesheet already submitted");return}await nWe(x),alert("Timesheet submitted successfully"),t("/consultant/timesheets")}catch(H){console.error(((I=H.response)==null?void 0:I.data)||H),alert(((Z=(L=H.response)==null?void 0:L.data)==null?void 0:Z.detail)||"Submit failed")}finally{j(!1)}},A=m.reduce((S,E)=>S+Number(E.hours||0),0);return n.jsx("div",{style:{padding:24},children:n.jsxs("div",{style:{maxWidth:900,margin:"0 auto",background:"#fff",padding:24,borderRadius:8,boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:[n.jsx("h2",{style:{marginBottom:4},children:e?"Edit Timesheet":"New Timesheet"}),N&&n.jsx("p",{style:{color:"#dc2626",marginBottom:12},children:"This timesheet has been submitted and is read-only."}),r&&n.jsxs("p",{style:{color:"#555",marginBottom:20},children:[n.jsx("b",{children:"Client:"})," ",r.client_name,"  | ",n.jsx("b",{children:"Role:"})," ",r.role]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("label",{children:"Period Type"}),n.jsxs("select",{value:l,disabled:N,onChange:S=>o(S.target.value),style:Lu,children:[n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Start Date"}),n.jsx("input",{type:"date",value:c,disabled:N,onChange:S=>d(S.target.value),style:Lu})]}),n.jsxs("div",{children:[n.jsx("label",{children:"End Date"}),n.jsx("input",{type:"date",value:u,disabled:N,onChange:S=>f(S.target.value),style:Lu})]})]}),n.jsx("h4",{style:{marginBottom:8},children:"Work Entries"}),n.jsxs("table",{style:dWe,children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f9fafb"},children:[n.jsx("th",{style:aw,children:"Date"}),n.jsx("th",{style:aw,children:"Hours"}),n.jsx("th",{style:aw,children:"Description"})]})}),n.jsx("tbody",{children:m.map((S,E)=>n.jsxs("tr",{children:[n.jsx("td",{style:iw,children:n.jsx("input",{type:"date",value:S.work_date,min:c,max:u,disabled:N,onChange:O=>C(E,"work_date",O.target.value),style:Lu})}),n.jsx("td",{style:iw,children:n.jsx("input",{type:"number",value:S.hours,disabled:N,onChange:O=>C(E,"hours",Number(O.target.value)),style:Lu})}),n.jsx("td",{style:iw,children:n.jsx("input",{value:S.description,disabled:N,onChange:O=>C(E,"description",O.target.value),style:Lu})})]},E))})]}),!N&&n.jsx("button",{onClick:k,style:mWe,children:"+ Add Row"}),n.jsxs("p",{style:{marginTop:16},children:[n.jsx("b",{children:"Total Hours:"})," ",A]}),n.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:12},children:[!e&&["draft","rejected"].includes(p)&&n.jsx("button",{onClick:T,disabled:b,style:fWe,children:"Save Draft"}),p==="draft"&&n.jsx("button",{onClick:P,disabled:b,style:uWe,children:"Submit"})]})]})})}const Lu={width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:4},dWe={width:"100%",borderCollapse:"collapse"},aw={border:"1px solid #e5e7eb",padding:10,textAlign:"left"},iw={border:"1px solid #e5e7eb",padding:8},uWe={background:"#2563eb",color:"#fff",padding:"8px 16px",border:"none",borderRadius:4,cursor:"pointer"},fWe={background:"#e5e7eb",padding:"8px 16px",border:"none",borderRadius:4,cursor:"pointer"},mWe={marginTop:8,background:"transparent",border:"none",color:"#2563eb",cursor:"pointer"};function hWe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState(null),c=async()=>{try{s(!0);const f=await aWe();t((f==null?void 0:f.timesheets)||[])}catch(f){console.error(f),alert("Failed to load timesheets")}finally{s(!1)}};y.useEffect(()=>{c()},[]);const d=async f=>{if(window.confirm("Approve this timesheet?"))try{await iWe(f),alert("Timesheet approved"),c()}catch(m){console.error(m),alert("Approval failed")}},u=async()=>{if(!a.trim()){alert("Please enter rejection reason");return}try{await gV(l,a),alert("Timesheet rejected"),o(null),i(""),c()}catch(f){console.error(f),alert("Reject failed")}};return r?n.jsx("p",{style:{padding:24},children:"Loading timesheets..."}):n.jsxs("div",{style:{padding:24,maxWidth:1200,margin:"0 auto"},children:[n.jsx("h2",{style:{marginBottom:20},children:"Pending Timesheets"}),e.length===0&&n.jsxs("div",{style:{background:"#ffffff",border:"1px dashed #e5e7eb",borderRadius:12,padding:"48px 24px",textAlign:"center",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),n.jsx("h3",{style:{fontSize:18,color:"#111827",marginBottom:6},children:"No Pending Timesheets"}),n.jsxs("p",{style:{fontSize:14},children:["All submitted timesheets have been reviewed.",n.jsx("br",{}),"New submissions will appear here."]})]}),e.map(f=>{var m;return n.jsxs("div",{style:pWe,children:[n.jsxs("div",{style:xWe,children:[n.jsxs("div",{children:[n.jsx("h3",{style:{margin:0,fontSize:18},children:f.consultant_name||""}),n.jsx("span",{style:gWe,children:"Consultant"})]}),n.jsx("span",{style:yWe,children:Vs(f.status)===""?"Submitted":Vs(f.status)})]}),n.jsxs("div",{style:vWe,children:[n.jsxs("p",{children:[n.jsx("b",{children:"Client:"})," ",f.client_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Period:"})," ",lw(f.period_start)," "," ",lw(f.period_end)]}),n.jsxs("div",{style:bWe,children:[" Total Hours: ",f.total_hours]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("h4",{style:{marginBottom:8},children:"Entries"}),n.jsxs("table",{style:jWe,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:ow,children:"Date"}),n.jsx("th",{style:ow,children:"Hours"}),n.jsx("th",{style:ow,children:"Description"})]})}),n.jsx("tbody",{children:(m=f.entries)==null?void 0:m.map(g=>n.jsxs("tr",{children:[n.jsx("td",{style:cw,children:lw(g.work_date)}),n.jsx("td",{style:cw,children:g.hours}),n.jsx("td",{style:cw,children:g.description})]},g.id))})]})]})]}),n.jsxs("div",{style:_We,children:[n.jsx("button",{style:wWe,onClick:()=>d(f.id),children:"Approve"}),n.jsx("button",{style:$F,onClick:()=>o(f.id),children:"Reject"})]})]},f.id)}),l&&n.jsx("div",{style:kWe,children:n.jsxs("div",{style:SWe,children:[n.jsx("h3",{style:{marginTop:0},children:"Reject Timesheet"}),n.jsx("textarea",{rows:4,placeholder:"Enter rejection reason",value:a,onChange:f=>i(f.target.value),style:CWe}),n.jsxs("div",{style:{marginTop:14,textAlign:"right"},children:[n.jsx("button",{onClick:()=>o(null),style:NWe,children:"Cancel"}),n.jsx("button",{onClick:u,style:$F,children:"Reject"})]})]})})]})}const lw=e=>e?new Date(e).toLocaleDateString("en-GB"):"",pWe={background:"#fff",borderRadius:10,padding:18,marginBottom:18,boxShadow:"0 4px 10px rgba(0,0,0,0.08)"},xWe={display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},gWe={fontSize:13,color:"#6b7280"},yWe={background:"#fef3c7",color:"#92400e",padding:"4px 12px",borderRadius:999,fontSize:12,fontWeight:500},vWe={marginTop:14},bWe={marginTop:6,fontSize:16,fontWeight:600,color:"#111827"},jWe={width:"100%",borderCollapse:"collapse",marginTop:8},ow={textAlign:"left",padding:"8px",fontSize:13,background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},cw={padding:"8px",fontSize:14,borderBottom:"1px solid #e5e7eb"},_We={marginTop:16,display:"flex",gap:10},wWe={background:"#16a34a",color:"#fff",border:"none",padding:"8px 18px",borderRadius:6,cursor:"pointer",fontWeight:500},$F={background:"#dc2626",color:"#fff",border:"none",padding:"8px 18px",borderRadius:6,cursor:"pointer",fontWeight:500},NWe={background:"#e5e7eb",border:"none",padding:"8px 18px",borderRadius:6,marginRight:8},kWe={position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center"},SWe={background:"#fff",padding:20,borderRadius:10,width:420},CWe={width:"100%",padding:10,borderRadius:6,border:"1px solid #d1d5db"},AWe={submitted:"bg-blue-100 text-blue-700",am_approved:"bg-yellow-100 text-yellow-800",client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"},EWe={submitted:"Submitted",am_approved:"AM Approved",client_approved:"Client Approved",rejected:"Rejected"};function TWe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0),[a,i]=y.useState(null),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,f]=y.useState(""),m=async()=>{try{s(!0);const b=await yV(),j=((b==null?void 0:b.timesheets)||[]).filter(N=>N.status==="am_approved");t(j)}catch(b){console.error(b),alert("Failed to load timesheets")}finally{s(!1)}};y.useEffect(()=>{m()},[]);const g=b=>b.trim()?b.trim().length<10?"Reason must be at least 10 characters":b.trim().length>500?"Reason must not exceed 500 characters":"":"Rejection reason is required",x=b=>{const j=b.target.value;o(j),u&&f(g(j))},h=async b=>{if(window.confirm("Approve this timesheet?"))try{await lWe(b),alert("Timesheet approved successfully!"),m()}catch{alert("Failed to approve timesheet")}},p=async()=>{const b=g(l);if(b){f(b);return}d(!0);try{await gV(a,l.trim()),alert("Timesheet rejected successfully!"),i(null),o(""),f(""),m()}catch{alert("Failed to reject timesheet")}finally{d(!1)}},v=()=>{i(null),o(""),f("")};return r?n.jsx("p",{className:"text-gray-500",children:"Loading timesheets..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-900",children:"Pending Timesheets"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve timesheets submitted by consultants"})]}),e.length===0&&n.jsxs("div",{className:"mt-6 border-2 border-dashed border-gray-200 rounded-xl p-16 text-center bg-white",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("span",{className:"text-6xl",children:""})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"No Pending Timesheets"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["All submitted timesheets have been reviewed.",n.jsx("br",{}),"New submissions will appear here."]})]}),e.map(b=>{var j;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6 max-w-4xl hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-bold text-gray-900",children:b.consultant_name||"Consultant"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[b.period_start,"  ",b.period_end]})]}),n.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-semibold uppercase ${AWe[b.status]||"bg-gray-100 text-gray-600"}`,children:EWe[b.status]||b.status})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Hours"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[b.total_hours," hrs"]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Timesheet Entries"}),n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:((j=b.entries)==null?void 0:j.length)>0?b.entries.map(N=>n.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 px-3 py-2 rounded border border-gray-200",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:N.work_date}),n.jsx("p",{className:"text-gray-600 text-xs mt-1 truncate max-w-md",children:N.description||"No description"})]}),n.jsxs("span",{className:"font-semibold text-gray-900 whitespace-nowrap ml-2",children:[N.hours," hrs"]})]},N.id)):n.jsx("p",{className:"text-gray-500 text-sm",children:"No entries"})})]}),b.status==="am_approved"&&n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>h(b.id),className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:" Approve"}),n.jsx("button",{onClick:()=>i(b.id),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors",children:" Reject"})]})]},b.id)}),a&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Reject Timesheet"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rejection Reason *"}),n.jsx("textarea",{className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none ${u?"border-red-500 ring-2 ring-red-200":"border-gray-300"}`,placeholder:"Please provide a detailed reason for rejection (10-500 characters)",value:l,onChange:x,rows:"4"}),u&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/500 characters"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:p,disabled:c||u!==""||!l.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Rejecting...":"Confirm Reject"}),n.jsx("button",{onClick:v,disabled:c,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"})]})]})})]})}const PWe={client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"};function OWe(){const[e,t]=y.useState([]),[r,s]=y.useState(!0);y.useEffect(()=>{a()},[]);const a=async()=>{const i=await yV(),l=((i==null?void 0:i.timesheets)||[]).filter(o=>o.status!=="am_approved");t(l),s(!1)};return r?n.jsx("p",{className:"text-gray-500",children:"Loading history..."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Timesheet History"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Approved and rejected timesheets"})]}),e.length===0&&n.jsx("div",{className:"bg-white border rounded-lg p-6 text-gray-500",children:"No history available"}),e.length>0&&n.jsx("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3",children:"Consultant"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Period"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Total Hours"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Status"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:i.consultant_name}),n.jsxs("td",{className:"px-4 py-3 text-gray-600",children:[i.period_start,"  ",i.period_end]}),n.jsx("td",{className:"px-4 py-3",children:i.total_hours}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${PWe[i.status]}`,children:i.status.replace("_"," ").toUpperCase()})})]},i.id))})]})})]})}function MF(){const[e,t]=y.useState([]),[r,s]=y.useState(!0);y.useEffect(()=>{a()},[]);async function a(){var i;try{const l=await G.get("/v1/timesheets/am/history");t(((i=l.data)==null?void 0:i.timesheets)||[])}catch{alert("Failed to load history")}finally{s(!1)}}return r?n.jsx("p",{children:"Loading history..."}):n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Timesheet History"}),e.length===0?n.jsx("p",{className:"text-gray-500",children:"No history found"}):n.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100 text-sm",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Consultant"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),n.jsx("th",{className:"px-4 py-3",children:"Period"}),n.jsx("th",{className:"px-4 py-3",children:"Hours"}),n.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:i.consultant_name||""}),n.jsx("td",{className:"px-4 py-3",children:i.client_name||""}),n.jsxs("td",{className:"px-4 py-3 text-center",children:[BF(i.period_start),"  ",BF(i.period_end)]}),n.jsx("td",{className:"px-4 py-3 text-center font-semibold",children:i.total_hours}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx(RWe,{status:i.status})})]},i.id))})]})})]})}const BF=e=>e?new Date(e).toLocaleDateString("en-GB"):"";function RWe({status:e}){const t={am_approved:"bg-blue-100 text-blue-700",client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t[e]||"bg-gray-100 text-gray-600"}`,children:Vs(e)===""?"Submitted":Vs(e)})}function LWe(){const[e,t]=y.useState(!!localStorage.getItem("access_token")),[r,s]=y.useState(localStorage.getItem("role")),a=()=>{t(!0),s(localStorage.getItem("role"))},i=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),t(!1),s(null)};return e?r&&r.toLowerCase()==="candidate"?n.jsx(Io,{children:n.jsxs(Lo,{children:[n.jsxs(Ae,{path:"/candidate",element:n.jsx(dBe,{onLogout:i}),children:[n.jsx(Ae,{index:!0,element:n.jsx(Bn,{to:"dashboard",replace:!0})}),n.jsx(Ae,{path:"dashboard",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"notifications",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"complete-profile",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"apply-jobs",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"applied-jobs",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"my-interviews",element:n.jsx(P8e,{})}),n.jsx(Ae,{path:"my-interviews/:interviewId",element:n.jsx(D8e,{})}),n.jsx(Ae,{path:"profile",element:n.jsx(Hg,{})}),n.jsx(Ae,{path:"profile/:id",element:n.jsx(Hg,{})}),n.jsx(Ae,{path:"portal",element:n.jsx(Bn,{to:"dashboard",replace:!0})}),n.jsx(Ae,{path:"jobs",element:n.jsx(Bn,{to:"dashboard",replace:!0})}),n.jsx(Ae,{path:"applications",element:n.jsx(Bn,{to:"dashboard",replace:!0})})]}),n.jsx(Ae,{path:"/interviews/:id",element:n.jsx(ZSe,{})}),n.jsx(Ae,{path:"/interviews/:id/feedback",element:n.jsx(i_,{})}),n.jsx(Ae,{path:"/live-interviews/:id/detail",element:n.jsx(f_,{})}),n.jsx(Ae,{path:"/interviews/:id/detail",element:n.jsx(Hx,{})}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/candidate/dashboard",replace:!0})})]})}):r==="super_admin"?n.jsx(Io,{children:n.jsx(pBe,{onLogout:i,children:n.jsxs(Lo,{children:[n.jsx(Ae,{path:"/super-admin",element:n.jsx(Bn,{to:"/super-admin/dashboard",replace:!0})}),n.jsx(Ae,{path:"/super-admin/dashboard",element:n.jsx(yBe,{})}),n.jsx(Ae,{path:"/super-admin/business-setup",element:n.jsx(jBe,{})}),n.jsx(Ae,{path:"/super-admin/clients",element:n.jsx(_Be,{})}),n.jsx(Ae,{path:"/super-admin/admin-management",element:n.jsx(NBe,{})}),n.jsx(Ae,{path:"/super-admin/roles-permissions",element:n.jsx(OBe,{})}),n.jsx(Ae,{path:"/super-admin/operations-analytics",element:n.jsx(IBe,{})}),n.jsx(Ae,{path:"/super-admin/finance-billing",element:n.jsx($Be,{})}),n.jsx(Ae,{path:"/super-admin/compliance-security",element:n.jsx(MBe,{})}),n.jsx(Ae,{path:"/super-admin/system-settings",element:n.jsx(BBe,{})}),n.jsx(Ae,{path:"/super-admin/audit-logs",element:n.jsx(nUe,{})}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/super-admin/dashboard",replace:!0})})]})})}):r==="vendor"?n.jsx(Io,{children:n.jsxs(Lo,{children:[n.jsxs(Ae,{path:"/vendor",element:n.jsx(Oze,{}),children:[n.jsx(Ae,{index:!0,element:n.jsx(OF,{})}),n.jsx(Ae,{path:"dashboard",element:n.jsx(OF,{})}),n.jsx(Ae,{path:"candidates",element:n.jsx(Wze,{})}),n.jsx(Ae,{path:"documents",element:n.jsx(Gze,{})}),n.jsx(Ae,{path:"profile",element:n.jsx(Jze,{})}),n.jsx(Ae,{path:"bgv-assigned",element:n.jsx(Kze,{})}),n.jsx(Ae,{path:"bgv-submit/:id",element:n.jsx(Xze,{})})]}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/vendor/dashboard",replace:!0})})]})}):r==="client"?n.jsx(Io,{children:n.jsxs(Lo,{children:[n.jsxs(Ae,{path:"/client",element:n.jsx(oBe,{onLogout:i}),children:[n.jsx(Ae,{index:!0,element:n.jsx(z_,{})}),n.jsx(Ae,{path:"dashboard",element:n.jsx(z_,{})}),n.jsx(Ae,{path:"requirements",element:n.jsx(DI,{})}),n.jsx(Ae,{path:"requirements/create",element:n.jsx(Eze,{})}),n.jsx(Ae,{path:"timesheets",element:n.jsx(TWe,{})}),n.jsx(Ae,{path:"timesheet-history",element:n.jsx(OWe,{})}),n.jsx(Ae,{path:"jobs/:jobId/submissions",element:n.jsx(c0,{})}),n.jsx(Ae,{path:"submissions",element:n.jsx(c0,{})}),n.jsx(Ae,{path:"deployments",element:n.jsx($I,{})}),n.jsx(Ae,{path:"invoices",element:n.jsx(MI,{})})]}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/client/dashboard",replace:!0})})]})}):r==="recruiter"?n.jsx(Io,{children:n.jsxs(Lo,{children:[n.jsxs(Ae,{path:"/recruiter",element:n.jsx(cBe,{onLogout:i}),children:[n.jsx(Ae,{index:!0,element:n.jsx($_,{})}),n.jsx(Ae,{path:"dashboard",element:n.jsx($_,{})}),n.jsx(Ae,{path:"assigned-jobs",element:n.jsx(TI,{})}),n.jsx(Ae,{path:"assigned-jobs/:id",element:n.jsx(wF,{})}),n.jsx(Ae,{path:"requirements",element:n.jsx(CI,{})}),n.jsx(Ae,{path:"requirements/:requirementId",element:n.jsx(AI,{})}),n.jsx(Ae,{path:"profile",element:n.jsx(a9e,{})}),n.jsx(Ae,{path:"settings",element:n.jsx(i9e,{})}),n.jsx(Ae,{path:"trackers",element:n.jsx(I9e,{})}),n.jsx(Ae,{path:"reports",element:n.jsx(D9e,{})}),n.jsx(Ae,{path:"job-management",element:n.jsx(AF,{userRole:"recruiter"})}),n.jsx(Ae,{path:"job-management/:id",element:n.jsx(EF,{userRole:"recruiter"})}),n.jsx(Ae,{path:"job-management/new",element:n.jsx(TF,{userRole:"recruiter"})}),n.jsx(Ae,{path:"job-management/:jobId/posting/new",element:n.jsx(PF,{userRole:"recruiter"})}),n.jsx(Ae,{path:"jobs",element:n.jsx(s_,{})}),n.jsx(Ae,{path:"candidates",element:n.jsx(O_,{})}),n.jsx(Ae,{path:"candidates/:id",element:n.jsx(O_,{})}),n.jsx(Ae,{path:"candidate-profile",element:n.jsx(NI,{})}),n.jsx(Ae,{path:"candidate-profile/:id",element:n.jsx(Hg,{})}),n.jsx(Ae,{path:"matching",element:n.jsx(kI,{})}),n.jsx(Ae,{path:"jobs/:id/submissions",element:n.jsx(g_,{})}),n.jsx(Ae,{path:"resdex/search-resumes",element:n.jsx(eF,{})}),n.jsx(Ae,{path:"resdex/advanced-search",element:n.jsx(iF,{})}),n.jsx(Ae,{path:"resdex/send-nvite",element:n.jsx(tF,{})}),n.jsx(Ae,{path:"resdex/manage-searches",element:n.jsx(rF,{})}),n.jsx(Ae,{path:"resdex/folders",element:n.jsx(nF,{})}),n.jsx(Ae,{path:"interviews",element:n.jsx(nR,{})}),n.jsx(Ae,{path:"interviews/calendar",element:n.jsx(FR,{})}),n.jsx(Ae,{path:"interviews/logs",element:n.jsx($R,{})}),n.jsx(Ae,{path:"interviews/:id",element:n.jsx(Hx,{})}),n.jsx(Ae,{path:"interviews/:id/detail",element:n.jsx(Hx,{})}),n.jsx(Ae,{path:"live-interviews/:id/detail",element:n.jsx(f_,{})}),n.jsx(Ae,{path:"interviews/:id/feedback",element:n.jsx(i_,{})}),n.jsx(Ae,{path:"candidates/:id/interviews",element:n.jsx(DR,{})}),n.jsx(Ae,{path:"onboarding",element:n.jsx(sR,{})}),n.jsx(Ae,{path:"employees",element:n.jsx(aR,{})}),n.jsx(Ae,{path:"employee/dashboard",element:n.jsx(lR,{})}),n.jsx(Ae,{path:"employees/directory",element:n.jsx(iR,{})}),n.jsx(Ae,{path:"employees/:id",element:n.jsx(a_,{})}),n.jsx(Ae,{path:"candidate-workflow",element:n.jsx(LI,{})})]}),n.jsx(Ae,{path:"/campaigns",element:n.jsx(pR,{})}),n.jsx(Ae,{path:"/leads",element:n.jsx(xR,{})}),n.jsx(Ae,{path:"/leaves",element:n.jsx(dR,{})}),n.jsx(Ae,{path:"/attendance",element:n.jsx(uR,{})}),n.jsx(Ae,{path:"/performance",element:n.jsx(fR,{})}),n.jsx(Ae,{path:"/alumni",element:n.jsx(oR,{})}),n.jsx(Ae,{path:"/finance",element:n.jsx(cR,{})}),n.jsx(Ae,{path:"/users",element:n.jsx(hR,{})}),n.jsx(Ae,{path:"/roles",element:n.jsx(PR,{})}),n.jsx(Ae,{path:"/permissions",element:n.jsx(OR,{})}),n.jsx(Ae,{path:"/roles-list",element:n.jsx(RR,{})}),n.jsx(Ae,{path:"/permissions-list",element:n.jsx(LR,{})}),n.jsx(Ae,{path:"/role-permission-matrix",element:n.jsx(IR,{})}),n.jsx(Ae,{path:"/settings",element:n.jsx(LF,{})}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/recruiter/dashboard",replace:!0})})]})}):r==="account_manager"?n.jsx(Io,{children:n.jsx(SI,{children:n.jsx(MR,{children:n.jsxs(Lo,{children:[n.jsxs(Ae,{path:"/account-manager",element:n.jsx(uBe,{onLogout:i}),children:[n.jsx(Ae,{index:!0,element:n.jsx(m_,{})}),n.jsx(Ae,{path:"dashboard",element:n.jsx(m_,{})}),n.jsx(Ae,{path:"requirements",element:n.jsx(hF,{})}),n.jsx(Ae,{path:"requirements/:id",element:n.jsx(pF,{})}),n.jsx(Ae,{path:"submissions",element:n.jsx($Ee,{})}),n.jsx(Ae,{path:"interview-calendar",element:n.jsx(AEe,{})}),n.jsx(Ae,{path:"interview-logs",element:n.jsx(FEe,{})}),n.jsx(Ae,{path:"candidate-review",element:n.jsx(pze,{})}),n.jsx(Ae,{path:"assignments",element:n.jsx(HR,{})}),n.jsx(Ae,{path:"assign/:id",element:n.jsx(xF,{})}),n.jsx(Ae,{path:"timesheets",element:n.jsx(BEe,{})}),n.jsx(Ae,{path:"timesheet-history",element:n.jsx(MF,{})}),n.jsx(Ae,{path:"clients",element:n.jsx(vEe,{})}),n.jsx(Ae,{path:"reports",element:n.jsx(WEe,{})}),n.jsx(Ae,{path:"profile",element:n.jsx(UEe,{})}),n.jsx(Ae,{path:"settings",element:n.jsx(zEe,{})}),n.jsx(Ae,{path:"job-management",element:n.jsx(AF,{userRole:"account_manager"})}),n.jsx(Ae,{path:"job-management/:id",element:n.jsx(EF,{userRole:"account_manager"})}),n.jsx(Ae,{path:"job-management/new",element:n.jsx(TF,{userRole:"account_manager"})}),n.jsx(Ae,{path:"job-management/:jobId/posting/new",element:n.jsx(PF,{userRole:"account_manager"})})]}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/account-manager/dashboard",replace:!0})})]})})})}):n.jsx(Io,{children:n.jsx(SI,{children:n.jsx(MR,{children:n.jsx(mBe,{onLogout:i,children:n.jsxs(Lo,{children:[n.jsx(Ae,{path:"/offers/send/:candidateId",element:n.jsx(tWe,{})}),n.jsx(Ae,{path:"/consultant/dashboard",element:n.jsx(iBe,{})}),n.jsx(Ae,{path:"/consultant/timesheets",element:n.jsx(cWe,{})}),n.jsx(Ae,{path:"/consultant/timesheets/new",element:n.jsx(DF,{})}),n.jsx(Ae,{path:"/consultant/timesheets/edit/:id",element:n.jsx(DF,{})}),n.jsx(Ae,{path:"/account-manager/timesheets",element:n.jsx(hWe,{})}),n.jsx(Ae,{path:"/account-manager/timesheet-history",element:n.jsx(MF,{})}),n.jsx(Ae,{path:"/consultant/profile",element:n.jsx(lBe,{})}),n.jsx(Ae,{path:"/client/dashboard",element:n.jsx(z_,{})}),n.jsx(Ae,{path:"/client/requirements",element:n.jsx(DI,{})}),n.jsx(Ae,{path:"/settings",element:n.jsx(LF,{})}),n.jsx(Ae,{path:"/client/jobs/:jobId/submissions",element:n.jsx(c0,{})}),n.jsx(Ae,{path:"/client/deployments",element:n.jsx($I,{})}),n.jsx(Ae,{path:"/client/invoices",element:n.jsx(MI,{})}),n.jsx(Ae,{path:"/dashboard",element:r==="admin"?n.jsx(wSe,{}):n.jsx(Bn,{to:r==="account_manager"?"/account-manager/dashboard":r==="consultant"?"/consultant/dashboard":"/",replace:!0})}),n.jsx(Ae,{path:"/clients",element:n.jsx(Yze,{})}),n.jsxs(Ae,{path:"/clients/:clientId",element:n.jsx(Zze,{}),children:[n.jsx(Ae,{index:!0,element:n.jsx(IF,{})}),n.jsx(Ae,{path:"requirements",element:n.jsx(IF,{})}),n.jsx(Ae,{path:"requirements/create",element:n.jsx(FF,{})})]}),n.jsx(Ae,{path:"/clients/:clientId/requirements/create",element:n.jsx(FF,{})}),n.jsx(Ae,{path:"/candidate-dashboard",element:n.jsx(_u,{})}),n.jsx(Ae,{path:"/jobs",element:n.jsx(s_,{})}),n.jsx(Ae,{path:"/recruitment/jobs",element:n.jsx(s_,{})}),n.jsx(Ae,{path:"/recruitment/jobs/create",element:n.jsx(VEe,{})}),n.jsx(Ae,{path:"/recruitment/jobs/:id",element:n.jsx(Sj,{})}),n.jsx(Ae,{path:"/recruitment/jobs/:id/edit",element:n.jsx(qEe,{})}),n.jsx(Ae,{path:"/recruitment/jobs/:id/match",element:n.jsx(JEe,{})}),n.jsx(Ae,{path:"/recruitment/jobs/:id/submissions",element:n.jsx(g_,{})}),n.jsx(Ae,{path:"/recruitment/jobs/submissions",element:n.jsx(g_,{})}),n.jsx(Ae,{path:"/recruiter/jobs/:id",element:n.jsx(wF,{})}),n.jsx(Ae,{path:"/candidates",element:n.jsx(O_,{})}),n.jsx(Ae,{path:"/candidates/:id",element:n.jsx(NI,{})}),n.jsx(Ae,{path:"/matching",element:n.jsx(kI,{})}),n.jsx(Ae,{path:"/candidates/verification",element:n.jsx(rMe,{})}),n.jsx(Ae,{path:"/interviews",element:n.jsx(nR,{})}),n.jsx(Ae,{path:"/interviews/logs",element:n.jsx($R,{})}),n.jsx(Ae,{path:"/interviews/:id",element:n.jsx(YSe,{})}),n.jsx(Ae,{path:"/interviews/:id/detail",element:n.jsx(Hx,{})}),n.jsx(Ae,{path:"/live-interviews/:id/detail",element:n.jsx(f_,{})}),n.jsx(Ae,{path:"/interviews/:id/feedback",element:n.jsx(i_,{})}),n.jsx(Ae,{path:"/recruiter/dashboard",element:n.jsx($_,{})}),n.jsx(Ae,{path:"/recruiter/assigned-jobs",element:n.jsx(TI,{})}),n.jsx(Ae,{path:"/recruiter/candidate-workflow",element:n.jsx(LI,{})}),n.jsx(Ae,{path:"/recruiter/resdex/search-resumes",element:n.jsx(eF,{})}),n.jsx(Ae,{path:"/recruiter/resdex/advanced-search",element:n.jsx(iF,{})}),n.jsx(Ae,{path:"/recruiter/resdex/send-nvite",element:n.jsx(tF,{})}),n.jsx(Ae,{path:"/recruiter/resdex/manage-searches",element:n.jsx(rF,{})}),n.jsx(Ae,{path:"/recruiter/resdex/folders",element:n.jsx(nF,{})}),n.jsx(Ae,{path:"/recruiter/requirements",element:n.jsx(CI,{})}),n.jsx(Ae,{path:"/recruiter/requirements/:requirementId",element:n.jsx(AI,{})}),n.jsx(Ae,{path:"/recruitment/jobs/:id",element:n.jsx(ZMe,{})}),n.jsx(Ae,{path:"/matching",element:n.jsx(YAe,{})}),n.jsx(Ae,{path:"/candidates/bulk-actions",element:n.jsx(tMe,{})}),n.jsx(Ae,{path:"/interviews/calendar",element:n.jsx(FR,{})}),n.jsx(Ae,{path:"/candidates/:id/interviews",element:n.jsx(DR,{})}),n.jsx(Ae,{path:"/onboarding",element:n.jsx(sR,{})}),n.jsx(Ae,{path:"/employees",element:n.jsx(aR,{})}),n.jsx(Ae,{path:"/employee/dashboard",element:n.jsx(lR,{})}),n.jsx(Ae,{path:"/employees/directory",element:n.jsx(iR,{})}),n.jsx(Ae,{path:"/employees/:id",element:n.jsx(a_,{})}),n.jsx(Ae,{path:"/campaigns",element:n.jsx(pR,{})}),n.jsx(Ae,{path:"/leads",element:n.jsx(xR,{})}),n.jsx(Ae,{path:"/leaves",element:n.jsx(dR,{})}),n.jsx(Ae,{path:"/attendance",element:n.jsx(uR,{})}),n.jsx(Ae,{path:"/performance",element:n.jsx(fR,{})}),n.jsx(Ae,{path:"/alumni",element:n.jsx(oR,{})}),n.jsx(Ae,{path:"/finance",element:n.jsx(cR,{})}),n.jsx(Ae,{path:"/users",element:n.jsx(hR,{})}),n.jsx(Ae,{path:"/roles",element:n.jsx(PR,{})}),n.jsx(Ae,{path:"/permissions",element:n.jsx(OR,{})}),n.jsx(Ae,{path:"/roles-list",element:n.jsx(RR,{})}),n.jsx(Ae,{path:"/permissions-list",element:n.jsx(LR,{})}),n.jsx(Ae,{path:"/role-permission-matrix",element:n.jsx(IR,{})}),n.jsx(Ae,{path:"/careers",element:n.jsx(wj,{})}),n.jsx(Ae,{path:"/careers/job/:id",element:n.jsx(Sj,{})}),n.jsx(Ae,{path:"/consultants",element:n.jsx($9e,{})}),n.jsx(Ae,{path:"/consultants/:id",element:n.jsx(Q9e,{})}),n.jsx(Ae,{path:"/consultants/:id/deploy",element:n.jsx(tBe,{})}),n.jsx(Ae,{path:"/consultant-deployments",element:n.jsx(rBe,{})}),n.jsx(Ae,{path:"/consultant-deployments/:id",element:n.jsx(sBe,{})}),n.jsx(Ae,{path:"/consultants/:id",element:n.jsx(a_,{})}),n.jsx(Ae,{path:"/offer-letter",element:n.jsx(aV,{})}),n.jsx(Ae,{path:"/",element:r==="vendor"?n.jsx(Bn,{to:"/vendor/dashboard",replace:!0}):r==="employee"?n.jsx(Bn,{to:"/employee/dashboard",replace:!0}):r==="recruiter"?n.jsx(Bn,{to:"/recruiter/dashboard",replace:!0}):r==="account_manager"?n.jsx(Bn,{to:"/account-manager/dashboard",replace:!0}):r==="client"?n.jsx(Bn,{to:"/client/dashboard",replace:!0}):r==="consultant"?n.jsx(Bn,{to:"/consultant/dashboard",replace:!0}):n.jsx(Bn,{to:"/dashboard",replace:!0})}),n.jsx(Ae,{path:"/account-manager/dashboard",element:n.jsx(m_,{})}),n.jsx(Ae,{path:"/account-manager/assignments",element:n.jsx(HR,{})}),n.jsx(Ae,{path:"/account-manager/requirements",element:n.jsx(hF,{})}),n.jsx(Ae,{path:"/account-manager/submissions",element:n.jsx(c0,{})}),n.jsx(Ae,{path:"/account-manager/feedback",element:n.jsx(c0,{})}),n.jsx(Ae,{path:"/account-manager/requirements/:id",element:n.jsx(pF,{})}),n.jsx(Ae,{path:"/account-manager/assign/:id",element:n.jsx(xF,{})}),n.jsx(Ae,{path:"/account-manager/requirement/:jobId/submissions",element:n.jsx(MUe,{})})]})})})})}):n.jsx(Io,{children:n.jsxs(Lo,{children:[n.jsx(Ae,{path:"/login",element:n.jsx(FK,{onLogin:a})}),n.jsx(Ae,{path:"/register",element:n.jsx(DK,{})}),n.jsx(Ae,{path:"/forgot-password",element:n.jsx(mee,{})}),n.jsx(Ae,{path:"/",element:n.jsx(wj,{})}),n.jsx(Ae,{path:"/careers",element:n.jsx(wj,{})}),n.jsx(Ae,{path:"/careers/job/:id",element:n.jsx(Sj,{})}),n.jsx(Ae,{path:"/careers/register",element:n.jsx(Ree,{})}),n.jsx(Ae,{path:"/careers/login",element:n.jsx(Lee,{onLogin:a})}),n.jsx(Ae,{path:"*",element:n.jsx(Bn,{to:"/careers",replace:!0})})]})})}const IWe=y.createContext({labels:{},loading:!1,refreshLabels:async()=>{}});function FWe({children:e}){const t=y.useMemo(()=>({labels:{},loading:!1,refreshLabels:async()=>{}}),[]);return n.jsx(IWe.Provider,{value:t,children:e})}const vV=document.getElementById("root");if(!vV)throw new Error("Root element (#root) not found in index.html");Q$(vV).render(n.jsx(we.StrictMode,{children:n.jsx(FWe,{children:n.jsx(LWe,{})})}));export{Qp as c,DWe as g};
