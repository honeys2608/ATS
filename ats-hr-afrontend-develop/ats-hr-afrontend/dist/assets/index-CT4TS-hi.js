function sH(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jHe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var wD={exports:{}},yb={},ND={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp=Symbol.for("react.element"),aH=Symbol.for("react.portal"),iH=Symbol.for("react.fragment"),lH=Symbol.for("react.strict_mode"),oH=Symbol.for("react.profiler"),cH=Symbol.for("react.provider"),dH=Symbol.for("react.context"),uH=Symbol.for("react.forward_ref"),mH=Symbol.for("react.suspense"),fH=Symbol.for("react.memo"),hH=Symbol.for("react.lazy"),Y3=Symbol.iterator;function pH(e){return e===null||typeof e!="object"?null:(e=Y3&&e[Y3]||e["@@iterator"],typeof e=="function"?e:null)}var kD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SD=Object.assign,CD={};function vf(e,t,r){this.props=e,this.context=t,this.refs=CD,this.updater=r||kD}vf.prototype.isReactComponent={};vf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AD(){}AD.prototype=vf.prototype;function Mk(e,t,r){this.props=e,this.context=t,this.refs=CD,this.updater=r||kD}var Bk=Mk.prototype=new AD;Bk.constructor=Mk;SD(Bk,vf.prototype);Bk.isPureReactComponent=!0;var Z3=Array.isArray,ED=Object.prototype.hasOwnProperty,Uk={current:null},TD={key:!0,ref:!0,__self:!0,__source:!0};function PD(e,t,r){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)ED.call(t,s)&&!TD.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Tp,type:e,key:i,ref:l,props:a,_owner:Uk.current}}function xH(e,t){return{$$typeof:Tp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zk(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tp}function gH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Q3=/\/+/g;function cj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gH(""+e.key):t.toString(36)}function zg(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Tp:case aH:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+cj(l,0):s,Z3(a)?(r="",e!=null&&(r=e.replace(Q3,"$&/")+"/"),zg(a,t,r,"",function(d){return d})):a!=null&&(zk(a)&&(a=xH(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Q3,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",Z3(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+cj(i,o);l+=zg(i,t,r,c,a)}else if(c=pH(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+cj(i,o++),l+=zg(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function mx(e,t,r){if(e==null)return e;var s=[],a=0;return zg(e,s,"","",function(i){return t.call(r,i,a++)}),s}function yH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xa={current:null},Wg={transition:null},vH={ReactCurrentDispatcher:xa,ReactCurrentBatchConfig:Wg,ReactCurrentOwner:Uk};function OD(){throw Error("act(...) is not supported in production builds of React.")}xr.Children={map:mx,forEach:function(e,t,r){mx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mx(e,function(){t++}),t},toArray:function(e){return mx(e,function(t){return t})||[]},only:function(e){if(!zk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xr.Component=vf;xr.Fragment=iH;xr.Profiler=oH;xr.PureComponent=Mk;xr.StrictMode=lH;xr.Suspense=mH;xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vH;xr.act=OD;xr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=SD({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Uk.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ED.call(t,c)&&!TD.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Tp,type:e.type,key:a,ref:i,props:s,_owner:l}};xr.createContext=function(e){return e={$$typeof:dH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cH,_context:e},e.Consumer=e};xr.createElement=PD;xr.createFactory=function(e){var t=PD.bind(null,e);return t.type=e,t};xr.createRef=function(){return{current:null}};xr.forwardRef=function(e){return{$$typeof:uH,render:e}};xr.isValidElement=zk;xr.lazy=function(e){return{$$typeof:hH,_payload:{_status:-1,_result:e},_init:yH}};xr.memo=function(e,t){return{$$typeof:fH,type:e,compare:t===void 0?null:t}};xr.startTransition=function(e){var t=Wg.transition;Wg.transition={};try{e()}finally{Wg.transition=t}};xr.unstable_act=OD;xr.useCallback=function(e,t){return xa.current.useCallback(e,t)};xr.useContext=function(e){return xa.current.useContext(e)};xr.useDebugValue=function(){};xr.useDeferredValue=function(e){return xa.current.useDeferredValue(e)};xr.useEffect=function(e,t){return xa.current.useEffect(e,t)};xr.useId=function(){return xa.current.useId()};xr.useImperativeHandle=function(e,t,r){return xa.current.useImperativeHandle(e,t,r)};xr.useInsertionEffect=function(e,t){return xa.current.useInsertionEffect(e,t)};xr.useLayoutEffect=function(e,t){return xa.current.useLayoutEffect(e,t)};xr.useMemo=function(e,t){return xa.current.useMemo(e,t)};xr.useReducer=function(e,t,r){return xa.current.useReducer(e,t,r)};xr.useRef=function(e){return xa.current.useRef(e)};xr.useState=function(e){return xa.current.useState(e)};xr.useSyncExternalStore=function(e,t,r){return xa.current.useSyncExternalStore(e,t,r)};xr.useTransition=function(){return xa.current.useTransition()};xr.version="18.3.1";ND.exports=xr;var g=ND.exports;const Ce=$r(g),bH=sH({__proto__:null,default:Ce},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jH=g,_H=Symbol.for("react.element"),wH=Symbol.for("react.fragment"),NH=Object.prototype.hasOwnProperty,kH=jH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SH={key:!0,ref:!0,__self:!0,__source:!0};function RD(e,t,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)NH.call(t,s)&&!SH.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:_H,type:e,key:i,ref:l,props:a,_owner:kH.current}}yb.Fragment=wH;yb.jsx=RD;yb.jsxs=RD;wD.exports=yb;var n=wD.exports,LD={exports:{}},li={},ID={exports:{}},FD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,L){var I=W.length;W.push(L);e:for(;0<I;){var K=I-1>>>1,D=W[K];if(0<a(D,L))W[K]=L,W[I]=D,I=K;else break e}}function r(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var L=W[0],I=W.pop();if(I!==L){W[0]=I;e:for(var K=0,D=W.length,Y=D>>>1;K<Y;){var re=2*(K+1)-1,B=W[re],G=re+1,ce=W[G];if(0>a(B,I))G<D&&0>a(ce,B)?(W[K]=ce,W[G]=I,K=G):(W[K]=B,W[re]=I,K=re);else if(G<D&&0>a(ce,I))W[K]=ce,W[G]=I,K=G;else break e}}return L}function a(W,L){var I=W.sortIndex-L.sortIndex;return I!==0?I:W.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,f=3,y=!1,x=!1,p=!1,h=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(W){for(var L=r(d);L!==null;){if(L.callback===null)s(d);else if(L.startTime<=W)s(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(d)}}function _(W){if(p=!1,j(W),!x)if(r(c)!==null)x=!0,F(N);else{var L=r(d);L!==null&&Q(_,L.startTime-W)}}function N(W,L){x=!1,p&&(p=!1,v(S),S=-1),y=!0;var I=f;try{for(j(L),m=r(c);m!==null&&(!(m.expirationTime>L)||W&&!A());){var K=m.callback;if(typeof K=="function"){m.callback=null,f=m.priorityLevel;var D=K(m.expirationTime<=L);L=e.unstable_now(),typeof D=="function"?m.callback=D:m===r(c)&&s(c),j(L)}else s(c);m=r(c)}if(m!==null)var Y=!0;else{var re=r(d);re!==null&&Q(_,re.startTime-L),Y=!1}return Y}finally{m=null,f=I,y=!1}}var w=!1,k=null,S=-1,E=5,T=-1;function A(){return!(e.unstable_now()-T<E)}function C(){if(k!==null){var W=e.unstable_now();T=W;var L=!0;try{L=k(!0,W)}finally{L?P():(w=!1,k=null)}}else w=!1}var P;if(typeof b=="function")P=function(){b(C)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=C,P=function(){R.postMessage(null)}}else P=function(){h(C,0)};function F(W){k=W,w||(w=!0,P())}function Q(W,L){S=h(function(){W(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,F(N))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(W){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var I=f;f=L;try{return W()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,L){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var I=f;f=W;try{return L()}finally{f=I}},e.unstable_scheduleCallback=function(W,L,I){var K=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=I+D,W={id:u++,callback:L,priorityLevel:W,startTime:I,expirationTime:D,sortIndex:-1},I>K?(W.sortIndex=I,t(d,W),r(c)===null&&W===r(d)&&(p?(v(S),S=-1):p=!0,Q(_,I-K))):(W.sortIndex=D,t(c,W),x||y||(x=!0,F(N))),W},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(W){var L=f;return function(){var I=f;f=L;try{return W.apply(this,arguments)}finally{f=I}}}})(FD);ID.exports=FD;var CH=ID.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AH=g,ni=CH;function wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DD=new Set,lh={};function ru(e,t){Am(e,t),Am(e+"Capture",t)}function Am(e,t){for(lh[e]=t,e=0;e<t.length;e++)DD.add(t[e])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pw=Object.prototype.hasOwnProperty,EH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eE={},tE={};function TH(e){return Pw.call(tE,e)?!0:Pw.call(eE,e)?!1:EH.test(e)?tE[e]=!0:(eE[e]=!0,!1)}function PH(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OH(e,t,r,s){if(t===null||typeof t>"u"||PH(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ga(e,t,r,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ps={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ps[e]=new ga(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ps[t]=new ga(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ps[e]=new ga(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ps[e]=new ga(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ps[e]=new ga(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ps[e]=new ga(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ps[e]=new ga(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ps[e]=new ga(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ps[e]=new ga(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wk=/[\-:]([a-z])/g;function Vk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wk,Vk);Ps[t]=new ga(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wk,Vk);Ps[t]=new ga(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wk,Vk);Ps[t]=new ga(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ps[e]=new ga(e,1,!1,e.toLowerCase(),null,!1,!1)});Ps.xlinkHref=new ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ps[e]=new ga(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hk(e,t,r,s){var a=Ps.hasOwnProperty(t)?Ps[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OH(t,r,a,s)&&(r=null),s||a===null?TH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Eo=AH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fx=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),Hu=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),$D=Symbol.for("react.provider"),MD=Symbol.for("react.context"),Gk=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Lw=Symbol.for("react.suspense_list"),Jk=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),BD=Symbol.for("react.offscreen"),rE=Symbol.iterator;function qf(e){return e===null||typeof e!="object"?null:(e=rE&&e[rE]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,dj;function b0(e){if(dj===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dj=t&&t[1]||""}return`
`+dj+e}var uj=!1;function mj(e,t){if(!e||uj)return"";uj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{uj=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?b0(e):""}function RH(e){switch(e.tag){case 5:return b0(e.type);case 16:return b0("Lazy");case 13:return b0("Suspense");case 19:return b0("SuspenseList");case 0:case 2:case 15:return e=mj(e.type,!1),e;case 11:return e=mj(e.type.render,!1),e;case 1:return e=mj(e.type,!0),e;default:return""}}function Iw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hu:return"Fragment";case Vu:return"Portal";case Ow:return"Profiler";case qk:return"StrictMode";case Rw:return"Suspense";case Lw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case MD:return(e.displayName||"Context")+".Consumer";case $D:return(e._context.displayName||"Context")+".Provider";case Gk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jk:return t=e.displayName||null,t!==null?t:Iw(e.type)||"Memo";case Ko:t=e._payload,e=e._init;try{return Iw(e(t))}catch{}}return null}function LH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iw(t);case 8:return t===qk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IH(e){var t=UD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hx(e){e._valueTracker||(e._valueTracker=IH(e))}function zD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=UD(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function uy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fw(e,t){var r=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function nE(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=jc(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WD(e,t){t=t.checked,t!=null&&Hk(e,"checked",t,!1)}function Dw(e,t){WD(e,t);var r=jc(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$w(e,t.type,r):t.hasOwnProperty("defaultValue")&&$w(e,t.type,jc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sE(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $w(e,t,r){(t!=="number"||uy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var j0=Array.isArray;function um(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+jc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(wt(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aE(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(wt(92));if(j0(r)){if(1<r.length)throw Error(wt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:jc(r)}}function VD(e,t){var r=jc(t.value),s=jc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function iE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var px,qD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(px=px||document.createElement("div"),px.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=px.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function oh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var O0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FH=["Webkit","ms","Moz","O"];Object.keys(O0).forEach(function(e){FH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),O0[t]=O0[e]})});function GD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||O0.hasOwnProperty(e)&&O0[e]?(""+t).trim():t+"px"}function JD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=GD(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var DH=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uw(e,t){if(t){if(DH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(wt(62))}}function zw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ww=null;function Kk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vw=null,mm=null,fm=null;function lE(e){if(e=Rp(e)){if(typeof Vw!="function")throw Error(wt(280));var t=e.stateNode;t&&(t=wb(t),Vw(e.stateNode,e.type,t))}}function KD(e){mm?fm?fm.push(e):fm=[e]:mm=e}function XD(){if(mm){var e=mm,t=fm;if(fm=mm=null,lE(e),t)for(e=0;e<t.length;e++)lE(t[e])}}function YD(e,t){return e(t)}function ZD(){}var fj=!1;function QD(e,t,r){if(fj)return e(t,r);fj=!0;try{return YD(e,t,r)}finally{fj=!1,(mm!==null||fm!==null)&&(ZD(),XD())}}function ch(e,t){var r=e.stateNode;if(r===null)return null;var s=wb(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(wt(231,t,typeof r));return r}var Hw=!1;if(yo)try{var Gf={};Object.defineProperty(Gf,"passive",{get:function(){Hw=!0}}),window.addEventListener("test",Gf,Gf),window.removeEventListener("test",Gf,Gf)}catch{Hw=!1}function $H(e,t,r,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var R0=!1,my=null,fy=!1,qw=null,MH={onError:function(e){R0=!0,my=e}};function BH(e,t,r,s,a,i,l,o,c){R0=!1,my=null,$H.apply(MH,arguments)}function UH(e,t,r,s,a,i,l,o,c){if(BH.apply(this,arguments),R0){if(R0){var d=my;R0=!1,my=null}else throw Error(wt(198));fy||(fy=!0,qw=d)}}function nu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function e$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oE(e){if(nu(e)!==e)throw Error(wt(188))}function zH(e){var t=e.alternate;if(!t){if(t=nu(e),t===null)throw Error(wt(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return oE(a),e;if(i===s)return oE(a),t;i=i.sibling}throw Error(wt(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error(wt(189))}}if(r.alternate!==s)throw Error(wt(190))}if(r.tag!==3)throw Error(wt(188));return r.stateNode.current===r?e:t}function t$(e){return e=zH(e),e!==null?r$(e):null}function r$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r$(e);if(t!==null)return t;e=e.sibling}return null}var n$=ni.unstable_scheduleCallback,cE=ni.unstable_cancelCallback,WH=ni.unstable_shouldYield,VH=ni.unstable_requestPaint,$n=ni.unstable_now,HH=ni.unstable_getCurrentPriorityLevel,Xk=ni.unstable_ImmediatePriority,s$=ni.unstable_UserBlockingPriority,hy=ni.unstable_NormalPriority,qH=ni.unstable_LowPriority,a$=ni.unstable_IdlePriority,vb=null,Al=null;function GH(e){if(Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(vb,e,void 0,(e.current.flags&128)===128)}catch{}}var tl=Math.clz32?Math.clz32:XH,JH=Math.log,KH=Math.LN2;function XH(e){return e>>>=0,e===0?32:31-(JH(e)/KH|0)|0}var xx=64,gx=4194304;function _0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function py(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=_0(o):(i&=l,i!==0&&(s=_0(i)))}else l=r&~a,l!==0?s=_0(l):i!==0&&(s=_0(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-tl(t),a=1<<r,s|=e[r],t&=~a;return s}function YH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZH(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-tl(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&s)&&(a[l]=YH(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Gw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function i$(){var e=xx;return xx<<=1,!(xx&4194240)&&(xx=64),e}function hj(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tl(t),e[t]=r}function QH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-tl(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function Yk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-tl(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Dr=0;function l$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var o$,Zk,c$,d$,u$,Jw=!1,yx=[],uc=null,mc=null,fc=null,dh=new Map,uh=new Map,Zo=[],eq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dE(e,t){switch(e){case"focusin":case"focusout":uc=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":dh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uh.delete(t.pointerId)}}function Jf(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Rp(t),t!==null&&Zk(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tq(e,t,r,s,a){switch(t){case"focusin":return uc=Jf(uc,e,t,r,s,a),!0;case"dragenter":return mc=Jf(mc,e,t,r,s,a),!0;case"mouseover":return fc=Jf(fc,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return dh.set(i,Jf(dh.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,uh.set(i,Jf(uh.get(i)||null,e,t,r,s,a)),!0}return!1}function m$(e){var t=ld(e.target);if(t!==null){var r=nu(t);if(r!==null){if(t=r.tag,t===13){if(t=e$(r),t!==null){e.blockedOn=t,u$(e.priority,function(){c$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Ww=s,r.target.dispatchEvent(s),Ww=null}else return t=Rp(r),t!==null&&Zk(t),e.blockedOn=r,!1;t.shift()}return!0}function uE(e,t,r){Vg(e)&&r.delete(t)}function rq(){Jw=!1,uc!==null&&Vg(uc)&&(uc=null),mc!==null&&Vg(mc)&&(mc=null),fc!==null&&Vg(fc)&&(fc=null),dh.forEach(uE),uh.forEach(uE)}function Kf(e,t){e.blockedOn===t&&(e.blockedOn=null,Jw||(Jw=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,rq)))}function mh(e){function t(a){return Kf(a,e)}if(0<yx.length){Kf(yx[0],e);for(var r=1;r<yx.length;r++){var s=yx[r];s.blockedOn===e&&(s.blockedOn=null)}}for(uc!==null&&Kf(uc,e),mc!==null&&Kf(mc,e),fc!==null&&Kf(fc,e),dh.forEach(t),uh.forEach(t),r=0;r<Zo.length;r++)s=Zo[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Zo.length&&(r=Zo[0],r.blockedOn===null);)m$(r),r.blockedOn===null&&Zo.shift()}var hm=Eo.ReactCurrentBatchConfig,xy=!0;function nq(e,t,r,s){var a=Dr,i=hm.transition;hm.transition=null;try{Dr=1,Qk(e,t,r,s)}finally{Dr=a,hm.transition=i}}function sq(e,t,r,s){var a=Dr,i=hm.transition;hm.transition=null;try{Dr=4,Qk(e,t,r,s)}finally{Dr=a,hm.transition=i}}function Qk(e,t,r,s){if(xy){var a=Kw(e,t,r,s);if(a===null)Nj(e,t,s,gy,r),dE(e,s);else if(tq(a,e,t,r,s))s.stopPropagation();else if(dE(e,s),t&4&&-1<eq.indexOf(e)){for(;a!==null;){var i=Rp(a);if(i!==null&&o$(i),i=Kw(e,t,r,s),i===null&&Nj(e,t,s,gy,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Nj(e,t,s,null,r)}}var gy=null;function Kw(e,t,r,s){if(gy=null,e=Kk(s),e=ld(e),e!==null)if(t=nu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=e$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gy=e,null}function f$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HH()){case Xk:return 1;case s$:return 4;case hy:case qH:return 16;case a$:return 536870912;default:return 16}default:return 16}}var rc=null,eS=null,Hg=null;function h$(){if(Hg)return Hg;var e,t=eS,r=t.length,s,a="value"in rc?rc.value:rc.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[i-s];s++);return Hg=a.slice(e,1<s?1-s:void 0)}function qg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vx(){return!0}function mE(){return!1}function oi(e){function t(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vx:mE,this.isPropagationStopped=mE,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vx)},persist:function(){},isPersistent:vx}),t}var bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tS=oi(bf),Op=kn({},bf,{view:0,detail:0}),aq=oi(Op),pj,xj,Xf,bb=kn({},Op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xf&&(Xf&&e.type==="mousemove"?(pj=e.screenX-Xf.screenX,xj=e.screenY-Xf.screenY):xj=pj=0,Xf=e),pj)},movementY:function(e){return"movementY"in e?e.movementY:xj}}),fE=oi(bb),iq=kn({},bb,{dataTransfer:0}),lq=oi(iq),oq=kn({},Op,{relatedTarget:0}),gj=oi(oq),cq=kn({},bf,{animationName:0,elapsedTime:0,pseudoElement:0}),dq=oi(cq),uq=kn({},bf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mq=oi(uq),fq=kn({},bf,{data:0}),hE=oi(fq),hq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xq[e])?!!t[e]:!1}function rS(){return gq}var yq=kn({},Op,{key:function(e){if(e.key){var t=hq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rS,charCode:function(e){return e.type==="keypress"?qg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vq=oi(yq),bq=kn({},bb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=oi(bq),jq=kn({},Op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rS}),_q=oi(jq),wq=kn({},bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nq=oi(wq),kq=kn({},bb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sq=oi(kq),Cq=[9,13,27,32],nS=yo&&"CompositionEvent"in window,L0=null;yo&&"documentMode"in document&&(L0=document.documentMode);var Aq=yo&&"TextEvent"in window&&!L0,p$=yo&&(!nS||L0&&8<L0&&11>=L0),xE=" ",gE=!1;function x$(e,t){switch(e){case"keyup":return Cq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qu=!1;function Eq(e,t){switch(e){case"compositionend":return g$(t);case"keypress":return t.which!==32?null:(gE=!0,xE);case"textInput":return e=t.data,e===xE&&gE?null:e;default:return null}}function Tq(e,t){if(qu)return e==="compositionend"||!nS&&x$(e,t)?(e=h$(),Hg=eS=rc=null,qu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return p$&&t.locale!=="ko"?null:t.data;default:return null}}var Pq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Pq[e.type]:t==="textarea"}function y$(e,t,r,s){KD(s),t=yy(t,"onChange"),0<t.length&&(r=new tS("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var I0=null,fh=null;function Oq(e){E$(e,0)}function jb(e){var t=Ku(e);if(zD(t))return e}function Rq(e,t){if(e==="change")return t}var v$=!1;if(yo){var yj;if(yo){var vj="oninput"in document;if(!vj){var vE=document.createElement("div");vE.setAttribute("oninput","return;"),vj=typeof vE.oninput=="function"}yj=vj}else yj=!1;v$=yj&&(!document.documentMode||9<document.documentMode)}function bE(){I0&&(I0.detachEvent("onpropertychange",b$),fh=I0=null)}function b$(e){if(e.propertyName==="value"&&jb(fh)){var t=[];y$(t,fh,e,Kk(e)),QD(Oq,t)}}function Lq(e,t,r){e==="focusin"?(bE(),I0=t,fh=r,I0.attachEvent("onpropertychange",b$)):e==="focusout"&&bE()}function Iq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jb(fh)}function Fq(e,t){if(e==="click")return jb(t)}function Dq(e,t){if(e==="input"||e==="change")return jb(t)}function $q(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ll=typeof Object.is=="function"?Object.is:$q;function hh(e,t){if(ll(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Pw.call(t,a)||!ll(e[a],t[a]))return!1}return!0}function jE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _E(e,t){var r=jE(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jE(r)}}function j$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?j$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _$(){for(var e=window,t=uy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=uy(e.document)}return t}function sS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mq(e){var t=_$(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&j$(r.ownerDocument.documentElement,r)){if(s!==null&&sS(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=_E(r,i);var l=_E(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bq=yo&&"documentMode"in document&&11>=document.documentMode,Gu=null,Xw=null,F0=null,Yw=!1;function wE(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yw||Gu==null||Gu!==uy(s)||(s=Gu,"selectionStart"in s&&sS(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),F0&&hh(F0,s)||(F0=s,s=yy(Xw,"onSelect"),0<s.length&&(t=new tS("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Gu)))}function bx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ju={animationend:bx("Animation","AnimationEnd"),animationiteration:bx("Animation","AnimationIteration"),animationstart:bx("Animation","AnimationStart"),transitionend:bx("Transition","TransitionEnd")},bj={},w$={};yo&&(w$=document.createElement("div").style,"AnimationEvent"in window||(delete Ju.animationend.animation,delete Ju.animationiteration.animation,delete Ju.animationstart.animation),"TransitionEvent"in window||delete Ju.transitionend.transition);function _b(e){if(bj[e])return bj[e];if(!Ju[e])return e;var t=Ju[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in w$)return bj[e]=t[r];return e}var N$=_b("animationend"),k$=_b("animationiteration"),S$=_b("animationstart"),C$=_b("transitionend"),A$=new Map,NE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ec(e,t){A$.set(e,t),ru(t,[e])}for(var jj=0;jj<NE.length;jj++){var _j=NE[jj],Uq=_j.toLowerCase(),zq=_j[0].toUpperCase()+_j.slice(1);Ec(Uq,"on"+zq)}Ec(N$,"onAnimationEnd");Ec(k$,"onAnimationIteration");Ec(S$,"onAnimationStart");Ec("dblclick","onDoubleClick");Ec("focusin","onFocus");Ec("focusout","onBlur");Ec(C$,"onTransitionEnd");Am("onMouseEnter",["mouseout","mouseover"]);Am("onMouseLeave",["mouseout","mouseover"]);Am("onPointerEnter",["pointerout","pointerover"]);Am("onPointerLeave",["pointerout","pointerover"]);ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var w0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wq=new Set("cancel close invalid load scroll toggle".split(" ").concat(w0));function kE(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,UH(s,t,void 0,e),e.currentTarget=null}function E$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;kE(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;kE(a,o,d),i=c}}}if(fy)throw e=qw,fy=!1,qw=null,e}function nn(e,t){var r=t[rN];r===void 0&&(r=t[rN]=new Set);var s=e+"__bubble";r.has(s)||(T$(t,e,2,!1),r.add(s))}function wj(e,t,r){var s=0;t&&(s|=4),T$(r,e,s,t)}var jx="_reactListening"+Math.random().toString(36).slice(2);function ph(e){if(!e[jx]){e[jx]=!0,DD.forEach(function(r){r!=="selectionchange"&&(Wq.has(r)||wj(r,!1,e),wj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jx]||(t[jx]=!0,wj("selectionchange",!1,t))}}function T$(e,t,r,s){switch(f$(t)){case 1:var a=nq;break;case 4:a=sq;break;default:a=Qk}r=a.bind(null,t,r,e),a=void 0,!Hw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Nj(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=ld(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}QD(function(){var d=i,u=Kk(r),m=[];e:{var f=A$.get(e);if(f!==void 0){var y=tS,x=e;switch(e){case"keypress":if(qg(r)===0)break e;case"keydown":case"keyup":y=vq;break;case"focusin":x="focus",y=gj;break;case"focusout":x="blur",y=gj;break;case"beforeblur":case"afterblur":y=gj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=lq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_q;break;case N$:case k$:case S$:y=dq;break;case C$:y=Nq;break;case"scroll":y=aq;break;case"wheel":y=Sq;break;case"copy":case"cut":case"paste":y=mq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=pE}var p=(t&4)!==0,h=!p&&e==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var b=d,j;b!==null;){j=b;var _=j.stateNode;if(j.tag===5&&_!==null&&(j=_,v!==null&&(_=ch(b,v),_!=null&&p.push(xh(b,_,j)))),h)break;b=b.return}0<p.length&&(f=new y(f,x,null,r,u),m.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&r!==Ww&&(x=r.relatedTarget||r.fromElement)&&(ld(x)||x[vo]))break e;if((y||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=d,x=x?ld(x):null,x!==null&&(h=nu(x),x!==h||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=d),y!==x)){if(p=fE,_="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=pE,_="onPointerLeave",v="onPointerEnter",b="pointer"),h=y==null?f:Ku(y),j=x==null?f:Ku(x),f=new p(_,b+"leave",y,r,u),f.target=h,f.relatedTarget=j,_=null,ld(u)===d&&(p=new p(v,b+"enter",x,r,u),p.target=j,p.relatedTarget=h,_=p),h=_,y&&x)t:{for(p=y,v=x,b=0,j=p;j;j=ju(j))b++;for(j=0,_=v;_;_=ju(_))j++;for(;0<b-j;)p=ju(p),b--;for(;0<j-b;)v=ju(v),j--;for(;b--;){if(p===v||v!==null&&p===v.alternate)break t;p=ju(p),v=ju(v)}p=null}else p=null;y!==null&&SE(m,f,y,p,!1),x!==null&&h!==null&&SE(m,h,x,p,!0)}}e:{if(f=d?Ku(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var N=Rq;else if(yE(f))if(v$)N=Dq;else{N=Iq;var w=Lq}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Fq);if(N&&(N=N(e,d))){y$(m,N,r,u);break e}w&&w(e,f,d),e==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&$w(f,"number",f.value)}switch(w=d?Ku(d):window,e){case"focusin":(yE(w)||w.contentEditable==="true")&&(Gu=w,Xw=d,F0=null);break;case"focusout":F0=Xw=Gu=null;break;case"mousedown":Yw=!0;break;case"contextmenu":case"mouseup":case"dragend":Yw=!1,wE(m,r,u);break;case"selectionchange":if(Bq)break;case"keydown":case"keyup":wE(m,r,u)}var k;if(nS)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else qu?x$(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(p$&&r.locale!=="ko"&&(qu||S!=="onCompositionStart"?S==="onCompositionEnd"&&qu&&(k=h$()):(rc=u,eS="value"in rc?rc.value:rc.textContent,qu=!0)),w=yy(d,S),0<w.length&&(S=new hE(S,e,null,r,u),m.push({event:S,listeners:w}),k?S.data=k:(k=g$(r),k!==null&&(S.data=k)))),(k=Aq?Eq(e,r):Tq(e,r))&&(d=yy(d,"onBeforeInput"),0<d.length&&(u=new hE("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=k))}E$(m,t)})}function xh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function yy(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ch(e,r),i!=null&&s.unshift(xh(e,i,a)),i=ch(e,t),i!=null&&s.push(xh(e,i,a))),e=e.return}return s}function ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function SE(e,t,r,s,a){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=ch(r,i),c!=null&&l.unshift(xh(r,c,o))):a||(c=ch(r,i),c!=null&&l.push(xh(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Vq=/\r\n?/g,Hq=/\u0000|\uFFFD/g;function CE(e){return(typeof e=="string"?e:""+e).replace(Vq,`
`).replace(Hq,"")}function _x(e,t,r){if(t=CE(t),CE(e)!==t&&r)throw Error(wt(425))}function vy(){}var Zw=null,Qw=null;function eN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tN=typeof setTimeout=="function"?setTimeout:void 0,qq=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,Gq=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(e){return AE.resolve(null).then(e).catch(Jq)}:tN;function Jq(e){setTimeout(function(){throw e})}function kj(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),mh(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);mh(t)}function hc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function EE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jf=Math.random().toString(36).slice(2),Nl="__reactFiber$"+jf,gh="__reactProps$"+jf,vo="__reactContainer$"+jf,rN="__reactEvents$"+jf,Kq="__reactListeners$"+jf,Xq="__reactHandles$"+jf;function ld(e){var t=e[Nl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vo]||r[Nl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=EE(e);e!==null;){if(r=e[Nl])return r;e=EE(e)}return t}e=r,r=e.parentNode}return null}function Rp(e){return e=e[Nl]||e[vo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ku(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(wt(33))}function wb(e){return e[gh]||null}var nN=[],Xu=-1;function Tc(e){return{current:e}}function dn(e){0>Xu||(e.current=nN[Xu],nN[Xu]=null,Xu--)}function Zr(e,t){Xu++,nN[Xu]=e.current,e.current=t}var _c={},ta=Tc(_c),Ea=Tc(!1),Pd=_c;function Em(e,t){var r=e.type.contextTypes;if(!r)return _c;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ta(e){return e=e.childContextTypes,e!=null}function by(){dn(Ea),dn(ta)}function TE(e,t,r){if(ta.current!==_c)throw Error(wt(168));Zr(ta,t),Zr(Ea,r)}function P$(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(wt(108,LH(e)||"Unknown",a));return kn({},r,s)}function jy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_c,Pd=ta.current,Zr(ta,e),Zr(Ea,Ea.current),!0}function PE(e,t,r){var s=e.stateNode;if(!s)throw Error(wt(169));r?(e=P$(e,t,Pd),s.__reactInternalMemoizedMergedChildContext=e,dn(Ea),dn(ta),Zr(ta,e)):dn(Ea),Zr(Ea,r)}var eo=null,Nb=!1,Sj=!1;function O$(e){eo===null?eo=[e]:eo.push(e)}function Yq(e){Nb=!0,O$(e)}function Pc(){if(!Sj&&eo!==null){Sj=!0;var e=0,t=Dr;try{var r=eo;for(Dr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}eo=null,Nb=!1}catch(a){throw eo!==null&&(eo=eo.slice(e+1)),n$(Xk,Pc),a}finally{Dr=t,Sj=!1}}return null}var Yu=[],Zu=0,_y=null,wy=0,bi=[],ji=0,Od=null,ro=1,no="";function Yc(e,t){Yu[Zu++]=wy,Yu[Zu++]=_y,_y=e,wy=t}function R$(e,t,r){bi[ji++]=ro,bi[ji++]=no,bi[ji++]=Od,Od=e;var s=ro;e=no;var a=32-tl(s)-1;s&=~(1<<a),r+=1;var i=32-tl(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,ro=1<<32-tl(t)+a|r<<a|s,no=i+e}else ro=1<<i|r<<a|s,no=e}function aS(e){e.return!==null&&(Yc(e,1),R$(e,1,0))}function iS(e){for(;e===_y;)_y=Yu[--Zu],Yu[Zu]=null,wy=Yu[--Zu],Yu[Zu]=null;for(;e===Od;)Od=bi[--ji],bi[ji]=null,no=bi[--ji],bi[ji]=null,ro=bi[--ji],bi[ji]=null}var Za=null,Ja=null,fn=!1,Ki=null;function L$(e,t){var r=wi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function OE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Za=e,Ja=hc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Za=e,Ja=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Od!==null?{id:ro,overflow:no}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Za=e,Ja=null,!0):!1;default:return!1}}function sN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aN(e){if(fn){var t=Ja;if(t){var r=t;if(!OE(e,t)){if(sN(e))throw Error(wt(418));t=hc(r.nextSibling);var s=Za;t&&OE(e,t)?L$(s,r):(e.flags=e.flags&-4097|2,fn=!1,Za=e)}}else{if(sN(e))throw Error(wt(418));e.flags=e.flags&-4097|2,fn=!1,Za=e}}}function RE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Za=e}function wx(e){if(e!==Za)return!1;if(!fn)return RE(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eN(e.type,e.memoizedProps)),t&&(t=Ja)){if(sN(e))throw I$(),Error(wt(418));for(;t;)L$(e,t),t=hc(t.nextSibling)}if(RE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ja=hc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ja=null}}else Ja=Za?hc(e.stateNode.nextSibling):null;return!0}function I$(){for(var e=Ja;e;)e=hc(e.nextSibling)}function Tm(){Ja=Za=null,fn=!1}function lS(e){Ki===null?Ki=[e]:Ki.push(e)}var Zq=Eo.ReactCurrentBatchConfig;function Yf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(wt(309));var s=r.stateNode}if(!s)throw Error(wt(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(wt(284));if(!r._owner)throw Error(wt(290,e))}return e}function Nx(e,t){throw e=Object.prototype.toString.call(t),Error(wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function LE(e){var t=e._init;return t(e._payload)}function F$(e){function t(v,b){if(e){var j=v.deletions;j===null?(v.deletions=[b],v.flags|=16):j.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function a(v,b){return v=yc(v,b),v.index=0,v.sibling=null,v}function i(v,b,j){return v.index=j,e?(j=v.alternate,j!==null?(j=j.index,j<b?(v.flags|=2,b):j):(v.flags|=2,b)):(v.flags|=1048576,b)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,b,j,_){return b===null||b.tag!==6?(b=Rj(j,v.mode,_),b.return=v,b):(b=a(b,j),b.return=v,b)}function c(v,b,j,_){var N=j.type;return N===Hu?u(v,b,j.props.children,_,j.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ko&&LE(N)===b.type)?(_=a(b,j.props),_.ref=Yf(v,b,j),_.return=v,_):(_=Qg(j.type,j.key,j.props,null,v.mode,_),_.ref=Yf(v,b,j),_.return=v,_)}function d(v,b,j,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Lj(j,v.mode,_),b.return=v,b):(b=a(b,j.children||[]),b.return=v,b)}function u(v,b,j,_,N){return b===null||b.tag!==7?(b=bd(j,v.mode,_,N),b.return=v,b):(b=a(b,j),b.return=v,b)}function m(v,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Rj(""+b,v.mode,j),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fx:return j=Qg(b.type,b.key,b.props,null,v.mode,j),j.ref=Yf(v,null,b),j.return=v,j;case Vu:return b=Lj(b,v.mode,j),b.return=v,b;case Ko:var _=b._init;return m(v,_(b._payload),j)}if(j0(b)||qf(b))return b=bd(b,v.mode,j,null),b.return=v,b;Nx(v,b)}return null}function f(v,b,j,_){var N=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:o(v,b,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fx:return j.key===N?c(v,b,j,_):null;case Vu:return j.key===N?d(v,b,j,_):null;case Ko:return N=j._init,f(v,b,N(j._payload),_)}if(j0(j)||qf(j))return N!==null?null:u(v,b,j,_,null);Nx(v,j)}return null}function y(v,b,j,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(j)||null,o(b,v,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fx:return v=v.get(_.key===null?j:_.key)||null,c(b,v,_,N);case Vu:return v=v.get(_.key===null?j:_.key)||null,d(b,v,_,N);case Ko:var w=_._init;return y(v,b,j,w(_._payload),N)}if(j0(_)||qf(_))return v=v.get(j)||null,u(b,v,_,N,null);Nx(b,_)}return null}function x(v,b,j,_){for(var N=null,w=null,k=b,S=b=0,E=null;k!==null&&S<j.length;S++){k.index>S?(E=k,k=null):E=k.sibling;var T=f(v,k,j[S],_);if(T===null){k===null&&(k=E);break}e&&k&&T.alternate===null&&t(v,k),b=i(T,b,S),w===null?N=T:w.sibling=T,w=T,k=E}if(S===j.length)return r(v,k),fn&&Yc(v,S),N;if(k===null){for(;S<j.length;S++)k=m(v,j[S],_),k!==null&&(b=i(k,b,S),w===null?N=k:w.sibling=k,w=k);return fn&&Yc(v,S),N}for(k=s(v,k);S<j.length;S++)E=y(k,v,S,j[S],_),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?S:E.key),b=i(E,b,S),w===null?N=E:w.sibling=E,w=E);return e&&k.forEach(function(A){return t(v,A)}),fn&&Yc(v,S),N}function p(v,b,j,_){var N=qf(j);if(typeof N!="function")throw Error(wt(150));if(j=N.call(j),j==null)throw Error(wt(151));for(var w=N=null,k=b,S=b=0,E=null,T=j.next();k!==null&&!T.done;S++,T=j.next()){k.index>S?(E=k,k=null):E=k.sibling;var A=f(v,k,T.value,_);if(A===null){k===null&&(k=E);break}e&&k&&A.alternate===null&&t(v,k),b=i(A,b,S),w===null?N=A:w.sibling=A,w=A,k=E}if(T.done)return r(v,k),fn&&Yc(v,S),N;if(k===null){for(;!T.done;S++,T=j.next())T=m(v,T.value,_),T!==null&&(b=i(T,b,S),w===null?N=T:w.sibling=T,w=T);return fn&&Yc(v,S),N}for(k=s(v,k);!T.done;S++,T=j.next())T=y(k,v,S,T.value,_),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?S:T.key),b=i(T,b,S),w===null?N=T:w.sibling=T,w=T);return e&&k.forEach(function(C){return t(v,C)}),fn&&Yc(v,S),N}function h(v,b,j,_){if(typeof j=="object"&&j!==null&&j.type===Hu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case fx:e:{for(var N=j.key,w=b;w!==null;){if(w.key===N){if(N=j.type,N===Hu){if(w.tag===7){r(v,w.sibling),b=a(w,j.props.children),b.return=v,v=b;break e}}else if(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ko&&LE(N)===w.type){r(v,w.sibling),b=a(w,j.props),b.ref=Yf(v,w,j),b.return=v,v=b;break e}r(v,w);break}else t(v,w);w=w.sibling}j.type===Hu?(b=bd(j.props.children,v.mode,_,j.key),b.return=v,v=b):(_=Qg(j.type,j.key,j.props,null,v.mode,_),_.ref=Yf(v,b,j),_.return=v,v=_)}return l(v);case Vu:e:{for(w=j.key;b!==null;){if(b.key===w)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){r(v,b.sibling),b=a(b,j.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=Lj(j,v.mode,_),b.return=v,v=b}return l(v);case Ko:return w=j._init,h(v,b,w(j._payload),_)}if(j0(j))return x(v,b,j,_);if(qf(j))return p(v,b,j,_);Nx(v,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(r(v,b.sibling),b=a(b,j),b.return=v,v=b):(r(v,b),b=Rj(j,v.mode,_),b.return=v,v=b),l(v)):r(v,b)}return h}var Pm=F$(!0),D$=F$(!1),Ny=Tc(null),ky=null,Qu=null,oS=null;function cS(){oS=Qu=ky=null}function dS(e){var t=Ny.current;dn(Ny),e._currentValue=t}function iN(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function pm(e,t){ky=e,oS=Qu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ca=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(oS!==e)if(e={context:e,memoizedValue:t,next:null},Qu===null){if(ky===null)throw Error(wt(308));Qu=e,ky.dependencies={lanes:0,firstContext:e}}else Qu=Qu.next=e;return t}var od=null;function uS(e){od===null?od=[e]:od.push(e)}function $$(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,uS(t)):(r.next=a.next,a.next=r),t.interleaved=r,bo(e,s)}function bo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xo=!1;function mS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pc(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Nr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,bo(e,r)}return a=s.interleaved,a===null?(t.next=t,uS(s)):(t.next=a.next,a.next=t),s.interleaved=t,bo(e,r)}function Gg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Yk(e,r)}}function IE(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sy(e,t,r,s){var a=e.updateQueue;Xo=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,y=o.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,p=o;switch(f=t,y=r,p.tag){case 1:if(x=p.payload,typeof x=="function"){m=x.call(y,m,f);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(y,m,f):x,f==null)break e;m=kn({},m,f);break e;case 2:Xo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else y={eventTime:y,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=y,c=m):u=u.next=y,l|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ld|=l,e.lanes=l,e.memoizedState=m}}function FE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(wt(191,a));a.call(s)}}}var Lp={},El=Tc(Lp),yh=Tc(Lp),vh=Tc(Lp);function cd(e){if(e===Lp)throw Error(wt(174));return e}function fS(e,t){switch(Zr(vh,t),Zr(yh,e),Zr(El,Lp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bw(t,e)}dn(El),Zr(El,t)}function Om(){dn(El),dn(yh),dn(vh)}function B$(e){cd(vh.current);var t=cd(El.current),r=Bw(t,e.type);t!==r&&(Zr(yh,e),Zr(El,r))}function hS(e){yh.current===e&&(dn(El),dn(yh))}var bn=Tc(0);function Cy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cj=[];function pS(){for(var e=0;e<Cj.length;e++)Cj[e]._workInProgressVersionPrimary=null;Cj.length=0}var Jg=Eo.ReactCurrentDispatcher,Aj=Eo.ReactCurrentBatchConfig,Rd=0,wn=null,es=null,fs=null,Ay=!1,D0=!1,bh=0,Qq=0;function Is(){throw Error(wt(321))}function xS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ll(e[r],t[r]))return!1;return!0}function gS(e,t,r,s,a,i){if(Rd=i,wn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jg.current=e===null||e.memoizedState===null?nG:sG,e=r(s,a),D0){i=0;do{if(D0=!1,bh=0,25<=i)throw Error(wt(301));i+=1,fs=es=null,t.updateQueue=null,Jg.current=aG,e=r(s,a)}while(D0)}if(Jg.current=Ey,t=es!==null&&es.next!==null,Rd=0,fs=es=wn=null,Ay=!1,t)throw Error(wt(300));return e}function yS(){var e=bh!==0;return bh=0,e}function bl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fs===null?wn.memoizedState=fs=e:fs=fs.next=e,fs}function Ei(){if(es===null){var e=wn.alternate;e=e!==null?e.memoizedState:null}else e=es.next;var t=fs===null?wn.memoizedState:fs.next;if(t!==null)fs=t,es=e;else{if(e===null)throw Error(wt(310));es=e,e={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},fs===null?wn.memoizedState=fs=e:fs=fs.next=e}return fs}function jh(e,t){return typeof t=="function"?t(e):t}function Ej(e){var t=Ei(),r=t.queue;if(r===null)throw Error(wt(311));r.lastRenderedReducer=e;var s=es,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Rd&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=s):c=c.next=m,wn.lanes|=u,Ld|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,ll(s,t.memoizedState)||(Ca=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,wn.lanes|=i,Ld|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tj(e){var t=Ei(),r=t.queue;if(r===null)throw Error(wt(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);ll(i,t.memoizedState)||(Ca=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function U$(){}function z$(e,t){var r=wn,s=Ei(),a=t(),i=!ll(s.memoizedState,a);if(i&&(s.memoizedState=a,Ca=!0),s=s.queue,vS(H$.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||fs!==null&&fs.memoizedState.tag&1){if(r.flags|=2048,_h(9,V$.bind(null,r,s,a,t),void 0,null),ys===null)throw Error(wt(349));Rd&30||W$(r,t,a)}return a}function W$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function V$(e,t,r,s){t.value=r,t.getSnapshot=s,q$(t)&&G$(e)}function H$(e,t,r){return r(function(){q$(t)&&G$(e)})}function q$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ll(e,r)}catch{return!0}}function G$(e){var t=bo(e,1);t!==null&&rl(t,e,1,-1)}function DE(e){var t=bl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jh,lastRenderedState:e},t.queue=e,e=e.dispatch=rG.bind(null,wn,e),[t.memoizedState,e]}function _h(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function J$(){return Ei().memoizedState}function Kg(e,t,r,s){var a=bl();wn.flags|=e,a.memoizedState=_h(1|t,r,void 0,s===void 0?null:s)}function kb(e,t,r,s){var a=Ei();s=s===void 0?null:s;var i=void 0;if(es!==null){var l=es.memoizedState;if(i=l.destroy,s!==null&&xS(s,l.deps)){a.memoizedState=_h(t,r,i,s);return}}wn.flags|=e,a.memoizedState=_h(1|t,r,i,s)}function $E(e,t){return Kg(8390656,8,e,t)}function vS(e,t){return kb(2048,8,e,t)}function K$(e,t){return kb(4,2,e,t)}function X$(e,t){return kb(4,4,e,t)}function Y$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Z$(e,t,r){return r=r!=null?r.concat([e]):null,kb(4,4,Y$.bind(null,t,e),r)}function bS(){}function Q$(e,t){var r=Ei();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&xS(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function e8(e,t){var r=Ei();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&xS(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function t8(e,t,r){return Rd&21?(ll(r,t)||(r=i$(),wn.lanes|=r,Ld|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ca=!0),e.memoizedState=r)}function eG(e,t){var r=Dr;Dr=r!==0&&4>r?r:4,e(!0);var s=Aj.transition;Aj.transition={};try{e(!1),t()}finally{Dr=r,Aj.transition=s}}function r8(){return Ei().memoizedState}function tG(e,t,r){var s=gc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},n8(e))s8(t,r);else if(r=$$(e,t,r,s),r!==null){var a=ma();rl(r,e,s,a),a8(r,t,s)}}function rG(e,t,r){var s=gc(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(n8(e))s8(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,ll(o,l)){var c=t.interleaved;c===null?(a.next=a,uS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=$$(e,t,a,s),r!==null&&(a=ma(),rl(r,e,s,a),a8(r,t,s))}}function n8(e){var t=e.alternate;return e===wn||t!==null&&t===wn}function s8(e,t){D0=Ay=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function a8(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Yk(e,r)}}var Ey={readContext:Ai,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useInsertionEffect:Is,useLayoutEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useMutableSource:Is,useSyncExternalStore:Is,useId:Is,unstable_isNewReconciler:!1},nG={readContext:Ai,useCallback:function(e,t){return bl().memoizedState=[e,t===void 0?null:t],e},useContext:Ai,useEffect:$E,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Kg(4194308,4,Y$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Kg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kg(4,2,e,t)},useMemo:function(e,t){var r=bl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=bl();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=tG.bind(null,wn,e),[s.memoizedState,e]},useRef:function(e){var t=bl();return e={current:e},t.memoizedState=e},useState:DE,useDebugValue:bS,useDeferredValue:function(e){return bl().memoizedState=e},useTransition:function(){var e=DE(!1),t=e[0];return e=eG.bind(null,e[1]),bl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=wn,a=bl();if(fn){if(r===void 0)throw Error(wt(407));r=r()}else{if(r=t(),ys===null)throw Error(wt(349));Rd&30||W$(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,$E(H$.bind(null,s,i,e),[e]),s.flags|=2048,_h(9,V$.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=bl(),t=ys.identifierPrefix;if(fn){var r=no,s=ro;r=(s&~(1<<32-tl(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=bh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Qq++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sG={readContext:Ai,useCallback:Q$,useContext:Ai,useEffect:vS,useImperativeHandle:Z$,useInsertionEffect:K$,useLayoutEffect:X$,useMemo:e8,useReducer:Ej,useRef:J$,useState:function(){return Ej(jh)},useDebugValue:bS,useDeferredValue:function(e){var t=Ei();return t8(t,es.memoizedState,e)},useTransition:function(){var e=Ej(jh)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:U$,useSyncExternalStore:z$,useId:r8,unstable_isNewReconciler:!1},aG={readContext:Ai,useCallback:Q$,useContext:Ai,useEffect:vS,useImperativeHandle:Z$,useInsertionEffect:K$,useLayoutEffect:X$,useMemo:e8,useReducer:Tj,useRef:J$,useState:function(){return Tj(jh)},useDebugValue:bS,useDeferredValue:function(e){var t=Ei();return es===null?t.memoizedState=e:t8(t,es.memoizedState,e)},useTransition:function(){var e=Tj(jh)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:U$,useSyncExternalStore:z$,useId:r8,unstable_isNewReconciler:!1};function Hi(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lN(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:kn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sb={isMounted:function(e){return(e=e._reactInternals)?nu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ma(),a=gc(e),i=co(s,a);i.payload=t,r!=null&&(i.callback=r),t=pc(e,i,a),t!==null&&(rl(t,e,a,s),Gg(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ma(),a=gc(e),i=co(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=pc(e,i,a),t!==null&&(rl(t,e,a,s),Gg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ma(),s=gc(e),a=co(r,s);a.tag=2,t!=null&&(a.callback=t),t=pc(e,a,s),t!==null&&(rl(t,e,s,r),Gg(t,e,s))}};function ME(e,t,r,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!hh(r,s)||!hh(a,i):!0}function i8(e,t,r){var s=!1,a=_c,i=t.contextType;return typeof i=="object"&&i!==null?i=Ai(i):(a=Ta(t)?Pd:ta.current,s=t.contextTypes,i=(s=s!=null)?Em(e,a):_c),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sb,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function BE(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Sb.enqueueReplaceState(t,t.state,null)}function oN(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},mS(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ai(i):(i=Ta(t)?Pd:ta.current,a.context=Em(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(lN(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Sb.enqueueReplaceState(a,a.state,null),Sy(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Rm(e,t){try{var r="",s=t;do r+=RH(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Pj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iG=typeof WeakMap=="function"?WeakMap:Map;function l8(e,t,r){r=co(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Py||(Py=!0,vN=s),cN(e,t)},r}function o8(e,t,r){r=co(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){cN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){cN(e,t),typeof s!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function UE(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new iG;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=bG.bind(null,e,t,r),t.then(e,e))}function zE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WE(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=co(-1,1),t.tag=2,pc(r,t,1))),r.lanes|=1),e)}var lG=Eo.ReactCurrentOwner,Ca=!1;function aa(e,t,r,s){t.child=e===null?D$(t,null,r,s):Pm(t,e.child,r,s)}function VE(e,t,r,s,a){r=r.render;var i=t.ref;return pm(t,a),s=gS(e,t,r,s,i,a),r=yS(),e!==null&&!Ca?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jo(e,t,a)):(fn&&r&&aS(t),t.flags|=1,aa(e,t,s,a),t.child)}function HE(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!AS(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,c8(e,t,i,s,a)):(e=Qg(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:hh,r(l,s)&&e.ref===t.ref)return jo(e,t,a)}return t.flags|=1,e=yc(i,s),e.ref=t.ref,e.return=t,t.child=e}function c8(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(hh(i,s)&&e.ref===t.ref)if(Ca=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Ca=!0);else return t.lanes=e.lanes,jo(e,t,a)}return dN(e,t,r,s,a)}function d8(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(tm,Ba),Ba|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(tm,Ba),Ba|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Zr(tm,Ba),Ba|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Zr(tm,Ba),Ba|=s;return aa(e,t,a,r),t.child}function u8(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dN(e,t,r,s,a){var i=Ta(r)?Pd:ta.current;return i=Em(t,i),pm(t,a),r=gS(e,t,r,s,i,a),s=yS(),e!==null&&!Ca?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jo(e,t,a)):(fn&&s&&aS(t),t.flags|=1,aa(e,t,r,a),t.child)}function qE(e,t,r,s,a){if(Ta(r)){var i=!0;jy(t)}else i=!1;if(pm(t,a),t.stateNode===null)Xg(e,t),i8(t,r,s),oN(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ai(d):(d=Ta(r)?Pd:ta.current,d=Em(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&BE(t,l,s,d),Xo=!1;var f=t.memoizedState;l.state=f,Sy(t,s,l,a),c=t.memoizedState,o!==s||f!==c||Ea.current||Xo?(typeof u=="function"&&(lN(t,r,u,s),c=t.memoizedState),(o=Xo||ME(t,r,o,s,f,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,M$(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Hi(t.type,o),l.props=d,m=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ai(c):(c=Ta(r)?Pd:ta.current,c=Em(t,c));var y=r.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||f!==c)&&BE(t,l,s,c),Xo=!1,f=t.memoizedState,l.state=f,Sy(t,s,l,a);var x=t.memoizedState;o!==m||f!==x||Ea.current||Xo?(typeof y=="function"&&(lN(t,r,y,s),x=t.memoizedState),(d=Xo||ME(t,r,d,s,f,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,x,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),l.props=s,l.state=x,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return uN(e,t,r,s,i,a)}function uN(e,t,r,s,a,i){u8(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&PE(t,r,!1),jo(e,t,i);s=t.stateNode,lG.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Pm(t,e.child,null,i),t.child=Pm(t,null,o,i)):aa(e,t,o,i),t.memoizedState=s.state,a&&PE(t,r,!0),t.child}function m8(e){var t=e.stateNode;t.pendingContext?TE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&TE(e,t.context,!1),fS(e,t.containerInfo)}function GE(e,t,r,s,a){return Tm(),lS(a),t.flags|=256,aa(e,t,r,s),t.child}var mN={dehydrated:null,treeContext:null,retryLane:0};function fN(e){return{baseLanes:e,cachePool:null,transitions:null}}function f8(e,t,r){var s=t.pendingProps,a=bn.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Zr(bn,a&1),e===null)return aN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Eb(l,s,0,null),e=bd(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=fN(r),t.memoizedState=mN,e):jS(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return oG(e,t,l,s,o,a,r);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=yc(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=yc(o,i):(i=bd(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?fN(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=mN,s}return i=e.child,e=i.sibling,s=yc(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function jS(e,t){return t=Eb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kx(e,t,r,s){return s!==null&&lS(s),Pm(t,e.child,null,r),e=jS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oG(e,t,r,s,a,i,l){if(r)return t.flags&256?(t.flags&=-257,s=Pj(Error(wt(422))),kx(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Eb({mode:"visible",children:s.children},a,0,null),i=bd(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Pm(t,e.child,null,l),t.child.memoizedState=fN(l),t.memoizedState=mN,i);if(!(t.mode&1))return kx(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(wt(419)),s=Pj(i,s,void 0),kx(e,t,l,s)}if(o=(l&e.childLanes)!==0,Ca||o){if(s=ys,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,bo(e,a),rl(s,e,a,-1))}return CS(),s=Pj(Error(wt(421))),kx(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=jG.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ja=hc(a.nextSibling),Za=t,fn=!0,Ki=null,e!==null&&(bi[ji++]=ro,bi[ji++]=no,bi[ji++]=Od,ro=e.id,no=e.overflow,Od=t),t=jS(t,s.children),t.flags|=4096,t)}function JE(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),iN(e.return,t,r)}function Oj(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function h8(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(aa(e,t,s.children,r),s=bn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&JE(e,r,t);else if(e.tag===19)JE(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Zr(bn,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Cy(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Oj(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Cy(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Oj(t,!0,r,null,i);break;case"together":Oj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ld|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(wt(153));if(t.child!==null){for(e=t.child,r=yc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cG(e,t,r){switch(t.tag){case 3:m8(t),Tm();break;case 5:B$(t);break;case 1:Ta(t.type)&&jy(t);break;case 4:fS(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Zr(Ny,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Zr(bn,bn.current&1),t.flags|=128,null):r&t.child.childLanes?f8(e,t,r):(Zr(bn,bn.current&1),e=jo(e,t,r),e!==null?e.sibling:null);Zr(bn,bn.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return h8(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Zr(bn,bn.current),s)break;return null;case 22:case 23:return t.lanes=0,d8(e,t,r)}return jo(e,t,r)}var p8,hN,x8,g8;p8=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hN=function(){};x8=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,cd(El.current);var i=null;switch(r){case"input":a=Fw(e,a),s=Fw(e,s),i=[];break;case"select":a=kn({},a,{value:void 0}),s=kn({},s,{value:void 0}),i=[];break;case"textarea":a=Mw(e,a),s=Mw(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=vy)}Uw(r,s);var l;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&nn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};g8=function(e,t,r,s){r!==s&&(t.flags|=4)};function Zf(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Fs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function dG(e,t,r){var s=t.pendingProps;switch(iS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fs(t),null;case 1:return Ta(t.type)&&by(),Fs(t),null;case 3:return s=t.stateNode,Om(),dn(Ea),dn(ta),pS(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ki!==null&&(_N(Ki),Ki=null))),hN(e,t),Fs(t),null;case 5:hS(t);var a=cd(vh.current);if(r=t.type,e!==null&&t.stateNode!=null)x8(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(wt(166));return Fs(t),null}if(e=cd(El.current),wx(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Nl]=t,s[gh]=i,e=(t.mode&1)!==0,r){case"dialog":nn("cancel",s),nn("close",s);break;case"iframe":case"object":case"embed":nn("load",s);break;case"video":case"audio":for(a=0;a<w0.length;a++)nn(w0[a],s);break;case"source":nn("error",s);break;case"img":case"image":case"link":nn("error",s),nn("load",s);break;case"details":nn("toggle",s);break;case"input":nE(s,i),nn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},nn("invalid",s);break;case"textarea":aE(s,i),nn("invalid",s)}Uw(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&_x(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&_x(s.textContent,o,e),a=["children",""+o]):lh.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&nn("scroll",s)}switch(r){case"input":hx(s),sE(s,i,!0);break;case"textarea":hx(s),iE(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=vy)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[Nl]=t,e[gh]=s,p8(e,t,!1,!1),t.stateNode=e;e:{switch(l=zw(r,s),r){case"dialog":nn("cancel",e),nn("close",e),a=s;break;case"iframe":case"object":case"embed":nn("load",e),a=s;break;case"video":case"audio":for(a=0;a<w0.length;a++)nn(w0[a],e);a=s;break;case"source":nn("error",e),a=s;break;case"img":case"image":case"link":nn("error",e),nn("load",e),a=s;break;case"details":nn("toggle",e),a=s;break;case"input":nE(e,s),a=Fw(e,s),nn("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=kn({},s,{value:void 0}),nn("invalid",e);break;case"textarea":aE(e,s),a=Mw(e,s),nn("invalid",e);break;default:a=s}Uw(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?JD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qD(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&oh(e,c):typeof c=="number"&&oh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&nn("scroll",e):c!=null&&Hk(e,i,c,l))}switch(r){case"input":hx(e),sE(e,s,!1);break;case"textarea":hx(e),iE(e);break;case"option":s.value!=null&&e.setAttribute("value",""+jc(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?um(e,!!s.multiple,i,!1):s.defaultValue!=null&&um(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=vy)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fs(t),null;case 6:if(e&&t.stateNode!=null)g8(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(wt(166));if(r=cd(vh.current),cd(El.current),wx(t)){if(s=t.stateNode,r=t.memoizedProps,s[Nl]=t,(i=s.nodeValue!==r)&&(e=Za,e!==null))switch(e.tag){case 3:_x(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_x(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Nl]=t,t.stateNode=s}return Fs(t),null;case 13:if(dn(bn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&Ja!==null&&t.mode&1&&!(t.flags&128))I$(),Tm(),t.flags|=98560,i=!1;else if(i=wx(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(wt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(wt(317));i[Nl]=t}else Tm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fs(t),i=!1}else Ki!==null&&(_N(Ki),Ki=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||bn.current&1?ns===0&&(ns=3):CS())),t.updateQueue!==null&&(t.flags|=4),Fs(t),null);case 4:return Om(),hN(e,t),e===null&&ph(t.stateNode.containerInfo),Fs(t),null;case 10:return dS(t.type._context),Fs(t),null;case 17:return Ta(t.type)&&by(),Fs(t),null;case 19:if(dn(bn),i=t.memoizedState,i===null)return Fs(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)Zf(i,!1);else{if(ns!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Cy(e),l!==null){for(t.flags|=128,Zf(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Zr(bn,bn.current&1|2),t.child}e=e.sibling}i.tail!==null&&$n()>Lm&&(t.flags|=128,s=!0,Zf(i,!1),t.lanes=4194304)}else{if(!s)if(e=Cy(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Zf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!fn)return Fs(t),null}else 2*$n()-i.renderingStartTime>Lm&&r!==1073741824&&(t.flags|=128,s=!0,Zf(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$n(),t.sibling=null,r=bn.current,Zr(bn,s?r&1|2:r&1),t):(Fs(t),null);case 22:case 23:return SS(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ba&1073741824&&(Fs(t),t.subtreeFlags&6&&(t.flags|=8192)):Fs(t),null;case 24:return null;case 25:return null}throw Error(wt(156,t.tag))}function uG(e,t){switch(iS(t),t.tag){case 1:return Ta(t.type)&&by(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Om(),dn(Ea),dn(ta),pS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hS(t),null;case 13:if(dn(bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(wt(340));Tm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dn(bn),null;case 4:return Om(),null;case 10:return dS(t.type._context),null;case 22:case 23:return SS(),null;case 24:return null;default:return null}}var Sx=!1,Vs=!1,mG=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function em(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){An(e,t,s)}else r.current=null}function pN(e,t,r){try{r()}catch(s){An(e,t,s)}}var KE=!1;function fG(e,t){if(Zw=xy,e=_$(),sS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var y;m!==r||a!==0&&m.nodeType!==3||(o=l+a),m!==i||s!==0&&m.nodeType!==3||(c=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===e)break t;if(f===r&&++d===a&&(o=l),f===i&&++u===s&&(c=l),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qw={focusedElem:e,selectionRange:r},xy=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,h=x.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Hi(t.type,p),h);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(wt(163))}}catch(_){An(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return x=KE,KE=!1,x}function $0(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&pN(t,r,i)}a=a.next}while(a!==s)}}function Cb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function xN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function y8(e){var t=e.alternate;t!==null&&(e.alternate=null,y8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nl],delete t[gh],delete t[rN],delete t[Kq],delete t[Xq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v8(e){return e.tag===5||e.tag===3||e.tag===4}function XE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gN(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vy));else if(s!==4&&(e=e.child,e!==null))for(gN(e,t,r),e=e.sibling;e!==null;)gN(e,t,r),e=e.sibling}function yN(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(yN(e,t,r),e=e.sibling;e!==null;)yN(e,t,r),e=e.sibling}var ks=null,qi=!1;function $o(e,t,r){for(r=r.child;r!==null;)b8(e,t,r),r=r.sibling}function b8(e,t,r){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(vb,r)}catch{}switch(r.tag){case 5:Vs||em(r,t);case 6:var s=ks,a=qi;ks=null,$o(e,t,r),ks=s,qi=a,ks!==null&&(qi?(e=ks,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ks.removeChild(r.stateNode));break;case 18:ks!==null&&(qi?(e=ks,r=r.stateNode,e.nodeType===8?kj(e.parentNode,r):e.nodeType===1&&kj(e,r),mh(e)):kj(ks,r.stateNode));break;case 4:s=ks,a=qi,ks=r.stateNode.containerInfo,qi=!0,$o(e,t,r),ks=s,qi=a;break;case 0:case 11:case 14:case 15:if(!Vs&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&pN(r,t,l),a=a.next}while(a!==s)}$o(e,t,r);break;case 1:if(!Vs&&(em(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){An(r,t,o)}$o(e,t,r);break;case 21:$o(e,t,r);break;case 22:r.mode&1?(Vs=(s=Vs)||r.memoizedState!==null,$o(e,t,r),Vs=s):$o(e,t,r);break;default:$o(e,t,r)}}function YE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new mG),t.forEach(function(s){var a=_G.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function $i(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:ks=o.stateNode,qi=!1;break e;case 3:ks=o.stateNode.containerInfo,qi=!0;break e;case 4:ks=o.stateNode.containerInfo,qi=!0;break e}o=o.return}if(ks===null)throw Error(wt(160));b8(i,l,a),ks=null,qi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){An(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)j8(t,e),t=t.sibling}function j8(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($i(t,e),fl(e),s&4){try{$0(3,e,e.return),Cb(3,e)}catch(p){An(e,e.return,p)}try{$0(5,e,e.return)}catch(p){An(e,e.return,p)}}break;case 1:$i(t,e),fl(e),s&512&&r!==null&&em(r,r.return);break;case 5:if($i(t,e),fl(e),s&512&&r!==null&&em(r,r.return),e.flags&32){var a=e.stateNode;try{oh(a,"")}catch(p){An(e,e.return,p)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&WD(a,i),zw(o,l);var d=zw(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?JD(a,m):u==="dangerouslySetInnerHTML"?qD(a,m):u==="children"?oh(a,m):Hk(a,u,m,d)}switch(o){case"input":Dw(a,i);break;case"textarea":VD(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?um(a,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?um(a,!!i.multiple,i.defaultValue,!0):um(a,!!i.multiple,i.multiple?[]:"",!1))}a[gh]=i}catch(p){An(e,e.return,p)}}break;case 6:if($i(t,e),fl(e),s&4){if(e.stateNode===null)throw Error(wt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){An(e,e.return,p)}}break;case 3:if($i(t,e),fl(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{mh(t.containerInfo)}catch(p){An(e,e.return,p)}break;case 4:$i(t,e),fl(e);break;case 13:$i(t,e),fl(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(NS=$n())),s&4&&YE(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Vs=(d=Vs)||u,$i(t,e),Vs=d):$i(t,e),fl(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ot=e,u=e.child;u!==null;){for(m=Ot=u;Ot!==null;){switch(f=Ot,y=f.child,f.tag){case 0:case 11:case 14:case 15:$0(4,f,f.return);break;case 1:em(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(p){An(s,r,p)}}break;case 5:em(f,f.return);break;case 22:if(f.memoizedState!==null){QE(m);continue}}y!==null?(y.return=f,Ot=y):QE(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=GD("display",l))}catch(p){An(e,e.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){An(e,e.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$i(t,e),fl(e),s&4&&YE(e);break;case 21:break;default:$i(t,e),fl(e)}}function fl(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(v8(r)){var s=r;break e}r=r.return}throw Error(wt(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(oh(a,""),s.flags&=-33);var i=XE(e);yN(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=XE(e);gN(e,o,l);break;default:throw Error(wt(161))}}catch(c){An(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hG(e,t,r){Ot=e,_8(e)}function _8(e,t,r){for(var s=(e.mode&1)!==0;Ot!==null;){var a=Ot,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Sx;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Vs;o=Sx;var d=Vs;if(Sx=l,(Vs=c)&&!d)for(Ot=a;Ot!==null;)l=Ot,c=l.child,l.tag===22&&l.memoizedState!==null?eT(a):c!==null?(c.return=l,Ot=c):eT(a);for(;i!==null;)Ot=i,_8(i),i=i.sibling;Ot=a,Sx=o,Vs=d}ZE(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ot=i):ZE(e)}}function ZE(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vs||Cb(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Vs)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Hi(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&FE(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}FE(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&mh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(wt(163))}Vs||t.flags&512&&xN(t)}catch(f){An(t,t.return,f)}}if(t===e){Ot=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function QE(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function eT(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Cb(4,t)}catch(c){An(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){An(t,a,c)}}var i=t.return;try{xN(t)}catch(c){An(t,i,c)}break;case 5:var l=t.return;try{xN(t)}catch(c){An(t,l,c)}}}catch(c){An(t,t.return,c)}if(t===e){Ot=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ot=o;break}Ot=t.return}}var pG=Math.ceil,Ty=Eo.ReactCurrentDispatcher,_S=Eo.ReactCurrentOwner,Si=Eo.ReactCurrentBatchConfig,Nr=0,ys=null,Gn=null,Ts=0,Ba=0,tm=Tc(0),ns=0,wh=null,Ld=0,Ab=0,wS=0,M0=null,Sa=null,NS=0,Lm=1/0,Zl=null,Py=!1,vN=null,xc=null,Cx=!1,nc=null,Oy=0,B0=0,bN=null,Yg=-1,Zg=0;function ma(){return Nr&6?$n():Yg!==-1?Yg:Yg=$n()}function gc(e){return e.mode&1?Nr&2&&Ts!==0?Ts&-Ts:Zq.transition!==null?(Zg===0&&(Zg=i$()),Zg):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:f$(e.type)),e):1}function rl(e,t,r,s){if(50<B0)throw B0=0,bN=null,Error(wt(185));Pp(e,r,s),(!(Nr&2)||e!==ys)&&(e===ys&&(!(Nr&2)&&(Ab|=r),ns===4&&Qo(e,Ts)),Pa(e,s),r===1&&Nr===0&&!(t.mode&1)&&(Lm=$n()+500,Nb&&Pc()))}function Pa(e,t){var r=e.callbackNode;ZH(e,t);var s=py(e,e===ys?Ts:0);if(s===0)r!==null&&cE(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&cE(r),t===1)e.tag===0?Yq(tT.bind(null,e)):O$(tT.bind(null,e)),Gq(function(){!(Nr&6)&&Pc()}),r=null;else{switch(l$(s)){case 1:r=Xk;break;case 4:r=s$;break;case 16:r=hy;break;case 536870912:r=a$;break;default:r=hy}r=T8(r,w8.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function w8(e,t){if(Yg=-1,Zg=0,Nr&6)throw Error(wt(327));var r=e.callbackNode;if(xm()&&e.callbackNode!==r)return null;var s=py(e,e===ys?Ts:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ry(e,s);else{t=s;var a=Nr;Nr|=2;var i=k8();(ys!==e||Ts!==t)&&(Zl=null,Lm=$n()+500,vd(e,t));do try{yG();break}catch(o){N8(e,o)}while(!0);cS(),Ty.current=i,Nr=a,Gn!==null?t=0:(ys=null,Ts=0,t=ns)}if(t!==0){if(t===2&&(a=Gw(e),a!==0&&(s=a,t=jN(e,a))),t===1)throw r=wh,vd(e,0),Qo(e,s),Pa(e,$n()),r;if(t===6)Qo(e,s);else{if(a=e.current.alternate,!(s&30)&&!xG(a)&&(t=Ry(e,s),t===2&&(i=Gw(e),i!==0&&(s=i,t=jN(e,i))),t===1))throw r=wh,vd(e,0),Qo(e,s),Pa(e,$n()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(wt(345));case 2:Zc(e,Sa,Zl);break;case 3:if(Qo(e,s),(s&130023424)===s&&(t=NS+500-$n(),10<t)){if(py(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ma(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=tN(Zc.bind(null,e,Sa,Zl),t);break}Zc(e,Sa,Zl);break;case 4:if(Qo(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-tl(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=$n()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*pG(s/1960))-s,10<s){e.timeoutHandle=tN(Zc.bind(null,e,Sa,Zl),s);break}Zc(e,Sa,Zl);break;case 5:Zc(e,Sa,Zl);break;default:throw Error(wt(329))}}}return Pa(e,$n()),e.callbackNode===r?w8.bind(null,e):null}function jN(e,t){var r=M0;return e.current.memoizedState.isDehydrated&&(vd(e,t).flags|=256),e=Ry(e,t),e!==2&&(t=Sa,Sa=r,t!==null&&_N(t)),e}function _N(e){Sa===null?Sa=e:Sa.push.apply(Sa,e)}function xG(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!ll(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~wS,t&=~Ab,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tl(t),s=1<<r;e[r]=-1,t&=~s}}function tT(e){if(Nr&6)throw Error(wt(327));xm();var t=py(e,0);if(!(t&1))return Pa(e,$n()),null;var r=Ry(e,t);if(e.tag!==0&&r===2){var s=Gw(e);s!==0&&(t=s,r=jN(e,s))}if(r===1)throw r=wh,vd(e,0),Qo(e,t),Pa(e,$n()),r;if(r===6)throw Error(wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zc(e,Sa,Zl),Pa(e,$n()),null}function kS(e,t){var r=Nr;Nr|=1;try{return e(t)}finally{Nr=r,Nr===0&&(Lm=$n()+500,Nb&&Pc())}}function Id(e){nc!==null&&nc.tag===0&&!(Nr&6)&&xm();var t=Nr;Nr|=1;var r=Si.transition,s=Dr;try{if(Si.transition=null,Dr=1,e)return e()}finally{Dr=s,Si.transition=r,Nr=t,!(Nr&6)&&Pc()}}function SS(){Ba=tm.current,dn(tm)}function vd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qq(r)),Gn!==null)for(r=Gn.return;r!==null;){var s=r;switch(iS(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&by();break;case 3:Om(),dn(Ea),dn(ta),pS();break;case 5:hS(s);break;case 4:Om();break;case 13:dn(bn);break;case 19:dn(bn);break;case 10:dS(s.type._context);break;case 22:case 23:SS()}r=r.return}if(ys=e,Gn=e=yc(e.current,null),Ts=Ba=t,ns=0,wh=null,wS=Ab=Ld=0,Sa=M0=null,od!==null){for(t=0;t<od.length;t++)if(r=od[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}od=null}return e}function N8(e,t){do{var r=Gn;try{if(cS(),Jg.current=Ey,Ay){for(var s=wn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ay=!1}if(Rd=0,fs=es=wn=null,D0=!1,bh=0,_S.current=null,r===null||r.return===null){ns=1,wh=t,Gn=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Ts,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=zE(l);if(y!==null){y.flags&=-257,WE(y,l,o,i,t),y.mode&1&&UE(i,d,t),t=y,c=d;var x=t.updateQueue;if(x===null){var p=new Set;p.add(c),t.updateQueue=p}else x.add(c);break e}else{if(!(t&1)){UE(i,d,t),CS();break e}c=Error(wt(426))}}else if(fn&&o.mode&1){var h=zE(l);if(h!==null){!(h.flags&65536)&&(h.flags|=256),WE(h,l,o,i,t),lS(Rm(c,o));break e}}i=c=Rm(c,o),ns!==4&&(ns=2),M0===null?M0=[i]:M0.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=l8(i,c,t);IE(i,v);break e;case 1:o=c;var b=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(xc===null||!xc.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=o8(i,o,t);IE(i,_);break e}}i=i.return}while(i!==null)}C8(r)}catch(N){t=N,Gn===r&&r!==null&&(Gn=r=r.return);continue}break}while(!0)}function k8(){var e=Ty.current;return Ty.current=Ey,e===null?Ey:e}function CS(){(ns===0||ns===3||ns===2)&&(ns=4),ys===null||!(Ld&268435455)&&!(Ab&268435455)||Qo(ys,Ts)}function Ry(e,t){var r=Nr;Nr|=2;var s=k8();(ys!==e||Ts!==t)&&(Zl=null,vd(e,t));do try{gG();break}catch(a){N8(e,a)}while(!0);if(cS(),Nr=r,Ty.current=s,Gn!==null)throw Error(wt(261));return ys=null,Ts=0,ns}function gG(){for(;Gn!==null;)S8(Gn)}function yG(){for(;Gn!==null&&!WH();)S8(Gn)}function S8(e){var t=E8(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?C8(e):Gn=t,_S.current=null}function C8(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uG(r,t),r!==null){r.flags&=32767,Gn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ns=6,Gn=null;return}}else if(r=dG(r,t,Ba),r!==null){Gn=r;return}if(t=t.sibling,t!==null){Gn=t;return}Gn=t=e}while(t!==null);ns===0&&(ns=5)}function Zc(e,t,r){var s=Dr,a=Si.transition;try{Si.transition=null,Dr=1,vG(e,t,r,s)}finally{Si.transition=a,Dr=s}return null}function vG(e,t,r,s){do xm();while(nc!==null);if(Nr&6)throw Error(wt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(wt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(QH(e,i),e===ys&&(Gn=ys=null,Ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Cx||(Cx=!0,T8(hy,function(){return xm(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Si.transition,Si.transition=null;var l=Dr;Dr=1;var o=Nr;Nr|=4,_S.current=null,fG(e,r),j8(r,e),Mq(Qw),xy=!!Zw,Qw=Zw=null,e.current=r,hG(r),VH(),Nr=o,Dr=l,Si.transition=i}else e.current=r;if(Cx&&(Cx=!1,nc=e,Oy=a),i=e.pendingLanes,i===0&&(xc=null),GH(r.stateNode),Pa(e,$n()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Py)throw Py=!1,e=vN,vN=null,e;return Oy&1&&e.tag!==0&&xm(),i=e.pendingLanes,i&1?e===bN?B0++:(B0=0,bN=e):B0=0,Pc(),null}function xm(){if(nc!==null){var e=l$(Oy),t=Si.transition,r=Dr;try{if(Si.transition=null,Dr=16>e?16:e,nc===null)var s=!1;else{if(e=nc,nc=null,Oy=0,Nr&6)throw Error(wt(331));var a=Nr;for(Nr|=4,Ot=e.current;Ot!==null;){var i=Ot,l=i.child;if(Ot.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ot=d;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:$0(8,u,i)}var m=u.child;if(m!==null)m.return=u,Ot=m;else for(;Ot!==null;){u=Ot;var f=u.sibling,y=u.return;if(y8(u),u===d){Ot=null;break}if(f!==null){f.return=y,Ot=f;break}Ot=y}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var h=p.sibling;p.sibling=null,p=h}while(p!==null)}}Ot=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Ot=l;else e:for(;Ot!==null;){if(i=Ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$0(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ot=v;break e}Ot=i.return}}var b=e.current;for(Ot=b;Ot!==null;){l=Ot;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,Ot=j;else e:for(l=b;Ot!==null;){if(o=Ot,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Cb(9,o)}}catch(N){An(o,o.return,N)}if(o===l){Ot=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Ot=_;break e}Ot=o.return}}if(Nr=a,Pc(),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(vb,e)}catch{}s=!0}return s}finally{Dr=r,Si.transition=t}}return!1}function rT(e,t,r){t=Rm(r,t),t=l8(e,t,1),e=pc(e,t,1),t=ma(),e!==null&&(Pp(e,1,t),Pa(e,t))}function An(e,t,r){if(e.tag===3)rT(e,e,r);else for(;t!==null;){if(t.tag===3){rT(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xc===null||!xc.has(s))){e=Rm(r,e),e=o8(t,e,1),t=pc(t,e,1),e=ma(),t!==null&&(Pp(t,1,e),Pa(t,e));break}}t=t.return}}function bG(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ma(),e.pingedLanes|=e.suspendedLanes&r,ys===e&&(Ts&r)===r&&(ns===4||ns===3&&(Ts&130023424)===Ts&&500>$n()-NS?vd(e,0):wS|=r),Pa(e,t)}function A8(e,t){t===0&&(e.mode&1?(t=gx,gx<<=1,!(gx&130023424)&&(gx=4194304)):t=1);var r=ma();e=bo(e,t),e!==null&&(Pp(e,t,r),Pa(e,r))}function jG(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),A8(e,r)}function _G(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(wt(314))}s!==null&&s.delete(t),A8(e,r)}var E8;E8=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ea.current)Ca=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ca=!1,cG(e,t,r);Ca=!!(e.flags&131072)}else Ca=!1,fn&&t.flags&1048576&&R$(t,wy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xg(e,t),e=t.pendingProps;var a=Em(t,ta.current);pm(t,r),a=gS(null,t,s,e,a,r);var i=yS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(s)?(i=!0,jy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,mS(t),a.updater=Sb,t.stateNode=a,a._reactInternals=t,oN(t,s,e,r),t=uN(null,t,s,!0,i,r)):(t.tag=0,fn&&i&&aS(t),aa(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xg(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=NG(s),e=Hi(s,e),a){case 0:t=dN(null,t,s,e,r);break e;case 1:t=qE(null,t,s,e,r);break e;case 11:t=VE(null,t,s,e,r);break e;case 14:t=HE(null,t,s,Hi(s.type,e),r);break e}throw Error(wt(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),dN(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),qE(e,t,s,a,r);case 3:e:{if(m8(t),e===null)throw Error(wt(387));s=t.pendingProps,i=t.memoizedState,a=i.element,M$(e,t),Sy(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Rm(Error(wt(423)),t),t=GE(e,t,s,r,a);break e}else if(s!==a){a=Rm(Error(wt(424)),t),t=GE(e,t,s,r,a);break e}else for(Ja=hc(t.stateNode.containerInfo.firstChild),Za=t,fn=!0,Ki=null,r=D$(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tm(),s===a){t=jo(e,t,r);break e}aa(e,t,s,r)}t=t.child}return t;case 5:return B$(t),e===null&&aN(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,eN(s,a)?l=null:i!==null&&eN(s,i)&&(t.flags|=32),u8(e,t),aa(e,t,l,r),t.child;case 6:return e===null&&aN(t),null;case 13:return f8(e,t,r);case 4:return fS(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Pm(t,null,s,r):aa(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),VE(e,t,s,a,r);case 7:return aa(e,t,t.pendingProps,r),t.child;case 8:return aa(e,t,t.pendingProps.children,r),t.child;case 12:return aa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Zr(Ny,s._currentValue),s._currentValue=l,i!==null)if(ll(i.value,l)){if(i.children===a.children&&!Ea.current){t=jo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=co(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),iN(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(wt(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),iN(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}aa(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,pm(t,r),a=Ai(a),s=s(a),t.flags|=1,aa(e,t,s,r),t.child;case 14:return s=t.type,a=Hi(s,t.pendingProps),a=Hi(s.type,a),HE(e,t,s,a,r);case 15:return c8(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),Xg(e,t),t.tag=1,Ta(s)?(e=!0,jy(t)):e=!1,pm(t,r),i8(t,s,a),oN(t,s,a,r),uN(null,t,s,!0,e,r);case 19:return h8(e,t,r);case 22:return d8(e,t,r)}throw Error(wt(156,t.tag))};function T8(e,t){return n$(e,t)}function wG(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(e,t,r,s){return new wG(e,t,r,s)}function AS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NG(e){if(typeof e=="function")return AS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gk)return 11;if(e===Jk)return 14}return 2}function yc(e,t){var r=e.alternate;return r===null?(r=wi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qg(e,t,r,s,a,i){var l=2;if(s=e,typeof e=="function")AS(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Hu:return bd(r.children,a,i,t);case qk:l=8,a|=8;break;case Ow:return e=wi(12,r,t,a|2),e.elementType=Ow,e.lanes=i,e;case Rw:return e=wi(13,r,t,a),e.elementType=Rw,e.lanes=i,e;case Lw:return e=wi(19,r,t,a),e.elementType=Lw,e.lanes=i,e;case BD:return Eb(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $D:l=10;break e;case MD:l=9;break e;case Gk:l=11;break e;case Jk:l=14;break e;case Ko:l=16,s=null;break e}throw Error(wt(130,e==null?e:typeof e,""))}return t=wi(l,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function bd(e,t,r,s){return e=wi(7,e,s,t),e.lanes=r,e}function Eb(e,t,r,s){return e=wi(22,e,s,t),e.elementType=BD,e.lanes=r,e.stateNode={isHidden:!1},e}function Rj(e,t,r){return e=wi(6,e,null,t),e.lanes=r,e}function Lj(e,t,r){return t=wi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kG(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hj(0),this.expirationTimes=hj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hj(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ES(e,t,r,s,a,i,l,o,c){return e=new kG(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mS(i),e}function SG(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function P8(e){if(!e)return _c;e=e._reactInternals;e:{if(nu(e)!==e||e.tag!==1)throw Error(wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(wt(171))}if(e.tag===1){var r=e.type;if(Ta(r))return P$(e,r,t)}return t}function O8(e,t,r,s,a,i,l,o,c){return e=ES(r,s,!0,e,a,i,l,o,c),e.context=P8(null),r=e.current,s=ma(),a=gc(r),i=co(s,a),i.callback=t??null,pc(r,i,a),e.current.lanes=a,Pp(e,a,s),Pa(e,s),e}function Tb(e,t,r,s){var a=t.current,i=ma(),l=gc(a);return r=P8(r),t.context===null?t.context=r:t.pendingContext=r,t=co(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=pc(a,t,l),e!==null&&(rl(e,a,l,i),Gg(e,a,l)),l}function Ly(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function TS(e,t){nT(e,t),(e=e.alternate)&&nT(e,t)}function CG(){return null}var R8=typeof reportError=="function"?reportError:function(e){console.error(e)};function PS(e){this._internalRoot=e}Pb.prototype.render=PS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(wt(409));Tb(e,t,null,null)};Pb.prototype.unmount=PS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Id(function(){Tb(null,e,null,null)}),t[vo]=null}};function Pb(e){this._internalRoot=e}Pb.prototype.unstable_scheduleHydration=function(e){if(e){var t=d$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Zo.length&&t!==0&&t<Zo[r].priority;r++);Zo.splice(r,0,e),r===0&&m$(e)}};function OS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ob(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sT(){}function AG(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=Ly(l);i.call(d)}}var l=O8(t,s,e,0,null,!1,!1,"",sT);return e._reactRootContainer=l,e[vo]=l.current,ph(e.nodeType===8?e.parentNode:e),Id(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=Ly(c);o.call(d)}}var c=ES(e,0,!1,null,null,!1,!1,"",sT);return e._reactRootContainer=c,e[vo]=c.current,ph(e.nodeType===8?e.parentNode:e),Id(function(){Tb(t,c,r,s)}),c}function Rb(e,t,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ly(l);o.call(c)}}Tb(t,l,e,a)}else l=AG(r,t,e,a,s);return Ly(l)}o$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_0(t.pendingLanes);r!==0&&(Yk(t,r|1),Pa(t,$n()),!(Nr&6)&&(Lm=$n()+500,Pc()))}break;case 13:Id(function(){var s=bo(e,1);if(s!==null){var a=ma();rl(s,e,1,a)}}),TS(e,1)}};Zk=function(e){if(e.tag===13){var t=bo(e,134217728);if(t!==null){var r=ma();rl(t,e,134217728,r)}TS(e,134217728)}};c$=function(e){if(e.tag===13){var t=gc(e),r=bo(e,t);if(r!==null){var s=ma();rl(r,e,t,s)}TS(e,t)}};d$=function(){return Dr};u$=function(e,t){var r=Dr;try{return Dr=e,t()}finally{Dr=r}};Vw=function(e,t,r){switch(t){case"input":if(Dw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=wb(s);if(!a)throw Error(wt(90));zD(s),Dw(s,a)}}}break;case"textarea":VD(e,r);break;case"select":t=r.value,t!=null&&um(e,!!r.multiple,t,!1)}};YD=kS;ZD=Id;var EG={usingClientEntryPoint:!1,Events:[Rp,Ku,wb,KD,XD,kS]},Qf={findFiberByHostInstance:ld,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TG={bundleType:Qf.bundleType,version:Qf.version,rendererPackageName:Qf.rendererPackageName,rendererConfig:Qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=t$(e),e===null?null:e.stateNode},findFiberByHostInstance:Qf.findFiberByHostInstance||CG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ax.isDisabled&&Ax.supportsFiber)try{vb=Ax.inject(TG),Al=Ax}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EG;li.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OS(t))throw Error(wt(200));return SG(e,t,null,r)};li.createRoot=function(e,t){if(!OS(e))throw Error(wt(299));var r=!1,s="",a=R8;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ES(e,1,!1,null,null,r,!1,s,a),e[vo]=t.current,ph(e.nodeType===8?e.parentNode:e),new PS(t)};li.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(wt(188)):(e=Object.keys(e).join(","),Error(wt(268,e)));return e=t$(t),e=e===null?null:e.stateNode,e};li.flushSync=function(e){return Id(e)};li.hydrate=function(e,t,r){if(!Ob(t))throw Error(wt(200));return Rb(null,e,t,!0,r)};li.hydrateRoot=function(e,t,r){if(!OS(e))throw Error(wt(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=R8;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=O8(t,null,e,1,r??null,a,!1,i,l),e[vo]=t.current,ph(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Pb(t)};li.render=function(e,t,r){if(!Ob(t))throw Error(wt(200));return Rb(null,e,t,!1,r)};li.unmountComponentAtNode=function(e){if(!Ob(e))throw Error(wt(40));return e._reactRootContainer?(Id(function(){Rb(null,null,e,!1,function(){e._reactRootContainer=null,e[vo]=null})}),!0):!1};li.unstable_batchedUpdates=kS;li.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Ob(r))throw Error(wt(200));if(e==null||e._reactInternals===void 0)throw Error(wt(38));return Rb(e,t,r,!1,s)};li.version="18.3.1-next-f1338f8080-20240426";function L8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L8)}catch(e){console.error(e)}}L8(),LD.exports=li;var PG=LD.exports,I8,aT=PG;I8=aT.createRoot,aT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nh.apply(this,arguments)}var sc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(sc||(sc={}));const iT="popstate";function OG(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:l,hash:o}=s.location;return wN("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Iy(a)}return LG(t,r,null,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F8(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function RG(){return Math.random().toString(36).substr(2,8)}function lT(e,t){return{usr:e.state,key:e.key,idx:t}}function wN(e,t,r,s){return r===void 0&&(r=null),Nh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_f(t):t,{state:r,key:t&&t.key||s||RG()})}function Iy(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function _f(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function LG(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,o=sc.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Nh({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=sc.Pop;let h=u(),v=h==null?null:h-d;d=h,c&&c({action:o,location:p.location,delta:v})}function f(h,v){o=sc.Push;let b=wN(p.location,h,v);d=u()+1;let j=lT(b,d),_=p.createHref(b);try{l.pushState(j,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(_)}i&&c&&c({action:o,location:p.location,delta:1})}function y(h,v){o=sc.Replace;let b=wN(p.location,h,v);d=u();let j=lT(b,d),_=p.createHref(b);l.replaceState(j,"",_),i&&c&&c({action:o,location:p.location,delta:0})}function x(h){let v=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof h=="string"?h:Iy(h);return b=b.replace(/ $/,"%20"),Nn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let p={get action(){return o},get location(){return e(a,l)},listen(h){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(iT,m),c=h,()=>{a.removeEventListener(iT,m),c=null}},createHref(h){return t(a,h)},createURL:x,encodeLocation(h){let v=x(h);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:y,go(h){return l.go(h)}};return p}var oT;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oT||(oT={}));function IG(e,t,r){return r===void 0&&(r="/"),FG(e,t,r)}function FG(e,t,r,s){let a=typeof t=="string"?_f(t):t,i=Im(a.pathname||"/",r);if(i==null)return null;let l=D8(e);DG(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=JG(i);o=qG(l[c],d)}return o}function D8(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Nn(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=vc([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Nn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),D8(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:VG(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of $8(i.path))a(i,l,c)}),t}function $8(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=$8(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function DG(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:HG(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const $G=/^:[\w-]+$/,MG=3,BG=2,UG=1,zG=10,WG=-2,cT=e=>e==="*";function VG(e,t){let r=e.split("/"),s=r.length;return r.some(cT)&&(s+=WG),t&&(s+=BG),r.filter(a=>!cT(a)).reduce((a,i)=>a+($G.test(i)?MG:i===""?UG:zG),s)}function HG(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function qG(e,t,r){let{routesMeta:s}=e,a={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=NN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:vc([i,m.pathname]),pathnameBase:ZG(vc([i,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(i=vc([i,m.pathnameBase]))}return l}function NN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=GG(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:f,isOptional:y}=u;if(f==="*"){let p=o[m]||"";l=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=o[m];return y&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function GG(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),F8(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function JG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return F8(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Im(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function KG(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?_f(e):e;return{pathname:r?r.startsWith("/")?r:XG(r,t):t,search:QG(s),hash:eJ(a)}}function XG(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ij(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function RS(e,t){let r=YG(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function LS(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=_f(e):(a=Nh({},e),Nn(!a.pathname||!a.pathname.includes("?"),Ij("?","pathname","search",a)),Nn(!a.pathname||!a.pathname.includes("#"),Ij("#","pathname","hash",a)),Nn(!a.search||!a.search.includes("#"),Ij("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let m=t.length-1;if(!s&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}o=m>=0?t[m]:"/"}let c=KG(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const vc=e=>e.join("/").replace(/\/\/+/g,"/"),ZG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const M8=["post","put","patch","delete"];new Set(M8);const rJ=["get",...M8];new Set(rJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kh.apply(this,arguments)}const Lb=g.createContext(null),B8=g.createContext(null),To=g.createContext(null),Ib=g.createContext(null),zl=g.createContext({outlet:null,matches:[],isDataRoute:!1}),U8=g.createContext(null);function nJ(e,t){let{relative:r}=t===void 0?{}:t;wf()||Nn(!1);let{basename:s,navigator:a}=g.useContext(To),{hash:i,pathname:l,search:o}=Fb(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:vc([s,l])),a.createHref({pathname:c,search:o,hash:i})}function wf(){return g.useContext(Ib)!=null}function Xn(){return wf()||Nn(!1),g.useContext(Ib).location}function z8(e){g.useContext(To).static||g.useLayoutEffect(e)}function Et(){let{isDataRoute:e}=g.useContext(zl);return e?yJ():sJ()}function sJ(){wf()||Nn(!1);let e=g.useContext(Lb),{basename:t,future:r,navigator:s}=g.useContext(To),{matches:a}=g.useContext(zl),{pathname:i}=Xn(),l=JSON.stringify(RS(a,r.v7_relativeSplatPath)),o=g.useRef(!1);return z8(()=>{o.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let m=LS(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:vc([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,l,i,e])}const aJ=g.createContext(null);function iJ(e){let t=g.useContext(zl).outlet;return t&&g.createElement(aJ.Provider,{value:e},t)}function Rr(){let{matches:e}=g.useContext(zl),t=e[e.length-1];return t?t.params:{}}function Fb(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=g.useContext(To),{matches:a}=g.useContext(zl),{pathname:i}=Xn(),l=JSON.stringify(RS(a,s.v7_relativeSplatPath));return g.useMemo(()=>LS(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function lJ(e,t){return oJ(e,t)}function oJ(e,t,r,s){wf()||Nn(!1);let{navigator:a}=g.useContext(To),{matches:i}=g.useContext(zl),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Xn(),u;if(t){var m;let h=typeof t=="string"?_f(t):t;c==="/"||(m=h.pathname)!=null&&m.startsWith(c)||Nn(!1),u=h}else u=d;let f=u.pathname||"/",y=f;if(c!=="/"){let h=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(h.length).join("/")}let x=IG(e,{pathname:y}),p=fJ(x&&x.map(h=>Object.assign({},h,{params:Object.assign({},o,h.params),pathname:vc([c,a.encodeLocation?a.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?c:vc([c,a.encodeLocation?a.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),i,r,s);return t&&p?g.createElement(Ib.Provider,{value:{location:kh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:sc.Pop}},p):p}function cJ(){let e=gJ(),t=tJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const dJ=g.createElement(cJ,null);class uJ extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(zl.Provider,{value:this.props.routeContext},g.createElement(U8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mJ(e){let{routeContext:t,match:r,children:s}=e,a=g.useContext(Lb);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(zl.Provider,{value:t},s)}function fJ(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||Nn(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:y}=r,x=m.route.loader&&f[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||x){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,f)=>{let y,x=!1,p=null,h=null;r&&(y=o&&m.route.id?o[m.route.id]:void 0,p=m.route.errorElement||dJ,c&&(d<0&&f===0?(vJ("route-fallback"),x=!0,h=null):d===f&&(x=!0,h=m.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,f+1)),b=()=>{let j;return y?j=p:x?j=h:m.route.Component?j=g.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=u,g.createElement(mJ,{match:m,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:j})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?g.createElement(uJ,{location:r.location,revalidation:r.revalidation,component:p,error:y,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var W8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(W8||{}),V8=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(V8||{});function hJ(e){let t=g.useContext(Lb);return t||Nn(!1),t}function pJ(e){let t=g.useContext(B8);return t||Nn(!1),t}function xJ(e){let t=g.useContext(zl);return t||Nn(!1),t}function H8(e){let t=xJ(),r=t.matches[t.matches.length-1];return r.route.id||Nn(!1),r.route.id}function gJ(){var e;let t=g.useContext(U8),r=pJ(),s=H8();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function yJ(){let{router:e}=hJ(W8.UseNavigateStable),t=H8(V8.UseNavigateStable),r=g.useRef(!1);return z8(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,kh({fromRouteId:t},i)))},[e,t])}const dT={};function vJ(e,t,r){dT[e]||(dT[e]=!0)}function bJ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ln(e){let{to:t,replace:r,state:s,relative:a}=e;wf()||Nn(!1);let{future:i,static:l}=g.useContext(To),{matches:o}=g.useContext(zl),{pathname:c}=Xn(),d=Et(),u=LS(t,RS(o,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(m),{replace:r,state:s,relative:a}),[d,m,a,r,s]),null}function _o(e){return iJ(e.context)}function Ee(e){Nn(!1)}function jJ(e){let{basename:t="/",children:r=null,location:s,navigationType:a=sc.Pop,navigator:i,static:l=!1,future:o}=e;wf()&&Nn(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:l,future:kh({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof s=="string"&&(s=_f(s));let{pathname:u="/",search:m="",hash:f="",state:y=null,key:x="default"}=s,p=g.useMemo(()=>{let h=Im(u,c);return h==null?null:{location:{pathname:h,search:m,hash:f,state:y,key:x},navigationType:a}},[c,u,m,f,y,x,a]);return p==null?null:g.createElement(To.Provider,{value:d},g.createElement(Ib.Provider,{children:r,value:p}))}function Mo(e){let{children:t,location:r}=e;return lJ(kN(t),r)}new Promise(()=>{});function kN(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(s,a)=>{if(!g.isValidElement(s))return;let i=[...t,a];if(s.type===g.Fragment){r.push.apply(r,kN(s.props.children,i));return}s.type!==Ee&&Nn(!1),!s.props.index||!s.props.children||Nn(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=kN(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fy.apply(this,arguments)}function q8(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function _J(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wJ(e,t){return e.button===0&&(!t||t==="_self")&&!_J(e)}function SN(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function NJ(e,t){let r=SN(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const kJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SJ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],CJ="6";try{window.__reactRouterVersion=CJ}catch{}const AJ=g.createContext({isTransitioning:!1}),EJ="startTransition",uT=bH[EJ];function TJ(e){let{basename:t,children:r,future:s,window:a}=e,i=g.useRef();i.current==null&&(i.current=OG({window:a,v5Compat:!0}));let l=i.current,[o,c]=g.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=g.useCallback(m=>{d&&uT?uT(()=>c(m)):c(m)},[c,d]);return g.useLayoutEffect(()=>l.listen(u),[l,u]),g.useEffect(()=>bJ(s),[s]),g.createElement(jJ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const PJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yr=g.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,f=q8(t,kJ),{basename:y}=g.useContext(To),x,p=!1;if(typeof d=="string"&&OJ.test(d)&&(x=d,PJ))try{let j=new URL(window.location.href),_=d.startsWith("//")?new URL(j.protocol+d):new URL(d),N=Im(_.pathname,y);_.origin===j.origin&&N!=null?d=N+_.search+_.hash:p=!0}catch{}let h=nJ(d,{relative:a}),v=LJ(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function b(j){s&&s(j),j.defaultPrevented||v(j)}return g.createElement("a",Fy({},f,{href:x||h,onClick:p||i?s:b,ref:r,target:c}))}),cr=g.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:d,children:u}=t,m=q8(t,SJ),f=Fb(c,{relative:m.relative}),y=Xn(),x=g.useContext(B8),{navigator:p,basename:h}=g.useContext(To),v=x!=null&&IJ(f)&&d===!0,b=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,j=y.pathname,_=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(j=j.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&h&&(_=Im(_,h)||_);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let w=j===b||!l&&j.startsWith(b)&&j.charAt(N)==="/",k=_!=null&&(_===b||!l&&_.startsWith(b)&&_.charAt(b.length)==="/"),S={isActive:w,isPending:k,isTransitioning:v},E=w?s:void 0,T;typeof i=="function"?T=i(S):T=[i,w?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(S):o;return g.createElement(yr,Fy({},m,{"aria-current":E,className:T,ref:r,style:A,to:c,viewTransition:d}),typeof u=="function"?u(S):u)});var CN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(CN||(CN={}));var mT;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mT||(mT={}));function RJ(e){let t=g.useContext(Lb);return t||Nn(!1),t}function LJ(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Et(),d=Xn(),u=Fb(e,{relative:l});return g.useCallback(m=>{if(wJ(m,r)){m.preventDefault();let f=s!==void 0?s:Iy(d)===Iy(u);c(e,{replace:f,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,r,e,i,l,o])}function Os(e){let t=g.useRef(SN(e)),r=g.useRef(!1),s=Xn(),a=g.useMemo(()=>NJ(s.search,r.current?null:t.current),[s.search]),i=Et(),l=g.useCallback((o,c)=>{const d=SN(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function IJ(e,t){t===void 0&&(t={});let r=g.useContext(AJ);r==null&&Nn(!1);let{basename:s}=RJ(CN.useViewTransitionState),a=Fb(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Im(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=Im(r.nextLocation.pathname,s)||r.nextLocation.pathname;return NN(a.pathname,l)!=null||NN(a.pathname,i)!=null}const fT=e=>{if(!e||!e.trim())return"Email is required";const t=e.trim().toLowerCase();return/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(t)?t.length>255?"Email is too long (max 255 characters)":null:"Invalid email format"};function G8(e,t){return function(){return e.apply(t,arguments)}}const{toString:FJ}=Object.prototype,{getPrototypeOf:IS}=Object,{iterator:Db,toStringTag:J8}=Symbol,$b=(e=>t=>{const r=FJ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ul=e=>(e=e.toLowerCase(),t=>$b(t)===e),Mb=e=>t=>typeof t===e,{isArray:Nf}=Array,Fm=Mb("undefined");function Ip(e){return e!==null&&!Fm(e)&&e.constructor!==null&&!Fm(e.constructor)&&Oa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const K8=ul("ArrayBuffer");function DJ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&K8(e.buffer),t}const $J=Mb("string"),Oa=Mb("function"),X8=Mb("number"),Fp=e=>e!==null&&typeof e=="object",MJ=e=>e===!0||e===!1,ey=e=>{if($b(e)!=="object")return!1;const t=IS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(J8 in e)&&!(Db in e)},BJ=e=>{if(!Fp(e)||Ip(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},UJ=ul("Date"),zJ=ul("File"),WJ=ul("Blob"),VJ=ul("FileList"),HJ=e=>Fp(e)&&Oa(e.pipe),qJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Oa(e.append)&&((t=$b(e))==="formdata"||t==="object"&&Oa(e.toString)&&e.toString()==="[object FormData]"))},GJ=ul("URLSearchParams"),[JJ,KJ,XJ,YJ]=["ReadableStream","Request","Response","Headers"].map(ul),ZJ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Nf(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(Ip(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function Y8(e,t){if(Ip(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const dd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Z8=e=>!Fm(e)&&e!==dd;function AN(){const{caseless:e,skipUndefined:t}=Z8(this)&&this||{},r={},s=(a,i)=>{const l=e&&Y8(r,i)||i;ey(r[l])&&ey(a)?r[l]=AN(r[l],a):ey(a)?r[l]=AN({},a):Nf(a)?r[l]=a.slice():(!t||!Fm(a))&&(r[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Dp(arguments[a],s);return r}const QJ=(e,t,r,{allOwnKeys:s}={})=>(Dp(t,(a,i)=>{r&&Oa(a)?e[i]=G8(a,r):e[i]=a},{allOwnKeys:s}),e),eK=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tK=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},rK=(e,t,r,s)=>{let a,i,l;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&IS(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},nK=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},sK=e=>{if(!e)return null;if(Nf(e))return e;let t=e.length;if(!X8(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},aK=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&IS(Uint8Array)),iK=(e,t)=>{const s=(e&&e[Db]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},lK=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},oK=ul("HTMLFormElement"),cK=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),hT=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),dK=ul("RegExp"),Q8=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Dp(r,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(s[i]=l||a)}),Object.defineProperties(e,s)},uK=e=>{Q8(e,(t,r)=>{if(Oa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Oa(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},mK=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return Nf(e)?s(e):s(String(e).split(t)),r},fK=()=>{},hK=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pK(e){return!!(e&&Oa(e.append)&&e[J8]==="FormData"&&e[Db])}const xK=e=>{const t=new Array(10),r=(s,a)=>{if(Fp(s)){if(t.indexOf(s)>=0)return;if(Ip(s))return s;if(!("toJSON"in s)){t[a]=s;const i=Nf(s)?[]:{};return Dp(s,(l,o)=>{const c=r(l,a+1);!Fm(c)&&(i[o]=c)}),t[a]=void 0,i}}return s};return r(e,0)},gK=ul("AsyncFunction"),yK=e=>e&&(Fp(e)||Oa(e))&&Oa(e.then)&&Oa(e.catch),e7=((e,t)=>e?setImmediate:t?((r,s)=>(dd.addEventListener("message",({source:a,data:i})=>{a===dd&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),dd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oa(dd.postMessage)),vK=typeof queueMicrotask<"u"?queueMicrotask.bind(dd):typeof process<"u"&&process.nextTick||e7,bK=e=>e!=null&&Oa(e[Db]),et={isArray:Nf,isArrayBuffer:K8,isBuffer:Ip,isFormData:qJ,isArrayBufferView:DJ,isString:$J,isNumber:X8,isBoolean:MJ,isObject:Fp,isPlainObject:ey,isEmptyObject:BJ,isReadableStream:JJ,isRequest:KJ,isResponse:XJ,isHeaders:YJ,isUndefined:Fm,isDate:UJ,isFile:zJ,isBlob:WJ,isRegExp:dK,isFunction:Oa,isStream:HJ,isURLSearchParams:GJ,isTypedArray:aK,isFileList:VJ,forEach:Dp,merge:AN,extend:QJ,trim:ZJ,stripBOM:eK,inherits:tK,toFlatObject:rK,kindOf:$b,kindOfTest:ul,endsWith:nK,toArray:sK,forEachEntry:iK,matchAll:lK,isHTMLForm:oK,hasOwnProperty:hT,hasOwnProp:hT,reduceDescriptors:Q8,freezeMethods:uK,toObjectSet:mK,toCamelCase:cK,noop:fK,toFiniteNumber:hK,findKey:Y8,global:dd,isContextDefined:Z8,isSpecCompliantForm:pK,toJSONObject:xK,isAsyncFn:gK,isThenable:yK,setImmediate:e7,asap:vK,isIterable:bK};function dr(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}et.inherits(dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const t7=dr.prototype,r7={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{r7[e]={value:e}});Object.defineProperties(dr,r7);Object.defineProperty(t7,"isAxiosError",{value:!0});dr.from=(e,t,r,s,a,i)=>{const l=Object.create(t7);et.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return dr.call(l,o,c,r,s,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const jK=null;function EN(e){return et.isPlainObject(e)||et.isArray(e)}function n7(e){return et.endsWith(e,"[]")?e.slice(0,-2):e}function pT(e,t,r){return e?e.concat(t).map(function(a,i){return a=n7(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function _K(e){return et.isArray(e)&&!e.some(EN)}const wK=et.toFlatObject(et,{},null,function(t){return/^is[A-Z]/.test(t)});function Bb(e,t,r){if(!et.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,h){return!et.isUndefined(h[p])});const s=r.metaTokens,a=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(t);if(!et.isFunction(a))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(et.isDate(x))return x.toISOString();if(et.isBoolean(x))return x.toString();if(!c&&et.isBlob(x))throw new dr("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(x)||et.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,p,h){let v=x;if(x&&!h&&typeof x=="object"){if(et.endsWith(p,"{}"))p=s?p:p.slice(0,-2),x=JSON.stringify(x);else if(et.isArray(x)&&_K(x)||(et.isFileList(x)||et.endsWith(p,"[]"))&&(v=et.toArray(x)))return p=n7(p),v.forEach(function(j,_){!(et.isUndefined(j)||j===null)&&t.append(l===!0?pT([p],_,i):l===null?p:p+"[]",d(j))}),!1}return EN(x)?!0:(t.append(pT(h,p,i),d(x)),!1)}const m=[],f=Object.assign(wK,{defaultVisitor:u,convertValue:d,isVisitable:EN});function y(x,p){if(!et.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(x),et.forEach(x,function(v,b){(!(et.isUndefined(v)||v===null)&&a.call(t,v,et.isString(b)?b.trim():b,p,f))===!0&&y(v,p?p.concat(b):[b])}),m.pop()}}if(!et.isObject(e))throw new TypeError("data must be an object");return y(e),t}function xT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function FS(e,t){this._pairs=[],e&&Bb(e,this,t)}const s7=FS.prototype;s7.append=function(t,r){this._pairs.push([t,r])};s7.toString=function(t){const r=t?function(s){return t.call(this,s,xT)}:xT;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function NK(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function a7(e,t,r){if(!t)return e;const s=r&&r.encode||NK;et.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=et.isURLSearchParams(t)?t.toString():new FS(t,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class gT{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){et.forEach(this.handlers,function(s){s!==null&&t(s)})}}const i7={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kK=typeof URLSearchParams<"u"?URLSearchParams:FS,SK=typeof FormData<"u"?FormData:null,CK=typeof Blob<"u"?Blob:null,AK={isBrowser:!0,classes:{URLSearchParams:kK,FormData:SK,Blob:CK},protocols:["http","https","file","blob","url","data"]},DS=typeof window<"u"&&typeof document<"u",TN=typeof navigator=="object"&&navigator||void 0,EK=DS&&(!TN||["ReactNative","NativeScript","NS"].indexOf(TN.product)<0),TK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PK=DS&&window.location.href||"http://localhost",OK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:DS,hasStandardBrowserEnv:EK,hasStandardBrowserWebWorkerEnv:TK,navigator:TN,origin:PK},Symbol.toStringTag,{value:"Module"})),Ks={...OK,...AK};function RK(e,t){return Bb(e,new Ks.classes.URLSearchParams,{visitor:function(r,s,a,i){return Ks.isNode&&et.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function LK(e){return et.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function IK(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function l7(e){function t(r,s,a,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&et.isArray(a)?a.length:l,c?(et.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!o):((!a[l]||!et.isObject(a[l]))&&(a[l]=[]),t(r,s,a[l],i)&&et.isArray(a[l])&&(a[l]=IK(a[l])),!o)}if(et.isFormData(e)&&et.isFunction(e.entries)){const r={};return et.forEachEntry(e,(s,a)=>{t(LK(s),a,r,0)}),r}return null}function FK(e,t,r){if(et.isString(e))try{return(t||JSON.parse)(e),et.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const $p={transitional:i7,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=et.isObject(t);if(i&&et.isHTMLForm(t)&&(t=new FormData(t)),et.isFormData(t))return a?JSON.stringify(l7(t)):t;if(et.isArrayBuffer(t)||et.isBuffer(t)||et.isStream(t)||et.isFile(t)||et.isBlob(t)||et.isReadableStream(t))return t;if(et.isArrayBufferView(t))return t.buffer;if(et.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return RK(t,this.formSerializer).toString();if((o=et.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Bb(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),FK(t)):t}],transformResponse:[function(t){const r=this.transitional||$p.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(et.isResponse(t)||et.isReadableStream(t))return t;if(t&&et.isString(t)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?dr.from(o,dr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ks.classes.FormData,Blob:Ks.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],e=>{$p.headers[e]={}});const DK=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$K=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||t[r]&&DK[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},yT=Symbol("internals");function e0(e){return e&&String(e).trim().toLowerCase()}function ty(e){return e===!1||e==null?e:et.isArray(e)?e.map(ty):String(e)}function MK(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const BK=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fj(e,t,r,s,a){if(et.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!et.isString(t)){if(et.isString(s))return t.indexOf(s)!==-1;if(et.isRegExp(s))return s.test(t)}}function UK(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function zK(e,t){const r=et.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,l){return this[s].call(this,t,a,i,l)},configurable:!0})})}let Ra=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(o,c,d){const u=e0(c);if(!u)throw new Error("header name must be a non-empty string");const m=et.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=ty(o))}const l=(o,c)=>et.forEach(o,(d,u)=>i(d,u,c));if(et.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(et.isString(t)&&(t=t.trim())&&!BK(t))l($K(t),r);else if(et.isObject(t)&&et.isIterable(t)){let o={},c,d;for(const u of t){if(!et.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?et.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=e0(t),t){const s=et.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return MK(a);if(et.isFunction(r))return r.call(this,a,s);if(et.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=e0(t),t){const s=et.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Fj(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(l){if(l=e0(l),l){const o=et.findKey(s,l);o&&(!r||Fj(s,s[o],o,r))&&(delete s[o],a=!0)}}return et.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||Fj(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return et.forEach(this,(a,i)=>{const l=et.findKey(s,i);if(l){r[l]=ty(a),delete r[i];return}const o=t?UK(i):String(i).trim();o!==i&&delete r[i],r[o]=ty(a),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return et.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&et.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[yT]=this[yT]={accessors:{}}).accessors,a=this.prototype;function i(l){const o=e0(l);s[o]||(zK(a,l),s[o]=!0)}return et.isArray(t)?t.forEach(i):i(t),this}};Ra.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(Ra.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});et.freezeMethods(Ra);function Dj(e,t){const r=this||$p,s=t||r,a=Ra.from(s.headers);let i=s.data;return et.forEach(e,function(o){i=o.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function o7(e){return!!(e&&e.__CANCEL__)}function kf(e,t,r){dr.call(this,e??"canceled",dr.ERR_CANCELED,t,r),this.name="CanceledError"}et.inherits(kf,dr,{__CANCEL__:!0});function c7(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new dr("Request failed with status code "+r.status,[dr.ERR_BAD_REQUEST,dr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WK(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function VK(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];l||(l=d),r[a]=c,s[a]=d;let m=i,f=0;for(;m!==a;)f+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-l<t)return;const y=u&&d-u;return y?Math.round(f*1e3/y):void 0}}function HK(e,t){let r=0,s=1e3/t,a,i;const l=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=s?l(d,u):(a=d,i||(i=setTimeout(()=>{i=null,l(a)},s-m)))},()=>a&&l(a)]}const Dy=(e,t,r=3)=>{let s=0;const a=VK(50,250);return HK(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-s,d=a(c),u=l<=o;s=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(m)},r)},vT=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},bT=e=>(...t)=>et.asap(()=>e(...t)),qK=Ks.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Ks.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Ks.origin),Ks.navigator&&/(msie|trident)/i.test(Ks.navigator.userAgent)):()=>!0,GK=Ks.hasStandardBrowserEnv?{write(e,t,r,s,a,i){const l=[e+"="+encodeURIComponent(t)];et.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),et.isString(s)&&l.push("path="+s),et.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JK(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KK(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function d7(e,t,r){let s=!JK(t);return e&&(s||r==!1)?KK(e,t):t}const jT=e=>e instanceof Ra?{...e}:e;function Fd(e,t){t=t||{};const r={};function s(d,u,m,f){return et.isPlainObject(d)&&et.isPlainObject(u)?et.merge.call({caseless:f},d,u):et.isPlainObject(u)?et.merge({},u):et.isArray(u)?u.slice():u}function a(d,u,m,f){if(et.isUndefined(u)){if(!et.isUndefined(d))return s(void 0,d,m,f)}else return s(d,u,m,f)}function i(d,u){if(!et.isUndefined(u))return s(void 0,u)}function l(d,u){if(et.isUndefined(u)){if(!et.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function o(d,u,m){if(m in t)return s(d,u);if(m in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,m)=>a(jT(d),jT(u),m,!0)};return et.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||a,f=m(e[u],t[u],u);et.isUndefined(f)&&m!==o||(r[u]=f)}),r}const u7=e=>{const t=Fd({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=Ra.from(l),t.url=a7(d7(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),et.isFormData(r)){if(Ks.hasStandardBrowserEnv||Ks.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(et.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&l.set(u,m)})}}if(Ks.hasStandardBrowserEnv&&(s&&et.isFunction(s)&&(s=s(t)),s||s!==!1&&qK(t.url))){const c=a&&i&&GK.read(i);c&&l.set(a,c)}return t},XK=typeof XMLHttpRequest<"u",YK=XK&&function(e){return new Promise(function(r,s){const a=u7(e);let i=a.data;const l=Ra.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,u,m,f,y,x;function p(){y&&y(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let h=new XMLHttpRequest;h.open(a.method.toUpperCase(),a.url,!0),h.timeout=a.timeout;function v(){if(!h)return;const j=Ra.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:j,config:e,request:h};c7(function(k){r(k),p()},function(k){s(k),p()},N),h=null}"onloadend"in h?h.onloadend=v:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(v)},h.onabort=function(){h&&(s(new dr("Request aborted",dr.ECONNABORTED,e,h)),h=null)},h.onerror=function(_){const N=_&&_.message?_.message:"Network Error",w=new dr(N,dr.ERR_NETWORK,e,h);w.event=_||null,s(w),h=null},h.ontimeout=function(){let _=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||i7;a.timeoutErrorMessage&&(_=a.timeoutErrorMessage),s(new dr(_,N.clarifyTimeoutError?dr.ETIMEDOUT:dr.ECONNABORTED,e,h)),h=null},i===void 0&&l.setContentType(null),"setRequestHeader"in h&&et.forEach(l.toJSON(),function(_,N){h.setRequestHeader(N,_)}),et.isUndefined(a.withCredentials)||(h.withCredentials=!!a.withCredentials),o&&o!=="json"&&(h.responseType=a.responseType),d&&([f,x]=Dy(d,!0),h.addEventListener("progress",f)),c&&h.upload&&([m,y]=Dy(c),h.upload.addEventListener("progress",m),h.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(u=j=>{h&&(s(!j||j.type?new kf(null,e,h):j),h.abort(),h=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const b=WK(a.url);if(b&&Ks.protocols.indexOf(b)===-1){s(new dr("Unsupported protocol "+b+":",dr.ERR_BAD_REQUEST,e));return}h.send(i||null)})},ZK=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(d){if(!a){a=!0,o();const u=d instanceof Error?d:this.reason;s.abort(u instanceof dr?u:new kf(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new dr(`timeout ${t} of ms exceeded`,dr.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>et.asap(o),c}},QK=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},eX=async function*(e,t){for await(const r of tX(e))yield*QK(r,t)},tX=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},_T=(e,t,r,s)=>{const a=eX(e,t);let i=0,l,o=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){o(),c.close();return}let m=u.byteLength;if(r){let f=i+=m;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},wT=64*1024,{isFunction:Ex}=et,rX=(({Request:e,Response:t})=>({Request:e,Response:t}))(et.global),{ReadableStream:NT,TextEncoder:kT}=et.global,ST=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nX=e=>{e=et.merge.call({skipUndefined:!0},rX,e);const{fetch:t,Request:r,Response:s}=e,a=t?Ex(t):typeof fetch=="function",i=Ex(r),l=Ex(s);if(!a)return!1;const o=a&&Ex(NT),c=a&&(typeof kT=="function"?(x=>p=>x.encode(p))(new kT):async x=>new Uint8Array(await new r(x).arrayBuffer())),d=i&&o&&ST(()=>{let x=!1;const p=new r(Ks.origin,{body:new NT,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!p}),u=l&&o&&ST(()=>et.isReadableStream(new s("").body)),m={stream:u&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!m[x]&&(m[x]=(p,h)=>{let v=p&&p[x];if(v)return v.call(p);throw new dr(`Response type '${x}' is not supported`,dr.ERR_NOT_SUPPORT,h)})});const f=async x=>{if(x==null)return 0;if(et.isBlob(x))return x.size;if(et.isSpecCompliantForm(x))return(await new r(Ks.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(et.isArrayBufferView(x)||et.isArrayBuffer(x))return x.byteLength;if(et.isURLSearchParams(x)&&(x=x+""),et.isString(x))return(await c(x)).byteLength},y=async(x,p)=>{const h=et.toFiniteNumber(x.getContentLength());return h??f(p)};return async x=>{let{url:p,method:h,data:v,signal:b,cancelToken:j,timeout:_,onDownloadProgress:N,onUploadProgress:w,responseType:k,headers:S,withCredentials:E="same-origin",fetchOptions:T}=u7(x),A=t||fetch;k=k?(k+"").toLowerCase():"text";let C=ZK([b,j&&j.toAbortSignal()],_),P=null;const O=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let R;try{if(w&&d&&h!=="get"&&h!=="head"&&(R=await y(S,v))!==0){let K=new r(p,{method:"POST",body:v,duplex:"half"}),D;if(et.isFormData(v)&&(D=K.headers.get("content-type"))&&S.setContentType(D),K.body){const[Y,re]=vT(R,Dy(bT(w)));v=_T(K.body,wT,Y,re)}}et.isString(E)||(E=E?"include":"omit");const F=i&&"credentials"in r.prototype,Q={...T,signal:C,method:h.toUpperCase(),headers:S.normalize().toJSON(),body:v,duplex:"half",credentials:F?E:void 0};P=i&&new r(p,Q);let W=await(i?A(P,T):A(p,Q));const L=u&&(k==="stream"||k==="response");if(u&&(N||L&&O)){const K={};["status","statusText","headers"].forEach(B=>{K[B]=W[B]});const D=et.toFiniteNumber(W.headers.get("content-length")),[Y,re]=N&&vT(D,Dy(bT(N),!0))||[];W=new s(_T(W.body,wT,Y,()=>{re&&re(),O&&O()}),K)}k=k||"text";let I=await m[et.findKey(m,k)||"text"](W,x);return!L&&O&&O(),await new Promise((K,D)=>{c7(K,D,{data:I,headers:Ra.from(W.headers),status:W.status,statusText:W.statusText,config:x,request:P})})}catch(F){throw O&&O(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new dr("Network Error",dr.ERR_NETWORK,x,P),{cause:F.cause||F}):dr.from(F,F&&F.code,x,P)}}},sX=new Map,m7=e=>{let t=e?e.env:{};const{fetch:r,Request:s,Response:a}=t,i=[s,a,r];let l=i.length,o=l,c,d,u=sX;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:nX(t)),u=d;return d};m7();const PN={http:jK,xhr:YK,fetch:{get:m7}};et.forEach(PN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const CT=e=>`- ${e}`,aX=e=>et.isFunction(e)||e===null||e===!1,f7={getAdapter:(e,t)=>{e=et.isArray(e)?e:[e];const{length:r}=e;let s,a;const i={};for(let l=0;l<r;l++){s=e[l];let o;if(a=s,!aX(s)&&(a=PN[(o=String(s)).toLowerCase()],a===void 0))throw new dr(`Unknown adapter '${o}'`);if(a&&(et.isFunction(a)||(a=a.get(t))))break;i[o||"#"+l]=a}if(!a){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(CT).join(`
`):" "+CT(l[0]):"as no adapter specified";throw new dr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:PN};function $j(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kf(null,e)}function AT(e){return $j(e),e.headers=Ra.from(e.headers),e.data=Dj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),f7.getAdapter(e.adapter||$p.adapter,e)(e).then(function(s){return $j(e),s.data=Dj.call(e,e.transformResponse,s),s.headers=Ra.from(s.headers),s},function(s){return o7(s)||($j(e),s&&s.response&&(s.response.data=Dj.call(e,e.transformResponse,s.response),s.response.headers=Ra.from(s.response.headers))),Promise.reject(s)})}const h7="1.12.2",Ub={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ub[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ET={};Ub.transitional=function(t,r,s){function a(i,l){return"[Axios v"+h7+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new dr(a(l," has been removed"+(r?" in "+r:"")),dr.ERR_DEPRECATED);return r&&!ET[l]&&(ET[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,o):!0}};Ub.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function iX(e,t,r){if(typeof e!="object")throw new dr("options must be an object",dr.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new dr("option "+i+" must be "+c,dr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new dr("Unknown option "+i,dr.ERR_BAD_OPTION)}}const ry={assertOptions:iX,validators:Ub},hl=ry.validators;let jd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new gT,response:new gT}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Fd(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&ry.assertOptions(s,{silentJSONParsing:hl.transitional(hl.boolean),forcedJSONParsing:hl.transitional(hl.boolean),clarifyTimeoutError:hl.transitional(hl.boolean)},!1),a!=null&&(et.isFunction(a)?r.paramsSerializer={serialize:a}:ry.assertOptions(a,{encode:hl.function,serialize:hl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ry.assertOptions(r,{baseUrl:hl.spelling("baseURL"),withXsrfToken:hl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&et.merge(i.common,i[r.method]);i&&et.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=Ra.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,m=0,f;if(!c){const x=[AT.bind(this),void 0];for(x.unshift(...o),x.push(...d),f=x.length,u=Promise.resolve(r);m<f;)u=u.then(x[m++],x[m++]);return u}f=o.length;let y=r;for(;m<f;){const x=o[m++],p=o[m++];try{y=x(y)}catch(h){p.call(this,h);break}}try{u=AT.call(this,y)}catch(x){return Promise.reject(x)}for(m=0,f=d.length;m<f;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Fd(this.defaults,t);const r=d7(t.baseURL,t.url,t.allowAbsoluteUrls);return a7(r,t.params,t.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(t){jd.prototype[t]=function(r,s){return this.request(Fd(s||{},{method:t,url:r,data:(s||{}).data}))}});et.forEach(["post","put","patch"],function(t){function r(s){return function(i,l,o){return this.request(Fd(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}jd.prototype[t]=r(),jd.prototype[t+"Form"]=r(!0)});let lX=class p7{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(a);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new kf(i,l,o),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new p7(function(a){t=a}),cancel:t}}};function oX(e){return function(r){return e.apply(null,r)}}function cX(e){return et.isObject(e)&&e.isAxiosError===!0}const ON={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ON).forEach(([e,t])=>{ON[t]=e});function x7(e){const t=new jd(e),r=G8(jd.prototype.request,t);return et.extend(r,jd.prototype,t,{allOwnKeys:!0}),et.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return x7(Fd(e,a))},r}const Bn=x7($p);Bn.Axios=jd;Bn.CanceledError=kf;Bn.CancelToken=lX;Bn.isCancel=o7;Bn.VERSION=h7;Bn.toFormData=Bb;Bn.AxiosError=dr;Bn.Cancel=Bn.CanceledError;Bn.all=function(t){return Promise.all(t)};Bn.spread=oX;Bn.isAxiosError=cX;Bn.mergeConfig=Fd;Bn.AxiosHeaders=Ra;Bn.formToJSON=e=>l7(et.isHTMLForm(e)?new FormData(e):e);Bn.getAdapter=f7.getAdapter;Bn.HttpStatusCode=ON;Bn.default=Bn;const{Axios:NHe,AxiosError:kHe,CanceledError:SHe,isCancel:CHe,CancelToken:AHe,VERSION:EHe,all:THe,Cancel:PHe,isAxiosError:OHe,spread:RHe,toFormData:LHe,AxiosHeaders:IHe,HttpStatusCode:FHe,formToJSON:DHe,getAdapter:$He,mergeConfig:MHe}=Bn,dX=e=>e?e.includes("127.0.0.1")?e.replace("127.0.0.1","localhost"):e.includes("localhost")?e.replace("localhost","127.0.0.1"):"":"",q=Bn.create({baseURL:"https://ats-10-iyol.onrender.com",withCredentials:!1});q.interceptors.request.use(e=>{const t=localStorage.getItem("access_token")||localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));q.interceptors.response.use(e=>e,async e=>{var s;if(!(e!=null&&e.response)&&((e==null?void 0:e.code)==="ERR_NETWORK"||String((e==null?void 0:e.message)||"").toLowerCase().includes("network error"))&&(e==null?void 0:e.config)&&!e.config.__localHostRetried&&typeof e.config.url=="string"){const a=e.config.baseURL||q.defaults.baseURL||"",i=dX(a);if(i)return e.config.__localHostRetried=!0,e.config.baseURL=i,q.request(e.config)}return((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const ud=q;var g7={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TT=Ce.createContext&&Ce.createContext(g7),uX=["attr","size","title"];function mX(e,t){if(e==null)return{};var r=fX(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function fX(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$y.apply(this,arguments)}function PT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function My(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(r),!0).forEach(function(s){hX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PT(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hX(e,t,r){return t=pX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=xX(e,"string");return typeof t=="symbol"?t:t+""}function xX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y7(e){return e&&e.map((t,r)=>Ce.createElement(t.tag,My({key:r},t.attr),y7(t.child)))}function Yn(e){return t=>Ce.createElement(gX,$y({attr:My({},e.attr)},t),y7(e.child))}function gX(e){var t=r=>{var{attr:s,size:a,title:i}=e,l=mX(e,uX),o=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Ce.createElement("svg",$y({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,l,{className:c,style:My(My({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Ce.createElement("title",null,i),e.children)};return TT!==void 0?Ce.createElement(TT.Consumer,null,r=>t(r)):t(g7)}function $S(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}function OT(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function By(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"},child:[]},{tag:"path",attr:{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"},child:[]}]})(e)}function RN(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"},child:[]}]})(e)}function yX(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"},child:[]}]})(e)}const vX={admin:"/dashboard",super_admin:"/super-admin/dashboard",recruiter:"/recruiter/dashboard",employee:"/employee/dashboard",candidate:"/candidate/dashboard",account_manager:"/account-manager/dashboard",client:"/client/dashboard",consultant:"/consultant/dashboard",vendor:"/vendor/dashboard",finance_officer:"/finance","finance officer":"/finance"},RT=e=>String(e).trim().toLowerCase().replace(/\s+/g,"_"),LT=e=>{const t=String(e||"").trim().toLowerCase();if(!t||!t.includes("@"))return"Enter a valid email domain";const r=t.split("@");if(r.length!==2)return"Enter a valid email domain";const s=r[1]||"";if(!s||s.startsWith(".")||s.endsWith(".")||s.includes(".."))return"Enter a valid email domain";const a=s.split(".");if(a.length<2)return"Enter a valid email domain";const i=a[a.length-1]||"";return/^[a-z]{2,}$/i.test(i)?null:"Enter a valid email domain"};function bX({onLogin:e}){const[t,r]=g.useState(""),[s,a]=g.useState(""),[i,l]=g.useState(!1),[o,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(""),[y,x]=g.useState(!1),p=g.useRef(null),h=g.useRef(null),v=Et();g.useEffect(()=>{var k;(k=p.current)==null||k.focus()},[]);const b=k=>!k||!k.trim()?"Password is required":k.length>128?"Password cannot exceed 128 characters":null,j=()=>{const k=fT(t)||LT(t),S=b(s);return c(k||""),u(S||""),k||S||null},_=()=>{c(fT(t)||LT(t)||"")},N=()=>{u(b(s)||"")},w=async k=>{var E,T,A,C,P,O,R,F,Q,W,L,I,K,D,Y,re,B,G,ce,ae,fe,ne,he,M,Se,me,Pe,ue;k.preventDefault(),f("");const S=j();if(S){f(S),setTimeout(()=>{var ye,Ye;return(Ye=(ye=h.current)==null?void 0:ye.focus)==null?void 0:Ye.call(ye)},50);return}x(!0);try{const ye=await q.post("/auth/login",{email:t,password:s}),Ye=((E=ye==null?void 0:ye.data)==null?void 0:E.access_token)||((T=ye==null?void 0:ye.data)==null?void 0:T.accessToken)||((A=ye==null?void 0:ye.data)==null?void 0:A.token),lt=((C=ye==null?void 0:ye.data)==null?void 0:C.user)||(ye==null?void 0:ye.data)||null,xe=((P=ye==null?void 0:ye.data)==null?void 0:P.role)||((R=(O=ye==null?void 0:ye.data)==null?void 0:O.user)==null?void 0:R.role)||lt&&lt.role||"employee";if(!Ye)throw new Error("No token received from server");localStorage.setItem("access_token",Ye),localStorage.setItem("role",RT(xe)),lt&&typeof lt=="object"&&localStorage.setItem("user",JSON.stringify(lt)),q.defaults.headers.common.Authorization=`Bearer ${Ye}`,typeof e=="function"&&e();const Ae=RT(xe),$e=vX[Ae]||"/dashboard";v($e,{replace:!0})}catch(ye){if(console.error("Login error:",{message:ye.message,status:(F=ye.response)==null?void 0:F.status,data:(Q=ye.response)==null?void 0:Q.data}),((W=ye.response)==null?void 0:W.status)===403){const xe=(I=(L=ye.response)==null?void 0:L.data)==null?void 0:I.detail;if(typeof xe=="object"&&(xe!=null&&xe.unverified)){v("/verify-account",{state:{user_id:xe.user_id,verification_method:xe.verification_method,email:t}});return}}const Ye=(typeof((D=(K=ye==null?void 0:ye.response)==null?void 0:K.data)==null?void 0:D.detail)=="object"?(B=(re=(Y=ye==null?void 0:ye.response)==null?void 0:Y.data)==null?void 0:re.detail)==null?void 0:B.message:null)||((ce=(G=ye==null?void 0:ye.response)==null?void 0:G.data)==null?void 0:ce.message)||(typeof((fe=(ae=ye==null?void 0:ye.response)==null?void 0:ae.data)==null?void 0:fe.detail)=="string"?(he=(ne=ye==null?void 0:ye.response)==null?void 0:ne.data)==null?void 0:he.detail:null)||(ye==null?void 0:ye.message)||"Login failed - please try again",lt=typeof((Se=(M=ye==null?void 0:ye.response)==null?void 0:M.data)==null?void 0:Se.detail)=="object"?(ue=(Pe=(me=ye==null?void 0:ye.response)==null?void 0:me.data)==null?void 0:Pe.detail)==null?void 0:ue.field:null;lt==="email"?c(Ye):lt==="password"?u(Ye):f(Ye),setTimeout(()=>{var xe,Ae;return(Ae=(xe=h.current)==null?void 0:xe.focus)==null?void 0:Ae.call(xe)},50)}finally{x(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(yr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(yr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(yr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(yr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>v("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:k=>k.stopPropagation(),role:"presentation",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Login"}),n.jsxs("form",{onSubmit:w,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(By,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{ref:p,value:t,onChange:k=>{r(k.target.value),o&&c(""),m&&f("")},onBlur:_,className:`
                    w-full pl-10 pr-4 py-3 rounded-lg
                    bg-[#0b0f1f] border ${o?"border-red-500":"border-[#20243a]"} text-white
                    focus:outline-none
                    focus:ring-2 ${o?"focus:ring-red-400":"focus:ring-emerald-400"}
                    focus:border-emerald-400
                  `,placeholder:"",autoComplete:"username",maxLength:254}),o&&n.jsx("div",{className:"text-red-400 text-xs mt-1",children:o})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(RN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:i?"text":"password",value:s,onChange:k=>{a(k.target.value),d&&u(""),m&&f("")},onBlur:N,className:`
                      w-full pl-10 pr-10 py-3 rounded-lg
                      bg-[#0b0f1f] border ${d?"border-red-500":"border-[#20243a]"} text-white
                      focus:outline-none
                      focus:ring-2 ${d?"focus:ring-red-400":"focus:ring-emerald-400"}
                      focus:border-emerald-400
                    `,placeholder:"Enter password",autoComplete:"current-password",maxLength:128}),n.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white text-lg","aria-label":i?"Hide password":"Show password",onClick:()=>l(k=>!k),style:{background:"none",border:"none",padding:0,cursor:"pointer"},children:i?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18M9.88 9.88A3 3 0 0012 15a3 3 0 002.12-5.12M15 12a3 3 0 11-6 0 3 3 0 016 0zm6.36 2.64A9.77 9.77 0 0021 12c-1.73-4-5.33-7-9-7-1.13 0-2.22.18-3.24.5m-4.11 2.11A9.77 9.77 0 003 12c1.73 4 5.33 7 9 7 1.13 0 2.22-.18 3.24-.5m4.11-2.11L3 3"})}):n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0zm6.36 2.64A9.77 9.77 0 0021 12c-1.73-4-5.33-7-9-7-3.67 0-7.27 3-9 7a9.77 9.77 0 001.64 2.64m16.72 0A9.77 9.77 0 0121 12c-1.73-4-5.33-7-9-7-3.67 0-7.27 3-9 7a9.77 9.77 0 001.64 2.64"})})})]}),d&&n.jsx("div",{className:"text-red-400 text-xs mt-1",children:d})]})]}),m&&n.jsx("div",{ref:h,tabIndex:-1,className:"bg-red-900/40 border border-red-500/40 text-red-200 px-4 py-3 rounded-lg text-sm",children:m}),n.jsxs("button",{type:"submit",disabled:y||!!o||!!d||!t||!s,className:`\r
                w-full flex items-center justify-center gap-2\r
                bg-purple-600\r
                text-white py-3 rounded-lg font-semibold\r
                hover:bg-purple-700 transition\r
                disabled:opacity-60\r
              `,children:[y?"Signing in...":"Login",!y&&n.jsx($S,{})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[n.jsx(yr,{to:"/forgot-password",className:"text-emerald-300",children:"Forgot password?"}),n.jsx(yr,{to:"/register",className:"text-gray-300",children:"Register"})]})]})]})})]})})})]})}function jX(){const[e,t]=g.useState("form"),[r,s]=g.useState(""),[a,i]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),[f]=g.useState("email"),[y,x]=g.useState(""),[p,h]=g.useState(""),[v,b]=g.useState(!1),[j,_]=g.useState(null),N=Et(),w=g.useRef(null),k=()=>r.trim()?a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?f==="phone"&&!/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,9}$/.test(l.replace(/\s/g,""))?"Enter a valid phone number":c?c.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(c)?/[a-z]/.test(c)?/[0-9]/.test(c)?/[@$!%*#?_&]/.test(c)?c!==u?"Passwords do not match":null:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password is required":"Enter a valid email address":"Email is required":"Username is required",S=async A=>{var O,R,F,Q,W,L;A.preventDefault(),h("");const C=k();if(C){h(C);return}const P={full_name:r.trim(),email:a.trim(),phone:f==="phone"?l.trim():null,password:c,confirm_password:u,verification_method:f};try{b(!0);const I=await q.post("/auth/candidate/register",P),K=((O=I==null?void 0:I.data)==null?void 0:O.user_id)||((R=I==null?void 0:I.data)==null?void 0:R.id);_(K),t("otp"),h("")}catch(I){console.error("Register error:",I);const K=((Q=(F=I==null?void 0:I.response)==null?void 0:F.data)==null?void 0:Q.detail)||((L=(W=I==null?void 0:I.response)==null?void 0:W.data)==null?void 0:L.message)||"Registration failed";h(typeof K=="string"?K:JSON.stringify(K))}finally{b(!1)}},E=async A=>{var C,P,O,R;if(A.preventDefault(),h(""),!y.trim()){h("Please enter the OTP");return}if(y.trim().length<4){h("OTP must be at least 4 digits");return}try{b(!0);const F=await q.post("/auth/verify-otp-registration",{user_id:j,otp:y.trim()});t("success"),h(""),setTimeout(()=>{N("/login")},2e3)}catch(F){console.error("OTP verification error:",F);const Q=((P=(C=F==null?void 0:F.response)==null?void 0:C.data)==null?void 0:P.detail)||((R=(O=F==null?void 0:F.response)==null?void 0:O.data)==null?void 0:R.message)||"Invalid or expired OTP";h(Q)}finally{b(!1)}},T=async()=>{var A;h("");try{b(!0),await q.post("/auth/resend-otp",{user_id:j,verification_method:f}),h(""),x(""),(A=w.current)==null||A.focus()}catch(C){console.error("Resend OTP error:",C),h("Failed to resend OTP. Please try again.")}finally{b(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(yr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(yr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(yr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(yr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>N("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:A=>A.stopPropagation(),role:"presentation",children:[e==="form"&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Register"}),p&&n.jsx("div",{className:"mb-4 text-sm text-red-200 bg-red-900/40 border border-red-500/40 px-3 py-2 rounded",children:p}),n.jsxs("form",{className:"space-y-4",onSubmit:S,children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(yX,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{value:r,onChange:A=>s(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(By,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"email",value:a,onChange:A=>i(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),f==="phone"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone (optional)"}),n.jsxs("div",{className:"relative",children:[n.jsx(By,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"tel",value:l,onChange:A=>o(A.target.value),className:`
                        w-full pl-10 pr-4 py-3 rounded-lg
                        bg-[#0b0f1f] border border-[#20243a] text-white
                        focus:ring-2 focus:ring-emerald-400
                        focus:border-emerald-400
                      `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(RN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"password",value:c,onChange:A=>d(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(RN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{type:"password",value:u,onChange:A=>m(A.target.value),className:`
                      w-full pl-10 pr-4 py-3 rounded-lg
                      bg-[#0b0f1f] border border-[#20243a] text-white
                      focus:ring-2 focus:ring-emerald-400
                      focus:border-emerald-400
                    `,placeholder:""})]})]}),n.jsxs("button",{type:"submit",disabled:v,className:`
                  w-full flex items-center justify-center gap-2
                  bg-purple-600
                  text-white py-3 rounded-lg font-semibold
                  hover:bg-purple-700 transition
                  disabled:opacity-60
                `,children:[v?"Creating account...":"Register",!v&&n.jsx($S,{})]}),n.jsxs("div",{className:"text-center text-sm mt-4 text-gray-300",children:["Already have an account?"," ",n.jsx(yr,{to:"/login",className:"text-emerald-300 font-medium",children:"Login"})]})]})]}),e==="otp"&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Verify ",f==="email"?"Email":"Phone"]}),n.jsxs("p",{className:"text-gray-400 mb-6",children:["We sent a code to your"," ",f==="email"?a:l]}),p&&n.jsx("div",{className:"mb-4 text-sm text-red-200 bg-red-900/40 border border-red-500/40 px-3 py-2 rounded",children:p}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enter OTP Code"}),n.jsx("input",{ref:w,type:"text",value:y,onChange:A=>x(A.target.value.replace(/[^0-9]/g,"").slice(0,6)),maxLength:"6",className:`
                    w-full px-4 py-3 rounded-lg text-center text-2xl tracking-widest
                    bg-[#0b0f1f] border border-[#20243a] text-white
                    focus:ring-2 focus:ring-emerald-400
                    focus:border-emerald-400
                  `,placeholder:"000000"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[y.length,"/6 digits entered"]})]}),n.jsxs("button",{type:"submit",disabled:v||y.length<4,className:`
                  w-full flex items-center justify-center gap-2
                  bg-purple-600
                  text-white py-3 rounded-lg font-semibold
                  hover:bg-purple-700 transition
                  disabled:opacity-60
                `,children:[v?"Verifying...":"Verify OTP",!v&&n.jsx(OT,{})]}),n.jsx("button",{type:"button",onClick:T,disabled:v,className:`
                  w-full text-sm text-emerald-300 font-medium
                  py-2 rounded-lg hover:bg-white/5 transition
                  disabled:opacity-60
                `,children:"Resend OTP"})]})]}),e==="success"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"bg-emerald-500/20 p-4 rounded-full",children:n.jsx(OT,{className:"text-4xl text-emerald-300"})})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Account Created!"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Your account has been verified. Redirecting to login..."}),n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-300 mx-auto"})]})]})})]})})})]})}var Mp=e=>e.type==="checkbox",md=e=>e instanceof Date,ka=e=>e==null;const v7=e=>typeof e=="object";var Jn=e=>!ka(e)&&!Array.isArray(e)&&v7(e)&&!md(e),_X=e=>Jn(e)&&e.target?Mp(e.target)?e.target.checked:e.target.value:e,wX=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,NX=(e,t)=>e.has(wX(t)),kX=e=>{const t=e.constructor&&e.constructor.prototype;return Jn(t)&&t.hasOwnProperty("isPrototypeOf")},MS=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cs(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(MS&&(e instanceof Blob||s))&&(r||Jn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!kX(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=cs(e[a]));else return e;return t}var zb=e=>/^\w*$/.test(e),Fn=e=>e===void 0,BS=e=>Array.isArray(e)?e.filter(Boolean):[],US=e=>BS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Dt=(e,t,r)=>{if(!t||!Jn(e))return r;const s=(zb(t)?[t]:US(t)).reduce((a,i)=>ka(a)?a:a[i],e);return Fn(s)||s===e?Fn(e[t])?r:e[t]:s},jl=e=>typeof e=="boolean",Hr=(e,t,r)=>{let s=-1;const a=zb(t)?[t]:US(t),i=a.length,l=i-1;for(;++s<i;){const o=a[s];let c=r;if(s!==l){const d=e[o];c=Jn(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const IT={BLUR:"blur",FOCUS_OUT:"focusout"},Xi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},SX=Ce.createContext(null);SX.displayName="HookFormContext";var CX=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Xi.all&&(t._proxyFormState[l]=!s||Xi.all),e[l]}});return a};const AX=typeof window<"u"?Ce.useLayoutEffect:Ce.useEffect;var Wa=e=>typeof e=="string",EX=(e,t,r,s,a)=>Wa(e)?(s&&t.watch.add(e),Dt(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),Dt(r,i))):(s&&(t.watchAll=!0),r),LN=e=>ka(e)||!v7(e);function ec(e,t,r=new WeakSet){if(LN(e)||LN(t))return Object.is(e,t);if(md(e)&&md(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=t[i];if(md(l)&&md(o)||Jn(l)&&Jn(o)||Array.isArray(l)&&Array.isArray(o)?!ec(l,o,r):!Object.is(l,o))return!1}}return!0}var zS=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},U0=e=>Array.isArray(e)?e:[e],FT=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function b7(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&Jn(a)&&i){const l=b7(a,i);Jn(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var sa=e=>Jn(e)&&!Object.keys(e).length,WS=e=>e.type==="file",Yi=e=>typeof e=="function",Uy=e=>{if(!MS)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},j7=e=>e.type==="select-multiple",VS=e=>e.type==="radio",TX=e=>VS(e)||Mp(e),Mj=e=>Uy(e)&&e.isConnected;function PX(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=Fn(e)?s++:e[t[s++]];return e}function OX(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fn(e[t]))return!1;return!0}function Wn(e,t){const r=Array.isArray(t)?t:zb(t)?[t]:US(t),s=r.length===1?e:PX(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(Jn(s)&&sa(s)||Array.isArray(s)&&OX(s))&&Wn(e,r.slice(0,-1)),e}var RX=e=>{for(const t in e)if(Yi(e[t]))return!0;return!1};function _7(e){return Array.isArray(e)||Jn(e)&&!RX(e)}function IN(e,t={}){for(const r in e){const s=e[r];_7(s)?(t[r]=Array.isArray(s)?[]:{},IN(s,t[r])):Fn(s)||(t[r]=!0)}return t}function Uu(e,t,r){r||(r=IN(t));for(const s in e){const a=e[s];if(_7(a))Fn(t)||LN(r[s])?r[s]=IN(a,Array.isArray(a)?[]:{}):Uu(a,ka(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!ec(a,i)}}return r}const DT={value:!1,isValid:!1},$T={value:!0,isValid:!0};var w7=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fn(e[0].attributes.value)?Fn(e[0].value)||e[0].value===""?$T:{value:e[0].value,isValid:!0}:$T:DT}return DT},N7=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>Fn(e)?e:t?e===""?NaN:e&&+e:r&&Wa(e)?new Date(e):s?s(e):e;const MT={isValid:!1,value:null};var k7=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,MT):MT;function BT(e){const t=e.ref;return WS(t)?t.files:VS(t)?k7(e.refs).value:j7(t)?[...t.selectedOptions].map(({value:r})=>r):Mp(t)?w7(e.refs).value:N7(Fn(t.value)?e.ref.value:t.value,e)}var LX=(e,t,r,s)=>{const a={};for(const i of e){const l=Dt(t,i);l&&Hr(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},zy=e=>e instanceof RegExp,t0=e=>Fn(e)?e:zy(e)?e.source:Jn(e)?zy(e.value)?e.value.source:e.value:e,UT=e=>({isOnSubmit:!e||e===Xi.onSubmit,isOnBlur:e===Xi.onBlur,isOnChange:e===Xi.onChange,isOnAll:e===Xi.all,isOnTouch:e===Xi.onTouched});const zT="AsyncFunction";var IX=e=>!!e&&!!e.validate&&!!(Yi(e.validate)&&e.validate.constructor.name===zT||Jn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===zT)),FX=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),WT=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const z0=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=Dt(e,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(z0(o,t))break}else if(Jn(o)&&z0(o,t))break}}};function VT(e,t,r){const s=Dt(e,r);if(s||zb(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=Dt(t,i),o=Dt(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:r}}var DX=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return sa(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||Xi.all))},$X=(e,t,r)=>!e||!t||e===t||U0(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),MX=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,BX=(e,t)=>!BS(Dt(e,t)).length&&Wn(e,t),UX=(e,t,r)=>{const s=U0(Dt(e,r));return Hr(s,"root",t[r]),Hr(e,r,s),e};function HT(e,t,r="validate"){if(Wa(e)||Array.isArray(e)&&e.every(Wa)||jl(e)&&!e)return{type:r,message:Wa(e)?e:"",ref:t}}var _u=e=>Jn(e)&&!zy(e)?e:{value:e,message:""},qT=async(e,t,r,s,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:f,pattern:y,validate:x,name:p,valueAsNumber:h,mount:v}=e._f,b=Dt(r,p);if(!v||t.has(p))return{};const j=o?o[0]:l,_=C=>{a&&j.reportValidity&&(j.setCustomValidity(jl(C)?"":C||""),j.reportValidity())},N={},w=VS(l),k=Mp(l),S=w||k,E=(h||WS(l))&&Fn(l.value)&&Fn(b)||Uy(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,T=zS.bind(null,p,s,N),A=(C,P,O,R=Jl.maxLength,F=Jl.minLength)=>{const Q=C?P:O;N[p]={type:C?R:F,message:Q,ref:l,...T(C?R:F,Q)}};if(i?!Array.isArray(b)||!b.length:c&&(!S&&(E||ka(b))||jl(b)&&!b||k&&!w7(o).isValid||w&&!k7(o).isValid)){const{value:C,message:P}=Wa(c)?{value:!!c,message:c}:_u(c);if(C&&(N[p]={type:Jl.required,message:P,ref:j,...T(Jl.required,P)},!s))return _(P),N}if(!E&&(!ka(m)||!ka(f))){let C,P;const O=_u(f),R=_u(m);if(!ka(b)&&!isNaN(b)){const F=l.valueAsNumber||b&&+b;ka(O.value)||(C=F>O.value),ka(R.value)||(P=F<R.value)}else{const F=l.valueAsDate||new Date(b),Q=I=>new Date(new Date().toDateString()+" "+I),W=l.type=="time",L=l.type=="week";Wa(O.value)&&b&&(C=W?Q(b)>Q(O.value):L?b>O.value:F>new Date(O.value)),Wa(R.value)&&b&&(P=W?Q(b)<Q(R.value):L?b<R.value:F<new Date(R.value))}if((C||P)&&(A(!!C,O.message,R.message,Jl.max,Jl.min),!s))return _(N[p].message),N}if((d||u)&&!E&&(Wa(b)||i&&Array.isArray(b))){const C=_u(d),P=_u(u),O=!ka(C.value)&&b.length>+C.value,R=!ka(P.value)&&b.length<+P.value;if((O||R)&&(A(O,C.message,P.message),!s))return _(N[p].message),N}if(y&&!E&&Wa(b)){const{value:C,message:P}=_u(y);if(zy(C)&&!b.match(C)&&(N[p]={type:Jl.pattern,message:P,ref:l,...T(Jl.pattern,P)},!s))return _(P),N}if(x){if(Yi(x)){const C=await x(b,r),P=HT(C,j);if(P&&(N[p]={...P,...T(Jl.validate,P.message)},!s))return _(P.message),N}else if(Jn(x)){let C={};for(const P in x){if(!sa(C)&&!s)break;const O=HT(await x[P](b,r),j,P);O&&(C={...O,...T(P,O.message)},_(O.message),s&&(N[p]=C))}if(!sa(C)&&(N[p]={ref:j,...C},!s))return N}}return _(!0),N};const zX={mode:Xi.onSubmit,reValidateMode:Xi.onChange,shouldFocusError:!0};function WX(e={}){let t={...zX,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Yi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=Jn(t.defaultValues)||Jn(t.values)?cs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:cs(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const f={array:FT(),state:FT()},y=t.criteriaMode===Xi.all,x=xe=>Ae=>{clearTimeout(d),d=setTimeout(xe,Ae)},p=async xe=>{if(!t.disabled&&(u.isValid||m.isValid||xe)){const Ae=t.resolver?sa((await k()).errors):await E(s,!0);Ae!==r.isValid&&f.state.next({isValid:Ae})}},h=(xe,Ae)=>{!t.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((xe||Array.from(o.mount)).forEach($e=>{$e&&(Ae?Hr(r.validatingFields,$e,Ae):Wn(r.validatingFields,$e))}),f.state.next({validatingFields:r.validatingFields,isValidating:!sa(r.validatingFields)}))},v=(xe,Ae=[],$e,Me,Fe=!0,We=!0)=>{if(Me&&$e&&!t.disabled){if(l.action=!0,We&&Array.isArray(Dt(s,xe))){const Ze=$e(Dt(s,xe),Me.argA,Me.argB);Fe&&Hr(s,xe,Ze)}if(We&&Array.isArray(Dt(r.errors,xe))){const Ze=$e(Dt(r.errors,xe),Me.argA,Me.argB);Fe&&Hr(r.errors,xe,Ze),BX(r.errors,xe)}if((u.touchedFields||m.touchedFields)&&We&&Array.isArray(Dt(r.touchedFields,xe))){const Ze=$e(Dt(r.touchedFields,xe),Me.argA,Me.argB);Fe&&Hr(r.touchedFields,xe,Ze)}(u.dirtyFields||m.dirtyFields)&&(r.dirtyFields=Uu(a,i)),f.state.next({name:xe,isDirty:A(xe,Ae),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Hr(i,xe,Ae)},b=(xe,Ae)=>{Hr(r.errors,xe,Ae),f.state.next({errors:r.errors})},j=xe=>{r.errors=xe,f.state.next({errors:r.errors,isValid:!1})},_=(xe,Ae,$e,Me)=>{const Fe=Dt(s,xe);if(Fe){const We=Dt(i,xe,Fn($e)?Dt(a,xe):$e);Fn(We)||Me&&Me.defaultChecked||Ae?Hr(i,xe,Ae?We:BT(Fe._f)):O(xe,We),l.mount&&!l.action&&p()}},N=(xe,Ae,$e,Me,Fe)=>{let We=!1,Ze=!1;const pt={name:xe};if(!t.disabled){if(!$e||Me){(u.isDirty||m.isDirty)&&(Ze=r.isDirty,r.isDirty=pt.isDirty=A(),We=Ze!==pt.isDirty);const Ve=ec(Dt(a,xe),Ae);Ze=!!Dt(r.dirtyFields,xe),Ve?Wn(r.dirtyFields,xe):Hr(r.dirtyFields,xe,!0),pt.dirtyFields=r.dirtyFields,We=We||(u.dirtyFields||m.dirtyFields)&&Ze!==!Ve}if($e){const Ve=Dt(r.touchedFields,xe);Ve||(Hr(r.touchedFields,xe,$e),pt.touchedFields=r.touchedFields,We=We||(u.touchedFields||m.touchedFields)&&Ve!==$e)}We&&Fe&&f.state.next(pt)}return We?pt:{}},w=(xe,Ae,$e,Me)=>{const Fe=Dt(r.errors,xe),We=(u.isValid||m.isValid)&&jl(Ae)&&r.isValid!==Ae;if(t.delayError&&$e?(c=x(()=>b(xe,$e)),c(t.delayError)):(clearTimeout(d),c=null,$e?Hr(r.errors,xe,$e):Wn(r.errors,xe)),($e?!ec(Fe,$e):Fe)||!sa(Me)||We){const Ze={...Me,...We&&jl(Ae)?{isValid:Ae}:{},errors:r.errors,name:xe};r={...r,...Ze},f.state.next(Ze)}},k=async xe=>{h(xe,!0);const Ae=await t.resolver(i,t.context,LX(xe||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return h(xe),Ae},S=async xe=>{const{errors:Ae}=await k(xe);if(xe)for(const $e of xe){const Me=Dt(Ae,$e);Me?Hr(r.errors,$e,Me):Wn(r.errors,$e)}else r.errors=Ae;return Ae},E=async(xe,Ae,$e={valid:!0})=>{for(const Me in xe){const Fe=xe[Me];if(Fe){const{_f:We,...Ze}=Fe;if(We){const pt=o.array.has(We.name),Ve=Fe._f&&IX(Fe._f);Ve&&u.validatingFields&&h([We.name],!0);const Je=await qT(Fe,o.disabled,i,y,t.shouldUseNativeValidation&&!Ae,pt);if(Ve&&u.validatingFields&&h([We.name]),Je[We.name]&&($e.valid=!1,Ae))break;!Ae&&(Dt(Je,We.name)?pt?UX(r.errors,Je,We.name):Hr(r.errors,We.name,Je[We.name]):Wn(r.errors,We.name))}!sa(Ze)&&await E(Ze,Ae,$e)}}return $e.valid},T=()=>{for(const xe of o.unMount){const Ae=Dt(s,xe);Ae&&(Ae._f.refs?Ae._f.refs.every($e=>!Mj($e)):!Mj(Ae._f.ref))&&ce(xe)}o.unMount=new Set},A=(xe,Ae)=>!t.disabled&&(xe&&Ae&&Hr(i,xe,Ae),!ec(I(),a)),C=(xe,Ae,$e)=>EX(xe,o,{...l.mount?i:Fn(Ae)?a:Wa(xe)?{[xe]:Ae}:Ae},$e,Ae),P=xe=>BS(Dt(l.mount?i:a,xe,t.shouldUnregister?Dt(a,xe,[]):[])),O=(xe,Ae,$e={})=>{const Me=Dt(s,xe);let Fe=Ae;if(Me){const We=Me._f;We&&(!We.disabled&&Hr(i,xe,N7(Ae,We)),Fe=Uy(We.ref)&&ka(Ae)?"":Ae,j7(We.ref)?[...We.ref.options].forEach(Ze=>Ze.selected=Fe.includes(Ze.value)):We.refs?Mp(We.ref)?We.refs.forEach(Ze=>{(!Ze.defaultChecked||!Ze.disabled)&&(Array.isArray(Fe)?Ze.checked=!!Fe.find(pt=>pt===Ze.value):Ze.checked=Fe===Ze.value||!!Fe)}):We.refs.forEach(Ze=>Ze.checked=Ze.value===Fe):WS(We.ref)?We.ref.value="":(We.ref.value=Fe,We.ref.type||f.state.next({name:xe,values:cs(i)})))}($e.shouldDirty||$e.shouldTouch)&&N(xe,Fe,$e.shouldTouch,$e.shouldDirty,!0),$e.shouldValidate&&L(xe)},R=(xe,Ae,$e)=>{for(const Me in Ae){if(!Ae.hasOwnProperty(Me))return;const Fe=Ae[Me],We=xe+"."+Me,Ze=Dt(s,We);(o.array.has(xe)||Jn(Fe)||Ze&&!Ze._f)&&!md(Fe)?R(We,Fe,$e):O(We,Fe,$e)}},F=(xe,Ae,$e={})=>{const Me=Dt(s,xe),Fe=o.array.has(xe),We=cs(Ae);Hr(i,xe,We),Fe?(f.array.next({name:xe,values:cs(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&$e.shouldDirty&&f.state.next({name:xe,dirtyFields:Uu(a,i),isDirty:A(xe,We)})):Me&&!Me._f&&!ka(We)?R(xe,We,$e):O(xe,We,$e),WT(xe,o)&&f.state.next({...r,name:xe}),f.state.next({name:l.mount?xe:void 0,values:cs(i)})},Q=async xe=>{l.mount=!0;const Ae=xe.target;let $e=Ae.name,Me=!0;const Fe=Dt(s,$e),We=Ve=>{Me=Number.isNaN(Ve)||md(Ve)&&isNaN(Ve.getTime())||ec(Ve,Dt(i,$e,Ve))},Ze=UT(t.mode),pt=UT(t.reValidateMode);if(Fe){let Ve,Je;const Ke=Ae.type?BT(Fe._f):_X(xe),gt=xe.type===IT.BLUR||xe.type===IT.FOCUS_OUT,At=!FX(Fe._f)&&!t.resolver&&!Dt(r.errors,$e)&&!Fe._f.deps||MX(gt,Dt(r.touchedFields,$e),r.isSubmitted,pt,Ze),Lt=WT($e,o,gt);Hr(i,$e,Ke),gt?(!Ae||!Ae.readOnly)&&(Fe._f.onBlur&&Fe._f.onBlur(xe),c&&c(0)):Fe._f.onChange&&Fe._f.onChange(xe);const Bt=N($e,Ke,gt),ar=!sa(Bt)||Lt;if(!gt&&f.state.next({name:$e,type:xe.type,values:cs(i)}),At)return(u.isValid||m.isValid)&&(t.mode==="onBlur"?gt&&p():gt||p()),ar&&f.state.next({name:$e,...Lt?{}:Bt});if(!gt&&Lt&&f.state.next({...r}),t.resolver){const{errors:er}=await k([$e]);if(We(Ke),Me){const Be=VT(r.errors,s,$e),xt=VT(er,s,Be.name||$e);Ve=xt.error,$e=xt.name,Je=sa(er)}}else h([$e],!0),Ve=(await qT(Fe,o.disabled,i,y,t.shouldUseNativeValidation))[$e],h([$e]),We(Ke),Me&&(Ve?Je=!1:(u.isValid||m.isValid)&&(Je=await E(s,!0)));Me&&(Fe._f.deps&&(!Array.isArray(Fe._f.deps)||Fe._f.deps.length>0)&&L(Fe._f.deps),w($e,Je,Ve,Bt))}},W=(xe,Ae)=>{if(Dt(r.errors,Ae)&&xe.focus)return xe.focus(),1},L=async(xe,Ae={})=>{let $e,Me;const Fe=U0(xe);if(t.resolver){const We=await S(Fn(xe)?xe:Fe);$e=sa(We),Me=xe?!Fe.some(Ze=>Dt(We,Ze)):$e}else xe?(Me=(await Promise.all(Fe.map(async We=>{const Ze=Dt(s,We);return await E(Ze&&Ze._f?{[We]:Ze}:Ze)}))).every(Boolean),!(!Me&&!r.isValid)&&p()):Me=$e=await E(s);return f.state.next({...!Wa(xe)||(u.isValid||m.isValid)&&$e!==r.isValid?{}:{name:xe},...t.resolver||!xe?{isValid:$e}:{},errors:r.errors}),Ae.shouldFocus&&!Me&&z0(s,W,xe?Fe:o.mount),Me},I=(xe,Ae)=>{let $e={...l.mount?i:a};return Ae&&($e=b7(Ae.dirtyFields?r.dirtyFields:r.touchedFields,$e)),Fn(xe)?$e:Wa(xe)?Dt($e,xe):xe.map(Me=>Dt($e,Me))},K=(xe,Ae)=>({invalid:!!Dt((Ae||r).errors,xe),isDirty:!!Dt((Ae||r).dirtyFields,xe),error:Dt((Ae||r).errors,xe),isValidating:!!Dt(r.validatingFields,xe),isTouched:!!Dt((Ae||r).touchedFields,xe)}),D=xe=>{xe&&U0(xe).forEach(Ae=>Wn(r.errors,Ae)),f.state.next({errors:xe?r.errors:{}})},Y=(xe,Ae,$e)=>{const Me=(Dt(s,xe,{_f:{}})._f||{}).ref,Fe=Dt(r.errors,xe)||{},{ref:We,message:Ze,type:pt,...Ve}=Fe;Hr(r.errors,xe,{...Ve,...Ae,ref:Me}),f.state.next({name:xe,errors:r.errors,isValid:!1}),$e&&$e.shouldFocus&&Me&&Me.focus&&Me.focus()},re=(xe,Ae)=>Yi(xe)?f.state.subscribe({next:$e=>"values"in $e&&xe(C(void 0,Ae),$e)}):C(xe,Ae,!0),B=xe=>f.state.subscribe({next:Ae=>{$X(xe.name,Ae.name,xe.exact)&&DX(Ae,xe.formState||u,ye,xe.reRenderRoot)&&xe.callback({values:{...i},...r,...Ae,defaultValues:a})}}).unsubscribe,G=xe=>(l.mount=!0,m={...m,...xe.formState},B({...xe,formState:m})),ce=(xe,Ae={})=>{for(const $e of xe?U0(xe):o.mount)o.mount.delete($e),o.array.delete($e),Ae.keepValue||(Wn(s,$e),Wn(i,$e)),!Ae.keepError&&Wn(r.errors,$e),!Ae.keepDirty&&Wn(r.dirtyFields,$e),!Ae.keepTouched&&Wn(r.touchedFields,$e),!Ae.keepIsValidating&&Wn(r.validatingFields,$e),!t.shouldUnregister&&!Ae.keepDefaultValue&&Wn(a,$e);f.state.next({values:cs(i)}),f.state.next({...r,...Ae.keepDirty?{isDirty:A()}:{}}),!Ae.keepIsValid&&p()},ae=({disabled:xe,name:Ae})=>{(jl(xe)&&l.mount||xe||o.disabled.has(Ae))&&(xe?o.disabled.add(Ae):o.disabled.delete(Ae))},fe=(xe,Ae={})=>{let $e=Dt(s,xe);const Me=jl(Ae.disabled)||jl(t.disabled);return Hr(s,xe,{...$e||{},_f:{...$e&&$e._f?$e._f:{ref:{name:xe}},name:xe,mount:!0,...Ae}}),o.mount.add(xe),$e?ae({disabled:jl(Ae.disabled)?Ae.disabled:t.disabled,name:xe}):_(xe,!0,Ae.value),{...Me?{disabled:Ae.disabled||t.disabled}:{},...t.progressive?{required:!!Ae.required,min:t0(Ae.min),max:t0(Ae.max),minLength:t0(Ae.minLength),maxLength:t0(Ae.maxLength),pattern:t0(Ae.pattern)}:{},name:xe,onChange:Q,onBlur:Q,ref:Fe=>{if(Fe){fe(xe,Ae),$e=Dt(s,xe);const We=Fn(Fe.value)&&Fe.querySelectorAll&&Fe.querySelectorAll("input,select,textarea")[0]||Fe,Ze=TX(We),pt=$e._f.refs||[];if(Ze?pt.find(Ve=>Ve===We):We===$e._f.ref)return;Hr(s,xe,{_f:{...$e._f,...Ze?{refs:[...pt.filter(Mj),We,...Array.isArray(Dt(a,xe))?[{}]:[]],ref:{type:We.type,name:xe}}:{ref:We}}}),_(xe,!1,void 0,We)}else $e=Dt(s,xe,{}),$e._f&&($e._f.mount=!1),(t.shouldUnregister||Ae.shouldUnregister)&&!(NX(o.array,xe)&&l.action)&&o.unMount.add(xe)}}},ne=()=>t.shouldFocusError&&z0(s,W,o.mount),he=xe=>{jl(xe)&&(f.state.next({disabled:xe}),z0(s,(Ae,$e)=>{const Me=Dt(s,$e);Me&&(Ae.disabled=Me._f.disabled||xe,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(Fe=>{Fe.disabled=Me._f.disabled||xe}))},0,!1))},M=(xe,Ae)=>async $e=>{let Me;$e&&($e.preventDefault&&$e.preventDefault(),$e.persist&&$e.persist());let Fe=cs(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:We,values:Ze}=await k();r.errors=We,Fe=cs(Ze)}else await E(s);if(o.disabled.size)for(const We of o.disabled)Wn(Fe,We);if(Wn(r.errors,"root"),sa(r.errors)){f.state.next({errors:{}});try{await xe(Fe,$e)}catch(We){Me=We}}else Ae&&await Ae({...r.errors},$e),ne(),setTimeout(ne);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sa(r.errors)&&!Me,submitCount:r.submitCount+1,errors:r.errors}),Me)throw Me},Se=(xe,Ae={})=>{Dt(s,xe)&&(Fn(Ae.defaultValue)?F(xe,cs(Dt(a,xe))):(F(xe,Ae.defaultValue),Hr(a,xe,cs(Ae.defaultValue))),Ae.keepTouched||Wn(r.touchedFields,xe),Ae.keepDirty||(Wn(r.dirtyFields,xe),r.isDirty=Ae.defaultValue?A(xe,cs(Dt(a,xe))):A()),Ae.keepError||(Wn(r.errors,xe),u.isValid&&p()),f.state.next({...r}))},me=(xe,Ae={})=>{const $e=xe?cs(xe):a,Me=cs($e),Fe=sa(xe),We=Fe?a:Me;if(Ae.keepDefaultValues||(a=$e),!Ae.keepValues){if(Ae.keepDirtyValues){const Ze=new Set([...o.mount,...Object.keys(Uu(a,i))]);for(const pt of Array.from(Ze))Dt(r.dirtyFields,pt)?Hr(We,pt,Dt(i,pt)):F(pt,Dt(We,pt))}else{if(MS&&Fn(xe))for(const Ze of o.mount){const pt=Dt(s,Ze);if(pt&&pt._f){const Ve=Array.isArray(pt._f.refs)?pt._f.refs[0]:pt._f.ref;if(Uy(Ve)){const Je=Ve.closest("form");if(Je){Je.reset();break}}}}if(Ae.keepFieldsRef)for(const Ze of o.mount)F(Ze,Dt(We,Ze));else s={}}i=t.shouldUnregister?Ae.keepDefaultValues?cs(a):{}:cs(We),f.array.next({values:{...We}}),f.state.next({values:{...We}})}o={mount:Ae.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!Ae.keepIsValid||!!Ae.keepDirtyValues||!t.shouldUnregister&&!sa(We),l.watch=!!t.shouldUnregister,f.state.next({submitCount:Ae.keepSubmitCount?r.submitCount:0,isDirty:Fe?!1:Ae.keepDirty?r.isDirty:!!(Ae.keepDefaultValues&&!ec(xe,a)),isSubmitted:Ae.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Fe?{}:Ae.keepDirtyValues?Ae.keepDefaultValues&&i?Uu(a,i):r.dirtyFields:Ae.keepDefaultValues&&xe?Uu(a,xe):Ae.keepDirty?r.dirtyFields:{},touchedFields:Ae.keepTouched?r.touchedFields:{},errors:Ae.keepErrors?r.errors:{},isSubmitSuccessful:Ae.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Pe=(xe,Ae)=>me(Yi(xe)?xe(i):xe,Ae),ue=(xe,Ae={})=>{const $e=Dt(s,xe),Me=$e&&$e._f;if(Me){const Fe=Me.refs?Me.refs[0]:Me.ref;Fe.focus&&(Fe.focus(),Ae.shouldSelect&&Yi(Fe.select)&&Fe.select())}},ye=xe=>{r={...r,...xe}},lt={control:{register:fe,unregister:ce,getFieldState:K,handleSubmit:M,setError:Y,_subscribe:B,_runSchema:k,_focusError:ne,_getWatch:C,_getDirty:A,_setValid:p,_setFieldArray:v,_setDisabledField:ae,_setErrors:j,_getFieldArray:P,_reset:me,_resetDefaultValues:()=>Yi(t.defaultValues)&&t.defaultValues().then(xe=>{Pe(xe,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:he,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(xe){l=xe},get _defaultValues(){return a},get _names(){return o},set _names(xe){o=xe},get _formState(){return r},get _options(){return t},set _options(xe){t={...t,...xe}}},subscribe:G,trigger:L,register:fe,handleSubmit:M,watch:re,setValue:F,getValues:I,reset:Pe,resetField:Se,clearErrors:D,unregister:ce,setError:Y,setFocus:ue,getFieldState:K};return{...lt,formControl:lt}}function VX(e={}){const t=Ce.useRef(void 0),r=Ce.useRef(void 0),[s,a]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:Yi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Yi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Yi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=WX(e);t.current={...o,formState:s}}const i=t.current.control;return i._options=e,AX(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),Ce.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Ce.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Ce.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Ce.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Ce.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),Ce.useEffect(()=>{var l;e.values&&!ec(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Ce.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=CX(s,i),t.current}const GT=(e,t,r)=>{if(e&&"reportValidity"in e){const s=Dt(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},FN=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?GT(s.ref,r,e):s&&s.refs&&s.refs.forEach(a=>GT(a,r,e))}},JT=(e,t)=>{t.shouldUseNativeValidation&&FN(e,t);const r={};for(const s in e){const a=Dt(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(HX(t.names||Object.keys(e),s)){const l=Object.assign({},Dt(r,s));Hr(l,"root",i),Hr(r,s,l)}else Hr(r,s,i)}return r},HX=(e,t)=>{const r=KT(t);return e.some(s=>KT(s).match(`^${r}\\.\\d+`))};function KT(e){return e.replace(/\]|\[/g,"")}function vt(e,t,r){function s(o,c){var d;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(d=o._zod).traits??(d.traits=new Set),o._zod.traits.add(e),t(o,c);for(const u in l.prototype)u in o||Object.defineProperty(o,u,{value:l.prototype[u].bind(o)});o._zod.constr=l,o._zod.def=c}const a=(r==null?void 0:r.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function l(o){var c;const d=r!=null&&r.Parent?new i:this;s(d,o),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(l,"init",{value:s}),Object.defineProperty(l,Symbol.hasInstance,{value:o=>{var c,d;return r!=null&&r.Parent&&o instanceof r.Parent?!0:(d=(c=o==null?void 0:o._zod)==null?void 0:c.traits)==null?void 0:d.has(e)}}),Object.defineProperty(l,"name",{value:e}),l}class gm extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class S7 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const C7={};function Dd(e){return C7}function qX(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,a])=>t.indexOf(+s)===-1).map(([s,a])=>a)}function DN(e,t){return typeof t=="bigint"?t.toString():t}function HS(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function qS(e){return e==null}function GS(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const XT=Symbol("evaluating");function Qr(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==XT)return s===void 0&&(s=XT,s=r()),s},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function su(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function au(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function YT(e){return JSON.stringify(e)}const A7="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Wy(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const GX=HS(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Sh(e){if(Wy(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Wy(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function E7(e){return Sh(e)?{...e}:Array.isArray(e)?[...e]:e}const JX=new Set(["string","number","symbol"]);function Wb(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Oc(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(s._zod.parent=e),s}function lr(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function KX(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function XX(e,t){const r=e._zod.def,s=au(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return su(this,"shape",a),a},checks:[]});return Oc(e,s)}function YX(e,t){const r=e._zod.def,s=au(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return su(this,"shape",a),a},checks:[]});return Oc(e,s)}function ZX(e,t){if(!Sh(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=au(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return su(this,"shape",i),i},checks:[]});return Oc(e,a)}function QX(e,t){if(!Sh(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return su(this,"shape",s),s},checks:e._zod.def.checks};return Oc(e,r)}function eY(e,t){const r=au(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return su(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return Oc(e,r)}function tY(e,t,r){const s=au(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const l in r){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);r[l]&&(i[l]=e?new e({type:"optional",innerType:a[l]}):a[l])}else for(const l in a)i[l]=e?new e({type:"optional",innerType:a[l]}):a[l];return su(this,"shape",i),i},checks:[]});return Oc(t,s)}function rY(e,t,r){const s=au(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const l in r){if(!(l in i))throw new Error(`Unrecognized key: "${l}"`);r[l]&&(i[l]=new e({type:"nonoptional",innerType:a[l]}))}else for(const l in a)i[l]=new e({type:"nonoptional",innerType:a[l]});return su(this,"shape",i),i},checks:[]});return Oc(t,s)}function rm(e,t=0){var r;if(e.aborted===!0)return!0;for(let s=t;s<e.issues.length;s++)if(((r=e.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function T7(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function Tx(e){return typeof e=="string"?e:e==null?void 0:e.message}function $d(e,t,r){var a,i,l,o,c,d;const s={...e,path:e.path??[]};if(!e.message){const u=Tx((l=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:l.call(i,e))??Tx((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??Tx((c=r.customError)==null?void 0:c.call(r,e))??Tx((d=r.localeError)==null?void 0:d.call(r,e))??"Invalid input";s.message=u}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function JS(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ch(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const P7=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,DN,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},KS=vt("$ZodError",P7),Vb=vt("$ZodError",P7,{Parent:Error});function nY(e,t=r=>r.message){const r={},s=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:r}}function sY(e,t=r=>r.message){const r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>s({issues:l}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let l=r,o=0;for(;o<i.path.length;){const c=i.path[o];o===i.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(t(i))):l[c]=l[c]||{_errors:[]},l=l[c],o++}}};return s(e),r}const Hb=e=>(t,r,s,a)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},l=t._zod.run({value:r,issues:[]},i);if(l instanceof Promise)throw new gm;if(l.issues.length){const o=new((a==null?void 0:a.Err)??e)(l.issues.map(c=>$d(c,i,Dd())));throw A7(o,a==null?void 0:a.callee),o}return l.value},aY=Hb(Vb),qb=e=>async(t,r,s,a)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let l=t._zod.run({value:r,issues:[]},i);if(l instanceof Promise&&(l=await l),l.issues.length){const o=new((a==null?void 0:a.Err)??e)(l.issues.map(c=>$d(c,i,Dd())));throw A7(o,a==null?void 0:a.callee),o}return l.value},iY=qb(Vb),Gb=e=>(t,r,s)=>{const a=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new gm;return i.issues.length?{success:!1,error:new(e??KS)(i.issues.map(l=>$d(l,a,Dd())))}:{success:!0,data:i.value}},lY=Gb(Vb),Jb=e=>async(t,r,s)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(l=>$d(l,a,Dd())))}:{success:!0,data:i.value}},oY=Jb(Vb),cY=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Hb(e)(t,r,a)},dY=e=>(t,r,s)=>Hb(e)(t,r,s),uY=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return qb(e)(t,r,a)},mY=e=>async(t,r,s)=>qb(e)(t,r,s),fY=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Gb(e)(t,r,a)},hY=e=>(t,r,s)=>Gb(e)(t,r,s),pY=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Jb(e)(t,r,a)},xY=e=>async(t,r,s)=>Jb(e)(t,r,s),gY=/^[cC][^\s-]{8,}$/,yY=/^[0-9a-z]+$/,vY=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,bY=/^[0-9a-vA-V]{20}$/,jY=/^[A-Za-z0-9]{27}$/,_Y=/^[a-zA-Z0-9_-]{21}$/,wY=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,NY=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ZT=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,kY=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,SY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function CY(){return new RegExp(SY,"u")}const AY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EY=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,TY=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,PY=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,OY=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,O7=/^[A-Za-z0-9_-]*$/,RY=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,LY=/^\+(?:[0-9]){6,14}[0-9]$/,R7="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",IY=new RegExp(`^${R7}$`);function L7(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function FY(e){return new RegExp(`^${L7(e)}$`)}function DY(e){const t=L7({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${R7}T(?:${s})$`)}const $Y=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},MY=/^[^A-Z]*$/,BY=/^[^a-z]*$/,Wl=vt("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),UY=vt("$ZodCheckMaxLength",(e,t)=>{var r;Wl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!qS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const a=s.value;if(a.length<=t.maximum)return;const l=JS(a);s.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),zY=vt("$ZodCheckMinLength",(e,t)=>{var r;Wl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!qS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const a=s.value;if(a.length>=t.minimum)return;const l=JS(a);s.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),WY=vt("$ZodCheckLengthEquals",(e,t)=>{var r;Wl.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!qS(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=s=>{const a=s.value,i=a.length;if(i===t.length)return;const l=JS(a),o=i>t.length;s.issues.push({origin:l,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Kb=vt("$ZodCheckStringFormat",(e,t)=>{var r,s;Wl.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),VY=vt("$ZodCheckRegex",(e,t)=>{Kb.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),HY=vt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=MY),Kb.init(e,t)}),qY=vt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=BY),Kb.init(e,t)}),GY=vt("$ZodCheckIncludes",(e,t)=>{Wl.init(e,t);const r=Wb(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),JY=vt("$ZodCheckStartsWith",(e,t)=>{Wl.init(e,t);const r=new RegExp(`^${Wb(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),KY=vt("$ZodCheckEndsWith",(e,t)=>{Wl.init(e,t);const r=new RegExp(`.*${Wb(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),XY=vt("$ZodCheckOverwrite",(e,t)=>{Wl.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class YY{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(l=>l),a=Math.min(...s.map(l=>l.length-l.trimStart().length)),i=s.map(l=>l.slice(a)).map(l=>" ".repeat(this.indent*2)+l);for(const l of i)this.content.push(l)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const ZY={major:4,minor:1,patch:12},is=vt("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ZY;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const l of i._zod.onattach)l(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,c,d)=>{let u=rm(o),m;for(const f of c){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(u)continue;const y=o.issues.length,x=f._zod.check(o);if(x instanceof Promise&&(d==null?void 0:d.async)===!1)throw new gm;if(m||x instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await x,o.issues.length!==y&&(u||(u=rm(o,y)))});else{if(o.issues.length===y)continue;u||(u=rm(o,y))}}return m?m.then(()=>o):o},l=(o,c,d)=>{if(rm(o))return o.aborted=!0,o;const u=i(c,s,d);if(u instanceof Promise){if(d.async===!1)throw new gm;return u.then(m=>e._zod.parse(m,d))}return e._zod.parse(u,d)};e._zod.run=(o,c)=>{if(c.skipChecks)return e._zod.parse(o,c);if(c.direction==="backward"){const u=e._zod.parse({value:o.value,issues:[]},{...c,skipChecks:!0});return u instanceof Promise?u.then(m=>l(m,o,c)):l(u,o,c)}const d=e._zod.parse(o,c);if(d instanceof Promise){if(c.async===!1)throw new gm;return d.then(u=>i(u,s,c))}return i(d,s,c)}}e["~standard"]={validate:i=>{var l;try{const o=lY(e,i);return o.success?{value:o.data}:{issues:(l=o.error)==null?void 0:l.issues}}catch{return oY(e,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),XS=vt("$ZodString",(e,t)=>{var r;is.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??$Y(e._zod.bag),e._zod.parse=(s,a)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),xn=vt("$ZodStringFormat",(e,t)=>{Kb.init(e,t),XS.init(e,t)}),QY=vt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=NY),xn.init(e,t)}),eZ=vt("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ZT(s))}else t.pattern??(t.pattern=ZT());xn.init(e,t)}),tZ=vt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=kY),xn.init(e,t)}),rZ=vt("$ZodURL",(e,t)=>{xn.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),a=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:RY.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),nZ=vt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=CY()),xn.init(e,t)}),sZ=vt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=_Y),xn.init(e,t)}),aZ=vt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=gY),xn.init(e,t)}),iZ=vt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=yY),xn.init(e,t)}),lZ=vt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=vY),xn.init(e,t)}),oZ=vt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=bY),xn.init(e,t)}),cZ=vt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=jY),xn.init(e,t)}),dZ=vt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=DY(t)),xn.init(e,t)}),uZ=vt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=IY),xn.init(e,t)}),mZ=vt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=FY(t)),xn.init(e,t)}),fZ=vt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=wY),xn.init(e,t)}),hZ=vt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=AY),xn.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),pZ=vt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=EY),xn.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),xZ=vt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=TY),xn.init(e,t)}),gZ=vt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=PY),xn.init(e,t),e._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[a,i]=s;if(!i)throw new Error;const l=Number(i);if(`${l}`!==i)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function I7(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const yZ=vt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=OY),xn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{I7(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function vZ(e){if(!O7.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return I7(r)}const bZ=vt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=O7),xn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{vZ(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),jZ=vt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=LY),xn.init(e,t)});function _Z(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const a=JSON.parse(atob(s));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const wZ=vt("$ZodJWT",(e,t)=>{xn.init(e,t),e._zod.check=r=>{_Z(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),NZ=vt("$ZodUnknown",(e,t)=>{is.init(e,t),e._zod.parse=r=>r}),kZ=vt("$ZodNever",(e,t)=>{is.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function QT(e,t,r){e.issues.length&&t.issues.push(...T7(r,e.issues)),t.value[r]=e.value}const SZ=vt("$ZodArray",(e,t)=>{is.init(e,t),e._zod.parse=(r,s)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let l=0;l<a.length;l++){const o=a[l],c=t.element._zod.run({value:o,issues:[]},s);c instanceof Promise?i.push(c.then(d=>QT(d,r,l))):QT(c,r,l)}return i.length?Promise.all(i).then(()=>r):r}});function Vy(e,t,r,s){e.issues.length&&t.issues.push(...T7(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}function F7(e){var s,a,i,l;const t=Object.keys(e.shape);for(const o of t)if(!((l=(i=(a=(s=e.shape)==null?void 0:s[o])==null?void 0:a._zod)==null?void 0:i.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const r=KX(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function D7(e,t,r,s,a,i){const l=[],o=a.keySet,c=a.catchall._zod,d=c.def.type;for(const u of Object.keys(t)){if(o.has(u))continue;if(d==="never"){l.push(u);continue}const m=c.run({value:t[u],issues:[]},s);m instanceof Promise?e.push(m.then(f=>Vy(f,r,u,t))):Vy(m,r,u,t)}return l.length&&r.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const CZ=vt("$ZodObject",(e,t)=>{is.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const o=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...o};return Object.defineProperty(t,"shape",{value:c}),c}})}const s=HS(()=>F7(t));Qr(e._zod,"propValues",()=>{const o=t.shape,c={};for(const d in o){const u=o[d]._zod;if(u.values){c[d]??(c[d]=new Set);for(const m of u.values)c[d].add(m)}}return c});const a=Wy,i=t.catchall;let l;e._zod.parse=(o,c)=>{l??(l=s.value);const d=o.value;if(!a(d))return o.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),o;o.value={};const u=[],m=l.shape;for(const f of l.keys){const x=m[f]._zod.run({value:d[f],issues:[]},c);x instanceof Promise?u.push(x.then(p=>Vy(p,o,f,d))):Vy(x,o,f,d)}return i?D7(u,d,o,c,s.value,e):u.length?Promise.all(u).then(()=>o):o}}),AZ=vt("$ZodObjectJIT",(e,t)=>{CZ.init(e,t);const r=e._zod.parse,s=HS(()=>F7(t)),a=f=>{const y=new YY(["shape","payload","ctx"]),x=s.value,p=j=>{const _=YT(j);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};y.write("const input = payload.value;");const h=Object.create(null);let v=0;for(const j of x.keys)h[j]=`key_${v++}`;y.write("const newResult = {};");for(const j of x.keys){const _=h[j],N=YT(j);y.write(`const ${_} = ${p(j)};`),y.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${_}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const b=y.compile();return(j,_)=>b(f,j,_)};let i;const l=Wy,o=!C7.jitless,d=o&&GX.value,u=t.catchall;let m;e._zod.parse=(f,y)=>{m??(m=s.value);const x=f.value;return l(x)?o&&d&&(y==null?void 0:y.async)===!1&&y.jitless!==!0?(i||(i=a(t.shape)),f=i(f,y),u?D7([],x,f,y,m,e):f):r(f,y):(f.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),f)}});function e5(e,t,r,s){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const a=e.filter(i=>!rm(i));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(l=>$d(l,s,Dd())))}),t)}const EZ=vt("$ZodUnion",(e,t)=>{is.init(e,t),Qr(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),Qr(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),Qr(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),Qr(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>GS(i.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return s(a,i);let l=!1;const o=[];for(const c of t.options){const d=c._zod.run({value:a.value,issues:[]},i);if(d instanceof Promise)o.push(d),l=!0;else{if(d.issues.length===0)return d;o.push(d)}}return l?Promise.all(o).then(c=>e5(c,a,e,i)):e5(o,a,e,i)}}),TZ=vt("$ZodIntersection",(e,t)=>{is.init(e,t),e._zod.parse=(r,s)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},s),l=t.right._zod.run({value:a,issues:[]},s);return i instanceof Promise||l instanceof Promise?Promise.all([i,l]).then(([c,d])=>t5(r,c,d)):t5(r,i,l)}});function $N(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Sh(e)&&Sh(t)){const r=Object.keys(t),s=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of s){const l=$N(e[i],t[i]);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};a[i]=l.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const a=e[s],i=t[s],l=$N(a,i);if(!l.valid)return{valid:!1,mergeErrorPath:[s,...l.mergeErrorPath]};r.push(l.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function t5(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),rm(e))return e;const s=$N(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const PZ=vt("$ZodEnum",(e,t)=>{is.init(e,t);const r=qX(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(a=>JX.has(typeof a)).map(a=>typeof a=="string"?Wb(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const l=a.value;return s.has(l)||a.issues.push({code:"invalid_value",values:r,input:l,inst:e}),a}}),OZ=vt("$ZodTransform",(e,t)=>{is.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new S7(e.constructor.name);const a=t.transform(r.value,r);if(s.async)return(a instanceof Promise?a:Promise.resolve(a)).then(l=>(r.value=l,r));if(a instanceof Promise)throw new gm;return r.value=a,r}});function r5(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const RZ=vt("$ZodOptional",(e,t)=>{is.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Qr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Qr(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${GS(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>r5(i,r.value)):r5(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),LZ=vt("$ZodNullable",(e,t)=>{is.init(e,t),Qr(e._zod,"optin",()=>t.innerType._zod.optin),Qr(e._zod,"optout",()=>t.innerType._zod.optout),Qr(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${GS(r.source)}|null)$`):void 0}),Qr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),IZ=vt("$ZodDefault",(e,t)=>{is.init(e,t),e._zod.optin="optional",Qr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>n5(i,t)):n5(a,t)}});function n5(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const FZ=vt("$ZodPrefault",(e,t)=>{is.init(e,t),e._zod.optin="optional",Qr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),DZ=vt("$ZodNonOptional",(e,t)=>{is.init(e,t),Qr(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>s5(i,e)):s5(a,e)}});function s5(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const $Z=vt("$ZodCatch",(e,t)=>{is.init(e,t),Qr(e._zod,"optin",()=>t.innerType._zod.optin),Qr(e._zod,"optout",()=>t.innerType._zod.optout),Qr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(l=>$d(l,s,Dd()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>$d(i,s,Dd()))},input:r.value}),r.issues=[]),r)}}),MZ=vt("$ZodPipe",(e,t)=>{is.init(e,t),Qr(e._zod,"values",()=>t.in._zod.values),Qr(e._zod,"optin",()=>t.in._zod.optin),Qr(e._zod,"optout",()=>t.out._zod.optout),Qr(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{if(s.direction==="backward"){const i=t.out._zod.run(r,s);return i instanceof Promise?i.then(l=>Px(l,t.in,s)):Px(i,t.in,s)}const a=t.in._zod.run(r,s);return a instanceof Promise?a.then(i=>Px(i,t.out,s)):Px(a,t.out,s)}});function Px(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const BZ=vt("$ZodReadonly",(e,t)=>{is.init(e,t),Qr(e._zod,"propValues",()=>t.innerType._zod.propValues),Qr(e._zod,"values",()=>t.innerType._zod.values),Qr(e._zod,"optin",()=>t.innerType._zod.optin),Qr(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(a5):a5(a)}});function a5(e){return e.value=Object.freeze(e.value),e}const UZ=vt("$ZodCustom",(e,t)=>{Wl.init(e,t),is.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,a=t.fn(s);if(a instanceof Promise)return a.then(i=>i5(i,r,s,e));i5(a,r,s,e)}});function i5(e,t,r,s){if(!e){const a={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(a.params=s._zod.def.params),t.issues.push(Ch(a))}}class zZ{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const a={...s,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function WZ(){return new zZ}const Ox=WZ();function VZ(e,t){return new e({type:"string",...lr(t)})}function HZ(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...lr(t)})}function l5(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...lr(t)})}function qZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...lr(t)})}function GZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...lr(t)})}function JZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...lr(t)})}function KZ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...lr(t)})}function XZ(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...lr(t)})}function YZ(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...lr(t)})}function ZZ(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...lr(t)})}function QZ(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...lr(t)})}function eQ(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...lr(t)})}function tQ(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...lr(t)})}function rQ(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...lr(t)})}function nQ(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...lr(t)})}function sQ(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...lr(t)})}function aQ(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...lr(t)})}function iQ(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...lr(t)})}function lQ(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...lr(t)})}function oQ(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...lr(t)})}function cQ(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...lr(t)})}function dQ(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...lr(t)})}function uQ(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...lr(t)})}function mQ(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...lr(t)})}function fQ(e,t){return new e({type:"string",format:"date",check:"string_format",...lr(t)})}function hQ(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...lr(t)})}function pQ(e,t){return new e({type:"string",format:"duration",check:"string_format",...lr(t)})}function xQ(e){return new e({type:"unknown"})}function gQ(e,t){return new e({type:"never",...lr(t)})}function $7(e,t){return new UY({check:"max_length",...lr(t),maximum:e})}function Hy(e,t){return new zY({check:"min_length",...lr(t),minimum:e})}function M7(e,t){return new WY({check:"length_equals",...lr(t),length:e})}function yQ(e,t){return new VY({check:"string_format",format:"regex",...lr(t),pattern:e})}function vQ(e){return new HY({check:"string_format",format:"lowercase",...lr(e)})}function bQ(e){return new qY({check:"string_format",format:"uppercase",...lr(e)})}function jQ(e,t){return new GY({check:"string_format",format:"includes",...lr(t),includes:e})}function _Q(e,t){return new JY({check:"string_format",format:"starts_with",...lr(t),prefix:e})}function wQ(e,t){return new KY({check:"string_format",format:"ends_with",...lr(t),suffix:e})}function Bp(e){return new XY({check:"overwrite",tx:e})}function NQ(e){return Bp(t=>t.normalize(e))}function kQ(){return Bp(e=>e.trim())}function SQ(){return Bp(e=>e.toLowerCase())}function CQ(){return Bp(e=>e.toUpperCase())}function AQ(e,t,r){return new e({type:"array",element:t,...lr(r)})}function EQ(e,t,r){return new e({type:"custom",check:"custom",fn:t,...lr(r)})}function TQ(e){const t=PQ(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Ch(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(Ch(a))}},e(r.value,r)));return t}function PQ(e,t){const r=new Wl({check:"custom",...lr(t)});return r._zod.check=e,r}function o5(e,t){try{var r=e()}catch(s){return t(s)}return r&&r.then?r.then(void 0,t):r}function OQ(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!r[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return e.push(m)})}),t){var c=r[l].types,d=c&&c[s.code];r[l]=zS(l,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r}function RQ(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!r[l])if(s.code==="invalid_union"&&s.errors.length>0){var o=s.errors[0][0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if(s.code==="invalid_union"&&s.errors.forEach(function(u){return u.forEach(function(m){return e.push(m)})}),t){var c=r[l].types,d=c&&c[s.code];r[l]=zS(l,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r}function LQ(e,t,r){if(r===void 0&&(r={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(e))return function(s,a,i){try{return Promise.resolve(o5(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(l){return i.shouldUseNativeValidation&&FN({},i),{errors:{},values:r.raw?Object.assign({},s):l}})},function(l){if(function(o){return Array.isArray(o==null?void 0:o.issues)}(l))return{values:{},errors:JT(OQ(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(e))return function(s,a,i){try{return Promise.resolve(o5(function(){return Promise.resolve((r.mode==="sync"?aY:iY)(e,s,t)).then(function(l){return i.shouldUseNativeValidation&&FN({},i),{errors:{},values:r.raw?Object.assign({},s):l}})},function(l){if(function(o){return o instanceof KS}(l))return{values:{},errors:JT(RQ(l.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const IQ=vt("ZodISODateTime",(e,t)=>{dZ.init(e,t),Sn.init(e,t)});function FQ(e){return mQ(IQ,e)}const DQ=vt("ZodISODate",(e,t)=>{uZ.init(e,t),Sn.init(e,t)});function $Q(e){return fQ(DQ,e)}const MQ=vt("ZodISOTime",(e,t)=>{mZ.init(e,t),Sn.init(e,t)});function BQ(e){return hQ(MQ,e)}const UQ=vt("ZodISODuration",(e,t)=>{fZ.init(e,t),Sn.init(e,t)});function zQ(e){return pQ(UQ,e)}const WQ=(e,t)=>{KS.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>sY(e,r)},flatten:{value:r=>nY(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,DN,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,DN,2)}},isEmpty:{get(){return e.issues.length===0}}})},Li=vt("ZodError",WQ,{Parent:Error}),VQ=Hb(Li),HQ=qb(Li),qQ=Gb(Li),GQ=Jb(Li),JQ=cY(Li),KQ=dY(Li),XQ=uY(Li),YQ=mY(Li),ZQ=fY(Li),QQ=hY(Li),eee=pY(Li),tee=xY(Li),vs=vt("ZodType",(e,t)=>(is.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(au(t,{checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),e.clone=(r,s)=>Oc(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>VQ(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>qQ(e,r,s),e.parseAsync=async(r,s)=>HQ(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>GQ(e,r,s),e.spa=e.safeParseAsync,e.encode=(r,s)=>JQ(e,r,s),e.decode=(r,s)=>KQ(e,r,s),e.encodeAsync=async(r,s)=>XQ(e,r,s),e.decodeAsync=async(r,s)=>YQ(e,r,s),e.safeEncode=(r,s)=>ZQ(e,r,s),e.safeDecode=(r,s)=>QQ(e,r,s),e.safeEncodeAsync=async(r,s)=>eee(e,r,s),e.safeDecodeAsync=async(r,s)=>tee(e,r,s),e.refine=(r,s)=>e.check(Gee(r,s)),e.superRefine=r=>e.check(Jee(r)),e.overwrite=r=>e.check(Bp(r)),e.optional=()=>u5(e),e.nullable=()=>m5(e),e.nullish=()=>u5(m5(e)),e.nonoptional=r=>Bee(e,r),e.array=()=>kee(e),e.or=r=>Eee([e,r]),e.and=r=>Pee(e,r),e.transform=r=>f5(e,Lee(r)),e.default=r=>Dee(e,r),e.prefault=r=>Mee(e,r),e.catch=r=>zee(e,r),e.pipe=r=>f5(e,r),e.readonly=()=>Hee(e),e.describe=r=>{const s=e.clone();return Ox.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){var r;return(r=Ox.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ox.get(e);const s=e.clone();return Ox.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),B7=vt("_ZodString",(e,t)=>{XS.init(e,t),vs.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(yQ(...s)),e.includes=(...s)=>e.check(jQ(...s)),e.startsWith=(...s)=>e.check(_Q(...s)),e.endsWith=(...s)=>e.check(wQ(...s)),e.min=(...s)=>e.check(Hy(...s)),e.max=(...s)=>e.check($7(...s)),e.length=(...s)=>e.check(M7(...s)),e.nonempty=(...s)=>e.check(Hy(1,...s)),e.lowercase=s=>e.check(vQ(s)),e.uppercase=s=>e.check(bQ(s)),e.trim=()=>e.check(kQ()),e.normalize=(...s)=>e.check(NQ(...s)),e.toLowerCase=()=>e.check(SQ()),e.toUpperCase=()=>e.check(CQ())}),ree=vt("ZodString",(e,t)=>{XS.init(e,t),B7.init(e,t),e.email=r=>e.check(HZ(see,r)),e.url=r=>e.check(XZ(aee,r)),e.jwt=r=>e.check(uQ(bee,r)),e.emoji=r=>e.check(YZ(iee,r)),e.guid=r=>e.check(l5(c5,r)),e.uuid=r=>e.check(qZ(Rx,r)),e.uuidv4=r=>e.check(GZ(Rx,r)),e.uuidv6=r=>e.check(JZ(Rx,r)),e.uuidv7=r=>e.check(KZ(Rx,r)),e.nanoid=r=>e.check(ZZ(lee,r)),e.guid=r=>e.check(l5(c5,r)),e.cuid=r=>e.check(QZ(oee,r)),e.cuid2=r=>e.check(eQ(cee,r)),e.ulid=r=>e.check(tQ(dee,r)),e.base64=r=>e.check(oQ(gee,r)),e.base64url=r=>e.check(cQ(yee,r)),e.xid=r=>e.check(rQ(uee,r)),e.ksuid=r=>e.check(nQ(mee,r)),e.ipv4=r=>e.check(sQ(fee,r)),e.ipv6=r=>e.check(aQ(hee,r)),e.cidrv4=r=>e.check(iQ(pee,r)),e.cidrv6=r=>e.check(lQ(xee,r)),e.e164=r=>e.check(dQ(vee,r)),e.datetime=r=>e.check(FQ(r)),e.date=r=>e.check($Q(r)),e.time=r=>e.check(BQ(r)),e.duration=r=>e.check(zQ(r))});function nee(e){return VZ(ree,e)}const Sn=vt("ZodStringFormat",(e,t)=>{xn.init(e,t),B7.init(e,t)}),see=vt("ZodEmail",(e,t)=>{tZ.init(e,t),Sn.init(e,t)}),c5=vt("ZodGUID",(e,t)=>{QY.init(e,t),Sn.init(e,t)}),Rx=vt("ZodUUID",(e,t)=>{eZ.init(e,t),Sn.init(e,t)}),aee=vt("ZodURL",(e,t)=>{rZ.init(e,t),Sn.init(e,t)}),iee=vt("ZodEmoji",(e,t)=>{nZ.init(e,t),Sn.init(e,t)}),lee=vt("ZodNanoID",(e,t)=>{sZ.init(e,t),Sn.init(e,t)}),oee=vt("ZodCUID",(e,t)=>{aZ.init(e,t),Sn.init(e,t)}),cee=vt("ZodCUID2",(e,t)=>{iZ.init(e,t),Sn.init(e,t)}),dee=vt("ZodULID",(e,t)=>{lZ.init(e,t),Sn.init(e,t)}),uee=vt("ZodXID",(e,t)=>{oZ.init(e,t),Sn.init(e,t)}),mee=vt("ZodKSUID",(e,t)=>{cZ.init(e,t),Sn.init(e,t)}),fee=vt("ZodIPv4",(e,t)=>{hZ.init(e,t),Sn.init(e,t)}),hee=vt("ZodIPv6",(e,t)=>{pZ.init(e,t),Sn.init(e,t)}),pee=vt("ZodCIDRv4",(e,t)=>{xZ.init(e,t),Sn.init(e,t)}),xee=vt("ZodCIDRv6",(e,t)=>{gZ.init(e,t),Sn.init(e,t)}),gee=vt("ZodBase64",(e,t)=>{yZ.init(e,t),Sn.init(e,t)}),yee=vt("ZodBase64URL",(e,t)=>{bZ.init(e,t),Sn.init(e,t)}),vee=vt("ZodE164",(e,t)=>{jZ.init(e,t),Sn.init(e,t)}),bee=vt("ZodJWT",(e,t)=>{wZ.init(e,t),Sn.init(e,t)}),jee=vt("ZodUnknown",(e,t)=>{NZ.init(e,t),vs.init(e,t)});function d5(){return xQ(jee)}const _ee=vt("ZodNever",(e,t)=>{kZ.init(e,t),vs.init(e,t)});function wee(e){return gQ(_ee,e)}const Nee=vt("ZodArray",(e,t)=>{SZ.init(e,t),vs.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(Hy(r,s)),e.nonempty=r=>e.check(Hy(1,r)),e.max=(r,s)=>e.check($7(r,s)),e.length=(r,s)=>e.check(M7(r,s)),e.unwrap=()=>e.element});function kee(e,t){return AQ(Nee,e,t)}const See=vt("ZodObject",(e,t)=>{AZ.init(e,t),vs.init(e,t),Qr(e,"shape",()=>t.shape),e.keyof=()=>Oee(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:d5()}),e.loose=()=>e.clone({...e._zod.def,catchall:d5()}),e.strict=()=>e.clone({...e._zod.def,catchall:wee()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>ZX(e,r),e.safeExtend=r=>QX(e,r),e.merge=r=>eY(e,r),e.pick=r=>XX(e,r),e.omit=r=>YX(e,r),e.partial=(...r)=>tY(U7,e,r[0]),e.required=(...r)=>rY(z7,e,r[0])});function Cee(e,t){const r={type:"object",shape:e??{},...lr(t)};return new See(r)}const Aee=vt("ZodUnion",(e,t)=>{EZ.init(e,t),vs.init(e,t),e.options=t.options});function Eee(e,t){return new Aee({type:"union",options:e,...lr(t)})}const Tee=vt("ZodIntersection",(e,t)=>{TZ.init(e,t),vs.init(e,t)});function Pee(e,t){return new Tee({type:"intersection",left:e,right:t})}const MN=vt("ZodEnum",(e,t)=>{PZ.init(e,t),vs.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,a)=>{const i={};for(const l of s)if(r.has(l))i[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new MN({...t,checks:[],...lr(a),entries:i})},e.exclude=(s,a)=>{const i={...t.entries};for(const l of s)if(r.has(l))delete i[l];else throw new Error(`Key ${l} not found in enum`);return new MN({...t,checks:[],...lr(a),entries:i})}});function Oee(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new MN({type:"enum",entries:r,...lr(t)})}const Ree=vt("ZodTransform",(e,t)=>{OZ.init(e,t),vs.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new S7(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Ch(i,r.value,t));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=e),r.issues.push(Ch(l))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function Lee(e){return new Ree({type:"transform",transform:e})}const U7=vt("ZodOptional",(e,t)=>{RZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function u5(e){return new U7({type:"optional",innerType:e})}const Iee=vt("ZodNullable",(e,t)=>{LZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function m5(e){return new Iee({type:"nullable",innerType:e})}const Fee=vt("ZodDefault",(e,t)=>{IZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Dee(e,t){return new Fee({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():E7(t)}})}const $ee=vt("ZodPrefault",(e,t)=>{FZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Mee(e,t){return new $ee({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():E7(t)}})}const z7=vt("ZodNonOptional",(e,t)=>{DZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Bee(e,t){return new z7({type:"nonoptional",innerType:e,...lr(t)})}const Uee=vt("ZodCatch",(e,t)=>{$Z.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function zee(e,t){return new Uee({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Wee=vt("ZodPipe",(e,t)=>{MZ.init(e,t),vs.init(e,t),e.in=t.in,e.out=t.out});function f5(e,t){return new Wee({type:"pipe",in:e,out:t})}const Vee=vt("ZodReadonly",(e,t)=>{BZ.init(e,t),vs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Hee(e){return new Vee({type:"readonly",innerType:e})}const qee=vt("ZodCustom",(e,t)=>{UZ.init(e,t),vs.init(e,t)});function Gee(e,t={}){return EQ(qee,e,t)}function Jee(e){return TQ(e)}const Kee=e=>q.post("/auth/forgot-password",{email:e}),Xee=Cee({email:nee().min(1,"Email is required").email("Invalid email format")});function Yee(){var m;const[e,t]=g.useState(null),[r,s]=g.useState(null),a=Et(),{register:i,handleSubmit:l,formState:{errors:o,isSubmitting:c}}=VX({resolver:LQ(Xee)}),d=async f=>{var y,x,p,h;t(null),s(null);try{await Kee({email:f.email}),s("If the email exists, an OTP has been sent to your inbox.")}catch(v){const b=((x=(y=v==null?void 0:v.response)==null?void 0:y.data)==null?void 0:x.detail)||((h=(p=v==null?void 0:v.response)==null?void 0:p.data)==null?void 0:h.message)||"Failed to process request";t(b)}},u=(m=o==null?void 0:o.email)!=null&&m.message?String(o.email.message):null;return n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx(yr,{to:"/#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx(yr,{to:"/#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx(yr,{to:"/#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(yr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("div",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsx("div",{className:"relative px-6 py-14 md:px-12",onClick:()=>a("/careers"),role:"presentation",children:n.jsxs("div",{className:"max-w-md mx-auto bg-[#0f1224] text-white rounded-2xl shadow-xl border border-white/10 p-7",onClick:f=>f.stopPropagation(),role:"presentation",children:[n.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Enter your email and well send you an OTP."}),(e||u)&&n.jsx("div",{className:"mb-4 bg-red-900/40 border border-red-500/40 text-red-200 px-4 py-3 rounded-lg text-sm",children:e||u}),r&&n.jsx("div",{className:"mb-4 bg-emerald-900/30 border border-emerald-500/30 text-emerald-200 px-4 py-3 rounded-lg text-sm",children:r}),n.jsxs("form",{onSubmit:l(d),className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(By,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-300"}),n.jsx("input",{...i("email"),autoFocus:!0,type:"email",placeholder:"",className:`
                        w-full pl-10 pr-4 py-3 rounded-lg
                        bg-[#0b0f1f] border text-white
                        focus:outline-none focus:ring-2
                        ${o.email?"border-red-500/40 focus:ring-red-400 focus:border-red-400":"border-[#20243a] focus:ring-emerald-400 focus:border-emerald-400"}
                      `})]})]}),n.jsxs("button",{type:"submit",disabled:c,className:`
                    w-full flex items-center justify-center gap-2
                    bg-purple-600
                    text-white py-3 rounded-lg font-semibold
                    hover:bg-purple-700 transition
                    disabled:opacity-60
                  `,children:[c?"Sending...":"Send OTP",!c&&n.jsx($S,{})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[n.jsx(yr,{to:"/login",className:"text-emerald-300",children:"Back to login"}),n.jsx(yr,{to:"/register",className:"text-gray-300",children:"Register"})]})]})]})})]})})})]})}const Zee="text-purple-500",Qee="text-emerald-400";function Bj(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState(!0),[i,l]=g.useState(null);return g.useEffect(()=>{(async()=>{a(!0),l(null);try{const c=await q.get("/public/careers/jobs");r(c.data||[])}catch{try{const d=await q.get("/v1/jobs");r(d.data||[])}catch(d){l(d)}}finally{a(!1)}})()},[]),n.jsxs("div",{className:"min-h-screen bg-[#f5f7fb] text-gray-900",children:[n.jsx("style",{children:`
        .hero-card {
          background: linear-gradient(135deg, #0b1224 0%, #111827 45%, #1b1740 100%);
        }
        .hero-anim {
          background: linear-gradient(120deg, rgba(124,58,237,0.18), rgba(16,185,129,0.12), rgba(124,58,237,0.18));
          background-size: 200% 200%;
          animation: heroShift 24s ease infinite;
        }
        @keyframes heroShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @media (prefers-reduced-motion: reduce) {
          .hero-anim { animation: none; }
        }
      `}),n.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white text-gray-900 shadow-sm z-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center gap-3 text-sm font-medium",children:[n.jsx("a",{href:"#what-we-do",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"What We Do"}),n.jsx("a",{href:"#who-we-are",className:"px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:border-purple-300 hover:text-purple-600",children:"Who We Are"}),n.jsx("a",{href:"#jobs",className:"px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700",children:"Jobs"})]}),n.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:"ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yr,{to:"/login",className:"px-4 py-2 rounded-full border border-purple-600 text-purple-600 text-sm font-semibold hover:bg-purple-50",children:"Login"}),n.jsx(yr,{to:"/register",className:"px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Register"})]})]})}),n.jsx("section",{className:"pt-28 pb-16",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"hero-card rounded-3xl shadow-2xl overflow-hidden relative",children:[n.jsx("div",{className:"absolute inset-0 hero-anim","aria-hidden":"true"}),n.jsxs("div",{className:"relative px-8 py-16 md:px-16 text-center text-white",children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-[#d9c9ff]",children:["Hiring shouldn't feel ",n.jsx("span",{className:Qee,children:"chaotic"}),"."]}),n.jsx("p",{className:"mt-4 text-lg text-gray-300",children:"ATS-HR brings clarity, confidence, and purpose to the way careers grow."}),n.jsx("div",{className:"mt-6 inline-flex items-center px-5 py-2 rounded-full bg-white text-gray-700 text-sm font-medium",children:"Because careers deserve thoughtful systems."}),n.jsx("div",{className:"mt-10 flex justify-center",children:n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg px-8 py-6 max-w-2xl w-full",children:[n.jsx("div",{className:`text-sm font-semibold ${Zee}`,children:"Purpose"}),n.jsx("p",{className:"mt-3 text-gray-700",children:"ATS-HR exists to bring clarity and trust to hiring and career journeys."})]})})]})]})})}),n.jsx("section",{className:"py-12",children:n.jsx("div",{className:"max-w-6xl mx-auto px-6",children:n.jsxs("div",{className:"bg-[#0b1224] rounded-3xl px-8 py-12 shadow-2xl",children:[n.jsxs("section",{id:"what-we-do",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff] text-center",children:"What We Do"}),n.jsx("p",{className:"mt-3 text-gray-300 max-w-3xl mx-auto text-center",children:"ATS-HR delivers a platform that simplifies recruiting workflows while building confidence for candidates."}),n.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Features"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Structured hiring pipelines with clear stage visibility."}),n.jsx("li",{children:"Smart matching and filters to surface the right talent faster."}),n.jsx("li",{children:"Collaborative feedback, notes, and interview scheduling in one place."})]})]}),n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"What We Solve"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Recruiters get organized workflows and better decision-making."}),n.jsx("li",{children:"Candidates experience transparent, human-first hiring."}),n.jsx("li",{children:"Teams move faster with shared context and clarity."})]})]})]})]}),n.jsxs("section",{id:"who-we-are",className:"mt-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff] text-center",children:"Who We Are"}),n.jsx("p",{className:"mt-3 text-gray-300 max-w-3xl mx-auto text-center",children:"We are a mission-driven team focused on trust, fairness, and clarity in hiring."}),n.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purpose & Mission"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"Our mission is to make hiring feel thoughtful and transparent."}),n.jsx("li",{children:"We help teams and candidates build momentum together through clarity and structure."})]})]}),n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Values & Trust"}),n.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[n.jsx("li",{children:"We lead with clarity and respect every candidate experience."}),n.jsx("li",{children:"We build systems that earn long-term trust, not just short-term efficiency."})]})]})]})]}),n.jsxs("section",{id:"jobs",className:"mt-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#d9c9ff]",children:"Open Opportunities"}),s?n.jsx("div",{className:"mt-6 text-gray-300",children:"Loading openings..."}):i?n.jsx("div",{className:"mt-6 text-gray-300",children:"We could not load openings right now. Please try again later."}):t.length===0?n.jsx("div",{className:"mt-6 text-gray-300",children:"No active openings right now. Please check back soon."}):n.jsx("div",{className:"mt-6 grid gap-6 md:grid-cols-2",children:t.map(o=>n.jsxs("div",{className:"bg-white text-gray-900 rounded-2xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-purple-700",children:o.title}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-sm",children:[o.location&&n.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold",children:o.location}),o.job_type&&n.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold",children:o.job_type})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>{if(!localStorage.getItem("access_token")){e("/register");return}e(`/careers/job/${o.id}`)},className:"inline-flex items-center px-4 py-2 rounded-full bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",children:"Apply"})})]},o.id))})]})]})})}),n.jsx("footer",{className:"mt-12 bg-[#0b1224] border-t border-white/10",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 text-sm text-gray-300 flex flex-col md:flex-row items-center justify-between gap-3",children:[n.jsx("div",{children:" ATS-HR"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{children:"Privacy Policy"}),n.jsx("span",{children:"Terms"}),n.jsx("span",{children:"Contact"})]})]})})]})}const BN=e=>Array.isArray(e)?e:[],Ds=(...e)=>{for(const t of e)if(t!=null&&String(t).trim()!=="")return t;return""},ete=e=>BN(e).map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||"").filter(Boolean),tte=(e={})=>{var a,i;const t=String(Ds(e.id,e.job_id,e.requirement_id)).trim(),r=Ds(e.min_experience,e.minimum_experience,e.experience_min),s=Ds(e.max_experience,e.maximum_experience,e.experience_max);return{...e,id:t,job_id:String(Ds(e.job_id,e.id,e.requirement_id)).trim(),requirement_id:String(Ds(e.requirement_id,e.id,e.job_id)).trim(),title:Ds(e.title,e.job_title,e.requirement_title),location:Ds(e.location,e.job_location,e.city),department:Ds(e.department,e.practice,e.domain),skills:ete(Ds(e.skills,e.skills_mandatory,e.required_skills)||[]),status:String(Ds(e.status,e.workflow_status,e.stage,"active")).trim().toLowerCase(),mode:String(Ds(e.mode,e.work_mode,e.work_type)).trim().toLowerCase(),min_experience:r,max_experience:s,experience:r!==""||s!==""?`${r||0} - ${s||"Any"} yrs`:"",no_of_positions:Number(Ds(e.no_of_positions,e.positions_count,e.openings)||1),budget:Ds(e.budget,e.salary_range,e.ctc_range),client_name:Ds(e.client_name,(a=e.client)==null?void 0:a.client_name,(i=e.client)==null?void 0:i.name,e.company_name),account_manager:e.account_manager||e.am||null,created_at:Ds(e.created_at,e.assigned_at,e.updated_at),updated_at:Ds(e.updated_at,e.created_at)}},rte=(e={})=>{var s,a;const t=BN((e==null?void 0:e.jobs)||((s=e==null?void 0:e.data)==null?void 0:s.jobs)||(e==null?void 0:e.data)||e);return t.length>0?t:BN((e==null?void 0:e.requirements)||((a=e==null?void 0:e.data)==null?void 0:a.requirements)).map(tte)},YS=e=>q.get(`/v1/jobs/${e}`),nte=e=>q.post("/v1/jobs",e),ste=(e,t)=>q.put(`/v1/jobs/${e}`,t),Up=async()=>{var r,s;const e=[()=>q.get("/v1/recruiter/assigned-jobs"),()=>q.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),()=>q.get("/v1/workflow/recruiter/requirements")];let t=null;for(const a of e)try{const i=await a(),l=rte(i==null?void 0:i.data);return{...i,data:{...(i==null?void 0:i.data)||{},jobs:l,total:Number(((r=i==null?void 0:i.data)==null?void 0:r.total)||l.length)}}}catch(i){t=i;const l=(s=i==null?void 0:i.response)==null?void 0:s.status;if(![403,404].includes(l))throw i}throw t||new Error("Failed to load assigned jobs")},ate=()=>q.get("/v1/jobs/submissions"),ite=e=>q.get(`/v1/recruiter/jobs/${e}/submissions`),W7=(e,t)=>q.post(`/v1/jobs/${e}/jd`,t,{headers:{"Content-Type":"multipart/form-data"}}),V7=async(e,t=[])=>{for(const r of t)await q.post("/v1/am/assign-recruiter",{job_id:e,recruiter_id:r});return!0},lte=(e,t)=>q.post(`/v1/jobs/${e}/submissions`,{candidate_id:t}),ote=e=>q.post(`/v1/jobs/${e}/match`),cte=e=>q.get(`/v1/recruiter/assigned-jobs/${e}`),dte=e=>q.get(`/v1/recruiter/assigned-jobs/${e}/candidate-pool`),ute=(e,t)=>q.post(`/v1/recruiter/assigned-jobs/${e}/send-candidates-to-am`,{candidate_ids:t});function Uj(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function UN(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function H7(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function mte(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function h5(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Lx(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function fte(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function hte(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function q7(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function pte(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function p5(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"9",y1:"15",x2:"15",y2:"15"},child:[]}]})(e)}function x5(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function zj(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(e)}function G7(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function g5(e){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Wj(){const{id:e}=Rr(),[t,r]=g.useState(null),[s,a]=g.useState(!0),i=Et();return g.useEffect(()=>{let l=!0;return(async()=>{var o;try{const c=await YS(e);if(!l)return;r(((o=c.data)==null?void 0:o.data)??c.data??null)}catch(c){console.error("Failed to fetch job",c)}finally{a(!1)}})(),()=>{l=!1}},[e]),s?n.jsx("div",{className:"p-6 text-center",children:"Loading job details..."}):t?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[n.jsxs("button",{onClick:()=>i(-1),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-700 mb-4",children:[n.jsx(UN,{})," Back"]}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.title}),n.jsx("p",{className:"text-gray-600 mt-2",children:t.company_name||"Company"})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(G7,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Location"})]}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.location||"Remote"})]}),t.salary_range&&n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(hte,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Salary Range"})]}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.salary_range})]}),t.min_experience||t.max_experience?n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[n.jsx(fte,{className:"text-lg"}),n.jsx("span",{className:"text-sm font-semibold",children:"Experience"})]}),n.jsxs("p",{className:"text-gray-900 font-medium",children:[t.min_experience||0," - ",t.max_experience||"N/A"," years"]})]}):null]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"About the Role"}),n.jsx("div",{className:"text-gray-700 leading-relaxed prose prose-sm max-w-none",children:typeof t.description=="string"&&t.description.includes("<")?n.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}}):n.jsx("p",{children:t.description||"No description available"})})]}),t.skills&&t.skills.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(H7,{})," Required Skills"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(t.skills)?t.skills:[]).map((l,o)=>n.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:l},o))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[t.department&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Department"}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.department})]}),t.job_type&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Job Type"}),n.jsx("p",{className:"text-gray-900 font-medium",children:t.job_type})]}),t.apply_by&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Apply By"}),n.jsx("p",{className:"text-gray-900 font-medium",children:new Date(t.apply_by).toLocaleDateString()})]}),t.sla_days&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"SLA Days"}),n.jsxs("p",{className:"text-gray-900 font-medium",children:[t.sla_days," days"]})]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:()=>i(-1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:"Go Back"})})]})]}):n.jsx("div",{className:"p-6 text-center text-red-600",children:"Job not found"})}const xte=g.createContext(null),Tl=()=>g.useContext(xte);function gte(){const[e,t]=g.useState({full_name:"",email:"",password:"",confirm_password:""}),[r,s]=g.useState(!1),[a,i]=g.useState(""),l=Et(),{login:o}=Tl();async function c(d){var u,m,f,y,x,p;if(d.preventDefault(),s(!0),i(""),e.password!==e.confirm_password){i("Passwords do not match"),s(!1);return}try{const h=await q.post("/auth/candidate/register",{full_name:e.full_name,email:e.email,password:e.password,confirm_password:e.confirm_password});(u=h.data)!=null&&u.access_token&&((m=h.data)!=null&&m.user)?(localStorage.setItem("access_token",h.data.access_token),localStorage.setItem("user",JSON.stringify(h.data.user)),localStorage.setItem("role","candidate"),q.defaults.headers.common.Authorization=`Bearer ${h.data.access_token}`,alert("Account created successfully!"),l("/candidate/profile")):i("Registration successful but token missing")}catch(h){console.error("Registration error:",h),i(((y=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:y.detail)||((p=(x=h==null?void 0:h.response)==null?void 0:x.data)==null?void 0:p.message)||"Registration failed")}finally{s(!1)}}return n.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Candidate Register"}),a&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),n.jsxs("form",{onSubmit:c,className:"space-y-3",children:[n.jsx("input",{required:!0,placeholder:"Full Name",value:e.full_name,onChange:d=>t({...e,full_name:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"email",placeholder:"Email",value:e.email,onChange:d=>t({...e,email:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"password",placeholder:"Password",value:e.password,onChange:d=>t({...e,password:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("input",{required:!0,type:"password",placeholder:"Confirm Password",value:e.confirm_password,onChange:d=>t({...e,confirm_password:d.target.value}),className:"w-full p-2 border rounded",disabled:r}),n.jsx("button",{type:"submit",disabled:r,className:"w-full bg-indigo-600 text-white p-2 rounded font-medium disabled:bg-gray-400",children:r?"Creating account...":"Register"})]}),n.jsxs("p",{className:"text-sm mt-4 text-center",children:["Already have an account?"," ",n.jsx("a",{href:"/login",className:"text-indigo-600 font-medium",children:"Login"})]})]})}function yte(){const[e,t]=g.useState({email:"",password:""}),[r,s]=g.useState(!1),[a,i]=g.useState(""),[l]=Os(),o=Et(),{setTokenAndUser:c}=Tl?Tl():{setTokenAndUser:null},d=l.get("applyJob"),u=l.get("redirect");async function m(f){var y,x,p,h,v,b;f.preventDefault(),s(!0),i("");try{const j=await q.post("/auth/login",e),_=(y=j==null?void 0:j.data)==null?void 0:y.access_token,N=(x=j==null?void 0:j.data)==null?void 0:x.user;if(!_){i("Login succeeded but no token returned from server."),s(!1);return}localStorage.setItem("access_token",_),N&&localStorage.setItem("user",JSON.stringify(N)),localStorage.setItem("role","candidate"),q.defaults.headers.common.Authorization=`Bearer ${_}`;try{typeof c=="function"&&c(_,N)}catch(w){console.warn("setTokenAndUser threw:",w)}u?u.startsWith("/")?o(u):o("/candidate/dashboard"):o(d?`/candidate/dashboard?applyJob=${encodeURIComponent(d)}`:"/candidate/dashboard")}catch(j){console.error("Candidate login failed:",j),i(((h=(p=j==null?void 0:j.response)==null?void 0:p.data)==null?void 0:h.detail)||((b=(v=j==null?void 0:j.response)==null?void 0:v.data)==null?void 0:b.message)||"Login failed")}finally{s(!1)}}return n.jsxs("div",{className:"max-w-sm mx-auto p-6 bg-white rounded shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Candidate Login"}),a&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),n.jsxs("form",{onSubmit:m,className:"space-y-3",children:[n.jsx("input",{required:!0,value:e.email,onChange:f=>t({...e,email:f.target.value}),placeholder:"Email",className:"w-full border p-2 rounded disabled:bg-gray-100",type:"email",disabled:r}),n.jsx("input",{required:!0,value:e.password,onChange:f=>t({...e,password:f.target.value}),type:"password",placeholder:"Password",className:"w-full border p-2 rounded disabled:bg-gray-100",disabled:r}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{disabled:r,type:"submit",className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded font-medium disabled:bg-gray-400",children:r?"Signing in...":"Sign in"}),n.jsx("button",{type:"button",onClick:()=>o("/candidate/register"),className:"flex-1 px-3 py-2 border rounded hover:bg-gray-50 font-medium",disabled:r,children:"Register"})]})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Admin? Use the"," ",n.jsx("a",{href:"/login",className:"text-indigo-600 underline",children:"admin login"})]})]})}function J7(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=J7(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function or(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=J7(e))&&(s&&(s+=" "),s+=t);return s}var vte=Array.isArray,Ia=vte,bte=typeof ux=="object"&&ux&&ux.Object===Object&&ux,K7=bte,jte=K7,_te=typeof self=="object"&&self&&self.Object===Object&&self,wte=jte||_te||Function("return this")(),Vl=wte,Nte=Vl,kte=Nte.Symbol,zp=kte,y5=zp,X7=Object.prototype,Ste=X7.hasOwnProperty,Cte=X7.toString,r0=y5?y5.toStringTag:void 0;function Ate(e){var t=Ste.call(e,r0),r=e[r0];try{e[r0]=void 0;var s=!0}catch{}var a=Cte.call(e);return s&&(t?e[r0]=r:delete e[r0]),a}var Ete=Ate,Tte=Object.prototype,Pte=Tte.toString;function Ote(e){return Pte.call(e)}var Rte=Ote,v5=zp,Lte=Ete,Ite=Rte,Fte="[object Null]",Dte="[object Undefined]",b5=v5?v5.toStringTag:void 0;function $te(e){return e==null?e===void 0?Dte:Fte:b5&&b5 in Object(e)?Lte(e):Ite(e)}var Po=$te;function Mte(e){return e!=null&&typeof e=="object"}var Oo=Mte,Bte=Po,Ute=Oo,zte="[object Symbol]";function Wte(e){return typeof e=="symbol"||Ute(e)&&Bte(e)==zte}var Sf=Wte,Vte=Ia,Hte=Sf,qte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gte=/^\w*$/;function Jte(e,t){if(Vte(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Hte(e)?!0:Gte.test(e)||!qte.test(e)||t!=null&&e in Object(t)}var ZS=Jte;function Kte(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Rc=Kte;const Cf=$r(Rc);var Xte=Po,Yte=Rc,Zte="[object AsyncFunction]",Qte="[object Function]",ere="[object GeneratorFunction]",tre="[object Proxy]";function rre(e){if(!Yte(e))return!1;var t=Xte(e);return t==Qte||t==ere||t==Zte||t==tre}var QS=rre;const Qt=$r(QS);var nre=Vl,sre=nre["__core-js_shared__"],are=sre,Vj=are,j5=function(){var e=/[^.]+$/.exec(Vj&&Vj.keys&&Vj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ire(e){return!!j5&&j5 in e}var lre=ire,ore=Function.prototype,cre=ore.toString;function dre(e){if(e!=null){try{return cre.call(e)}catch{}try{return e+""}catch{}}return""}var Y7=dre,ure=QS,mre=lre,fre=Rc,hre=Y7,pre=/[\\^$.*+?()[\]{}|]/g,xre=/^\[object .+?Constructor\]$/,gre=Function.prototype,yre=Object.prototype,vre=gre.toString,bre=yre.hasOwnProperty,jre=RegExp("^"+vre.call(bre).replace(pre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _re(e){if(!fre(e)||mre(e))return!1;var t=ure(e)?jre:xre;return t.test(hre(e))}var wre=_re;function Nre(e,t){return e==null?void 0:e[t]}var kre=Nre,Sre=wre,Cre=kre;function Are(e,t){var r=Cre(e,t);return Sre(r)?r:void 0}var iu=Are,Ere=iu,Tre=Ere(Object,"create"),Xb=Tre,_5=Xb;function Pre(){this.__data__=_5?_5(null):{},this.size=0}var Ore=Pre;function Rre(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Lre=Rre,Ire=Xb,Fre="__lodash_hash_undefined__",Dre=Object.prototype,$re=Dre.hasOwnProperty;function Mre(e){var t=this.__data__;if(Ire){var r=t[e];return r===Fre?void 0:r}return $re.call(t,e)?t[e]:void 0}var Bre=Mre,Ure=Xb,zre=Object.prototype,Wre=zre.hasOwnProperty;function Vre(e){var t=this.__data__;return Ure?t[e]!==void 0:Wre.call(t,e)}var Hre=Vre,qre=Xb,Gre="__lodash_hash_undefined__";function Jre(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qre&&t===void 0?Gre:t,this}var Kre=Jre,Xre=Ore,Yre=Lre,Zre=Bre,Qre=Hre,ene=Kre;function Af(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Af.prototype.clear=Xre;Af.prototype.delete=Yre;Af.prototype.get=Zre;Af.prototype.has=Qre;Af.prototype.set=ene;var tne=Af;function rne(){this.__data__=[],this.size=0}var nne=rne;function sne(e,t){return e===t||e!==e&&t!==t}var eC=sne,ane=eC;function ine(e,t){for(var r=e.length;r--;)if(ane(e[r][0],t))return r;return-1}var Yb=ine,lne=Yb,one=Array.prototype,cne=one.splice;function dne(e){var t=this.__data__,r=lne(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():cne.call(t,r,1),--this.size,!0}var une=dne,mne=Yb;function fne(e){var t=this.__data__,r=mne(t,e);return r<0?void 0:t[r][1]}var hne=fne,pne=Yb;function xne(e){return pne(this.__data__,e)>-1}var gne=xne,yne=Yb;function vne(e,t){var r=this.__data__,s=yne(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var bne=vne,jne=nne,_ne=une,wne=hne,Nne=gne,kne=bne;function Ef(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Ef.prototype.clear=jne;Ef.prototype.delete=_ne;Ef.prototype.get=wne;Ef.prototype.has=Nne;Ef.prototype.set=kne;var Zb=Ef,Sne=iu,Cne=Vl,Ane=Sne(Cne,"Map"),tC=Ane,w5=tne,Ene=Zb,Tne=tC;function Pne(){this.size=0,this.__data__={hash:new w5,map:new(Tne||Ene),string:new w5}}var One=Pne;function Rne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Lne=Rne,Ine=Lne;function Fne(e,t){var r=e.__data__;return Ine(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Qb=Fne,Dne=Qb;function $ne(e){var t=Dne(this,e).delete(e);return this.size-=t?1:0,t}var Mne=$ne,Bne=Qb;function Une(e){return Bne(this,e).get(e)}var zne=Une,Wne=Qb;function Vne(e){return Wne(this,e).has(e)}var Hne=Vne,qne=Qb;function Gne(e,t){var r=qne(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var Jne=Gne,Kne=One,Xne=Mne,Yne=zne,Zne=Hne,Qne=Jne;function Tf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Tf.prototype.clear=Kne;Tf.prototype.delete=Xne;Tf.prototype.get=Yne;Tf.prototype.has=Zne;Tf.prototype.set=Qne;var rC=Tf,Z7=rC,ese="Expected a function";function nC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ese);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var l=e.apply(this,s);return r.cache=i.set(a,l)||i,l};return r.cache=new(nC.Cache||Z7),r}nC.Cache=Z7;var Q7=nC;const tse=$r(Q7);var rse=Q7,nse=500;function sse(e){var t=rse(e,function(s){return r.size===nse&&r.clear(),s}),r=t.cache;return t}var ase=sse,ise=ase,lse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ose=/\\(\\)?/g,cse=ise(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(lse,function(r,s,a,i){t.push(a?i.replace(ose,"$1"):s||r)}),t}),dse=cse;function use(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var sC=use,N5=zp,mse=sC,fse=Ia,hse=Sf,k5=N5?N5.prototype:void 0,S5=k5?k5.toString:void 0;function eM(e){if(typeof e=="string")return e;if(fse(e))return mse(e,eM)+"";if(hse(e))return S5?S5.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var pse=eM,xse=pse;function gse(e){return e==null?"":xse(e)}var tM=gse,yse=Ia,vse=ZS,bse=dse,jse=tM;function _se(e,t){return yse(e)?e:vse(e,t)?[e]:bse(jse(e))}var rM=_se,wse=Sf;function Nse(e){if(typeof e=="string"||wse(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var e1=Nse,kse=rM,Sse=e1;function Cse(e,t){t=kse(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[Sse(t[r++])];return r&&r==s?e:void 0}var aC=Cse,Ase=aC;function Ese(e,t,r){var s=e==null?void 0:Ase(e,t);return s===void 0?r:s}var nM=Ese;const Qa=$r(nM);function Tse(e){return e==null}var Pse=Tse;const ir=$r(Pse);var Ose=Po,Rse=Ia,Lse=Oo,Ise="[object String]";function Fse(e){return typeof e=="string"||!Rse(e)&&Lse(e)&&Ose(e)==Ise}var Dse=Fse;const Md=$r(Dse);var sM={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=Symbol.for("react.element"),lC=Symbol.for("react.portal"),t1=Symbol.for("react.fragment"),r1=Symbol.for("react.strict_mode"),n1=Symbol.for("react.profiler"),s1=Symbol.for("react.provider"),a1=Symbol.for("react.context"),$se=Symbol.for("react.server_context"),i1=Symbol.for("react.forward_ref"),l1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),c1=Symbol.for("react.memo"),d1=Symbol.for("react.lazy"),Mse=Symbol.for("react.offscreen"),aM;aM=Symbol.for("react.module.reference");function Ii(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iC:switch(e=e.type,e){case t1:case n1:case r1:case l1:case o1:return e;default:switch(e=e&&e.$$typeof,e){case $se:case a1:case i1:case d1:case c1:case s1:return e;default:return t}}case lC:return t}}}Mr.ContextConsumer=a1;Mr.ContextProvider=s1;Mr.Element=iC;Mr.ForwardRef=i1;Mr.Fragment=t1;Mr.Lazy=d1;Mr.Memo=c1;Mr.Portal=lC;Mr.Profiler=n1;Mr.StrictMode=r1;Mr.Suspense=l1;Mr.SuspenseList=o1;Mr.isAsyncMode=function(){return!1};Mr.isConcurrentMode=function(){return!1};Mr.isContextConsumer=function(e){return Ii(e)===a1};Mr.isContextProvider=function(e){return Ii(e)===s1};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iC};Mr.isForwardRef=function(e){return Ii(e)===i1};Mr.isFragment=function(e){return Ii(e)===t1};Mr.isLazy=function(e){return Ii(e)===d1};Mr.isMemo=function(e){return Ii(e)===c1};Mr.isPortal=function(e){return Ii(e)===lC};Mr.isProfiler=function(e){return Ii(e)===n1};Mr.isStrictMode=function(e){return Ii(e)===r1};Mr.isSuspense=function(e){return Ii(e)===l1};Mr.isSuspenseList=function(e){return Ii(e)===o1};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===t1||e===n1||e===r1||e===l1||e===o1||e===Mse||typeof e=="object"&&e!==null&&(e.$$typeof===d1||e.$$typeof===c1||e.$$typeof===s1||e.$$typeof===a1||e.$$typeof===i1||e.$$typeof===aM||e.getModuleId!==void 0)};Mr.typeOf=Ii;sM.exports=Mr;var Bse=sM.exports,Use=Po,zse=Oo,Wse="[object Number]";function Vse(e){return typeof e=="number"||zse(e)&&Use(e)==Wse}var iM=Vse;const Hse=$r(iM);var qse=iM;function Gse(e){return qse(e)&&e!=+e}var Jse=Gse;const Pf=$r(Jse);var ca=function(t){return t===0?0:t>0?1:-1},fd=function(t){return Md(t)&&t.indexOf("%")===t.length-1},_t=function(t){return Hse(t)&&!Pf(t)},Kse=function(t){return ir(t)},ss=function(t){return _t(t)||Md(t)},Xse=0,lu=function(t){var r=++Xse;return"".concat(t||"").concat(r)},da=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_t(t)&&!Md(t))return s;var i;if(fd(t)){var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Pf(i)&&(i=s),a&&i>r&&(i=r),i},tc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Yse=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},ts=function(t,r){return _t(t)&&_t(r)?function(s){return t+s*(r-t)}:function(){return r}};function qy(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Qa(s,t))===r})}var Zse=function(t,r){return _t(t)&&_t(r)?t-r:Md(t)&&Md(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ym(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function zN(e){"@babel/helpers - typeof";return zN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zN(e)}var Qse=["viewBox","children"],eae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],C5=["points","pathLength"],Hj={svg:Qse,polygon:C5,polyline:C5},oC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Gy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(g.isValidElement(t)&&(s=t.props),!Cf(s))return null;var a={};return Object.keys(s).forEach(function(i){oC.includes(i)&&(a[i]=r||function(l){return s[i](s,l)})}),a},tae=function(t,r,s){return function(a){return t(r,s,a),null}},Bd=function(t,r,s){if(!Cf(t)||zN(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var l=t[i];oC.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=tae(l,r,s))}),a},rae=["children"],nae=["children"];function A5(e,t){if(e==null)return{};var r=sae(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function sae(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function WN(e){"@babel/helpers - typeof";return WN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WN(e)}var E5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},uo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},T5=null,qj=null,cC=function e(t){if(t===T5&&Array.isArray(qj))return qj;var r=[];return g.Children.forEach(t,function(s){ir(s)||(Bse.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),qj=r,T5=t,r};function ei(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return uo(a)}):s=[uo(t)],cC(e).forEach(function(a){var i=Qa(a,"type.displayName")||Qa(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function Ua(e,t){var r=ei(e,t);return r&&r[0]}var P5=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!_t(s)||s<=0||!_t(a)||a<=0)},aae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iae=function(t){return t&&t.type&&Md(t.type)&&aae.indexOf(t.type)>=0},lM=function(t){return t&&WN(t)==="object"&&"clipDot"in t},lae=function(t,r,s,a){var i,l=(i=Hj==null?void 0:Hj[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Qt(t)&&(a&&l.includes(r)||eae.includes(r))||s&&oC.includes(r)},Wt=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(g.isValidElement(t)&&(a=t.props),!Cf(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;lae((o=a)===null||o===void 0?void 0:o[l],l,r,s)&&(i[l]=a[l])}),i},VN=function e(t,r){if(t===r)return!0;var s=g.Children.count(t);if(s!==g.Children.count(r))return!1;if(s===0)return!0;if(s===1)return O5(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],l=r[a];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!O5(i,l))return!1}return!0},O5=function(t,r){if(ir(t)&&ir(r))return!0;if(!ir(t)&&!ir(r)){var s=t.props||{},a=s.children,i=A5(s,rae),l=r.props||{},o=l.children,c=A5(l,nae);return a&&o?ym(i,c)&&VN(a,o):!a&&!o?ym(i,c):!1}return!1},R5=function(t,r){var s=[],a={};return cC(t).forEach(function(i,l){if(iae(i))s.push(i);else if(i){var o=uo(i.type),c=r[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var m=d(i,o,l);s.push(m),a[o]=!0}}}),s},oae=function(t){var r=t&&t.type;return r&&E5[r]?E5[r]:null},cae=function(t,r){return cC(r).indexOf(t)},dae=["children","width","height","viewBox","className","style","title","desc"];function HN(){return HN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},HN.apply(this,arguments)}function uae(e,t){if(e==null)return{};var r=mae(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function mae(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function qN(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,l=e.style,o=e.title,c=e.desc,d=uae(e,dae),u=a||{width:r,height:s,x:0,y:0},m=or("recharts-surface",i);return Ce.createElement("svg",HN({},Wt(d,!0,"svg"),{className:m,width:r,height:s,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Ce.createElement("title",null,o),Ce.createElement("desc",null,c),t)}var fae=["children","className"];function GN(){return GN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},GN.apply(this,arguments)}function hae(e,t){if(e==null)return{};var r=pae(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function pae(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var pr=Ce.forwardRef(function(e,t){var r=e.children,s=e.className,a=hae(e,fae),i=or("recharts-layer",s);return Ce.createElement("g",GN({className:i},Wt(a,!0),{ref:t}),r)}),nl=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function xae(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var gae=xae,yae=gae;function vae(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:yae(e,t,r)}var bae=vae,jae="\\ud800-\\udfff",_ae="\\u0300-\\u036f",wae="\\ufe20-\\ufe2f",Nae="\\u20d0-\\u20ff",kae=_ae+wae+Nae,Sae="\\ufe0e\\ufe0f",Cae="\\u200d",Aae=RegExp("["+Cae+jae+kae+Sae+"]");function Eae(e){return Aae.test(e)}var oM=Eae;function Tae(e){return e.split("")}var Pae=Tae,cM="\\ud800-\\udfff",Oae="\\u0300-\\u036f",Rae="\\ufe20-\\ufe2f",Lae="\\u20d0-\\u20ff",Iae=Oae+Rae+Lae,Fae="\\ufe0e\\ufe0f",Dae="["+cM+"]",JN="["+Iae+"]",KN="\\ud83c[\\udffb-\\udfff]",$ae="(?:"+JN+"|"+KN+")",dM="[^"+cM+"]",uM="(?:\\ud83c[\\udde6-\\uddff]){2}",mM="[\\ud800-\\udbff][\\udc00-\\udfff]",Mae="\\u200d",fM=$ae+"?",hM="["+Fae+"]?",Bae="(?:"+Mae+"(?:"+[dM,uM,mM].join("|")+")"+hM+fM+")*",Uae=hM+fM+Bae,zae="(?:"+[dM+JN+"?",JN,uM,mM,Dae].join("|")+")",Wae=RegExp(KN+"(?="+KN+")|"+zae+Uae,"g");function Vae(e){return e.match(Wae)||[]}var Hae=Vae,qae=Pae,Gae=oM,Jae=Hae;function Kae(e){return Gae(e)?Jae(e):qae(e)}var Xae=Kae,Yae=bae,Zae=oM,Qae=Xae,eie=tM;function tie(e){return function(t){t=eie(t);var r=Zae(t)?Qae(t):void 0,s=r?r[0]:t.charAt(0),a=r?Yae(r,1).join(""):t.slice(1);return s[e]()+a}}var rie=tie,nie=rie,sie=nie("toUpperCase"),aie=sie;const u1=$r(aie);function Yr(e){return function(){return e}}const pM=Math.cos,Jy=Math.sin,ml=Math.sqrt,Ky=Math.PI,m1=2*Ky,XN=Math.PI,YN=2*XN,Qc=1e-6,iie=YN-Qc;function xM(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function lie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xM;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class oie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xM:lie(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,l){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=a-r,u=l-t,m=o-r,f=u*u+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Qc)if(!(Math.abs(m*c-d*u)>Qc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let y=s-l,x=a-o,p=c*c+d*d,h=y*y+x*x,v=Math.sqrt(p),b=Math.sqrt(f),j=i*Math.tan((XN-Math.acos((p+f-h)/(2*v*b)))/2),_=j/b,N=j/v;Math.abs(_-1)>Qc&&this._append`L${t+_*u},${r+_*m}`,this._append`A${i},${i},0,0,${+(m*y>u*x)},${this._x1=t+N*c},${this._y1=r+N*d}`}}arc(t,r,s,a,i,l){if(t=+t,r=+r,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(a),c=s*Math.sin(a),d=t+o,u=r+c,m=1^l,f=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Qc||Math.abs(this._y1-u)>Qc)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%YN+YN),f>iie?this._append`A${s},${s},0,1,${m},${t-o},${r-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=u}`:f>Qc&&this._append`A${s},${s},0,${+(f>=XN)},${m},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function dC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new oie(t)}function uC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gM(e){this._context=e}gM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function f1(e){return new gM(e)}function yM(e){return e[0]}function vM(e){return e[1]}function bM(e,t){var r=Yr(!0),s=null,a=f1,i=null,l=dC(o);e=typeof e=="function"?e:e===void 0?yM:Yr(e),t=typeof t=="function"?t:t===void 0?vM:Yr(t);function o(c){var d,u=(c=uC(c)).length,m,f=!1,y;for(s==null&&(i=a(y=l())),d=0;d<=u;++d)!(d<u&&r(m=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(m,d,c),+t(m,d,c));if(y)return i=null,y+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Yr(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Yr(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Yr(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),o):a},o.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),o):s},o}function Ix(e,t,r){var s=null,a=Yr(!0),i=null,l=f1,o=null,c=dC(d);e=typeof e=="function"?e:e===void 0?yM:Yr(+e),t=typeof t=="function"?t:Yr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vM:Yr(+r);function d(m){var f,y,x,p=(m=uC(m)).length,h,v=!1,b,j=new Array(p),_=new Array(p);for(i==null&&(o=l(b=c())),f=0;f<=p;++f){if(!(f<p&&a(h=m[f],f,m))===v)if(v=!v)y=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=f-1;x>=y;--x)o.point(j[x],_[x]);o.lineEnd(),o.areaEnd()}v&&(j[f]=+e(h,f,m),_[f]=+t(h,f,m),o.point(s?+s(h,f,m):j[f],r?+r(h,f,m):_[f]))}if(b)return o=null,b+""||null}function u(){return bM().defined(a).curve(l).context(i)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Yr(+m),s=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Yr(+m),d):e},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:Yr(+m),d):s},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Yr(+m),r=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Yr(+m),d):t},d.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Yr(+m),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Yr(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),d):i},d}class jM{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function cie(e){return new jM(e,!0)}function die(e){return new jM(e,!1)}const mC={draw(e,t){const r=ml(t/Ky);e.moveTo(r,0),e.arc(0,0,r,0,m1)}},uie={draw(e,t){const r=ml(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},_M=ml(1/3),mie=_M*2,fie={draw(e,t){const r=ml(t/mie),s=r*_M;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},hie={draw(e,t){const r=ml(t),s=-r/2;e.rect(s,s,r,r)}},pie=.8908130915292852,wM=Jy(Ky/10)/Jy(7*Ky/10),xie=Jy(m1/10)*wM,gie=-pM(m1/10)*wM,yie={draw(e,t){const r=ml(t*pie),s=xie*r,a=gie*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const l=m1*i/5,o=pM(l),c=Jy(l);e.lineTo(c*r,-o*r),e.lineTo(o*s-c*a,c*s+o*a)}e.closePath()}},Gj=ml(3),vie={draw(e,t){const r=-ml(t/(Gj*3));e.moveTo(0,r*2),e.lineTo(-Gj*r,-r),e.lineTo(Gj*r,-r),e.closePath()}},ci=-.5,di=ml(3)/2,ZN=1/ml(12),bie=(ZN/2+1)*3,jie={draw(e,t){const r=ml(t/bie),s=r/2,a=r*ZN,i=s,l=r*ZN+r,o=-i,c=l;e.moveTo(s,a),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(ci*s-di*a,di*s+ci*a),e.lineTo(ci*i-di*l,di*i+ci*l),e.lineTo(ci*o-di*c,di*o+ci*c),e.lineTo(ci*s+di*a,ci*a-di*s),e.lineTo(ci*i+di*l,ci*l-di*i),e.lineTo(ci*o+di*c,ci*c-di*o),e.closePath()}};function _ie(e,t){let r=null,s=dC(a);e=typeof e=="function"?e:Yr(e||mC),t=typeof t=="function"?t:Yr(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Yr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Yr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Xy(){}function Yy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function NM(e){this._context=e}NM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wie(e){return new NM(e)}function kM(e){this._context=e}kM.prototype={areaStart:Xy,areaEnd:Xy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nie(e){return new kM(e)}function SM(e){this._context=e}SM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kie(e){return new SM(e)}function CM(e){this._context=e}CM.prototype={areaStart:Xy,areaEnd:Xy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Sie(e){return new CM(e)}function L5(e){return e<0?-1:1}function I5(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),l=(r-e._y1)/(a||s<0&&-0),o=(i*a+l*s)/(s+a);return(L5(i)+L5(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function F5(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Jj(e,t,r){var s=e._x0,a=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,a+o*t,i-o,l-o*r,i,l)}function Zy(e){this._context=e}Zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jj(this,this._t0,F5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Jj(this,F5(this,r=I5(this,e,t)),r);break;default:Jj(this,this._t0,r=I5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function AM(e){this._context=new EM(e)}(AM.prototype=Object.create(Zy.prototype)).point=function(e,t){Zy.prototype.point.call(this,t,e)};function EM(e){this._context=e}EM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function Cie(e){return new Zy(e)}function Aie(e){return new AM(e)}function TM(e){this._context=e}TM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=D5(e),a=D5(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function D5(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(a[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Eie(e){return new TM(e)}function h1(e,t){this._context=e,this._t=t}h1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Tie(e){return new h1(e,.5)}function Pie(e){return new h1(e,0)}function Oie(e){return new h1(e,1)}function Dm(e,t){if((l=e.length)>1)for(var r=1,s,a,i=e[t[0]],l,o=i.length;r<l;++r)for(a=i,i=e[t[r]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function QN(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Rie(e,t){return e[t]}function Lie(e){const t=[];return t.key=e,t}function Iie(){var e=Yr([]),t=QN,r=Dm,s=Rie;function a(i){var l=Array.from(e.apply(this,arguments),Lie),o,c=l.length,d=-1,u;for(const m of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(m,l[o].key,d,i)]).data=m;for(o=0,u=uC(t(l));o<c;++o)l[u[o]].index=o;return r(l,u),l}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Yr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Yr(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?QN:typeof i=="function"?i:Yr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Dm,a):r},a}function Fie(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,l;a<i;++a){for(l=r=0;r<s;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<s;++r)e[r][a][1]/=l}Dm(e,t)}}function Die(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var l=0,o=0;l<a;++l)o+=e[l][r][1]||0;s[r][1]+=s[r][0]=-o/2}Dm(e,t)}}function $ie(e,t){if(!(!((l=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],m=u[s][1]||0,f=u[s-1][1]||0,y=(m-f)/2,x=0;x<o;++x){var p=e[t[x]],h=p[s][1]||0,v=p[s-1][1]||0;y+=h-v}c+=m,d+=y*m}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,Dm(e,t)}}function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var Mie=["type","size","sizeType"];function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},e2.apply(this,arguments)}function $5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function M5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(r),!0).forEach(function(s){Bie(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Bie(e,t,r){return t=Uie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uie(e){var t=zie(e,"string");return Ah(t)=="symbol"?t:t+""}function zie(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ah(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wie(e,t){if(e==null)return{};var r=Vie(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Vie(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var PM={symbolCircle:mC,symbolCross:uie,symbolDiamond:fie,symbolSquare:hie,symbolStar:yie,symbolTriangle:vie,symbolWye:jie},Hie=Math.PI/180,qie=function(t){var r="symbol".concat(u1(t));return PM[r]||mC},Gie=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Hie;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Jie=function(t,r){PM["symbol".concat(u1(t))]=r},fC=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,l=t.sizeType,o=l===void 0?"area":l,c=Wie(t,Mie),d=M5(M5({},c),{},{type:s,size:i,sizeType:o}),u=function(){var h=qie(s),v=_ie().type(h).size(Gie(i,o,s));return v()},m=d.className,f=d.cx,y=d.cy,x=Wt(d,!0);return f===+f&&y===+y&&i===+i?Ce.createElement("path",e2({},x,{className:or("recharts-symbols",m),transform:"translate(".concat(f,", ").concat(y,")"),d:u()})):null};fC.registerSymbol=Jie;function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function t2(){return t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},t2.apply(this,arguments)}function B5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Kie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B5(Object(r),!0).forEach(function(s){Eh(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Xie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yie(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,RM(s.key),s)}}function Zie(e,t,r){return t&&Yie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qie(e,t,r){return t=Qy(t),ele(e,OM()?Reflect.construct(t,r||[],Qy(e).constructor):t.apply(e,r))}function ele(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tle(e)}function tle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OM=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qy(e)}function rle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}function r2(e,t){return r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},r2(e,t)}function Eh(e,t,r){return t=RM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RM(e){var t=nle(e,"string");return $m(t)=="symbol"?t:t+""}function nle(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if($m(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ui=32,hC=function(e){function t(){return Xie(this,t),Qie(this,t,arguments)}return rle(t,e),Zie(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=ui/2,l=ui/6,o=ui/3,c=s.inactive?a:s.color;if(s.type==="plainline")return Ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:ui,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return Ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(ui,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return Ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ui/8,"h").concat(ui,"v").concat(ui*3/4,"h").concat(-ui,"z"),className:"recharts-legend-icon"});if(Ce.isValidElement(s.legendIcon)){var d=Kie({},s);return delete d.legendIcon,Ce.cloneElement(s.legendIcon,d)}return Ce.createElement(fC,{fill:c,cx:i,cy:i,size:ui,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:ui,height:ui},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,x){var p=y.formatter||c,h=or(Eh(Eh({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",y.inactive));if(y.type==="none")return null;var v=Qt(y.value)?null:y.value;nl(!Qt(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=y.inactive?d:y.color;return Ce.createElement("li",t2({className:h,style:m,key:"legend-item-".concat(x)},Bd(s.props,y,x)),Ce.createElement(qN,{width:l,height:l,viewBox:u,style:f},s.renderIcon(y)),Ce.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(v,y,x):v))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,l=s.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Ce.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(g.PureComponent);Eh(hC,"displayName","Legend");Eh(hC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sle=Zb;function ale(){this.__data__=new sle,this.size=0}var ile=ale;function lle(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ole=lle;function cle(e){return this.__data__.get(e)}var dle=cle;function ule(e){return this.__data__.has(e)}var mle=ule,fle=Zb,hle=tC,ple=rC,xle=200;function gle(e,t){var r=this.__data__;if(r instanceof fle){var s=r.__data__;if(!hle||s.length<xle-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new ple(s)}return r.set(e,t),this.size=r.size,this}var yle=gle,vle=Zb,ble=ile,jle=ole,_le=dle,wle=mle,Nle=yle;function Of(e){var t=this.__data__=new vle(e);this.size=t.size}Of.prototype.clear=ble;Of.prototype.delete=jle;Of.prototype.get=_le;Of.prototype.has=wle;Of.prototype.set=Nle;var LM=Of,kle="__lodash_hash_undefined__";function Sle(e){return this.__data__.set(e,kle),this}var Cle=Sle;function Ale(e){return this.__data__.has(e)}var Ele=Ale,Tle=rC,Ple=Cle,Ole=Ele;function ev(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Tle;++t<r;)this.add(e[t])}ev.prototype.add=ev.prototype.push=Ple;ev.prototype.has=Ole;var IM=ev;function Rle(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var FM=Rle;function Lle(e,t){return e.has(t)}var DM=Lle,Ile=IM,Fle=FM,Dle=DM,$le=1,Mle=2;function Ble(e,t,r,s,a,i){var l=r&$le,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var m=-1,f=!0,y=r&Mle?new Ile:void 0;for(i.set(e,t),i.set(t,e);++m<o;){var x=e[m],p=t[m];if(s)var h=l?s(p,x,m,t,e,i):s(x,p,m,e,t,i);if(h!==void 0){if(h)continue;f=!1;break}if(y){if(!Fle(t,function(v,b){if(!Dle(y,b)&&(x===v||a(x,v,r,s,i)))return y.push(b)})){f=!1;break}}else if(!(x===p||a(x,p,r,s,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var $M=Ble,Ule=Vl,zle=Ule.Uint8Array,Wle=zle;function Vle(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var Hle=Vle;function qle(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var pC=qle,U5=zp,z5=Wle,Gle=eC,Jle=$M,Kle=Hle,Xle=pC,Yle=1,Zle=2,Qle="[object Boolean]",eoe="[object Date]",toe="[object Error]",roe="[object Map]",noe="[object Number]",soe="[object RegExp]",aoe="[object Set]",ioe="[object String]",loe="[object Symbol]",ooe="[object ArrayBuffer]",coe="[object DataView]",W5=U5?U5.prototype:void 0,Kj=W5?W5.valueOf:void 0;function doe(e,t,r,s,a,i,l){switch(r){case coe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ooe:return!(e.byteLength!=t.byteLength||!i(new z5(e),new z5(t)));case Qle:case eoe:case noe:return Gle(+e,+t);case toe:return e.name==t.name&&e.message==t.message;case soe:case ioe:return e==t+"";case roe:var o=Kle;case aoe:var c=s&Yle;if(o||(o=Xle),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;s|=Zle,l.set(e,t);var u=Jle(o(e),o(t),s,a,i,l);return l.delete(e),u;case loe:if(Kj)return Kj.call(e)==Kj.call(t)}return!1}var uoe=doe;function moe(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var MM=moe,foe=MM,hoe=Ia;function poe(e,t,r){var s=t(e);return hoe(e)?s:foe(s,r(e))}var xoe=poe;function goe(e,t){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var l=e[r];t(l,r,e)&&(i[a++]=l)}return i}var yoe=goe;function voe(){return[]}var boe=voe,joe=yoe,_oe=boe,woe=Object.prototype,Noe=woe.propertyIsEnumerable,V5=Object.getOwnPropertySymbols,koe=V5?function(e){return e==null?[]:(e=Object(e),joe(V5(e),function(t){return Noe.call(e,t)}))}:_oe,Soe=koe;function Coe(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var Aoe=Coe,Eoe=Po,Toe=Oo,Poe="[object Arguments]";function Ooe(e){return Toe(e)&&Eoe(e)==Poe}var Roe=Ooe,H5=Roe,Loe=Oo,BM=Object.prototype,Ioe=BM.hasOwnProperty,Foe=BM.propertyIsEnumerable,Doe=H5(function(){return arguments}())?H5:function(e){return Loe(e)&&Ioe.call(e,"callee")&&!Foe.call(e,"callee")},xC=Doe,tv={exports:{}};function $oe(){return!1}var Moe=$oe;tv.exports;(function(e,t){var r=Vl,s=Moe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||s;e.exports=d})(tv,tv.exports);var UM=tv.exports,Boe=9007199254740991,Uoe=/^(?:0|[1-9]\d*)$/;function zoe(e,t){var r=typeof e;return t=t??Boe,!!t&&(r=="number"||r!="symbol"&&Uoe.test(e))&&e>-1&&e%1==0&&e<t}var gC=zoe,Woe=9007199254740991;function Voe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Woe}var yC=Voe,Hoe=Po,qoe=yC,Goe=Oo,Joe="[object Arguments]",Koe="[object Array]",Xoe="[object Boolean]",Yoe="[object Date]",Zoe="[object Error]",Qoe="[object Function]",ece="[object Map]",tce="[object Number]",rce="[object Object]",nce="[object RegExp]",sce="[object Set]",ace="[object String]",ice="[object WeakMap]",lce="[object ArrayBuffer]",oce="[object DataView]",cce="[object Float32Array]",dce="[object Float64Array]",uce="[object Int8Array]",mce="[object Int16Array]",fce="[object Int32Array]",hce="[object Uint8Array]",pce="[object Uint8ClampedArray]",xce="[object Uint16Array]",gce="[object Uint32Array]",an={};an[cce]=an[dce]=an[uce]=an[mce]=an[fce]=an[hce]=an[pce]=an[xce]=an[gce]=!0;an[Joe]=an[Koe]=an[lce]=an[Xoe]=an[oce]=an[Yoe]=an[Zoe]=an[Qoe]=an[ece]=an[tce]=an[rce]=an[nce]=an[sce]=an[ace]=an[ice]=!1;function yce(e){return Goe(e)&&qoe(e.length)&&!!an[Hoe(e)]}var vce=yce;function bce(e){return function(t){return e(t)}}var zM=bce,rv={exports:{}};rv.exports;(function(e,t){var r=K7,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(rv,rv.exports);var jce=rv.exports,_ce=vce,wce=zM,q5=jce,G5=q5&&q5.isTypedArray,Nce=G5?wce(G5):_ce,WM=Nce,kce=Aoe,Sce=xC,Cce=Ia,Ace=UM,Ece=gC,Tce=WM,Pce=Object.prototype,Oce=Pce.hasOwnProperty;function Rce(e,t){var r=Cce(e),s=!r&&Sce(e),a=!r&&!s&&Ace(e),i=!r&&!s&&!a&&Tce(e),l=r||s||a||i,o=l?kce(e.length,String):[],c=o.length;for(var d in e)(t||Oce.call(e,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ece(d,c)))&&o.push(d);return o}var Lce=Rce,Ice=Object.prototype;function Fce(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ice;return e===r}var Dce=Fce;function $ce(e,t){return function(r){return e(t(r))}}var VM=$ce,Mce=VM,Bce=Mce(Object.keys,Object),Uce=Bce,zce=Dce,Wce=Uce,Vce=Object.prototype,Hce=Vce.hasOwnProperty;function qce(e){if(!zce(e))return Wce(e);var t=[];for(var r in Object(e))Hce.call(e,r)&&r!="constructor"&&t.push(r);return t}var Gce=qce,Jce=QS,Kce=yC;function Xce(e){return e!=null&&Kce(e.length)&&!Jce(e)}var Wp=Xce,Yce=Lce,Zce=Gce,Qce=Wp;function ede(e){return Qce(e)?Yce(e):Zce(e)}var p1=ede,tde=xoe,rde=Soe,nde=p1;function sde(e){return tde(e,nde,rde)}var ade=sde,J5=ade,ide=1,lde=Object.prototype,ode=lde.hasOwnProperty;function cde(e,t,r,s,a,i){var l=r&ide,o=J5(e),c=o.length,d=J5(t),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var f=o[m];if(!(l?f in t:ode.call(t,f)))return!1}var y=i.get(e),x=i.get(t);if(y&&x)return y==t&&x==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=l;++m<c;){f=o[m];var v=e[f],b=t[f];if(s)var j=l?s(b,v,f,t,e,i):s(v,b,f,e,t,i);if(!(j===void 0?v===b||a(v,b,r,s,i):j)){p=!1;break}h||(h=f=="constructor")}if(p&&!h){var _=e.constructor,N=t.constructor;_!=N&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof N=="function"&&N instanceof N)&&(p=!1)}return i.delete(e),i.delete(t),p}var dde=cde,ude=iu,mde=Vl,fde=ude(mde,"DataView"),hde=fde,pde=iu,xde=Vl,gde=pde(xde,"Promise"),yde=gde,vde=iu,bde=Vl,jde=vde(bde,"Set"),HM=jde,_de=iu,wde=Vl,Nde=_de(wde,"WeakMap"),kde=Nde,n2=hde,s2=tC,a2=yde,i2=HM,l2=kde,qM=Po,Rf=Y7,K5="[object Map]",Sde="[object Object]",X5="[object Promise]",Y5="[object Set]",Z5="[object WeakMap]",Q5="[object DataView]",Cde=Rf(n2),Ade=Rf(s2),Ede=Rf(a2),Tde=Rf(i2),Pde=Rf(l2),ed=qM;(n2&&ed(new n2(new ArrayBuffer(1)))!=Q5||s2&&ed(new s2)!=K5||a2&&ed(a2.resolve())!=X5||i2&&ed(new i2)!=Y5||l2&&ed(new l2)!=Z5)&&(ed=function(e){var t=qM(e),r=t==Sde?e.constructor:void 0,s=r?Rf(r):"";if(s)switch(s){case Cde:return Q5;case Ade:return K5;case Ede:return X5;case Tde:return Y5;case Pde:return Z5}return t});var Ode=ed,Xj=LM,Rde=$M,Lde=uoe,Ide=dde,e6=Ode,t6=Ia,r6=UM,Fde=WM,Dde=1,n6="[object Arguments]",s6="[object Array]",Fx="[object Object]",$de=Object.prototype,a6=$de.hasOwnProperty;function Mde(e,t,r,s,a,i){var l=t6(e),o=t6(t),c=l?s6:e6(e),d=o?s6:e6(t);c=c==n6?Fx:c,d=d==n6?Fx:d;var u=c==Fx,m=d==Fx,f=c==d;if(f&&r6(e)){if(!r6(t))return!1;l=!0,u=!1}if(f&&!u)return i||(i=new Xj),l||Fde(e)?Rde(e,t,r,s,a,i):Lde(e,t,c,r,s,a,i);if(!(r&Dde)){var y=u&&a6.call(e,"__wrapped__"),x=m&&a6.call(t,"__wrapped__");if(y||x){var p=y?e.value():e,h=x?t.value():t;return i||(i=new Xj),a(p,h,r,s,i)}}return f?(i||(i=new Xj),Ide(e,t,r,s,a,i)):!1}var Bde=Mde,Ude=Bde,i6=Oo;function GM(e,t,r,s,a){return e===t?!0:e==null||t==null||!i6(e)&&!i6(t)?e!==e&&t!==t:Ude(e,t,r,s,GM,a)}var vC=GM,zde=LM,Wde=vC,Vde=1,Hde=2;function qde(e,t,r,s){var a=r.length,i=a,l=!s;if(e==null)return!i;for(e=Object(e);a--;){var o=r[a];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=r[a];var c=o[0],d=e[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in e))return!1}else{var m=new zde;if(s)var f=s(d,u,c,e,t,m);if(!(f===void 0?Wde(u,d,Vde|Hde,s,m):f))return!1}}return!0}var Gde=qde,Jde=Rc;function Kde(e){return e===e&&!Jde(e)}var JM=Kde,Xde=JM,Yde=p1;function Zde(e){for(var t=Yde(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,Xde(a)]}return t}var Qde=Zde;function eue(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var KM=eue,tue=Gde,rue=Qde,nue=KM;function sue(e){var t=rue(e);return t.length==1&&t[0][2]?nue(t[0][0],t[0][1]):function(r){return r===e||tue(r,e,t)}}var aue=sue;function iue(e,t){return e!=null&&t in Object(e)}var lue=iue,oue=rM,cue=xC,due=Ia,uue=gC,mue=yC,fue=e1;function hue(e,t,r){t=oue(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var l=fue(t[s]);if(!(i=e!=null&&r(e,l)))break;e=e[l]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&mue(a)&&uue(l,a)&&(due(e)||cue(e)))}var pue=hue,xue=lue,gue=pue;function yue(e,t){return e!=null&&gue(e,t,xue)}var vue=yue,bue=vC,jue=nM,_ue=vue,wue=ZS,Nue=JM,kue=KM,Sue=e1,Cue=1,Aue=2;function Eue(e,t){return wue(e)&&Nue(t)?kue(Sue(e),t):function(r){var s=jue(r,e);return s===void 0&&s===t?_ue(r,e):bue(t,s,Cue|Aue)}}var Tue=Eue;function Pue(e){return e}var Lf=Pue;function Oue(e){return function(t){return t==null?void 0:t[e]}}var Rue=Oue,Lue=aC;function Iue(e){return function(t){return Lue(t,e)}}var Fue=Iue,Due=Rue,$ue=Fue,Mue=ZS,Bue=e1;function Uue(e){return Mue(e)?Due(Bue(e)):$ue(e)}var zue=Uue,Wue=aue,Vue=Tue,Hue=Lf,que=Ia,Gue=zue;function Jue(e){return typeof e=="function"?e:e==null?Hue:typeof e=="object"?que(e)?Vue(e[0],e[1]):Wue(e):Gue(e)}var Hl=Jue;function Kue(e,t,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var XM=Kue;function Xue(e){return e!==e}var Yue=Xue;function Zue(e,t,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var Que=Zue,eme=XM,tme=Yue,rme=Que;function nme(e,t,r){return t===t?rme(e,t,r):eme(e,tme,r)}var sme=nme,ame=sme;function ime(e,t){var r=e==null?0:e.length;return!!r&&ame(e,t,0)>-1}var lme=ime;function ome(e,t,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(t,e[s]))return!0;return!1}var cme=ome;function dme(){}var ume=dme,Yj=HM,mme=ume,fme=pC,hme=1/0,pme=Yj&&1/fme(new Yj([,-0]))[1]==hme?function(e){return new Yj(e)}:mme,xme=pme,gme=IM,yme=lme,vme=cme,bme=DM,jme=xme,_me=pC,wme=200;function Nme(e,t,r){var s=-1,a=yme,i=e.length,l=!0,o=[],c=o;if(r)l=!1,a=vme;else if(i>=wme){var d=t?null:jme(e);if(d)return _me(d);l=!1,a=bme,c=new gme}else c=t?[]:o;e:for(;++s<i;){var u=e[s],m=t?t(u):u;if(u=r||u!==0?u:0,l&&m===m){for(var f=c.length;f--;)if(c[f]===m)continue e;t&&c.push(m),o.push(u)}else a(c,m,r)||(c!==o&&c.push(m),o.push(u))}return o}var kme=Nme,Sme=Hl,Cme=kme;function Ame(e,t){return e&&e.length?Cme(e,Sme(t)):[]}var Eme=Ame;const l6=$r(Eme);function YM(e,t,r){return t===!0?l6(e,r):Qt(t)?l6(e,t):e}function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}var Tme=["ref"];function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Kl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(s){x1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Pme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,QM(s.key),s)}}function Ome(e,t,r){return t&&c6(e.prototype,t),r&&c6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rme(e,t,r){return t=nv(t),Lme(e,ZM()?Reflect.construct(t,r||[],nv(e).constructor):t.apply(e,r))}function Lme(e,t){if(t&&(Mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ime(e)}function Ime(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZM=function(){return!!e})()}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nv(e)}function Fme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o2(e,t)}function o2(e,t){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},o2(e,t)}function x1(e,t,r){return t=QM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QM(e){var t=Dme(e,"string");return Mm(t)=="symbol"?t:t+""}function Dme(e,t){if(Mm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Mm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $me(e,t){if(e==null)return{};var r=Mme(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Mme(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Bme(e){return e.value}function Ume(e,t){if(Ce.isValidElement(e))return Ce.cloneElement(e,t);if(typeof e=="function")return Ce.createElement(e,t);t.ref;var r=$me(t,Tme);return Ce.createElement(hC,r)}var d6=1,_d=function(e){function t(){var r;Pme(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Rme(this,t,[].concat(a)),x1(r,"lastBoundingBox",{width:-1,height:-1}),r}return Fme(t,e),Ome(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>d6||Math.abs(a.height-this.lastBoundingBox.height)>d6)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Kl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(l==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();m={left:((d||0)-y.width)/2}}else m=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(o==="middle"){var x=this.getBBoxSnapshot();f={top:((u||0)-x.height)/2}}else f=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Kl(Kl({},m),f)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=Kl(Kl({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Ce.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){s.wrapperNode=y}},Ume(i,Kl(Kl({},this.props),{},{payload:YM(u,d,Bme)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Kl(Kl({},this.defaultProps),s.props),l=i.layout;return l==="vertical"&&_t(s.props.height)?{height:s.props.height}:l==="horizontal"?{width:s.props.width||a}:null}}])}(g.PureComponent);x1(_d,"displayName","Legend");x1(_d,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var u6=zp,zme=xC,Wme=Ia,m6=u6?u6.isConcatSpreadable:void 0;function Vme(e){return Wme(e)||zme(e)||!!(m6&&e&&e[m6])}var Hme=Vme,qme=MM,Gme=Hme;function e9(e,t,r,s,a){var i=-1,l=e.length;for(r||(r=Gme),a||(a=[]);++i<l;){var o=e[i];t>0&&r(o)?t>1?e9(o,t-1,r,s,a):qme(a,o):s||(a[a.length]=o)}return a}var t9=e9;function Jme(e){return function(t,r,s){for(var a=-1,i=Object(t),l=s(t),o=l.length;o--;){var c=l[e?o:++a];if(r(i[c],c,i)===!1)break}return t}}var Kme=Jme,Xme=Kme,Yme=Xme(),Zme=Yme,Qme=Zme,efe=p1;function tfe(e,t){return e&&Qme(e,t,efe)}var r9=tfe,rfe=Wp;function nfe(e,t){return function(r,s){if(r==null)return r;if(!rfe(r))return e(r,s);for(var a=r.length,i=t?a:-1,l=Object(r);(t?i--:++i<a)&&s(l[i],i,l)!==!1;);return r}}var sfe=nfe,afe=r9,ife=sfe,lfe=ife(afe),bC=lfe,ofe=bC,cfe=Wp;function dfe(e,t){var r=-1,s=cfe(e)?Array(e.length):[];return ofe(e,function(a,i,l){s[++r]=t(a,i,l)}),s}var n9=dfe;function ufe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var mfe=ufe,f6=Sf;function ffe(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,i=f6(e),l=t!==void 0,o=t===null,c=t===t,d=f6(t);if(!o&&!d&&!i&&e>t||i&&l&&c&&!o&&!d||s&&l&&c||!r&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&r&&a&&!s&&!i||o&&r&&a||!l&&a||!c)return-1}return 0}var hfe=ffe,pfe=hfe;function xfe(e,t,r){for(var s=-1,a=e.criteria,i=t.criteria,l=a.length,o=r.length;++s<l;){var c=pfe(a[s],i[s]);if(c){if(s>=o)return c;var d=r[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var gfe=xfe,Zj=sC,yfe=aC,vfe=Hl,bfe=n9,jfe=mfe,_fe=zM,wfe=gfe,Nfe=Lf,kfe=Ia;function Sfe(e,t,r){t.length?t=Zj(t,function(i){return kfe(i)?function(l){return yfe(l,i.length===1?i[0]:i)}:i}):t=[Nfe];var s=-1;t=Zj(t,_fe(vfe));var a=bfe(e,function(i,l,o){var c=Zj(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return jfe(a,function(i,l){return wfe(i,l,r)})}var Cfe=Sfe;function Afe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Efe=Afe,Tfe=Efe,h6=Math.max;function Pfe(e,t,r){return t=h6(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=h6(s.length-t,0),l=Array(i);++a<i;)l[a]=s[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=s[a];return o[t]=r(l),Tfe(e,this,o)}}var Ofe=Pfe;function Rfe(e){return function(){return e}}var Lfe=Rfe,Ife=iu,Ffe=function(){try{var e=Ife(Object,"defineProperty");return e({},"",{}),e}catch{}}(),s9=Ffe,Dfe=Lfe,p6=s9,$fe=Lf,Mfe=p6?function(e,t){return p6(e,"toString",{configurable:!0,enumerable:!1,value:Dfe(t),writable:!0})}:$fe,Bfe=Mfe,Ufe=800,zfe=16,Wfe=Date.now;function Vfe(e){var t=0,r=0;return function(){var s=Wfe(),a=zfe-(s-r);if(r=s,a>0){if(++t>=Ufe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Hfe=Vfe,qfe=Bfe,Gfe=Hfe,Jfe=Gfe(qfe),Kfe=Jfe,Xfe=Lf,Yfe=Ofe,Zfe=Kfe;function Qfe(e,t){return Zfe(Yfe(e,t,Xfe),e+"")}var e0e=Qfe,t0e=eC,r0e=Wp,n0e=gC,s0e=Rc;function a0e(e,t,r){if(!s0e(r))return!1;var s=typeof t;return(s=="number"?r0e(r)&&n0e(t,r.length):s=="string"&&t in r)?t0e(r[t],e):!1}var g1=a0e,i0e=t9,l0e=Cfe,o0e=e0e,x6=g1,c0e=o0e(function(e,t){if(e==null)return[];var r=t.length;return r>1&&x6(e,t[0],t[1])?t=[]:r>2&&x6(t[0],t[1],t[2])&&(t=[t[0]]),l0e(e,i0e(t,1),[])}),d0e=c0e;const jC=$r(d0e);function Th(e){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Th(e)}function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},c2.apply(this,arguments)}function u0e(e,t){return p0e(e)||h0e(e,t)||f0e(e,t)||m0e()}function m0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(e,t){if(e){if(typeof e=="string")return g6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g6(e,t)}}function g6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function h0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function p0e(e){if(Array.isArray(e))return e}function y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Qj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(r),!0).forEach(function(s){x0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function x0e(e,t,r){return t=g0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g0e(e){var t=y0e(e,"string");return Th(t)=="symbol"?t:t+""}function y0e(e,t){if(Th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Th(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v0e(e){return Array.isArray(e)&&ss(e[0])&&ss(e[1])?e.join(" ~ "):e}var b0e=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,l=t.itemStyle,o=l===void 0?{}:l,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,m=t.formatter,f=t.itemSorter,y=t.wrapperClassName,x=t.labelClassName,p=t.label,h=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,j=function(){if(u&&u.length){var C={padding:0,margin:0},P=(f?jC(u,f):u).map(function(O,R){if(O.type==="none")return null;var F=Qj({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},o),Q=O.formatter||m||v0e,W=O.value,L=O.name,I=W,K=L;if(Q&&I!=null&&K!=null){var D=Q(W,L,O,R,u);if(Array.isArray(D)){var Y=u0e(D,2);I=Y[0],K=Y[1]}else I=D}return Ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:F},ss(K)?Ce.createElement("span",{className:"recharts-tooltip-item-name"},K):null,ss(K)?Ce.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Ce.createElement("span",{className:"recharts-tooltip-item-value"},I),Ce.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return Ce.createElement("ul",{className:"recharts-tooltip-item-list",style:C},P)}return null},_=Qj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Qj({margin:0},d),w=!ir(p),k=w?p:"",S=or("recharts-default-tooltip",y),E=or("recharts-tooltip-label",x);w&&h&&u!==void 0&&u!==null&&(k=h(p,u));var T=b?{role:"status","aria-live":"assertive"}:{};return Ce.createElement("div",c2({className:S,style:_},T),Ce.createElement("p",{className:E,style:N},Ce.isValidElement(k)?k:"".concat(k)),j())};function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}function Dx(e,t,r){return t=j0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0e(e){var t=_0e(e,"string");return Ph(t)=="symbol"?t:t+""}function _0e(e,t){if(Ph(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ph(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n0="recharts-tooltip-wrapper",w0e={visibility:"hidden"};function N0e(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return or(n0,Dx(Dx(Dx(Dx({},"".concat(n0,"-right"),_t(r)&&t&&_t(t.x)&&r>=t.x),"".concat(n0,"-left"),_t(r)&&t&&_t(t.x)&&r<t.x),"".concat(n0,"-bottom"),_t(s)&&t&&_t(t.y)&&s>=t.y),"".concat(n0,"-top"),_t(s)&&t&&_t(t.y)&&s<t.y))}function v6(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&_t(i[s]))return i[s];var u=r[s]-o-a,m=r[s]+a;if(t[s])return l[s]?u:m;if(l[s]){var f=u,y=c[s];return f<y?Math.max(m,c[s]):Math.max(u,c[s])}var x=m+o,p=c[s]+d;return x>p?Math.max(u,c[s]):Math.max(m,c[s])}function k0e(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function S0e(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,d,u,m;return l.height>0&&l.width>0&&r?(u=v6({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),m=v6({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=k0e({translateX:u,translateY:m,useTranslate3d:o})):d=w0e,{cssProperties:d,cssClasses:N0e({translateX:u,translateY:m,coordinate:r})}}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function j6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(s){u2(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function C0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A0e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,i9(s.key),s)}}function E0e(e,t,r){return t&&A0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T0e(e,t,r){return t=sv(t),P0e(e,a9()?Reflect.construct(t,r||[],sv(e).constructor):t.apply(e,r))}function P0e(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0e(e)}function O0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a9=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sv(e)}function R0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d2(e,t)}function d2(e,t){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},d2(e,t)}function u2(e,t,r){return t=i9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i9(e){var t=L0e(e,"string");return Bm(t)=="symbol"?t:t+""}function L0e(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Bm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _6=1,I0e=function(e){function t(){var r;C0e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=T0e(this,t,[].concat(a)),u2(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),u2(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return R0e(t,e),E0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>_6||Math.abs(s.height-this.state.lastBoundingBox.height)>_6)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,f=a.isAnimationActive,y=a.offset,x=a.position,p=a.reverseDirection,h=a.useTranslate3d,v=a.viewBox,b=a.wrapperStyle,j=S0e({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:y,position:x,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:h,viewBox:v}),_=j.cssClasses,N=j.cssProperties,w=j6(j6({transition:f&&i?"transform ".concat(o,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},b);return Ce.createElement("div",{tabIndex:-1,className:_,style:w,ref:function(S){s.wrapperNode=S}},d)}}])}(g.PureComponent),F0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lc={isSsr:F0e()};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function N6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(s){_C(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $0e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,o9(s.key),s)}}function M0e(e,t,r){return t&&$0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B0e(e,t,r){return t=av(t),U0e(e,l9()?Reflect.construct(t,r||[],av(e).constructor):t.apply(e,r))}function U0e(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z0e(e)}function z0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l9=function(){return!!e})()}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},av(e)}function W0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m2(e,t)}function m2(e,t){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},m2(e,t)}function _C(e,t,r){return t=o9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o9(e){var t=V0e(e,"string");return Um(t)=="symbol"?t:t+""}function V0e(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function H0e(e){return e.dataKey}function q0e(e,t){return Ce.isValidElement(e)?Ce.cloneElement(e,t):typeof e=="function"?Ce.createElement(e,t):Ce.createElement(b0e,t)}var Dn=function(e){function t(){return D0e(this,t),B0e(this,t,arguments)}return W0e(t,e),M0e(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,f=a.isAnimationActive,y=a.offset,x=a.payload,p=a.payloadUniqBy,h=a.position,v=a.reverseDirection,b=a.useTranslate3d,j=a.viewBox,_=a.wrapperStyle,N=x??[];m&&N.length&&(N=YM(x.filter(function(k){return k.value!=null&&(k.hide!==!0||s.props.includeHidden)}),p,H0e));var w=N.length>0;return Ce.createElement(I0e,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:f,active:i,coordinate:u,hasPayload:w,offset:y,position:h,reverseDirection:v,useTranslate3d:b,viewBox:j,wrapperStyle:_},q0e(d,N6(N6({},this.props),{},{payload:N})))}}])}(g.PureComponent);_C(Dn,"displayName","Tooltip");_C(Dn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var G0e=Vl,J0e=function(){return G0e.Date.now()},K0e=J0e,X0e=/\s/;function Y0e(e){for(var t=e.length;t--&&X0e.test(e.charAt(t)););return t}var Z0e=Y0e,Q0e=Z0e,ehe=/^\s+/;function the(e){return e&&e.slice(0,Q0e(e)+1).replace(ehe,"")}var rhe=the,nhe=rhe,k6=Rc,she=Sf,S6=NaN,ahe=/^[-+]0x[0-9a-f]+$/i,ihe=/^0b[01]+$/i,lhe=/^0o[0-7]+$/i,ohe=parseInt;function che(e){if(typeof e=="number")return e;if(she(e))return S6;if(k6(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=k6(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=nhe(e);var r=ihe.test(e);return r||lhe.test(e)?ohe(e.slice(2),r?2:8):ahe.test(e)?S6:+e}var c9=che,dhe=Rc,e_=K0e,C6=c9,uhe="Expected a function",mhe=Math.max,fhe=Math.min;function hhe(e,t,r){var s,a,i,l,o,c,d=0,u=!1,m=!1,f=!0;if(typeof e!="function")throw new TypeError(uhe);t=C6(t)||0,dhe(r)&&(u=!!r.leading,m="maxWait"in r,i=m?mhe(C6(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f);function y(w){var k=s,S=a;return s=a=void 0,d=w,l=e.apply(S,k),l}function x(w){return d=w,o=setTimeout(v,t),u?y(w):l}function p(w){var k=w-c,S=w-d,E=t-k;return m?fhe(E,i-S):E}function h(w){var k=w-c,S=w-d;return c===void 0||k>=t||k<0||m&&S>=i}function v(){var w=e_();if(h(w))return b(w);o=setTimeout(v,p(w))}function b(w){return o=void 0,f&&s?y(w):(s=a=void 0,l)}function j(){o!==void 0&&clearTimeout(o),d=0,s=c=a=o=void 0}function _(){return o===void 0?l:b(e_())}function N(){var w=e_(),k=h(w);if(s=arguments,a=this,c=w,k){if(o===void 0)return x(c);if(m)return clearTimeout(o),o=setTimeout(v,t),y(c)}return o===void 0&&(o=setTimeout(v,t)),l}return N.cancel=j,N.flush=_,N}var phe=hhe,xhe=phe,ghe=Rc,yhe="Expected a function";function vhe(e,t,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(yhe);return ghe(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),xhe(e,t,{leading:s,maxWait:t,trailing:a})}var bhe=vhe;const d9=$r(bhe);function Oh(e){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $x(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(s){jhe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jhe(e,t,r){return t=_he(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _he(e){var t=whe(e,"string");return Oh(t)=="symbol"?t:t+""}function whe(e,t){if(Oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Oh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nhe(e,t){return Ahe(e)||Che(e,t)||She(e,t)||khe()}function khe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function She(e,t){if(e){if(typeof e=="string")return E6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E6(e,t)}}function E6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Che(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Ahe(e){if(Array.isArray(e))return e}var Va=g.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,l=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,d=e.minWidth,u=d===void 0?0:d,m=e.minHeight,f=e.maxHeight,y=e.children,x=e.debounce,p=x===void 0?0:x,h=e.id,v=e.className,b=e.onResize,j=e.style,_=j===void 0?{}:j,N=g.useRef(null),w=g.useRef();w.current=b,g.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var k=g.useState({containerWidth:a.width,containerHeight:a.height}),S=Nhe(k,2),E=S[0],T=S[1],A=g.useCallback(function(P,O){T(function(R){var F=Math.round(P),Q=Math.round(O);return R.containerWidth===F&&R.containerHeight===Q?R:{containerWidth:F,containerHeight:Q}})},[]);g.useEffect(function(){var P=function(L){var I,K=L[0].contentRect,D=K.width,Y=K.height;A(D,Y),(I=w.current)===null||I===void 0||I.call(w,D,Y)};p>0&&(P=d9(P,p,{trailing:!0,leading:!1}));var O=new ResizeObserver(P),R=N.current.getBoundingClientRect(),F=R.width,Q=R.height;return A(F,Q),O.observe(N.current),function(){O.disconnect()}},[A,p]);var C=g.useMemo(function(){var P=E.containerWidth,O=E.containerHeight;if(P<0||O<0)return null;nl(fd(l)||fd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),nl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=fd(l)?P:l,F=fd(c)?O:c;r&&r>0&&(R?F=R/r:F&&(R=F*r),f&&F>f&&(F=f)),nl(R>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,F,l,c,u,m,r);var Q=!Array.isArray(y)&&uo(y.type).endsWith("Chart");return Ce.Children.map(y,function(W){return Ce.isValidElement(W)?g.cloneElement(W,$x({width:R,height:F},Q?{style:$x({height:"100%",width:"100%",maxHeight:F,maxWidth:R},W.props.style)}:{})):W})},[r,y,c,f,m,u,E,l]);return Ce.createElement("div",{id:h?"".concat(h):void 0,className:or("recharts-responsive-container",v),style:$x($x({},_),{},{width:l,height:c,minWidth:u,minHeight:m,maxHeight:f}),ref:N},C)}),wo=function(t){return null};wo.displayName="Cell";function Rh(e){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function T6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function f2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(r),!0).forEach(function(s){Ehe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ehe(e,t,r){return t=The(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function The(e){var t=Phe(e,"string");return Rh(t)=="symbol"?t:t+""}function Phe(e,t){if(Rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Rh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wu={widthCache:{},cacheCount:0},Ohe=2e3,Rhe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},P6="recharts_measurement_span";function Lhe(e){var t=f2({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var W0=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lc.isSsr)return{width:0,height:0};var s=Lhe(r),a=JSON.stringify({text:t,copyStyle:s});if(wu.widthCache[a])return wu.widthCache[a];try{var i=document.getElementById(P6);i||(i=document.createElement("span"),i.setAttribute("id",P6),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=f2(f2({},Rhe),s);Object.assign(i.style,l),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return wu.widthCache[a]=c,++wu.cacheCount>Ohe&&(wu.cacheCount=0,wu.widthCache={}),c}catch{return{width:0,height:0}}},Ihe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Lh(e){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function iv(e,t){return Mhe(e)||$he(e,t)||Dhe(e,t)||Fhe()}function Fhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dhe(e,t){if(e){if(typeof e=="string")return O6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O6(e,t)}}function O6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function $he(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Mhe(e){if(Array.isArray(e))return e}function Bhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,zhe(s.key),s)}}function Uhe(e,t,r){return t&&R6(e.prototype,t),r&&R6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zhe(e){var t=Whe(e,"string");return Lh(t)=="symbol"?t:t+""}function Whe(e,t){if(Lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var L6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,I6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vhe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Hhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,u9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qhe=Object.keys(u9),nm="NaN";function Ghe(e,t){return e*u9[t]}var Mx=function(){function e(t,r){Bhe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Vhe.test(r)&&(this.num=NaN,this.unit=""),qhe.includes(r)&&(this.num=Ghe(t,r),this.unit="px")}return Uhe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=Hhe.exec(r))!==null&&s!==void 0?s:[],i=iv(a,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])}();function m9(e){if(e.includes(nm))return nm;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=L6.exec(t))!==null&&r!==void 0?r:[],a=iv(s,4),i=a[1],l=a[2],o=a[3],c=Mx.parse(i??""),d=Mx.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return nm;t=t.replace(L6,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,f=(m=I6.exec(t))!==null&&m!==void 0?m:[],y=iv(f,4),x=y[1],p=y[2],h=y[3],v=Mx.parse(x??""),b=Mx.parse(h??""),j=p==="+"?v.add(b):v.subtract(b);if(j.isNaN())return nm;t=t.replace(I6,j.toString())}return t}var F6=/\(([^()]*)\)/;function Jhe(e){for(var t=e;t.includes("(");){var r=F6.exec(t),s=iv(r,2),a=s[1];t=t.replace(F6,m9(a))}return t}function Khe(e){var t=e.replace(/\s+/g,"");return t=Jhe(t),t=m9(t),t}function Xhe(e){try{return Khe(e)}catch{return nm}}function t_(e){var t=Xhe(e.slice(5,-1));return t===nm?"":t}var Yhe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Zhe=["dx","dy","angle","className","breakAll"];function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},h2.apply(this,arguments)}function D6(e,t){if(e==null)return{};var r=Qhe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Qhe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function $6(e,t){return npe(e)||rpe(e,t)||tpe(e,t)||epe()}function epe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tpe(e,t){if(e){if(typeof e=="string")return M6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M6(e,t)}}function M6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function rpe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function npe(e){if(Array.isArray(e))return e}var f9=/[ \f\n\r\t\v\u2028\u2029]+/,h9=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];ir(r)||(s?i=r.toString().split(""):i=r.toString().split(f9));var l=i.map(function(c){return{word:c,width:W0(c,a).width}}),o=s?0:W0("",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},spe=function(t,r,s,a,i){var l=t.maxLines,o=t.children,c=t.style,d=t.breakAll,u=_t(l),m=o,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(F,Q){var W=Q.word,L=Q.width,I=F[F.length-1];if(I&&(a==null||i||I.width+L+s<Number(a)))I.words.push(W),I.width+=L+s;else{var K={words:[W],width:L};F.push(K)}return F},[])},y=f(r),x=function(R){return R.reduce(function(F,Q){return F.width>Q.width?F:Q})};if(!u)return y;for(var p="",h=function(R){var F=m.slice(0,R),Q=h9({breakAll:d,style:c,children:F+p}).wordsWithComputedWidth,W=f(Q),L=W.length>l||x(W).width>Number(a);return[L,W]},v=0,b=m.length-1,j=0,_;v<=b&&j<=m.length-1;){var N=Math.floor((v+b)/2),w=N-1,k=h(w),S=$6(k,2),E=S[0],T=S[1],A=h(N),C=$6(A,1),P=C[0];if(!E&&!P&&(v=N+1),E&&P&&(b=N-1),!E&&P){_=T;break}j++}return _||y},B6=function(t){var r=ir(t)?[]:t.toString().split(f9);return[{words:r}]},ape=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,l=t.breakAll,o=t.maxLines;if((r||s)&&!Lc.isSsr){var c,d,u=h9({breakAll:l,children:a,style:i});if(u){var m=u.wordsWithComputedWidth,f=u.spaceWidth;c=m,d=f}else return B6(a);return spe({breakAll:l,children:a,maxLines:o,style:i},c,d,r,s)}return B6(a)},U6="#808080",Ud=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,l=t.lineHeight,o=l===void 0?"1em":l,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,m=u===void 0?!1:u,f=t.textAnchor,y=f===void 0?"start":f,x=t.verticalAnchor,p=x===void 0?"end":x,h=t.fill,v=h===void 0?U6:h,b=D6(t,Yhe),j=g.useMemo(function(){return ape({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:m,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,m,b.style,b.width]),_=b.dx,N=b.dy,w=b.angle,k=b.className,S=b.breakAll,E=D6(b,Zhe);if(!ss(s)||!ss(i))return null;var T=s+(_t(_)?_:0),A=i+(_t(N)?N:0),C;switch(p){case"start":C=t_("calc(".concat(d,")"));break;case"middle":C=t_("calc(".concat((j.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:C=t_("calc(".concat(j.length-1," * -").concat(o,")"));break}var P=[];if(m){var O=j[0].width,R=b.width;P.push("scale(".concat((_t(R)?R/O:1)/O,")"))}return w&&P.push("rotate(".concat(w,", ").concat(T,", ").concat(A,")")),P.length&&(E.transform=P.join(" ")),Ce.createElement("text",h2({},Wt(E,!0),{x:T,y:A,className:or("recharts-text",k),textAnchor:y,fill:v.includes("url")?U6:v}),j.map(function(F,Q){var W=F.words.join(S?"":" ");return Ce.createElement("tspan",{x:T,dy:Q===0?C:o,key:"".concat(W,"-").concat(Q)},W)}))};function bc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ipe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wC(e){let t,r,s;e.length!==2?(t=bc,r=(o,c)=>bc(e(o),c),s=(o,c)=>e(o)-c):(t=e===bc||e===ipe?e:lpe,r=e,s=e);function a(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function l(o,c,d=0,u=o.length){const m=a(o,c,d,u-1);return m>d&&s(o[m-1],c)>-s(o[m],c)?m-1:m}return{left:a,center:l,right:i}}function lpe(){return 0}function p9(e){return e===null?NaN:+e}function*ope(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const cpe=wC(bc),Vp=cpe.right;wC(p9).center;class z6 extends Map{constructor(t,r=mpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(W6(this,t))}has(t){return super.has(W6(this,t))}set(t,r){return super.set(dpe(this,t),r)}delete(t){return super.delete(upe(this,t))}}function W6({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function dpe({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function upe({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function mpe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fpe(e=bc){if(e===bc)return x9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function x9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const hpe=Math.sqrt(50),ppe=Math.sqrt(10),xpe=Math.sqrt(2);function lv(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),l=i>=hpe?10:i>=ppe?5:i>=xpe?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=r&&r<2?lv(e,t,r*2):[o,c,d]}function p2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,l]=s?lv(t,e,r):lv(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(s)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function x2(e,t,r){return t=+t,e=+e,r=+r,lv(e,t,r)[2]}function g2(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?x2(t,e,r):x2(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function V6(e,t){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function H6(e,t){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function g9(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?x9:fpe(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,u=Math.log(c),m=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),y=Math.max(r,Math.floor(t-d*m/c+f)),x=Math.min(s,Math.floor(t+(c-d)*m/c+f));g9(e,t,y,x,a)}const i=e[t];let l=r,o=s;for(s0(e,r,t),a(e[s],i)>0&&s0(e,r,s);l<o;){for(s0(e,l,o),++l,--o;a(e[l],i)<0;)++l;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?s0(e,r,o):(++o,s0(e,o,s)),o<=t&&(r=o+1),t<=o&&(s=o-1)}return e}function s0(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function gpe(e,t,r){if(e=Float64Array.from(ope(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return H6(e);if(t>=1)return V6(e);var s,a=(s-1)*t,i=Math.floor(a),l=V6(g9(e,i).subarray(0,i+1)),o=H6(e.subarray(i+1));return l+(o-l)*(a-i)}}function ype(e,t,r=p9){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),l=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return l+(o-l)*(a-i)}}function vpe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function Fi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ro(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const y2=Symbol("implicit");function NC(){var e=new z6,t=[],r=[],s=y2;function a(i){let l=e.get(i);if(l===void 0){if(s!==y2)return s;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new z6;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return NC(t,r).unknown(s)},Fi.apply(a,arguments),a}function Ih(){var e=NC().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function m(){var f=t().length,y=a<s,x=y?a:s,p=y?s:a;i=(p-x)/Math.max(1,f-c+d*2),o&&(i=Math.floor(i)),x+=(p-x-i*(f-c))*u,l=i*(1-c),o&&(x=Math.round(x),l=Math.round(l));var h=vpe(f).map(function(v){return x+i*v});return r(y?h.reverse():h)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,m()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,o=!0,m()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,m()):o},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),m()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),m()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,m()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),m()):u},e.copy=function(){return Ih(t(),[s,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Fi.apply(m(),arguments)}function y9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return y9(t())},e}function V0(){return y9(Ih.apply(null,arguments).paddingInner(1))}function kC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function v9(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Hp(){}var Fh=.7,ov=1/Fh,vm="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bpe=/^#([0-9a-f]{3,8})$/,jpe=new RegExp(`^rgb\\(${vm},${vm},${vm}\\)$`),_pe=new RegExp(`^rgb\\(${Pl},${Pl},${Pl}\\)$`),wpe=new RegExp(`^rgba\\(${vm},${vm},${vm},${Dh}\\)$`),Npe=new RegExp(`^rgba\\(${Pl},${Pl},${Pl},${Dh}\\)$`),kpe=new RegExp(`^hsl\\(${Dh},${Pl},${Pl}\\)$`),Spe=new RegExp(`^hsla\\(${Dh},${Pl},${Pl},${Dh}\\)$`),q6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kC(Hp,$h,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:G6,formatHex:G6,formatHex8:Cpe,formatHsl:Ape,formatRgb:J6,toString:J6});function G6(){return this.rgb().formatHex()}function Cpe(){return this.rgb().formatHex8()}function Ape(){return b9(this).formatHsl()}function J6(){return this.rgb().formatRgb()}function $h(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=bpe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?K6(t):r===3?new Aa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Bx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Bx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jpe.exec(e))?new Aa(t[1],t[2],t[3],1):(t=_pe.exec(e))?new Aa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wpe.exec(e))?Bx(t[1],t[2],t[3],t[4]):(t=Npe.exec(e))?Bx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kpe.exec(e))?Z6(t[1],t[2]/100,t[3]/100,1):(t=Spe.exec(e))?Z6(t[1],t[2]/100,t[3]/100,t[4]):q6.hasOwnProperty(e)?K6(q6[e]):e==="transparent"?new Aa(NaN,NaN,NaN,0):null}function K6(e){return new Aa(e>>16&255,e>>8&255,e&255,1)}function Bx(e,t,r,s){return s<=0&&(e=t=r=NaN),new Aa(e,t,r,s)}function Epe(e){return e instanceof Hp||(e=$h(e)),e?(e=e.rgb(),new Aa(e.r,e.g,e.b,e.opacity)):new Aa}function v2(e,t,r,s){return arguments.length===1?Epe(e):new Aa(e,t,r,s??1)}function Aa(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}kC(Aa,v2,v9(Hp,{brighter(e){return e=e==null?ov:Math.pow(ov,e),new Aa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fh:Math.pow(Fh,e),new Aa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Aa(wd(this.r),wd(this.g),wd(this.b),cv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:X6,formatHex:X6,formatHex8:Tpe,formatRgb:Y6,toString:Y6}));function X6(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}`}function Tpe(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}${hd((isNaN(this.opacity)?1:this.opacity)*255)}`}function Y6(){const e=cv(this.opacity);return`${e===1?"rgb(":"rgba("}${wd(this.r)}, ${wd(this.g)}, ${wd(this.b)}${e===1?")":`, ${e})`}`}function cv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hd(e){return e=wd(e),(e<16?"0":"")+e.toString(16)}function Z6(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Zi(e,t,r,s)}function b9(e){if(e instanceof Zi)return new Zi(e.h,e.s,e.l,e.opacity);if(e instanceof Hp||(e=$h(e)),!e)return new Zi;if(e instanceof Zi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(r-s)/o+(r<s)*6:r===i?l=(s-t)/o+2:l=(t-r)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Zi(l,o,c,e.opacity)}function Ppe(e,t,r,s){return arguments.length===1?b9(e):new Zi(e,t,r,s??1)}function Zi(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}kC(Zi,Ppe,v9(Hp,{brighter(e){return e=e==null?ov:Math.pow(ov,e),new Zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fh:Math.pow(Fh,e),new Zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new Aa(r_(e>=240?e-240:e+120,a,s),r_(e,a,s),r_(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Zi(Q6(this.h),Ux(this.s),Ux(this.l),cv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cv(this.opacity);return`${e===1?"hsl(":"hsla("}${Q6(this.h)}, ${Ux(this.s)*100}%, ${Ux(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Q6(e){return e=(e||0)%360,e<0?e+360:e}function Ux(e){return Math.max(0,Math.min(1,e||0))}function r_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const SC=e=>()=>e;function Ope(e,t){return function(r){return e+r*t}}function Rpe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function Lpe(e){return(e=+e)==1?j9:function(t,r){return r-t?Rpe(t,r,e):SC(isNaN(t)?r:t)}}function j9(e,t){var r=t-e;return r?Ope(e,r):SC(isNaN(e)?t:e)}const eP=function e(t){var r=Lpe(t);function s(a,i){var l=r((a=v2(a)).r,(i=v2(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),d=j9(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function Ipe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function Fpe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Dpe(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),l;for(l=0;l<s;++l)a[l]=If(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=a[l](o);return i}}function $pe(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function dv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Mpe(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=If(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var b2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,n_=new RegExp(b2.source,"g");function Bpe(e){return function(){return e}}function Upe(e){return function(t){return e(t)+""}}function zpe(e,t){var r=b2.lastIndex=n_.lastIndex=0,s,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=b2.exec(e))&&(a=n_.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:dv(s,a)})),r=n_.lastIndex;return r<t.length&&(i=t.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?Upe(c[0].x):Bpe(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}function If(e,t){var r=typeof t,s;return t==null||r==="boolean"?SC(t):(r==="number"?dv:r==="string"?(s=$h(t))?(t=s,eP):zpe:t instanceof $h?eP:t instanceof Date?$pe:Fpe(t)?Ipe:Array.isArray(t)?Dpe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mpe:dv)(e,t)}function CC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Wpe(e,t){t===void 0&&(t=e,e=If);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function Vpe(e){return function(){return e}}function uv(e){return+e}var tP=[0,1];function ua(e){return e}function j2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Vpe(isNaN(t)?NaN:.5)}function Hpe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function qpe(e,t,r){var s=e[0],a=e[1],i=t[0],l=t[1];return a<s?(s=j2(a,s),i=r(l,i)):(s=j2(s,a),i=r(i,l)),function(o){return i(s(o))}}function Gpe(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)a[l]=j2(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(o){var c=Vp(e,o,1,s)-1;return i[c](a[c](o))}}function qp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y1(){var e=tP,t=tP,r=If,s,a,i,l=ua,o,c,d;function u(){var f=Math.min(e.length,t.length);return l!==ua&&(l=Hpe(e[0],e[f-1])),o=f>2?Gpe:qpe,c=d=null,m}function m(f){return f==null||isNaN(f=+f)?i:(c||(c=o(e.map(s),t,r)))(s(l(f)))}return m.invert=function(f){return l(a((d||(d=o(t,e.map(s),dv)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,uv),u()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),r=CC,u()},m.clamp=function(f){return arguments.length?(l=f?!0:ua,u()):l!==ua},m.interpolate=function(f){return arguments.length?(r=f,u()):r},m.unknown=function(f){return arguments.length?(i=f,m):i},function(f,y){return s=f,a=y,u()}}function AC(){return y1()(ua,ua)}function Jpe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function zm(e){return e=mv(Math.abs(e)),e?e[1]:NaN}function Kpe(e,t){return function(r,s){for(var a=r.length,i=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Xpe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Ype=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mh(e){if(!(t=Ype.exec(e)))throw new Error("invalid format: "+e);var t;return new EC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mh.prototype=EC.prototype;function EC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}EC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zpe(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var _9;function Qpe(e,t){var r=mv(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(_9=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+mv(e,Math.max(0,t+i-1))[0]}function rP(e,t){var r=mv(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const nP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Jpe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rP(e*100,t),r:rP,s:Qpe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sP(e){return e}var aP=Array.prototype.map,iP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function exe(e){var t=e.grouping===void 0||e.thousands===void 0?sP:Kpe(aP.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?sP:Xpe(aP.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(m){m=Mh(m);var f=m.fill,y=m.align,x=m.sign,p=m.symbol,h=m.zero,v=m.width,b=m.comma,j=m.precision,_=m.trim,N=m.type;N==="n"?(b=!0,N="g"):nP[N]||(j===void 0&&(j=12),_=!0,N="g"),(h||f==="0"&&y==="=")&&(h=!0,f="0",y="=");var w=p==="$"?r:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",k=p==="$"?s:/[%p]/.test(N)?l:"",S=nP[N],E=/[defgprs%]/.test(N);j=j===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function T(A){var C=w,P=k,O,R,F;if(N==="c")P=S(A)+P,A="";else{A=+A;var Q=A<0||1/A<0;if(A=isNaN(A)?c:S(Math.abs(A),j),_&&(A=Zpe(A)),Q&&+A==0&&x!=="+"&&(Q=!1),C=(Q?x==="("?x:o:x==="-"||x==="("?"":x)+C,P=(N==="s"?iP[8+_9/3]:"")+P+(Q&&x==="("?")":""),E){for(O=-1,R=A.length;++O<R;)if(F=A.charCodeAt(O),48>F||F>57){P=(F===46?a+A.slice(O+1):A.slice(O))+P,A=A.slice(0,O);break}}}b&&!h&&(A=t(A,1/0));var W=C.length+A.length+P.length,L=W<v?new Array(v-W+1).join(f):"";switch(b&&h&&(A=t(L+A,L.length?v-P.length:1/0),L=""),y){case"<":A=C+A+P+L;break;case"=":A=C+L+A+P;break;case"^":A=L.slice(0,W=L.length>>1)+C+A+P+L.slice(W);break;default:A=L+C+A+P;break}return i(A)}return T.toString=function(){return m+""},T}function u(m,f){var y=d((m=Mh(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(zm(f)/3)))*3,p=Math.pow(10,-x),h=iP[8+x/3];return function(v){return y(p*v)+h}}return{format:d,formatPrefix:u}}var zx,TC,w9;txe({thousands:",",grouping:[3],currency:["$",""]});function txe(e){return zx=exe(e),TC=zx.format,w9=zx.formatPrefix,zx}function rxe(e){return Math.max(0,-zm(Math.abs(e)))}function nxe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zm(t)/3)))*3-zm(Math.abs(e)))}function sxe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zm(t)-zm(e))+1}function N9(e,t,r,s){var a=g2(e,t,r),i;switch(s=Mh(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=nxe(a,l))&&(s.precision=i),w9(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=sxe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=rxe(a))&&(s.precision=i-(s.type==="%")*2);break}}return TC(s)}function Ic(e){var t=e.domain;return e.ticks=function(r){var s=t();return p2(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return N9(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,l=s[a],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=x2(l,o,r),d===c)return s[a]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function fv(){var e=AC();return e.copy=function(){return qp(e,fv())},Fi.apply(e,arguments),Ic(e)}function k9(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,uv),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return k9(e).unknown(t)},e=arguments.length?Array.from(e,uv):[0,1],Ic(r)}function S9(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],l;return i<a&&(l=r,r=s,s=l,l=a,a=i,i=l),e[r]=t.floor(a),e[s]=t.ceil(i),e}function lP(e){return Math.log(e)}function oP(e){return Math.exp(e)}function axe(e){return-Math.log(-e)}function ixe(e){return-Math.exp(-e)}function lxe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function oxe(e){return e===10?lxe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function cxe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cP(e){return(t,r)=>-e(-t,r)}function PC(e){const t=e(lP,oP),r=t.domain;let s=10,a,i;function l(){return a=cxe(s),i=oxe(s),r()[0]<0?(a=cP(a),i=cP(i),e(axe,ixe)):e(lP,oP),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const c=r();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let f=a(d),y=a(u),x,p;const h=o==null?10:+o;let v=[];if(!(s%1)&&y-f<h){if(f=Math.floor(f),y=Math.ceil(y),d>0){for(;f<=y;++f)for(x=1;x<s;++x)if(p=f<0?x/i(-f):x*i(f),!(p<d)){if(p>u)break;v.push(p)}}else for(;f<=y;++f)for(x=s-1;x>=1;--x)if(p=f>0?x/i(-f):x*i(f),!(p<d)){if(p>u)break;v.push(p)}v.length*2<h&&(v=p2(d,u,h))}else v=p2(f,y,Math.min(y-f,h)).map(i);return m?v.reverse():v},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Mh(c)).precision==null&&(c.trim=!0),c=TC(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let m=u/i(Math.round(a(u)));return m*s<s-.5&&(m*=s),m<=d?c(u):""}},t.nice=()=>r(S9(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function C9(){const e=PC(y1()).domain([1,10]);return e.copy=()=>qp(e,C9()).base(e.base()),Fi.apply(e,arguments),e}function dP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OC(e){var t=1,r=e(dP(t),uP(t));return r.constant=function(s){return arguments.length?e(dP(t=+s),uP(t)):t},Ic(r)}function A9(){var e=OC(y1());return e.copy=function(){return qp(e,A9()).constant(e.constant())},Fi.apply(e,arguments)}function mP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dxe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function uxe(e){return e<0?-e*e:e*e}function RC(e){var t=e(ua,ua),r=1;function s(){return r===1?e(ua,ua):r===.5?e(dxe,uxe):e(mP(r),mP(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Ic(t)}function LC(){var e=RC(y1());return e.copy=function(){return qp(e,LC()).exponent(e.exponent())},Fi.apply(e,arguments),e}function mxe(){return LC.apply(null,arguments).exponent(.5)}function fP(e){return Math.sign(e)*e*e}function fxe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function E9(){var e=AC(),t=[0,1],r=!1,s;function a(i){var l=fxe(e(i));return isNaN(l)?s:r?Math.round(l):l}return a.invert=function(i){return e.invert(fP(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,uv)).map(fP)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return E9(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Fi.apply(a,arguments),Ic(a)}function T9(){var e=[],t=[],r=[],s;function a(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=ype(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Vp(r,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(bc),a()},i.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return T9().domain(e).range(t).unknown(s)},Fi.apply(i,arguments)}function P9(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Vp(s,c,0,r)]:i}function o(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return P9().domain([e,t]).range(a).unknown(i)},Fi.apply(Ic(l),arguments)}function O9(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[Vp(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return O9().domain(e).range(t).unknown(r)},Fi.apply(a,arguments)}const s_=new Date,a_=new Date;function ls(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},a.filter=i=>ls(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),r&&(a.count=(i,l)=>(s_.setTime(+i),a_.setTime(+l),e(s_),e(a_),Math.floor(r(s_,a_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?l=>s(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const hv=ls(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ls(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):hv);hv.range;const so=1e3,Ni=so*60,ao=Ni*60,No=ao*24,IC=No*7,hP=No*30,i_=No*365,pd=ls(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*so)},(e,t)=>(t-e)/so,e=>e.getUTCSeconds());pd.range;const FC=ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getMinutes());FC.range;const DC=ls(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getUTCMinutes());DC.range;const $C=ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so-e.getMinutes()*Ni)},(e,t)=>{e.setTime(+e+t*ao)},(e,t)=>(t-e)/ao,e=>e.getHours());$C.range;const MC=ls(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ao)},(e,t)=>(t-e)/ao,e=>e.getUTCHours());MC.range;const Gp=ls(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ni)/No,e=>e.getDate()-1);Gp.range;const v1=ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>e.getUTCDate()-1);v1.range;const R9=ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>Math.floor(e/No));R9.range;function ou(e){return ls(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ni)/IC)}const b1=ou(0),pv=ou(1),hxe=ou(2),pxe=ou(3),Wm=ou(4),xxe=ou(5),gxe=ou(6);b1.range;pv.range;hxe.range;pxe.range;Wm.range;xxe.range;gxe.range;function cu(e){return ls(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/IC)}const j1=cu(0),xv=cu(1),yxe=cu(2),vxe=cu(3),Vm=cu(4),bxe=cu(5),jxe=cu(6);j1.range;xv.range;yxe.range;vxe.range;Vm.range;bxe.range;jxe.range;const BC=ls(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());BC.range;const UC=ls(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());UC.range;const ko=ls(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ls(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ko.range;const So=ls(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ls(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});So.range;function L9(e,t,r,s,a,i){const l=[[pd,1,so],[pd,5,5*so],[pd,15,15*so],[pd,30,30*so],[i,1,Ni],[i,5,5*Ni],[i,15,15*Ni],[i,30,30*Ni],[a,1,ao],[a,3,3*ao],[a,6,6*ao],[a,12,12*ao],[s,1,No],[s,2,2*No],[r,1,IC],[t,1,hP],[t,3,3*hP],[e,1,i_]];function o(d,u,m){const f=u<d;f&&([d,u]=[u,d]);const y=m&&typeof m.range=="function"?m:c(d,u,m),x=y?y.range(d,+u+1):[];return f?x.reverse():x}function c(d,u,m){const f=Math.abs(u-d)/m,y=wC(([,,h])=>h).right(l,f);if(y===l.length)return e.every(g2(d/i_,u/i_,m));if(y===0)return hv.every(Math.max(g2(d,u,m),1));const[x,p]=l[f/l[y-1][2]<l[y][2]/f?y-1:y];return x.every(p)}return[o,c]}const[_xe,wxe]=L9(So,UC,j1,R9,MC,DC),[Nxe,kxe]=L9(ko,BC,b1,Gp,$C,FC);function l_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function a0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Sxe(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=i0(a),u=l0(a),m=i0(i),f=l0(i),y=i0(l),x=l0(l),p=i0(o),h=l0(o),v=i0(c),b=l0(c),j={a:Q,A:W,b:L,B:I,c:null,d:bP,e:bP,f:Kxe,g:age,G:lge,H:qxe,I:Gxe,j:Jxe,L:I9,m:Xxe,M:Yxe,p:K,q:D,Q:wP,s:NP,S:Zxe,u:Qxe,U:ege,V:tge,w:rge,W:nge,x:null,X:null,y:sge,Y:ige,Z:oge,"%":_P},_={a:Y,A:re,b:B,B:G,c:null,d:jP,e:jP,f:mge,g:_ge,G:Nge,H:cge,I:dge,j:uge,L:D9,m:fge,M:hge,p:ce,q:ae,Q:wP,s:NP,S:pge,u:xge,U:gge,V:yge,w:vge,W:bge,x:null,X:null,y:jge,Y:wge,Z:kge,"%":_P},N={a:T,A,b:C,B:P,c:O,d:yP,e:yP,f:zxe,g:gP,G:xP,H:vP,I:vP,j:$xe,L:Uxe,m:Dxe,M:Mxe,p:E,q:Fxe,Q:Vxe,s:Hxe,S:Bxe,u:Pxe,U:Oxe,V:Rxe,w:Txe,W:Lxe,x:R,X:F,y:gP,Y:xP,Z:Ixe,"%":Wxe};j.x=w(r,j),j.X=w(s,j),j.c=w(t,j),_.x=w(r,_),_.X=w(s,_),_.c=w(t,_);function w(fe,ne){return function(he){var M=[],Se=-1,me=0,Pe=fe.length,ue,ye,Ye;for(he instanceof Date||(he=new Date(+he));++Se<Pe;)fe.charCodeAt(Se)===37&&(M.push(fe.slice(me,Se)),(ye=pP[ue=fe.charAt(++Se)])!=null?ue=fe.charAt(++Se):ye=ue==="e"?" ":"0",(Ye=ne[ue])&&(ue=Ye(he,ye)),M.push(ue),me=Se+1);return M.push(fe.slice(me,Se)),M.join("")}}function k(fe,ne){return function(he){var M=a0(1900,void 0,1),Se=S(M,fe,he+="",0),me,Pe;if(Se!=he.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(ne&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(me=o_(a0(M.y,0,1)),Pe=me.getUTCDay(),me=Pe>4||Pe===0?xv.ceil(me):xv(me),me=v1.offset(me,(M.V-1)*7),M.y=me.getUTCFullYear(),M.m=me.getUTCMonth(),M.d=me.getUTCDate()+(M.w+6)%7):(me=l_(a0(M.y,0,1)),Pe=me.getDay(),me=Pe>4||Pe===0?pv.ceil(me):pv(me),me=Gp.offset(me,(M.V-1)*7),M.y=me.getFullYear(),M.m=me.getMonth(),M.d=me.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),Pe="Z"in M?o_(a0(M.y,0,1)).getUTCDay():l_(a0(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(Pe+5)%7:M.w+M.U*7-(Pe+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,o_(M)):l_(M)}}function S(fe,ne,he,M){for(var Se=0,me=ne.length,Pe=he.length,ue,ye;Se<me;){if(M>=Pe)return-1;if(ue=ne.charCodeAt(Se++),ue===37){if(ue=ne.charAt(Se++),ye=N[ue in pP?ne.charAt(Se++):ue],!ye||(M=ye(fe,he,M))<0)return-1}else if(ue!=he.charCodeAt(M++))return-1}return M}function E(fe,ne,he){var M=d.exec(ne.slice(he));return M?(fe.p=u.get(M[0].toLowerCase()),he+M[0].length):-1}function T(fe,ne,he){var M=y.exec(ne.slice(he));return M?(fe.w=x.get(M[0].toLowerCase()),he+M[0].length):-1}function A(fe,ne,he){var M=m.exec(ne.slice(he));return M?(fe.w=f.get(M[0].toLowerCase()),he+M[0].length):-1}function C(fe,ne,he){var M=v.exec(ne.slice(he));return M?(fe.m=b.get(M[0].toLowerCase()),he+M[0].length):-1}function P(fe,ne,he){var M=p.exec(ne.slice(he));return M?(fe.m=h.get(M[0].toLowerCase()),he+M[0].length):-1}function O(fe,ne,he){return S(fe,t,ne,he)}function R(fe,ne,he){return S(fe,r,ne,he)}function F(fe,ne,he){return S(fe,s,ne,he)}function Q(fe){return l[fe.getDay()]}function W(fe){return i[fe.getDay()]}function L(fe){return c[fe.getMonth()]}function I(fe){return o[fe.getMonth()]}function K(fe){return a[+(fe.getHours()>=12)]}function D(fe){return 1+~~(fe.getMonth()/3)}function Y(fe){return l[fe.getUTCDay()]}function re(fe){return i[fe.getUTCDay()]}function B(fe){return c[fe.getUTCMonth()]}function G(fe){return o[fe.getUTCMonth()]}function ce(fe){return a[+(fe.getUTCHours()>=12)]}function ae(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var ne=w(fe+="",j);return ne.toString=function(){return fe},ne},parse:function(fe){var ne=k(fe+="",!1);return ne.toString=function(){return fe},ne},utcFormat:function(fe){var ne=w(fe+="",_);return ne.toString=function(){return fe},ne},utcParse:function(fe){var ne=k(fe+="",!0);return ne.toString=function(){return fe},ne}}}var pP={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,Cxe=/^%/,Axe=/[\\^$*+?|[\]().{}]/g;function Er(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function Exe(e){return e.replace(Axe,"\\$&")}function i0(e){return new RegExp("^(?:"+e.map(Exe).join("|")+")","i")}function l0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Txe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function Pxe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function Oxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function Rxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function Lxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function xP(e,t,r){var s=bs.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function gP(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function Ixe(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Fxe(e,t,r){var s=bs.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function Dxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function yP(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function $xe(e,t,r){var s=bs.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function vP(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function Mxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function Bxe(e,t,r){var s=bs.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function Uxe(e,t,r){var s=bs.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function zxe(e,t,r){var s=bs.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function Wxe(e,t,r){var s=Cxe.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function Vxe(e,t,r){var s=bs.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function Hxe(e,t,r){var s=bs.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function bP(e,t){return Er(e.getDate(),t,2)}function qxe(e,t){return Er(e.getHours(),t,2)}function Gxe(e,t){return Er(e.getHours()%12||12,t,2)}function Jxe(e,t){return Er(1+Gp.count(ko(e),e),t,3)}function I9(e,t){return Er(e.getMilliseconds(),t,3)}function Kxe(e,t){return I9(e,t)+"000"}function Xxe(e,t){return Er(e.getMonth()+1,t,2)}function Yxe(e,t){return Er(e.getMinutes(),t,2)}function Zxe(e,t){return Er(e.getSeconds(),t,2)}function Qxe(e){var t=e.getDay();return t===0?7:t}function ege(e,t){return Er(b1.count(ko(e)-1,e),t,2)}function F9(e){var t=e.getDay();return t>=4||t===0?Wm(e):Wm.ceil(e)}function tge(e,t){return e=F9(e),Er(Wm.count(ko(e),e)+(ko(e).getDay()===4),t,2)}function rge(e){return e.getDay()}function nge(e,t){return Er(pv.count(ko(e)-1,e),t,2)}function sge(e,t){return Er(e.getFullYear()%100,t,2)}function age(e,t){return e=F9(e),Er(e.getFullYear()%100,t,2)}function ige(e,t){return Er(e.getFullYear()%1e4,t,4)}function lge(e,t){var r=e.getDay();return e=r>=4||r===0?Wm(e):Wm.ceil(e),Er(e.getFullYear()%1e4,t,4)}function oge(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Er(t/60|0,"0",2)+Er(t%60,"0",2)}function jP(e,t){return Er(e.getUTCDate(),t,2)}function cge(e,t){return Er(e.getUTCHours(),t,2)}function dge(e,t){return Er(e.getUTCHours()%12||12,t,2)}function uge(e,t){return Er(1+v1.count(So(e),e),t,3)}function D9(e,t){return Er(e.getUTCMilliseconds(),t,3)}function mge(e,t){return D9(e,t)+"000"}function fge(e,t){return Er(e.getUTCMonth()+1,t,2)}function hge(e,t){return Er(e.getUTCMinutes(),t,2)}function pge(e,t){return Er(e.getUTCSeconds(),t,2)}function xge(e){var t=e.getUTCDay();return t===0?7:t}function gge(e,t){return Er(j1.count(So(e)-1,e),t,2)}function $9(e){var t=e.getUTCDay();return t>=4||t===0?Vm(e):Vm.ceil(e)}function yge(e,t){return e=$9(e),Er(Vm.count(So(e),e)+(So(e).getUTCDay()===4),t,2)}function vge(e){return e.getUTCDay()}function bge(e,t){return Er(xv.count(So(e)-1,e),t,2)}function jge(e,t){return Er(e.getUTCFullYear()%100,t,2)}function _ge(e,t){return e=$9(e),Er(e.getUTCFullYear()%100,t,2)}function wge(e,t){return Er(e.getUTCFullYear()%1e4,t,4)}function Nge(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vm(e):Vm.ceil(e),Er(e.getUTCFullYear()%1e4,t,4)}function kge(){return"+0000"}function _P(){return"%"}function wP(e){return+e}function NP(e){return Math.floor(+e/1e3)}var Nu,M9,B9;Sge({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sge(e){return Nu=Sxe(e),M9=Nu.format,Nu.parse,B9=Nu.utcFormat,Nu.utcParse,Nu}function Cge(e){return new Date(e)}function Age(e){return e instanceof Date?+e:+new Date(+e)}function zC(e,t,r,s,a,i,l,o,c,d){var u=AC(),m=u.invert,f=u.domain,y=d(".%L"),x=d(":%S"),p=d("%I:%M"),h=d("%I %p"),v=d("%a %d"),b=d("%b %d"),j=d("%B"),_=d("%Y");function N(w){return(c(w)<w?y:o(w)<w?x:l(w)<w?p:i(w)<w?h:s(w)<w?a(w)<w?v:b:r(w)<w?j:_)(w)}return u.invert=function(w){return new Date(m(w))},u.domain=function(w){return arguments.length?f(Array.from(w,Age)):f().map(Cge)},u.ticks=function(w){var k=f();return e(k[0],k[k.length-1],w??10)},u.tickFormat=function(w,k){return k==null?N:d(k)},u.nice=function(w){var k=f();return(!w||typeof w.range!="function")&&(w=t(k[0],k[k.length-1],w??10)),w?f(S9(k,w)):u},u.copy=function(){return qp(u,zC(e,t,r,s,a,i,l,o,c,d))},u}function Ege(){return Fi.apply(zC(Nxe,kxe,ko,BC,b1,Gp,$C,FC,pd,M9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tge(){return Fi.apply(zC(_xe,wxe,So,UC,j1,v1,MC,DC,pd,B9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _1(){var e=0,t=1,r,s,a,i,l=ua,o=!1,c;function d(m){return m==null||isNaN(m=+m)?c:l(a===0?.5:(m=(i(m)-r)*a,o?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(m){return arguments.length?(o=!!m,d):o},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(f){var y,x;return arguments.length?([y,x]=f,l=m(y,x),d):[l(0),l(1)]}}return d.range=u(If),d.rangeRound=u(CC),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,r=m(e),s=m(t),a=r===s?0:1/(s-r),d}}function Fc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function U9(){var e=Ic(_1()(ua));return e.copy=function(){return Fc(e,U9())},Ro.apply(e,arguments)}function z9(){var e=PC(_1()).domain([1,10]);return e.copy=function(){return Fc(e,z9()).base(e.base())},Ro.apply(e,arguments)}function W9(){var e=OC(_1());return e.copy=function(){return Fc(e,W9()).constant(e.constant())},Ro.apply(e,arguments)}function WC(){var e=RC(_1());return e.copy=function(){return Fc(e,WC()).exponent(e.exponent())},Ro.apply(e,arguments)}function Pge(){return WC.apply(null,arguments).exponent(.5)}function V9(){var e=[],t=ua;function r(s){if(s!=null&&!isNaN(s=+s))return t((Vp(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(bc),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>gpe(e,i/s))},r.copy=function(){return V9(t).domain(e)},Ro.apply(r,arguments)}function w1(){var e=0,t=.5,r=1,s=1,a,i,l,o,c,d=ua,u,m=!1,f;function y(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-i)*(s*p<s*i?o:c),d(m?Math.max(0,Math.min(1,p)):p))}y.domain=function(p){return arguments.length?([e,t,r]=p,a=u(e=+e),i=u(t=+t),l=u(r=+r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,y):[e,t,r]},y.clamp=function(p){return arguments.length?(m=!!p,y):m},y.interpolator=function(p){return arguments.length?(d=p,y):d};function x(p){return function(h){var v,b,j;return arguments.length?([v,b,j]=h,d=Wpe(p,[v,b,j]),y):[d(0),d(.5),d(1)]}}return y.range=x(If),y.rangeRound=x(CC),y.unknown=function(p){return arguments.length?(f=p,y):f},function(p){return u=p,a=p(e),i=p(t),l=p(r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,y}}function H9(){var e=Ic(w1()(ua));return e.copy=function(){return Fc(e,H9())},Ro.apply(e,arguments)}function q9(){var e=PC(w1()).domain([.1,1,10]);return e.copy=function(){return Fc(e,q9()).base(e.base())},Ro.apply(e,arguments)}function G9(){var e=OC(w1());return e.copy=function(){return Fc(e,G9()).constant(e.constant())},Ro.apply(e,arguments)}function VC(){var e=RC(w1());return e.copy=function(){return Fc(e,VC()).exponent(e.exponent())},Ro.apply(e,arguments)}function Oge(){return VC.apply(null,arguments).exponent(.5)}const kP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ih,scaleDiverging:H9,scaleDivergingLog:q9,scaleDivergingPow:VC,scaleDivergingSqrt:Oge,scaleDivergingSymlog:G9,scaleIdentity:k9,scaleImplicit:y2,scaleLinear:fv,scaleLog:C9,scaleOrdinal:NC,scalePoint:V0,scalePow:LC,scaleQuantile:T9,scaleQuantize:P9,scaleRadial:E9,scaleSequential:U9,scaleSequentialLog:z9,scaleSequentialPow:WC,scaleSequentialQuantile:V9,scaleSequentialSqrt:Pge,scaleSequentialSymlog:W9,scaleSqrt:mxe,scaleSymlog:A9,scaleThreshold:O9,scaleTime:Ege,scaleUtc:Tge,tickFormat:N9},Symbol.toStringTag,{value:"Module"}));var Rge=Sf;function Lge(e,t,r){for(var s=-1,a=e.length;++s<a;){var i=e[s],l=t(i);if(l!=null&&(o===void 0?l===l&&!Rge(l):r(l,o)))var o=l,c=i}return c}var N1=Lge;function Ige(e,t){return e>t}var J9=Ige,Fge=N1,Dge=J9,$ge=Lf;function Mge(e){return e&&e.length?Fge(e,$ge,Dge):void 0}var Bge=Mge;const ac=$r(Bge);function Uge(e,t){return e<t}var K9=Uge,zge=N1,Wge=K9,Vge=Lf;function Hge(e){return e&&e.length?zge(e,Vge,Wge):void 0}var qge=Hge;const k1=$r(qge);var Gge=sC,Jge=Hl,Kge=n9,Xge=Ia;function Yge(e,t){var r=Xge(e)?Gge:Kge;return r(e,Jge(t))}var Zge=Yge,Qge=t9,eye=Zge;function tye(e,t){return Qge(eye(e,t),1)}var rye=tye;const nye=$r(rye);var sye=vC;function aye(e,t){return sye(e,t)}var iye=aye;const zd=$r(iye);var Ff=1e9,lye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qC,hn=!0,Ti="[DecimalError] ",Nd=Ti+"Invalid argument: ",HC=Ti+"Exponent out of range: ",Df=Math.floor,td=Math.pow,oye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ha,us=1e7,ln=7,X9=9007199254740991,gv=Df(X9/ln),Rt={};Rt.absoluteValue=Rt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Rt.comparedTo=Rt.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};Rt.decimalPlaces=Rt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ln;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Rt.dividedBy=Rt.div=function(e){return mo(this,new this.constructor(e))};Rt.dividedToIntegerBy=Rt.idiv=function(e){var t=this,r=t.constructor;return Gr(mo(t,new r(e),0,1),r.precision)};Rt.equals=Rt.eq=function(e){return!this.cmp(e)};Rt.exponent=function(){return Kn(this)};Rt.greaterThan=Rt.gt=function(e){return this.cmp(e)>0};Rt.greaterThanOrEqualTo=Rt.gte=function(e){return this.cmp(e)>=0};Rt.isInteger=Rt.isint=function(){return this.e>this.d.length-2};Rt.isNegative=Rt.isneg=function(){return this.s<0};Rt.isPositive=Rt.ispos=function(){return this.s>0};Rt.isZero=function(){return this.s===0};Rt.lessThan=Rt.lt=function(e){return this.cmp(e)<0};Rt.lessThanOrEqualTo=Rt.lte=function(e){return this.cmp(e)<1};Rt.logarithm=Rt.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ha))throw Error(Ti+"NaN");if(r.s<1)throw Error(Ti+(r.s?"NaN":"-Infinity"));return r.eq(Ha)?new s(0):(hn=!1,t=mo(Bh(r,i),Bh(e,i),i),hn=!0,Gr(t,a))};Rt.minus=Rt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Q9(t,e):Y9(t,(e.s=-e.s,e))};Rt.modulo=Rt.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Ti+"NaN");return r.s?(hn=!1,t=mo(r,e,0,1).times(e),hn=!0,r.minus(t)):Gr(new s(r),a)};Rt.naturalExponential=Rt.exp=function(){return Z9(this)};Rt.naturalLogarithm=Rt.ln=function(){return Bh(this)};Rt.negated=Rt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Rt.plus=Rt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y9(t,e):Q9(t,(e.s=-e.s,e))};Rt.precision=Rt.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nd+e);if(t=Kn(a)+1,s=a.d.length-1,r=s*ln+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};Rt.squareRoot=Rt.sqrt=function(){var e,t,r,s,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ti+"NaN")}for(e=Kn(o),hn=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=kl(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Df((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=l=r+3;;)if(i=s,s=i.plus(mo(o,i,l+2)).times(.5),kl(i.d).slice(0,l)===(t=kl(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(Gr(i,r+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return hn=!0,Gr(s,r)};Rt.times=Rt.mul=function(e){var t,r,s,a,i,l,o,c,d,u=this,m=u.constructor,f=u.d,y=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=y.length,c<d&&(i=f,f=y,y=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)o=i[a]+y[s]*f[a-s-1]+t,i[a--]=o%us|0,t=o/us|0;i[a]=(i[a]+t)%us|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,hn?Gr(e,m.precision):e};Rt.toDecimalPlaces=Rt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(Fl(e,0,Ff),t===void 0?t=s.rounding:Fl(t,0,8),Gr(r,e+Kn(r)+1,t))};Rt.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=Wd(s,!0):(Fl(e,0,Ff),t===void 0?t=a.rounding:Fl(t,0,8),s=Gr(new a(s),e+1,t),r=Wd(s,!0,e+1)),r};Rt.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?Wd(a):(Fl(e,0,Ff),t===void 0?t=i.rounding:Fl(t,0,8),s=Gr(new i(a),e+Kn(a)+1,t),r=Wd(s.abs(),!1,e+Kn(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Rt.toInteger=Rt.toint=function(){var e=this,t=e.constructor;return Gr(new t(e),Kn(e)+1,t.rounding)};Rt.toNumber=function(){return+this};Rt.toPower=Rt.pow=function(e){var t,r,s,a,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Ha);if(o=new c(o),!o.s){if(e.s<1)throw Error(Ti+"Infinity");return o}if(o.eq(Ha))return o;if(s=c.precision,e.eq(Ha))return Gr(o,s);if(t=e.e,r=e.d.length-1,l=t>=r,i=o.s,l){if((r=u<0?-u:u)<=X9){for(a=new c(Ha),t=Math.ceil(s/ln+4),hn=!1;r%2&&(a=a.times(o),CP(a.d,t)),r=Df(r/2),r!==0;)o=o.times(o),CP(o.d,t);return hn=!0,e.s<0?new c(Ha).div(a):Gr(a,s)}}else if(i<0)throw Error(Ti+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,hn=!1,a=e.times(Bh(o,s+d)),hn=!0,a=Z9(a),a.s=i,a};Rt.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=Kn(a),s=Wd(a,r<=i.toExpNeg||r>=i.toExpPos)):(Fl(e,1,Ff),t===void 0?t=i.rounding:Fl(t,0,8),a=Gr(new i(a),e,t),r=Kn(a),s=Wd(a,e<=r||r<=i.toExpNeg,e)),s};Rt.toSignificantDigits=Rt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Fl(e,1,Ff),t===void 0?t=s.rounding:Fl(t,0,8)),Gr(new s(r),e,t)};Rt.toString=Rt.valueOf=Rt.val=Rt.toJSON=Rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Kn(e),r=e.constructor;return Wd(e,t<=r.toExpNeg||t>=r.toExpPos)};function Y9(e,t){var r,s,a,i,l,o,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),hn?Gr(t,m):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),i=l-a,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,a=l,o=c.length),l=Math.ceil(m/ln),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/us|0,c[i]%=us;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,hn?Gr(t,m):t}function Fl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Nd+e)}function kl(e){var t,r,s,a=e.length-1,i="",l=e[0];if(a>0){for(i+=l,t=1;t<a;t++)s=e[t]+"",r=ln-s.length,r&&(i+=Yo(r)),i+=s;l=e[t],s=l+"",r=ln-s.length,r&&(i+=Yo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var mo=function(){function e(s,a){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*a+l,s[o]=i%us|0,l=i/us|0;return l&&s.unshift(l),s}function t(s,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=a[o]){c=s[o]>a[o]?1:-1;break}return c}function r(s,a,i){for(var l=0;i--;)s[i]-=l,l=s[i]<a[i]?1:0,s[i]=l*us+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,l){var o,c,d,u,m,f,y,x,p,h,v,b,j,_,N,w,k,S,E=s.constructor,T=s.s==a.s?1:-1,A=s.d,C=a.d;if(!s.s)return new E(s);if(!a.s)throw Error(Ti+"Division by zero");for(c=s.e-a.e,k=C.length,N=A.length,y=new E(T),x=y.d=[],d=0;C[d]==(A[d]||0);)++d;if(C[d]>(A[d]||0)&&--c,i==null?b=i=E.precision:l?b=i+(Kn(s)-Kn(a))+1:b=i,b<0)return new E(0);if(b=b/ln+2|0,d=0,k==1)for(u=0,C=C[0],b++;(d<N||u)&&b--;d++)j=u*us+(A[d]||0),x[d]=j/C|0,u=j%C|0;else{for(u=us/(C[0]+1)|0,u>1&&(C=e(C,u),A=e(A,u),k=C.length,N=A.length),_=k,p=A.slice(0,k),h=p.length;h<k;)p[h++]=0;S=C.slice(),S.unshift(0),w=C[0],C[1]>=us/2&&++w;do u=0,o=t(C,p,k,h),o<0?(v=p[0],k!=h&&(v=v*us+(p[1]||0)),u=v/w|0,u>1?(u>=us&&(u=us-1),m=e(C,u),f=m.length,h=p.length,o=t(m,p,f,h),o==1&&(u--,r(m,k<f?S:C,f))):(u==0&&(o=u=1),m=C.slice()),f=m.length,f<h&&m.unshift(0),r(p,m,h),o==-1&&(h=p.length,o=t(C,p,k,h),o<1&&(u++,r(p,k<h?S:C,h))),h=p.length):o===0&&(u++,p=[0]),x[d++]=u,o&&p[0]?p[h++]=A[_]||0:(p=[A[_]],h=1);while((_++<N||p[0]!==void 0)&&b--)}return x[0]||x.shift(),y.e=c,Gr(y,l?i+Kn(y)+1:i)}}();function Z9(e,t){var r,s,a,i,l,o,c=0,d=0,u=e.constructor,m=u.precision;if(Kn(e)>16)throw Error(HC+Kn(e));if(!e.s)return new u(Ha);for(hn=!1,o=m,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(td(2,d))/Math.LN10*2+5|0,o+=s,r=a=i=new u(Ha),u.precision=o;;){if(a=Gr(a.times(e),o),r=r.times(++c),l=i.plus(mo(a,r,o)),kl(l.d).slice(0,o)===kl(i.d).slice(0,o)){for(;d--;)i=Gr(i.times(i),o);return u.precision=m,t==null?(hn=!0,Gr(i,m)):i}i=l}}function Kn(e){for(var t=e.e*ln,r=e.d[0];r>=10;r/=10)t++;return t}function c_(e,t,r){if(t>e.LN10.sd())throw hn=!0,r&&(e.precision=r),Error(Ti+"LN10 precision limit exceeded");return Gr(new e(e.LN10),t)}function Yo(e){for(var t="";e--;)t+="0";return t}function Bh(e,t){var r,s,a,i,l,o,c,d,u,m=1,f=10,y=e,x=y.d,p=y.constructor,h=p.precision;if(y.s<1)throw Error(Ti+(y.s?"NaN":"-Infinity"));if(y.eq(Ha))return new p(0);if(t==null?(hn=!1,d=h):d=t,y.eq(10))return t==null&&(hn=!0),c_(p,d);if(d+=f,p.precision=d,r=kl(x),s=r.charAt(0),i=Kn(y),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)y=y.times(e),r=kl(y.d),s=r.charAt(0),m++;i=Kn(y),s>1?(y=new p("0."+r),i++):y=new p(s+"."+r.slice(1))}else return c=c_(p,d+2,h).times(i+""),y=Bh(new p(s+"."+r.slice(1)),d-f).plus(c),p.precision=h,t==null?(hn=!0,Gr(y,h)):y;for(o=l=y=mo(y.minus(Ha),y.plus(Ha),d),u=Gr(y.times(y),d),a=3;;){if(l=Gr(l.times(u),d),c=o.plus(mo(l,new p(a),d)),kl(c.d).slice(0,d)===kl(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(c_(p,d+2,h).times(i+""))),o=mo(o,new p(m),d),p.precision=h,t==null?(hn=!0,Gr(o,h)):o;o=c,a+=2}}function SP(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=Df(r/ln),e.d=[],s=(r+1)%ln,r<0&&(s+=ln),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=ln;s<a;)e.d.push(+t.slice(s,s+=ln));t=t.slice(s),s=ln-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),hn&&(e.e>gv||e.e<-gv))throw Error(HC+r)}else e.s=0,e.e=0,e.d=[0];return e}function Gr(e,t,r){var s,a,i,l,o,c,d,u,m=e.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=ln,a=t,d=m[u=0];else{if(u=Math.ceil((s+1)/ln),i=m.length,u>=i)return e;for(d=i=m[u],l=1;i>=10;i/=10)l++;s%=ln,a=s-ln+l}if(r!==void 0&&(i=td(10,l-a-1),o=d/i%10|0,c=t<0||m[u+1]!==void 0||d%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(s>0?a>0?d/td(10,l-a):0:m[u-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return c?(i=Kn(e),m.length=1,t=t-i-1,m[0]=td(10,(ln-t%ln)%ln),e.e=Df(-t/ln)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(s==0?(m.length=u,i=1,u--):(m.length=u+1,i=td(10,ln-s),m[u]=a>0?(d/td(10,l-a)%td(10,a)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==us&&(m[0]=1,++e.e);break}else{if(m[u]+=i,m[u]!=us)break;m[u--]=0,i=1}for(s=m.length;m[--s]===0;)m.pop();if(hn&&(e.e>gv||e.e<-gv))throw Error(HC+Kn(e));return e}function Q9(e,t){var r,s,a,i,l,o,c,d,u,m,f=e.constructor,y=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),hn?Gr(t,y):t;if(c=e.d,m=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(r=c,l=-l,o=m.length):(r=m,s=d,o=c.length),a=Math.max(Math.ceil(y/ln),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=m.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}l=0}for(u&&(r=c,c=m,m=r,t.s=-t.s),o=c.length,a=m.length-o;a>0;--a)c[o++]=0;for(a=m.length;a>l;){if(c[--a]<m[a]){for(i=a;i&&c[--i]===0;)c[i]=us-1;--c[i],c[a]+=us}c[a]-=m[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,hn?Gr(t,y):t):new f(0)}function Wd(e,t,r){var s,a=Kn(e),i=kl(e.d),l=i.length;return t?(r&&(s=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Yo(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yo(-a-1)+i,r&&(s=r-l)>0&&(i+=Yo(s))):a>=l?(i+=Yo(a+1-l),r&&(s=r-a-1)>0&&(i=i+"."+Yo(s))):((s=a+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-l)>0&&(a+1===l&&(i+="."),i+=Yo(s))),e.s<0?"-"+i:i}function CP(e,t){if(e.length>t)return e.length=t,!0}function eB(e){var t,r,s;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Nd+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return SP(l,i.toString())}else if(typeof i!="string")throw Error(Nd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,oye.test(i))SP(l,i);else throw Error(Nd+i)}if(a.prototype=Rt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=eB,a.config=a.set=cye,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function cye(e){if(!e||typeof e!="object")throw Error(Ti+"Object expected");var t,r,s,a=["precision",1,Ff,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(Df(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Nd+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Nd+r+": "+s);return this}var qC=eB(lye);Ha=new qC(1);const Ur=qC;function dye(e){return hye(e)||fye(e)||mye(e)||uye()}function uye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(e,t){if(e){if(typeof e=="string")return _2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _2(e,t)}}function fye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hye(e){if(Array.isArray(e))return _2(e)}function _2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var pye=function(t){return t},tB={},rB=function(t){return t===tB},AP=function(t){return function r(){return arguments.length===0||arguments.length===1&&rB(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},xye=function e(t,r){return t===1?r:AP(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==tB}).length;return l>=t?r.apply(void 0,a):e(t-l,AP(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(m){return rB(m)?c.shift():m});return r.apply(void 0,dye(u).concat(c))}))})},S1=function(t){return xye(t.length,t)},w2=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},gye=S1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),yye=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return pye;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},N2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},nB=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r&&i.every(function(o,c){return o===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function vye(e){var t;return e===0?t=1:t=Math.floor(new Ur(e).abs().log(10).toNumber())+1,t}function bye(e,t,r){for(var s=new Ur(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var jye=S1(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),_ye=S1(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),wye=S1(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const C1={rangeStep:bye,getDigitCount:vye,interpolateNumber:jye,uninterpolateNumber:_ye,uninterpolateTruncation:wye};function k2(e){return Sye(e)||kye(e)||sB(e)||Nye()}function Nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Sye(e){if(Array.isArray(e))return S2(e)}function Uh(e,t){return Eye(e)||Aye(e,t)||sB(e,t)||Cye()}function Cye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sB(e,t){if(e){if(typeof e=="string")return S2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S2(e,t)}}function S2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Aye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(s=(o=l.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw i}}return r}}function Eye(e){if(Array.isArray(e))return e}function aB(e){var t=Uh(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function iB(e,t,r){if(e.lte(0))return new Ur(0);var s=C1.getDigitCount(e.toNumber()),a=new Ur(10).pow(s),i=e.div(a),l=s!==1?.05:.1,o=new Ur(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return t?c:new Ur(Math.ceil(c))}function Tye(e,t,r){var s=1,a=new Ur(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new Ur(10).pow(C1.getDigitCount(e)-1),a=new Ur(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Ur(Math.floor(e)))}else e===0?a=new Ur(Math.floor((t-1)/2)):r||(a=new Ur(Math.floor(e)));var l=Math.floor((t-1)/2),o=yye(gye(function(c){return a.add(new Ur(c-l).mul(s)).toNumber()}),w2);return o(0,t)}function lB(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ur(0),tickMin:new Ur(0),tickMax:new Ur(0)};var i=iB(new Ur(t).sub(e).div(r-1),s,a),l;e<=0&&t>=0?l=new Ur(0):(l=new Ur(e).add(t).div(2),l=l.sub(new Ur(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),c=Math.ceil(new Ur(t).sub(l).div(i).toNumber()),d=o+c+1;return d>r?lB(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,o=t>0?o:o+(r-d)),{step:i,tickMin:l.sub(new Ur(o).mul(i)),tickMax:l.add(new Ur(c).mul(i))})}function Pye(e){var t=Uh(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=aB([r,s]),c=Uh(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(k2(w2(0,a-1).map(function(){return 1/0}))):[].concat(k2(w2(0,a-1).map(function(){return-1/0})),[u]);return r>s?N2(m):m}if(d===u)return Tye(d,a,i);var f=lB(d,u,l,i),y=f.step,x=f.tickMin,p=f.tickMax,h=C1.rangeStep(x,p.add(new Ur(.1).mul(y)),y);return r>s?N2(h):h}function Oye(e,t){var r=Uh(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=aB([s,a]),o=Uh(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),m=iB(new Ur(d).sub(c).div(u-1),i,0),f=[].concat(k2(C1.rangeStep(new Ur(c),new Ur(d).sub(new Ur(.99).mul(m)),m)),[d]);return s>a?N2(f):f}var Rye=nB(Pye),Lye=nB(Oye),Iye="Invariant failed";function Vd(e,t){throw new Error(Iye)}var Fye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yv.apply(this,arguments)}function Dye(e,t){return Uye(e)||Bye(e,t)||Mye(e,t)||$ye()}function $ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mye(e,t){if(e){if(typeof e=="string")return EP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EP(e,t)}}function EP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Bye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Uye(e){if(Array.isArray(e))return e}function zye(e,t){if(e==null)return{};var r=Wye(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Wye(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Vye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hye(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dB(s.key),s)}}function qye(e,t,r){return t&&Hye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gye(e,t,r){return t=vv(t),Jye(e,oB()?Reflect.construct(t,r||[],vv(e).constructor):t.apply(e,r))}function Jye(e,t){if(t&&(Hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kye(e)}function Kye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oB=function(){return!!e})()}function vv(e){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vv(e)}function Xye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C2(e,t)}function C2(e,t){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},C2(e,t)}function cB(e,t,r){return t=dB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dB(e){var t=Yye(e,"string");return Hm(t)=="symbol"?t:t+""}function Yye(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jp=function(e){function t(){return Vye(this,t),Gye(this,t,arguments)}return Xye(t,e),qye(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,l=s.width,o=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,m=s.yAxis,f=zye(s,Fye),y=Wt(f,!1);this.props.direction==="x"&&u.type!=="number"&&Vd();var x=c.map(function(p){var h=d(p,o),v=h.x,b=h.y,j=h.value,_=h.errorVal;if(!_)return null;var N=[],w,k;if(Array.isArray(_)){var S=Dye(_,2);w=S[0],k=S[1]}else w=k=_;if(i==="vertical"){var E=u.scale,T=b+a,A=T+l,C=T-l,P=E(j-w),O=E(j+k);N.push({x1:O,y1:A,x2:O,y2:C}),N.push({x1:P,y1:T,x2:O,y2:T}),N.push({x1:P,y1:A,x2:P,y2:C})}else if(i==="horizontal"){var R=m.scale,F=v+a,Q=F-l,W=F+l,L=R(j-w),I=R(j+k);N.push({x1:Q,y1:I,x2:W,y2:I}),N.push({x1:F,y1:L,x2:F,y2:I}),N.push({x1:Q,y1:L,x2:W,y2:L})}return Ce.createElement(pr,yv({className:"recharts-errorBar",key:"bar-".concat(N.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},y),N.map(function(K){return Ce.createElement("line",yv({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return Ce.createElement(pr,{className:"recharts-errorBars"},x)}}])}(Ce.Component);cB(Jp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});cB(Jp,"displayName","ErrorBar");function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function TP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Wc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(r),!0).forEach(function(s){Zye(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zye(e,t,r){return t=Qye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qye(e){var t=eve(e,"string");return zh(t)=="symbol"?t:t+""}function eve(e,t){if(zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(zh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uB=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,l=Ua(r,_d);if(!l)return null;var o=_d.defaultProps,c=o!==void 0?Wc(Wc({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(s||[]).reduce(function(u,m){var f=m.item,y=m.props,x=y.sectors||y.data||[];return u.concat(x.map(function(p){return{type:l.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(s||[]).map(function(u){var m=u.item,f=m.type.defaultProps,y=f!==void 0?Wc(Wc({},f),m.props):{},x=y.dataKey,p=y.name,h=y.legendType,v=y.hide;return{inactive:v,dataKey:x,type:c.iconType||h||"square",color:GC(m),value:p||x,payload:y}}),Wc(Wc(Wc({},c),_d.getWithHeight(l,a)),{},{payload:d,item:l})};function Wh(e){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}function PP(e){return sve(e)||nve(e)||rve(e)||tve()}function tve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rve(e,t){if(e){if(typeof e=="string")return A2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A2(e,t)}}function nve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sve(e){if(Array.isArray(e))return A2(e)}function A2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(s){bm(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bm(e,t,r){return t=ave(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ave(e){var t=ive(e,"string");return Wh(t)=="symbol"?t:t+""}function ive(e,t){if(Wh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Wh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mn(e,t,r){return ir(e)||ir(t)?r:ss(t)?Qa(e,t,r):Qt(t)?t(e):r}function H0(e,t,r,s){var a=nye(e,function(o){return Mn(o,t)});if(r==="number"){var i=a.filter(function(o){return _t(o)||parseFloat(o)});return i.length?[k1(i),ac(i)]:[1/0,-1/0]}var l=s?a.filter(function(o){return!ir(o)}):a;return l.map(function(o){return ss(o)||o instanceof Date?o:""})}var lve=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,m=a[d].coordinate,f=d>=o-1?a[0].coordinate:a[d+1].coordinate,y=void 0;if(ca(m-u)!==ca(f-m)){var x=[];if(ca(f-m)===ca(c[1]-c[0])){y=f;var p=m+c[1]-c[0];x[0]=Math.min(p,(p+u)/2),x[1]=Math.max(p,(p+u)/2)}else{y=u;var h=f+c[1]-c[0];x[0]=Math.min(m,(h+m)/2),x[1]=Math.max(m,(h+m)/2)}var v=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){l=a[d].index;break}}else{var b=Math.min(u,f),j=Math.max(u,f);if(t>(b+m)/2&&t<=(j+m)/2){l=a[d].index;break}}}else for(var _=0;_<o;_++)if(_===0&&t<=(s[_].coordinate+s[_+1].coordinate)/2||_>0&&_<o-1&&t>(s[_].coordinate+s[_-1].coordinate)/2&&t<=(s[_].coordinate+s[_+1].coordinate)/2||_===o-1&&t>(s[_].coordinate+s[_-1].coordinate)/2){l=s[_].index;break}return l},GC=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},ove=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,m=Object.keys(u),f=0,y=m.length;f<y;f++){var x=u[m[f]],p=x.items,h=x.cateAxisId,v=p.filter(function(k){return uo(k.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,j=b!==void 0?En(En({},b),v[0].props):v[0].props,_=j.barSize,N=j[h];l[N]||(l[N]=[]);var w=ir(_)?r:_;l[N].push({item:v[0],stackList:v.slice(1),barSize:ir(w)?void 0:da(w,s,0)})}}return l},cve=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,o=t.maxBarSize,c=l.length;if(c<1)return null;var d=da(r,a,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var f=!1,y=a/c,x=l.reduce(function(_,N){return _+N.barSize||0},0);x+=(c-1)*d,x>=a&&(x-=(c-1)*d,d=0),x>=a&&y>0&&(f=!0,y*=.9,x=c*y);var p=(a-x)/2>>0,h={offset:p-d,size:0};u=l.reduce(function(_,N){var w={item:N.item,position:{offset:h.offset+h.size+d,size:f?y:N.barSize}},k=[].concat(PP(_),[w]);return h=k[k.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(S){k.push({item:S,position:h})}),k},m)}else{var v=da(s,a,0,!0);a-2*v-(c-1)*d<=0&&(d=0);var b=(a-2*v-(c-1)*d)/c;b>1&&(b>>=0);var j=o===+o?Math.min(b,o):b;u=l.reduce(function(_,N,w){var k=[].concat(PP(_),[{item:N.item,position:{offset:v+(b+d)*w+(b-j)/2,size:j}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(S){k.push({item:S,position:k[k.length-1].position})}),k},m)}return u},dve=function(t,r,s,a){var i=s.children,l=s.width,o=s.margin,c=l-(o.left||0)-(o.right||0),d=uB({children:i,legendWidth:c});if(d){var u=a||{},m=u.width,f=u.height,y=d.align,x=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&x==="middle")&&y!=="center"&&_t(t[y]))return En(En({},t),{},bm({},y,t[y]+(m||0)));if((p==="horizontal"||p==="vertical"&&y==="center")&&x!=="middle"&&_t(t[x]))return En(En({},t),{},bm({},x,t[x]+(f||0)))}return t},uve=function(t,r,s){return ir(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},mB=function(t,r,s,a,i){var l=r.props.children,o=ei(l,Jp).filter(function(d){return uve(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var m=Mn(u,s);if(ir(m))return d;var f=Array.isArray(m)?[k1(m),ac(m)]:[m,m],y=c.reduce(function(x,p){var h=Mn(u,p,0),v=f[0]-Math.abs(Array.isArray(h)?h[0]:h),b=f[1]+Math.abs(Array.isArray(h)?h[1]:h);return[Math.min(v,x[0]),Math.max(b,x[1])]},[1/0,-1/0]);return[Math.min(y[0],d[0]),Math.max(y[1],d[1])]},[1/0,-1/0])}return null},mve=function(t,r,s,a,i){var l=r.map(function(o){return mB(t,o,s,i,a)}).filter(function(o){return!ir(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},fB=function(t,r,s,a,i){var l=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&mB(t,c,d,a)||H0(t,d,s,i)});if(s==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},hB=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},pB=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,l,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(l=!0),c.coordinate});return i||o.push(r),l||o.push(s),o},io=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,l=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ca(o[0]-o[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(m){var f=i?i.indexOf(m):m;return{coordinate:a(f)+d,value:m,offset:d}});return u.filter(function(m){return!Pf(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,f){return{coordinate:a(m)+d,value:m,index:f,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,f){return{coordinate:a(m)+d,value:i?i[m]:m,index:f,offset:d}})},d_=new WeakMap,Wx=function(t,r){if(typeof r!="function")return t;d_.has(t)||d_.set(t,new WeakMap);var s=d_.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},xB=function(t,r,s){var a=t.scale,i=t.type,l=t.layout,o=t.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:Ih(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:fv(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:V0(),realScaleType:"point"}:i==="category"?{scale:Ih(),realScaleType:"band"}:{scale:fv(),realScaleType:"linear"};if(Md(a)){var c="scale".concat(u1(a));return{scale:(kP[c]||V0)(),realScaleType:kP[c]?c:"point"}}return Qt(a)?{scale:a}:{scale:V0(),realScaleType:"point"}},RP=1e-4,gB=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-RP,l=Math.max(a[0],a[1])+RP,o=t(r[0]),c=t(r[s-1]);(o<i||o>l||c<i||c>l)&&t.domain([r[0],r[s-1]])}},fve=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},hve=function(t,r){if(!r||r.length!==2||!_t(r[0])||!_t(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!_t(t[0])||t[0]<s)&&(i[0]=s),(!_t(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},pve=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0,o=0;o<r;++o){var c=Pf(t[o][s][1])?t[o][s][0]:t[o][s][1];c>=0?(t[o][s][0]=i,t[o][s][1]=i+c,i=t[o][s][1]):(t[o][s][0]=l,t[o][s][1]=l+c,l=t[o][s][1])}},xve=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0;l<r;++l){var o=Pf(t[l][s][1])?t[l][s][0]:t[l][s][1];o>=0?(t[l][s][0]=i,t[l][s][1]=i+o,i=t[l][s][1]):(t[l][s][0]=0,t[l][s][1]=0)}},gve={sign:pve,expand:Fie,none:Dm,silhouette:Die,wiggle:$ie,positive:xve},yve=function(t,r,s){var a=r.map(function(o){return o.props.dataKey}),i=gve[s],l=Iie().keys(a).value(function(o,c){return+Mn(o,c,0)}).order(QN).offset(i);return l(t)},vve=function(t,r,s,a,i,l){if(!t)return null;var o=l?r.reverse():r,c={},d=o.reduce(function(m,f){var y,x=(y=f.type)!==null&&y!==void 0&&y.defaultProps?En(En({},f.type.defaultProps),f.props):f.props,p=x.stackId,h=x.hide;if(h)return m;var v=x[s],b=m[v]||{hasStack:!1,stackGroups:{}};if(ss(p)){var j=b.stackGroups[p]||{numericAxisId:s,cateAxisId:a,items:[]};j.items.push(f),b.hasStack=!0,b.stackGroups[p]=j}else b.stackGroups[lu("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[f]};return En(En({},m),{},bm({},v,b))},c),u={};return Object.keys(d).reduce(function(m,f){var y=d[f];if(y.hasStack){var x={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(p,h){var v=y.stackGroups[h];return En(En({},p),{},bm({},h,{numericAxisId:s,cateAxisId:a,items:v.items,stackedData:yve(t,v.items,i)}))},x)}return En(En({},m),{},bm({},f,y))},u)},yB=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Rye(d,i,o);return t.domain([k1(u),ac(u)]),{niceTicks:u}}if(i&&a==="number"){var m=t.domain(),f=Lye(m,i,o);return{niceTicks:f}}return null};function bv(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ir(a[t.dataKey])){var o=qy(r,"value",a[t.dataKey]);if(o)return o.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=Mn(a,ir(l)?t.dataKey:l);return ir(c)?null:t.scale(c)}var LP=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,l=t.entry,o=t.index;if(r.type==="category")return s[o]?s[o].coordinate+a:null;var c=Mn(l,r.dataKey,r.domain[o]);return ir(c)?null:r.scale(c)-i/2+a},bve=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},jve=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(ss(i)){var l=r[i];if(l){var o=l.items.indexOf(t);return o>=0?l.stackedData[o]:null}}return null},_ve=function(t){return t.reduce(function(r,s){return[k1(s.concat([r[0]]).filter(_t)),ac(s.concat([r[1]]).filter(_t))]},[1/0,-1/0])},vB=function(t,r,s){return Object.keys(t).reduce(function(a,i){var l=t[i],o=l.stackedData,c=o.reduce(function(d,u){var m=_ve(u.slice(r,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},IP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,E2=function(t,r,s){if(Qt(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(_t(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(IP.test(t[0])){var i=+IP.exec(t[0])[1];a[0]=r[0]-i}else Qt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(_t(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(FP.test(t[1])){var l=+FP.exec(t[1])[1];a[1]=r[1]+l}else Qt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},jv=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=jC(r,function(m){return m.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0},DP=function(t,r,s){return!t||!t.length||zd(t,Qa(s,"type.defaultProps.domain"))?r:t},bB=function(t,r){var s=t.type.defaultProps?En(En({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,l=s.unit,o=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return En(En({},Wt(t,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:GC(t),value:Mn(r,a),type:c,payload:r,chartType:d,hide:u})};function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}function $P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(r),!0).forEach(function(s){jB(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jB(e,t,r){return t=wve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wve(e){var t=Nve(e,"string");return Vh(t)=="symbol"?t:t+""}function Nve(e,t){if(Vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Vh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kve(e,t){return Eve(e)||Ave(e,t)||Cve(e,t)||Sve()}function Sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cve(e,t){if(e){if(typeof e=="string")return MP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MP(e,t)}}function MP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Ave(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Eve(e){if(Array.isArray(e))return e}var _v=Math.PI/180,Tve=function(t){return t*180/Math.PI},en=function(t,r,s,a){return{x:t+Math.cos(-_v*a)*s,y:r+Math.sin(-_v*a)*s}},_B=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},Pve=function(t,r,s,a,i){var l=t.width,o=t.height,c=t.startAngle,d=t.endAngle,u=da(t.cx,l,l/2),m=da(t.cy,o,o/2),f=_B(l,o,s),y=da(t.innerRadius,f,0),x=da(t.outerRadius,f,f*.8),p=Object.keys(r);return p.reduce(function(h,v){var b=r[v],j=b.domain,_=b.reversed,N;if(ir(b.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[y,x]),_&&(N=[N[1],N[0]]);else{N=b.range;var w=N,k=kve(w,2);c=k[0],d=k[1]}var S=xB(b,i),E=S.realScaleType,T=S.scale;T.domain(j).range(N),gB(T);var A=yB(T,Ql(Ql({},b),{},{realScaleType:E})),C=Ql(Ql(Ql({},b),A),{},{range:N,radius:x,realScaleType:E,scale:T,cx:u,cy:m,innerRadius:y,outerRadius:x,startAngle:c,endAngle:d});return Ql(Ql({},h),{},jB({},v,C))},{})},Ove=function(t,r){var s=t.x,a=t.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-l,2))},Rve=function(t,r){var s=t.x,a=t.y,i=r.cx,l=r.cy,o=Ove({x:s,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(s-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:Tve(d),angleInRadian:d}},Lve=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),l=Math.min(a,i);return{startAngle:r-l*360,endAngle:s-l*360}},Ive=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),l=Math.floor(a/360),o=Math.min(i,l);return t+o*360},BP=function(t,r){var s=t.x,a=t.y,i=Rve({x:s,y:a},r),l=i.radius,o=i.angle,c=r.innerRadius,d=r.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=Lve(r),m=u.startAngle,f=u.endAngle,y=o,x;if(m<=f){for(;y>f;)y-=360;for(;y<m;)y+=360;x=y>=m&&y<=f}else{for(;y>m;)y-=360;for(;y<f;)y+=360;x=y>=f&&y<=m}return x?Ql(Ql({},r),{},{radius:l,angle:Ive(y,r)}):null},wB=function(t){return!g.isValidElement(t)&&!Qt(t)&&typeof t!="boolean"?t.className:""};function Hh(e){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(e)}var Fve=["offset"];function Dve(e){return Uve(e)||Bve(e)||Mve(e)||$ve()}function $ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mve(e,t){if(e){if(typeof e=="string")return T2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T2(e,t)}}function Bve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uve(e){if(Array.isArray(e))return T2(e)}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function zve(e,t){if(e==null)return{};var r=Wve(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Wve(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(s){Vve(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vve(e,t,r){return t=Hve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hve(e){var t=qve(e,"string");return Hh(t)=="symbol"?t:t+""}function qve(e,t){if(Hh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qh.apply(this,arguments)}var Gve=function(t){var r=t.value,s=t.formatter,a=ir(t.children)?r:t.children;return Qt(s)?s(a):a},Jve=function(t,r){var s=ca(r-t),a=Math.min(Math.abs(r-t),360);return s*a},Kve=function(t,r,s){var a=t.position,i=t.viewBox,l=t.offset,o=t.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,f=c.outerRadius,y=c.startAngle,x=c.endAngle,p=c.clockWise,h=(m+f)/2,v=Jve(y,x),b=v>=0?1:-1,j,_;a==="insideStart"?(j=y+b*l,_=p):a==="insideEnd"?(j=x-b*l,_=!p):a==="end"&&(j=x+b*l,_=p),_=v<=0?_:!_;var N=en(d,u,h,j),w=en(d,u,h,j+(_?1:-1)*359),k="M".concat(N.x,",").concat(N.y,`
    A`).concat(h,",").concat(h,",0,1,").concat(_?0:1,`,
    `).concat(w.x,",").concat(w.y),S=ir(t.id)?lu("recharts-radial-line-"):t.id;return Ce.createElement("text",qh({},s,{dominantBaseline:"central",className:or("recharts-radial-bar-label",o)}),Ce.createElement("defs",null,Ce.createElement("path",{id:S,d:k})),Ce.createElement("textPath",{xlinkHref:"#".concat(S)},r))},Xve=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,f=(u+m)/2;if(a==="outside"){var y=en(l,o,d+s,f),x=y.x,p=y.y;return{x,y:p,textAnchor:x>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=(c+d)/2,v=en(l,o,h,f),b=v.x,j=v.y;return{x:b,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Yve=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,l=r,o=l.x,c=l.y,d=l.width,u=l.height,m=u>=0?1:-1,f=m*a,y=m>0?"end":"start",x=m>0?"start":"end",p=d>=0?1:-1,h=p*a,v=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var j={x:o+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:y};return Qn(Qn({},j),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var _={x:o+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:x};return Qn(Qn({},_),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:o-h,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Qn(Qn({},N),s?{width:Math.max(N.x-s.x,0),height:u}:{})}if(i==="right"){var w={x:o+d+h,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Qn(Qn({},w),s?{width:Math.max(s.x+s.width-w.x,0),height:u}:{})}var k=s?{width:d,height:u}:{};return i==="insideLeft"?Qn({x:o+h,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},k):i==="insideRight"?Qn({x:o+d-h,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},k):i==="insideTop"?Qn({x:o+d/2,y:c+f,textAnchor:"middle",verticalAnchor:x},k):i==="insideBottom"?Qn({x:o+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:y},k):i==="insideTopLeft"?Qn({x:o+h,y:c+f,textAnchor:b,verticalAnchor:x},k):i==="insideTopRight"?Qn({x:o+d-h,y:c+f,textAnchor:v,verticalAnchor:x},k):i==="insideBottomLeft"?Qn({x:o+h,y:c+u-f,textAnchor:b,verticalAnchor:y},k):i==="insideBottomRight"?Qn({x:o+d-h,y:c+u-f,textAnchor:v,verticalAnchor:y},k):Cf(i)&&(_t(i.x)||fd(i.x))&&(_t(i.y)||fd(i.y))?Qn({x:o+da(i.x,d),y:c+da(i.y,u),textAnchor:"end",verticalAnchor:"end"},k):Qn({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},Zve=function(t){return"cx"in t&&_t(t.cx)};function hs(e){var t=e.offset,r=t===void 0?5:t,s=zve(e,Fve),a=Qn({offset:r},s),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,f=a.textBreakAll;if(!i||ir(o)&&ir(c)&&!g.isValidElement(d)&&!Qt(d))return null;if(g.isValidElement(d))return g.cloneElement(d,a);var y;if(Qt(d)){if(y=g.createElement(d,a),g.isValidElement(y))return y}else y=Gve(a);var x=Zve(i),p=Wt(a,!0);if(x&&(l==="insideStart"||l==="insideEnd"||l==="end"))return Kve(a,y,p);var h=x?Xve(a):Yve(a);return Ce.createElement(Ud,qh({className:or("recharts-label",m)},p,h,{breakAll:f}),y)}hs.displayName="Label";var NB=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,l=t.endAngle,o=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,m=t.x,f=t.y,y=t.top,x=t.left,p=t.width,h=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(_t(p)&&_t(h)){if(_t(m)&&_t(f))return{x:m,y:f,width:p,height:h};if(_t(y)&&_t(x))return{x:y,y:x,width:p,height:h}}return _t(m)&&_t(f)?{x:m,y:f,width:0,height:0}:_t(r)&&_t(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:v}:t.viewBox?t.viewBox:{}},Qve=function(t,r){return t?t===!0?Ce.createElement(hs,{key:"label-implicit",viewBox:r}):ss(t)?Ce.createElement(hs,{key:"label-implicit",viewBox:r,value:t}):g.isValidElement(t)?t.type===hs?g.cloneElement(t,{key:"label-implicit",viewBox:r}):Ce.createElement(hs,{key:"label-implicit",content:t,viewBox:r}):Qt(t)?Ce.createElement(hs,{key:"label-implicit",content:t,viewBox:r}):Cf(t)?Ce.createElement(hs,qh({viewBox:r},t,{key:"label-implicit"})):null:null},ebe=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=NB(t),l=ei(a,hs).map(function(c,d){return g.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return l;var o=Qve(t.label,r||i);return[o].concat(Dve(l))};hs.parseViewBox=NB;hs.renderCallByParent=ebe;function tbe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var rbe=tbe;const nbe=$r(rbe);function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}var sbe=["valueAccessor"],abe=["data","dataKey","clockWise","id","textBreakAll"];function ibe(e){return dbe(e)||cbe(e)||obe(e)||lbe()}function lbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function obe(e,t){if(e){if(typeof e=="string")return P2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P2(e,t)}}function cbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dbe(e){if(Array.isArray(e))return P2(e)}function P2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wv.apply(this,arguments)}function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function WP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(s){ube(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ube(e,t,r){return t=mbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mbe(e){var t=fbe(e,"string");return Gh(t)=="symbol"?t:t+""}function fbe(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Gh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VP(e,t){if(e==null)return{};var r=hbe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function hbe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var pbe=function(t){return Array.isArray(t.value)?nbe(t.value):t.value};function Ol(e){var t=e.valueAccessor,r=t===void 0?pbe:t,s=VP(e,sbe),a=s.data,i=s.dataKey,l=s.clockWise,o=s.id,c=s.textBreakAll,d=VP(s,abe);return!a||!a.length?null:Ce.createElement(pr,{className:"recharts-label-list"},a.map(function(u,m){var f=ir(i)?r(u,m):Mn(u&&u.payload,i),y=ir(o)?{}:{id:"".concat(o,"-").concat(m)};return Ce.createElement(hs,wv({},Wt(u,!0),d,y,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:hs.parseViewBox(ir(l)?u:WP(WP({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}Ol.displayName="LabelList";function xbe(e,t){return e?e===!0?Ce.createElement(Ol,{key:"labelList-implicit",data:t}):Ce.isValidElement(e)||Qt(e)?Ce.createElement(Ol,{key:"labelList-implicit",data:t,content:e}):Cf(e)?Ce.createElement(Ol,wv({data:t},e,{key:"labelList-implicit"})):null:null}function gbe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=ei(s,Ol).map(function(l,o){return g.cloneElement(l,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var i=xbe(e.label,t);return[i].concat(ibe(a))}Ol.renderCallByParent=gbe;function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},O2.apply(this,arguments)}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(s){ybe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ybe(e,t,r){return t=vbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vbe(e){var t=bbe(e,"string");return Jh(t)=="symbol"?t:t+""}function bbe(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jbe=function(t,r){var s=ca(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},Vx=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,l=t.sign,o=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(o?1:-1)+a,m=Math.asin(c/u)/_v,f=d?i:i+l*m,y=en(r,s,u,f),x=en(r,s,a,f),p=d?i-l*m:i,h=en(r,s,u*Math.cos(m*_v),p);return{center:y,circleTangency:x,lineTangency:h,theta:m}},kB=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.startAngle,o=t.endAngle,c=jbe(l,o),d=l+c,u=en(r,s,i,l),m=en(r,s,i,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var y=en(r,s,a,l),x=en(r,s,a,d);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else f+="L ".concat(r,",").concat(s," Z");return f},_be=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,m=ca(u-d),f=Vx({cx:r,cy:s,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:c}),y=f.circleTangency,x=f.lineTangency,p=f.theta,h=Vx({cx:r,cy:s,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:c}),v=h.circleTangency,b=h.lineTangency,j=h.theta,_=c?Math.abs(d-u):Math.abs(d-u)-p-j;if(_<0)return o?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):kB({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(x.x,",").concat(x.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var w=Vx({cx:r,cy:s,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),k=w.circleTangency,S=w.lineTangency,E=w.theta,T=Vx({cx:r,cy:s,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),A=T.circleTangency,C=T.lineTangency,P=T.theta,O=c?Math.abs(d-u):Math.abs(d-u)-E-P;if(O<0&&l===0)return"".concat(N,"L").concat(r,",").concat(s,"Z");N+="L".concat(C.x,",").concat(C.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(m>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(S.x,",").concat(S.y,"Z")}else N+="L".concat(r,",").concat(s,"Z");return N},wbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JC=function(t){var r=qP(qP({},wbe),t),s=r.cx,a=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,m=r.endAngle,f=r.className;if(l<i||u===m)return null;var y=or("recharts-sector",f),x=l-i,p=da(o,x,0,!0),h;return p>0&&Math.abs(u-m)<360?h=_be({cx:s,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(p,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):h=kB({cx:s,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),Ce.createElement("path",O2({},Wt(r,!0),{className:y,d:h,role:"img"}))};function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},R2.apply(this,arguments)}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function JP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(s){Nbe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Nbe(e,t,r){return t=kbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kbe(e){var t=Sbe(e,"string");return Kh(t)=="symbol"?t:t+""}function Sbe(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Kh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KP={curveBasisClosed:Nie,curveBasisOpen:kie,curveBasis:wie,curveBumpX:cie,curveBumpY:die,curveLinearClosed:Sie,curveLinear:f1,curveMonotoneX:Cie,curveMonotoneY:Aie,curveNatural:Eie,curveStep:Tie,curveStepAfter:Oie,curveStepBefore:Pie},Hx=function(t){return t.x===+t.x&&t.y===+t.y},o0=function(t){return t.x},c0=function(t){return t.y},Cbe=function(t,r){if(Qt(t))return t;var s="curve".concat(u1(t));return(s==="curveMonotone"||s==="curveBump")&&r?KP["".concat(s).concat(r==="vertical"?"Y":"X")]:KP[s]||f1},Abe=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,l=t.baseLine,o=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=Cbe(s,o),m=d?i.filter(function(p){return Hx(p)}):i,f;if(Array.isArray(l)){var y=d?l.filter(function(p){return Hx(p)}):l,x=m.map(function(p,h){return JP(JP({},p),{},{base:y[h]})});return o==="vertical"?f=Ix().y(c0).x1(o0).x0(function(p){return p.base.x}):f=Ix().x(o0).y1(c0).y0(function(p){return p.base.y}),f.defined(Hx).curve(u),f(x)}return o==="vertical"&&_t(l)?f=Ix().y(c0).x1(o0).x0(l):_t(l)?f=Ix().x(o0).y1(c0).y0(l):f=bM().x(o0).y(c0),f.defined(Hx).curve(u),f(m)},kd=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var l=s&&s.length?Abe(t):a;return g.createElement("path",R2({},Wt(t,!1),Gy(t),{className:or("recharts-curve",r),d:l,ref:i}))},SB={exports:{}},Ebe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tbe=Ebe,Pbe=Tbe;function CB(){}function AB(){}AB.resetWarningCache=CB;var Obe=function(){function e(s,a,i,l,o,c){if(c!==Pbe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:AB,resetWarningCache:CB};return r.PropTypes=r,r};SB.exports=Obe();var Rbe=SB.exports;const Or=$r(Rbe);var Lbe=Object.getOwnPropertyNames,Ibe=Object.getOwnPropertySymbols,Fbe=Object.prototype.hasOwnProperty;function XP(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function qx(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,l=i.get(r),o=i.get(s);if(l&&o)return l===s&&o===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function Dbe(e){return e!=null?e[Symbol.toStringTag]:void 0}function YP(e){return Lbe(e).concat(Ibe(e))}var $be=Object.hasOwn||function(e,t){return Fbe.call(e,t)};function du(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Mbe="__v",Bbe="__o",Ube="_owner",ZP=Object.getOwnPropertyDescriptor,QP=Object.keys;function zbe(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function Wbe(e,t){return du(e.getTime(),t.getTime())}function Vbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Hbe(e,t){return e===t}function eO(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=t.entries(),u=!1,m=0;(o=d.next())&&!o.done;){if(a[m]){m++;continue}var f=l.value,y=o.value;if(r.equals(f[0],y[0],c,m,e,t,r)&&r.equals(f[1],y[1],f[0],y[0],e,t,r)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var qbe=du;function Gbe(e,t,r){var s=QP(e),a=s.length;if(QP(t).length!==a)return!1;for(;a-- >0;)if(!EB(e,t,r,s[a]))return!1;return!0}function d0(e,t,r){var s=YP(e),a=s.length;if(YP(t).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=s[a],!EB(e,t,r,i)||(l=ZP(e,i),o=ZP(t,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function Jbe(e,t){return du(e.valueOf(),t.valueOf())}function Kbe(e,t){return e.source===t.source&&e.flags===t.flags}function tO(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var c=t.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&r.equals(l.value,o.value,l.value,o.value,e,t,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function Xbe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Ybe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function EB(e,t,r,s){return(s===Ube||s===Bbe||s===Mbe)&&(e.$$typeof||t.$$typeof)?!0:$be(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var Zbe="[object Arguments]",Qbe="[object Boolean]",e1e="[object Date]",t1e="[object Error]",r1e="[object Map]",n1e="[object Number]",s1e="[object Object]",a1e="[object RegExp]",i1e="[object Set]",l1e="[object String]",o1e="[object URL]",c1e=Array.isArray,rO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,nO=Object.assign,d1e=Object.prototype.toString.call.bind(Object.prototype.toString);function u1e(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,m=e.areTypedArraysEqual,f=e.areUrlsEqual,y=e.unknownTagComparators;return function(p,h,v){if(p===h)return!0;if(p==null||h==null)return!1;var b=typeof p;if(b!==typeof h)return!1;if(b!=="object")return b==="number"?l(p,h,v):b==="function"?a(p,h,v):!1;var j=p.constructor;if(j!==h.constructor)return!1;if(j===Object)return o(p,h,v);if(c1e(p))return t(p,h,v);if(rO!=null&&rO(p))return m(p,h,v);if(j===Date)return r(p,h,v);if(j===RegExp)return d(p,h,v);if(j===Map)return i(p,h,v);if(j===Set)return u(p,h,v);var _=d1e(p);if(_===e1e)return r(p,h,v);if(_===a1e)return d(p,h,v);if(_===r1e)return i(p,h,v);if(_===i1e)return u(p,h,v);if(_===s1e)return typeof p.then!="function"&&typeof h.then!="function"&&o(p,h,v);if(_===o1e)return f(p,h,v);if(_===t1e)return s(p,h,v);if(_===Zbe)return o(p,h,v);if(_===Qbe||_===n1e||_===l1e)return c(p,h,v);if(y){var N=y[_];if(!N){var w=Dbe(p);w&&(N=y[w])}if(N)return N(p,h,v)}return!1}}function m1e(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?d0:zbe,areDatesEqual:Wbe,areErrorsEqual:Vbe,areFunctionsEqual:Hbe,areMapsEqual:s?XP(eO,d0):eO,areNumbersEqual:qbe,areObjectsEqual:s?d0:Gbe,arePrimitiveWrappersEqual:Jbe,areRegExpsEqual:Kbe,areSetsEqual:s?XP(tO,d0):tO,areTypedArraysEqual:s?d0:Xbe,areUrlsEqual:Ybe,unknownTagComparators:void 0};if(r&&(a=nO({},a,r(a))),t){var i=qx(a.areArraysEqual),l=qx(a.areMapsEqual),o=qx(a.areObjectsEqual),c=qx(a.areSetsEqual);a=nO({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function f1e(e){return function(t,r,s,a,i,l,o){return e(t,r,o)}}function h1e(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),m=u.cache,f=m===void 0?t?new WeakMap:void 0:m,y=u.meta;return r(c,d,{cache:f,equals:a,meta:y,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,l)}}var p1e=Dc();Dc({strict:!0});Dc({circular:!0});Dc({circular:!0,strict:!0});Dc({createInternalComparator:function(){return du}});Dc({strict:!0,createInternalComparator:function(){return du}});Dc({circular:!0,createInternalComparator:function(){return du}});Dc({circular:!0,createInternalComparator:function(){return du},strict:!0});function Dc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,l=i===void 0?!1:i,o=m1e(e),c=u1e(o),d=s?s(c):f1e(c);return h1e({circular:r,comparator:c,createState:a,equals:d,strict:l})}function x1e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function sO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):x1e(a)};requestAnimationFrame(s)}function L2(e){"@babel/helpers - typeof";return L2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L2(e)}function g1e(e){return j1e(e)||b1e(e)||v1e(e)||y1e()}function y1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v1e(e,t){if(e){if(typeof e=="string")return aO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aO(e,t)}}function aO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function b1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function j1e(e){if(Array.isArray(e))return e}function _1e(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=g1e(l),c=o[0],d=o.slice(1);if(typeof c=="number"){sO(a.bind(null,d),c);return}a(c),sO(a.bind(null,d));return}L2(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function lO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(s){TB(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function TB(e,t,r){return t=w1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w1e(e){var t=N1e(e,"string");return Xh(t)==="symbol"?t:String(t)}function N1e(e,t){if(Xh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k1e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},S1e=function(t){return t},C1e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},q0=function(t,r){return Object.keys(r).reduce(function(s,a){return lO(lO({},s),{},TB({},a,t(a,r[a])))},{})},oO=function(t,r,s){return t.map(function(a){return"".concat(C1e(a)," ").concat(r,"ms ").concat(s)}).join(",")};function A1e(e,t){return P1e(e)||T1e(e,t)||PB(e,t)||E1e()}function E1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function P1e(e){if(Array.isArray(e))return e}function O1e(e){return I1e(e)||L1e(e)||PB(e)||R1e()}function R1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PB(e,t){if(e){if(typeof e=="string")return I2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I2(e,t)}}function L1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I1e(e){if(Array.isArray(e))return I2(e)}function I2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Nv=1e-4,OB=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},RB=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},cO=function(t,r){return function(s){var a=OB(t,r);return RB(a,s)}},F1e=function(t,r){return function(s){var a=OB(t,r),i=[].concat(O1e(a.map(function(l,o){return l*o}).slice(1)),[0]);return RB(i,s)}},dO=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(h){return parseFloat(h)}),u=A1e(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var m=cO(a,l),f=cO(i,o),y=F1e(a,l),x=function(v){return v>1?1:v<0?0:v},p=function(v){for(var b=v>1?1:v,j=b,_=0;_<8;++_){var N=m(j)-b,w=y(j);if(Math.abs(N-b)<Nv||w<Nv)return f(j);j=x(j-N/w)}return f(j)};return p.isStepper=!1,p},D1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,l=t.dt,o=l===void 0?17:l,c=function(u,m,f){var y=-(u-m)*s,x=f*i,p=f+(y-x)*o/1e3,h=f*o/1e3+u;return Math.abs(h-m)<Nv&&Math.abs(p)<Nv?[m,0]:[h,p]};return c.isStepper=!0,c.dt=o,c},$1e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dO(a);case"spring":return D1e();default:if(a.split("(")[0]==="cubic-bezier")return dO(a)}return typeof a=="function"?a:null};function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function uO(e){return U1e(e)||B1e(e)||LB(e)||M1e()}function M1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U1e(e){if(Array.isArray(e))return D2(e)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(s){F2(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function F2(e,t,r){return t=z1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z1e(e){var t=W1e(e,"string");return Yh(t)==="symbol"?t:String(t)}function W1e(e,t){if(Yh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V1e(e,t){return G1e(e)||q1e(e,t)||LB(e,t)||H1e()}function H1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LB(e,t){if(e){if(typeof e=="string")return D2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D2(e,t)}}function D2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function q1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function G1e(e){if(Array.isArray(e))return e}var kv=function(t,r,s){return t+(r-t)*s},$2=function(t){var r=t.from,s=t.to;return r!==s},J1e=function e(t,r,s){var a=q0(function(i,l){if($2(l)){var o=t(l.from,l.to,l.velocity),c=V1e(o,2),d=c[0],u=c[1];return Ns(Ns({},l),{},{from:d,velocity:u})}return l},r);return s<1?q0(function(i,l){return $2(l)?Ns(Ns({},l),{},{velocity:kv(l.velocity,a[i].velocity,s),from:kv(l.from,a[i].from,s)}):l},r):e(t,a,s-1)};const K1e=function(e,t,r,s,a){var i=k1e(e,t),l=i.reduce(function(h,v){return Ns(Ns({},h),{},F2({},v,[e[v],t[v]]))},{}),o=i.reduce(function(h,v){return Ns(Ns({},h),{},F2({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,u,m=function(){return null},f=function(){return q0(function(v,b){return b.from},o)},y=function(){return!Object.values(o).filter($2).length},x=function(v){d||(d=v);var b=v-d,j=b/r.dt;o=J1e(r,o,j),a(Ns(Ns(Ns({},e),t),f())),d=v,y()||(c=requestAnimationFrame(m))},p=function(v){u||(u=v);var b=(v-u)/s,j=q0(function(N,w){return kv.apply(void 0,uO(w).concat([r(b)]))},l);if(a(Ns(Ns(Ns({},e),t),j)),b<1)c=requestAnimationFrame(m);else{var _=q0(function(N,w){return kv.apply(void 0,uO(w).concat([r(1)]))},l);a(Ns(Ns(Ns({},e),t),_))}};return m=r.isStepper?x:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}var X1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Y1e(e,t){if(e==null)return{};var r=Z1e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Z1e(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function u_(e){return rje(e)||tje(e)||eje(e)||Q1e()}function Q1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(e,t){if(e){if(typeof e=="string")return M2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M2(e,t)}}function tje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rje(e){if(Array.isArray(e))return M2(e)}function M2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(s){N0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function N0(e,t,r){return t=IB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sje(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,IB(s.key),s)}}function aje(e,t,r){return t&&sje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IB(e){var t=ije(e,"string");return qm(t)==="symbol"?t:String(t)}function ije(e,t){if(qm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(qm(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B2(e,t)}function B2(e,t){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},B2(e,t)}function oje(e){var t=cje();return function(){var s=Sv(e),a;if(t){var i=Sv(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return U2(this,a)}}function U2(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z2(e)}function z2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sv(e){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sv(e)}var ol=function(e){lje(r,e);var t=oje(r);function r(s,a){var i;nje(this,r),i=t.call(this,s,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,m=l.steps,f=l.children,y=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(z2(i)),i.changeStyle=i.changeStyle.bind(z2(i)),!o||y<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),U2(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof f=="function")return i.state={style:d},U2(i);i.state={style:c?N0({},c,d):d}}else i.state={style:{}};return i}return aje(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,f=this.state.style;if(o){if(!l){var y={style:c?N0({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(y);return}if(!(p1e(a.to,u)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=x||d?m:a.to;if(this.state&&f){var h={style:c?N0({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(h)}this.runAnimation(Mi(Mi({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,f=a.onAnimationStart,y=K1e(l,o,$1e(d),c,this.changeStyle),x=function(){i.stopJSAnimation=y()};this.manager.start([f,u,x,c,m])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,m=d.duration,f=m===void 0?0:m,y=function(p,h,v){if(v===0)return p;var b=h.duration,j=h.easing,_=j===void 0?"ease":j,N=h.style,w=h.properties,k=h.onAnimationEnd,S=v>0?l[v-1]:h,E=w||Object.keys(N);if(typeof _=="function"||_==="spring")return[].concat(u_(p),[i.runJSAnimation.bind(i,{from:S.style,to:N,duration:b,easing:_}),b]);var T=oO(E,b,_),A=Mi(Mi(Mi({},S.style),N),{},{transition:T});return[].concat(u_(p),[A,b,k]).filter(S1e)};return this.manager.start([c].concat(u_(l.reduce(y,[u,Math.max(f,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=_1e());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,f=a.steps,y=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof y=="function"||d==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var p=o?N0({},o,c):c,h=oO(Object.keys(p),l,d);x.start([u,i,Mi(Mi({},p),{},{transition:h}),l,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Y1e(a,X1e),d=g.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var m=function(y){var x=y.props,p=x.style,h=p===void 0?{}:p,v=x.className,b=g.cloneElement(y,Mi(Mi({},c),{},{style:Mi(Mi({},h),u),className:v}));return b};return d===1?m(g.Children.only(i)):Ce.createElement("div",null,g.Children.map(i,function(f){return m(f)}))}}]),r}(g.PureComponent);ol.displayName="Animate";ol.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ol.propTypes={from:Or.oneOfType([Or.object,Or.string]),to:Or.oneOfType([Or.object,Or.string]),attributeName:Or.string,duration:Or.number,begin:Or.number,easing:Or.oneOfType([Or.string,Or.func]),steps:Or.arrayOf(Or.shape({duration:Or.number.isRequired,style:Or.object.isRequired,easing:Or.oneOfType([Or.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Or.func]),properties:Or.arrayOf("string"),onAnimationEnd:Or.func})),children:Or.oneOfType([Or.node,Or.func]),isActive:Or.bool,canBegin:Or.bool,onAnimationEnd:Or.func,shouldReAnimate:Or.bool,onAnimationStart:Or.func,onAnimationReStart:Or.func};function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Cv.apply(this,arguments)}function dje(e,t){return hje(e)||fje(e,t)||mje(e,t)||uje()}function uje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mje(e,t){if(e){if(typeof e=="string")return hO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hO(e,t)}}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function fje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function hje(e){if(Array.isArray(e))return e}function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(r),!0).forEach(function(s){pje(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pje(e,t,r){return t=xje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xje(e){var t=gje(e,"string");return Zh(t)=="symbol"?t:t+""}function gje(e,t){if(Zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gO=function(t,r,s,a,i){var l=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],f=0,y=4;f<y;f++)m[f]=i[f]>l?l:i[f];u="M".concat(t,",").concat(r+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+c*m[0],",").concat(r)),u+="L ".concat(t+s-c*m[1],",").concat(r),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+o*m[1])),u+="L ".concat(t+s,",").concat(r+a-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+s-c*m[2],",").concat(r+a)),u+="L ".concat(t+c*m[3],",").concat(r+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var x=Math.min(l,i);u="M ".concat(t,",").concat(r+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(r,`
            L `).concat(t+s-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s,",").concat(r+o*x,`
            L `).concat(t+s,",").concat(r+a-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s-c*x,",").concat(r+a,`
            L `).concat(t+c*x,",").concat(r+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(r+a-o*x," Z")}else u="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},yje=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,l=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+c),f=Math.max(l,l+c);return s>=d&&s<=u&&a>=m&&a<=f}return!1},vje={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KC=function(t){var r=xO(xO({},vje),t),s=g.useRef(),a=g.useState(-1),i=dje(a,2),l=i[0],o=i[1];g.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var _=s.current.getTotalLength();_&&o(_)}catch{}},[]);var c=r.x,d=r.y,u=r.width,m=r.height,f=r.radius,y=r.className,x=r.animationEasing,p=r.animationDuration,h=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var j=or("recharts-rectangle",y);return b?Ce.createElement(ol,{canBegin:l>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:x,isActive:b},function(_){var N=_.width,w=_.height,k=_.x,S=_.y;return Ce.createElement(ol,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:p,isActive:v,easing:x},Ce.createElement("path",Cv({},Wt(r,!0),{className:j,d:gO(k,S,N,w,f),ref:s})))}):Ce.createElement("path",Cv({},Wt(r,!0),{className:j,d:gO(c,d,u,m,f)}))},bje=["points","className","baseLinePoints","connectNulls"];function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},sm.apply(this,arguments)}function jje(e,t){if(e==null)return{};var r=_je(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _je(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function yO(e){return Sje(e)||kje(e)||Nje(e)||wje()}function wje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nje(e,t){if(e){if(typeof e=="string")return W2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W2(e,t)}}function kje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sje(e){if(Array.isArray(e))return W2(e)}function W2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var vO=function(t){return t&&t.x===+t.x&&t.y===+t.y},Cje=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){vO(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),vO(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},G0=function(t,r){var s=Cje(t);r&&(s=[s.reduce(function(i,l){return[].concat(yO(i),yO(l))},[])]);var a=s.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},Aje=function(t,r,s){var a=G0(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(G0(r.reverse(),s).slice(1))},Eje=function(t){var r=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,l=jje(t,bje);if(!r||!r.length)return null;var o=or("recharts-polygon",s);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=Aje(r,a,i);return Ce.createElement("g",{className:o},Ce.createElement("path",sm({},Wt(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?Ce.createElement("path",sm({},Wt(l,!0),{fill:"none",d:G0(r,i)})):null,c?Ce.createElement("path",sm({},Wt(l,!0),{fill:"none",d:G0(a,i)})):null)}var u=G0(r,i);return Ce.createElement("path",sm({},Wt(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V2.apply(this,arguments)}var Kp=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,l=or("recharts-dot",i);return r===+r&&s===+s&&a===+a?g.createElement("circle",V2({},Wt(t,!1),Gy(t),{className:l,cx:r,cy:s,r:a})):null};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var Tje=["x","y","top","left","width","height","className"];function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},H2.apply(this,arguments)}function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Pje(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(r),!0).forEach(function(s){Oje(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Oje(e,t,r){return t=Rje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rje(e){var t=Lje(e,"string");return Qh(t)=="symbol"?t:t+""}function Lje(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Qh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ije(e,t){if(e==null)return{};var r=Fje(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Fje(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Dje=function(t,r,s,a,i,l){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(l,",").concat(r,"h").concat(s)},$je=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,l=t.top,o=l===void 0?0:l,c=t.left,d=c===void 0?0:c,u=t.width,m=u===void 0?0:u,f=t.height,y=f===void 0?0:f,x=t.className,p=Ije(t,Tje),h=Pje({x:s,y:i,top:o,left:d,width:m,height:y},p);return!_t(s)||!_t(i)||!_t(m)||!_t(y)||!_t(o)||!_t(d)?null:Ce.createElement("path",H2({},Wt(h,!0),{className:or("recharts-cross",x),d:Dje(s,i,m,y,o,d)}))},Mje=N1,Bje=J9,Uje=Hl;function zje(e,t){return e&&e.length?Mje(e,Uje(t),Bje):void 0}var Wje=zje;const Vje=$r(Wje);var Hje=N1,qje=Hl,Gje=K9;function Jje(e,t){return e&&e.length?Hje(e,qje(t),Gje):void 0}var Kje=Jje;const Xje=$r(Kje);var Yje=["cx","cy","angle","ticks","axisLine"],Zje=["ticks","tick","angle","tickFormatter","stroke"];function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function J0(){return J0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},J0.apply(this,arguments)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Vc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(s){A1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _O(e,t){if(e==null)return{};var r=Qje(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Qje(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function e_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,DB(s.key),s)}}function t_e(e,t,r){return t&&wO(e.prototype,t),r&&wO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r_e(e,t,r){return t=Av(t),n_e(e,FB()?Reflect.construct(t,r||[],Av(e).constructor):t.apply(e,r))}function n_e(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s_e(e)}function s_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!e})()}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Av(e)}function a_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t)}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},q2(e,t)}function A1(e,t,r){return t=DB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=i_e(e,"string");return Gm(t)=="symbol"?t:t+""}function i_e(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Gm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var E1=function(e){function t(){return e_e(this,t),r_e(this,t,arguments)}return a_e(t,e),t_e(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return en(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=Vje(o,function(u){return u.coordinate||0}),d=Xje(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=s.axisLine,d=_O(s,Yje),u=o.reduce(function(x,p){return[Math.min(x[0],p.coordinate),Math.max(x[1],p.coordinate)]},[1/0,-1/0]),m=en(a,i,u[0],l),f=en(a,i,u[1],l),y=Vc(Vc(Vc({},Wt(d,!1)),{},{fill:"none"},Wt(c,!1)),{},{x1:m.x,y1:m.y,x2:f.x,y2:f.y});return Ce.createElement("line",J0({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=_O(a,Zje),m=this.getTickTextAnchor(),f=Wt(u,!1),y=Wt(l,!1),x=i.map(function(p,h){var v=s.getTickValueCoord(p),b=Vc(Vc(Vc(Vc({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:d},y),{},{index:h},v),{},{payload:p});return Ce.createElement(pr,J0({className:or("recharts-polar-radius-axis-tick",wB(l)),key:"tick-".concat(p.coordinate)},Bd(s.props,p,h)),t.renderTickItem(l,b,c?c(p.value,h):p.value))});return Ce.createElement(pr,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,l=s.tick;return!a||!a.length?null:Ce.createElement(pr,{className:or("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),hs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var l;return Ce.isValidElement(s)?l=Ce.cloneElement(s,a):Qt(s)?l=s(a):l=Ce.createElement(Ud,J0({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(g.PureComponent);A1(E1,"displayName","PolarRadiusAxis");A1(E1,"axisType","radiusAxis");A1(E1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},sd.apply(this,arguments)}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(s){T1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function l_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,MB(s.key),s)}}function o_e(e,t,r){return t&&kO(e.prototype,t),r&&kO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c_e(e,t,r){return t=Ev(t),d_e(e,$B()?Reflect.construct(t,r||[],Ev(e).constructor):t.apply(e,r))}function d_e(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u_e(e)}function u_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($B=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ev(e)}function m_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},G2(e,t)}function T1(e,t,r){return t=MB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MB(e){var t=f_e(e,"string");return Jm(t)=="symbol"?t:t+""}function f_e(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var h_e=Math.PI/180,SO=1e-5,P1=function(e){function t(){return l_e(this,t),c_e(this,t,arguments)}return m_e(t,e),o_e(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=en(i,l,o,s.coordinate),f=en(i,l,o+(c==="inner"?-1:1)*u,s.coordinate);return{x1:m.x,y1:m.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*h_e),l;return i>SO?l=a==="outer"?"start":"end":i<-SO?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.radius,o=s.axisLine,c=s.axisLineType,d=Hc(Hc({},Wt(this.props,!1)),{},{fill:"none"},Wt(o,!1));if(c==="circle")return Ce.createElement(Kp,sd({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(f){return en(a,i,l,f.coordinate)});return Ce.createElement(Eje,sd({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Wt(this.props,!1),m=Wt(l,!1),f=Hc(Hc({},u),{},{fill:"none"},Wt(o,!1)),y=i.map(function(x,p){var h=s.getTickLineCoord(x),v=s.getTickTextAnchor(x),b=Hc(Hc(Hc({textAnchor:v},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:x,x:h.x2,y:h.y2});return Ce.createElement(pr,sd({className:or("recharts-polar-angle-axis-tick",wB(l)),key:"tick-".concat(x.coordinate)},Bd(s.props,x,p)),o&&Ce.createElement("line",sd({className:"recharts-polar-angle-axis-tick-line"},f,h)),l&&t.renderTickItem(l,b,c?c(x.value,p):x.value))});return Ce.createElement(pr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,l=s.axisLine;return i<=0||!a||!a.length?null:Ce.createElement(pr,{className:or("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var l;return Ce.isValidElement(s)?l=Ce.cloneElement(s,a):Qt(s)?l=s(a):l=Ce.createElement(Ud,sd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(g.PureComponent);T1(P1,"displayName","PolarAngleAxis");T1(P1,"axisType","angleAxis");T1(P1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var p_e=VM,x_e=p_e(Object.getPrototypeOf,Object),g_e=x_e,y_e=Po,v_e=g_e,b_e=Oo,j_e="[object Object]",__e=Function.prototype,w_e=Object.prototype,BB=__e.toString,N_e=w_e.hasOwnProperty,k_e=BB.call(Object);function S_e(e){if(!b_e(e)||y_e(e)!=j_e)return!1;var t=v_e(e);if(t===null)return!0;var r=N_e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&BB.call(r)==k_e}var C_e=S_e;const A_e=$r(C_e);var E_e=Po,T_e=Oo,P_e="[object Boolean]";function O_e(e){return e===!0||e===!1||T_e(e)&&E_e(e)==P_e}var R_e=O_e;const L_e=$r(R_e);function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Tv.apply(this,arguments)}function I_e(e,t){return M_e(e)||$_e(e,t)||D_e(e,t)||F_e()}function F_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D_e(e,t){if(e){if(typeof e=="string")return CO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CO(e,t)}}function CO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function $_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function M_e(e){if(Array.isArray(e))return e}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function EO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(s){B_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function B_e(e,t,r){return t=U_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U_e(e){var t=z_e(e,"string");return ep(t)=="symbol"?t:t+""}function z_e(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ep(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TO=function(t,r,s,a,i){var l=s-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+s,",").concat(r),o+="L ".concat(t+s-l/2,",").concat(r+i),o+="L ".concat(t+s-l/2-a,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},W_e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V_e=function(t){var r=EO(EO({},W_e),t),s=g.useRef(),a=g.useState(-1),i=I_e(a,2),l=i[0],o=i[1];g.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var j=s.current.getTotalLength();j&&o(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,m=r.lowerWidth,f=r.height,y=r.className,x=r.animationEasing,p=r.animationDuration,h=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||f!==+f||u===0&&m===0||f===0)return null;var b=or("recharts-trapezoid",y);return v?Ce.createElement(ol,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:f,x:c,y:d},duration:p,animationEasing:x,isActive:v},function(j){var _=j.upperWidth,N=j.lowerWidth,w=j.height,k=j.x,S=j.y;return Ce.createElement(ol,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:p,easing:x},Ce.createElement("path",Tv({},Wt(r,!0),{className:b,d:TO(k,S,_,N,w),ref:s})))}):Ce.createElement("g",null,Ce.createElement("path",Tv({},Wt(r,!0),{className:b,d:TO(c,d,u,m,f)})))},H_e=["option","shapeType","propTransformer","activeClassName","isActive"];function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function q_e(e,t){if(e==null)return{};var r=G_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function G_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Pv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(s){J_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J_e(e,t,r){return t=K_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_e(e){var t=X_e(e,"string");return tp(t)=="symbol"?t:t+""}function X_e(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(tp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y_e(e,t){return Pv(Pv({},t),e)}function Z_e(e,t){return e==="symbols"}function OO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Ce.createElement(KC,r);case"trapezoid":return Ce.createElement(V_e,r);case"sector":return Ce.createElement(JC,r);case"symbols":if(Z_e(t))return Ce.createElement(fC,r);break;default:return null}}function Q_e(e){return g.isValidElement(e)?e.props:e}function UB(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?Y_e:s,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,c=q_e(e,H_e),d;if(g.isValidElement(t))d=g.cloneElement(t,Pv(Pv({},c),Q_e(t)));else if(Qt(t))d=t(c);else if(A_e(t)&&!L_e(t)){var u=a(t,c);d=Ce.createElement(OO,{shapeType:r,elementProps:u})}else{var m=c;d=Ce.createElement(OO,{shapeType:r,elementProps:m})}return o?Ce.createElement(pr,{className:l},d):d}function O1(e,t){return t!=null&&"trapezoids"in e.props}function R1(e,t){return t!=null&&"sectors"in e.props}function rp(e,t){return t!=null&&"points"in e.props}function ewe(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function twe(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function rwe(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function nwe(e,t){var r;return O1(e,t)?r=ewe:R1(e,t)?r=twe:rp(e,t)&&(r=rwe),r}function swe(e,t){var r;return O1(e,t)?r="trapezoids":R1(e,t)?r="sectors":rp(e,t)&&(r="points"),r}function awe(e,t){if(O1(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(R1(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return rp(e,t)?t.payload:{}}function iwe(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=swe(r,t),i=awe(r,t),l=s.filter(function(c,d){var u=zd(i,c),m=r.props[a].filter(function(x){var p=nwe(r,t);return p(x,t)}),f=r.props[a].indexOf(m[m.length-1]),y=d===f;return u&&y}),o=s.indexOf(l[l.length-1]);return o}var ny;function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},am.apply(this,arguments)}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(s){_i(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WB(s.key),s)}}function owe(e,t,r){return t&&LO(e.prototype,t),r&&LO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cwe(e,t,r){return t=Ov(t),dwe(e,zB()?Reflect.construct(t,r||[],Ov(e).constructor):t.apply(e,r))}function dwe(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uwe(e)}function uwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zB=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ov(e)}function mwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J2(e,t)}function J2(e,t){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},J2(e,t)}function _i(e,t,r){return t=WB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WB(e){var t=fwe(e,"string");return Km(t)=="symbol"?t:t+""}function fwe(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Km(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pi=function(e){function t(r){var s;return lwe(this,t),s=cwe(this,t,[r]),_i(s,"pieRef",null),_i(s,"sectorRefs",[]),_i(s,"id",lu("recharts-pie-")),_i(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Qt(a)&&a()}),_i(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Qt(a)&&a()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return mwe(t,e),owe(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=Wt(this.props,!1),m=Wt(l,!1),f=Wt(o,!1),y=l&&l.offsetRadius||20,x=s.map(function(p,h){var v=(p.startAngle+p.endAngle)/2,b=en(p.cx,p.cy,p.outerRadius+y,v),j=Xr(Xr(Xr(Xr({},u),p),{},{stroke:"none"},m),{},{index:h,textAnchor:t.getTextAnchor(b.x,p.cx)},b),_=Xr(Xr(Xr(Xr({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:h,points:[en(p.cx,p.cy,p.outerRadius,v),b]}),N=c;return ir(c)&&ir(d)?N="value":ir(c)&&(N=d),Ce.createElement(pr,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(h)},o&&t.renderLabelLineItem(o,_,"line"),t.renderLabelItem(l,j,Mn(p,N)))});return Ce.createElement(pr,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var m=a.isActiveIndex(u),f=c&&a.hasActiveIndex()?c:null,y=m?l:f,x=Xr(Xr({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return Ce.createElement(pr,am({ref:function(h){h&&!a.sectorRefs.includes(h)&&a.sectorRefs.push(h)},tabIndex:-1,className:"recharts-pie-sector"},Bd(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Ce.createElement(UB,am({option:y,isActive:m,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,f=m.prevSectors,y=m.prevIsAnimationActive;return Ce.createElement(ol,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var p=x.t,h=[],v=i&&i[0],b=v.startAngle;return i.forEach(function(j,_){var N=f&&f[_],w=_>0?Qa(j,"paddingAngle",0):0;if(N){var k=ts(N.endAngle-N.startAngle,j.endAngle-j.startAngle),S=Xr(Xr({},j),{},{startAngle:b+w,endAngle:b+k(p)+w});h.push(S),b=S.endAngle}else{var E=j.endAngle,T=j.startAngle,A=ts(0,E-T),C=A(p),P=Xr(Xr({},j),{},{startAngle:b+w,endAngle:b+C+w});h.push(P),b=P.endAngle}}),Ce.createElement(pr,null,s.renderSectorsStatically(h))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!zd(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,f=a.outerRadius,y=a.isAnimationActive,x=this.state.isAnimationFinished;if(i||!l||!l.length||!_t(d)||!_t(u)||!_t(m)||!_t(f))return null;var p=or("recharts-pie",o);return Ce.createElement(pr,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){s.pieRef=v}},this.renderSectors(),c&&this.renderLabels(l),hs.renderCallByParent(this.props,null,!1),(!y||x)&&Ol.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(Ce.isValidElement(s))return Ce.cloneElement(s,a);if(Qt(s))return s(a);var l=or("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Ce.createElement(kd,am({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(s,a,i){if(Ce.isValidElement(s))return Ce.cloneElement(s,a);var l=i;if(Qt(s)&&(l=s(a),Ce.isValidElement(l)))return l;var o=or("recharts-pie-label-text",typeof s!="boolean"&&!Qt(s)?s.className:"");return Ce.createElement(Ud,am({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(g.PureComponent);ny=Pi;_i(Pi,"displayName","Pie");_i(Pi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Lc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_i(Pi,"parseDeltaAngle",function(e,t){var r=ca(t-e),s=Math.min(Math.abs(t-e),360);return r*s});_i(Pi,"getRealPieData",function(e){var t=e.data,r=e.children,s=Wt(e,!1),a=ei(r,wo);return t&&t.length?t.map(function(i,l){return Xr(Xr(Xr({payload:i},s),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return Xr(Xr({},s),i.props)}):[]});_i(Pi,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,a=t.width,i=t.height,l=_B(a,i),o=s+da(e.cx,a,a/2),c=r+da(e.cy,i,i/2),d=da(e.innerRadius,l,0),u=da(e.outerRadius,l,l*.8),m=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});_i(Pi,"getComposedData",function(e){var t=e.item,r=e.offset,s=t.type.defaultProps!==void 0?Xr(Xr({},t.type.defaultProps),t.props):t.props,a=ny.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,l=s.startAngle,o=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,m=s.valueKey,f=s.tooltipType,y=Math.abs(s.minAngle),x=ny.parseCoordinateOfPie(s,r),p=ny.parseDeltaAngle(l,o),h=Math.abs(p),v=d;ir(d)&&ir(m)?(nl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):ir(d)&&(nl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=m);var b=a.filter(function(S){return Mn(S,v,0)!==0}).length,j=(h>=360?b:b-1)*c,_=h-b*y-j,N=a.reduce(function(S,E){var T=Mn(E,v,0);return S+(_t(T)?T:0)},0),w;if(N>0){var k;w=a.map(function(S,E){var T=Mn(S,v,0),A=Mn(S,u,E),C=(_t(T)?T:0)/N,P;E?P=k.endAngle+ca(p)*c*(T!==0?1:0):P=l;var O=P+ca(p)*((T!==0?y:0)+C*_),R=(P+O)/2,F=(x.innerRadius+x.outerRadius)/2,Q=[{name:A,value:T,payload:S,dataKey:v,type:f}],W=en(x.cx,x.cy,F,R);return k=Xr(Xr(Xr({percent:C,cornerRadius:i,name:A,tooltipPayload:Q,midAngle:R,middleRadius:F,tooltipPosition:W},S),x),{},{value:Mn(S,v),startAngle:P,endAngle:O,payload:S,paddingAngle:ca(p)*c}),k})}return Xr(Xr({},x),{},{sectors:w,data:a})});var hwe=Math.ceil,pwe=Math.max;function xwe(e,t,r,s){for(var a=-1,i=pwe(hwe((t-e)/(r||1)),0),l=Array(i);i--;)l[s?i:++a]=e,e+=r;return l}var gwe=xwe,ywe=c9,IO=1/0,vwe=17976931348623157e292;function bwe(e){if(!e)return e===0?e:0;if(e=ywe(e),e===IO||e===-IO){var t=e<0?-1:1;return t*vwe}return e===e?e:0}var VB=bwe,jwe=gwe,_we=g1,m_=VB;function wwe(e){return function(t,r,s){return s&&typeof s!="number"&&_we(t,r,s)&&(r=s=void 0),t=m_(t),r===void 0?(r=t,t=0):r=m_(r),s=s===void 0?t<r?1:-1:m_(s),jwe(t,r,s,e)}}var Nwe=wwe,kwe=Nwe,Swe=kwe(),Cwe=Swe;const Rv=$r(Cwe);function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function DO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(s){HB(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function HB(e,t,r){return t=Awe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Awe(e){var t=Ewe(e,"string");return np(t)=="symbol"?t:t+""}function Ewe(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(np(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Twe=["Webkit","Moz","O","ms"],Pwe=function(t,r){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Twe.reduce(function(i,l){return DO(DO({},i),{},HB({},l+s,r))},{});return a[t]=r,a};function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lv.apply(this,arguments)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function f_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(s){Ma(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Owe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,GB(s.key),s)}}function Rwe(e,t,r){return t&&MO(e.prototype,t),r&&MO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lwe(e,t,r){return t=Iv(t),Iwe(e,qB()?Reflect.construct(t,r||[],Iv(e).constructor):t.apply(e,r))}function Iwe(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fwe(e)}function Fwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qB=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iv(e)}function Dwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K2(e,t)}function K2(e,t){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},K2(e,t)}function Ma(e,t,r){return t=GB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GB(e){var t=$we(e,"string");return Xm(t)=="symbol"?t:t+""}function $we(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mwe=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,l=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=V0().domain(Rv(0,c)).range([i,i+l-o]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},BO=function(t){return t.changedTouches&&!!t.changedTouches.length},Ym=function(e){function t(r){var s;return Owe(this,t),s=Lwe(this,t,[r]),Ma(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Ma(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Ma(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),s.detachDragEndListener()}),Ma(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Ma(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Ma(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Ma(s,"handleSlideDragStart",function(a){var i=BO(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return Dwe(t,e),Rwe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,m=Math.min(a,i),f=Math.max(a,i),y=t.getIndexInRange(l,m),x=t.getIndexInRange(l,f);return{startIndex:y-y%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=Mn(i[s],o,s);return Qt(l)?l(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,f=c.startIndex,y=c.endIndex,x=c.onChange,p=s.pageX-i;p>0?p=Math.min(p,d+u-m-o,d+u-m-l):p<0&&(p=Math.max(p,d-l,d-o));var h=this.getIndex({startX:l+p,endX:o+p});(h.startIndex!==f||h.endIndex!==y)&&x&&x(h),this.setState({startX:l+p,endX:o+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=BO(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,m=u.x,f=u.width,y=u.travellerWidth,x=u.onChange,p=u.gap,h=u.data,v={startX:this.state.startX,endX:this.state.endX},b=s.pageX-i;b>0?b=Math.min(b,m+f-y-d):b<0&&(b=Math.max(b,m-d)),v[l]=d+b;var j=this.getIndex(v),_=j.startIndex,N=j.endIndex,w=function(){var S=h.length-1;return l==="startX"&&(o>c?_%p===0:N%p===0)||o<c&&N===S||l==="endX"&&(o>c?N%p===0:_%p===0)||o>c&&N===S};this.setState(Ma(Ma({},l,d+b),"brushMoveStartX",s.pageX),function(){x&&w()&&x(j)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],m=o.indexOf(u);if(m!==-1){var f=m+s;if(!(f===-1||f>=o.length)){var y=o[f];a==="startX"&&y>=d||a==="endX"&&y<=c||this.setState(Ma({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.fill,d=s.stroke;return Ce.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.data,d=s.children,u=s.padding,m=g.Children.only(d);return m?Ce.cloneElement(m,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,f=c.traveller,y=c.ariaLabel,x=c.data,p=c.startIndex,h=c.endIndex,v=Math.max(s,this.props.x),b=f_(f_({},Wt(this.props,!1)),{},{x:v,y:d,width:u,height:m}),j=y||"Min value: ".concat((i=x[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=x[h])===null||l===void 0?void 0:l.name);return Ce.createElement(pr,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,b))}},{key:"renderSlide",value:function(s,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,m=Math.max(Math.abs(a-s)-d,0);return Ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,l=s.y,o=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,m=u.startX,f=u.endX,y=5,x={pointerEvents:"none",fill:d};return Ce.createElement(pr,{className:"recharts-brush-texts"},Ce.createElement(Ud,Lv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,f)-y,y:l+o/2},x),this.getTextOfTick(a)),Ce.createElement(Ud,Lv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,f)+c+y,y:l+o/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,l=s.children,o=s.x,c=s.y,d=s.width,u=s.height,m=s.alwaysShowText,f=this.state,y=f.startX,x=f.endX,p=f.isTextActive,h=f.isSlideMoving,v=f.isTravellerMoving,b=f.isTravellerFocused;if(!a||!a.length||!_t(o)||!_t(c)||!_t(d)||!_t(u)||d<=0||u<=0)return null;var j=or("recharts-brush",i),_=Ce.Children.count(l)===1,N=Pwe("userSelect","none");return Ce.createElement(pr,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(y,x),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(x,"endX"),(p||h||v||b||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,l=s.width,o=s.height,c=s.stroke,d=Math.floor(i+o/2)-1;return Ce.createElement(Ce.Fragment,null,Ce.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),Ce.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),Ce.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return Ce.isValidElement(s)?i=Ce.cloneElement(s,a):Qt(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,l=s.width,o=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,m=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return f_({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?Mwe({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var f=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);s[c]>a?o=c:l=c}return a>=s[o]?o:l}}])}(g.PureComponent);Ma(Ym,"displayName","Brush");Ma(Ym,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Bwe=bC;function Uwe(e,t){var r;return Bwe(e,function(s,a,i){return r=t(s,a,i),!r}),!!r}var zwe=Uwe,Wwe=FM,Vwe=Hl,Hwe=zwe,qwe=Ia,Gwe=g1;function Jwe(e,t,r){var s=qwe(e)?Wwe:Hwe;return r&&Gwe(e,t,r)&&(t=void 0),s(e,Vwe(t))}var Kwe=Jwe;const Xwe=$r(Kwe);var Rl=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},UO=s9;function Ywe(e,t,r){t=="__proto__"&&UO?UO(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Zwe=Ywe,Qwe=Zwe,eNe=r9,tNe=Hl;function rNe(e,t){var r={};return t=tNe(t),eNe(e,function(s,a,i){Qwe(r,a,t(s,a,i))}),r}var nNe=rNe;const sNe=$r(nNe);function aNe(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var iNe=aNe,lNe=bC;function oNe(e,t){var r=!0;return lNe(e,function(s,a,i){return r=!!t(s,a,i),r}),r}var cNe=oNe,dNe=iNe,uNe=cNe,mNe=Hl,fNe=Ia,hNe=g1;function pNe(e,t,r){var s=fNe(e)?dNe:uNe;return r&&hNe(e,t,r)&&(t=void 0),s(e,mNe(t))}var xNe=pNe;const JB=$r(xNe);var gNe=["x","y"];function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},X2.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function u0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(s){yNe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yNe(e,t,r){return t=vNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vNe(e){var t=bNe(e,"string");return sp(t)=="symbol"?t:t+""}function bNe(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(sp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jNe(e,t){if(e==null)return{};var r=_Ne(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _Ne(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function wNe(e,t){var r=e.x,s=e.y,a=jNe(e,gNe),i="".concat(r),l=parseInt(i,10),o="".concat(s),c=parseInt(o,10),d="".concat(t.height||a.height),u=parseInt(d,10),m="".concat(t.width||a.width),f=parseInt(m,10);return u0(u0(u0(u0(u0({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function WO(e){return Ce.createElement(UB,X2({shapeType:"rectangle",propTransformer:wNe,activeClassName:"recharts-active-bar"},e))}var NNe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=_t(s)||Kse(s);return i?t(s,a):(i||Vd(),r)}},kNe=["value","background"],KB;function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function SNe(e,t){if(e==null)return{};var r=CNe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function CNe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fv.apply(this,arguments)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(s){ic(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ANe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,YB(s.key),s)}}function ENe(e,t,r){return t&&HO(e.prototype,t),r&&HO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TNe(e,t,r){return t=Dv(t),PNe(e,XB()?Reflect.construct(t,r||[],Dv(e).constructor):t.apply(e,r))}function PNe(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ONe(e)}function ONe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XB=function(){return!!e})()}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dv(e)}function RNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y2(e,t)}function Y2(e,t){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Y2(e,t)}function ic(e,t,r){return t=YB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YB(e){var t=LNe(e,"string");return Zm(t)=="symbol"?t:t+""}function LNe(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dl=function(e){function t(){var r;ANe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=TNe(this,t,[].concat(a)),ic(r,"state",{isAnimationFinished:!1}),ic(r,"id",lu("recharts-bar-")),ic(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),ic(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return RNe(t,e),ENe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Wt(this.props,!1);return s&&s.map(function(m,f){var y=f===c,x=y?d:l,p=Vn(Vn(Vn({},u),m),{},{isActive:y,option:x,index:f,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Ce.createElement(pr,Fv({className:"recharts-bar-rectangle"},Bd(a.props,m,f),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(f)}),Ce.createElement(WO,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,f=this.state.prevData;return Ce.createElement(ol,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,p=i.map(function(h,v){var b=f&&f[v];if(b){var j=ts(b.x,h.x),_=ts(b.y,h.y),N=ts(b.width,h.width),w=ts(b.height,h.height);return Vn(Vn({},h),{},{x:j(x),y:_(x),width:N(x),height:w(x)})}if(l==="horizontal"){var k=ts(0,h.height),S=k(x);return Vn(Vn({},h),{},{y:h.y+h.height-S,height:S})}var E=ts(0,h.width),T=E(x);return Vn(Vn({},h),{},{width:T})});return Ce.createElement(pr,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!zd(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=Wt(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,f=SNe(d,kNe);if(!m)return null;var y=Vn(Vn(Vn(Vn(Vn({},f),{},{fill:"#eee"},m),c),Bd(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return Ce.createElement(WO,Fv({key:"background-bar-".concat(u),option:s.props.background,isActive:u===o},y))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ei(u,Jp);if(!m)return null;var f=d==="vertical"?l[0].height/2:l[0].width/2,y=function(h,v){var b=Array.isArray(h.value)?h.value[1]:h.value;return{x:h.x,y:h.y,value:b,errorVal:Mn(h,v)}},x={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Ce.createElement(pr,x,m.map(function(p){return Ce.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:f,dataPointFormatter:y})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,l=s.className,o=s.xAxis,c=s.yAxis,d=s.left,u=s.top,m=s.width,f=s.height,y=s.isAnimationActive,x=s.background,p=s.id;if(a||!i||!i.length)return null;var h=this.state.isAnimationFinished,v=or("recharts-bar",l),b=o&&o.allowDataOverflow,j=c&&c.allowDataOverflow,_=b||j,N=ir(p)?this.id:p;return Ce.createElement(pr,{className:v},b||j?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(N)},Ce.createElement("rect",{x:b?d:d-m/2,y:j?u:u-f/2,width:b?m:m*2,height:j?f:f*2}))):null,Ce.createElement(pr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(N,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,N),(!y||h)&&Ol.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(g.PureComponent);KB=Dl;ic(Dl,"displayName","Bar");ic(Dl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ic(Dl,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,f=e.offset,y=fve(s,r);if(!y)return null;var x=t.layout,p=r.type.defaultProps,h=p!==void 0?Vn(Vn({},p),r.props):r.props,v=h.dataKey,b=h.children,j=h.minPointSize,_=x==="horizontal"?l:i,N=d?_.scale.domain():null,w=bve({numericAxis:_}),k=ei(b,wo),S=m.map(function(E,T){var A,C,P,O,R,F;d?A=hve(d[u+T],N):(A=Mn(E,v),Array.isArray(A)||(A=[w,A]));var Q=NNe(j,KB.defaultProps.minPointSize)(A[1],T);if(x==="horizontal"){var W,L=[l.scale(A[0]),l.scale(A[1])],I=L[0],K=L[1];C=LP({axis:i,ticks:o,bandSize:a,offset:y.offset,entry:E,index:T}),P=(W=K??I)!==null&&W!==void 0?W:void 0,O=y.size;var D=I-K;if(R=Number.isNaN(D)?0:D,F={x:C,y:l.y,width:O,height:l.height},Math.abs(Q)>0&&Math.abs(R)<Math.abs(Q)){var Y=ca(R||Q)*(Math.abs(Q)-Math.abs(R));P-=Y,R+=Y}}else{var re=[i.scale(A[0]),i.scale(A[1])],B=re[0],G=re[1];if(C=B,P=LP({axis:l,ticks:c,bandSize:a,offset:y.offset,entry:E,index:T}),O=G-B,R=y.size,F={x:i.x,y:P,width:i.width,height:R},Math.abs(Q)>0&&Math.abs(O)<Math.abs(Q)){var ce=ca(O||Q)*(Math.abs(Q)-Math.abs(O));O+=ce}}return Vn(Vn(Vn({},E),{},{x:C,y:P,width:O,height:R,value:d?A:A[1],payload:E,background:F},k&&k[T]&&k[T].props),{},{tooltipPayload:[bB(r,E)],tooltipPosition:{x:C+O/2,y:P+R/2}})});return Vn({data:S,layout:x},f)});function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function INe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ZB(s.key),s)}}function FNe(e,t,r){return t&&qO(e.prototype,t),r&&qO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(s){L1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function L1(e,t,r){return t=ZB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=DNe(e,"string");return ap(t)=="symbol"?t:t+""}function DNe(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ap(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XC=function(t,r,s,a,i){var l=t.width,o=t.height,c=t.layout,d=t.children,u=Object.keys(r),m={left:s.left,leftMirror:s.left,right:l-s.right,rightMirror:l-s.right,top:s.top,topMirror:s.top,bottom:o-s.bottom,bottomMirror:o-s.bottom},f=!!Ua(d,Dl);return u.reduce(function(y,x){var p=r[x],h=p.orientation,v=p.domain,b=p.padding,j=b===void 0?{}:b,_=p.mirror,N=p.reversed,w="".concat(h).concat(_?"Mirror":""),k,S,E,T,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var C=v[1]-v[0],P=1/0,O=p.categoricalDomain.sort(Zse);if(O.forEach(function(re,B){B>0&&(P=Math.min((re||0)-(O[B-1]||0),P))}),Number.isFinite(P)){var R=P/C,F=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(k=R*F/2),p.padding==="no-gap"){var Q=da(t.barCategoryGap,R*F),W=R*F/2;k=W-Q-(W-Q)/F*Q}}}a==="xAxis"?S=[s.left+(j.left||0)+(k||0),s.left+s.width-(j.right||0)-(k||0)]:a==="yAxis"?S=c==="horizontal"?[s.top+s.height-(j.bottom||0),s.top+(j.top||0)]:[s.top+(j.top||0)+(k||0),s.top+s.height-(j.bottom||0)-(k||0)]:S=p.range,N&&(S=[S[1],S[0]]);var L=xB(p,i,f),I=L.scale,K=L.realScaleType;I.domain(v).range(S),gB(I);var D=yB(I,Gi(Gi({},p),{},{realScaleType:K}));a==="xAxis"?(A=h==="top"&&!_||h==="bottom"&&_,E=s.left,T=m[w]-A*p.height):a==="yAxis"&&(A=h==="left"&&!_||h==="right"&&_,E=m[w]-A*p.width,T=s.top);var Y=Gi(Gi(Gi({},p),D),{},{realScaleType:K,x:E,y:T,scale:I,width:a==="xAxis"?s.width:p.width,height:a==="yAxis"?s.height:p.height});return Y.bandSize=jv(Y,D),!p.hide&&a==="xAxis"?m[w]+=(A?-1:1)*Y.height:p.hide||(m[w]+=(A?-1:1)*Y.width),Gi(Gi({},y),{},L1({},x,Y))},{})},QB=function(t,r){var s=t.x,a=t.y,i=r.x,l=r.y;return{x:Math.min(s,i),y:Math.min(a,l),width:Math.abs(i-s),height:Math.abs(l-a)}},$Ne=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return QB({x:r,y:s},{x:a,y:i})},eU=function(){function e(t){INe(this,e),this.scale=t}return FNe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();L1(eU,"EPS",1e-4);var YC=function(t){var r=Object.keys(t).reduce(function(s,a){return Gi(Gi({},s),{},L1({},a,eU.create(t[a])))},{});return Gi(Gi({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return sNe(a,function(c,d){return r[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return JB(a,function(i,l){return r[l].isInRange(i)})}})};function MNe(e){return(e%180+180)%180}var BNe=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=MNe(a),l=i*Math.PI/180,o=Math.atan(s/r),c=l>o&&l<Math.PI-o?s/Math.sin(l):r/Math.cos(l);return Math.abs(c)},UNe=Hl,zNe=Wp,WNe=p1;function VNe(e){return function(t,r,s){var a=Object(t);if(!zNe(t)){var i=UNe(r);t=WNe(t),r=function(o){return i(a[o],o,a)}}var l=e(t,r,s);return l>-1?a[i?t[l]:l]:void 0}}var HNe=VNe,qNe=VB;function GNe(e){var t=qNe(e),r=t%1;return t===t?r?t-r:t:0}var JNe=GNe,KNe=XM,XNe=Hl,YNe=JNe,ZNe=Math.max;function QNe(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:YNe(r);return a<0&&(a=ZNe(s+a,0)),KNe(e,XNe(t),a)}var e2e=QNe,t2e=HNe,r2e=e2e,n2e=t2e(r2e),s2e=n2e;const a2e=$r(s2e);var i2e=tse(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),ZC=g.createContext(void 0),QC=g.createContext(void 0),tU=g.createContext(void 0),rU=g.createContext({}),nU=g.createContext(void 0),sU=g.createContext(0),aU=g.createContext(0),JO=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,l=t.clipPathId,o=t.children,c=t.width,d=t.height,u=i2e(i);return Ce.createElement(ZC.Provider,{value:s},Ce.createElement(QC.Provider,{value:a},Ce.createElement(rU.Provider,{value:i},Ce.createElement(tU.Provider,{value:u},Ce.createElement(nU.Provider,{value:l},Ce.createElement(sU.Provider,{value:d},Ce.createElement(aU.Provider,{value:c},o)))))))},l2e=function(){return g.useContext(nU)},iU=function(t){var r=g.useContext(ZC);r==null&&Vd();var s=r[t];return s==null&&Vd(),s},o2e=function(){var t=g.useContext(ZC);return tc(t)},c2e=function(){var t=g.useContext(QC),r=a2e(t,function(s){return JB(s.domain,Number.isFinite)});return r||tc(t)},lU=function(t){var r=g.useContext(QC);r==null&&Vd();var s=r[t];return s==null&&Vd(),s},d2e=function(){var t=g.useContext(tU);return t},u2e=function(){return g.useContext(rU)},e4=function(){return g.useContext(aU)},t4=function(){return g.useContext(sU)};function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function m2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f2e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cU(s.key),s)}}function h2e(e,t,r){return t&&f2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function p2e(e,t,r){return t=$v(t),x2e(e,oU()?Reflect.construct(t,r||[],$v(e).constructor):t.apply(e,r))}function x2e(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g2e(e)}function g2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oU=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$v(e)}function y2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z2(e,t)}function Z2(e,t){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Z2(e,t)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function XO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(s){r4(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function r4(e,t,r){return t=cU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cU(e){var t=v2e(e,"string");return Qm(t)=="symbol"?t:t+""}function v2e(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Qm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function b2e(e,t){return N2e(e)||w2e(e,t)||_2e(e,t)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _2e(e,t){if(e){if(typeof e=="string")return YO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YO(e,t)}}function YO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function w2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function N2e(e){if(Array.isArray(e))return e}function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Q2.apply(this,arguments)}var k2e=function(t,r){var s;return Ce.isValidElement(t)?s=Ce.cloneElement(t,r):Qt(t)?s=t(r):s=Ce.createElement("line",Q2({},r,{className:"recharts-reference-line-line"})),s},S2e=function(t,r,s,a,i,l,o,c,d){var u=i.x,m=i.y,f=i.width,y=i.height;if(s){var x=d.y,p=t.y.apply(x,{position:l});if(Rl(d,"discard")&&!t.y.isInRange(p))return null;var h=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?h.reverse():h}if(r){var v=d.x,b=t.x.apply(v,{position:l});if(Rl(d,"discard")&&!t.x.isInRange(b))return null;var j=[{x:b,y:m+y},{x:b,y:m}];return o==="top"?j.reverse():j}if(a){var _=d.segment,N=_.map(function(w){return t.apply(w,{position:l})});return Rl(d,"discard")&&Xwe(N,function(w){return!t.isInRange(w)})?null:N}return null};function C2e(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,c=e.alwaysShow,d=l2e(),u=iU(a),m=lU(i),f=d2e();if(!d||!f)return null;nl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=YC({x:u.scale,y:m.scale}),x=ss(t),p=ss(r),h=s&&s.length===2,v=S2e(y,x,p,h,f,e.position,u.orientation,m.orientation,e);if(!v)return null;var b=b2e(v,2),j=b[0],_=j.x,N=j.y,w=b[1],k=w.x,S=w.y,E=Rl(e,"hidden")?"url(#".concat(d,")"):void 0,T=XO(XO({clipPath:E},Wt(e,!0)),{},{x1:_,y1:N,x2:k,y2:S});return Ce.createElement(pr,{className:or("recharts-reference-line",o)},k2e(l,T),hs.renderCallByParent(e,$Ne({x1:_,y1:N,x2:k,y2:S})))}var n4=function(e){function t(){return m2e(this,t),p2e(this,t,arguments)}return y2e(t,e),h2e(t,[{key:"render",value:function(){return Ce.createElement(C2e,this.props)}}])}(Ce.Component);r4(n4,"displayName","ReferenceLine");r4(n4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ek.apply(this,arguments)}function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function QO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(s){I1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function A2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E2e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uU(s.key),s)}}function T2e(e,t,r){return t&&E2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P2e(e,t,r){return t=Mv(t),O2e(e,dU()?Reflect.construct(t,r||[],Mv(e).constructor):t.apply(e,r))}function O2e(e,t){if(t&&(ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2e(e)}function R2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dU=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mv(e)}function L2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},tk(e,t)}function I1(e,t,r){return t=uU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uU(e){var t=I2e(e,"string");return ef(t)=="symbol"?t:t+""}function I2e(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ef(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var F2e=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,l=YC({x:a.scale,y:i.scale}),o=l.apply({x:r,y:s},{bandAware:!0});return Rl(t,"discard")&&!l.isInRange(o)?null:o},F1=function(e){function t(){return A2e(this,t),P2e(this,t,arguments)}return L2e(t,e),T2e(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,l=s.r,o=s.alwaysShow,c=s.clipPathId,d=ss(a),u=ss(i);if(nl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=F2e(this.props);if(!m)return null;var f=m.x,y=m.y,x=this.props,p=x.shape,h=x.className,v=Rl(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=QO(QO({clipPath:v},Wt(this.props,!0)),{},{cx:f,cy:y});return Ce.createElement(pr,{className:or("recharts-reference-dot",h)},t.renderDot(p,b),hs.renderCallByParent(this.props,{x:f-l,y:y-l,width:2*l,height:2*l}))}}])}(Ce.Component);I1(F1,"displayName","ReferenceDot");I1(F1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});I1(F1,"renderDot",function(e,t){var r;return Ce.isValidElement(e)?r=Ce.cloneElement(e,t):Qt(e)?r=e(t):r=Ce.createElement(Kp,ek({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},rk.apply(this,arguments)}function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(s){D1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $2e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fU(s.key),s)}}function M2e(e,t,r){return t&&$2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B2e(e,t,r){return t=Bv(t),U2e(e,mU()?Reflect.construct(t,r||[],Bv(e).constructor):t.apply(e,r))}function U2e(e,t){if(t&&(tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z2e(e)}function z2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mU=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bv(e)}function W2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},nk(e,t)}function D1(e,t,r){return t=fU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fU(e){var t=V2e(e,"string");return tf(t)=="symbol"?t:t+""}function V2e(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(tf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var H2e=function(t,r,s,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var f=YC({x:u.scale,y:m.scale}),y={x:t?f.x.apply(l,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:r?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Rl(i,"discard")&&(!f.isInRange(y)||!f.isInRange(x))?null:QB(y,x)},$1=function(e){function t(){return D2e(this,t),B2e(this,t,arguments)}return W2e(t,e),M2e(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,l=s.y1,o=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;nl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=ss(a),f=ss(i),y=ss(l),x=ss(o),p=this.props.shape;if(!m&&!f&&!y&&!x&&!p)return null;var h=H2e(m,f,y,x,this.props);if(!h&&!p)return null;var v=Rl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Ce.createElement(pr,{className:or("recharts-reference-area",c)},t.renderRect(p,tR(tR({clipPath:v},Wt(this.props,!0)),h)),hs.renderCallByParent(this.props,h))}}])}(Ce.Component);D1($1,"displayName","ReferenceArea");D1($1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});D1($1,"renderRect",function(e,t){var r;return Ce.isValidElement(e)?r=Ce.cloneElement(e,t):Qt(e)?r=e(t):r=Ce.createElement(KC,rk({},t,{className:"recharts-reference-area-rect"})),r});function hU(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function q2e(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return BNe(s,r)}function G2e(e,t,r){var s=r==="width",a=e.x,i=e.y,l=e.width,o=e.height;return t===1?{start:s?a:i,end:s?a+l:i+o}:{start:s?a+l:i+o,end:s?a:i}}function Uv(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function J2e(e,t){return hU(e,t+1)}function K2e(e,t,r,s,a){for(var i=(s||[]).slice(),l=t.start,o=t.end,c=0,d=1,u=l,m=function(){var x=s==null?void 0:s[c];if(x===void 0)return{v:hU(s,d)};var p=c,h,v=function(){return h===void 0&&(h=r(x,p)),h},b=x.coordinate,j=c===0||Uv(e,b,v,u,o);j||(c=0,u=l,d+=1),j&&(u=b+e*(v()/2+a),c+=d)},f;d<=i.length;)if(f=m(),f)return f.v;return[]}function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function rR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(r),!0).forEach(function(s){X2e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function X2e(e,t,r){return t=Y2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y2e(e){var t=Z2e(e,"string");return ip(t)=="symbol"?t:t+""}function Z2e(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ip(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q2e(e,t,r,s,a){for(var i=(s||[]).slice(),l=i.length,o=t.start,c=t.end,d=function(f){var y=i[f],x,p=function(){return x===void 0&&(x=r(y,f)),x};if(f===l-1){var h=e*(y.coordinate+e*p()/2-c);i[f]=y=Us(Us({},y),{},{tickCoord:h>0?y.coordinate-h*e:y.coordinate})}else i[f]=y=Us(Us({},y),{},{tickCoord:y.coordinate});var v=Uv(e,y.tickCoord,p,o,c);v&&(c=y.tickCoord-e*(p()/2+a),i[f]=Us(Us({},y),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function eke(e,t,r,s,a,i){var l=(s||[]).slice(),o=l.length,c=t.start,d=t.end;if(i){var u=s[o-1],m=r(u,o-1),f=e*(u.coordinate+e*m/2-d);l[o-1]=u=Us(Us({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var y=Uv(e,u.tickCoord,function(){return m},c,d);y&&(d=u.tickCoord-e*(m/2+a),l[o-1]=Us(Us({},u),{},{isShow:!0}))}for(var x=i?o-1:o,p=function(b){var j=l[b],_,N=function(){return _===void 0&&(_=r(j,b)),_};if(b===0){var w=e*(j.coordinate-e*N()/2-c);l[b]=j=Us(Us({},j),{},{tickCoord:w<0?j.coordinate-w*e:j.coordinate})}else l[b]=j=Us(Us({},j),{},{tickCoord:j.coordinate});var k=Uv(e,j.tickCoord,N,c,d);k&&(c=j.tickCoord+e*(N()/2+a),l[b]=Us(Us({},j),{},{isShow:!0}))},h=0;h<x;h++)p(h);return l}function s4(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,m=e.angle;if(!a||!a.length||!s)return[];if(_t(c)||Lc.isSsr)return J2e(a,typeof c=="number"&&_t(c)?c:0);var f=[],y=o==="top"||o==="bottom"?"width":"height",x=u&&y==="width"?W0(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(j,_){var N=Qt(d)?d(j.value,_):j.value;return y==="width"?q2e(W0(N,{fontSize:t,letterSpacing:r}),x,m):W0(N,{fontSize:t,letterSpacing:r})[y]},h=a.length>=2?ca(a[1].coordinate-a[0].coordinate):1,v=G2e(i,h,y);return c==="equidistantPreserveStart"?K2e(h,v,p,a,l):(c==="preserveStart"||c==="preserveStartEnd"?f=eke(h,v,p,a,l,c==="preserveStartEnd"):f=Q2e(h,v,p,a,l),f.filter(function(b){return b.isShow}))}var tke=["viewBox"],rke=["viewBox"],nke=["ticks"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},im.apply(this,arguments)}function nR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nR(Object(r),!0).forEach(function(s){a4(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function h_(e,t){if(e==null)return{};var r=ske(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ske(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function ake(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xU(s.key),s)}}function ike(e,t,r){return t&&sR(e.prototype,t),r&&sR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lke(e,t,r){return t=zv(t),oke(e,pU()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function oke(e,t){if(t&&(rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cke(e)}function cke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pU=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zv(e)}function dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},sk(e,t)}function a4(e,t,r){return t=xU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=uke(e,"string");return rf(t)=="symbol"?t:t+""}function uke(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(rf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $f=function(e){function t(r){var s;return ake(this,t),s=lke(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return dke(t,e),ike(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,l=h_(s,tke),o=this.props,c=o.viewBox,d=h_(o,rke);return!ym(i,c)||!ym(l,d)||!ym(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,f=a.tickMargin,y,x,p,h,v,b,j=m?-1:1,_=s.tickSize||u,N=_t(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":y=x=s.coordinate,h=l+ +!m*c,p=h-j*_,b=p-j*f,v=N;break;case"left":p=h=s.coordinate,x=i+ +!m*o,y=x-j*_,v=y-j*f,b=N;break;case"right":p=h=s.coordinate,x=i+ +m*o,y=x+j*_,v=y+j*f,b=N;break;default:y=x=s.coordinate,h=l+ +m*c,p=h+j*_,b=p+j*f,v=N;break}return{line:{x1:y,y1:p,x2:x,y2:h},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,m=Zn(Zn(Zn({},Wt(this.props,!1)),Wt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);m=Zn(Zn({},m),{},{x1:a,y1:i+f*o,x2:a+l,y2:i+f*o})}else{var y=+(c==="left"&&!d||c==="right"&&d);m=Zn(Zn({},m),{},{x1:a+y*l,y1:i,x2:a+y*l,y2:i+o})}return Ce.createElement("line",im({},m,{className:or("recharts-cartesian-axis-line",Qa(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,m=o.tickFormatter,f=o.unit,y=s4(Zn(Zn({},this.props),{},{ticks:s}),a,i),x=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),h=Wt(this.props,!1),v=Wt(u,!1),b=Zn(Zn({},h),{},{fill:"none"},Wt(c,!1)),j=y.map(function(_,N){var w=l.getTickLineCoord(_),k=w.line,S=w.tick,E=Zn(Zn(Zn(Zn({textAnchor:x,verticalAnchor:p},h),{},{stroke:"none",fill:d},v),S),{},{index:N,payload:_,visibleTicksCount:y.length,tickFormatter:m});return Ce.createElement(pr,im({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Bd(l.props,_,N)),c&&Ce.createElement("line",im({},b,k,{className:or("recharts-cartesian-axis-tick-line",Qa(c,"className"))})),u&&t.renderTickItem(u,E,"".concat(Qt(m)?m(_.value,N):_.value).concat(f||"")))});return Ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,f=m.ticks,y=h_(m,nke),x=f;return Qt(c)&&(x=f&&f.length>0?c(this.props):c(y)),l<=0||o<=0||!x||!x.length?null:Ce.createElement(pr,{className:or("recharts-cartesian-axis",d),ref:function(h){s.layerReference=h}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),hs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var l,o=or(a.className,"recharts-cartesian-axis-tick-value");return Ce.isValidElement(s)?l=Ce.cloneElement(s,Zn(Zn({},a),{},{className:o})):Qt(s)?l=s(Zn(Zn({},a),{},{className:o})):l=Ce.createElement(Ud,im({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(g.Component);a4($f,"displayName","CartesianAxis");a4($f,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mke=["x1","y1","x2","y2","key"],fke=["offset"];function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function aR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(r),!0).forEach(function(s){hke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hke(e,t,r){return t=pke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pke(e){var t=xke(e,"string");return Hd(t)=="symbol"?t:t+""}function xke(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xd.apply(this,arguments)}function iR(e,t){if(e==null)return{};var r=gke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function gke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var yke=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,l=t.width,o=t.height,c=t.ry;return Ce.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function gU(e,t){var r;if(Ce.isValidElement(e))r=Ce.cloneElement(e,t);else if(Qt(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,l=t.y2,o=t.key,c=iR(t,mke),d=Wt(c,!1);d.offset;var u=iR(d,fke);r=Ce.createElement("line",xd({},u,{x1:s,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function vke(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=Hs(Hs({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return gU(a,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function bke(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=Hs(Hs({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return gU(a,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function jke(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=o.map(function(f){return Math.round(f+a-a)}).sort(function(f,y){return f-y});a!==u[0]&&u.unshift(0);var m=u.map(function(f,y){var x=!u[y+1],p=x?a+l-f:u[y+1]-f;if(p<=0)return null;var h=y%t.length;return Ce.createElement("rect",{key:"react-".concat(y),y:f,x:s,height:p,width:i,stroke:"none",fill:t[h],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function _ke(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,l=e.y,o=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+i-i)}).sort(function(f,y){return f-y});i!==u[0]&&u.unshift(0);var m=u.map(function(f,y){var x=!u[y+1],p=x?i+o-f:u[y+1]-f;if(p<=0)return null;var h=y%s.length;return Ce.createElement("rect",{key:"react-".concat(y),x:f,y:l,width:p,height:c,stroke:"none",fill:s[h],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var wke=function(t,r){var s=t.xAxis,a=t.width,i=t.height,l=t.offset;return pB(s4(Hs(Hs(Hs({},$f.defaultProps),s),{},{ticks:io(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,r)},Nke=function(t,r){var s=t.yAxis,a=t.width,i=t.height,l=t.offset;return pB(s4(Hs(Hs(Hs({},$f.defaultProps),s),{},{ticks:io(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,r)},ku={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function lo(e){var t,r,s,a,i,l,o=e4(),c=t4(),d=u2e(),u=Hs(Hs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ku.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:ku.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:ku.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:ku.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:ku.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:ku.verticalFill,x:_t(e.x)?e.x:d.left,y:_t(e.y)?e.y:d.top,width:_t(e.width)?e.width:d.width,height:_t(e.height)?e.height:d.height}),m=u.x,f=u.y,y=u.width,x=u.height,p=u.syncWithTicks,h=u.horizontalValues,v=u.verticalValues,b=o2e(),j=c2e();if(!_t(y)||y<=0||!_t(x)||x<=0||!_t(m)||m!==+m||!_t(f)||f!==+f)return null;var _=u.verticalCoordinatesGenerator||wke,N=u.horizontalCoordinatesGenerator||Nke,w=u.horizontalPoints,k=u.verticalPoints;if((!w||!w.length)&&Qt(N)){var S=h&&h.length,E=N({yAxis:j?Hs(Hs({},j),{},{ticks:S?h:j.ticks}):void 0,width:o,height:c,offset:d},S?!0:p);nl(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Hd(E),"]")),Array.isArray(E)&&(w=E)}if((!k||!k.length)&&Qt(_)){var T=v&&v.length,A=_({xAxis:b?Hs(Hs({},b),{},{ticks:T?v:b.ticks}):void 0,width:o,height:c,offset:d},T?!0:p);nl(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Hd(A),"]")),Array.isArray(A)&&(k=A)}return Ce.createElement("g",{className:"recharts-cartesian-grid"},Ce.createElement(yke,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Ce.createElement(vke,xd({},u,{offset:d,horizontalPoints:w,xAxis:b,yAxis:j})),Ce.createElement(bke,xd({},u,{offset:d,verticalPoints:k,xAxis:b,yAxis:j})),Ce.createElement(jke,xd({},u,{horizontalPoints:w})),Ce.createElement(_ke,xd({},u,{verticalPoints:k})))}lo.displayName="CartesianGrid";var kke=["type","layout","connectNulls","ref"],Ske=["key"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function lR(e,t){if(e==null)return{};var r=Cke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Cke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},K0.apply(this,arguments)}function oR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(r),!0).forEach(function(s){Ji(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Su(e){return Pke(e)||Tke(e)||Eke(e)||Ake()}function Ake(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eke(e,t){if(e){if(typeof e=="string")return ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ak(e,t)}}function Tke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pke(e){if(Array.isArray(e))return ak(e)}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Oke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,vU(s.key),s)}}function Rke(e,t,r){return t&&cR(e.prototype,t),r&&cR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lke(e,t,r){return t=Wv(t),Ike(e,yU()?Reflect.construct(t,r||[],Wv(e).constructor):t.apply(e,r))}function Ike(e,t){if(t&&(nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fke(e)}function Fke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yU=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wv(e)}function Dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ik(e,t)}function ik(e,t){return ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ik(e,t)}function Ji(e,t,r){return t=vU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vU(e){var t=$ke(e,"string");return nf(t)=="symbol"?t:t+""}function $ke(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(nf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qd=function(e){function t(){var r;Oke(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Lke(this,t,[].concat(a)),Ji(r,"state",{isAnimationFinished:!0,totalLength:0}),Ji(r,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Ji(r,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(v,b){return v+b});if(!d)return r.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),m=l%d,f=o-l,y=[],x=0,p=0;x<c.length;p+=c[x],++x)if(p+c[x]>m){y=[].concat(Su(c.slice(0,x)),[m-p]);break}var h=y.length%2===0?[0,f]:[f];return[].concat(Su(t.repeat(c,u)),Su(y),h).map(function(v){return"".concat(v,"px")}).join(", ")}),Ji(r,"id",lu("recharts-line-")),Ji(r,"pathRef",function(l){r.mainCurve=l}),Ji(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ji(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Dke(t,e),Rke(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ei(u,Jp);if(!m)return null;var f=function(p,h){return{x:p.x,y:p.y,value:p.value,errorVal:Mn(p.payload,h)}},y={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Ce.createElement(pr,y,m.map(function(x){return Ce.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,m=Wt(this.props,!1),f=Wt(c,!0),y=d.map(function(p,h){var v=Da(Da(Da({key:"dot-".concat(h),r:3},m),f),{},{index:h,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return t.renderDotItem(c,v)}),x={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Ce.createElement(pr,K0({className:"recharts-line-dots",key:"dots"},x),y)}},{key:"renderCurveStatically",value:function(s,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var m=lR(o,kke),f=Da(Da(Da({},Wt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},l),{},{type:c,layout:d,connectNulls:u});return Ce.createElement(kd,K0({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,f=l.animationEasing,y=l.animationId,x=l.animateNewValues,p=l.width,h=l.height,v=this.state,b=v.prevPoints,j=v.totalLength;return Ce.createElement(ol,{begin:u,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var N=_.t;if(b){var w=b.length/o.length,k=o.map(function(C,P){var O=Math.floor(P*w);if(b[O]){var R=b[O],F=ts(R.x,C.x),Q=ts(R.y,C.y);return Da(Da({},C),{},{x:F(N),y:Q(N)})}if(x){var W=ts(p*2,C.x),L=ts(h/2,C.y);return Da(Da({},C),{},{x:W(N),y:L(N)})}return Da(Da({},C),{},{x:C.x,y:C.y})});return i.renderCurveStatically(k,s,a)}var S=ts(0,j),E=S(N),T;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(C){return parseFloat(C)});T=i.getStrokeDasharray(E,j,A)}else T=i.generateSimpleStrokeDasharray(j,E);return i.renderCurveStatically(o,s,a,{strokeDasharray:T})})}},{key:"renderCurve",value:function(s,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!zd(d,l))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,f=a.left,y=a.width,x=a.height,p=a.isAnimationActive,h=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,j=or("recharts-line",c),_=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,w=_||N,k=ir(h)?this.id:h,S=(s=Wt(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},E=S.r,T=E===void 0?3:E,A=S.strokeWidth,C=A===void 0?2:A,P=lM(l)?l:{},O=P.clipDot,R=O===void 0?!0:O,F=T*2+C;return Ce.createElement(pr,{className:j},_||N?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(k)},Ce.createElement("rect",{x:_?f:f-y/2,y:N?m:m-x/2,width:_?y:y*2,height:N?x:x*2})),!R&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(k)},Ce.createElement("rect",{x:f-F/2,y:m-F/2,width:y+F,height:x+F}))):null,!b&&this.renderCurve(w,k),this.renderErrorBar(w,k),(b||l)&&this.renderDots(w,R,k),(!p||v)&&Ol.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(Su(s),[0]):s,l=[],o=0;o<a;++o)l=[].concat(Su(l),Su(i));return l}},{key:"renderDotItem",value:function(s,a){var i;if(Ce.isValidElement(s))i=Ce.cloneElement(s,a);else if(Qt(s))i=s(a);else{var l=a.key,o=lR(a,Ske),c=or("recharts-line-dot",typeof s!="boolean"?s.className:"");i=Ce.createElement(Kp,K0({key:l},o,{className:c}))}return i}}])}(g.PureComponent);Ji(qd,"displayName","Line");Ji(qd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Lc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ji(qd,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,o=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,m=c.map(function(f,y){var x=Mn(f,l);return u==="horizontal"?{x:bv({axis:r,ticks:a,bandSize:o,entry:f,index:y}),y:ir(x)?null:s.scale(x),value:x,payload:f}:{x:ir(x)?null:r.scale(x),y:bv({axis:s,ticks:i,bandSize:o,entry:f,index:y}),value:x,payload:f}});return Da({points:m,layout:u},d)});var Mke=["layout","type","stroke","connectNulls","isRange","ref"],Bke=["key"],bU;function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function jU(e,t){if(e==null)return{};var r=Uke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Uke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gd.apply(this,arguments)}function dR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(r),!0).forEach(function(s){Sl(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wU(s.key),s)}}function Wke(e,t,r){return t&&uR(e.prototype,t),r&&uR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vke(e,t,r){return t=Vv(t),Hke(e,_U()?Reflect.construct(t,r||[],Vv(e).constructor):t.apply(e,r))}function Hke(e,t){if(t&&(sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qke(e)}function qke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_U=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vv(e)}function Gke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lk(e,t)}function lk(e,t){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},lk(e,t)}function Sl(e,t,r){return t=wU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wU(e){var t=Jke(e,"string");return sf(t)=="symbol"?t:t+""}function Jke(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(sf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Co=function(e){function t(){var r;zke(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Vke(this,t,[].concat(a)),Sl(r,"state",{isAnimationFinished:!0}),Sl(r,"id",lu("recharts-area-")),Sl(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Qt(l)&&l()}),Sl(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Qt(l)&&l()}),r}return Gke(t,e),Wke(t,[{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,f=Wt(this.props,!1),y=Wt(d,!0),x=u.map(function(h,v){var b=qo(qo(qo({key:"dot-".concat(v),r:3},f),y),{},{index:v,cx:h.x,cy:h.y,dataKey:m,value:h.value,payload:h.payload,points:u});return t.renderDotItem(d,b)}),p={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Ce.createElement(pr,gd({className:"recharts-area-dots"},p),x)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].x,d=l[l.length-1].x,u=s*Math.abs(c-d),m=ac(l.map(function(f){return f.y||0}));return _t(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(ac(i.map(function(f){return f.y||0})),m)),_t(m)?Ce.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(m+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].y,d=l[l.length-1].y,u=s*Math.abs(c-d),m=ac(l.map(function(f){return f.x||0}));return _t(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(ac(i.map(function(f){return f.x||0})),m)),_t(m)?Ce.createElement("rect",{x:0,y:c<d?c:c-u,width:m+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,l){var o=this.props,c=o.layout,d=o.type,u=o.stroke,m=o.connectNulls,f=o.isRange;o.ref;var y=jU(o,Mke);return Ce.createElement(pr,{clipPath:i?"url(#clipPath-".concat(l,")"):null},Ce.createElement(kd,gd({},Wt(y,!0),{points:s,connectNulls:m,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&Ce.createElement(kd,gd({},Wt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),u!=="none"&&f&&Ce.createElement(kd,gd({},Wt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.baseLine,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,f=l.animationEasing,y=l.animationId,x=this.state,p=x.prevPoints,h=x.prevBaseLine;return Ce.createElement(ol,{begin:u,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var b=v.t;if(p){var j=p.length/o.length,_=o.map(function(S,E){var T=Math.floor(E*j);if(p[T]){var A=p[T],C=ts(A.x,S.x),P=ts(A.y,S.y);return qo(qo({},S),{},{x:C(b),y:P(b)})}return S}),N;if(_t(c)&&typeof c=="number"){var w=ts(h,c);N=w(b)}else if(ir(c)||Pf(c)){var k=ts(h,0);N=k(b)}else N=c.map(function(S,E){var T=Math.floor(E*j);if(h[T]){var A=h[T],C=ts(A.x,S.x),P=ts(A.y,S.y);return qo(qo({},S),{},{x:C(b),y:P(b)})}return S});return i.renderAreaStatically(_,N,s,a)}return Ce.createElement(pr,null,Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),Ce.createElement(pr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(o,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,l=i.points,o=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,f=d.totalLength;return c&&l&&l.length&&(!u&&f>0||!zd(u,l)||!zd(m,o))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(l,o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.top,u=a.left,m=a.xAxis,f=a.yAxis,y=a.width,x=a.height,p=a.isAnimationActive,h=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,j=or("recharts-area",c),_=m&&m.allowDataOverflow,N=f&&f.allowDataOverflow,w=_||N,k=ir(h)?this.id:h,S=(s=Wt(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},E=S.r,T=E===void 0?3:E,A=S.strokeWidth,C=A===void 0?2:A,P=lM(l)?l:{},O=P.clipDot,R=O===void 0?!0:O,F=T*2+C;return Ce.createElement(pr,{className:j},_||N?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(k)},Ce.createElement("rect",{x:_?u:u-y/2,y:N?d:d-x/2,width:_?y:y*2,height:N?x:x*2})),!R&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(k)},Ce.createElement("rect",{x:u-F/2,y:d-F/2,width:y+F,height:x+F}))):null,b?null:this.renderArea(w,k),(l||b)&&this.renderDots(w,R,k),(!p||v)&&Ol.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(g.PureComponent);bU=Co;Sl(Co,"displayName","Area");Sl(Co,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Sl(Co,"getBaseValue",function(e,t,r,s){var a=e.layout,i=e.baseValue,l=t.props.baseValue,o=l??i;if(_t(o)&&typeof o=="number")return o;var c=a==="horizontal"?s:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return o==="dataMin"?m:o==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]});Sl(Co,"getComposedData",function(e){var t=e.props,r=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,f=e.offset,y=t.layout,x=d&&d.length,p=bU.getBaseValue(t,r,s,a),h=y==="horizontal",v=!1,b=m.map(function(_,N){var w;x?w=d[u+N]:(w=Mn(_,c),Array.isArray(w)?v=!0:w=[p,w]);var k=w[1]==null||x&&Mn(_,c)==null;return h?{x:bv({axis:s,ticks:i,bandSize:o,entry:_,index:N}),y:k?null:a.scale(w[1]),value:w,payload:_}:{x:k?null:s.scale(w[1]),y:bv({axis:a,ticks:l,bandSize:o,entry:_,index:N}),value:w,payload:_}}),j;return x||v?j=b.map(function(_){var N=Array.isArray(_.value)?_.value[0]:null;return h?{x:_.x,y:N!=null&&_.y!=null?a.scale(N):null}:{x:N!=null?s.scale(N):null,y:_.y}}):j=h?a.scale(p):s.scale(p),qo({points:b,baseLine:j,layout:y,isRange:v},f)});Sl(Co,"renderDotItem",function(e,t){var r;if(Ce.isValidElement(e))r=Ce.cloneElement(e,t);else if(Qt(e))r=e(t);else{var s=or("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=jU(t,Bke);r=Ce.createElement(Kp,gd({},i,{key:a,className:s}))}return r});function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Kke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SU(s.key),s)}}function Yke(e,t,r){return t&&Xke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zke(e,t,r){return t=Hv(t),Qke(e,NU()?Reflect.construct(t,r||[],Hv(e).constructor):t.apply(e,r))}function Qke(e,t){if(t&&(af(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eSe(e)}function eSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NU=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hv(e)}function tSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ok(e,t)}function kU(e,t,r){return t=SU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SU(e){var t=rSe(e,"string");return af(t)=="symbol"?t:t+""}function rSe(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(af(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ck.apply(this,arguments)}function nSe(e){var t=e.xAxisId,r=e4(),s=t4(),a=iU(t);return a==null?null:g.createElement($f,ck({},a,{className:or("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return io(l,!0)}}))}var Ka=function(e){function t(){return Kke(this,t),Zke(this,t,arguments)}return tSe(t,e),Yke(t,[{key:"render",value:function(){return g.createElement(nSe,this.props)}}])}(g.Component);kU(Ka,"displayName","XAxis");kU(Ka,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function sSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aSe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,EU(s.key),s)}}function iSe(e,t,r){return t&&aSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lSe(e,t,r){return t=qv(t),oSe(e,CU()?Reflect.construct(t,r||[],qv(e).constructor):t.apply(e,r))}function oSe(e,t){if(t&&(lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cSe(e)}function cSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CU=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qv(e)}function dSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},dk(e,t)}function AU(e,t,r){return t=EU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=uSe(e,"string");return lf(t)=="symbol"?t:t+""}function uSe(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(lf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uk.apply(this,arguments)}var mSe=function(t){var r=t.yAxisId,s=e4(),a=t4(),i=lU(r);return i==null?null:g.createElement($f,uk({},i,{className:or("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(o){return io(o,!0)}}))},Xa=function(e){function t(){return sSe(this,t),lSe(this,t,arguments)}return dSe(t,e),iSe(t,[{key:"render",value:function(){return g.createElement(mSe,this.props)}}])}(g.Component);AU(Xa,"displayName","YAxis");AU(Xa,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function mR(e){return xSe(e)||pSe(e)||hSe(e)||fSe()}function fSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hSe(e,t){if(e){if(typeof e=="string")return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}}function pSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xSe(e){if(Array.isArray(e))return mk(e)}function mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var fk=function(t,r,s,a,i){var l=ei(t,n4),o=ei(t,F1),c=[].concat(mR(l),mR(o)),d=ei(t,$1),u="".concat(a,"Id"),m=a[0],f=r;if(c.length&&(f=c.reduce(function(p,h){if(h.props[u]===s&&Rl(h.props,"extendDomain")&&_t(h.props[m])){var v=h.props[m];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},f)),d.length){var y="".concat(m,"1"),x="".concat(m,"2");f=d.reduce(function(p,h){if(h.props[u]===s&&Rl(h.props,"extendDomain")&&_t(h.props[y])&&_t(h.props[x])){var v=h.props[y],b=h.props[x];return[Math.min(p[0],v,b),Math.max(p[1],v,b)]}return p},f)}return i&&i.length&&(f=i.reduce(function(p,h){return _t(h)?[Math.min(p[0],h),Math.max(p[1],h)]:p},f)),f},TU={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var y=new a(u,m||c,f),x=r?r+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],y]:c._events[x].push(y):(c._events[x]=y,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)t.call(u,m)&&d.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=r?r+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,y=m.length,x=new Array(y);f<y;f++)x[f]=m[f].fn;return x},o.prototype.listenerCount=function(d){var u=r?r+d:d,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(d,u,m,f,y,x){var p=r?r+d:d;if(!this._events[p])return!1;var h=this._events[p],v=arguments.length,b,j;if(h.fn){switch(h.once&&this.removeListener(d,h.fn,void 0,!0),v){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,u),!0;case 3:return h.fn.call(h.context,u,m),!0;case 4:return h.fn.call(h.context,u,m,f),!0;case 5:return h.fn.call(h.context,u,m,f,y),!0;case 6:return h.fn.call(h.context,u,m,f,y,x),!0}for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];h.fn.apply(h.context,b)}else{var _=h.length,N;for(j=0;j<_;j++)switch(h[j].once&&this.removeListener(d,h[j].fn,void 0,!0),v){case 1:h[j].fn.call(h[j].context);break;case 2:h[j].fn.call(h[j].context,u);break;case 3:h[j].fn.call(h[j].context,u,m);break;case 4:h[j].fn.call(h[j].context,u,m,f);break;default:if(!b)for(N=1,b=new Array(v-1);N<v;N++)b[N-1]=arguments[N];h[j].fn.apply(h[j].context,b)}}return!0},o.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},o.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},o.prototype.removeListener=function(d,u,m,f){var y=r?r+d:d;if(!this._events[y])return this;if(!u)return l(this,y),this;var x=this._events[y];if(x.fn)x.fn===u&&(!f||x.once)&&(!m||x.context===m)&&l(this,y);else{for(var p=0,h=[],v=x.length;p<v;p++)(x[p].fn!==u||f&&!x[p].once||m&&x[p].context!==m)&&h.push(x[p]);h.length?this._events[y]=h.length===1?h[0]:h:l(this,y)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(TU);var gSe=TU.exports;const ySe=$r(gSe);var p_=new ySe,x_="recharts.syncMouseEvents";function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function vSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bSe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,PU(s.key),s)}}function jSe(e,t,r){return t&&bSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g_(e,t,r){return t=PU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=_Se(e,"string");return lp(t)=="symbol"?t:t+""}function _Se(e,t){if(lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(lp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wSe=function(){function e(){vSe(this,e),g_(this,"activeIndex",0),g_(this,"coordinateList",[]),g_(this,"layout","horizontal")}return jSe(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,l=r.container,o=l===void 0?null:l,c=r.layout,d=c===void 0?null:c,u=r.offset,m=u===void 0?null:u,f=r.mouseHandlerCallback,y=f===void 0?null:f;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=i+c+d,f=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:f})}}}])}();function NSe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&_t(s)&&_t(a))return!0}return!1}function kSe(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function OU(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,l=en(t,r,s,a),o=en(t,r,s,i);return{points:[l,o],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function SSe(e,t,r){var s,a,i,l;if(e==="horizontal")s=t.x,i=s,a=r.top,l=r.top+r.height;else if(e==="vertical")a=t.y,l=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,m=t.angle,f=en(o,c,d,m),y=en(o,c,u,m);s=f.x,a=f.y,i=y.x,l=y.y}else return OU(t);return[{x:s,y:a},{x:i,y:l}]}function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function fR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Gx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fR(Object(r),!0).forEach(function(s){CSe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function CSe(e,t,r){return t=ASe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ASe(e){var t=ESe(e,"string");return op(t)=="symbol"?t:t+""}function ESe(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(op(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TSe(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,m=e.layout,f=e.chartName,y=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!y||!i||!l||f!=="ScatterChart"&&a!=="axis")return null;var x,p=kd;if(f==="ScatterChart")x=l,p=$je;else if(f==="BarChart")x=kSe(m,l,c,u),p=KC;else if(m==="radial"){var h=OU(l),v=h.cx,b=h.cy,j=h.radius,_=h.startAngle,N=h.endAngle;x={cx:v,cy:b,startAngle:_,endAngle:N,innerRadius:j,outerRadius:j},p=JC}else x={points:SSe(m,l,c)},p=kd;var w=Gx(Gx(Gx(Gx({stroke:"#ccc",pointerEvents:"none"},c),x),Wt(y,!1)),{},{payload:o,payloadIndex:d,className:or("recharts-tooltip-cursor",y.className)});return g.isValidElement(y)?g.cloneElement(y,w):g.createElement(p,w)}var PSe=["item"],OSe=["children","className","width","height","style","compact","title","desc"];function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},lm.apply(this,arguments)}function hR(e,t){return ISe(e)||LSe(e,t)||LU(e,t)||RSe()}function RSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function ISe(e){if(Array.isArray(e))return e}function pR(e,t){if(e==null)return{};var r=FSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function FSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function DSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Se(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,IU(s.key),s)}}function MSe(e,t,r){return t&&$Se(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BSe(e,t,r){return t=Gv(t),USe(e,RU()?Reflect.construct(t,r||[],Gv(e).constructor):t.apply(e,r))}function USe(e,t){if(t&&(of(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zSe(e)}function zSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RU=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gv(e)}function WSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},hk(e,t)}function cf(e){return qSe(e)||HSe(e)||LU(e)||VSe()}function VSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LU(e,t){if(e){if(typeof e=="string")return pk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pk(e,t)}}function HSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qSe(e){if(Array.isArray(e))return pk(e)}function pk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function xR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(r),!0).forEach(function(s){Zt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zt(e,t,r){return t=IU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IU(e){var t=GSe(e,"string");return of(t)=="symbol"?t:t+""}function GSe(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(of(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JSe={xAxis:["bottom","top"],yAxis:["left","right"]},KSe={width:"100%",height:"100%"},FU={x:0,y:0};function Jx(e){return e}var XSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},YSe=function(t,r,s,a){var i=r.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,o=a.radius;return ot(ot(ot({},a),en(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return ot(ot(ot({},a),en(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return FU},M1=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,l=(s??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(cf(o),cf(d)):o},[]);return l.length>0?l:t&&t.length&&_t(a)&&_t(i)?t.slice(a,i+1):[]};function DU(e){return e==="number"?[0,"auto"]:void 0}var xk=function(t,r,s,a){var i=t.graphicalItems,l=t.tooltipAxis,o=M1(r,t);return s<0||!i||!i.length||s>=o.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(l.dataKey&&!l.allowDuplicatedCategory){var y=m===void 0?o:m;f=qy(y,l.dataKey,a)}else f=m&&m[s]||o[s];return f?[].concat(cf(c),[bB(d,f)]):c},[])},gR=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},l=XSe(i,s),o=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=lve(l,o,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,f=xk(t,r,u,m),y=YSe(s,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:f,activeCoordinate:y}}return null},ZSe=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,m=t.children,f=t.stackOffset,y=hB(u,i);return s.reduce(function(x,p){var h,v=p.type.defaultProps!==void 0?ot(ot({},p.type.defaultProps),p.props):p.props,b=v.type,j=v.dataKey,_=v.allowDataOverflow,N=v.allowDuplicatedCategory,w=v.scale,k=v.ticks,S=v.includeHidden,E=v[l];if(x[E])return x;var T=M1(t.data,{graphicalItems:a.filter(function(D){var Y,re=l in D.props?D.props[l]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[l];return re===E}),dataStartIndex:c,dataEndIndex:d}),A=T.length,C,P,O;NSe(v.domain,_,b)&&(C=E2(v.domain,null,_),y&&(b==="number"||w!=="auto")&&(O=H0(T,j,"category")));var R=DU(b);if(!C||C.length===0){var F,Q=(F=v.domain)!==null&&F!==void 0?F:R;if(j){if(C=H0(T,j,b),b==="category"&&y){var W=Yse(C);N&&W?(P=C,C=Rv(0,A)):N||(C=DP(Q,C,p).reduce(function(D,Y){return D.indexOf(Y)>=0?D:[].concat(cf(D),[Y])},[]))}else if(b==="category")N?C=C.filter(function(D){return D!==""&&!ir(D)}):C=DP(Q,C,p).reduce(function(D,Y){return D.indexOf(Y)>=0||Y===""||ir(Y)?D:[].concat(cf(D),[Y])},[]);else if(b==="number"){var L=mve(T,a.filter(function(D){var Y,re,B=l in D.props?D.props[l]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[l],G="hide"in D.props?D.props.hide:(re=D.type.defaultProps)===null||re===void 0?void 0:re.hide;return B===E&&(S||!G)}),j,i,u);L&&(C=L)}y&&(b==="number"||w!=="auto")&&(O=H0(T,j,"category"))}else y?C=Rv(0,A):o&&o[E]&&o[E].hasStack&&b==="number"?C=f==="expand"?[0,1]:vB(o[E].stackGroups,c,d):C=fB(T,a.filter(function(D){var Y=l in D.props?D.props[l]:D.type.defaultProps[l],re="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return Y===E&&(S||!re)}),b,u,!0);if(b==="number")C=fk(m,C,E,i,k),Q&&(C=E2(Q,C,_));else if(b==="category"&&Q){var I=Q,K=C.every(function(D){return I.indexOf(D)>=0});K&&(C=I)}}return ot(ot({},x),{},Zt({},E,ot(ot({},v),{},{axisType:i,domain:C,categoricalDomain:O,duplicateDomain:P,originalDomain:(h=v.domain)!==null&&h!==void 0?h:R,isCategorical:y,layout:u})))},{})},QSe=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,m=t.children,f=M1(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),y=f.length,x=hB(u,i),p=-1;return s.reduce(function(h,v){var b=v.type.defaultProps!==void 0?ot(ot({},v.type.defaultProps),v.props):v.props,j=b[l],_=DU("number");if(!h[j]){p++;var N;return x?N=Rv(0,y):o&&o[j]&&o[j].hasStack?(N=vB(o[j].stackGroups,c,d),N=fk(m,N,j,i)):(N=E2(_,fB(f,s.filter(function(w){var k,S,E=l in w.props?w.props[l]:(k=w.type.defaultProps)===null||k===void 0?void 0:k[l],T="hide"in w.props?w.props.hide:(S=w.type.defaultProps)===null||S===void 0?void 0:S.hide;return E===j&&!T}),"number",u),a.defaultProps.allowDataOverflow),N=fk(m,N,j,i)),ot(ot({},h),{},Zt({},j,ot(ot({axisType:i},a.defaultProps),{},{hide:!0,orientation:Qa(JSe,"".concat(i,".").concat(p%2),null),domain:N,originalDomain:_,isCategorical:x,layout:u})))}return h},{})},eCe=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,m="".concat(a,"Id"),f=ei(u,i),y={};return f&&f.length?y=ZSe(t,{axes:f,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(y=QSe(t,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),y},tCe=function(t){var r=tc(t),s=io(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:jC(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:jv(r,s)}},yR=function(t){var r=t.children,s=t.defaultShowTooltip,a=Ua(r,Ym),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!s}},rCe=function(t){return!t||!t.length?!1:t.some(function(r){var s=uo(r&&r.type);return s&&s.indexOf("Bar")>=0})},vR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},nCe=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,d=s.width,u=s.height,m=s.children,f=s.margin||{},y=Ua(m,Ym),x=Ua(m,_d),p=Object.keys(c).reduce(function(N,w){var k=c[w],S=k.orientation;return!k.mirror&&!k.hide?ot(ot({},N),{},Zt({},S,N[S]+k.width)):N},{left:f.left||0,right:f.right||0}),h=Object.keys(l).reduce(function(N,w){var k=l[w],S=k.orientation;return!k.mirror&&!k.hide?ot(ot({},N),{},Zt({},S,Qa(N,"".concat(S))+k.height)):N},{top:f.top||0,bottom:f.bottom||0}),v=ot(ot({},h),p),b=v.bottom;y&&(v.bottom+=y.props.height||Ym.defaultProps.height),x&&r&&(v=dve(v,a,s,r));var j=d-v.left-v.right,_=u-v.top-v.bottom;return ot(ot({brushBottom:b},v),{},{width:Math.max(j,0),height:Math.max(_,0)})},sCe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},B1=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,l=t.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,m=t.defaultProps,f=function(v,b){var j=b.graphicalItems,_=b.stackGroups,N=b.offset,w=b.updateId,k=b.dataStartIndex,S=b.dataEndIndex,E=v.barSize,T=v.layout,A=v.barGap,C=v.barCategoryGap,P=v.maxBarSize,O=vR(T),R=O.numericAxisName,F=O.cateAxisName,Q=rCe(j),W=[];return j.forEach(function(L,I){var K=M1(v.data,{graphicalItems:[L],dataStartIndex:k,dataEndIndex:S}),D=L.type.defaultProps!==void 0?ot(ot({},L.type.defaultProps),L.props):L.props,Y=D.dataKey,re=D.maxBarSize,B=D["".concat(R,"Id")],G=D["".concat(F,"Id")],ce={},ae=c.reduce(function(Ae,$e){var Me=b["".concat($e.axisType,"Map")],Fe=D["".concat($e.axisType,"Id")];Me&&Me[Fe]||$e.axisType==="zAxis"||Vd();var We=Me[Fe];return ot(ot({},Ae),{},Zt(Zt({},$e.axisType,We),"".concat($e.axisType,"Ticks"),io(We)))},ce),fe=ae[F],ne=ae["".concat(F,"Ticks")],he=_&&_[B]&&_[B].hasStack&&jve(L,_[B].stackGroups),M=uo(L.type).indexOf("Bar")>=0,Se=jv(fe,ne),me=[],Pe=Q&&ove({barSize:E,stackGroups:_,totalSize:sCe(ae,F)});if(M){var ue,ye,Ye=ir(re)?P:re,lt=(ue=(ye=jv(fe,ne,!0))!==null&&ye!==void 0?ye:Ye)!==null&&ue!==void 0?ue:0;me=cve({barGap:A,barCategoryGap:C,bandSize:lt!==Se?lt:Se,sizeList:Pe[G],maxBarSize:Ye}),lt!==Se&&(me=me.map(function(Ae){return ot(ot({},Ae),{},{position:ot(ot({},Ae.position),{},{offset:Ae.position.offset-lt/2})})}))}var xe=L&&L.type&&L.type.getComposedData;xe&&W.push({props:ot(ot({},xe(ot(ot({},ae),{},{displayedData:K,props:v,dataKey:Y,item:L,bandSize:Se,barPosition:me,offset:N,stackedData:he,layout:T,dataStartIndex:k,dataEndIndex:S}))),{},Zt(Zt(Zt({key:L.key||"item-".concat(I)},R,ae[R]),F,ae[F]),"animationId",w)),childIndex:cae(L,v.children),item:L})}),W},y=function(v,b){var j=v.props,_=v.dataStartIndex,N=v.dataEndIndex,w=v.updateId;if(!P5({props:j}))return null;var k=j.children,S=j.layout,E=j.stackOffset,T=j.data,A=j.reverseStackOrder,C=vR(S),P=C.numericAxisName,O=C.cateAxisName,R=ei(k,s),F=vve(T,R,"".concat(P,"Id"),"".concat(O,"Id"),E,A),Q=c.reduce(function(D,Y){var re="".concat(Y.axisType,"Map");return ot(ot({},D),{},Zt({},re,eCe(j,ot(ot({},Y),{},{graphicalItems:R,stackGroups:Y.axisType===P&&F,dataStartIndex:_,dataEndIndex:N}))))},{}),W=nCe(ot(ot({},Q),{},{props:j,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys(Q).forEach(function(D){Q[D]=u(j,Q[D],W,D.replace("Map",""),r)});var L=Q["".concat(O,"Map")],I=tCe(L),K=f(j,ot(ot({},Q),{},{dataStartIndex:_,dataEndIndex:N,updateId:w,graphicalItems:R,stackGroups:F,offset:W}));return ot(ot({formattedGraphicalItems:K,graphicalItems:R,offset:W,stackGroups:F},I),Q)},x=function(h){function v(b){var j,_,N;return DSe(this,v),N=BSe(this,v,[b]),Zt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zt(N,"accessibilityManager",new wSe),Zt(N,"handleLegendBBoxUpdate",function(w){if(w){var k=N.state,S=k.dataStartIndex,E=k.dataEndIndex,T=k.updateId;N.setState(ot({legendBBox:w},y({props:N.props,dataStartIndex:S,dataEndIndex:E,updateId:T},ot(ot({},N.state),{},{legendBBox:w}))))}}),Zt(N,"handleReceiveSyncEvent",function(w,k,S){if(N.props.syncId===w){if(S===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(k)}}),Zt(N,"handleBrushChange",function(w){var k=w.startIndex,S=w.endIndex;if(k!==N.state.dataStartIndex||S!==N.state.dataEndIndex){var E=N.state.updateId;N.setState(function(){return ot({dataStartIndex:k,dataEndIndex:S},y({props:N.props,dataStartIndex:k,dataEndIndex:S,updateId:E},N.state))}),N.triggerSyncEvent({dataStartIndex:k,dataEndIndex:S})}}),Zt(N,"handleMouseEnter",function(w){var k=N.getMouseInfo(w);if(k){var S=ot(ot({},k),{},{isTooltipActive:!0});N.setState(S),N.triggerSyncEvent(S);var E=N.props.onMouseEnter;Qt(E)&&E(S,w)}}),Zt(N,"triggeredAfterMouseMove",function(w){var k=N.getMouseInfo(w),S=k?ot(ot({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(S),N.triggerSyncEvent(S);var E=N.props.onMouseMove;Qt(E)&&E(S,w)}),Zt(N,"handleItemMouseEnter",function(w){N.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Zt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Zt(N,"handleMouseMove",function(w){w.persist(),N.throttleTriggeredAfterMouseMove(w)}),Zt(N,"handleMouseLeave",function(w){N.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};N.setState(k),N.triggerSyncEvent(k);var S=N.props.onMouseLeave;Qt(S)&&S(k,w)}),Zt(N,"handleOuterEvent",function(w){var k=oae(w),S=Qa(N.props,"".concat(k));if(k&&Qt(S)){var E,T;/.*touch.*/i.test(k)?T=N.getMouseInfo(w.changedTouches[0]):T=N.getMouseInfo(w),S((E=T)!==null&&E!==void 0?E:{},w)}}),Zt(N,"handleClick",function(w){var k=N.getMouseInfo(w);if(k){var S=ot(ot({},k),{},{isTooltipActive:!0});N.setState(S),N.triggerSyncEvent(S);var E=N.props.onClick;Qt(E)&&E(S,w)}}),Zt(N,"handleMouseDown",function(w){var k=N.props.onMouseDown;if(Qt(k)){var S=N.getMouseInfo(w);k(S,w)}}),Zt(N,"handleMouseUp",function(w){var k=N.props.onMouseUp;if(Qt(k)){var S=N.getMouseInfo(w);k(S,w)}}),Zt(N,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Zt(N,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&N.handleMouseDown(w.changedTouches[0])}),Zt(N,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&N.handleMouseUp(w.changedTouches[0])}),Zt(N,"handleDoubleClick",function(w){var k=N.props.onDoubleClick;if(Qt(k)){var S=N.getMouseInfo(w);k(S,w)}}),Zt(N,"handleContextMenu",function(w){var k=N.props.onContextMenu;if(Qt(k)){var S=N.getMouseInfo(w);k(S,w)}}),Zt(N,"triggerSyncEvent",function(w){N.props.syncId!==void 0&&p_.emit(x_,N.props.syncId,w,N.eventEmitterSymbol)}),Zt(N,"applySyncEvent",function(w){var k=N.props,S=k.layout,E=k.syncMethod,T=N.state.updateId,A=w.dataStartIndex,C=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)N.setState(ot({dataStartIndex:A,dataEndIndex:C},y({props:N.props,dataStartIndex:A,dataEndIndex:C,updateId:T},N.state)));else if(w.activeTooltipIndex!==void 0){var P=w.chartX,O=w.chartY,R=w.activeTooltipIndex,F=N.state,Q=F.offset,W=F.tooltipTicks;if(!Q)return;if(typeof E=="function")R=E(W,w);else if(E==="value"){R=-1;for(var L=0;L<W.length;L++)if(W[L].value===w.activeLabel){R=L;break}}var I=ot(ot({},Q),{},{x:Q.left,y:Q.top}),K=Math.min(P,I.x+I.width),D=Math.min(O,I.y+I.height),Y=W[R]&&W[R].value,re=xk(N.state,N.props.data,R),B=W[R]?{x:S==="horizontal"?W[R].coordinate:K,y:S==="horizontal"?D:W[R].coordinate}:FU;N.setState(ot(ot({},w),{},{activeLabel:Y,activeCoordinate:B,activePayload:re,activeTooltipIndex:R}))}else N.setState(w)}),Zt(N,"renderCursor",function(w){var k,S=N.state,E=S.isTooltipActive,T=S.activeCoordinate,A=S.activePayload,C=S.offset,P=S.activeTooltipIndex,O=S.tooltipAxisBandSize,R=N.getTooltipEventType(),F=(k=w.props.active)!==null&&k!==void 0?k:E,Q=N.props.layout,W=w.key||"_recharts-cursor";return Ce.createElement(TSe,{key:W,activeCoordinate:T,activePayload:A,activeTooltipIndex:P,chartName:r,element:w,isActive:F,layout:Q,offset:C,tooltipAxisBandSize:O,tooltipEventType:R})}),Zt(N,"renderPolarAxis",function(w,k,S){var E=Qa(w,"type.axisType"),T=Qa(N.state,"".concat(E,"Map")),A=w.type.defaultProps,C=A!==void 0?ot(ot({},A),w.props):w.props,P=T&&T[C["".concat(E,"Id")]];return g.cloneElement(w,ot(ot({},P),{},{className:or(E,P.className),key:w.key||"".concat(k,"-").concat(S),ticks:io(P,!0)}))}),Zt(N,"renderPolarGrid",function(w){var k=w.props,S=k.radialLines,E=k.polarAngles,T=k.polarRadius,A=N.state,C=A.radiusAxisMap,P=A.angleAxisMap,O=tc(C),R=tc(P),F=R.cx,Q=R.cy,W=R.innerRadius,L=R.outerRadius;return g.cloneElement(w,{polarAngles:Array.isArray(E)?E:io(R,!0).map(function(I){return I.coordinate}),polarRadius:Array.isArray(T)?T:io(O,!0).map(function(I){return I.coordinate}),cx:F,cy:Q,innerRadius:W,outerRadius:L,key:w.key||"polar-grid",radialLines:S})}),Zt(N,"renderLegend",function(){var w=N.state.formattedGraphicalItems,k=N.props,S=k.children,E=k.width,T=k.height,A=N.props.margin||{},C=E-(A.left||0)-(A.right||0),P=uB({children:S,formattedGraphicalItems:w,legendWidth:C,legendContent:d});if(!P)return null;var O=P.item,R=pR(P,PSe);return g.cloneElement(O,ot(ot({},R),{},{chartWidth:E,chartHeight:T,margin:A,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Zt(N,"renderTooltip",function(){var w,k=N.props,S=k.children,E=k.accessibilityLayer,T=Ua(S,Dn);if(!T)return null;var A=N.state,C=A.isTooltipActive,P=A.activeCoordinate,O=A.activePayload,R=A.activeLabel,F=A.offset,Q=(w=T.props.active)!==null&&w!==void 0?w:C;return g.cloneElement(T,{viewBox:ot(ot({},F),{},{x:F.left,y:F.top}),active:Q,label:R,payload:Q?O:[],coordinate:P,accessibilityLayer:E})}),Zt(N,"renderBrush",function(w){var k=N.props,S=k.margin,E=k.data,T=N.state,A=T.offset,C=T.dataStartIndex,P=T.dataEndIndex,O=T.updateId;return g.cloneElement(w,{key:w.key||"_recharts-brush",onChange:Wx(N.handleBrushChange,w.props.onChange),data:E,x:_t(w.props.x)?w.props.x:A.left,y:_t(w.props.y)?w.props.y:A.top+A.height+A.brushBottom-(S.bottom||0),width:_t(w.props.width)?w.props.width:A.width,startIndex:C,endIndex:P,updateId:"brush-".concat(O)})}),Zt(N,"renderReferenceElement",function(w,k,S){if(!w)return null;var E=N,T=E.clipPathId,A=N.state,C=A.xAxisMap,P=A.yAxisMap,O=A.offset,R=w.type.defaultProps||{},F=w.props,Q=F.xAxisId,W=Q===void 0?R.xAxisId:Q,L=F.yAxisId,I=L===void 0?R.yAxisId:L;return g.cloneElement(w,{key:w.key||"".concat(k,"-").concat(S),xAxis:C[W],yAxis:P[I],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:T})}),Zt(N,"renderActivePoints",function(w){var k=w.item,S=w.activePoint,E=w.basePoint,T=w.childIndex,A=w.isRange,C=[],P=k.props.key,O=k.item.type.defaultProps!==void 0?ot(ot({},k.item.type.defaultProps),k.item.props):k.item.props,R=O.activeDot,F=O.dataKey,Q=ot(ot({index:T,dataKey:F,cx:S.x,cy:S.y,r:4,fill:GC(k.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},Wt(R,!1)),Gy(R));return C.push(v.renderActiveDot(R,Q,"".concat(P,"-activePoint-").concat(T))),E?C.push(v.renderActiveDot(R,ot(ot({},Q),{},{cx:E.x,cy:E.y}),"".concat(P,"-basePoint-").concat(T))):A&&C.push(null),C}),Zt(N,"renderGraphicChild",function(w,k,S){var E=N.filterFormatItem(w,k,S);if(!E)return null;var T=N.getTooltipEventType(),A=N.state,C=A.isTooltipActive,P=A.tooltipAxis,O=A.activeTooltipIndex,R=A.activeLabel,F=N.props.children,Q=Ua(F,Dn),W=E.props,L=W.points,I=W.isRange,K=W.baseLine,D=E.item.type.defaultProps!==void 0?ot(ot({},E.item.type.defaultProps),E.item.props):E.item.props,Y=D.activeDot,re=D.hide,B=D.activeBar,G=D.activeShape,ce=!!(!re&&C&&Q&&(Y||B||G)),ae={};T!=="axis"&&Q&&Q.props.trigger==="click"?ae={onClick:Wx(N.handleItemMouseEnter,w.props.onClick)}:T!=="axis"&&(ae={onMouseLeave:Wx(N.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:Wx(N.handleItemMouseEnter,w.props.onMouseEnter)});var fe=g.cloneElement(w,ot(ot({},E.props),ae));function ne($e){return typeof P.dataKey=="function"?P.dataKey($e.payload):null}if(ce)if(O>=0){var he,M;if(P.dataKey&&!P.allowDuplicatedCategory){var Se=typeof P.dataKey=="function"?ne:"payload.".concat(P.dataKey.toString());he=qy(L,Se,R),M=I&&K&&qy(K,Se,R)}else he=L==null?void 0:L[O],M=I&&K&&K[O];if(G||B){var me=w.props.activeIndex!==void 0?w.props.activeIndex:O;return[g.cloneElement(w,ot(ot(ot({},E.props),ae),{},{activeIndex:me})),null,null]}if(!ir(he))return[fe].concat(cf(N.renderActivePoints({item:E,activePoint:he,basePoint:M,childIndex:O,isRange:I})))}else{var Pe,ue=(Pe=N.getItemByXY(N.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:fe},ye=ue.graphicalItem,Ye=ye.item,lt=Ye===void 0?w:Ye,xe=ye.childIndex,Ae=ot(ot(ot({},E.props),ae),{},{activeIndex:xe});return[g.cloneElement(lt,Ae),null,null]}return I?[fe,null,null]:[fe,null]}),Zt(N,"renderCustomized",function(w,k,S){return g.cloneElement(w,ot(ot({key:"recharts-customized-".concat(S)},N.props),N.state))}),Zt(N,"renderMap",{CartesianGrid:{handler:Jx,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Jx},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Jx},YAxis:{handler:Jx},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((j=b.id)!==null&&j!==void 0?j:lu("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=d9(N.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),N.state={},N}return WSe(v,h),MSe(v,[{key:"componentDidMount",value:function(){var j,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,_=j.children,N=j.data,w=j.height,k=j.layout,S=Ua(_,Dn);if(S){var E=S.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,A=xk(this.state,N,E,T),C=this.state.tooltipTicks[E].coordinate,P=(this.state.offset.top+w)/2,O=k==="horizontal",R=O?{x:C,y:P}:{y:C,x:P},F=this.state.formattedGraphicalItems.find(function(W){var L=W.item;return L.type.name==="Scatter"});F&&(R=ot(ot({},R),F.props.points[E].tooltipPosition),A=F.props.points[E].tooltipPayload);var Q={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:T,activePayload:A,activeCoordinate:R};this.setState(Q),this.renderCursor(S),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var N,w;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(j){VN([Ua(j.children,Dn)],[Ua(this.props.children,Dn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=Ua(this.props.children,Dn);if(j&&typeof j.props.shared=="boolean"){var _=j.props.shared?"axis":"item";return o.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var _=this.container,N=_.getBoundingClientRect(),w=Ihe(N),k={chartX:Math.round(j.pageX-w.left),chartY:Math.round(j.pageY-w.top)},S=N.width/_.offsetWidth||1,E=this.inRange(k.chartX,k.chartY,S);if(!E)return null;var T=this.state,A=T.xAxisMap,C=T.yAxisMap,P=this.getTooltipEventType(),O=gR(this.state,this.props.data,this.props.layout,E);if(P!=="axis"&&A&&C){var R=tc(A).scale,F=tc(C).scale,Q=R&&R.invert?R.invert(k.chartX):null,W=F&&F.invert?F.invert(k.chartY):null;return ot(ot({},k),{},{xValue:Q,yValue:W},O)}return O?ot(ot({},k),O):null}},{key:"inRange",value:function(j,_){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,k=j/N,S=_/N;if(w==="horizontal"||w==="vertical"){var E=this.state.offset,T=k>=E.left&&k<=E.left+E.width&&S>=E.top&&S<=E.top+E.height;return T?{x:k,y:S}:null}var A=this.state,C=A.angleAxisMap,P=A.radiusAxisMap;if(C&&P){var O=tc(C);return BP({x:k,y:S},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,_=this.getTooltipEventType(),N=Ua(j,Dn),w={};N&&_==="axis"&&(N.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=Gy(this.props,this.handleOuterEvent);return ot(ot({},k),w)}},{key:"addListener",value:function(){p_.on(x_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){p_.removeListener(x_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,_,N){for(var w=this.state.formattedGraphicalItems,k=0,S=w.length;k<S;k++){var E=w[k];if(E.item===j||E.props.key===j.key||_===uo(E.item.type)&&N===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,_=this.state.offset,N=_.left,w=_.top,k=_.height,S=_.width;return Ce.createElement("defs",null,Ce.createElement("clipPath",{id:j},Ce.createElement("rect",{x:N,y:w,height:k,width:S})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(_,N){var w=hR(N,2),k=w[0],S=w[1];return ot(ot({},_),{},Zt({},k,S.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(_,N){var w=hR(N,2),k=w[0],S=w[1];return ot(ot({},_),{},Zt({},k,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[j])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(j){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[j])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(j){var _=this.state,N=_.formattedGraphicalItems,w=_.activeItem;if(N&&N.length)for(var k=0,S=N.length;k<S;k++){var E=N[k],T=E.props,A=E.item,C=A.type.defaultProps!==void 0?ot(ot({},A.type.defaultProps),A.props):A.props,P=uo(A.type);if(P==="Bar"){var O=(T.data||[]).find(function(W){return yje(j,W)});if(O)return{graphicalItem:E,payload:O}}else if(P==="RadialBar"){var R=(T.data||[]).find(function(W){return BP(j,W)});if(R)return{graphicalItem:E,payload:R}}else if(O1(E,w)||R1(E,w)||rp(E,w)){var F=iwe({graphicalItem:E,activeTooltipItem:w,itemData:C.data}),Q=C.activeIndex===void 0?F:C.activeIndex;return{graphicalItem:ot(ot({},E),{},{childIndex:Q}),payload:rp(E,w)?C.data[F]:E.props.data[F]}}}return null}},{key:"render",value:function(){var j=this;if(!P5(this))return null;var _=this.props,N=_.children,w=_.className,k=_.width,S=_.height,E=_.style,T=_.compact,A=_.title,C=_.desc,P=pR(_,OSe),O=Wt(P,!1);if(T)return Ce.createElement(JO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement(qN,lm({},O,{width:k,height:S,title:A,desc:C}),this.renderClipPath(),R5(N,this.renderMap)));if(this.props.accessibilityLayer){var R,F;O.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,O.role=(F=this.props.role)!==null&&F!==void 0?F:"application",O.onKeyDown=function(W){j.accessibilityManager.keyboardEvent(W)},O.onFocus=function(){j.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return Ce.createElement(JO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement("div",lm({className:or("recharts-wrapper",w),style:ot({position:"relative",cursor:"default",width:k,height:S},E)},Q,{ref:function(L){j.container=L}}),Ce.createElement(qN,lm({},O,{width:k,height:S,title:A,desc:C,style:KSe}),this.renderClipPath(),R5(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Zt(x,"displayName",r),Zt(x,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Zt(x,"getDerivedStateFromProps",function(h,v){var b=h.dataKey,j=h.data,_=h.children,N=h.width,w=h.height,k=h.layout,S=h.stackOffset,E=h.margin,T=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var C=yR(h);return ot(ot(ot({},C),{},{updateId:0},y(ot(ot({props:h},C),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:j,prevWidth:N,prevHeight:w,prevLayout:k,prevStackOffset:S,prevMargin:E,prevChildren:_})}if(b!==v.prevDataKey||j!==v.prevData||N!==v.prevWidth||w!==v.prevHeight||k!==v.prevLayout||S!==v.prevStackOffset||!ym(E,v.prevMargin)){var P=yR(h),O={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},R=ot(ot({},gR(v,j,k)),{},{updateId:v.updateId+1}),F=ot(ot(ot({},P),O),R);return ot(ot(ot({},F),y(ot({props:h},F),v)),{},{prevDataKey:b,prevData:j,prevWidth:N,prevHeight:w,prevLayout:k,prevStackOffset:S,prevMargin:E,prevChildren:_})}if(!VN(_,v.prevChildren)){var Q,W,L,I,K=Ua(_,Ym),D=K&&(Q=(W=K.props)===null||W===void 0?void 0:W.startIndex)!==null&&Q!==void 0?Q:T,Y=K&&(L=(I=K.props)===null||I===void 0?void 0:I.endIndex)!==null&&L!==void 0?L:A,re=D!==T||Y!==A,B=!ir(j),G=B&&!re?v.updateId:v.updateId+1;return ot(ot({updateId:G},y(ot(ot({props:h},v),{},{updateId:G,dataStartIndex:D,dataEndIndex:Y}),v)),{},{prevChildren:_,dataStartIndex:D,dataEndIndex:Y})}return null}),Zt(x,"renderActiveDot",function(h,v,b){var j;return g.isValidElement(h)?j=g.cloneElement(h,v):Qt(h)?j=h(v):j=Ce.createElement(Kp,v),Ce.createElement(pr,{className:"recharts-active-dot",key:b},j)});var p=g.forwardRef(function(v,b){return Ce.createElement(x,lm({},v,{ref:b}))});return p.displayName=x.displayName,p},gk=B1({chartName:"LineChart",GraphicalChild:qd,axisComponents:[{axisType:"xAxis",AxisComp:Ka},{axisType:"yAxis",AxisComp:Xa}],formatAxisMap:XC}),Jv=B1({chartName:"BarChart",GraphicalChild:Dl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ka},{axisType:"yAxis",AxisComp:Xa}],formatAxisMap:XC}),Kv=B1({chartName:"PieChart",GraphicalChild:Pi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:P1},{axisType:"radiusAxis",AxisComp:E1}],formatAxisMap:Pve,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bR=B1({chartName:"AreaChart",GraphicalChild:Co,axisComponents:[{axisType:"xAxis",AxisComp:Ka},{axisType:"yAxis",AxisComp:Xa}],formatAxisMap:XC});function Bo({title:e,value:t,color:r="purple"}){const s={purple:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",border:"border-purple-300",value:"from-purple-600 to-purple-500"},blue:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",border:"border-blue-300",value:"from-blue-600 to-blue-500"},green:{bg:"bg-gradient-to-br from-emerald-50 to-emerald-100",border:"border-emerald-300",value:"from-emerald-600 to-emerald-500"},yellow:{bg:"bg-gradient-to-br from-amber-50 to-amber-100",border:"border-amber-300",value:"from-amber-600 to-amber-500"}},a=s[r]||s.purple;return n.jsxs("div",{className:`border-2 p-4 rounded-lg shadow-md ${a.bg} ${a.border} hover:shadow-lg transition`,children:[n.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:e}),n.jsx("p",{className:`text-3xl font-bold bg-gradient-to-r ${a.value} bg-clip-text text-transparent mt-2`,children:t})]})}function jR({label:e,value:t,color:r="text-gray-900"}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:e}),n.jsx("p",{className:`text-2xl font-bold ${r} mt-2`,children:t})]})}function _R({alert:e}){const t={high:{dot:"bg-red-500",text:"text-red-700",bg:"bg-red-50"},medium:{dot:"bg-yellow-500",text:"text-yellow-700",bg:"bg-yellow-50"},low:{dot:"bg-gray-400",text:"text-gray-700",bg:"bg-gray-50"}},r=t[e==null?void 0:e.severity]||t.low;return n.jsxs("div",{className:`p-4 border border-gray-200 rounded-lg ${r.bg} flex items-start space-x-3`,children:[n.jsx("div",{className:"pt-1",children:n.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${r.dot}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`font-semibold text-sm ${r.text}`,children:e.title||e.message||"Alert"}),e.message&&n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:e.message})]}),e.created_at&&n.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-2",children:new Date(e.created_at).toLocaleDateString()})]})}function aCe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function iCe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}const m0={Applied:"#9CA3AF",Screening:"#3B82F6",Interview:"#4F46E5",Offer:"#FBBF24",Hired:"#10B981"};function lCe(){const[e,t]=g.useState({}),[r,s]=g.useState({}),[a,i]=g.useState({}),[l,o]=g.useState([]),[c,d]=g.useState(""),[u,m]=g.useState(null),[f,y]=g.useState(!0);if(g.useEffect(()=>{let R=!0;return y(!0),m(null),Promise.allSettled([q.get("/v1/invoices/dashboard/metrics"),q.get("/v1/dashboard/metrics"),q.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(F=>{var re,B;if(!R)return;const Q=F[0],W=F[1],L=F[2],I=Q.status==="fulfilled"?Q.value.data||{}:{},K=W.status==="fulfilled"?W.value.data||{}:{};if(s(I),i(K),L.status==="fulfilled"){const G=(B=(re=L.value)==null?void 0:re.data)==null?void 0:B.logs;o(Array.isArray(G)?G:[]),d("")}else o([]),d("Failed to load recruiter workflow activity.");const D={total_jobs_open:K.total_jobs_open??I.total_jobs_open??0,total_candidates:K.total_candidates??I.total_candidates??0,interviews_scheduled:K.interviews_scheduled??I.interviews_scheduled??0,offers_pending:K.offers_pending??I.offers_pending??0,employees_onboarding:K.employees_onboarding??I.employees_onboarding??0,revenue_projected:K.revenue_projected??I.revenue_projected??0,revenue_realized:K.revenue_realized??I.revenue_realized??0,utilization_rate:K.utilization_rate??I.utilization_rate??null,time_to_hire_avg:K.time_to_hire_avg??I.time_to_hire_avg??null,active_employees:K.active_employees??I.active_employees??0,alerts:(K.alerts&&Array.isArray(K.alerts)?K.alerts:[]).concat(I.alerts&&Array.isArray(I.alerts)?I.alerts:[]),compliance_alerts:K.compliance_alerts&&Array.isArray(K.compliance_alerts)?K.compliance_alerts:I.compliance_alerts&&Array.isArray(I.compliance_alerts)?I.compliance_alerts:[],candidate_intake:K.candidate_intake??0,candidate_pool:K.candidate_pool??0,candidates_hired:K.candidates_hired??0,candidates_on_hold:K.candidates_on_hold??0,_raw:{dashData:K,invData:I}};t(D),F.every(G=>G.status==="rejected")&&m(new Error("Failed to load metrics from both endpoints"))}).catch(F=>{R&&(console.error("Unexpected dashboard fetch error",F),m(F))}).finally(()=>{R&&y(!1)}),()=>{R=!1}},[]),f)return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((R,F)=>n.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg animate-pulse"},F))}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((R,F)=>n.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg animate-pulse"},F))})]})]});if(u)return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load metrics. Please check the backend or open console for details."})})]});const x=(e==null?void 0:e.candidate_intake)??0,p=(e==null?void 0:e.candidate_pool)??0,h=(e==null?void 0:e.candidates_hired)??0,v=(e==null?void 0:e.candidates_on_hold)??0,b=(e==null?void 0:e.total_jobs_open)??0,j=(e==null?void 0:e.total_candidates)??0,_=(e==null?void 0:e.interviews_scheduled)??0,N=(e==null?void 0:e.active_employees)??0,w=(e==null?void 0:e.revenue_projected)??0,k=(e==null?void 0:e.revenue_realized)??0,S=(e==null?void 0:e.utilization_rate)??null,E=(e==null?void 0:e.time_to_hire_avg)??"N/A",T=(e==null?void 0:e.offers_pending)??0,A=(e==null?void 0:e.employees_onboarding)??0,C=[{stage:"Applied",count:j,fill:m0.Applied},{stage:"Screening",count:Math.round(j*.6),fill:m0.Screening},{stage:"Interview",count:_,fill:m0.Interview},{stage:"Offer",count:T,fill:m0.Offer},{stage:"Hired",count:A,fill:m0.Hired}],P=Array.isArray(e==null?void 0:e.alerts)?e.alerts:[],O=Array.isArray(e==null?void 0:e.compliance_alerts)?e.compliance_alerts:[];return n.jsxs("div",{className:"min-h-screen p-6 sm:p-8 bg-gradient-to-br from-purple-50 via-purple-25 to-purple-50 rounded-lg max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-white",children:"Admin Dashboard"}),n.jsx("p",{className:"text-white/90 mt-2 text-lg",children:"Admin Overview"})]})})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Bo,{title:"Open Jobs",value:b,color:"purple"}),n.jsx(Bo,{title:"Total Candidates",value:j,color:"blue"}),n.jsx(Bo,{title:"Utilization Rate",value:S==null?"N/A":`${Number(S).toFixed(1)}%`,color:"green"}),n.jsx(Bo,{title:"Projected Revenue",value:`${(Number(w)/1e6).toFixed(1)}M`,color:"green"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Bo,{title:"Candidate Intake",value:x,color:"purple"}),n.jsx(Bo,{title:"Candidate Pool",value:p,color:"blue"}),n.jsx(Bo,{title:"Hired",value:h,color:"green"}),n.jsx(Bo,{title:"On Hold",value:v,color:"yellow"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mb-4",children:"Recruitment Funnel"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Jv,{data:C,margin:{top:20,right:30,left:0,bottom:20},children:[n.jsx(lo,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),n.jsx(Ka,{dataKey:"stage",stroke:"#6B7280",style:{fontSize:"12px"}}),n.jsx(Xa,{stroke:"#6B7280",style:{fontSize:"12px"}}),n.jsx(Dn,{contentStyle:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px"},formatter:R=>[R,"Candidates"]}),n.jsx(Dl,{dataKey:"count",radius:[8,8,0,0],children:C.map((R,F)=>n.jsx(wo,{fill:R.fill},`cell-${F}`))})]})})})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-6",children:"Revenue & Recruitment KPIs"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 pb-6 border-b border-gray-100 mb-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Projected Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:["",Number(w).toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Realized Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-700 mt-2",children:["",Number(k).toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg. Time to Hire"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-2",children:E==="N/A"?"N/A":`${E} days`})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[n.jsx(jR,{label:"Interviews Scheduled",value:_,color:"text-gray-900"}),n.jsx(jR,{label:"Offers Pending",value:T,color:"text-amber-600"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Alerts"}),n.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:P.length})]}),P.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No active alerts"}):n.jsxs("div",{className:"space-y-3",children:[P.slice(0,5).map((R,F)=>n.jsx(_R,{alert:R},R.id??F)),P.length>5&&n.jsxs("p",{className:"text-xs text-gray-500 text-center pt-2",children:["+",P.length-5," more"]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Compliance"}),n.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${O.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:O.length})]}),O.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No compliance issues"}):n.jsx("div",{className:"space-y-3",children:O.slice(0,5).map((R,F)=>n.jsx(_R,{alert:R},R.id??F))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Activity Tracking"}),n.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:l.length})]}),c?n.jsx("p",{className:"text-sm text-red-600",children:c}):l.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"No recruiter workflow activity yet"}):n.jsx("div",{className:"space-y-3",children:l.slice(0,6).map(R=>n.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:aCe(R.action)}),n.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:iCe(R.timestamp)})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Recruiter: ",R.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Candidate: ",R.candidate_id||"--"," | Job: ",R.job_id||"--"]})]},R.id))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-purple-200 hover:shadow-xl transition",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-4",children:"Quick Overview"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Active Employees"}),n.jsx("span",{className:"font-bold text-gray-900",children:N})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Open Jobs"}),n.jsx("span",{className:"font-bold text-gray-900",children:b})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Candidates"}),n.jsx("span",{className:"font-bold text-gray-900",children:j})]}),n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Offers Pending"}),n.jsx("span",{className:"font-bold text-amber-600",children:T})]})]})]})]})]})]})}const oCe=e=>{if(!e)return"No activity yet";const t=new Date,r=new Date(e),s=t-r,a=Math.floor(s/1e3),i=Math.floor(a/60),l=Math.floor(i/60),o=Math.floor(l/24),c=Math.floor(o/7),d=Math.floor(o/30),u=Math.floor(o/365);return a<60?"Just now":i<60?`${i} minute${i!==1?"s":""} ago`:l<24?`${l} hour${l!==1?"s":""} ago`:o===1?"Yesterday":o<7?`${o} days ago`:c<4?`${c} week${c!==1?"s":""} ago`:d<12?`${d} month${d!==1?"s":""} ago`:`${u} year${u!==1?"s":""} ago`},cCe=(e,t,r={})=>t&&t!==e?t:{"Job Created":"Job created","Job Updated":"Job updated","Job Published":"Job published","Job Unpublished":"Job unpublished","Candidate Applied":"Candidate applied","Candidate Added":"Candidate added","Resume Uploaded":"Resume uploaded","Status Changed":r.new_status?`Status changed to ${r.new_status}`:"Status changed","Interview Scheduled":"Interview scheduled","Interview Feedback Submitted":"Interview feedback submitted","Offer Sent":"Offer sent","Offer Accepted":"Offer accepted","Offer Rejected":"Offer rejected"}[e]||e,$U=({lastActivityAt:e,lastActivityType:t,lastActivityRelative:r,description:s,metadata:a,className:i=""})=>{if(!e)return n.jsx("span",{className:`text-gray-400 text-sm ${i}`,children:"No activity yet"});const l=r||oCe(e),o=cCe(t,s,a),c=new Date(e).toLocaleString();return n.jsxs("div",{className:`text-sm ${i}`,title:`${o} on ${c}`,children:[n.jsx("span",{className:"text-gray-900",children:o}),n.jsxs("span",{className:"text-gray-500",children:["  ",l]})]})},dCe=(e,t,r)=>{const s=Number(e);return Number.isFinite(s)?Math.min(r,Math.max(t,Math.trunc(s))):t};function Xp({items:e=[],renderCard:t,totalPages:r=1,currentPage:s=1,onPageChange:a,pageSize:i=9,totalRecords:l,loading:o=!1,error:c=null,onRetry:d,emptyMessage:u="No records found.",onPageSizeChange:m,pageSizeOptions:f=[9,18,27],showGoToPage:y=!0,keyExtractor:x,className:p=""}){const h=g.useRef(!0),[v,b]=g.useState(!1),[j,_]=g.useState(String(s||1)),N=Array.isArray(e)?e:[],w=Math.max(1,Number(i)||9),k=Number.isFinite(l)?Number(l):N.length,S=Math.max(1,Number(r)||1),E=S>1&&k>N.length&&N.length<=w,T=g.useMemo(()=>{if(E)return N;const O=(s-1)*w,R=O+w;return N.slice(O,R)},[N,s,w,E]);g.useEffect(()=>{a&&s>S&&a(S)},[s,S,a]),g.useEffect(()=>{if(_(String(s||1)),h.current){h.current=!1;return}b(!0);const O=setTimeout(()=>b(!1),220);return window.scrollTo({top:0,behavior:"smooth"}),()=>clearTimeout(O)},[s]);const A=k>w&&S>1,C=s>1,P=s<S;return o?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:w}).map((O,R)=>n.jsx("div",{className:"h-44 rounded-xl border border-gray-200 bg-white animate-pulse"},`skeleton-${R}`))}):c?n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsx("p",{className:"text-sm text-red-700",children:c}),d?n.jsx("button",{type:"button",onClick:d,className:"mt-3 inline-flex items-center rounded-lg px-4 py-2 text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"Retry"}):null]}):N.length?n.jsxs("div",{className:`space-y-6 ${p}`,children:[n.jsx("div",{className:`transition-all duration-200 ${v?"opacity-0 translate-y-2":"opacity-100 translate-y-0"}`,children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map((O,R)=>n.jsx(Ce.Fragment,{children:t(O,R)},x?x(O,R):(O==null?void 0:O.id)||`${R}-${s}`))})}),A?n.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",n.jsx("span",{className:"font-semibold",children:s})," of"," ",n.jsx("span",{className:"font-semibold",children:S})," | ",n.jsx("span",{className:"font-semibold",children:k})," total records"]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m?n.jsx("select",{value:w,onChange:O=>m(Number(O.target.value)),className:"rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:f.map(O=>n.jsxs("option",{value:O,children:[O," / page"]},O))}):null,y?n.jsxs("form",{onSubmit:O=>{O.preventDefault(),a&&a(dCe(j,1,S))},className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:S,value:j,onChange:O=>_(O.target.value),className:"w-20 rounded-lg border border-gray-300 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]","aria-label":"Go to page"}),n.jsx("button",{type:"submit",className:"rounded-lg border border-[var(--color-primary)] px-3 py-2 text-sm text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-white transition-colors",children:"Go"})]}):null,n.jsx("button",{type:"button",onClick:()=>a==null?void 0:a(s-1),disabled:!C,className:"h-10 w-10 rounded-full border border-[var(--color-primary)] text-[var(--color-primary)] shadow-sm hover:shadow-md hover:bg-[var(--color-primary)] hover:text-white disabled:border-gray-200 disabled:text-gray-400 disabled:bg-gray-50 disabled:shadow-none transition-all","aria-label":"Previous page",children:""}),n.jsxs("div",{className:"rounded-full bg-emerald-100 px-4 py-2 text-sm font-semibold text-emerald-700 shadow-[0_0_0_3px_rgba(16,185,129,0.18)]",children:[s," / ",S]}),n.jsx("button",{type:"button",onClick:()=>a==null?void 0:a(s+1),disabled:!P,className:"h-10 w-10 rounded-full border border-[var(--color-primary)] text-[var(--color-primary)] shadow-sm hover:shadow-md hover:bg-[var(--color-primary)] hover:text-white disabled:border-gray-200 disabled:text-gray-400 disabled:bg-gray-50 disabled:shadow-none transition-all","aria-label":"Next page",children:""})]})]})}):null]}):n.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-8 text-center text-gray-600",children:u})}const y_=[9,18,27],v_=(e,t)=>{const r=Number(e);return Number.isFinite(r)&&r>0?r:t};function Yp(e,{defaultPage:t=1,defaultLimit:r=9}={}){const s=`${e}:page`,a=`${e}:limit`,[i,l]=g.useState(()=>v_(sessionStorage.getItem(s),t)),[o,c]=g.useState(()=>{const m=v_(sessionStorage.getItem(a),r);return y_.includes(m)?m:r});g.useEffect(()=>{sessionStorage.setItem(s,String(i))},[i,s]),g.useEffect(()=>{sessionStorage.setItem(a,String(o))},[o,a]);const d=m=>{const f=v_(m,r);c(y_.includes(f)?f:r)},u=g.useMemo(()=>y_,[]);return{page:i,setPage:l,limit:o,setLimit:d,pageSizeOptions:u}}function b_(e){return e&&e.trim().split(/\s+/).map(t=>{if(t===t.toUpperCase())return t;const r=t.toLowerCase();return r.length<=3||/[&\/-]/.test(r)?r.toUpperCase():r.charAt(0).toUpperCase()+r.slice(1)}).join(" ")}function wR({status:e}){const t={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-700"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold uppercase ${t[e]||t.draft}`,children:e})}function uCe({skills:e,setSkills:t,suggestions:r=[],onSearch:s}){const[a,i]=g.useState(""),l=r.filter(d=>a&&d.toLowerCase().includes(a.toLowerCase())&&!e.includes(d)),o=d=>{const u=d.trim();u&&(e.includes(u)||t([...e,u]),i(""))},c=d=>{d.key==="Enter"||d.key===","?(d.preventDefault(),o(a.replace(",",""))):d.key==="Backspace"&&!a&&e.length&&t(e.slice(0,-1))};return n.jsxs("div",{children:[n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((d,u)=>n.jsxs("button",{type:"button",onClick:()=>t(e.filter(m=>m!==d)),className:"flex items-center gap-2 bg-indigo-50 text-indigo-800 px-2 py-1 rounded-full text-sm hover:opacity-90 shadow-sm",title:"Click to remove",children:[d," ",n.jsx("span",{className:"text-xs",children:"x"})]},u))}),n.jsx("input",{type:"text",placeholder:"Type skill and press Enter (e.g. React)",value:a,onChange:d=>{i(d.target.value),s==null||s(d.target.value)},onKeyDown:c,onBlur:()=>a&&o(a),className:"w-full p-3 border rounded"}),l.length>0&&n.jsx("div",{className:"border rounded mt-1 bg-white shadow max-h-40 overflow-y-auto z-10 relative",children:l.slice(0,6).map(d=>n.jsx("div",{onMouseDown:()=>o(d),className:"px-3 py-2 cursor-pointer hover:bg-indigo-50 text-sm",children:d},d))})]})}function NR({open:e,onClose:t,title:r,children:s,saving:a}){return e?n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{a||t()}}),n.jsxs("div",{className:"relative bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:r}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-black text-xl",children:"x"})]}),s]})]}):null}function j_(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState([]),[c,d]=g.useState(!0),[u,m]=g.useState([]),[f,y]=g.useState(!1),[x,p]=g.useState([]),[h,v]=g.useState("all"),[b,j]=g.useState("all"),[_,N]=g.useState(!1),[w,k]=g.useState(null),[S,E]=g.useState(null),[T,A]=g.useState([]),[C,P]=g.useState({sender:"",subject:"",body:""}),[O,R]=g.useState(!1),[F,Q]=g.useState(""),[W,L]=g.useState(""),[I,K]=g.useState(!1),[D,Y]=g.useState({title:"",description:"",department:"",location:"",job_type:"",salary_range:"",min_experience:"",max_experience:"",status:"draft",sla_days:""}),[re,B]=g.useState([]),[G,ce]=g.useState(!1),[ae,fe]=g.useState(""),[ne,he]=g.useState("all"),[M,Se]=g.useState(""),{page:me,setPage:Pe,limit:ue,setLimit:ye,pageSizeOptions:Ye}=Yp("jobs:listing"),lt=async Be=>{var xt;if(!Be||Be.trim().length===0){A([]);return}try{const mt=await q.get(`/v1/skills/search?q=${Be}`);A(((xt=mt.data)==null?void 0:xt.results)||[])}catch(mt){console.error("Skill search failed",mt),A([])}};g.useEffect(()=>{Ae(),$e(),Me()},[]),g.useEffect(()=>{if(!e.length){p([]);return}const Be=e.map(xt=>{const mt=(u||[]).filter(Ne=>Ne.job_id&&String(Ne.job_id)===String(xt.job_id)),It=mt.length>0?mt[0]:null,Yt=It?{full_name:It.full_name,email:It.email,status:It.status,public_id:It.public_id}:null;return{jobId:xt.id,job_id:xt.job_id,title:xt.title,department:xt.department,status:xt.status,applicantsCount:mt.length,latestCandidate:Yt,lastActivity:xt.last_activity_at,lastActivityType:xt.last_activity_type,lastActivityRelative:xt.last_activity_relative}});p(Be)},[e,l,u]);const xe=()=>{Y({title:"",description:"",department:"",location:"",job_type:"",salary_range:"",min_experience:"",max_experience:"",apply_by:"",status:"draft",sla_days:""}),B([]),k(null)},Ae=async()=>{var Be,xt;s(!0),i(null);try{const mt=await q.get("/v1/jobs"),It=((Be=mt.data)==null?void 0:Be.data)||((xt=mt.data)==null?void 0:xt.jobs)||mt.data||[],Yt=(Array.isArray(It)?It:[]).map(Ne=>({...Ne,skills:Array.isArray(Ne.skills)?Ne.skills:Ne.skills?(""+Ne.skills).split(",").map(st=>st.trim()).filter(Boolean):[]}));t(Yt)}catch(mt){console.error("Failed to load jobs",mt),i(mt.message||"Failed to load"),t([])}finally{s(!1)}},$e=async()=>{var Be;d(!0);try{const xt=await q.get("/v1/candidates"),mt=((Be=xt.data)==null?void 0:Be.data)||xt.data||[];o(Array.isArray(mt)?mt:[])}catch(xt){console.error("Failed to load candidates",xt),o([])}finally{d(!1)}},Me=async()=>{var Be;y(!0);try{const xt=await q.get("/v1/jobs/submissions");m(((Be=xt.data)==null?void 0:Be.candidates)||[])}catch(xt){console.error("Failed to load job applications",xt),m([])}finally{y(!1)}},Fe=()=>{if(!D.title.trim())return alert("Title is required"),!1;if(!D.description.trim())return alert("Description is required"),!1;const Be=D.min_experience===""?null:Number(D.min_experience),xt=D.max_experience===""?null:Number(D.max_experience);return Be!=null&&xt!=null&&Be>xt?(alert("Min experience cannot be greater than Max experience."),!1):Be!=null&&Be<0?(alert("Min experience cannot be negative"),!1):xt!=null&&xt<0?(alert("Max experience cannot be negative"),!1):Array.isArray(re)?!0:(alert("Skills invalid"),!1)},We=async Be=>{var mt,It;if(Be.preventDefault(),!Fe())return;const xt={...D,skills:re,min_experience:D.min_experience===""?null:Number(D.min_experience),max_experience:D.max_experience===""?null:Number(D.max_experience),sla_days:D.sla_days===""?null:Number(D.sla_days)};try{ce(!0),w?(await q.put(`/v1/jobs/${w.id}`,xt),alert("Job updated")):(await q.post("/v1/jobs",xt),alert("Job created")),xe(),N(!1),await Ae()}catch(Yt){console.error("Save job error",Yt),alert(((It=(mt=Yt.response)==null?void 0:mt.data)==null?void 0:It.detail)||Yt.message||"Error saving job")}finally{ce(!1)}},Ze=Be=>{k(Be),Y({title:Be.title||"",description:Be.description||"",department:Be.department||"",location:Be.location||"",job_type:Be.job_type||"",salary_range:Be.salary_range||"",min_experience:Be.min_experience??"",max_experience:Be.max_experience??"",apply_by:Be.apply_by?Be.apply_by.slice(0,10):"",status:Be.status||"draft"}),B(Be.skills||[]),N(!0)},pt=async Be=>{var xt,mt;if(confirm(`Close job "${Be.title}"? This will archive it.`))try{await q.post(`/v1/jobs/${Be.id}/close`),await Ae()}catch(It){console.error("Close job error",It),alert(((mt=(xt=It.response)==null?void 0:xt.data)==null?void 0:mt.detail)||It.message||"Error closing job")}},Ve=g.useMemo(()=>{const Be=new Set;return e.forEach(xt=>(xt.skills||[]).forEach(mt=>mt&&Be.add(mt))),Array.from(Be).sort()},[e]),Je=e.filter(Be=>{if(ne!=="all"&&Be.status!==ne)return!1;const xt=ae.trim().toLowerCase();if(xt&&!`${Be.title} ${Be.description} ${Be.department} ${Be.location}`.toLowerCase().includes(xt))return!1;if(M){const mt=M.trim().toLowerCase();if(!(Be.skills||[]).some(Yt=>Yt.toLowerCase().includes(mt)))return!1}return!0}),Ke=Math.max(1,Math.ceil(Je.length/ue));g.useEffect(()=>{me>Ke&&Pe(Ke)},[me,Ke,Pe]);const gt=[...Je].sort((Be,xt)=>{const mt=new Date(xt.created_at||0),It=new Date(Be.created_at||0);return mt-It}),At=g.useMemo(()=>{const Be=new Set(e.map(xt=>xt.status).filter(Boolean));return Array.from(Be)},[e]),Lt=g.useMemo(()=>{const Be=new Set(e.map(xt=>xt.department).filter(Boolean));return Array.from(Be)},[e]),Bt=g.useMemo(()=>x.filter(Be=>{const xt=h==="all"||!h||Be.status===h,mt=b==="all"||!b||(Be.department||"").toLowerCase()===b.toLowerCase();return xt&&mt}),[x,h,b]),ar=r||c,er=async Be=>{var xt,mt;if(Be.preventDefault(),Q(""),L(""),!C.subject.trim()||!C.body.trim()){L("Subject and body are required to parse a job.");return}R(!0);try{await q.post("/v1/jobs/parse-email",{sender:C.sender||void 0,subject:C.subject,body:C.body}),Q("Job created from email successfully."),P({sender:"",subject:"",body:""}),await Ae()}catch(It){console.error("Email parsing failed",It),L(((mt=(xt=It==null?void 0:It.response)==null?void 0:xt.data)==null?void 0:mt.detail)||(It==null?void 0:It.message)||"Failed to parse job from email. Please confirm the format.")}finally{R(!1)}};return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Jobs"}),n.jsx("p",{className:"text-gray-600",children:"Create and manage job postings"})]}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{onClick:()=>{xe(),N(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"+ Create Job"}),n.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"+ Parse Email"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Jobs & Applicants Overview"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track how many candidates are applying to each open role."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("select",{value:h,onChange:Be=>{v(Be.target.value)},className:"px-3 py-2 border rounded text-sm",children:[n.jsx("option",{value:"all",children:"All Status"}),At.map(Be=>n.jsx("option",{value:Be,children:Be.toUpperCase()},Be))]}),n.jsxs("select",{value:b,onChange:Be=>{j(Be.target.value)},className:"px-3 py-2 border rounded text-sm",children:[n.jsx("option",{value:"all",children:"All departments"}),Lt.map(Be=>n.jsx("option",{value:Be,children:Be},Be))]})]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:ar?n.jsx("div",{className:"py-6 text-center text-gray-500 text-sm",children:"Loading job insights..."}):Bt.length===0?n.jsx("div",{className:"py-6 text-center text-gray-500 text-sm",children:"No data available for the current filters."}):n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"S. No."}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Job ID"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Job"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Department"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-center font-medium text-gray-500",children:"Applicants"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Latest Candidate"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Last Activity"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:Bt.map((Be,xt)=>{var mt;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-gray-700",children:xt+1}),n.jsx("td",{className:"px-4 py-3 font-mono text-xs text-gray-600",children:Be.job_id||Be.job_code||Be.public_job_id||"--"}),n.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:Be.title||"Untitled role"}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:Be.department||"--"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(wR,{status:Be.status||"draft"})}),n.jsx("td",{className:"px-4 py-3 text-center font-semibold text-indigo-600",children:Be.applicantsCount}),n.jsx("td",{className:"px-4 py-3 text-gray-700",children:Be.latestCandidate?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:Be.latestCandidate.name||Be.latestCandidate.email||"Candidate"}),n.jsx("div",{className:"text-xs text-gray-500",children:((mt=Be.latestCandidate.status)==null?void 0:mt.replace(/_/g," "))||"status unknown"})]}):n.jsx("span",{className:"text-gray-400",children:"No applicants yet"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx($U,{lastActivityAt:Be.lastActivity,lastActivityType:Be.lastActivityType,lastActivityRelative:Be.lastActivityRelative})})]},Be.jobId)})})]})})]}),n.jsx(NR,{open:I,saving:O,onClose:()=>{O||(K(!1),P({sender:"",subject:"",body:""}),L(""),Q(""))},title:"Create Job from Email",children:n.jsxs("form",{className:"space-y-4",onSubmit:er,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From"}),n.jsx("input",{type:"email",value:C.sender,onChange:Be=>P(xt=>({...xt,sender:Be.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-2",placeholder:"example@client.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email subject *"}),n.jsx("input",{type:"text",value:C.subject,onChange:Be=>P(xt=>({...xt,subject:Be.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-2",placeholder:"Urgent hiring request - Senior React Developer",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email body *"}),n.jsx("textarea",{value:C.body,onChange:Be=>P(xt=>({...xt,body:Be.target.value})),className:"mt-1 w-full rounded border border-gray-300 px-3 py-3 h-48",placeholder:"Paste the requirement email text here...",required:!0})]}),W&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",children:W}),F&&n.jsx("div",{className:"rounded border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-600",children:F}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{type:"button",disabled:O,onClick:()=>{K(!1),P({sender:"",subject:"",body:""}),L(""),Q("")},className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:O,className:"px-4 py-2 bg-indigo-600 text-white rounded disabled:opacity-60",children:O?"Parsing...":"Parse & Create Job"})]})]})}),n.jsx(NR,{open:_,saving:G,onClose:()=>{xe(),N(!1)},title:w?"Edit Job":"Create Job",children:n.jsxs("form",{onSubmit:We,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Job Title *"}),n.jsx("input",{className:"w-full p-3 border rounded",value:D.title,onChange:Be=>Y({...D,title:Be.target.value}),onBlur:Be=>Y({...D,title:b_(Be.target.value)}),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),n.jsxs("select",{className:"w-full p-3 border rounded",value:D.status,onChange:Be=>Y({...D,status:Be.target.value}),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"closed",children:"Closed"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),n.jsx("textarea",{rows:5,className:"w-full p-3 border rounded",value:D.description,onChange:Be=>Y({...D,description:Be.target.value}),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsx("input",{className:"p-3 border rounded",placeholder:"Department",value:D.department,onChange:Be=>Y({...D,department:Be.target.value}),onBlur:Be=>Y({...D,department:b_(Be.target.value)})}),n.jsx("input",{className:"p-3 border rounded",placeholder:"Location",value:D.location,onChange:Be=>Y({...D,location:Be.target.value}),onBlur:Be=>Y({...D,location:b_(Be.target.value)})}),n.jsxs("select",{className:"p-3 border rounded",value:D.job_type,onChange:Be=>Y({...D,job_type:Be.target.value}),children:[n.jsx("option",{value:"",children:"Job type"}),n.jsx("option",{value:"Full-time",children:"Full-time"}),n.jsx("option",{value:"Remote",children:"Remote"}),n.jsx("option",{value:"Hybrid",children:"Hybrid"})]}),n.jsx("input",{className:"p-3 border rounded",placeholder:"Salary range",value:D.salary_range,onChange:Be=>Y({...D,salary_range:Be.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Date to Apply *"}),n.jsx("input",{type:"date",value:D.apply_by,onChange:Be=>Y(xt=>({...xt,apply_by:Be.target.value})),className:"mt-1 block w-full rounded-md border p-2",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"Min experience",value:D.min_experience??"",onChange:Be=>Y({...D,min_experience:Be.target.value})}),n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"SLA days",value:D.sla_days??"",onChange:Be=>Y({...D,sla_days:Be.target.value})}),n.jsx("input",{type:"number",min:"0",className:"p-3 border rounded",placeholder:"Max experience",value:D.max_experience??"",onChange:Be=>Y({...D,max_experience:Be.target.value})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Skills"}),n.jsx(uCe,{skills:re,setSkills:B,suggestions:T,onSearch:lt})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{xe(),N(!1)},className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:G,className:"px-4 py-2 bg-green-600 text-white rounded",children:G?"Saving...":w?"Update Job":"Create Job"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("input",{placeholder:"Search by title, dept, location or description",className:"p-3 border rounded w-full",value:ae,onChange:Be=>{fe(Be.target.value),Pe(1)}}),n.jsxs("select",{className:"p-3 border rounded",value:ne,onChange:Be=>{he(Be.target.value),Pe(1)},children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"closed",children:"Closed"})]})]}),n.jsx("div",{className:"flex items-center gap-3 mt-3 md:mt-0",children:n.jsx("input",{placeholder:"Filter skills (type)",className:"p-3 border rounded",value:M,onChange:Be=>{Se(Be.target.value),Pe(1)}})})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Quick Filters"}),n.jsx("div",{className:"text-sm text-gray-400",children:"Tap a skill to filter"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ve.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No skills available yet."}):Ve.slice(0,12).map(Be=>n.jsx("button",{onClick:()=>{Se(Be),Pe(1)},className:`px-3 py-1 rounded-full text-sm border shadow-sm hover:shadow-md transition ${M===Be?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:Be},Be)),M&&n.jsx("button",{onClick:()=>{Se(""),Pe(1)},className:"px-3 py-1 rounded-full text-sm border bg-gray-50 text-gray-700",children:"Clear"})]})]})]}),n.jsx(Xp,{items:gt,currentPage:me,totalPages:Ke,onPageChange:Pe,pageSize:ue,onPageSizeChange:Be=>{ye(Be),Pe(1)},pageSizeOptions:Ye,totalRecords:gt.length,loading:r,error:a?`Error: ${a}`:null,onRetry:Ae,emptyMessage:"No jobs found.",renderCard:Be=>n.jsxs("article",{className:"bg-white p-5 rounded-lg shadow hover:shadow-md transition",children:[n.jsxs("div",{className:"flex justify-between items-start gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold",children:Be.title}),n.jsx(wR,{status:Be.status})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-3",children:Be.description}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(Be.skills||[]).slice(0,8).map((xt,mt)=>n.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 rounded text-xs",children:xt},`${Be.id}-skill-${mt}`))}),n.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:[n.jsxs("span",{children:[Be.department?`${Be.department}  `:"",Be.location]}),n.jsxs("span",{className:"ml-3",children:[Be.min_experience!=null?`${Be.min_experience} yrs`:"0",Be.max_experience?` - ${Be.max_experience} yrs`:""]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("button",{onClick:()=>Ze(Be),className:"text-sm px-3 py-1 bg-blue-600 text-white rounded",children:"Edit"}),n.jsx("button",{onClick:()=>pt(Be),disabled:Be.status==="closed",className:"text-sm px-3 py-1 bg-gray-100 rounded hover:bg-gray-200",children:Be.status==="closed"?"Closed":"Close"}),n.jsx("button",{onClick:()=>E(S===Be.id?null:Be.id),className:"text-sm px-3 py-1 bg-white border rounded",children:"Details"})]})]}),S===Be.id&&n.jsxs("div",{className:"mt-4 border-t pt-4 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Type:"})," ",Be.job_type||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Salary:"})," ",Be.salary_range||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Skills:"})," ",(Be.skills||[]).join(", ")||"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"Posted:"})," ",Be.created_at?new Date(Be.created_at).toLocaleDateString():"N/A"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"SLA days:"})," ",Be.sla_days??"N/A"]})]})]})})]})}const mCe=e=>e?new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"--",fCe=e=>{const t=o=>String(o).padStart(2,"0"),r=e.getFullYear(),s=t(e.getMonth()+1),a=t(e.getDate()),i=t(e.getHours()),l=t(e.getMinutes());return`${r}-${s}-${a}T${i}:${l}`},jm=e=>String(e??"").trim(),qc=e=>jm(e).toLowerCase(),kR=e=>jm((e==null?void 0:e.id)||(e==null?void 0:e.job_id)||(e==null?void 0:e.requirement_id)),f0=e=>{var t;return jm((e==null?void 0:e.candidate_id)||(e==null?void 0:e.candidateId)||(e==null?void 0:e.id)||((t=e==null?void 0:e.candidate)==null?void 0:t.id)||(e==null?void 0:e.user_id))},hCe=e=>{switch(e.toLowerCase()){case"scheduled":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"no_show":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"rescheduled":return"bg-orange-100 text-orange-800";case"pending":return"bg-purple-100 text-purple-800";case"confirmed":return"bg-emerald-100 text-emerald-800";case"rejected":return"bg-rose-100 text-rose-800";case"on_hold":return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-700"}},pCe=e=>{switch(e.toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";case"rescheduled":return"Rescheduled";case"pending":return"Pending";case"confirmed":return"Confirmed";case"rejected":return"Rejected";case"on_hold":return"On Hold";default:return e?e.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"Unknown"}};function SR(){const e=(Tl==null?void 0:Tl())||{},t=(e==null?void 0:e.user)||null,r=((e==null?void 0:e.role)||(t==null?void 0:t.role)||localStorage.getItem("role")||"").toLowerCase(),[s]=Os(),[a,i]=g.useState([]),[l,o]=g.useState(""),[c,d]=g.useState([]),[u,m]=g.useState(new Set),[f,y]=g.useState(!1),[x,p]=g.useState(""),[h,v]=g.useState("ai_chat"),[b,j]=g.useState(""),[_,N]=g.useState(""),[w,k]=g.useState(""),[S,E]=g.useState(""),[T,A]=g.useState(!1),[C,P]=g.useState(""),[O,R]=g.useState([]),[F,Q]=g.useState(!1),[W,L]=g.useState(""),[I,K]=g.useState(0),[D,Y]=g.useState({currentPage:1,totalPages:1,totalRecords:0}),{page:re,setPage:B,limit:G,setLimit:ce,pageSizeOptions:ae}=Yp("interviews:listing"),fe=(s.get("candidate_id")||s.get("candidateId")||"").trim(),ne=(s.get("job_id")||s.get("jobId")||"").trim(),he=(s.get("candidate_name")||s.get("candidateName")||"").trim(),M=(s.get("job_title")||s.get("jobTitle")||"").trim(),[Se,me]=g.useState(!1),[Pe,ue]=g.useState(""),ye=!!(fe||ne),Ye=!!ne,lt=!!Pe,xe=g.useMemo(()=>{if(!ne)return"";const Ve=qc(ne),Je=a.find(Ke=>qc(Ke==null?void 0:Ke.id)===Ve||qc(Ke==null?void 0:Ke.job_id)===Ve);return kR(Je)||jm(ne)},[a,ne]);g.useEffect(()=>{r!=="candidate"&&Ae()},[r]),g.useEffect(()=>{r!=="candidate"&&Me()},[r,re,G,I]),g.useEffect(()=>{if(!l){d([]),m(new Set),ue(""),p("");return}$e(l)},[l]),g.useEffect(()=>{me(!1),ue("")},[fe,ne]),g.useEffect(()=>{if(r==="candidate"||Se||!fe&&!ne)return;if(!l&&xe){o(xe);return}if(xe&&l!==xe){o(xe);return}if(!fe){me(!0);return}if(!l||f||qc(x)!==qc(l))return;const Ve=c.find(Ke=>qc(f0(Ke))===qc(fe));if(!Ve){ue(""),P("Prefilled candidate was not found in the selected job applicants."),me(!0);return}const Je=f0(Ve);if(!Je){ue(""),me(!0);return}m(new Set([Je])),ue(Je),me(!0)},[r,Se,fe,ne,xe,l,f,x,c]);const Ae=async()=>{try{const Ve=await q.get("/v1/interviews/recruiter/jobs");i(Array.isArray(Ve.data)?Ve.data:[])}catch(Ve){console.error("Failed to load jobs:",Ve),i([])}},$e=async Ve=>{var Je,Ke,gt;y(!0),P("");try{const Lt=(((Je=(await q.get("/v1/interviews/recruiter/job-applicants",{params:{job_id:Ve}})).data)==null?void 0:Je.results)||[]).map(Bt=>{const ar=f0(Bt);return{...Bt,candidate_id:ar||jm(Bt==null?void 0:Bt.candidate_id)}}).filter(Bt=>jm(Bt==null?void 0:Bt.candidate_id));d(Lt)}catch(At){d([]),P(((gt=(Ke=At==null?void 0:At.response)==null?void 0:Ke.data)==null?void 0:gt.detail)||"Failed to load applicants for this job.")}finally{y(!1),p(Ve)}},Me=async()=>{var Ve,Je;Q(!0),L("");try{const gt=(await q.get("/v1/interviews/recruiter/list",{params:{page:re,limit:G}})).data||{},At=Array.isArray(gt.data)?gt.data:gt.results||[],Lt=gt.totalRecords??gt.count??(Array.isArray(At)?At.length:0),Bt=gt.totalPages??Math.max(1,Math.ceil((Lt||0)/Math.max(1,G))),ar=gt.currentPage??re;R(Array.isArray(At)?At:[]),Y({currentPage:ar,totalPages:Bt,totalRecords:Lt})}catch(Ke){L(((Je=(Ve=Ke==null?void 0:Ke.response)==null?void 0:Ve.data)==null?void 0:Je.detail)||"Failed to load interviews. Please try again."),R([]),Y({currentPage:1,totalPages:1,totalRecords:0})}finally{Q(!1)}},Fe=Ve=>{lt||m(Je=>{const Ke=new Set(Je);return Ke.has(Ve)?Ke.delete(Ve):Ke.add(Ve),Ke})},We=()=>{if(lt)return;const Ve=c.map(Je=>f0(Je)).filter(Boolean);u.size===Ve.length?m(new Set):m(new Set(Ve))},Ze=async()=>{var Je,Ke;if(P(""),!l||u.size===0||!b){P("Select job, candidates, and schedule time.");return}if(!h){P("Select an interview type.");return}const Ve=new Date(b);if(Number.isNaN(Ve.getTime())){P("Select a valid schedule date and time.");return}if(Ve<new Date){P("Schedule time must be in the future.");return}if(h==="video"&&!_.trim()){P("Online meeting link is required (Google Meet, Teams, Zoom, etc.).");return}if(h==="in_person"&&!w.trim()){P("Location is required for in-person interviews.");return}A(!0);try{await q.post("/v1/interviews/recruiter/schedule-bulk",{job_id:l,candidate_ids:Array.from(u),interview_type:h,scheduled_at:new Date(b).toISOString(),meeting_link:h==="video"?_.trim():null,location:h==="in_person"?w.trim():null,contact_person:h==="in_person"?S.trim():null}),m(lt?new Set([Pe]):new Set),N(""),k(""),E(""),j(""),await Me(),await $e(l),K(Date.now())}catch(gt){P(((Ke=(Je=gt==null?void 0:gt.response)==null?void 0:Je.data)==null?void 0:Ke.detail)||"Failed to schedule interviews. Please try again.")}finally{A(!1)}},pt=g.useMemo(()=>[...O].sort((Ve,Je)=>(Je.overall_ai_score||0)-(Ve.overall_ai_score||0)),[O]);return r==="candidate"?n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"My Interviews"}),n.jsx("p",{className:"text-gray-600",children:"Visit your candidate dashboard to join interviews and submit feedback."})]})}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interviews"}),n.jsx("p",{className:"text-gray-600",children:"Schedule, monitor, and track candidate interviews"})]}),n.jsx("button",{onClick:Me,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),W&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:W}),r!=="candidate"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Schedule Interviews"}),ye&&n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm text-indigo-800",children:["Manual scheduling mode",(he||fe)&&n.jsxs("span",{children:[" ","for"," ",n.jsx("span",{className:"font-semibold",children:he||fe})]}),(M||ne)&&n.jsxs("span",{children:[" ","on"," ",n.jsx("span",{className:"font-semibold",children:M||ne})]}),"."]}),lt&&n.jsx("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:"Candidate selection is auto-locked from workflow context."}),C&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:C}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Job"}),n.jsxs("select",{value:l,onChange:Ve=>o(Ve.target.value),disabled:Ye,className:`w-full border rounded px-3 py-2 ${Ye?"bg-gray-50 text-gray-500":""}`,children:[n.jsx("option",{value:"",children:"Select job"}),a.map(Ve=>{const Je=kR(Ve);return Je?n.jsx("option",{value:Je,children:Ve.title||Ve.job_id||"Untitled Job"},Je):null})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Schedule Date & Time"}),n.jsx("input",{type:"datetime-local",value:b,onChange:Ve=>j(Ve.target.value),min:fCe(new Date),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Interview Type"}),n.jsxs("select",{value:h,onChange:Ve=>v(Ve.target.value),className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"ai_chat",children:"AI Chat Interview"}),n.jsx("option",{value:"video",children:"Online Meeting (Meet/Teams/Zoom)"}),n.jsx("option",{value:"in_person",children:"In-Person"})]})]}),h==="video"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Online Meeting Link"}),n.jsx("input",{type:"url",value:_,onChange:Ve=>N(Ve.target.value),placeholder:"https://meet.google.com/... or https://teams.microsoft.com/...",className:"w-full border rounded px-3 py-2"})]}),h==="in_person"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Location"}),n.jsx("input",{value:w,onChange:Ve=>k(Ve.target.value),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Contact Person"}),n.jsx("input",{value:S,onChange:Ve=>E(Ve.target.value),className:"w-full border rounded px-3 py-2"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Applicants"}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Selected: ",u.size]})]}),f?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading applicants..."}):c.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:l?"No applicants found for the selected job.":"Select a job to view applicants."}):n.jsxs("div",{className:"border rounded-lg divide-y",children:[!lt&&n.jsxs("div",{className:"p-3 flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:u.size===c.length,onChange:We}),"Select all (",c.length,")"]}),c.map(Ve=>{const Je=f0(Ve);return Je?n.jsxs("label",{className:"p-3 flex items-center gap-3 text-sm",children:[n.jsx("input",{type:"checkbox",checked:u.has(Je),onChange:()=>Fe(Je),disabled:r==="candidate"||lt}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:Ve.full_name||"Candidate"}),n.jsxs("div",{className:"text-gray-500",children:[Ve.email," | ",Ve.phone]})]})]},Je):null})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:Ze,disabled:T||!l||u.size===0||!b||!h,className:"px-5 py-2 rounded bg-emerald-600 text-white font-semibold disabled:opacity-60",children:T?"Scheduling...":"Schedule Interview"})})]}),r!=="recruiter"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interview Schedule"}),n.jsx(Xp,{items:O,totalPages:D.totalPages,currentPage:D.currentPage,onPageChange:B,totalRecords:D.totalRecords,pageSize:G,onPageSizeChange:Ve=>{ce(Ve),B(1)},pageSizeOptions:ae,loading:F,error:W||null,onRetry:Me,emptyMessage:"No interviews scheduled.",renderCard:Ve=>{var Je,Ke,gt;return n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-gray-900",children:[((Je=Ve.candidate)==null?void 0:Je.full_name)||"Candidate"," | ",((Ke=Ve.job)==null?void 0:Ke.title)||"Job"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[(gt=Ve.mode)==null?void 0:gt.replace(/_/g," "),"  ",mCe(Ve.scheduled_at)]}),Ve.location?n.jsxs("div",{className:"text-sm text-gray-600",children:["Location: ",Ve.location]}):null,Ve.contact_person?n.jsxs("div",{className:"text-sm text-gray-600",children:["Contact: ",Ve.contact_person]}):null]}),n.jsxs("div",{className:"text-sm text-right",children:[n.jsx("span",{className:`px-3 py-1 rounded-full font-medium ${hCe(Ve.status||"scheduled")}`,children:pCe(Ve.status||"scheduled")}),Ve.overall_ai_score!==null&&Ve.overall_ai_score!==void 0?n.jsxs("div",{className:"mt-2 text-gray-600",children:["AI Score: ",Ve.overall_ai_score]}):null]})]})})}})]}),r==="account_manager"&&n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top AI Scores"}),pt.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No AI scores yet."}):n.jsx("div",{className:"divide-y",children:pt.slice(0,5).map(Ve=>{var Je,Ke;return n.jsxs("div",{className:"py-3 flex justify-between text-sm",children:[n.jsxs("div",{children:[((Je=Ve.candidate)==null?void 0:Je.full_name)||"Candidate"," |"," ",((Ke=Ve.job)==null?void 0:Ke.title)||"Job"]}),n.jsx("div",{className:"font-semibold",children:Ve.overall_ai_score??"--"})]},Ve.id)})})]})]})}const xCe=async e=>q.get(`/v1/interviews/${e}`),gCe=async e=>q.post(`/v1/interviews/${e}/start`),yCe=async e=>q.get(`/v1/interviews/${e}/question`),vCe=async(e,t)=>q.post(`/v1/interviews/${e}/answer`,{answer:t}),bCe=async e=>q.post(`/v1/interviews/${e}/complete`),jCe=async(e,t)=>q.get(`/v1/interview-summary/${e}/${t}`);function _Ce(e){const[t,r]=g.useState(null),[s,a]=g.useState(!1),[i,l]=g.useState(null),[o,c]=g.useState([]),[d,u]=g.useState(null),[m,f]=g.useState(0),y=g.useCallback(async()=>{if(e)try{a(!0);const v=await xCe(e);r(v.data)}catch{l("Failed to load interview")}finally{a(!1)}},[e]),x=g.useCallback(async()=>{var v,b;try{a(!0);const j=await gCe(e);(b=(v=j.data)==null?void 0:v.question)!=null&&b.question_text&&(u(j.data.question),c([{type:"question",text:j.data.question.question_text}]),f(1))}catch{l("Failed to start interview")}finally{a(!1)}},[e]),p=g.useCallback(async()=>{var b;const v=await yCe(e);if(!((b=v.data)!=null&&b.question_text)){u(null);return}u(v.data),c(j=>[...j,{type:"question",text:v.data.question_text}]),f(j=>j+1)},[e]),h=g.useCallback(async v=>{var b,j;if(v!=null&&v.trim())try{a(!0),l(null),c(N=>[...N,{type:"answer",text:v}]);const _=await vCe(e,v);if((b=_.data)!=null&&b.feedback&&c(N=>[...N,{type:"feedback",text:Array.isArray(_.data.feedback)?_.data.feedback.join(", "):_.data.feedback}]),(j=_.data)!=null&&j.is_last_question){u(null),await bCe(e),c(N=>[...N,{type:"system",text:" Your interview is completed. Thank you for your time."}]),r(N=>({...N||{},status:"completed"}));try{const N=await jCe(t.candidate_id,t.job_id);r(w=>({...w||{},summary:N.data}))}catch{console.warn("Summary fetch failed, interview already completed")}}else await p()}catch(_){console.error(_),l("Failed to submit answer")}finally{a(!1)}},[e,t,p]);return{interview:t,loading:s,error:i,conversation:o,currentQuestion:d,questionCount:m,loadInterview:y,startInterview:x,answerQuestion:h}}const wCe=async e=>q.post("/v1/ai-video-interviews",e),NCe=async e=>q.post(`/v1/ai-video-interviews/${e}/start`),kCe=async(e,t,r,s)=>q.post(`/v1/ai-video-interviews/${e}/answer`,{question_index:t,video_url:r,duration:s}),SCe=async e=>q.post(`/v1/ai-video-interviews/${e}/complete`);function CCe(){const[e,t]=g.useState(null),[r,s]=g.useState([]),[a,i]=g.useState(0),[l,o]=g.useState(!1),[c,d]=g.useState(null),u=g.useCallback(async(x,p)=>{try{o(!0),d(null);const h=await wCe({candidate_id:x,job_id:p,recording_enabled:!0});t(h.data.interview_id),s(h.data.questions||[]),i(0)}catch{d("Failed to create AI video interview")}finally{o(!1)}},[]),m=g.useCallback(async()=>{if(e)try{o(!0),d(null),await NCe(e)}catch{d("Failed to start AI video interview")}finally{o(!1)}},[e]),f=g.useCallback(async(x,p)=>{if(e)try{o(!0),d(null),await kCe(e,a,x,p),i(h=>h+1)}catch{d("Failed to submit video answer")}finally{o(!1)}},[e,a]),y=g.useCallback(async()=>{if(e)try{return o(!0),d(null),(await SCe(e)).data}catch{d("Failed to complete AI video interview")}finally{o(!1)}},[e]);return{interviewId:e,questions:r,currentIndex:a,loading:l,error:c,createInterview:u,startInterview:m,submitAnswer:f,completeInterview:y}}const ACe=async e=>q.post("/v1/live-interviews",e),ECe=async e=>q.post(`/v1/live-interviews/${e}/join`),TCe=async e=>q.post(`/v1/live-interviews/${e}/start`),PCe=async e=>q.post(`/v1/live-interviews/${e}/end`),OCe=async(e,t)=>q.post(`/v1/live-interviews/${e}/recording`,{recording_url:t});function RCe(){const[e,t]=g.useState(null),[r,s]=g.useState(null),[a,i]=g.useState(!1),[l,o]=g.useState(!1),[c,d]=g.useState(null),u=g.useCallback(async(p,h)=>{try{o(!0),d(null);const v=await ACe({candidate_id:p,job_id:h,recording_enabled:!0});t(v.data.interview_id),s(v.data.meeting_url),i(v.data.recording_enabled)}catch{d("Failed to create live interview")}finally{o(!1)}},[]),m=g.useCallback(async()=>{if(e)try{o(!0),d(null);const p=await ECe(e);s(p.data.meeting_url),i(p.data.recording_enabled)}catch{d("Failed to join live interview")}finally{o(!1)}},[e]),f=g.useCallback(async()=>{if(e)try{o(!0),d(null),await TCe(e)}catch{d("Failed to start live interview")}finally{o(!1)}},[e]),y=g.useCallback(async()=>{if(e)try{o(!0),d(null),await PCe(e)}catch{d("Failed to end live interview")}finally{o(!1)}},[e]),x=g.useCallback(async p=>{if(!(!e||!a))try{await OCe(e,p)}catch{console.error("Failed to update recording")}},[e,a]);return{interviewId:e,meetingUrl:r,recordingEnabled:a,loading:l,error:c,createInterview:u,joinInterview:m,startInterview:f,endInterview:y,saveRecording:x}}function LCe({interviewId:e,onSaved:t}){const[r,s]=g.useState(5),[a,i]=g.useState(""),[l,o]=g.useState(!1),[c,d]=g.useState(null);async function u(m){var f,y;if(m.preventDefault(),d(null),!e)return d("Missing interview id");try{o(!0);const x={rating:r,comments:a},p=await q.post(`/v1/interviews/${e}/submit-feedback`,x);t&&t(p.data),s(5),i("")}catch(x){console.error("Feedback save failed",x),d(((y=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:y.detail)||"Failed to save feedback")}finally{o(!1)}}return n.jsxs("form",{onSubmit:u,className:"bg-white p-4 rounded shadow",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Leave feedback"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"block text-sm mb-1",children:["Rating: ",r]}),n.jsx("input",{type:"range",min:"1",max:"5",value:r,onChange:m=>s(Number(m.target.value)),className:"w-full"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-1",children:"Comments"}),n.jsx("textarea",{value:a,onChange:m=>i(m.target.value),rows:4,className:"w-full p-2 border rounded",placeholder:"Add any notes for the candidate or hiring team"})]}),c&&n.jsx("p",{className:"text-red-600 text-sm mb-2",children:c}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"submit",disabled:l,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-50",children:l?"Saving...":"Submit Feedback"}),n.jsx("button",{type:"button",onClick:()=>{s(5),i("")},className:"bg-gray-200 px-4 py-2 rounded",children:"Reset"})]})]})}function ICe(){const{id:e}=Rr(),t=Et(),r=Xn(),a=new URLSearchParams(r.search).get("mode")||"chat",i=_Ce(e),l=CCe(),o=RCe(),[c,d]=g.useState("");g.useEffect(()=>{a==="chat"&&i.loadInterview()},[e,a]);const u=()=>{var y,x,p,h;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-6 rounded shadow mb-4",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"AI Chat Interview"}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Status: ",n.jsx("b",{children:((y=i.interview)==null?void 0:y.status)||"scheduled"})]})]}),((x=i.interview)==null?void 0:x.status)==="completed"&&n.jsx("div",{className:"bg-green-50 text-green-700 p-4 rounded mb-4",children:" Interview completed successfully."}),i.error&&n.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded mb-4",children:i.error}),((p=i.interview)==null?void 0:p.status)==="scheduled"&&n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:n.jsx("button",{onClick:i.startInterview,className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Start Interview"})}),i.conversation.length>0&&n.jsx("div",{className:"bg-white p-6 rounded shadow mb-4 max-h-96 overflow-y-auto",children:i.conversation.map((v,b)=>n.jsx("div",{className:`mb-3 ${v.type==="answer"&&"text-right"}`,children:n.jsxs("div",{className:`inline-block p-3 rounded max-w-xl ${v.type==="question"?"bg-indigo-100":v.type==="answer"?"bg-green-100":"bg-yellow-100"}`,children:[n.jsx("b",{className:"text-sm block mb-1",children:v.type==="question"?"AI":v.type==="answer"?"You":"Feedback"}),v.text]})},b))}),i.currentQuestion&&n.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[n.jsx("textarea",{value:c,onChange:v=>d(v.target.value),className:"w-full border p-3 rounded mb-3",rows:4,placeholder:"Type your answer..."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{i.answerQuestion(c),d("")},className:"bg-green-600 text-white px-6 py-2 rounded",children:"Submit Answer"}),n.jsx("button",{onClick:()=>t("?mode=video"),className:"bg-gray-600 text-white px-6 py-2 rounded",children:"End Interview"})]})]}),((h=i.interview)==null?void 0:h.status)==="completed"&&n.jsx("div",{className:"mt-6",children:n.jsx(LCe,{interviewId:e})})]})},m=()=>n.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Video Interview"}),!l.interviewId&&n.jsx("button",{onClick:()=>{var y,x;return l.createInterview((y=i.interview)==null?void 0:y.candidate_id,(x=i.interview)==null?void 0:x.job_id)},className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Create Video Interview"}),l.interviewId&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mb-4",children:["Question ",l.currentIndex+1," / ",l.questions.length]}),n.jsx("button",{onClick:()=>l.submitAnswer("https://video.url/sample.mp4",60),className:"bg-green-600 text-white px-6 py-2 rounded",children:"Submit Dummy Video"}),l.currentIndex>=l.questions.length&&n.jsx("button",{onClick:()=>t("?mode=live"),className:"bg-gray-600 text-white px-6 py-2 rounded mt-4",children:"Complete Video Interview"})]})]}),f=()=>n.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Live Interview"}),!o.interviewId&&n.jsx("button",{onClick:()=>{var y,x;return o.createInterview((y=i.interview)==null?void 0:y.candidate_id,(x=i.interview)==null?void 0:x.job_id)},className:"bg-indigo-600 text-white px-6 py-2 rounded",children:"Create Live Interview"}),o.meetingUrl&&n.jsx("a",{href:o.meetingUrl,target:"_blank",rel:"noreferrer",className:"block mt-4 bg-green-600 text-white px-6 py-2 rounded",children:"Join Meeting"})]});return n.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[a==="chat"&&u(),a==="video"&&m(),a==="live"&&f()]})}function FCe(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState([]),[a,i]=g.useState(""),[l,o]=g.useState(!0),[c,d]=g.useState(!1),[u,m]=g.useState(null),[f,y]=g.useState(null);g.useEffect(()=>{x()},[]),g.useEffect(()=>{const h=v=>{c||(v.preventDefault(),v.returnValue="You have an ongoing interview. Progress is saved.")};return window.addEventListener("beforeunload",h),()=>window.removeEventListener("beforeunload",h)},[c]);const x=async()=>{var h,v,b,j,_,N,w,k,S;try{const E=await q.post(`/v1/interviews/${e}/start`),T=((h=E.data)==null?void 0:h.transcript)||[],A=[{from:"system",text:"AI Interview Started"},...T.flatMap(P=>[{from:"bot",text:P.question},{from:"user",text:P.answer}])],C=((b=(v=E.data)==null?void 0:v.question)==null?void 0:b.question_text)||((j=E.data)==null?void 0:j.question)||null;C&&A.push({from:"bot",text:C}),m(((_=E.data)==null?void 0:_.session_id)||null),s(A),!C&&((N=E.data)==null?void 0:N.status)==="completed"&&(d(!0),t(`/interviews/${e}/feedback`))}catch(E){const T=((k=(w=E==null?void 0:E.response)==null?void 0:w.data)==null?void 0:k.detail)||"Interview is not available yet.";let A=null;try{const C=await q.get(`/v1/interviews/${e}`);A=((S=C==null?void 0:C.data)==null?void 0:S.scheduled_at)||null}catch{A=null}y({title:"Interview Not Available",message:T,scheduledAt:A})}finally{o(!1)}},p=async()=>{var v,b,j,_;if(!a.trim())return;const h=a;i(""),s(N=>[...N,{from:"user",text:h}]);try{const N=await q.post(`/v1/interviews/${e}/answer`,{answer:h}),w=((b=(v=N.data)==null?void 0:v.next_question)==null?void 0:b.question_text)||((j=N.data)==null?void 0:j.next_question)||"";if(w)s(k=>[...k,{from:"bot",text:w}]);else if((_=N.data)!=null&&_.is_last_question){try{await q.post(`/v1/interviews/${e}/complete`)}catch(k){console.error("Complete interview failed",k)}d(!0),t(`/interviews/${e}/feedback`)}}catch{alert("Failed to submit answer")}};if(l)return n.jsx("h2",{className:"p-6",children:"Checking interview availability..."});if(f){const h=v=>{if(!v)return"Not Scheduled";const b=new Date(v);return Number.isNaN(b.getTime())?"Not Scheduled":b.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};return n.jsx("div",{className:"min-h-screen bg-gray-900/40 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-lg font-bold mb-2",children:f.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:f.message}),f.scheduledAt&&n.jsxs("div",{className:"text-sm text-gray-700 mb-4",children:["Available from:"," ",n.jsx("span",{className:"font-semibold",children:h(f.scheduledAt)})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx("button",{onClick:()=>t("/candidate/dashboard"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back to Dashboard"})})]})})}return n.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AI Interview"}),n.jsx("div",{className:"border rounded p-4 h-[400px] overflow-y-auto bg-gray-50",children:r.map((h,v)=>n.jsx("div",{className:`p-2 my-1 rounded ${h.from==="bot"?"bg-blue-100 text-blue-900":h.from==="user"?"bg-green-100 text-green-900 text-right":"bg-gray-300 text-black text-center"}`,children:h.text},v))}),!c&&n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("input",{value:a,onChange:h=>i(h.target.value),className:"border p-2 flex-1 rounded",placeholder:"Type your answer..."}),n.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Send"})]})]})}const Bi=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e??null:null},sl={list:async(e={})=>{const t=await q.get("/v1/employees",{params:e});return Bi(t)},directory:async(e={})=>{try{const t=await q.get("/v1/employees/directory",{params:e});return Bi(t)}catch(t){return console.warn("employeeService.directory: falling back to /v1/employees",t==null?void 0:t.message),sl.list(e)}},get:async e=>{if(!e)throw new Error("employeeService.get: id is required");const t=await q.get(`/v1/employees/${e}`);return Bi(t)},create:async e=>{const t=await q.post("/v1/employees",e);return Bi(t)},update:async(e,t)=>{if(!e)throw new Error("employeeService.update: id is required");const r=await q.put(`/v1/employees/${e}`,t);return Bi(r)},remove:async e=>{if(!e)throw new Error("employeeService.remove: id is required");const t=await q.delete(`/v1/employees/${e}`);return Bi(t)},fromCandidate:async(e,t={})=>{if(!e)throw new Error("employeeService.fromCandidate: candidateId is required");const r=await q.post(`/v1/employees/from-candidate/${e}`,t);return Bi(r)},convert:async(e,t={})=>sl.fromCandidate(e,t),exit:async(e,t={})=>{if(!e)throw new Error("employeeService.exit: id is required");const r=await q.post(`/v1/employees/${e}/exit`,t);return Bi(r)},addPerformance:async(e,t={})=>{if(!e)throw new Error("employeeService.addPerformance: id is required");const r=await q.post(`/v1/employees/${e}/performance`,t);return Bi(r)},getMyEmployee:async()=>{const e=await q.get("/v1/employees/me");return Bi(e)},resetPassword:async(e,t)=>{if(!e)throw new Error("employeeService.resetPassword: employeeId is required");const r=await q.post(`/v1/employees/${e}/reset-password`,t);return Bi(r)}},Kx=e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??null},sy={startOnboarding:async(e,t={})=>{const r=await q.post(`/v1/onboarding/${e}/start`,t);return Kx(r)},getTasks:async e=>{const t=await q.get(`/v1/onboarding/${e}`);return Kx(t)},completeTask:async(e,t={})=>{const r=await q.put(`/v1/onboarding/${e}/complete`,t);return Kx(r)},getProgress:async e=>{const t=await q.get(`/v1/onboarding/${e}/progress`);return Kx(t)}};function CR(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState(null),[l,o]=g.useState(!0),[c,d]=g.useState(!1);g.useEffect(()=>{m()},[]);const u=N=>N?Array.isArray(N)?N:N.data&&Array.isArray(N.data)?N.data:N.items&&Array.isArray(N.items)?N.items:N.employees&&Array.isArray(N.employees)?N.employees:[]:[],m=async()=>{o(!0);try{const N=await sl.list(),w=u(N);if(s(w),w.length>0){const k=w[0].id??w[0]._id??w[0].employee_id;i(k),await f(k)}else t([])}catch(N){console.error("Error loading data:",N),s([]),t([])}finally{o(!1)}},f=async N=>{if(!N){t([]);return}o(!0);try{const w=await sy.getTasks(N),k=Array.isArray(w)?w:(w==null?void 0:w.data)??(w==null?void 0:w.tasks)??[];t(k)}catch(w){console.error("Error loading tasks:",w),t([])}finally{o(!1)}},y=async N=>{i(N),await f(N)},x=async N=>{if(N){if(!a)return alert("Select an employee first.");d(!0);try{await sy.completeTask(N),await f(a)}catch(w){console.error("Error completing task:",w),alert("Failed to mark task complete.")}finally{d(!1)}}},p=async N=>{if(N&&window.confirm("Start onboarding for this employee?")){d(!0);try{await sy.startOnboarding(N),await f(N),alert("Onboarding started.")}catch(w){console.error("Error starting onboarding:",w),alert("Failed to start onboarding.")}finally{d(!1)}}},h=N=>({completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800"})[N]||"bg-gray-100 text-gray-800",v=N=>N==="completed"?n.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})}):N==="in_progress"?n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3"})}):n.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01"})});if(l)return n.jsx("div",{className:"p-8",children:"Loading onboarding data..."});const b=e.filter(N=>N.status==="completed").length,j=e.length,_=j>0?b/j*100:0;return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Onboarding Management"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage employee onboarding tasks"})]}),r.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 border border-gray-200 text-center",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No employees to onboard"}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Hire employees to start the onboarding process"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 mb-6 flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employee"}),n.jsx("select",{value:a??"",onChange:N=>y(N.target.value),className:"w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg",children:r.map(N=>{const w=N.id??N._id??N.employee_id;return n.jsxs("option",{value:w,children:[N.employee_code??w," -"," ",N.full_name??N.designation??"No name"," (",N.status,")"]},w)})})]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("button",{onClick:()=>p(a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-60",disabled:c,children:"Start Onboarding"}),n.jsx("button",{onClick:()=>f(a),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:c,children:"Refresh"})]})]}),j>0&&n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Onboarding Progress"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[b," of ",j," tasks completed"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${_}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[_.toFixed(0),"% Complete"]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Onboarding Tasks"})}),e.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("p",{className:"text-gray-600",children:"No onboarding tasks found for this employee"}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Tasks will appear once onboarding is initiated"})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:e.map(N=>n.jsxs("div",{className:"p-6 hover:bg-gray-50 transition flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[n.jsx("div",{className:"mt-1",children:v(N.status)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.title??N.name}),N.documents&&N.documents.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Uploaded Documents:"}),N.documents.map(w=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:[w.category,"  ",w.filename]}),n.jsx("button",{className:"text-blue-600 text-sm hover:underline",onClick:()=>window.open(`/v1/documents/${w.id}/download`,"_blank"),children:"View"})]},w.id))]}),(!N.documents||N.documents.length===0)&&n.jsx("div",{className:"mt-3 text-sm text-red-500 italic",children:"No document uploaded yet"}),N.description&&n.jsx("p",{className:"text-gray-600 mt-1",children:N.description}),n.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h(N.status)}`,children:(N.status??"pending").replace("_"," ")}),N.task_type&&n.jsxs("span",{className:"text-sm text-gray-500",children:["Type: ",N.task_type]}),N.due_date&&n.jsxs("span",{className:"text-sm text-gray-500",children:["Due:"," ",new Date(N.due_date).toLocaleDateString()]}),N.completed_at&&n.jsxs("span",{className:"text-sm text-green-600",children:[" Completed"," ",new Date(N.completed_at).toLocaleDateString()]})]})]})]}),n.jsx("div",{className:"ml-4",children:N.status!=="completed"?n.jsx("button",{onClick:()=>x(N.id??N._id),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:c,children:c?"...":"Mark Complete"}):n.jsx("span",{className:"text-green-600 font-semibold",children:"Completed"})})]},N.id??N._id))})]})]})]})}function AR(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState(!0),[i,l]=g.useState(!1),[o,c]=g.useState(null),[d,u]=g.useState(!1),[m,f]=g.useState({exit_reason:"",feedback:"",would_rehire:!0,would_recommend:!0}),[y,x]=g.useState(null),[p,h]=g.useState(""),[v,b]=g.useState({currentPage:1,totalPages:1,totalRecords:0}),{page:j,setPage:_,limit:N,setLimit:w,pageSizeOptions:k}=Yp("employees:listing");g.useEffect(()=>{S()},[j,N,p]);const S=async()=>{a(!0),x(null);try{const L=await sl.list({page:j,limit:N,search:p||void 0}),I=Array.isArray(L)?{data:L}:L??{},K=Array.isArray(I.data)?I.data:I.items??I.employees??[],D=I.totalRecords??I.total??(Array.isArray(K)?K.length:0),Y=I.totalPages??Math.max(1,Math.ceil((D||0)/Math.max(1,N))),re=I.currentPage??j;r(K),b({currentPage:re,totalPages:Y,totalRecords:D})}catch(L){console.error("Error loading employees:",L),x("Failed to load employees"),r([]),b({currentPage:1,totalPages:1,totalRecords:0})}finally{a(!1)}},E=(L,I)=>{I.stopPropagation(),c(L),f({exit_reason:"",feedback:"",would_rehire:!0,would_recommend:!0}),l(!0)},T=async()=>{if(o){if(!m.exit_reason){alert("Please select an exit reason");return}if(!m.feedback||m.feedback.trim().length<10){alert("Please provide detailed feedback (at least 10 characters)");return}u(!0);try{await sl.exit(o.id,m),l(!1),alert(`${o.full_name||"Employee"} has been exited.`),c(null),await S()}catch(L){console.error("Error processing exit:",L),alert("Error processing employee exit")}finally{u(!1)}}},A=async L=>{if(!(!L||!L.id)&&confirm(`Start onboarding for ${L.full_name||L.employee_code||"this employee"}?`)){u(!0);try{await sy.startOnboarding(L.id),alert(`Onboarding started for ${L.full_name||L.employee_code||"employee"}.`),await S()}catch(I){console.error("Error starting onboarding:",I),alert("Failed to start onboarding")}finally{u(!1)}}},C=L=>({active:"bg-emerald-100 text-emerald-800 border-emerald-200",onboarding:"bg-blue-100 text-blue-800 border-blue-200",pending_documents:"bg-amber-100 text-amber-800 border-amber-200",on_leave:"bg-yellow-100 text-yellow-800 border-yellow-200",notice_period:"bg-orange-100 text-orange-800 border-orange-200",exited:"bg-gray-100 text-gray-800 border-gray-200"})[L]||"bg-slate-100 text-slate-800 border-slate-200",P=L=>({active:"Active",onboarding:"Onboarding",pending_documents:"Pending Documents",on_leave:"On Leave",notice_period:"Notice Period",exited:"Exited"})[L]||(L==null?void 0:L.split("_").map(K=>K.charAt(0).toUpperCase()+K.slice(1)).join(" "))||"Unknown",O=t,R=L=>{if(!L||L.length===0)return"";const I=["id","employee_code","full_name","email","designation","department","status","join_date","ctc","location"],K=I.join(",")+`
`,D=L.map(Y=>I.map(re=>{let B=Y[re];return B==null?"":typeof B=="string"?`"${B.replace(/"/g,'""')}"`:`${B}`}).join(","));return K+D.join(`
`)},F=(L,I)=>{const K=new Blob([I],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(K),Y=document.createElement("a");Y.href=D,Y.download=L,document.body.appendChild(Y),Y.click(),Y.remove(),URL.revokeObjectURL(D)},Q=()=>{const L=R(O);if(!L){alert("No data to export");return}F(`employees_filtered_${new Date().toISOString().slice(0,10)}.csv`,L)},W=()=>{const L=R(t);if(!L){alert("No data to export");return}F(`employees_all_${new Date().toISOString().slice(0,10)}.csv`,L)};return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Employee Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage your organization's employees and their lifecycle"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:p,onChange:L=>{h(L.target.value),_(1)},placeholder:"Search by name, code, email or designation",className:"px-3 py-2 border rounded text-sm"}),n.jsx("button",{onClick:S,disabled:s,className:"px-3 py-2 bg-gray-100 rounded hover:bg-gray-200 text-sm",children:"Refresh"}),n.jsxs("div",{className:"relative inline-block",children:[n.jsx("button",{onClick:Q,className:"px-3 py-2 bg-white border rounded text-sm hover:bg-gray-50",title:"Export filtered list as CSV",children:"Export (filtered)"}),n.jsx("button",{onClick:W,className:"ml-2 px-3 py-2 bg-white border rounded text-sm hover:bg-gray-50",title:"Export all employees as CSV",children:"Export (all)"})]}),n.jsx("button",{onClick:()=>e("/employees/directory"),className:"ml-2 px-3 py-2 bg-blue-50 text-blue-700 border rounded text-sm hover:bg-blue-100",children:"Directory"})]})]}),y&&n.jsx("div",{className:"mb-4 text-sm text-red-600",children:y}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:v.totalRecords||t.length})]}),n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1z"})})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:t.filter(L=>L.status==="active").length})]}),n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Onboarding"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.filter(L=>L.status==="onboarding").length})]}),n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10"})})})]})})]}),n.jsx(Xp,{items:O,totalPages:v.totalPages,currentPage:v.currentPage,onPageChange:_,totalRecords:v.totalRecords,pageSize:N,onPageSizeChange:L=>{w(L),_(1)},pageSizeOptions:k,loading:s,error:y,onRetry:S,emptyMessage:"No employees match your search",renderCard:L=>n.jsxs("article",{className:"bg-white rounded-lg border border-gray-200 p-5 shadow-sm hover:shadow-md transition",onClick:()=>e(`/employees/${L.id}`),children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.full_name||"N/A"}),n.jsx("p",{className:"text-sm text-gray-600",children:L.designation||"Designation not set"})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${C(L.status)}`,children:P(L.status)})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Code:"})," ",n.jsx("span",{className:"font-mono",children:L.employee_code||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Department:"})," ",L.department||"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Join Date:"})," ",L.join_date?new Date(L.join_date).toLocaleDateString():"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"CTC:"})," ",L.ctc?`$${Number(L.ctc).toLocaleString()}`:"N/A"]}),n.jsx("div",{className:"col-span-2 text-gray-600 truncate",children:L.email||L.location||"N/A"})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[L.status!=="onboarding"&&L.status!=="exited"?n.jsx("button",{onClick:I=>{I.stopPropagation(),A(L)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-lg text-white bg-green-500 hover:bg-green-600 shadow-sm transition-colors disabled:bg-gray-300 disabled:text-gray-500",disabled:d,children:"Start Onboarding"}):null,L.status!=="exited"?n.jsx("button",{onClick:I=>{I.stopPropagation(),E(L,I)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-lg text-white bg-red-500 hover:bg-red-600 shadow-sm transition-colors disabled:bg-gray-300 disabled:text-gray-500",disabled:d,children:"Exit"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium text-gray-500 bg-gray-100 rounded-lg border",children:"Exited"})]})]})}),i&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Exit Employee"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Processing exit for: ",n.jsx("strong",{children:o.full_name})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1 text-red-600",children:"Exit Reason *"}),n.jsxs("select",{value:m.exit_reason,onChange:L=>f({...m,exit_reason:L.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Reason"}),n.jsx("option",{value:"resignation",children:"Resignation"}),n.jsx("option",{value:"termination",children:"Termination"}),n.jsx("option",{value:"retirement",children:"Retirement"}),n.jsx("option",{value:"contract_end",children:"Contract End"}),n.jsx("option",{value:"relocation",children:"Relocation"}),n.jsx("option",{value:"personal_reasons",children:"Personal Reasons"}),n.jsx("option",{value:"better_opportunity",children:"Better Opportunity"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1 text-red-600",children:"Exit Interview Feedback *"}),n.jsx("textarea",{value:m.feedback,onChange:L=>f({...m,feedback:L.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:"4",placeholder:"Please provide detailed feedback (minimum 10 characters)",required:!0})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:m.would_rehire,onChange:L=>f({...m,would_rehire:L.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Would you rehire this employee?"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:m.would_recommend,onChange:L=>f({...m,would_recommend:L.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Would employee recommend this company?"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:n.jsx("p",{className:"text-yellow-800 text-sm",children:" This will mark the employee as exited and automatically add them to the Alumni network."})})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:T,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",disabled:d,children:d?"Processing...":"Confirm Exit"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",disabled:d,children:"Cancel"})]})]})})]})}const Xx=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e:null},rd={listForEmployee:async(e,t={})=>{const r=await q.get(`/v1/documents/employees/${e}`,{params:t});return Xx(r)},uploadForEmployee:async(e,t,r,s={})=>{const a={headers:{"Content-Type":"multipart/form-data"},...s};s.onUploadProgress&&(a.onUploadProgress=s.onUploadProgress),r.append("category",t);const i=await q.post(`/v1/documents/employees/${e}`,r,a);return Xx(i)},download:async e=>{var c,d;const t=await q.get(`/v1/documents/${e}/download`,{responseType:"blob",transformResponse:u=>u}),r=((c=t.headers)==null?void 0:c["content-disposition"])||((d=t.headers)==null?void 0:d["Content-Disposition"])||"",s=/filename\*?=(?:UTF-8'')?([^;\n]+)/i.exec(r),a=s?decodeURIComponent(s[1]):`document_${e}`,i=new Blob([t.data],{type:t.headers["content-type"]||"application/octet-stream"}),l=window.URL.createObjectURL(i),o=document.createElement("a");return o.href=l,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l),!0},remove:async e=>{const t=await q.delete(`/v1/documents/${e}`);return Xx(t)},checklist:async e=>{const t=await q.get(`/v1/documents/employees/${e}/checklist`);return Xx(t)},checklistForEmployee:async e=>rd.checklist(e)};function __(){const e=Et(),[t,r]=g.useState(null),[s,a]=g.useState(null),[i,l]=g.useState(!0),[o,c]=g.useState("personal"),[d,u]=g.useState([]),[m,f]=g.useState(null),[y,x]=g.useState(!1),[p,h]=g.useState(!1),[v,b]=g.useState(0),[j,_]=g.useState(!1),[N,w]=g.useState(""),[k,S]=g.useState(""),[E,T]=g.useState(!1);g.useEffect(()=>{A()},[]),g.useEffect(()=>{s&&C()},[s,v]);const A=async()=>{l(!0);try{const L=await sl.getMyEmployee(),I=(L==null?void 0:L.data)??L;r(I),a(I.id)}catch(L){console.error("My employee load error:",L),r(null)}finally{l(!1)}},C=async()=>{l(!0);try{await Promise.all([P(),O(),R()])}finally{l(!1)}},P=async()=>{try{const L=await sl.get(s),I=(L==null?void 0:L.data)??(L==null?void 0:L.employee)??L;r(I)}catch(L){console.error("Employee load error:",L),r(null)}},O=async()=>{try{const L=await rd.listForEmployee(s),I=Array.isArray(L)?L:(L==null?void 0:L.data)??(L==null?void 0:L.items)??(L==null?void 0:L.documents)??[];u(I)}catch(L){console.error("Document load error:",L),u([])}},R=async()=>{try{const L=rd.checklist??rd.checklistForEmployee;if(!L){f(null);return}const I=await L(s),K=(I==null?void 0:I.data)??I??null;f(K)}catch(L){console.error("Checklist error:",L),f(null)}},F=async L=>{try{await rd.download(L)}catch(I){console.error("Download error:",I),alert("Failed to download document")}},Q=async L=>{if(window.confirm("Delete this document?")){x(!0);try{await rd.remove(L),await O(),await R()}catch(I){console.error("Delete error:",I),alert("Failed to delete document")}finally{x(!1)}}},W=async()=>{var L,I,K,D;if(!N||!k){alert("Both password fields are required");return}if(N!==k){alert("Passwords do not match");return}try{T(!0),await sl.resetPassword(t.id,{password:N,confirm_password:k}),alert("Password reset successfully"),_(!1),w(""),S("")}catch(Y){alert(((I=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:I.detail)||((D=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:D.message)||"Failed to reset password")}finally{T(!1)}};return i?n.jsx("div",{className:"p-8",children:"Loading employee profile..."}):t?n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:()=>e("/employees"),className:"text-blue-600 hover:text-blue-700 flex items-center",children:" Back to Employees"})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.full_name||""}),n.jsx("p",{className:"text-sm text-gray-600",children:t.designation||""}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.employee_code||""})]}),n.jsx("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reset Password"})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex space-x-2",children:[["personal","employment","team","documents"].map(L=>n.jsx("button",{onClick:()=>c(L),className:`px-4 py-2 rounded ${o===L?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-200"}`,children:L.charAt(0).toUpperCase()+L.slice(1)},L)),n.jsx("button",{onClick:()=>b(L=>L+1),className:"ml-2 px-3 py-1 text-sm border rounded bg-white hover:bg-gray-50",children:"Refresh"})]})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[o==="personal"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Personal Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:t.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:t.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Join Date"}),n.jsx("p",{className:"text-gray-900",children:t.join_date?new Date(t.join_date).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),n.jsx("p",{className:"text-gray-900",children:t.location||"N/A"})]})]})]}),o==="employment"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Employment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"CTC"}),n.jsxs("p",{className:"text-gray-900",children:["$",t.ctc?Number(t.ctc).toLocaleString():"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Probation End"}),n.jsx("p",{className:"text-gray-900",children:t.probation_end_date?new Date(t.probation_end_date).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Reporting Manager"}),n.jsx("p",{className:"text-gray-900",children:t.reporting_manager_name||t.reporting_manager_id||"N/A"})]})]})]}),o==="team"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Team & Reporting"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Department"}),n.jsx("p",{className:"text-gray-900",children:t.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Team"}),n.jsx("p",{className:"text-gray-900",children:t.team||"N/A"})]})]})]}),o==="documents"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Documents"}),(m==null?void 0:m.checklist)&&n.jsx("div",{className:"mt-3 space-y-3",children:m.checklist.map(L=>n.jsxs("div",{className:"flex items-center justify-between border p-3 rounded",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:L.document_name}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Category: ",L.category]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:L.status==="completed"?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-green-700 font-semibold",children:"Uploaded "}),n.jsx("button",{className:"text-blue-600 text-sm",onClick:()=>F(L.document_id),children:"Download"}),n.jsx("button",{className:"text-red-600 text-sm",onClick:()=>Q(L.document_id),children:"Delete"})]}):n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",className:"text-sm",onChange:I=>{var Y;const K=(Y=I.target.files)==null?void 0:Y[0];if(!K)return;const D=new FormData;D.append("file",K),rd.uploadForEmployee(s,L.category,D).then(()=>{O(),R()}).catch(()=>alert("Upload failed"))}}),n.jsx("span",{className:"text-red-600 text-sm",children:"Pending"})]})})]},L.category))})]}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-96 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reset Password"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"Email"}),n.jsx("input",{type:"email",value:t.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"New Password"}),n.jsx("input",{type:"password",value:N,onChange:L=>w(L.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),n.jsx("input",{type:"password",value:k,onChange:L=>S(L.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>_(!1),className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:W,disabled:E,className:"px-4 py-1 bg-red-600 text-white rounded",children:E?"Resetting...":"Reset"})]})]})})]})]}):n.jsx("div",{className:"p-8",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[n.jsx("p",{className:"text-red-800",children:"Employee not found"}),n.jsx("button",{onClick:()=>e("/employees"),className:"mt-4 text-red-600 hover:text-red-700",children:" Back to Employees"})]})})}function ER(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState([]),[i,l]=g.useState(""),[o,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(!0),[y,x]=g.useState(!1);g.useEffect(()=>{h()},[]);const p=w=>w?Array.isArray(w)?w:w.items||w.data||w.employees||[]:[],h=async()=>{f(!0);try{const k=await(typeof sl.directory=="function"?sl.directory:sl.list)(),S=p(k);r(S),a(S)}catch(w){console.error("Directory load error:",w),r([]),a([])}finally{f(!1)}};g.useEffect(()=>{let w=[...t];i.trim()&&(w=w.filter(k=>`${k.full_name||""} ${k.email||""} ${k.employee_code||""}`.toLowerCase().includes(i.toLowerCase()))),o&&(w=w.filter(k=>k.department===o)),d&&(w=w.filter(k=>k.status===d)),a(w)},[i,o,d,t]);const v=w=>({active:"bg-green-100 text-green-800",onboarding:"bg-blue-100 text-blue-800",on_leave:"bg-yellow-100 text-yellow-800",notice_period:"bg-orange-100 text-orange-800",exited:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",b=[...new Set(t.map(w=>w.department).filter(Boolean))],j=[...new Set(t.map(w=>w.status).filter(Boolean))],_=w=>{const S=[["Employee ID","Full Name","Employee Code","Email","Phone","Designation","Department","Status","Join Date"].join(",")];for(const E of w){const T=[E.id??"",`"${(E.full_name||"").replace(/"/g,'""')}"`,E.employee_code??"",E.email??"",E.phone??"",`"${(E.designation||"").replace(/"/g,'""')}"`,`"${(E.department||"").replace(/"/g,'""')}"`,E.status??"",E.join_date?new Date(E.join_date).toISOString().split("T")[0]:""];S.push(T.join(","))}return S.join(`
`)},N=async({all:w=!1}={})=>{x(!0);try{const S=_(w?t:s),E=new Blob([S],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(E),A=document.createElement("a");A.href=T,A.download=w?`employees_all_${new Date().toISOString().slice(0,10)}.csv`:`employees_filtered_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(A),A.click(),A.remove(),URL.revokeObjectURL(T)}catch(k){console.error("Export error:",k),alert("Failed to export CSV")}finally{x(!1)}};return m?n.jsx("div",{className:"p-8",children:"Loading directory..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Employee Directory"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Browse and search all employees in the organization."}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 mb-8 grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[n.jsx("input",{type:"text",placeholder:"Search by name, code or email...",value:i,onChange:w=>l(w.target.value),className:"px-4 py-2 border rounded-lg col-span-1 md:col-span-2"}),n.jsxs("select",{value:o,onChange:w=>c(w.target.value),className:"px-4 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Departments"}),b.map(w=>n.jsx("option",{value:w,children:w},w))]}),n.jsxs("select",{value:d,onChange:w=>u(w.target.value),className:"px-4 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Statuses"}),j.map(w=>n.jsx("option",{value:w,children:w},w))]}),n.jsxs("div",{className:"flex gap-2 md:justify-end",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",onClick:()=>{l(""),c(""),u("")},children:"Reset Filters"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 text-sm",onClick:()=>N({all:!1}),disabled:y||s.length===0,title:"Export filtered results",children:y?"Exporting":`Export Filtered (${s.length})`}),n.jsx("button",{className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 text-sm",onClick:()=>N({all:!0}),disabled:y||t.length===0,title:"Export all employees",children:y?"Exporting":`Export All (${t.length})`})]})]})]}),s.length===0?n.jsx("div",{className:"text-center text-gray-500 mt-10",children:"No employees found."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(w=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200 cursor-pointer hover:shadow-lg transition",onClick:()=>e(`/employees/${w.id}`),children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl font-semibold text-gray-700",children:(w.full_name||"U").charAt(0)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold text-gray-800",children:w.full_name||"Unnamed"}),n.jsx("div",{className:"text-sm text-gray-600",children:w.designation||"No designation"})]})]}),n.jsx("p",{className:"text-gray-500 text-sm mb-3",children:w.department||"No department"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded-full ${v(w.status)}`,children:w.status}),n.jsxs("div",{className:"text-right text-xs text-gray-500",children:[n.jsx("div",{children:w.employee_code}),n.jsx("div",{children:w.join_date?new Date(w.join_date).toLocaleDateString():""})]})]})]},w.id))})]})}function TR(){const[e,t]=g.useState(!0),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState(null),c=async()=>{var d;t(!0);try{const u=await q.get("/auth/me"),m=u.data.employee??u.data;o(m);const[f,y]=await Promise.all([q.get("/v1/notifications"),m!=null&&m.id?q.get(`/v1/leaves/balance/${m.id}`):Promise.resolve({data:[]})]),x=((d=f.data)==null?void 0:d.data)??f.data??[],p=Array.isArray(x)?x:x.items??x.data??[];s(p.slice(0,10)),i(y.data??y)}catch(u){console.error("EmployeeDashboard load",u)}finally{t(!1)}};return g.useEffect(()=>{c()},[]),e?n.jsx("div",{className:"p-6",children:"Loading employee dashboard..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("div",{className:"mb-6 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Employee Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Quick access to attendance, leave, payslips and HR alerts"})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Attendance"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View attendance summary and mark your attendance."}),n.jsx("div",{className:"mt-3",children:n.jsx(yr,{to:"/attendance",className:"text-indigo-600",children:"Go to Attendance"})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Leave"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Leave balance and quick actions"}),n.jsxs("div",{className:"mt-3 space-y-2",children:[Array.isArray(a)&&a.length?a.map(d=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{className:"capitalize",children:d.leave_type}),n.jsx("div",{className:"font-semibold",children:d.available??d.available_days??d.available})]},d.leave_type)):n.jsx("div",{className:"text-sm text-gray-500",children:"No leave balance data available."}),n.jsx("div",{className:"mt-3",children:n.jsx(yr,{to:"/leaves",className:"text-indigo-600",children:"Apply / View requests"})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"My Profile"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View and update your personal details and documents"}),n.jsx("div",{className:"mt-3",children:n.jsx(yr,{to:`/employees/${(l==null?void 0:l.id)??"me"}`,className:"text-indigo-600",children:"Open Profile"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Payslips"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View your salary history and download payslips"}),n.jsx("div",{className:"mt-3",children:n.jsx(yr,{to:"/finance",className:"text-indigo-600",children:"View Payslips"})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Holidays"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View company holidays calendar"}),n.jsx("div",{className:"mt-3",children:n.jsx(yr,{to:"/settings",className:"text-indigo-600",children:"View Holidays"})})]})]}),n.jsxs("section",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Notifications"}),!r.length&&n.jsx("div",{className:"text-gray-600",children:"No notifications"}),n.jsx("div",{className:"space-y-2",children:r.map(d=>{var y;const u=d.id??d.notification_id??Math.random(),m=d.title??d.message??d.summary??"Notification",f=d.created_at??d.timestamp??d.created??Date.now();return n.jsxs("div",{className:"p-2 border rounded flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:m}),d.detail&&n.jsx("div",{className:"text-sm text-gray-600",children:d.detail}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(f).toLocaleString()})]}),n.jsx("div",{className:"text-right",children:((y=d.meta)==null?void 0:y.link)&&n.jsx("a",{href:d.meta.link,className:"text-indigo-600",children:"Open"})})]},u)})})]})]})}function Zp(e){if(!e)return"";let t;if(e instanceof Date)t=e;else if(typeof e=="string"||typeof e=="number")t=new Date(e);else return"";if(isNaN(t.getTime()))return"";const r=String(t.getUTCDate()).padStart(2,"0"),s=t.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),a=t.getUTCFullYear();return`${r}-${s}-${a}`}function PR(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState(!1),[c,d]=g.useState({current_company:"",current_designation:"",linkedin_url:"",engagement_score:""});g.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await q.get("/v1/alumni");t(p.data||[]),s(!1)}catch(p){console.error("Error loading alumni:",p),s(!1)}},m=p=>{i(p),d({current_company:p.current_company||"",current_designation:p.current_designation||"",linkedin_url:p.linkedin_url||"",engagement_score:p.engagement_score||""}),o(!0)},f=async()=>{try{await q.put(`/v1/alumni/${a.id}/update`,c),o(!1),u()}catch(p){console.error("Error updating alumni:",p)}},y=async p=>{try{await q.post(`/v1/alumni/${p}/referral`),u()}catch(h){console.error("Error tracking referral:",h)}},x=p=>p?p>=80?{color:"bg-green-100 text-green-800",label:"Highly Engaged"}:p>=60?{color:"bg-blue-100 text-blue-800",label:"Active"}:p>=40?{color:"bg-yellow-100 text-yellow-800",label:"Moderate"}:{color:"bg-red-100 text-red-800",label:"Low Engagement"}:{color:"bg-gray-100 text-gray-600",label:"Not Rated"};return r?n.jsx("div",{className:"text-center py-12",children:"Loading alumni..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Alumni Network"}),n.jsxs("div",{className:"bg-white px-6 py-3 rounded-lg shadow",children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Total Alumni"}),n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:e.length})]})]}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No alumni records found"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Alumni are created when employees exit the organization"})]}):n.jsx("div",{className:"grid gap-6",children:e.map(p=>{var v;const h=x(p.engagement_score);return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:((v=p.employee)==null?void 0:v.full_name)||"Unknown"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Last Designation:"}),n.jsx("span",{className:"ml-2 font-semibold",children:p.last_designation||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Tenure:"}),n.jsxs("span",{className:"ml-2 font-semibold",children:[p.tenure_years||0," years"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Exit Date:"}),n.jsx("span",{className:"ml-2 font-semibold",children:p.exit_date?Zp(p.exit_date):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Referrals Made:"}),n.jsx("span",{className:"ml-2 font-semibold",children:p.referrals_made||0})]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.color}`,children:h.label}),p.is_eligible_for_rehire&&n.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Eligible for Rehire"})]})]}),p.current_company&&n.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-semibold text-indigo-900 mb-2",children:"Current Position"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Company:"}),n.jsx("span",{className:"ml-2 font-semibold",children:p.current_company})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Designation:"}),n.jsx("span",{className:"ml-2 font-semibold",children:p.current_designation||"N/A"})]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>m(p),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"Update Info"}),n.jsx("button",{onClick:()=>y(p.id),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"Track Referral"}),p.linkedin_url&&n.jsx("a",{href:p.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"LinkedIn Profile"})]})]},p.id)})}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Update Alumni Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Current Company"}),n.jsx("input",{type:"text",value:c.current_company,onChange:p=>d({...c,current_company:p.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Current Designation"}),n.jsx("input",{type:"text",value:c.current_designation,onChange:p=>d({...c,current_designation:p.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"LinkedIn URL"}),n.jsx("input",{type:"text",value:c.linkedin_url,onChange:p=>d({...c,linkedin_url:p.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Engagement Score (0-100)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:c.engagement_score,onChange:p=>d({...c,engagement_score:parseFloat(p.target.value)}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:f,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Update"}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function OR(){const[e,t]=g.useState("invoices"),[r,s]=g.useState(!0),[a,i]=g.useState([]),[l,o]=g.useState("all"),[c,d]=g.useState(!1),[u,m]=g.useState({total_revenue:0,pending_amount:0,paid_amount:0}),[f,y]=g.useState({client_name:"",amount:"",placements:[],due_date:""}),[x,p]=g.useState([]),[h,v]=g.useState(null),[b,j]=g.useState([]),[_,N]=g.useState({}),[w,k]=g.useState(!1),[S,E]=g.useState({month:new Date().getMonth()+1,year:new Date().getFullYear()}),[T,A]=g.useState([]),[C,P]=g.useState([]),[O,R]=g.useState([]),[F,Q]=g.useState(!1),[W,L]=g.useState(!1),[I,K]=g.useState({employee_id:"",basic_salary:"",hra:"",transport_allowance:"",medical_allowance:"",special_allowance:""}),[D,Y]=g.useState({employee_id:"",deduction_type:"tax",amount:"",description:"",is_percentage:!1});g.useEffect(()=>{e==="invoices"?re():e==="payroll"?B():e==="salaries"&&G()},[e,l]);const re=async()=>{try{const me=l!=="all"?{status:l}:{},ue=(await q.get("/v1/invoices",{params:me})).data||[];i(ue);const ye=ue.reduce((xe,Ae)=>xe+(Ae.amount||0),0),Ye=ue.filter(xe=>xe.status==="paid").reduce((xe,Ae)=>xe+(Ae.amount||0),0),lt=ye-Ye;m({total_revenue:ye,pending_amount:lt,paid_amount:Ye}),s(!1)}catch(me){console.error("Error loading invoices:",me),s(!1)}},B=async()=>{try{const[me,Pe]=await Promise.all([q.get("/v1/payroll/runs"),q.get("/v1/payroll/dashboard/metrics")]);p(me.data||[]),N(Pe.data||{}),s(!1)}catch(me){console.error("Error loading payroll:",me),s(!1)}},G=async()=>{try{const[me,Pe,ue]=await Promise.all([q.get("/v1/employees"),q.get("/v1/payroll/salaries"),q.get("/v1/payroll/deductions")]);A(me.data||[]),P(Pe.data||[]),R(ue.data||[]),s(!1)}catch(me){console.error("Error loading salary data:",me),s(!1)}},ce=async()=>{try{await q.post("/v1/invoices",{...f,amount:parseFloat(f.amount),placements:[]}),d(!1),y({client_name:"",amount:"",placements:[],due_date:""}),re()}catch(me){console.error("Error creating invoice:",me)}},ae=async(me,Pe)=>{try{await q.put(`/v1/invoices/${me}/status?status=${Pe}`),re()}catch(ue){console.error("Error updating invoice status:",ue)}},fe=async()=>{var me,Pe;try{await q.post("/v1/payroll/runs",null,{params:{month:S.month,year:S.year}}),k(!1),B()}catch(ue){console.error("Error creating payroll run:",ue),alert(((Pe=(me=ue.response)==null?void 0:me.data)==null?void 0:Pe.detail)||"Error creating payroll run")}},ne=async me=>{try{const Pe=await q.get(`/v1/payroll/payslips/${me}`);j(Pe.data||[]),v(me)}catch(Pe){console.error("Error loading payslips:",Pe)}},he=async()=>{try{await q.post("/v1/payroll/salaries",null,{params:{employee_id:I.employee_id,basic_salary:parseFloat(I.basic_salary),hra:parseFloat(I.hra)||0,transport_allowance:parseFloat(I.transport_allowance)||0,medical_allowance:parseFloat(I.medical_allowance)||0,special_allowance:parseFloat(I.special_allowance)||0}}),Q(!1),K({employee_id:"",basic_salary:"",hra:"",transport_allowance:"",medical_allowance:"",special_allowance:""}),G()}catch(me){console.error("Error creating salary:",me)}},M=async()=>{try{await q.post("/v1/payroll/deductions",null,{params:{employee_id:D.employee_id,deduction_type:D.deduction_type,amount:parseFloat(D.amount),description:D.description,is_percentage:D.is_percentage,is_recurring:!0}}),L(!1),Y({employee_id:"",deduction_type:"tax",amount:"",description:"",is_percentage:!1}),G()}catch(me){console.error("Error creating deduction:",me)}},Se=me=>{const Pe={draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",pending:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700"};return Pe[me]||Pe.draft};return r?n.jsx("div",{className:"text-center py-12",children:"Loading finance data..."}):n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold",children:"Finance Management"})}),n.jsx("div",{className:"bg-white p-2 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>t("invoices"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="invoices"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Invoices"}),n.jsx("button",{onClick:()=>t("payroll"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="payroll"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Payroll Runs"}),n.jsx("button",{onClick:()=>t("salaries"),className:`px-6 py-3 rounded-lg font-semibold transition ${e==="salaries"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Salaries & Deductions"})]})}),e==="invoices"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx("button",{onClick:()=>d(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Invoice"})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Revenue"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.total_revenue.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Paid Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.paid_amount.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",u.pending_amount.toLocaleString()]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:n.jsx("div",{className:"flex gap-3",children:["all","draft","sent","paid","overdue"].map(me=>n.jsx("button",{onClick:()=>o(me),className:`px-4 py-2 rounded capitalize ${l===me?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:me==="all"?"All Invoices":me},me))})}),a.length===0?n.jsx("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"No invoices found"})}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(me=>{var Pe;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:me.invoice_number}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:me.client_name}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:["$",(Pe=me.amount)==null?void 0:Pe.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:me.due_date?new Date(me.due_date).toLocaleDateString():"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Se(me.status)}`,children:me.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[me.status==="draft"&&n.jsx("button",{onClick:()=>ae(me.id,"sent"),className:"text-blue-600 hover:text-blue-900",children:"Send"}),me.status==="sent"&&n.jsx("button",{onClick:()=>ae(me.id,"paid"),className:"text-green-600 hover:text-green-900",children:"Mark Paid"})]})})]},me.id)})})]})})]}),e==="payroll"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx("button",{onClick:()=>k(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Payroll Run"})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Employees"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:_.total_employees||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Monthly Payroll"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(_.total_monthly_payroll||0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Payments"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:_.pending_payments||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Pending Amount"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(_.pending_amount||0).toLocaleString()]})]})]}),x.length===0?n.jsx("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"No payroll runs found"})}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Period"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(me=>{var Pe,ue,ye;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:me.period_display}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:me.total_employees}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["$",(Pe=me.total_gross)==null?void 0:Pe.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["$",(ue=me.total_deductions)==null?void 0:ue.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:["$",(ye=me.total_net)==null?void 0:ye.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Se(me.status)}`,children:me.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsx("button",{onClick:()=>ne(me.id),className:"text-indigo-600 hover:text-indigo-900",children:"View Payslips"})})]},me.id)})})]})}),h&&b.length>0&&n.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payslips"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Basic"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"HRA"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(me=>{var Pe,ue,ye,Ye,lt;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-4 py-3 text-sm",children:[n.jsx("div",{className:"font-medium",children:me.employee_name}),n.jsx("div",{className:"text-gray-500 text-xs",children:me.designation})]}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:["$",(Pe=me.basic_salary)==null?void 0:Pe.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:["$",(ue=me.hra)==null?void 0:ue.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",children:["$",(ye=me.gross_salary)==null?void 0:ye.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-red-600",children:["$",(Ye=me.total_deductions)==null?void 0:Ye.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-green-600",children:["$",(lt=me.net_salary)==null?void 0:lt.toLocaleString()]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Se(me.payment_status)}`,children:me.payment_status})})]},me.id)})})]})})]})]}),e==="salaries"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-end gap-3 mb-4",children:[n.jsx("button",{onClick:()=>Q(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Add Salary"}),n.jsx("button",{onClick:()=>L(!0),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition",children:"Add Deduction"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[n.jsx("div",{className:"px-6 py-4 border-b",children:n.jsx("h2",{className:"text-xl font-bold",children:"Employee Salaries"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Basic"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"HRA"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transport"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Medical"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(me=>{var Pe,ue,ye,Ye,lt;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 text-sm",children:[n.jsx("div",{className:"font-medium",children:me.employee_name}),n.jsx("div",{className:"text-gray-500 text-xs",children:me.designation})]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(Pe=me.basic_salary)==null?void 0:Pe.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(ue=me.hra)==null?void 0:ue.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(ye=me.transport_allowance)==null?void 0:ye.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",(Ye=me.medical_allowance)==null?void 0:Ye.toLocaleString()]}),n.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:["$",(lt=me.gross_salary)==null?void 0:lt.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${me.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:me.is_active?"Active":"Inactive"})})]},me.id)})})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"px-6 py-4 border-b",children:n.jsx("h2",{className:"text-xl font-bold",children:"Deductions"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recurring"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(me=>{var Pe;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:me.employee_name}),n.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:me.deduction_type.replace("_"," ")}),n.jsx("td",{className:"px-6 py-4 text-sm",children:me.description||"-"}),n.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-red-600",children:me.is_percentage?`${me.amount}%`:`$${(Pe=me.amount)==null?void 0:Pe.toLocaleString()}`}),n.jsx("td",{className:"px-6 py-4 text-sm",children:me.is_recurring?"Yes":"No"})]},me.id)})})]})})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Invoice"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Client Name"}),n.jsx("input",{type:"text",value:f.client_name,onChange:me=>y({...f,client_name:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Amount ($)"}),n.jsx("input",{type:"number",value:f.amount,onChange:me=>y({...f,amount:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Due Date"}),n.jsx("input",{type:"date",value:f.due_date,onChange:me=>y({...f,due_date:me.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:ce,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Payroll Run"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Month"}),n.jsx("select",{value:S.month,onChange:me=>E({...S,month:parseInt(me.target.value)}),className:"w-full p-2 border rounded",children:Array.from({length:12},(me,Pe)=>n.jsx("option",{value:Pe+1,children:new Date(2e3,Pe).toLocaleString("default",{month:"long"})},Pe+1))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Year"}),n.jsx("input",{type:"number",value:S.year,onChange:me=>E({...S,year:parseInt(me.target.value)}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:fe,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Run"}),n.jsx("button",{onClick:()=>k(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),F&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add Employee Salary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:I.employee_id,onChange:me=>K({...I,employee_id:me.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),T.map(me=>n.jsxs("option",{value:me.id,children:[me.full_name," - ",me.employee_code]},me.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Basic Salary ($)"}),n.jsx("input",{type:"number",value:I.basic_salary,onChange:me=>K({...I,basic_salary:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"HRA ($)"}),n.jsx("input",{type:"number",value:I.hra,onChange:me=>K({...I,hra:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Transport Allowance ($)"}),n.jsx("input",{type:"number",value:I.transport_allowance,onChange:me=>K({...I,transport_allowance:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Medical Allowance ($)"}),n.jsx("input",{type:"number",value:I.medical_allowance,onChange:me=>K({...I,medical_allowance:me.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:he,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Add Salary"}),n.jsx("button",{onClick:()=>Q(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),W&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add Deduction"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:D.employee_id,onChange:me=>Y({...D,employee_id:me.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),T.map(me=>n.jsxs("option",{value:me.id,children:[me.full_name," - ",me.employee_code]},me.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Type"}),n.jsxs("select",{value:D.deduction_type,onChange:me=>Y({...D,deduction_type:me.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"tax",children:"Tax"}),n.jsx("option",{value:"provident_fund",children:"Provident Fund"}),n.jsx("option",{value:"insurance",children:"Insurance"}),n.jsx("option",{value:"loan",children:"Loan Repayment"}),n.jsx("option",{value:"advance",children:"Advance Recovery"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Amount"}),n.jsx("input",{type:"number",value:D.amount,onChange:me=>Y({...D,amount:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Description"}),n.jsx("input",{type:"text",value:D.description,onChange:me=>Y({...D,description:me.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:D.is_percentage,onChange:me=>Y({...D,is_percentage:me.target.checked}),className:"mr-2"}),n.jsx("label",{className:"text-sm",children:"Is Percentage of Gross Salary"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:M,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Add Deduction"}),n.jsx("button",{onClick:()=>L(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function RR(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState(!1),[l,o]=g.useState(!0),[c,d]=g.useState(null),u=localStorage.getItem("role"),[m,f]=g.useState({leave_type:"casual",start_date:"",end_date:"",reason:""});g.useEffect(()=>{y()},[]);const y=async()=>{try{const b=await q.get("/auth/me");d(b.data.employee),b.data.employee?x(b.data.employee.id):o(!1)}catch(b){console.error("Error loading user:",b),o(!1)}},x=async b=>{try{const[j,_]=await Promise.all([q.get("/v1/leaves"),q.get(`/v1/leaves/balance/${b}`)]);t(j.data),s(_.data),o(!1)}catch(j){console.error("Error loading data:",j),o(!1)}},p=async b=>{var j,_;if(b.preventDefault(),!c){alert("Employee profile not found. Please contact administrator.");return}try{await q.post("/v1/leaves",{employee_id:c.id,...m}),i(!1),f({leave_type:"casual",start_date:"",end_date:"",reason:""}),x(c.id)}catch(N){console.error("Error submitting leave:",N),alert(((_=(j=N.response)==null?void 0:j.data)==null?void 0:_.detail)||"Error submitting leave request")}},h=async(b,j)=>{try{await q.put(`/v1/leaves/${b}/approve`,{status:j,rejection_reason:j==="rejected"?"Not approved":null}),c&&x(c.id)}catch(_){console.error("Error updating leave:",_)}},v=b=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[b]||"bg-gray-100 text-gray-800";return l?n.jsx("div",{className:"p-8",children:"Loading..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Leave Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage employee leave requests and balances"})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"+ Request Leave"})]}),n.jsx("div",{className:"grid grid-cols-3 gap-6 mb-8",children:r.map(b=>n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[b.leave_type," Leave"]}),n.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:b.available})})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Allocated:"}),n.jsxs("span",{className:"font-medium",children:[b.total_allocated," days"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Used:"}),n.jsxs("span",{className:"font-medium",children:[b.used," days"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Available:"}),n.jsxs("span",{className:"font-bold text-green-600",children:[b.available," days"]})]})]})]},b.leave_type))}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Request Leave"}),n.jsxs("form",{onSubmit:p,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Leave Type"}),n.jsxs("select",{value:m.leave_type,onChange:b=>f({...m,leave_type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"casual",children:"Casual Leave"}),n.jsx("option",{value:"sick",children:"Sick Leave"}),n.jsx("option",{value:"earned",children:"Earned Leave"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),n.jsx("input",{type:"date",value:m.start_date,onChange:b=>f({...m,start_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),n.jsx("input",{type:"date",value:m.end_date,onChange:b=>f({...m,end_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason"}),n.jsx("textarea",{value:m.reason,onChange:b=>f({...m,reason:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"3",required:!0})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Submit Request"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Leave Requests"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u==="admin"&&n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm",children:b.employee_name||"Employee"}),n.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:b.leave_type}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:[new Date(b.start_date).toLocaleDateString()," - ",new Date(b.end_date).toLocaleDateString()]}),n.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:b.days_count}),n.jsx("td",{className:"px-6 py-4 text-sm",children:b.reason}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v(b.status)}`,children:b.status})}),u==="admin"&&b.status==="pending"&&n.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[n.jsx("button",{onClick:()=>h(b.id,"approved"),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),n.jsx("button",{onClick:()=>h(b.id,"rejected"),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"})]})]},b.id))})]})})]})]})}function LR(){const[e,t]=g.useState(!0),[r,s]=g.useState([]),[a,i]=g.useState(null),l=async()=>{var c;t(!0),i(null);try{const d=await q.get("/v1/attendance/me");s(((c=d.data)==null?void 0:c.data)??d.data??[])}catch{i("Attendance API not available")}finally{t(!1)}};g.useEffect(()=>{l()},[]);const o=async()=>{try{await q.post("/v1/attendance/mark"),await l(),alert("Attendance marked (if backend supports it)")}catch{alert("Failed to mark attendance: endpoint may not be implemented")}};return n.jsxs("div",{className:"max-w-4xl",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Attendance"}),n.jsx("p",{className:"text-gray-600",children:"Mark daily attendance and view your recent history."})]}),n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Mark Attendance"})}),e?n.jsx("div",{children:"Loading..."}):a?n.jsx("div",{className:"text-red-600",children:a}):n.jsx("div",{className:"space-y-2",children:r.length?r.map(c=>n.jsxs("div",{className:"p-2 border rounded",children:[n.jsx("div",{children:Zp(c.timestamp||c.created_at)}),n.jsx("div",{className:"text-sm text-gray-600",children:c.status??c.type??"present"})]},c.id??c.timestamp)):n.jsx("div",{className:"text-gray-600",children:"No attendance records yet."})})]})}function IR(){var v;const[e,t]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(!1),[c,d]=g.useState(null),[u,m]=g.useState({employee_id:"",review_period_start:"",review_period_end:"",overall_rating:"",goals_achieved:[],strengths:"",areas_of_improvement:"",comments:""});g.useEffect(()=>{f()},[]);const f=async()=>{try{const[b,j]=await Promise.all([q.get("/v1/performance"),q.get("/v1/employees")]);t(b.data||[]),s(j.data||[]),i(!1)}catch(b){console.error("Error loading data:",b),i(!1)}},y=async()=>{try{await q.post("/v1/performance",{...u,overall_rating:parseFloat(u.overall_rating),goals_achieved:u.goals_achieved.length>0?u.goals_achieved:[]}),o(!1),m({employee_id:"",review_period_start:"",review_period_end:"",overall_rating:"",goals_achieved:[],strengths:"",areas_of_improvement:"",comments:""}),f()}catch(b){console.error("Error creating review:",b)}},x=b=>b>=4.5?"text-green-600":b>=3.5?"text-blue-600":b>=2.5?"text-yellow-600":"text-red-600",p=b=>b>=4.5?"Excellent":b>=3.5?"Good":b>=2.5?"Satisfactory":"Needs Improvement",h=b=>{const j=r.find(_=>_.id===b);return(j==null?void 0:j.full_name)||"Unknown"};return a?n.jsx("div",{className:"text-center py-12",children:"Loading performance reviews..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Performance Management"}),n.jsx("button",{onClick:()=>o(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Review"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Reviews"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:e.length})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Average Rating"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:e.length>0?(e.reduce((b,j)=>b+(j.overall_rating||0),0)/e.length).toFixed(1):"N/A"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Employees Reviewed"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:new Set(e.map(b=>b.employee_id)).size})]})]}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No performance reviews found"}),n.jsx("button",{onClick:()=>o(!0),className:"mt-4 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Create Your First Review"})]}):n.jsx("div",{className:"grid gap-6",children:e.map(b=>{var j;return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:h(b.employee_id)}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Review Period: ",new Date(b.review_period_start).toLocaleDateString()," - ",new Date(b.review_period_end).toLocaleDateString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-4xl font-bold ${x(b.overall_rating)}`,children:(j=b.overall_rating)==null?void 0:j.toFixed(1)}),n.jsx("div",{className:"text-sm text-gray-500 mt-1",children:p(b.overall_rating)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Strengths"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.strengths||"Not specified"})]}),n.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Areas of Improvement"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.areas_of_improvement||"Not specified"})]})]}),b.goals_achieved&&b.goals_achieved.length>0&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Goals Achieved"}),n.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700",children:b.goals_achieved.map((_,N)=>n.jsx("li",{children:_.goal||_},N))})]}),b.comments&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Additional Comments"}),n.jsx("p",{className:"text-sm text-gray-700",children:b.comments})]}),n.jsx("div",{className:"mt-4 flex gap-3",children:n.jsx("button",{onClick:()=>d(b),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"View Details"})})]},b.id)})}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Performance Review"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Employee"}),n.jsxs("select",{value:u.employee_id,onChange:b=>m({...u,employee_id:b.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Employee"}),r.map(b=>n.jsx("option",{value:b.id,children:b.full_name},b.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Review Period Start"}),n.jsx("input",{type:"date",value:u.review_period_start,onChange:b=>m({...u,review_period_start:b.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Review Period End"}),n.jsx("input",{type:"date",value:u.review_period_end,onChange:b=>m({...u,review_period_end:b.target.value}),className:"w-full p-2 border rounded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Overall Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:u.overall_rating,onChange:b=>m({...u,overall_rating:b.target.value}),className:"w-full p-2 border rounded",placeholder:"4.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Strengths"}),n.jsx("textarea",{value:u.strengths,onChange:b=>m({...u,strengths:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"What are the employee's key strengths?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Areas of Improvement"}),n.jsx("textarea",{value:u.areas_of_improvement,onChange:b=>m({...u,areas_of_improvement:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"What areas need improvement?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Additional Comments"}),n.jsx("textarea",{value:u.comments,onChange:b=>m({...u,comments:b.target.value}),className:"w-full p-2 border rounded h-24",placeholder:"Any additional feedback..."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:y,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Review"}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Performance Review Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Employee:"})," ",h(c.employee_id)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Review Period:"})," ",new Date(c.review_period_start).toLocaleDateString()," - ",new Date(c.review_period_end).toLocaleDateString()]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Overall Rating:"})," ",n.jsx("span",{className:`text-2xl font-bold ${x(c.overall_rating)}`,children:(v=c.overall_rating)==null?void 0:v.toFixed(1)})," - ",p(c.overall_rating)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Strengths:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.strengths})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Areas of Improvement:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.areas_of_improvement})]}),c.comments&&n.jsxs("div",{children:[n.jsx("strong",{children:"Comments:"}),n.jsx("p",{className:"mt-1 text-gray-700",children:c.comments})]})]}),n.jsx("button",{onClick:()=>d(null),className:"mt-6 w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Close"})]})})]})}function DCe({role:e}){const t={admin:"bg-purple-100 text-purple-800",recruiter:"bg-blue-100 text-blue-800",account_manager:"bg-indigo-100 text-indigo-800",internal_hr:"bg-yellow-100 text-yellow-800",consultant:"bg-pink-100 text-pink-800",employee:"bg-green-100 text-green-800",accounts:"bg-teal-100 text-teal-800",consultant_support:"bg-gray-100 text-gray-800",candidate:"bg-gray-50 text-gray-700",vendor:"bg-gray-50 text-gray-700",partner:"bg-gray-50 text-gray-700"};return n.jsx("span",{className:`px-2 py-1 rounded text-xs ${t[e]||"bg-gray-100 text-gray-800"}`,children:e})}function $Ce({users:e=[],roles:t={},loading:r=!1,onEdit:s,onDelete:a,onRoleChange:i,onStatusChange:l,onRefresh:o}){const[c,d]=g.useState(""),[u,m]=g.useState(""),f=g.useMemo(()=>{const x=Object.keys(t||{});return x.length?x:["admin","recruiter","account_manager","internal_hr","consultant","employee","accounts","consultant_support","candidate","vendor","partner"]},[t]),y=g.useMemo(()=>{const x=c.trim().toLowerCase();return e.filter(p=>u&&p.role!==u?!1:x?(p.username||"").toLowerCase().includes(x)||(p.email||"").toLowerCase().includes(x)||(p.full_name||"").toLowerCase().includes(x):!0)},[e,c,u]);return n.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[n.jsx("input",{placeholder:"Search by name, email...",value:c,onChange:x=>d(x.target.value),className:"px-3 py-2 border rounded w-full sm:w-72"}),n.jsxs("select",{value:u,onChange:x=>m(x.target.value),className:"px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"All roles"}),f.map(x=>{var p;return n.jsx("option",{value:x,children:((p=t[x])==null?void 0:p.name)||x},x)})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:o,className:"px-3 py-2 border rounded",children:"Refresh"})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left border-b",children:[n.jsx("th",{className:"p-3",children:"Username"}),n.jsx("th",{className:"p-3",children:"Full name"}),n.jsx("th",{className:"p-3",children:"Email"}),n.jsx("th",{className:"p-3 text-center",children:"Role"}),n.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center",children:"Loading..."})}):y.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center text-gray-600",children:"No users found"})}):y.map(x=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 font-medium",children:x.username}),n.jsx("td",{className:"p-3",children:x.full_name}),n.jsx("td",{className:"p-3 break-all",children:x.email}),n.jsx("td",{className:"p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(DCe,{role:x.role}),n.jsx("select",{value:x.role,onChange:p=>i(x.id,p.target.value),className:"px-2 py-1 border rounded text-sm","aria-label":`Change role for ${x.username}`,children:f.map(p=>{var h;return n.jsx("option",{value:p,children:((h=t[p])==null?void 0:h.name)||p},p)})})]})}),n.jsx("td",{className:"p-3 text-center",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[n.jsx("button",{onClick:()=>s(x),className:"px-3 py-1 bg-yellow-50 rounded",children:"Edit"}),n.jsx("button",{onClick:()=>l(x.id,!x.is_active),className:`px-3 py-1 rounded ${x.is_active?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.is_active?"Lock":"Unlock"}),n.jsx("button",{onClick:()=>a(x.id,x.username),className:"px-3 py-1 bg-red-50 rounded",children:"Delete"})]})})]},x.id))})]})})]})}function FR({open:e=!1,initialData:t=null,roles:r={},onClose:s,onSubmit:a}){const[i,l]=g.useState({username:"",email:"",password:"",role:""}),[o,c]=g.useState(!1);if(g.useEffect(()=>{l(t?{username:t.username||"",email:t.email||"",password:"",role:t.role||""}:{username:"",email:"",password:"",role:""})},[t,e]),!e)return null;const d=async f=>{var y,x;if(f.preventDefault(),!i.username||!i.email||!i.role){alert("Please fill required fields: username, email and role.");return}c(!0);try{const p={username:i.username,email:i.email,role:i.role};i.password&&(p.password=i.password),await a(p,t==null?void 0:t.id)}catch(p){console.error("User save error:",p),alert(((x=(y=p==null?void 0:p.response)==null?void 0:y.data)==null?void 0:x.detail)||"Failed to save user")}finally{c(!1)}},m=(Object.keys(r).length?Object.keys(r):["admin","recruiter","account_manager","internal_hr","consultant","employee","accounts","consultant_support","candidate","vendor","partner"]).filter(f=>f!=="vendor"&&f!=="partner");return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-bold",children:t?"Edit User":"Create User"}),n.jsx("button",{onClick:s,className:"px-3 py-1 rounded bg-gray-100",children:"Close"})]}),n.jsxs("form",{onSubmit:d,className:"grid gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Username *"}),n.jsx("input",{className:"w-full border p-2 rounded",required:!0,value:i.username,onChange:f=>l({...i,username:f.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Email *"}),n.jsx("input",{type:"email",className:"w-full border p-2 rounded",required:!0,value:i.email,onChange:f=>l({...i,email:f.target.value})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm block mb-1",children:["Password ",t?n.jsx("span",{className:"text-xs text-gray-500",children:"(leave blank to keep)"}):n.jsx("span",{className:"text-xs text-gray-500",children:"*"})]}),n.jsx("input",{type:"password",className:"w-full border p-2 rounded",value:i.password,onChange:f=>l({...i,password:f.target.value}),...t?{}:{required:!0}})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm block mb-1",children:"Role *"}),n.jsxs("select",{required:!0,className:"w-full border p-2 rounded",value:i.role,onChange:f=>l({...i,role:f.target.value}),children:[n.jsx("option",{value:"",children:"-- Select Role --"}),m.map(f=>{var y;return n.jsx("option",{value:f,children:((y=r[f])==null?void 0:y.name)||f.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())},f)})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Saving...":t?"Update":"Create"})]})]})]})})}function MCe(e){return e?Array.isArray(e)?e:Array.isArray(e.data)?e.data:Array.isArray(e.users)?e.users:Array.isArray(e.results)?e.results:[]:[]}function DR(){const[e,t]=g.useState([]),[r,s]=g.useState({}),[a,i]=g.useState(!0),[l,o]=g.useState(!1),[c,d]=g.useState(null),u=g.useCallback(async()=>{var h,v,b;i(!0);try{const[j,_,N]=await Promise.allSettled([q.get("/v1/users"),q.get("/v1/users/roles/summary"),q.get("/v1/roles")]);j.status==="fulfilled"&&t(MCe(j.value.data));let w={};if(_.status==="fulfilled"){const k=_.value.data;Array.isArray(k)?k.forEach(S=>w[S.key]=S):k&&typeof k=="object"&&(w=k)}N.status==="fulfilled"&&(Array.isArray((h=N.value)==null?void 0:h.data)?N.value.data:Array.isArray((b=(v=N.value)==null?void 0:v.data)==null?void 0:b.roles)?N.value.data.roles:[]).forEach(S=>{const E=String((S==null?void 0:S.name)||"").trim().toLowerCase();E&&(w[E]={...w[E]||{},role:E,name:(S==null?void 0:S.name)||E})}),s(w)}catch(j){console.error("UserManagement load error",j)}finally{i(!1)}},[]);g.useEffect(()=>{u()},[u]);const m=async h=>{await q.post("/v1/users",h),o(!1),u()},f=async(h,v)=>{v?await q.put(`/v1/users/${v}`,h):await q.post("/v1/users",h),d(null),u()},y=async(h,v)=>{window.confirm(`Delete user '${v}'?`)&&(await q.delete(`/v1/users/${h}`),u())},x=async(h,v)=>{if(window.confirm(`Change role to ${v}?`)){try{await q.put(`/v1/users/${h}/role`,{role:v})}catch{await q.put(`/v1/users/${h}`,{role:v})}u()}},p=async(h,v)=>{const b=v?"unlock":"lock";window.confirm(`Are you sure you want to ${b} this user?`)&&(await q.put(`/v1/users/${h}/status`,{is_active:v}),u())};return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 flex justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage users & assign roles"})]}),n.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 rounded bg-blue-600 text-white",children:"+ Create User"})]}),n.jsx($Ce,{users:e,roles:r,loading:a,onEdit:d,onDelete:y,onRoleChange:x,onStatusChange:p,onRefresh:u}),n.jsx(FR,{open:l,roles:r,onClose:()=>o(!1),onSubmit:m}),n.jsx(FR,{open:!!c,initialData:c,roles:r,onClose:()=>d(null),onSubmit:f})]})}function $R(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState({}),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[f,y]=g.useState(null),[x,p]=g.useState("all"),[h,v]=g.useState({job_id:"",platform:"linkedin",campaign_name:"",budget:"",start_date:new Date().toISOString().split("T")[0],end_date:""}),[b,j]=g.useState({impressions:"",clicks:"",applications:""}),_=[{value:"linkedin",label:"LinkedIn",icon:"",color:"bg-blue-500"},{value:"facebook",label:"Facebook",icon:"",color:"bg-indigo-600"},{value:"instagram",label:"Instagram",icon:"",color:"bg-pink-500"},{value:"twitter",label:"Twitter/X",icon:"",color:"bg-sky-500"},{value:"indeed",label:"Indeed",icon:"",color:"bg-blue-700"},{value:"glassdoor",label:"Glassdoor",icon:"",color:"bg-green-600"},{value:"google",label:"Google Ads",icon:"",color:"bg-red-500"}];g.useEffect(()=>{N()},[x]);const N=async()=>{try{const C=x!=="all"?{platform:x}:{},[P,O,R]=await Promise.all([q.get("/v1/campaigns",{params:C}),q.get("/v1/jobs"),q.get("/v1/campaigns/dashboard/metrics")]);t(P.data||[]),s(O.data||[]),o(R.data||{}),i(!1)}catch(C){console.error("Error loading campaigns:",C),i(!1)}},w=async()=>{try{await q.post("/v1/campaigns",null,{params:{job_id:h.job_id,platform:h.platform,campaign_name:h.campaign_name,budget:parseFloat(h.budget)||0,start_date:h.start_date,end_date:h.end_date||null}}),d(!1),v({job_id:"",platform:"linkedin",campaign_name:"",budget:"",start_date:new Date().toISOString().split("T")[0],end_date:""}),N()}catch(C){console.error("Error creating campaign:",C)}},k=async()=>{try{await q.put(`/v1/campaigns/${f.id}/metrics`,null,{params:{impressions:parseInt(b.impressions)||void 0,clicks:parseInt(b.clicks)||void 0,applications:parseInt(b.applications)||void 0}}),m(!1),y(null),N()}catch(C){console.error("Error updating metrics:",C)}},S=async(C,P)=>{try{await q.put(`/v1/campaigns/${C}/status`,null,{params:{status:P}}),N()}catch(O){console.error("Error updating status:",O)}},E=C=>{y(C),j({impressions:C.impressions||"",clicks:C.clicks||"",applications:C.applications||""}),m(!0)},T=C=>_.find(P=>P.value===C)||{label:C,icon:"",color:"bg-gray-500"},A=C=>({active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",completed:"bg-gray-100 text-gray-800"})[C]||"bg-gray-100 text-gray-800";return a?n.jsx("div",{className:"text-center py-12",children:"Loading campaigns..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Social Media Campaigns"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Track job advertisements across social media platforms"})]}),n.jsx("button",{onClick:()=>d(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"Create Campaign"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Campaigns"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:l.total_campaigns||0}),n.jsxs("div",{className:"text-xs mt-2 opacity-75",children:[l.active_campaigns||0," Active"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Budget"}),n.jsxs("div",{className:"text-3xl font-bold mt-2",children:["$",(l.total_budget||0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Total Impressions"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:(l.total_impressions||0).toLocaleString()})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-lg shadow-lg text-white",children:[n.jsx("div",{className:"text-sm opacity-90",children:"Applications"}),n.jsx("div",{className:"text-3xl font-bold mt-2",children:l.total_applications||0}),n.jsxs("div",{className:"text-xs mt-2 opacity-75",children:["CTR: ",l.average_ctr||0,"%"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[n.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded whitespace-nowrap ${x==="all"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:"All Platforms"}),_.map(C=>n.jsxs("button",{onClick:()=>p(C.value),className:`px-4 py-2 rounded whitespace-nowrap ${x===C.value?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:[C.icon," ",C.label]},C.value))]})}),e.length===0?n.jsxs("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No campaigns found"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Create your first social media campaign to start tracking job advertisements"})]}):n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Job"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Platform"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Budget"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Impressions"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Applications"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CTR"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(C=>{var O,R,F;const P=T(C.platform);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"font-medium text-gray-900",children:C.campaign_name}),n.jsx("div",{className:"text-xs text-gray-500",children:C.utm_campaign})]}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.job_title}),n.jsx("div",{className:"text-xs text-gray-500",children:C.job_location})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold text-white ${P.color}`,children:[P.icon," ",P.label]})}),n.jsxs("td",{className:"px-6 py-4 text-sm font-semibold",children:["$",(O=C.budget)==null?void 0:O.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(R=C.impressions)==null?void 0:R.toLocaleString()}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(F=C.clicks)==null?void 0:F.toLocaleString()}),n.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-green-600",children:C.applications}),n.jsxs("td",{className:"px-6 py-4 text-sm",children:[C.click_through_rate,"%"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A(C.status)}`,children:C.status})}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>E(C),className:"text-indigo-600 hover:text-indigo-900",children:"Update"}),C.status==="active"&&n.jsx("button",{onClick:()=>S(C.id,"paused"),className:"text-yellow-600 hover:text-yellow-900",children:"Pause"}),C.status==="paused"&&n.jsx("button",{onClick:()=>S(C.id,"active"),className:"text-green-600 hover:text-green-900",children:"Resume"})]})})]},C.id)})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Social Media Campaign"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Job Position"}),n.jsxs("select",{value:h.job_id,onChange:C=>v({...h,job_id:C.target.value}),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select Job"}),r.map(C=>n.jsxs("option",{value:C.id,children:[C.title," - ",C.location]},C.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Platform"}),n.jsx("select",{value:h.platform,onChange:C=>v({...h,platform:C.target.value}),className:"w-full p-2 border rounded",children:_.map(C=>n.jsxs("option",{value:C.value,children:[C.icon," ",C.label]},C.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Campaign Name"}),n.jsx("input",{type:"text",value:h.campaign_name,onChange:C=>v({...h,campaign_name:C.target.value}),className:"w-full p-2 border rounded",placeholder:"Summer 2024 Hiring Drive"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Budget ($)"}),n.jsx("input",{type:"number",value:h.budget,onChange:C=>v({...h,budget:C.target.value}),className:"w-full p-2 border rounded",placeholder:"1000"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:h.start_date,onChange:C=>v({...h,start_date:C.target.value}),className:"w-full p-2 border rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:h.end_date,onChange:C=>v({...h,end_date:C.target.value}),className:"w-full p-2 border rounded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:w,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Create Campaign"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Update Campaign Metrics"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Campaign: ",n.jsx("strong",{children:f==null?void 0:f.campaign_name})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Impressions"}),n.jsx("input",{type:"number",value:b.impressions,onChange:C=>j({...b,impressions:C.target.value}),className:"w-full p-2 border rounded",placeholder:(f==null?void 0:f.impressions)||"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Clicks"}),n.jsx("input",{type:"number",value:b.clicks,onChange:C=>j({...b,clicks:C.target.value}),className:"w-full p-2 border rounded",placeholder:(f==null?void 0:f.clicks)||"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Applications Received"}),n.jsx("input",{type:"number",value:b.applications,onChange:C=>j({...b,applications:C.target.value}),className:"w-full p-2 border rounded",placeholder:(f==null?void 0:f.applications)||"0"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:k,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Update Metrics"}),n.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})}function MR(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState(null),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[f,y]=g.useState(null),[x,p]=g.useState(""),[h,v]=g.useState(""),[b,j]=g.useState({campaign_id:"",full_name:"",email:"",phone:"",location:"",linkedin_url:"",source:"linkedin"}),[_,N]=g.useState("");g.useEffect(()=>{w()},[x,h]);const w=async()=>{try{const A={};x&&(A.status=x),h&&(A.source=h);const[C,P,O,R]=await Promise.all([q.get("/v1/leads/",{params:A}),q.get("/v1/leads/campaigns"),q.get("/v1/jobs"),q.get("/v1/leads/analytics")]);t(C.data||[]),s(P.data||[]),i(O.data||[]),o(R.data)}catch(A){console.error("Error loading data:",A)}},k=async A=>{var C,P;A.preventDefault();try{await q.post("/v1/leads/",b),d(!1),j({campaign_id:"",full_name:"",email:"",phone:"",location:"",linkedin_url:"",source:"linkedin"}),w()}catch(O){console.error("Error creating lead:",O),alert(((P=(C=O.response)==null?void 0:C.data)==null?void 0:P.detail)||"Error creating lead")}},S=async()=>{var A,C;if(!_){alert("Please select a job position");return}try{await q.post("/v1/leads/convert-to-applicant",null,{params:{lead_id:f.id,job_id:_}}),m(!1),y(null),N(""),w(),alert("Lead converted to applicant successfully!")}catch(P){console.error("Error converting lead:",P),alert(((C=(A=P.response)==null?void 0:A.data)==null?void 0:C.detail)||"Error converting lead")}},E=A=>{const C={new:"bg-blue-100 text-blue-800",qualified:"bg-green-100 text-green-800",contacted:"bg-yellow-100 text-yellow-800",converted:"bg-purple-100 text-purple-800",rejected:"bg-red-100 text-red-800"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C[A]||"bg-gray-100 text-gray-800"}`,children:(A==null?void 0:A.toUpperCase())||"NEW"})},T=A=>({linkedin:"",facebook:"",instagram:"",twitter:"",indeed:"",direct:"",referral:""})[A]||"";return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Lead Management"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage leads from your marketing campaigns"})]}),l&&n.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.total_leads}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Total Leads"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.qualified_leads}),n.jsx("div",{className:"text-green-100 text-sm",children:"Qualified Leads"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"text-3xl font-bold mb-1",children:l.converted_leads}),n.jsx("div",{className:"text-purple-100 text-sm",children:"Converted to Applicants"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"text-3xl font-bold mb-1",children:[l.conversion_rate,"%"]}),n.jsx("div",{className:"text-orange-100 text-sm",children:"Conversion Rate"})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:x,onChange:A=>p(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"qualified",children:"Qualified"}),n.jsx("option",{value:"contacted",children:"Contacted"}),n.jsx("option",{value:"converted",children:"Converted"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),n.jsxs("select",{value:h,onChange:A=>v(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Sources"}),n.jsx("option",{value:"linkedin",children:"LinkedIn"}),n.jsx("option",{value:"facebook",children:"Facebook"}),n.jsx("option",{value:"instagram",children:"Instagram"}),n.jsx("option",{value:"twitter",children:"Twitter"}),n.jsx("option",{value:"indeed",children:"Indeed"}),n.jsx("option",{value:"direct",children:"Direct"}),n.jsx("option",{value:"referral",children:"Referral"})]})]})]}),n.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center space-x-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),n.jsx("span",{children:"Add Lead"})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Lead Info"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Source"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Score"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:e.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),n.jsx("p",{className:"text-lg font-medium",children:"No leads found"}),n.jsx("p",{className:"text-sm",children:"Leads from your campaigns will appear here"})]})}):e.map(A=>n.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"font-medium text-gray-900",children:A.full_name||"N/A"}),A.location&&n.jsx("div",{className:"text-sm text-gray-500",children:A.location})]}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"text-sm text-gray-900",children:A.email}),A.phone&&n.jsx("div",{className:"text-sm text-gray-500",children:A.phone})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xl",children:T(A.source)}),n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:A.source||"Unknown"})]})}),n.jsx("td",{className:"px-6 py-4",children:E(A.status)}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-lg font-semibold text-blue-600",children:A.score||0}),n.jsx("div",{className:"text-sm text-gray-500 ml-1",children:"/100"})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:A.created_at?new Date(A.created_at).toLocaleDateString():"N/A"}),n.jsxs("td",{className:"px-6 py-4 text-right",children:[A.status!=="converted"&&n.jsx("button",{onClick:()=>{y(A),m(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-medium",children:"Convert to Applicant"}),A.status==="converted"&&n.jsx("span",{className:"text-sm text-gray-500 italic",children:"Converted "})]})]},A.id))})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Lead"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:k,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign (Optional)"}),n.jsxs("select",{value:b.campaign_id,onChange:A=>j({...b,campaign_id:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Campaign"}),r.map(A=>n.jsxs("option",{value:A.id,children:[A.campaign_name," (",A.platform,")"]},A.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:b.full_name,onChange:A=>j({...b,full_name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:b.email,onChange:A=>j({...b,email:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),n.jsx("input",{type:"tel",value:b.phone,onChange:A=>j({...b,phone:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",value:b.location,onChange:A=>j({...b,location:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn URL"}),n.jsx("input",{type:"url",value:b.linkedin_url,onChange:A=>j({...b,linkedin_url:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),n.jsxs("select",{value:b.source,onChange:A=>j({...b,source:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"linkedin",children:"LinkedIn"}),n.jsx("option",{value:"facebook",children:"Facebook"}),n.jsx("option",{value:"instagram",children:"Instagram"}),n.jsx("option",{value:"twitter",children:"Twitter"}),n.jsx("option",{value:"indeed",children:"Indeed"}),n.jsx("option",{value:"direct",children:"Direct"}),n.jsx("option",{value:"referral",children:"Referral"})]})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Add Lead"})]})]})]})})}),u&&f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:n.jsxs("div",{className:"p-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Convert Lead to Applicant"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Converting ",n.jsx("span",{className:"font-semibold",children:f.full_name})," to a job applicant."]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Job Position *"}),n.jsxs("select",{value:_,onChange:A=>N(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Choose a job..."}),a.filter(A=>A.status==="open").map(A=>n.jsxs("option",{value:A.id,children:[A.title," - ",A.location]},A.id))]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{m(!1),y(null),N("")},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),n.jsx("button",{onClick:S,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:"Convert"})]})]})})})]})}function w_(){var m;const{id:e}=Rr(),t=Et(),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState([]),c=f=>{const y=String(f||"").toLowerCase().replace(/\s+/g,"_");return y==="interview_scheduled"||y==="interview"?"scheduled":y};g.useEffect(()=>{d()},[]);const d=async()=>{var f;try{const[y,x]=await Promise.all([q.get(`/v1/interviews/${e}`),q.get(`/v1/interviews/${e}/transcript`)]);i(y.data),o(((f=x.data)==null?void 0:f.transcript)||[])}catch{alert("Failed to load interview details")}finally{s(!1)}},u=f=>{switch(c(f)){case"in_progress":return"In Progress";case"completed":return"Completed";case"scheduled":return"Scheduled";case"no_show":return"No-show";default:return f||"Unknown"}};return r?n.jsx("h2",{className:"p-6",children:"Loading details..."}):a?n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Interview Result & Feedback"}),n.jsx("button",{onClick:()=>t("/candidate"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back to Dashboard"})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4 mb-4",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Job:"})," ",(m=a==null?void 0:a.job)==null?void 0:m.title]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",u(a.status)]}),n.jsxs("p",{children:[n.jsx("b",{children:"Completed At:"})," ",a.completed_at?new Date(a.completed_at).toLocaleString():"Not Available"]}),a.overall_ai_score!==null&&n.jsxs("p",{className:"mt-2 text-lg font-semibold text-green-700",children:["AI Score: ",a.overall_ai_score," / 10"]})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Interview Transcript"}),c(a==null?void 0:a.status)==="in_progress"&&l.length===0?n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("p",{children:"Your interview is still in progress. You can resume it now."}),n.jsx("button",{onClick:()=>t(`/interviews/${e}`),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Resume Interview"})]}):l.length===0?n.jsx("p",{className:"text-gray-500 text-sm",children:"No conversation history available"}):l.map((f,y)=>n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsx("div",{className:"p-2 rounded bg-blue-100 text-blue-900",children:f.question}),n.jsx("div",{className:"p-2 rounded bg-green-100 text-green-900 text-right",children:f.answer})]},y))]})]}):n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found or unauthorized"})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BCe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UCe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),BR=e=>{const t=UCe(e);return t.charAt(0).toUpperCase()+t.slice(1)},MU=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),zCe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VCe=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...o},c)=>g.createElement("svg",{ref:c,...WCe,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:MU("lucide",a),...!i&&!zCe(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>g.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(e,t)=>{const r=g.forwardRef(({className:s,...a},i)=>g.createElement(VCe,{ref:i,iconNode:t,className:MU(`lucide-${BCe(BR(e))}`,`lucide-${e}`,s),...a}));return r.displayName=BR(e),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HCe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qCe=Nt("activity",HCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cp=Nt("arrow-left",GCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JCe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KCe=Nt("arrow-right",JCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],YCe=Nt("arrow-up-down",XCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QCe=Nt("badge-check",ZCe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],t4e=Nt("bell-ring",e4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],i4=Nt("bell",r4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],s4e=Nt("briefcase-business",n4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ha=Nt("briefcase",a4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],yk=Nt("building-2",i4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],df=Nt("building",l4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],BU=Nt("calendar-days",o4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],si=Nt("calendar",c4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],u4e=Nt("chart-column",d4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],f4e=Nt("chart-line",m4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wc=Nt("check",h4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fo=Nt("chevron-down",p4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],UR=Nt("chevron-left",x4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],U1=Nt("chevron-right",g4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],z1=Nt("chevron-up",y4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zs=Nt("circle-alert",v4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Oi=Nt("circle-check-big",b4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dp=Nt("circle-check",j4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ti=Nt("circle-x",_4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],N4e=Nt("circle",w4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_l=Nt("clipboard-list",k4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pn=Nt("clock",S4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],A4e=Nt("copy",C4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Qp=Nt("dollar-sign",E4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],up=Nt("download",T4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],zR=Nt("ellipsis-vertical",P4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Xv=Nt("external-link",O4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cl=Nt("eye",R4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],I4e=Nt("file-chart-column-increasing",L4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4e=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],D4e=Nt("file-pen-line",F4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],M4e=Nt("file-search",$4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],U4e=Nt("file-spreadsheet",B4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cn=Nt("file-text",z4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],UU=Nt("file-up",W4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4e=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],H4e=Nt("folder-kanban",V4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],G4e=Nt("folder-plus",q4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],K4e=Nt("folder",J4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],W1=Nt("funnel",X4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Z4e=Nt("git-branch",Y4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],eAe=Nt("graduation-cap",Q4e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tAe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rAe=Nt("grid-3x3",tAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nAe=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],WR=Nt("handshake",nAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sAe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],aAe=Nt("import",sAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iAe=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],lAe=Nt("indian-rupee",iAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oAe=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],cAe=Nt("landmark",oAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dAe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],uf=Nt("layout-dashboard",dAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uAe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],mAe=Nt("link-2",uAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fAe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qs=Nt("loader-circle",fAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hAe=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],N_=Nt("loader",hAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pAe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],xAe=Nt("lock-open",pAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gAe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],VR=Nt("lock",gAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yAe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ex=Nt("log-out",yAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vAe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uu=Nt("mail",vAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bAe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$c=Nt("map-pin",bAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jAe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],HR=Nt("megaphone",jAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],zU=Nt("message-square",_Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wAe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],NAe=Nt("pencil",wAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kAe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],V1=Nt("phone",kAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SAe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ya=Nt("plus",SAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CAe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],AAe=Nt("refresh-ccw",CAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EAe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$l=Nt("refresh-cw",EAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TAe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],PAe=Nt("rotate-ccw",TAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OAe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RAe=Nt("save",OAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LAe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Es=Nt("search",LAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IAe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ri=Nt("send",IAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FAe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H1=Nt("settings",FAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DAe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],k0=Nt("shield-check",DAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qR=Nt("shield",$Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MAe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],BAe=Nt("sliders-horizontal",MAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UAe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zAe=Nt("sparkles",UAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WAe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],l4=Nt("square-pen",WAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VAe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mf=Nt("star",VAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HAe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ff=Nt("trash-2",HAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qAe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],GAe=Nt("trending-up",qAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JAe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_m=Nt("triangle-alert",JAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KAe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],o4=Nt("upload",KAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XAe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],WU=Nt("user-check",XAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YAe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ZAe=Nt("user-cog",YAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QAe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Yv=Nt("user-plus",QAe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],t3e=Nt("user-x",e3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ao=Nt("user",r3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3e=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],s3e=Nt("users-round",n3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qr=Nt("users",a3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],l3e=Nt("video",i3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3e=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],c3e=Nt("wallet",o3e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ar=Nt("x",d3e),u3e=/^[A-Za-z0-9 ]+$/,Kt=e=>String(e??"").trim(),Ml=(e,t="Feature name",{pattern:r=u3e,patternMessage:s=`${t} can only contain letters, numbers, and spaces.`}={})=>{const a=Kt(e);return a?r.test(a)?"":s:`${t} cannot be empty.`},Nc=(e,{minLength:t=20,required:r=!1,label:s="Description"}={})=>{const a=Kt(e);return a?a.length<t?`${s} must be at least ${t} characters.`:"":r?`${s} cannot be empty.`:""},m3e=({list:e=[],name:t,groupValue:r,nameKey:s="name",groupKey:a="group"})=>{const i=Kt(t).toLowerCase();return i?e.some(l=>{const o=Kt(l==null?void 0:l[s]).toLowerCase(),c=(l==null?void 0:l[a])??null;return o===i&&c===(r??null)}):!1},pl=["Notice Period","Personal Information","Professional Information","Education Details","Skills","Certifications","Experience"],vk={name:"",noticePeriod:"",gender:"",dateOfBirth:"",phone:"",email:"",currentAddress:"",permanentAddress:"",city:"",pincode:"",readyToRelocate:!1,preferredLocation:"",designation:"",currentCtc:"",expectedCtc:"",highestDegree:"",collegeName:"",cgpaPercentage:"",skills:"",certificationName:"",certificationCredentialId:"",certificationCredentialLink:"",experienceCompany:"",experienceRole:"",experienceProject:"",experienceSkillsLearnt:"",experienceYears:"",experienceCtc:"",additionalEducations:[],additionalCertifications:[],additionalExperiences:[]},f3e={highestDegree:"",collegeName:"",cgpaPercentage:""},h3e={certificationName:"",certificationCredentialId:"",certificationCredentialLink:""},p3e={experienceCompany:"",experienceRole:"",experienceProject:"",experienceSkillsLearnt:"",experienceYears:"",experienceCtc:""},GR=new Set(["name","email","phone","designation","skills","experienceYears"]),ay=80,Yx=300,x3e=5*1024*1024,g3e=new Set([".pdf",".doc",".docx"]),y3e=new Set(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]),k_=e=>{const t=(e==null?void 0:e.clientWidth)||0,r=(e==null?void 0:e.clientHeight)||0,s=(e==null?void 0:e.naturalWidth)||0,a=(e==null?void 0:e.naturalHeight)||0;if(!t||!r||!s||!a)return{x:0,y:0,width:t,height:r};const i=s/a,l=t/r;if(i>l){const c=t/i;return{x:0,y:(r-c)/2,width:t,height:c}}const o=r*i;return{x:(t-o)/2,y:0,width:o,height:r}},S_=(e,t)=>{const r=Math.max(Math.min(t.width,t.height),1),s=Math.min(ay,r),a=Math.min(Math.max(e.size,s),r),i=t.x,l=t.y,o=Math.max(t.x+t.width-a,i),c=Math.max(t.y+t.height-a,l);return{size:a,x:Math.min(Math.max(e.x,i),o),y:Math.min(Math.max(e.y,l),c)}},v3e=(e="")=>{const t=String(e).lastIndexOf(".");return t>=0?String(e).slice(t).toLowerCase():""},JR=e=>{if(!e)return{valid:!1,message:"Please select a resume file."};const t=v3e(e.name),r=String(e.type||"").toLowerCase();return!g3e.has(t)&&!y3e.has(r)?{valid:!1,message:"Only PDF, DOC, or DOCX files are allowed."}:e.size>x3e?{valid:!1,message:"Resume size must be 5 MB or less."}:{valid:!0}},jn=e=>e==null?!1:typeof e=="string"?e.trim()!=="":Array.isArray(e)?e.some(t=>jn(t)):typeof e=="object"?Object.values(e).some(t=>jn(t)):!0,Zx=e=>Array.isArray(e)?JSON.stringify(e.map(t=>typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([r,s])=>[r,String(s??"").trim().toLowerCase()])):String(t??"").trim().toLowerCase())):typeof e=="object"&&e!==null?JSON.stringify(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,String(r??"").trim().toLowerCase()]))):String(e??"").trim().toLowerCase(),b3e=(e={})=>{var c,d,u,m,f,y,x,p,h,v,b,j;const t=Array.isArray(e.education_history)?e.education_history:Array.isArray(e.education_details)?e.education_details:Array.isArray(e.education)?e.education:jn(e.education)?[e.education]:[],r=Array.isArray(e.work_history)?e.work_history:Array.isArray(e.experiences)?e.experiences:Array.isArray(e.employment_history)?e.employment_history:Array.isArray(e.experience_history)?e.experience_history:[],s=Array.isArray(e.certifications)?e.certifications:jn(e.certifications)?[e.certifications]:jn(e.certification)?[e.certification]:[],a=t.map(_=>typeof _=="string"?{highestDegree:_.trim(),collegeName:"",cgpaPercentage:""}:{highestDegree:String(Tt(_,["degree","title","qualification","course","education"],"")).trim(),collegeName:String(Tt(_,["college","institution","university","school"],"")).trim(),cgpaPercentage:String(Tt(_,["cgpa","percentage","score","grade"],"")).trim()}).filter(_=>jn(_)),i=r.map(_=>({experienceCompany:String(Tt(_,["company","company_name","employer","organization"],"")).trim(),experienceRole:String(Tt(_,["role","designation","title","position"],"")).trim(),experienceProject:String(Tt(_,["project_done","project","project_name","projects","summary"],"")).trim(),experienceSkillsLearnt:X0(Tt(_,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")).trim(),experienceYears:String(Tt(_,["years","duration_years","total_years","duration","experience"],"")).trim(),experienceCtc:String(Tt(_,["ctc","current_ctc","salary","compensation","package"],"")).trim()})).filter(_=>jn(_)),l=s.map(_=>typeof _=="string"?{certificationName:_.trim(),certificationCredentialId:"",certificationCredentialLink:""}:{certificationName:String(Tt(_,["name","title","certification_name"],"")).trim(),certificationCredentialId:String(Tt(_,["credential_id","credentialId","id"],"")).trim(),certificationCredentialLink:String(Tt(_,["credential_url","credentialUrl","url"],"")).trim()}).filter(_=>jn(_)),o=String(Tt(e,["total_experience","experience_years","experience"],"")).trim();return{name:String(Tt(e,["full_name","fullName","name"],"")).trim(),email:String(Tt(e,["email"],"")).trim(),phone:String(Tt(e,["phone","mobile","contact_number"],"")).trim(),skills:X0(Tt(e,["skills","primary_skills","skill_set","top_skills"],"")).trim(),highestDegree:((c=a[0])==null?void 0:c.highestDegree)||String(Tt(e,["highest_degree","education","degree"],"")).trim(),collegeName:((d=a[0])==null?void 0:d.collegeName)||String(Tt(e,["college","institution","university"],"")).trim(),cgpaPercentage:((u=a[0])==null?void 0:u.cgpaPercentage)||String(Tt(e,["cgpa","percentage"],"")).trim(),additionalEducations:a.slice(1),certificationName:((m=l[0])==null?void 0:m.certificationName)||"",certificationCredentialId:((f=l[0])==null?void 0:f.certificationCredentialId)||"",certificationCredentialLink:((y=l[0])==null?void 0:y.certificationCredentialLink)||"",additionalCertifications:l.slice(1),experienceCompany:((x=i[0])==null?void 0:x.experienceCompany)||"",experienceRole:((p=i[0])==null?void 0:p.experienceRole)||"",experienceProject:((h=i[0])==null?void 0:h.experienceProject)||"",experienceSkillsLearnt:((v=i[0])==null?void 0:v.experienceSkillsLearnt)||"",experienceYears:o||String(((b=i[0])==null?void 0:b.experienceYears)||"").trim(),experienceCtc:((j=i[0])==null?void 0:j.experienceCtc)||"",additionalExperiences:i.slice(1)}},j3e=e=>["name","email","phone","skills","highestDegree","collegeName","experienceCompany","experienceRole","experienceYears","certificationName","additionalEducations","additionalExperiences","additionalCertifications"].some(t=>jn(e==null?void 0:e[t])),_3e=(e,t)=>{const s=[{key:"name",label:"Full Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"skills",label:"Skills"},{key:"highestDegree",label:"Highest Degree"},{key:"collegeName",label:"College Name"},{key:"cgpaPercentage",label:"CGPA / %"},{key:"certificationName",label:"Certification Name"},{key:"experienceCompany",label:"Experience Company"},{key:"experienceRole",label:"Experience Role"},{key:"experienceYears",label:"Experience Years"}].filter(({key:i})=>jn(t==null?void 0:t[i])&&jn(e==null?void 0:e[i])).filter(({key:i})=>Zx(t[i])!==Zx(e[i])).map(({key:i,label:l})=>({key:i,label:l,existing:e[i],parsed:t[i]}));return[{key:"additionalEducations",label:"Additional Education"},{key:"additionalCertifications",label:"Additional Certifications"},{key:"additionalExperiences",label:"Additional Experience"}].forEach(({key:i,label:l})=>{!jn(t==null?void 0:t[i])||!jn(e==null?void 0:e[i])||Zx(t[i])!==Zx(e[i])&&s.push({key:i,label:l,existing:`${e[i].length||0} entries`,parsed:`${t[i].length||0} entries`})}),s},w3e=(e,t)=>{const r={...e},s=a=>{jn(t==null?void 0:t[a])&&(r[a]=t[a])};return["name","email","phone","skills","highestDegree","collegeName","cgpaPercentage","certificationName","certificationCredentialId","certificationCredentialLink","experienceCompany","experienceRole","experienceProject","experienceSkillsLearnt","experienceYears","experienceCtc"].forEach(s),Array.isArray(t==null?void 0:t.additionalEducations)&&t.additionalEducations.length>0&&(r.additionalEducations=t.additionalEducations),Array.isArray(t==null?void 0:t.additionalCertifications)&&t.additionalCertifications.length>0&&(r.additionalCertifications=t.additionalCertifications),Array.isArray(t==null?void 0:t.additionalExperiences)&&t.additionalExperiences.length>0&&(r.additionalExperiences=t.additionalExperiences),r},N3e=e=>{if(!e)return[];const t=[],r=(s,a)=>{jn(a)&&t.push({label:s,value:String(a)})};return r("Full Name",e.name),r("Email",e.email),r("Phone",e.phone),r("Skills",e.skills),(jn(e.highestDegree)||jn(e.collegeName)||jn(e.cgpaPercentage))&&t.push({label:"Education",value:[e.highestDegree,e.collegeName,e.cgpaPercentage?`CGPA/%: ${e.cgpaPercentage}`:""].filter(Boolean).join(" | ")}),(jn(e.experienceCompany)||jn(e.experienceRole)||jn(e.experienceYears))&&t.push({label:"Experience",value:[e.experienceCompany,e.experienceRole,e.experienceYears?`${e.experienceYears} years`:""].filter(Boolean).join(" | ")}),jn(e.certificationName)&&t.push({label:"Certifications",value:e.certificationName}),Array.isArray(e.additionalEducations)&&e.additionalEducations.length>0&&t.push({label:"Additional Education",value:`${e.additionalEducations.length} more entries`}),Array.isArray(e.additionalExperiences)&&e.additionalExperiences.length>0&&t.push({label:"Additional Experience",value:`${e.additionalExperiences.length} more entries`}),Array.isArray(e.additionalCertifications)&&e.additionalCertifications.length>0&&t.push({label:"Additional Certifications",value:`${e.additionalCertifications.length} more entries`}),t},Qx=[[{key:"noticePeriod",label:"Notice Period"}],[{key:"photo",label:"Profile Photo",type:"photo",full:!0},{key:"resume",label:"Resume",type:"file",full:!0},{key:"name",label:"Name"},{key:"gender",label:"Gender",type:"select",options:["","Male","Female","Non-binary","Prefer not to say"]},{key:"dateOfBirth",label:"DOB",type:"date"},{key:"phone",label:"Phone Number"},{key:"email",label:"Email",type:"email"},{key:"currentAddress",label:"Current Address",type:"textarea",full:!0},{key:"permanentAddress",label:"Permanent Address",type:"textarea",full:!0},{key:"city",label:"City"},{key:"pincode",label:"Pincode"},{key:"readyToRelocate",label:"Ready To Relocate",type:"checkbox"},{key:"preferredLocation",label:"Preferred Location"}],[{key:"designation",label:"Designation"},{key:"currentCtc",label:"Current CTC"},{key:"expectedCtc",label:"Expected CTC"}],[{key:"highestDegree",label:"Highest Degree"},{key:"collegeName",label:"College Name"},{key:"cgpaPercentage",label:"CGPA / %"},{key:"additionalEducations",label:"Add More Education",type:"add-more-education",full:!0}],[{key:"skills",label:"Skills",hint:"Comma separated tags"}],[{key:"certificationName",label:"Certification Name"},{key:"certificationCredentialId",label:"Credential ID"},{key:"certificationCredentialLink",label:"Credential Link",hint:"Must be valid URL"},{key:"additionalCertifications",label:"Add More Certifications",type:"add-more-certification",full:!0}],[{key:"experienceCompany",label:"Company Worked For"},{key:"experienceRole",label:"Role"},{key:"experienceProject",label:"Project Done"},{key:"experienceSkillsLearnt",label:"Skills Learnt",hint:"Comma separated"},{key:"experienceYears",label:"Years"},{key:"experienceCtc",label:"CTC There"},{key:"additionalExperiences",label:"Add More Experience",type:"add-more-experience",full:!0}]],Uo=e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e??null},Tt=(e,t,r="")=>{for(const s of t){const a=e==null?void 0:e[s];if(a!=null&&String(a).trim()!=="")return a}return r},X0=e=>e?Array.isArray(e)?e.map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||(t==null?void 0:t.skill)||"").filter(Boolean).join(", "):String(e):"",KR=e=>e?/^https?:\/\//i.test(e)||String(e).startsWith("blob:")?e:`http://localhost:8000/${String(e).replace(/^\/+/,"")}`:"",XR=e=>{if(!e)return!0;try{return new URL(e),!0}catch{return!1}},wm=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),VU=e=>String(e||"").replace(/[\u00A0\u2007\u202F]/g," ").trim(),HU=e=>{const t=VU(e);if(!t)return"";if(t.startsWith("+")){const r=t.replace(/[^\d]/g,"");return r?`+${r}`:""}return t.replace(/[^\d]/g,"")},eg=(e={})=>{const t=Tt(e,["full_name","fullName","name"],"").trim(),r=Tt(e,["first_name","firstName"],"").trim(),s=Tt(e,["last_name","lastName"],"").trim(),a=t||[r,s].filter(Boolean).join(" ").trim(),i=Array.isArray(e.education_history)?e.education_history:Array.isArray(e.education_details)?e.education_details:[],l=i[0]||{},o=Array.isArray(e.work_history)?e.work_history:Array.isArray(e.employment_history)?e.employment_history:Array.isArray(e.experience_history)?e.experience_history:[],c=o[0]||{},d=Array.isArray(e.certifications)?e.certifications:e.certifications?[e.certifications]:[],u=d[0],m=typeof u=="string"?u:Tt(u,["name","title","certification_name"],""),f=typeof u=="object"?Tt(u,["credential_id","credentialId","id"],""):"",y=typeof u=="object"?Tt(u,["credential_url","credentialUrl","url"],""):"",x=i.slice(1).map(v=>({highestDegree:String(Tt(v,["degree","title"],"")),collegeName:String(Tt(v,["college","institution","university"],"")),cgpaPercentage:String(Tt(v,["cgpa","percentage"],""))})),p=d.slice(1).map(v=>({certificationName:typeof v=="string"?v:String(Tt(v,["name","title","certification_name"],"")),certificationCredentialId:typeof v=="object"?String(Tt(v,["credential_id","credentialId","id"],"")):"",certificationCredentialLink:typeof v=="object"?String(Tt(v,["credential_url","credentialUrl","url"],"")):""})),h=o.slice(1).map(v=>({experienceCompany:String(Tt(v,["company","company_name","employer"],"")),experienceRole:String(Tt(v,["role","designation","title"],"")),experienceProject:String(Tt(v,["project_done","project","project_name","projects"],"")),experienceSkillsLearnt:X0(Tt(v,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")),experienceYears:String(Tt(v,["years","duration_years","total_years","duration"],"")),experienceCtc:String(Tt(v,["ctc","current_ctc","salary","compensation","package"],""))}));return{id:Tt(e,["id","_id","candidate_id"],null),photoUrl:Tt(e,["photo_url","photo","profile_picture","data_profile_picture","avatar_url","avatarUrl"],""),resumeUrl:Tt(e,["resume_url","resumeUrl","resume_path","resumePath"],""),data:{...vk,name:String(a),noticePeriod:String(Tt(e,["notice_period","notice_period_days","noticePeriod"],"")),gender:String(Tt(e,["gender"],"")),dateOfBirth:String(Tt(e,["date_of_birth","dob","dateOfBirth"],"")).split("T")[0],phone:VU(Tt(e,["phone","mobile","contact_number","phone_number"],"")),email:String(Tt(e,["email"],"")),currentAddress:String(Tt(e,["current_address","currentAddress","address"],"")),permanentAddress:String(Tt(e,["permanent_address","permanentAddress"],"")),city:String(Tt(e,["city","current_city"],"")),pincode:String(Tt(e,["pincode","pin_code","zipcode"],"")),readyToRelocate:["yes","true","1"].includes(String(Tt(e,["ready_to_relocate","willing_to_relocate","readyToRelocate","willingToRelocate"],"")).toLowerCase()),preferredLocation:String(Tt(e,["preferred_location","preferredLocation"],"")),designation:String(Tt(e,["current_designation","current_job_title","designation","current_role"],"")),currentCtc:String(Tt(e,["current_ctc","current_salary"],"")),expectedCtc:String(Tt(e,["expected_ctc","expected_salary"],"")),highestDegree:String(Tt(l,["degree","title"],Tt(e,["highest_degree","highest_qualification","education","degree"],""))),collegeName:String(Tt(l,["college","institution","university"],Tt(e,["college","institution","university"],""))),cgpaPercentage:String(Tt(l,["cgpa","percentage"],Tt(e,["cgpa","percentage"],""))),skills:X0(Tt(e,["skills","primary_skills","skill_set","top_skills"],"")),certificationName:String(m),certificationCredentialId:String(f),certificationCredentialLink:String(y),experienceCompany:String(Tt(c,["company","company_name","employer"],"")),experienceRole:String(Tt(c,["role","designation","title"],"")),experienceProject:String(Tt(c,["project_done","project","project_name","projects"],"")),experienceSkillsLearnt:X0(Tt(c,["skills_learned","skillsLearnt","skills","technologies","tech_stack","stack"],"")),experienceYears:String(Tt(c,["years","duration_years","total_years","duration"],Tt(e,["total_experience","experience_years","experience"],""))),experienceCtc:String(Tt(c,["ctc","current_ctc","salary","compensation","package"],"")),additionalEducations:x,additionalCertifications:p,additionalExperiences:h}}},YR=(e,t,r)=>{const s=new FormData,a=(_,N)=>{N!=null&&s.append(_,String(N))},i=e.name.trim(),l=i.split(/\s+/).filter(Boolean),o=l[0]||"",c=l.slice(1).join(" "),d=HU(e.phone),u=wm(e.skills),m=e.certificationName||e.certificationCredentialId||e.certificationCredentialLink?[{name:e.certificationName.trim(),credential_id:e.certificationCredentialId.trim(),credential_url:e.certificationCredentialLink.trim()}]:[],f=(Array.isArray(e.additionalCertifications)?e.additionalCertifications:[]).map(_=>({name:String((_==null?void 0:_.certificationName)||"").trim(),credential_id:String((_==null?void 0:_.certificationCredentialId)||"").trim(),credential_url:String((_==null?void 0:_.certificationCredentialLink)||"").trim()})).filter(_=>_.name||_.credential_id||_.credential_url),y=[...m,...f],x=e.experienceCompany||e.experienceRole||e.experienceProject||e.experienceSkillsLearnt||e.experienceYears||e.experienceCtc?[{company:e.experienceCompany.trim(),role:e.experienceRole.trim(),project_done:e.experienceProject.trim(),skills_learned:wm(e.experienceSkillsLearnt),years:e.experienceYears.trim(),ctc:e.experienceCtc.trim()}]:[],p=(Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(_=>({company:String((_==null?void 0:_.experienceCompany)||"").trim(),role:String((_==null?void 0:_.experienceRole)||"").trim(),project_done:String((_==null?void 0:_.experienceProject)||"").trim(),skills_learned:wm((_==null?void 0:_.experienceSkillsLearnt)||""),years:String((_==null?void 0:_.experienceYears)||"").trim(),ctc:String((_==null?void 0:_.experienceCtc)||"").trim()})).filter(_=>_.company||_.role||_.project_done||_.skills_learned.length>0||_.years||_.ctc),h=[...x,...p],v=e.highestDegree||e.collegeName||e.cgpaPercentage?[{degree:e.highestDegree.trim(),college:e.collegeName.trim(),cgpa:e.cgpaPercentage.trim(),percentage:e.cgpaPercentage.trim()}]:[],b=(Array.isArray(e.additionalEducations)?e.additionalEducations:[]).map(_=>({degree:String((_==null?void 0:_.highestDegree)||"").trim(),college:String((_==null?void 0:_.collegeName)||"").trim(),cgpa:String((_==null?void 0:_.cgpaPercentage)||"").trim(),percentage:String((_==null?void 0:_.cgpaPercentage)||"").trim()})).filter(_=>_.degree||_.college||_.cgpa||_.percentage),j=[...v,...b];return a("first_name",o),a("last_name",c),a("full_name",i),a("email",e.email.trim()),a("phone",d),a("mobile",d),a("contact_number",d),a("phone_number",d),a("date_of_birth",e.dateOfBirth),a("dob",e.dateOfBirth),a("gender",e.gender),a("notice_period",e.noticePeriod.trim()),/^\d+$/.test(e.noticePeriod.trim())&&a("notice_period_days",e.noticePeriod.trim()),a("current_address",e.currentAddress.trim()),a("permanent_address",e.permanentAddress.trim()),a("city",e.city.trim()),a("pincode",e.pincode.trim()),a("willing_to_relocate",e.readyToRelocate),a("ready_to_relocate",e.readyToRelocate),a("preferred_location",e.preferredLocation.trim()),a("current_designation",e.designation.trim()),a("current_role",e.designation.trim()),a("designation",e.designation.trim()),a("current_ctc",e.currentCtc.trim()),a("expected_ctc",e.expectedCtc.trim()),a("highest_degree",e.highestDegree.trim()),a("education",e.highestDegree.trim()),a("college",e.collegeName.trim()),a("institution",e.collegeName.trim()),a("cgpa",e.cgpaPercentage.trim()),a("percentage",e.cgpaPercentage.trim()),a("skills",JSON.stringify(u)),a("primary_skills",JSON.stringify(u)),a("certifications",JSON.stringify(y)),a("work_history",JSON.stringify(h)),a("education_history",JSON.stringify(j)),a("total_experience",e.experienceYears.trim()),a("experience_years",e.experienceYears.trim()),t&&s.append("photo",t,"profile-photo.jpg"),r&&s.append("resume",r),s},tg=e=>Array.isArray(e)?e.filter(t=>t==null?!1:typeof t=="string"?t.trim()!=="":typeof t=="object"?Object.values(t).some(r=>String(r??"").trim()!==""):!0):[],ZR=e=>{if(e==null)return null;const t=String(e).trim();if(!t)return null;const r=Number(t);return Number.isFinite(r)?r:null},k3e=e=>{const t=HU(e.phone),r=wm(e.skills),s=tg((Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(m=>({company:String((m==null?void 0:m.experienceCompany)||"").trim(),role:String((m==null?void 0:m.experienceRole)||"").trim(),project_done:String((m==null?void 0:m.experienceProject)||"").trim(),skills_learned:wm((m==null?void 0:m.experienceSkillsLearnt)||""),years:String((m==null?void 0:m.experienceYears)||"").trim(),ctc:String((m==null?void 0:m.experienceCtc)||"").trim()})).concat(e.experienceCompany||e.experienceRole||e.experienceProject||e.experienceSkillsLearnt||e.experienceYears||e.experienceCtc?[{company:e.experienceCompany.trim(),role:e.experienceRole.trim(),project_done:e.experienceProject.trim(),skills_learned:wm(e.experienceSkillsLearnt),years:e.experienceYears.trim(),ctc:e.experienceCtc.trim()}]:[])),a=tg((Array.isArray(e.additionalEducations)?e.additionalEducations:[]).map(m=>({degree:String((m==null?void 0:m.highestDegree)||"").trim(),college:String((m==null?void 0:m.collegeName)||"").trim(),cgpa:String((m==null?void 0:m.cgpaPercentage)||"").trim(),percentage:String((m==null?void 0:m.cgpaPercentage)||"").trim()})).concat(e.highestDegree||e.collegeName||e.cgpaPercentage?[{degree:e.highestDegree.trim(),college:e.collegeName.trim(),cgpa:e.cgpaPercentage.trim(),percentage:e.cgpaPercentage.trim()}]:[])),i=tg((Array.isArray(e.additionalCertifications)?e.additionalCertifications:[]).map(m=>({name:String((m==null?void 0:m.certificationName)||"").trim(),organization:"Self Reported",credential_id:String((m==null?void 0:m.certificationCredentialId)||"").trim(),credential_url:String((m==null?void 0:m.certificationCredentialLink)||"").trim()})).concat(e.certificationName||e.certificationCredentialId||e.certificationCredentialLink?[{name:e.certificationName.trim(),organization:"Self Reported",credential_id:e.certificationCredentialId.trim(),credential_url:e.certificationCredentialLink.trim()}]:[])).filter(m=>String((m==null?void 0:m.name)||"").trim()!==""),l=ZR(e.currentCtc),o=ZR(e.expectedCtc),c=String(e.experienceYears||"").trim(),d=tg((Array.isArray(e.additionalExperiences)?e.additionalExperiences:[]).map(m=>String((m==null?void 0:m.experienceCompany)||"").trim())).join(", "),u={full_name:e.name.trim(),email:e.email.trim(),phone:t,mobile:t,contact_number:t,phone_number:t,dob:e.dateOfBirth||null,dateOfBirth:e.dateOfBirth||null,gender:e.gender||null,current_location:e.city.trim()||null,notice_period:e.noticePeriod.trim()||null,current_address:e.currentAddress.trim()||null,permanent_address:e.permanentAddress.trim()||null,city:e.city.trim()||null,pincode:e.pincode.trim()||null,ready_to_relocate:e.readyToRelocate?"Yes":"No",preferred_location:e.preferredLocation.trim()||null,current_role:e.designation.trim()||null,current_designation:e.designation.trim()||null,current_job_title:e.designation.trim()||null,current_ctc:l,expected_salary:o,experience:c||null,current_employer:e.experienceCompany.trim()||null,previous_employers:d||null,education:e.highestDegree.trim()||null,skills:r,work_history:s,education_history:a,certifications:i};return Object.fromEntries(Object.entries(u).filter(([,m])=>m==null?!1:typeof m=="string"?m.trim()!=="":Array.isArray(m)?m.length>0:!0))},C_=(e,t="Failed to save profile")=>{var s,a;const r=(a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.detail;return Array.isArray(r)?r.map(l=>{if(!l)return"";if(typeof l=="string")return l.trim();if(typeof l=="object"){const o=Array.isArray(l.loc)?l.loc.filter(d=>d!=="body").map(d=>String(d)).join("."):"",c=String(l.msg||l.message||"").trim();return o&&c?`${o}: ${c}`:c}return String(l).trim()}).filter(Boolean).join(", ")||t:r&&typeof r=="object"?String(r.msg||r.message||"").trim()||t:typeof r=="string"&&r.trim()?r.trim():t};function iy(){const e=Et(),{id:t}=Rr(),s=String(localStorage.getItem("role")||"").trim().toLowerCase()==="candidate",[a,i]=g.useState("create"),[l,o]=g.useState(0),[c,d]=g.useState(new Set),[u,m]=g.useState(vk),[f,y]=g.useState(vk),[x,p]=g.useState(null),[h,v]=g.useState({}),[b,j]=g.useState(!0),[_,N]=g.useState(!1),[w,k]=g.useState(null),[S,E]=g.useState(""),[T,A]=g.useState(null),[C,P]=g.useState(""),[O,R]=g.useState(null),[F,Q]=g.useState(null),[W,L]=g.useState(""),[I,K]=g.useState(0),[D,Y]=g.useState(!1),[re,B]=g.useState(!1),[G,ce]=g.useState(""),[ae,fe]=g.useState(!1),[ne,he]=g.useState(null),[M,Se]=g.useState([]),[me,Pe]=g.useState(null),[ue,ye]=g.useState(""),[Ye,lt]=g.useState(""),[xe,Ae]=g.useState(!1),[$e,Me]=g.useState(""),[Fe,We]=g.useState({x:40,y:40,size:170}),[Ze,pt]=g.useState({x:0,y:0,width:0,height:0}),[Ve,Je]=g.useState(!1),Ke=g.useRef(null),gt=g.useRef(null),At=g.useRef("upload"),Lt=g.useRef(null),Bt=g.useRef({x:0,y:0}),ar=g.useRef(""),er=g.useRef(""),Be=g.useMemo(()=>{var _e;return((_e=u.name)==null?void 0:_e.trim())||"Candidate"},[u.name]),xt=g.useMemo(()=>S?KR(S):`https://ui-avatars.com/api/?name=${encodeURIComponent(Be)}&background=E5E7EB&color=111827`,[S,Be]),mt=Math.max(Math.floor(Math.min(Ze.width,Ze.height)),1),It=Math.min(ay,mt),Yt=g.useMemo(()=>N3e(ne),[ne]);g.useEffect(()=>()=>{ar.current&&URL.revokeObjectURL(ar.current),er.current&&URL.revokeObjectURL(er.current)},[]),g.useEffect(()=>{if(!me)return;const _e=setTimeout(()=>Pe(null),2800);return()=>clearTimeout(_e)},[me]),g.useEffect(()=>{(async()=>{j(!0),k(null),Q(null),R(null),K(0),ce(""),he(null),Se([]),fe(!1),L("");try{let _e;if(s)try{_e=await q.get("/v1/candidate/me")}catch{if(t)_e=await q.get(`/v1/candidates/${t}`);else{i("create"),j(!1);return}}else t?_e=await q.get(`/v1/candidates/${t}`):_e=await q.get("/v1/candidate/me");const Qe=Uo(_e);if(!Qe||typeof Qe!="object"||Object.keys(Qe).length===0){i("create"),j(!1);return}const U=eg(Qe);m(U.data),y(U.data),p(U.id||t||null),E(U.photoUrl||""),P(U.resumeUrl||""),L(String(U.resumeUrl||"").split("/").pop()||""),ye(U.photoUrl||""),lt(U.resumeUrl||""),i("view"),d(new Set(pl.map((se,at)=>at)))}catch(_e){console.error(_e),k({type:"error",text:"Failed to load profile."}),i("create")}finally{j(!1)}})()},[t,s]),g.useEffect(()=>{const _e=U=>{if(!Ve||!Lt.current)return;const se=Lt.current.getBoundingClientRect(),at=Ze.width>0&&Ze.height>0?Ze:{x:0,y:0,width:se.width,height:se.height},ct=at.x,Te=at.y,Vt=Math.max(at.x+at.width-Fe.size,ct),bt=Math.max(at.y+at.height-Fe.size,Te),$t=Math.min(Math.max(U.clientX-se.left-Bt.current.x,ct),Vt),Mt=Math.min(Math.max(U.clientY-se.top-Bt.current.y,Te),bt);We(br=>({...br,x:$t,y:Mt}))},Qe=()=>Je(!1);return window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Qe),()=>{window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Qe)}},[Ve,Ze,Fe.size]),g.useEffect(()=>{!xe||Ze.width<=0||Ze.height<=0||We(_e=>S_(_e,Ze))},[xe,Ze]);const Ne=(_e,Qe)=>{m(U=>({...U,[_e]:Qe})),v(U=>{if(!U[_e])return U;const se={...U};return delete se[_e],se})},st=(_e,Qe)=>{m(U=>({...U,[_e]:[...Array.isArray(U[_e])?U[_e]:[],{...Qe}]}))},qe=(_e,Qe,U,se)=>{m(at=>{const ct=Array.isArray(at[_e])?[...at[_e]]:[],Te=ct[Qe]||{};return ct[Qe]={...Te,[U]:se},{...at,[_e]:ct}})},ft=(_e,Qe)=>{m(U=>{const se=Array.isArray(U[_e])?[...U[_e]]:[];return se.splice(Qe,1),{...U,[_e]:se}})},kt=_e=>{const Qe=u[_e],U=typeof Qe=="string"?Qe.trim():Qe;if(_e==="resume")return!O&&!C?"Resume is required":null;if(GR.has(_e)&&(U===""||U===null||U===void 0))return"Required";if(_e==="name"&&U){const se=Ml(U,"Name",{pattern:/^[A-Za-z][A-Za-z .'-]{1,79}$/,patternMessage:"Name can only contain letters, spaces, apostrophes, periods, and hyphens."});if(se)return se}if(_e==="email"&&U&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U))return"Invalid email";if(_e==="phone"&&U&&!/^\d{10,15}$/.test(String(U).replace(/[^\d]/g,"")))return"10-15 digits";if(["currentCtc","expectedCtc","experienceYears","experienceCtc"].includes(_e)&&U&&!/^\d+(\.\d+)?$/.test(U))return"Invalid number";if(_e==="pincode"&&U&&!/^\d{6}$/.test(U))return"Use 6-digit pincode";if(_e==="certificationCredentialLink"&&U&&!XR(U))return"Invalid URL";if(_e==="skills"&&U){const se=String(U).split(",").map(ct=>Kt(ct)).filter(Boolean);if(se.length===0)return"Add at least one skill";const at=new Set;for(const ct of se){const Te=Ml(ct,"Skill",{pattern:/^[A-Za-z0-9+.#/\- ]+$/,patternMessage:"Skill can only contain letters, numbers, spaces, and + . # / -"});if(Te)return Te;const Vt=ct.toLowerCase();if(at.has(Vt))return"Duplicate skills are not allowed";at.add(Vt)}}if(_e==="experienceProject"&&U){const se=Nc(U,{minLength:20,required:!1,label:"Project description"});if(se)return se}if(_e==="additionalCertifications"){const se=Array.isArray(u.additionalCertifications)?u.additionalCertifications:[];for(const at of se){const ct=String((at==null?void 0:at.certificationCredentialLink)||"").trim();if(ct&&!XR(ct))return"Invalid URL in additional certifications"}}if(_e==="additionalExperiences"){const se=Array.isArray(u.additionalExperiences)?u.additionalExperiences:[];for(const at of se){const ct=Kt((at==null?void 0:at.experienceProject)||"");if(!ct)continue;if(Nc(ct,{minLength:20,required:!1,label:"Project description"}))return"Project description in additional experiences must be at least 20 characters"}}return null},Oe=_e=>{const Qe=Qx[_e].map(se=>se.key),U={};return Qe.forEach(se=>{const at=kt(se);at&&(U[se]=at)}),v(se=>{const at={...se};return Qe.forEach(ct=>delete at[ct]),{...at,...U}}),Object.keys(U).length===0},je=()=>{const _e=Qx.flatMap(U=>U.map(se=>se.key)),Qe={};return _e.forEach(U=>{const se=kt(U);se&&(Qe[U]=se)}),v(Qe),Object.keys(Qe).length===0},Re=()=>{Oe(l)&&(d(_e=>new Set([..._e,l])),o(_e=>Math.min(_e+1,pl.length-1)))},oe=()=>o(_e=>Math.max(_e-1,0)),Ue=_e=>{if(_e<=l||c.has(_e)){o(_e);return}Oe(l)&&(d(Qe=>new Set([...Qe,l])),o(_e))},Ge=_e=>{var se;const Qe=(se=_e.target.files)==null?void 0:se[0];if(!Qe)return;if(!String(Qe.type||"").toLowerCase().startsWith("image/")){k({type:"error",text:"Please select an image file"});return}ar.current&&URL.revokeObjectURL(ar.current);const U=URL.createObjectURL(Qe);ar.current=U,pt({x:0,y:0,width:0,height:0}),We({x:40,y:40,size:170}),Me(U),Ae(!0),v(at=>{const ct={...at};return delete ct.photo,ct})},ie=()=>{const _e=Lt.current;if(!_e)return;const Qe=k_(_e);pt(Qe);const U=Math.max(Math.min(Qe.width,Qe.height),1),se=Math.min(ay,U),at=Math.max(U*.8,se);We(S_({x:Qe.x+(Qe.width-at)/2,y:Qe.y+(Qe.height-at)/2,size:at},Qe))},ge=_e=>{_e.preventDefault();const Qe=_e.currentTarget.getBoundingClientRect();Bt.current={x:_e.clientX-Qe.left,y:_e.clientY-Qe.top},Je(!0)},ut=_e=>{const Qe=Lt.current;if(!Qe)return;const U=k_(Qe);pt(U);const se=Math.max(Math.min(U.width,U.height),1),at=Math.min(ay,se),ct=Math.min(Math.max(Number(_e.target.value),at),se),Te=U.x,Vt=U.y,bt=Math.max(U.x+U.width-ct,Te),$t=Math.max(U.y+U.height-ct,Vt);We(Mt=>{const br=Mt.x+Mt.size/2,Pr=Mt.y+Mt.size/2;return{size:ct,x:Math.min(Math.max(br-ct/2,Te),bt),y:Math.min(Math.max(Pr-ct/2,Vt),$t)}})},Z=()=>{Ae(!1),Me(""),Je(!1),pt({x:0,y:0,width:0,height:0}),ar.current&&(URL.revokeObjectURL(ar.current),ar.current="")},H=()=>{if(!Lt.current)return;const _e=Lt.current,Qe=k_(_e),U=Qe.width>0&&Qe.height>0?Qe:{x:0,y:0,width:_e.clientWidth,height:_e.clientHeight};if(U.width<=0||U.height<=0)return;const se=S_(Fe,U),at=_e.naturalWidth/U.width,ct=_e.naturalHeight/U.height,Te=Math.max((se.x-U.x)*at,0),Vt=Math.max((se.y-U.y)*ct,0),bt=Math.min(Math.max(se.size*at,1),_e.naturalWidth-Te),$t=Math.min(Math.max(se.size*ct,1),_e.naturalHeight-Vt),Mt=document.createElement("canvas");Mt.width=Yx,Mt.height=Yx;const br=Mt.getContext("2d");br&&(br.drawImage(_e,Te,Vt,bt,$t,0,0,Yx,Yx),Mt.toBlob(Pr=>{if(!Pr)return;A(Pr),er.current&&URL.revokeObjectURL(er.current);const Rs=URL.createObjectURL(Pr);er.current=Rs,E(Rs),Z()},"image/jpeg",.92))},V=(_e,Qe)=>{Pe({type:_e,text:Qe})},ee=()=>{gt.current&&(gt.current.value="")},X=()=>{R(null),Q(null),K(0),ce(""),ee()},te=()=>{v(_e=>{if(!_e.resume)return _e;const Qe={..._e};return delete Qe.resume,Qe})},ke=(_e="upload")=>{At.current=_e,gt.current&&(gt.current.value="",gt.current.click())},ve=async(_e,Qe={})=>{var ct;const{silent:U=!1}=Qe,se=JR(_e);if(!se.valid)return U||(k({type:"error",text:se.message}),V("error",se.message)),{ok:!1,queued:!1,message:se.message};Y(!0),K(0),ce("Uploading resume..."),Q(_e),te();const at=new FormData;at.append("file",_e);try{const Te=await q.post("/v1/candidate/resume",at,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:$t=>{$t.total&&K(Math.round($t.loaded*100/$t.total))}}),Vt=Uo(Te)||(Te==null?void 0:Te.data)||{},bt=Tt(Vt,["resume_url","resumeUrl","resume_path","resumePath","url","path"],"");return bt&&P(bt),R(null),L(_e.name),K(100),ce("Resume uploaded successfully."),te(),U||k({type:"success",text:"Resume uploaded successfully."}),{ok:!0,queued:!1,url:bt}}catch(Te){const Vt=Number(((ct=Te==null?void 0:Te.response)==null?void 0:ct.status)||0);if(new Set([400,404,405,422]).has(Vt))return R(_e),ce("Resume selected. It will upload when you save your profile."),U||k({type:"success",text:"Resume selected. It will upload when profile is saved."}),{ok:!1,queued:!0};const $t=C_(Te,"Failed to upload resume.");return U||(k({type:"error",text:$t}),V("error",$t)),{ok:!1,queued:!1,message:$t}}finally{Y(!1)}},J=async _e=>{var U;const Qe=JR(_e);if(!Qe.valid){k({type:"error",text:Qe.message}),V("error",Qe.message);return}B(!0),ce("Parsing your resume..."),Q(_e),te();try{if(!C||!W||W!==_e.name){const $t=await ve(_e,{silent:!0});if(!$t.ok&&!$t.queued){const Mt=$t.message||"Unable to upload resume for parsing.";k({type:"error",text:`${Mt} You can continue with manual entry.`}),V("error",Mt);return}}const at=new FormData;at.append("file",_e);const ct=await q.post("/v1/candidate/resume/parse",at,{headers:{"Content-Type":"multipart/form-data"}}),Te=Uo(ct)||(ct==null?void 0:ct.data)||{},Vt=(Te==null?void 0:Te.parsed)||((U=Te==null?void 0:Te.data)==null?void 0:U.parsed)||Te,bt=b3e(Vt);if(!j3e(bt)){const $t="No usable details were found in this resume.";k({type:"error",text:`${$t} Please fill details manually or try another resume.`}),V("error",$t);return}he(bt),Se(_3e(u,bt)),fe(!0),ce("Resume parsed. Review details before applying."),k({type:"success",text:"Resume parsed successfully."}),V("success","Resume parsed successfully.")}catch(se){const at=C_(se,"Unable to parse resume right now.");k({type:"error",text:`${at} You can continue with manual entry.`}),V("error","Could not parse resume. You can continue manually.")}finally{B(!1)}},be=async _e=>{var U;const Qe=(U=_e.target.files)==null?void 0:U[0];Qe&&(Q(Qe),ce(`Selected: ${Qe.name}`),te(),At.current==="parse"?await J(Qe):await ve(Qe),ee())},we=async()=>{if(!(re||D)){if(F){await J(F);return}ke("parse")}},Ie=()=>{ne&&(m(_e=>w3e(_e,ne)),fe(!1),he(null),Se([]),k({type:"success",text:"Parsed details added. Please review and save your profile."}),V("success","Details filled from resume."))},He=()=>{fe(!1)},nt=async()=>{var se;if(!je()){k({type:"error",text:"Please fix highlighted fields."});return}N(!0),k(null);const _e=t||x||null,Qe=k3e(u),U={headers:{"Content-Type":"multipart/form-data"}};try{let at;if(s){let Mt=null,br=null;try{at=await q.put("/v1/candidate/me",Qe)}catch(yn){const Br=Number((se=yn==null?void 0:yn.response)==null?void 0:se.status);if(Br===405)at=await q.patch("/v1/candidate/me",Qe);else if(Br===404){const Fa=YR(u,T,O);_e?at=await q.put(`/v1/candidates/${_e}`,Fa,U):at=await q.post("/v1/candidates",Fa,U);const Ls=eg(Uo(at)||{}),de=Ls.id||_e||null,Le=Ls.photoUrl||S||"",rt=Ls.resumeUrl||C||"";m(Ls.data),y(Ls.data),p(de),E(Le),P(rt),L(String(rt||"").split("/").pop()||""),ye(Le),lt(rt),A(null),X(),he(null),Se([]),fe(!1),i("view"),o(0),d(new Set(pl.map((dt,le)=>le))),k({type:"success",text:"Profile saved successfully."}),!t&&de&&e(`/candidate/profile/${de}`,{replace:!0});return}else throw yn}if(O){const yn=new FormData;yn.append("file",O);const Br=await q.post("/v1/candidate/resume",yn,U);Mt=Uo(Br)||(Br==null?void 0:Br.data)||null}if(T){const yn=new FormData;yn.append("file",T,"profile-photo.jpg");const Br=await q.post("/v1/candidate/me/photo",yn,U);br=Uo(Br)||(Br==null?void 0:Br.data)||null}try{at=await q.get("/v1/candidate/me")}catch{}const Pr=eg(Uo(at)||{}),Rs=(br==null?void 0:br.photo_url)||(br==null?void 0:br.photoUrl)||"",jt=(Mt==null?void 0:Mt.resume_url)||(Mt==null?void 0:Mt.resumeUrl)||"",gn=Pr.photoUrl||Rs||S||"",js=Pr.resumeUrl||jt||C||"",va=Pr.id||_e||null;m(Pr.data),y(Pr.data),p(va),E(gn),P(js),L(String(js||"").split("/").pop()||""),ye(gn),lt(js),A(null),X(),he(null),Se([]),fe(!1),i("view"),o(0),d(new Set(pl.map((yn,Br)=>Br))),k({type:"success",text:"Profile saved successfully."}),!t&&va&&e(`/candidate/profile/${va}`,{replace:!0});return}const ct=YR(u,T,O);_e?at=await q.put(`/v1/candidates/${_e}`,ct,U):at=await q.post("/v1/candidates",ct,U);const Te=eg(Uo(at)||{}),Vt=Te.id||_e||null,bt=Te.photoUrl||S||"",$t=Te.resumeUrl||C||"";m(Te.data),y(Te.data),p(Vt),E(bt),P($t),L(String($t||"").split("/").pop()||""),ye(bt),lt($t),A(null),X(),he(null),Se([]),fe(!1),i("view"),o(0),d(new Set(pl.map((Mt,br)=>br))),k({type:"success",text:"Profile saved successfully."}),!t&&Vt&&e(`/candidate/profile/${Vt}`,{replace:!0})}catch(at){console.error(at),k({type:"error",text:C_(at,"Failed to save profile")})}finally{N(!1)}},tt=_e=>{const Qe=GR.has(_e.key),U=h[_e.key];if(_e.type==="add-more-education"){const se=Array.isArray(u.additionalEducations)?u.additionalEducations:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>st("additionalEducations",f3e),children:"+ Add More Education"})]}),se.length===0?n.jsx("p",{className:"cp-hint",children:"No additional education added."}):n.jsx("div",{className:"cp-repeatable-list",children:se.map((at,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Highest Degree"}),n.jsx("input",{type:"text",className:"cp-input",value:at.highestDegree||"",onChange:Te=>qe("additionalEducations",ct,"highestDegree",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"College Name"}),n.jsx("input",{type:"text",className:"cp-input",value:at.collegeName||"",onChange:Te=>qe("additionalEducations",ct,"collegeName",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"CGPA / %"}),n.jsx("input",{type:"text",className:"cp-input",value:at.cgpaPercentage||"",onChange:Te=>qe("additionalEducations",ct,"cgpaPercentage",Te.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ft("additionalEducations",ct),children:"Remove"})})]},`edu-${ct}`))}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key)}if(_e.type==="add-more-certification"){const se=Array.isArray(u.additionalCertifications)?u.additionalCertifications:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>st("additionalCertifications",h3e),children:"+ Add More Certification"})]}),se.length===0?n.jsx("p",{className:"cp-hint",children:"No additional certification added."}):n.jsx("div",{className:"cp-repeatable-list",children:se.map((at,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Certification Name"}),n.jsx("input",{type:"text",className:"cp-input",value:at.certificationName||"",onChange:Te=>qe("additionalCertifications",ct,"certificationName",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Credential ID"}),n.jsx("input",{type:"text",className:"cp-input",value:at.certificationCredentialId||"",onChange:Te=>qe("additionalCertifications",ct,"certificationCredentialId",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Credential Link"}),n.jsx("input",{type:"text",className:"cp-input",value:at.certificationCredentialLink||"",onChange:Te=>qe("additionalCertifications",ct,"certificationCredentialLink",Te.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ft("additionalCertifications",ct),children:"Remove"})})]},`cert-${ct}`))}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key)}if(_e.type==="add-more-experience"){const se=Array.isArray(u.additionalExperiences)?u.additionalExperiences:[];return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("div",{className:"cp-repeatable-header",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>st("additionalExperiences",p3e),children:"+ Add More Experience"})]}),se.length===0?n.jsx("p",{className:"cp-hint",children:"No additional experience added."}):n.jsx("div",{className:"cp-repeatable-list",children:se.map((at,ct)=>n.jsxs("div",{className:"cp-repeatable-card",children:[n.jsxs("div",{className:"cp-repeatable-grid",children:[n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Company Worked For"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceCompany||"",onChange:Te=>qe("additionalExperiences",ct,"experienceCompany",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Role"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceRole||"",onChange:Te=>qe("additionalExperiences",ct,"experienceRole",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Project Done"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceProject||"",onChange:Te=>qe("additionalExperiences",ct,"experienceProject",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Skills Learnt"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceSkillsLearnt||"",onChange:Te=>qe("additionalExperiences",ct,"experienceSkillsLearnt",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"Years"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceYears||"",onChange:Te=>qe("additionalExperiences",ct,"experienceYears",Te.target.value)})]}),n.jsxs("label",{className:"cp-field",children:[n.jsx("span",{className:"cp-label",children:"CTC There"}),n.jsx("input",{type:"text",className:"cp-input",value:at.experienceCtc||"",onChange:Te=>qe("additionalExperiences",ct,"experienceCtc",Te.target.value)})]})]}),n.jsx("div",{className:"cp-repeatable-actions",children:n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>ft("additionalExperiences",ct),children:"Remove"})})]},`exp-${ct}`))}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key)}if(_e.type==="photo")return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Qe&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsxs("div",{className:"cp-photo-row",children:[n.jsx("img",{src:xt,alt:"Candidate",className:"cp-photo"}),n.jsxs("div",{children:[n.jsx("input",{ref:Ke,type:"file",accept:"image/*",capture:"user",className:"cp-hidden",onChange:Ge}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-secondary",onClick:()=>{Ke.current&&(Ke.current.value="",Ke.current.click())},children:"Upload & Crop"}),n.jsx("p",{className:"cp-hint",children:"Optional. Output: 300x300."})]})]}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key);if(_e.type==="file"){const se=_e.key==="resume",at=(F==null?void 0:F.name)||(O==null?void 0:O.name)||"",ct=C?KR(C):"",Te=D||re;return n.jsxs("div",{className:"cp-field cp-full",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,se&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("input",{ref:gt,type:"file",accept:".pdf,.doc,.docx",className:"cp-hidden",onChange:be}),n.jsxs("div",{className:`cp-resume-panel ${U?"cp-input-error":""}`,children:[n.jsxs("div",{className:"cp-resume-actions-row",children:[n.jsxs("button",{type:"button",className:"cp-btn cp-btn-primary cp-resume-action-btn",onClick:()=>ke("upload"),disabled:Te,children:[n.jsx(UU,{size:16}),n.jsx("span",{children:D?"Uploading...":"Upload Resume"})]}),n.jsxs("button",{type:"button",className:"cp-btn cp-btn-secondary cp-resume-action-btn",onClick:we,disabled:Te,children:[n.jsx(M4e,{size:16}),n.jsx("span",{children:re?"Parsing...":"Parse Resume"})]})]}),n.jsxs("div",{className:"cp-resume-meta",children:[n.jsx(cn,{size:16}),n.jsxs("div",{children:[n.jsx("p",{className:"cp-resume-file-name",children:at?`Selected: ${at}`:C?"Resume uploaded":"No resume selected"}),n.jsx("p",{className:"cp-hint",children:"Accepted formats: PDF, DOC, DOCX. Max size: 5 MB."}),ct&&n.jsx("a",{href:ct,target:"_blank",rel:"noreferrer",className:"cp-resume-link",children:"View uploaded resume"})]})]}),D&&n.jsxs("div",{className:"cp-upload-progress-wrap",children:[n.jsx("div",{className:"cp-upload-progress-bar",children:n.jsx("div",{className:"cp-upload-progress-fill",style:{width:`${I}%`}})}),n.jsxs("span",{children:[I,"%"]})]}),re&&n.jsxs("div",{className:"cp-resume-parse-state",children:[n.jsx("span",{className:"cp-inline-loader"}),n.jsx("span",{children:"Parsing your resume..."})]}),!re&&jn(G)&&n.jsx("p",{className:"cp-hint cp-resume-status",children:G})]}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key)}return _e.type==="textarea"?n.jsxs("label",{className:`cp-field ${_e.full?"cp-full":""}`,children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Qe&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("textarea",{className:`cp-input cp-textarea ${U?"cp-input-error":""}`,rows:4,value:u[_e.key]||"",onChange:se=>Ne(_e.key,se.target.value),onBlur:se=>Ne(_e.key,Kt(se.target.value))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key):_e.type==="checkbox"?n.jsxs("label",{className:"cp-field cp-checkbox",children:[n.jsx("span",{className:"cp-label",children:_e.label}),n.jsx("input",{type:"checkbox",checked:!!u[_e.key],onChange:se=>Ne(_e.key,se.target.checked)})]},_e.key):_e.type==="select"?n.jsxs("label",{className:"cp-field",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Qe&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("select",{className:`cp-input ${U?"cp-input-error":""}`,value:u[_e.key]||"",onChange:se=>Ne(_e.key,se.target.value),children:_e.options.map(se=>n.jsx("option",{value:se,children:se||"Select"},se||"empty"))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key):n.jsxs("label",{className:"cp-field",children:[n.jsxs("span",{className:"cp-label",children:[_e.label,Qe&&n.jsx("span",{className:"cp-required",children:"*"})]}),n.jsx("input",{type:_e.type||"text",className:`cp-input ${U?"cp-input-error":""}`,value:u[_e.key]||"",onChange:se=>Ne(_e.key,se.target.value),onBlur:se=>Ne(_e.key,Kt(se.target.value))}),_e.hint&&n.jsx("span",{className:"cp-hint",children:_e.hint}),U&&n.jsx("span",{className:"cp-error",children:U})]},_e.key)};return b?n.jsxs("div",{className:"cp-loading",children:[n.jsx("div",{className:"cp-spinner"}),n.jsx("p",{children:"Loading profile..."})]}):n.jsxs("div",{className:"cp-page",children:[w&&n.jsx("div",{className:`cp-banner ${w.type==="error"?"cp-banner-error":"cp-banner-success"}`,children:w.text}),me&&n.jsxs("div",{className:`cp-toast ${me.type==="error"?"cp-toast-error":"cp-toast-success"}`,children:[me.type==="error"?n.jsx(Zs,{size:16}):n.jsx(dp,{size:16}),n.jsx("span",{children:me.text})]}),n.jsxs("section",{className:"cp-header",children:[n.jsxs("div",{className:"cp-head-left",children:[n.jsx("img",{src:xt,alt:"Candidate",className:"cp-head-photo"}),n.jsxs("div",{children:[n.jsx("h1",{children:Be}),n.jsx("p",{children:u.designation||"Designation not added"}),n.jsx("p",{children:u.experienceYears?`${u.experienceYears} yrs experience`:"Experience not added"})]})]}),n.jsx("div",{children:a==="view"?n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:()=>{i("edit"),o(0),v({}),k(null),m(f)},children:"Edit Profile"}):n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:()=>{a==="edit"?(m(f),E(ue||""),P(Ye||""),A(null),X(),L(String(Ye||"").split("/").pop()||""),he(null),Se([]),fe(!1),i("view")):e(-1)},children:a==="edit"?"Cancel Edit":"Back"})})]}),a==="view"?n.jsx("section",{className:"cp-view",children:Qx.map((_e,Qe)=>n.jsxs("div",{className:"cp-view-card",children:[n.jsx("h2",{children:pl[Qe]}),n.jsxs("div",{className:"cp-view-grid",children:[_e.filter(U=>!String(U.type||"").startsWith("add-more-")&&U.type!=="photo"&&U.type!=="file").map(U=>n.jsxs("div",{className:`cp-view-item ${U.full?"cp-full":""}`,children:[n.jsx("span",{children:U.label}),n.jsx("strong",{children:U.key==="readyToRelocate"?u[U.key]?"Yes":"No":u[U.key]||"-"})]},U.key)),Qe===3&&Array.isArray(u.additionalEducations)&&u.additionalEducations.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Education"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalEducations.map((U,se)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Highest Degree"}),n.jsx("strong",{children:U.highestDegree||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"College Name"}),n.jsx("strong",{children:U.collegeName||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"CGPA / %"}),n.jsx("strong",{children:U.cgpaPercentage||"-"})]})]})},`view-edu-${se}`))})]}),Qe===5&&Array.isArray(u.additionalCertifications)&&u.additionalCertifications.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Certifications"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalCertifications.map((U,se)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Certification Name"}),n.jsx("strong",{children:U.certificationName||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Credential ID"}),n.jsx("strong",{children:U.certificationCredentialId||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Credential Link"}),n.jsx("strong",{children:U.certificationCredentialLink||"-"})]})]})},`view-cert-${se}`))})]}),Qe===6&&Array.isArray(u.additionalExperiences)&&u.additionalExperiences.length>0&&n.jsxs("div",{className:"cp-full",children:[n.jsx("span",{className:"cp-label",children:"Additional Experience"}),n.jsx("div",{className:"cp-repeatable-list",children:u.additionalExperiences.map((U,se)=>n.jsx("div",{className:"cp-repeatable-card",children:n.jsxs("div",{className:"cp-view-grid",children:[n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Company Worked For"}),n.jsx("strong",{children:U.experienceCompany||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Role"}),n.jsx("strong",{children:U.experienceRole||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Project Done"}),n.jsx("strong",{children:U.experienceProject||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Skills Learnt"}),n.jsx("strong",{children:U.experienceSkillsLearnt||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"Years"}),n.jsx("strong",{children:U.experienceYears||"-"})]}),n.jsxs("div",{className:"cp-view-item",children:[n.jsx("span",{children:"CTC There"}),n.jsx("strong",{children:U.experienceCtc||"-"})]})]})},`view-exp-${se}`))})]})]})]},pl[Qe]))}):n.jsxs("section",{className:"cp-form-wrap",children:[n.jsx("div",{className:"cp-steps",children:pl.map((_e,Qe)=>n.jsxs("button",{type:"button",className:`cp-step ${Qe===l?"active":""} ${c.has(Qe)||Qe<l?"done":""}`,onClick:()=>Ue(Qe),children:[n.jsx("span",{children:c.has(Qe)||Qe<l?"OK":Qe+1}),n.jsx("small",{children:_e})]},_e))}),n.jsxs("div",{className:"cp-card",children:[n.jsx("h2",{children:`${l+1}. ${pl[l]}`}),n.jsx("div",{className:"cp-grid",children:Qx[l].map(_e=>tt(_e))}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:oe,disabled:l===0,children:"Previous"}),l<pl.length-1?n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Re,children:"Next"}):n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:nt,disabled:_,children:_?"Saving...":a==="edit"?"Save Profile":"Complete Profile"})]})]})]}),xe&&n.jsx("div",{className:"cp-crop-backdrop",children:n.jsxs("div",{className:"cp-crop-modal",children:[n.jsx("h3",{children:"Crop Photo"}),n.jsx("p",{children:"Drag crop square and adjust size."}),n.jsxs("div",{className:"cp-crop-wrap",children:[n.jsx("img",{ref:Lt,src:$e,alt:"Crop source",className:"cp-crop-image",onLoad:ie,draggable:!1}),n.jsx("div",{className:"cp-crop-box",style:{left:Fe.x,top:Fe.y,width:Fe.size,height:Fe.size},onMouseDown:ge})]}),n.jsx("input",{type:"range",min:It,max:mt,value:Math.round(Math.min(Math.max(Fe.size,It),mt)),onChange:ut}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:Z,children:"Cancel"}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:H,children:"Apply Crop"})]})]})}),ae&&ne&&n.jsx("div",{className:"cp-crop-backdrop",children:n.jsxs("div",{className:"cp-parse-modal",children:[n.jsxs("h3",{children:[n.jsx(zAe,{size:18}),n.jsx("span",{children:"We found these details from your resume."})]}),n.jsx("p",{children:"Review these details, then choose whether to auto-fill your profile."}),n.jsx("div",{className:"cp-parse-preview-list",children:Yt.length>0?Yt.map(_e=>n.jsxs("div",{className:"cp-parse-preview-item",children:[n.jsx("strong",{children:_e.label}),n.jsx("span",{children:_e.value})]},`${_e.label}-${_e.value}`)):n.jsx("p",{className:"cp-hint",children:"No details were extracted."})}),M.length>0&&n.jsxs("div",{className:"cp-parse-conflict-box",children:[n.jsxs("p",{className:"cp-parse-conflict-title",children:["Existing data detected in ",M.length," field",M.length>1?"s":"","."]}),n.jsx("ul",{className:"cp-parse-conflict-list",children:M.map(_e=>n.jsxs("li",{children:[n.jsxs("strong",{children:[_e.label,":"]})," existing value will be replaced after confirmation."]},_e.key))})]}),n.jsxs("div",{className:"cp-actions",children:[n.jsx("button",{type:"button",className:"cp-btn cp-btn-ghost",onClick:He,children:"Edit Manually"}),n.jsx("button",{type:"button",className:"cp-btn cp-btn-primary",onClick:Ie,children:"Accept & Fill"})]})]})})]})}const S3e=e=>{if(!e)return!1;const t=e.replace(/\s+/g,"");return/^(\+91)?[6-9]\d{9}$/.test(t)};function C3e(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState(new Set),[i,l]=g.useState(null),[o,c]=g.useState(!0),[d,u]=g.useState(""),m=async()=>{var h;try{const v=await q.get("/v1/candidate/me");l((h=v.data)==null?void 0:h.data)}catch(v){console.error("loadProfile",v)}},f=async()=>{var h,v,b;c(!0),u("");try{const j=await q.get("/v1/jobs",{params:{public:!0,limit:100}});console.log("Jobs API Response:",j.data);let _=[];Array.isArray(j.data)?_=j.data:(h=j.data)!=null&&h.jobs&&Array.isArray(j.data.jobs)?_=j.data.jobs:(v=j.data)!=null&&v.data&&Array.isArray(j.data.data)?_=j.data.data:(b=j.data)!=null&&b.items&&Array.isArray(j.data.items)&&(_=j.data.items),r(_),_.length===0&&u("No jobs available at the moment")}catch(j){console.error("loadJobs error:",j),u("Failed to load jobs. Please try again later.")}finally{c(!1)}},y=async()=>{var h;try{const b=((h=(await q.get("/v1/candidate/me/applications")).data)==null?void 0:h.applications)??[],j=new Set(b.map(_=>_.job_id??_.jobId));a(j)}catch{console.warn("Could not load applied jobs")}};g.useEffect(()=>{m(),f(),y()},[]);const x=async h=>{var v,b,j,_,N,w;if(!(i!=null&&i.phone)||!S3e(i.phone)){alert("Please add a valid Indian mobile number in your profile"),e("/candidate/profile");return}try{const k=await q.post("/v1/candidate/me/apply",{job_id:h});alert(((v=k.data)==null?void 0:v.message)||"Applied Successfully!"),a(S=>new Set(S).add(h))}catch(k){if(((b=k.response)==null?void 0:b.status)===409){alert("You have already applied for this job");return}alert(((_=(j=k.response)==null?void 0:j.data)==null?void 0:_.detail)||((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.message)||"Failed to apply for job")}};if(o)return n.jsx("div",{className:"p-4",children:"Loading jobs..."});if(d)return n.jsx("div",{className:"p-4 text-red-600",children:d});if(!t.length)return n.jsx("div",{className:"p-4",children:"No open roles found."});const p=i&&!i.profile_completed;return n.jsxs("div",{className:"space-y-4 p-4",children:[p&&n.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 p-3 rounded text-sm",children:[" Your profile is incomplete (",i.profile_strength_percentage??i.profile_completion??0,"%).",n.jsx("button",{onClick:()=>e("/candidate/profile"),className:"ml-2 text-blue-600 underline",children:"Complete profile"}),"to apply for jobs."]}),t.map(h=>{const v=h.id??h.job_id,b=s.has(v);return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-start",children:[n.jsxs("div",{className:"max-w-[70%]",children:[n.jsx("div",{className:"font-semibold text-lg",children:h.title??h.job_title}),n.jsx("div",{className:"text-sm text-gray-600",children:h.location??h.location_city??"Remote"}),h.short_description&&n.jsx("div",{className:"text-sm mt-2",children:h.short_description})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b?n.jsx("button",{disabled:!0,className:"px-4 py-1 text-sm rounded bg-gray-300 text-gray-700 cursor-not-allowed",children:"Applied"}):n.jsx("button",{disabled:p,onClick:()=>x(v),className:`px-4 py-1 text-sm rounded text-white ${p?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:"Apply"}),n.jsx("a",{href:`/careers/job/${v}`,className:"text-sm text-blue-600",children:"View details"})]})]},v)})]})}function A3e(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(""),l=async()=>{var c,d;s(!0),i("");try{const u=await q.get("/v1/candidate/me/applications"),m=((c=u.data)==null?void 0:c.applications)??((d=u.data)==null?void 0:d.data)??u.data??[];t(m)}catch(u){console.error("loadApps",u),i("Failed to load your applications.")}finally{s(!1)}};if(g.useEffect(()=>{l()},[]),r)return n.jsx("div",{className:"p-4",children:"Loading your applications..."});if(a)return n.jsx("div",{className:"p-4 text-red-600",children:a});if(!e.length)return n.jsx("div",{className:"p-4 text-gray-600",children:"You havent applied to any jobs yet."});const o=c=>{switch(String(c).toLowerCase()){case"submitted":return"bg-blue-100 text-blue-700";case"reviewing":return"bg-yellow-100 text-yellow-700";case"shortlisted":return"bg-purple-100 text-purple-700";case"interview":return"bg-indigo-100 text-indigo-700";case"selected":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsx("div",{className:"p-4 space-y-3",children:e.map(c=>{var x,p;const d=c.application_id??c.id,u=c.job_title??((x=c.job)==null?void 0:x.title)??c.job_title_display??"Job",m=c.job_location??((p=c.job)==null?void 0:p.location)??c.location??"",f=c.created_at??c.applied_at??Date.now(),y=c.status??c.application_status??"submitted";return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-base",children:u}),n.jsx("div",{className:"text-sm text-gray-600",children:m}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Applied on ",new Date(f).toLocaleString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`px-3 py-1 rounded text-sm font-medium ${o(y)}`,children:String(y)}),c.notes&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.notes})]})]},d)})})}function E3e(){const[e,t]=g.useState(!0),[r,s]=g.useState([]);return g.useEffect(()=>{q.get("/v1/candidate/me/notifications").then(a=>s(a.data||[])).finally(()=>t(!1))},[]),e?n.jsx("div",{children:"Loading notifications..."}):r.length?n.jsx("div",{className:"bg-white rounded shadow divide-y",children:r.map(a=>n.jsxs("div",{className:"p-4",children:[n.jsx("p",{className:"font-medium",children:a.title||"Notification"}),a.message&&n.jsx("p",{className:"text-sm text-gray-600",children:a.message}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.created_at).toLocaleString()})]},a.id))}):n.jsx("div",{className:"text-gray-500",children:"No notifications yet"})}const Ui={DASHBOARD:"dashboard",NOTIFICATIONS:"notifications",PROFILE:"profile",APPLY:"apply",APPLIED:"applied"};function rg({title:e,value:t,helper:r}){return n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t}),r&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r})]})}function QR(){const[e,t]=g.useState(!0),[r,s]=g.useState({applications:0,newJobs:0,profileCompletion:0,interviewStatus:"No Interview Scheduled",interviewDate:null}),a=i=>{if(!i)return null;const l=new Date(i);return Number.isNaN(l.getTime())?null:l.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};return g.useEffect(()=>{q.get("/v1/candidate/dashboard-summary").then(i=>{const l=i.data||{};s({applications:l.total_applications??0,newJobs:l.new_jobs??0,profileCompletion:l.profile_completion??0,interviewStatus:l.next_interview_status||"No Interview Scheduled",interviewDate:l.next_interview_date||null})}).finally(()=>t(!1))},[]),e?n.jsx("div",{children:"Loading dashboard..."}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(rg,{title:"Profile Completion %",value:`${r.profileCompletion}%`}),n.jsx(rg,{title:"Total Applications",value:r.applications}),n.jsx(rg,{title:"New Jobs",value:r.newJobs}),n.jsx(rg,{title:"Interview Status",value:r.interviewStatus,helper:a(r.interviewDate)})]})})}function Cu(){const e=Xn(),[t,r]=g.useState(Ui.DASHBOARD),[s,a]=g.useState(null);g.useEffect(()=>{q.get("/v1/candidate/me").then(l=>{var o;return a((o=l.data)==null?void 0:o.data)})},[]),g.useEffect(()=>{const l=e.pathname;if(l.includes("/candidate/notifications")){r(Ui.NOTIFICATIONS);return}if(l.includes("/candidate/complete-profile")){r(Ui.PROFILE);return}if(l.includes("/candidate/apply-jobs")){r(Ui.APPLY);return}if(l.includes("/candidate/applied-jobs")){r(Ui.APPLIED);return}r(Ui.DASHBOARD)},[e.pathname]);const i=()=>{switch(t){case Ui.DASHBOARD:return n.jsx(QR,{});case Ui.NOTIFICATIONS:return n.jsx(E3e,{});case Ui.PROFILE:return n.jsx(iy,{});case Ui.APPLY:return n.jsx(C3e,{});case Ui.APPLIED:return n.jsx(A3e,{});default:return n.jsx(QR,{})}};return n.jsxs("div",{className:"space-y-6",children:[s&&n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:s.photo_url?`http://localhost:8000/${s.photo_url}`:"https://ui-avatars.com/api/?name=Candidate",className:"w-12 h-12 rounded-full object-cover",alt:"Profile"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:s.full_name}),n.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),i()]})}const T3e=(e,t={})=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(e,{detail:t}))},P3e=(e,t)=>typeof window>"u"?()=>{}:(window.addEventListener(e,t),()=>window.removeEventListener(e,t)),Qi={emit:T3e,on:P3e};function c4(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState({currentPage:1,totalPages:1,totalRecords:0,limit:9}),c=async(x={})=>{s(!0);try{const h=(await q.get("/v1/roles",{params:x})).data,v=Array.isArray(h)?h:(h==null?void 0:h.data)||(h==null?void 0:h.roles)||[];t(Array.isArray(v)?v:[]);const b=Number(x.limit)||Number(h==null?void 0:h.limit)||l.limit||9,j=(h==null?void 0:h.totalRecords)??(h==null?void 0:h.total)??(Array.isArray(v)?v.length:0),_=(h==null?void 0:h.totalPages)??Math.max(1,Math.ceil((j||0)/Math.max(1,b))),N=(h==null?void 0:h.currentPage)??(Number(x.page)||1);return o({currentPage:N,totalPages:_,totalRecords:j,limit:b}),i(null),Array.isArray(v)?v:[]}catch(p){return i(p),t([]),o({currentPage:1,totalPages:1,totalRecords:0,limit:Number(x.limit)||9}),[]}finally{s(!1)}};return g.useEffect(()=>{c()},[]),{roles:e,loading:r,error:a,pagination:l,fetch:c,createRole:async x=>{const p=await q.post("/v1/roles",x);return t(h=>[p.data,...h]),o(h=>({...h,totalRecords:h.totalRecords+1})),Qi.emit("roles:updated",{role:p.data}),p.data},updateRole:async(x,p)=>{const h=await q.put(`/v1/roles/${x}`,p);return t(v=>v.map(b=>b.id===x?h.data:b)),Qi.emit("roles:updated",{role:h.data}),h.data},deleteRole:async x=>{await q.delete(`/v1/roles/${x}`),t(p=>p.filter(h=>h.id!==x)),o(p=>({...p,totalRecords:Math.max(0,p.totalRecords-1)})),Qi.emit("roles:updated",{roleId:x})},fetchRolePermissions:async x=>((await q.get(`/v1/roles/${x}/permissions`)).data||[]).map(b=>typeof b=="string"?b:b.key).filter(Boolean),setRolePermissions:async(x,p=[])=>{const h=await q.put(`/v1/roles/${x}/permissions`,{permissionKeys:p});return Qi.emit("role-permissions:updated",{roleId:x,permissionKeys:p}),Qi.emit("roles:updated",{roleId:x}),h.data},setRoles:t}}function d4(){const[e,t]=g.useState({}),[r,s]=g.useState(!1),a=String(localStorage.getItem("role")||"").trim().toLowerCase().replace(/\s+/g,"_");g.useEffect(()=>{let l=!0;return(async()=>{var c;s(!0);try{const d=await q.get("/v1/config/permissions");l&&t(((c=d==null?void 0:d.data)==null?void 0:c.permissions)||{})}catch{l&&t({})}finally{l&&s(!1)}})(),()=>{l=!1}},[]);const i=g.useMemo(()=>(l,o)=>{var m;const c=String(l||"").toLowerCase(),d=String(o||"").toLowerCase();return!c||!d?!1:a==="super_admin"?!0:(((m=e==null?void 0:e[a])==null?void 0:m[c])||[]).includes(d)},[e,a]);return{role:a,loading:r,permissions:(e==null?void 0:e[a])||{},can:i}}function O3e({initial:e=null,onSubmit:t,onCancel:r}){const[s,a]=g.useState(""),[i,l]=g.useState(""),[o,c]=g.useState(!1);g.useEffect(()=>{e?(a(e.name||""),l(e.description||"")):(a(""),l(""))},[e]);const d=async u=>{var p,h;u.preventDefault();const m=Kt(s),f=Kt(i),y=Ml(m,"Role name",{pattern:/^[A-Za-z0-9_ ]+$/,patternMessage:"Role name can only contain letters, numbers, spaces, and underscores."});if(y)return alert(y);const x=Nc(f,{minLength:20});if(x)return alert(x);c(!0);try{await t({name:m,description:f},e==null?void 0:e.id)}catch(v){console.error("Role save error",v),alert(((h=(p=v==null?void 0:v.response)==null?void 0:p.data)==null?void 0:h.detail)||"Failed to save role")}finally{c(!1)}};return n.jsxs("form",{onSubmit:d,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Role name *"}),n.jsx("input",{className:"w-full border rounded p-2",placeholder:"e.g. Recruiter",value:s,onChange:u=>a(u.target.value),onBlur:u=>a(Kt(u.target.value)),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Description"}),n.jsx("input",{className:"w-full border rounded p-2",placeholder:"Short description (optional)",value:i,onChange:u=>l(u.target.value),onBlur:u=>l(Kt(u.target.value))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Saving...":e?"Save":"Create"}),r&&n.jsx("button",{type:"button",onClick:r,className:"px-3 py-2 border rounded",children:"Cancel"})]})]})}function R3e({open:e=!1,initial:t=null,onClose:r,onSubmit:s}){const[a,i]=g.useState({name:"",description:""}),[l,o]=g.useState(!1);if(g.useEffect(()=>{i(t?{name:t.name||"",description:t.description||""}:{name:"",description:""})},[t,e]),!e)return null;const c=async d=>{var x,p;d.preventDefault();const u=Kt(a.name),m=Kt(a.description),f=Ml(u,"Role name",{pattern:/^[A-Za-z0-9_ ]+$/,patternMessage:"Role name can only contain letters, numbers, spaces, and underscores."});if(f)return alert(f);const y=Nc(m,{minLength:20});if(y)return alert(y);o(!0);try{await s({name:u,description:m},t==null?void 0:t.id),r()}catch(h){console.error("Save role failed",h),alert(((p=(x=h==null?void 0:h.response)==null?void 0:x.data)==null?void 0:p.detail)||"Failed to save role")}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit Role":"Create Role"}),n.jsx("button",{onClick:r,className:"px-2 py-1 rounded bg-gray-100",children:"Close"})]}),n.jsxs("form",{onSubmit:c,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Role name *"}),n.jsx("input",{required:!0,value:a.name,onChange:d=>i(u=>({...u,name:d.target.value})),onBlur:d=>i(u=>({...u,name:Kt(d.target.value)})),className:"w-full border p-2 rounded",placeholder:"Recruiter"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Description"}),n.jsx("input",{value:a.description,onChange:d=>i(u=>({...u,description:d.target.value})),onBlur:d=>i(u=>({...u,description:Kt(d.target.value)})),className:"w-full border p-2 rounded",placeholder:"Optional description"})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"px-3 py-2 border rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Saving...":t?"Save":"Create"})]})]})]})})}function L3e({role:e,permissions:t=[],onClose:r}){const{fetchRolePermissions:s,setRolePermissions:a}=c4(),[i,l]=g.useState(new Set),[o,c]=g.useState(!0),[d,u]=g.useState(!1);g.useEffect(()=>{let p=!0;return c(!0),s(e.id).then(h=>{p&&l(new Set(h||[]))}).catch(()=>{p&&l(new Set)}).finally(()=>{p&&c(!1)}),()=>{p=!1}},[e==null?void 0:e.id]);const m=p=>{l(h=>{const v=new Set(h);return v.has(p)?v.delete(p):v.add(p),v})},f=()=>l(new Set(t.map(p=>p.key))),y=()=>l(new Set),x=async()=>{u(!0);try{await a(e.id,Array.from(i)),alert("Permissions saved."),r()}catch(p){console.error("Failed saving role perms",p),alert("Failed to save permissions")}finally{u(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:n.jsxs("div",{className:"bg-white rounded p-4 w-full max-w-3xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-semibold",children:["Permissions for ",e.name]}),n.jsxs("div",{children:[n.jsx("button",{className:"px-3 py-1 border rounded mr-2",onClick:f,children:"Select All"}),n.jsx("button",{className:"px-3 py-1 border rounded",onClick:y,children:"Clear"})]})]}),o?n.jsx("div",{children:"Loading..."}):n.jsx("div",{className:"max-h-96 overflow-auto border rounded",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Permission"}),n.jsx("th",{className:"p-2 text-left",children:"Key"}),n.jsx("th",{className:"p-2 text-center",children:"Has"})]})}),n.jsx("tbody",{children:t.map(p=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:p.name}),n.jsx("td",{className:"p-2 text-sm text-gray-600",children:p.key}),n.jsx("td",{className:"p-2 text-center",children:n.jsx("input",{type:"checkbox",checked:i.has(p.key),onChange:()=>m(p.key),"aria-label":`${e.name} has ${p.key}`})})]},p.key||p.id))})]})}),n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsx("button",{onClick:r,className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:x,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded",children:d?"Saving...":"Save"})]})]})})}function eL(){const{roles:e,loading:t,error:r,pagination:s,createRole:a,updateRole:i,deleteRole:l,fetch:o}=c4(),{permissions:c,loading:d}=d4(),[u,m]=g.useState(null),[f,y]=g.useState(null),{page:x,setPage:p,limit:h,setLimit:v,pageSizeOptions:b}=Yp("roles:listing");g.useEffect(()=>{o({page:x,limit:h})},[x,h]);const j=async E=>{var T,A;try{await a(E),await o({page:x,limit:h})}catch(C){console.error("Create role failed",C),alert(((A=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:A.detail)||"Failed to create role")}},_=async(E,T)=>{var A,C;try{await i(T,E),await o({page:x,limit:h})}catch(P){console.error("Update role failed",P),alert(((C=(A=P==null?void 0:P.response)==null?void 0:A.data)==null?void 0:C.detail)||"Failed to update role")}},N=async E=>{var T,A;if(confirm("Delete role? This cannot be undone."))try{await l(E),await o({page:x,limit:h})}catch(C){console.error("Delete role failed",C),alert(((A=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:A.detail)||"Failed to delete role")}},w=(s==null?void 0:s.totalPages)||Math.max(1,Math.ceil(((e==null?void 0:e.length)||0)/h)),k=(s==null?void 0:s.totalRecords)??(e==null?void 0:e.length)??0,S=(s==null?void 0:s.currentPage)||x;return t||d?n.jsx("div",{className:"p-4",children:"Loading roles & permissions..."}):n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Roles"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Manage roles and their permissions"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h2",{className:"font-medium mb-3",children:"Create Role"}),n.jsx(O3e,{onSubmit:j})]}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"bg-white border rounded p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"font-medium",children:"All roles"}),n.jsx("button",{onClick:()=>o({page:x,limit:h}),className:"px-3 py-1 border rounded text-sm",children:"Refresh"})]}),n.jsx(Xp,{items:e,totalPages:w,currentPage:S,onPageChange:p,totalRecords:k,pageSize:h,onPageSizeChange:E=>{v(E),p(1)},pageSizeOptions:b,error:r?"Failed to load roles. Please retry.":null,onRetry:()=>o({page:x,limit:h}),emptyMessage:"No roles created yet.",renderCard:E=>n.jsxs("div",{className:"border rounded p-4 bg-white shadow-sm hover:shadow-md transition",children:[n.jsx("div",{className:"font-medium",children:E.name}),n.jsx("div",{className:"text-sm text-gray-600",children:E.description||"No description"}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["id: ",E.id,E.key?` | key: ${E.key}`:""]}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>y(E),className:"px-3 py-1 border rounded text-sm",children:"Permissions"}),n.jsx("button",{onClick:()=>m(E),className:"px-3 py-1 border rounded text-sm",children:"Edit"}),n.jsx("button",{onClick:()=>N(E.id),className:"px-3 py-1 border rounded text-sm text-red-600",children:"Delete"})]})]})})]}),n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Permissions (global list)"}),c.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No permissions defined yet."}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:c.map(E=>n.jsxs("div",{className:"border rounded p-2 text-sm",children:[n.jsx("div",{className:"font-medium",children:E.name}),n.jsx("div",{className:"text-xs text-gray-500",children:E.key})]},E.id))})]})]})]}),u&&n.jsx(R3e,{open:!!u,initial:u,onClose:()=>m(null),onSubmit:_}),f&&n.jsx(L3e,{role:f,permissions:c,onClose:()=>y(null)})]})}function tL(){const{permissions:e,loading:t,createPermission:r,deletePermission:s}=d4(),[a,i]=g.useState({role_name:"",module_name:"",action_name:""}),l=async o=>{var c,d;if(o.preventDefault(),!a.role_name||!a.module_name||!a.action_name)return alert("All fields are required");try{await r({role_name:a.role_name.trim(),module_name:a.module_name.trim(),action_name:a.action_name.trim()}),i({role_name:"",module_name:"",action_name:""})}catch(u){alert(((d=(c=u==null?void 0:u.response)==null?void 0:c.data)==null?void 0:d.detail)||"Failed to create permission")}};return t?n.jsx("div",{className:"p-4",children:"Loading permissions"}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Permissions"}),n.jsxs("div",{className:"bg-white border rounded p-4 mb-6",children:[n.jsx("h2",{className:"font-medium mb-3",children:"Create permission"}),n.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[n.jsx("input",{placeholder:"role_name (e.g. recruiter)",value:a.role_name,onChange:o=>i(c=>({...c,role_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("input",{placeholder:"module_name (e.g. candidates)",value:a.module_name,onChange:o=>i(c=>({...c,module_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("input",{placeholder:"action_name (e.g. view)",value:a.action_name,onChange:o=>i(c=>({...c,action_name:o.target.value})),className:"border p-2 rounded w-full",required:!0}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]}),n.jsxs("div",{className:"bg-white border rounded p-4",children:[n.jsx("h2",{className:"font-medium mb-3",children:"All permissions"}),e.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No permissions found."}):n.jsx("div",{className:"space-y-2",children:e.map(o=>n.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium",children:[o.role_name,"  ",o.module_name,".",n.jsx("span",{className:"text-blue-600",children:o.action_name})]}),n.jsx("div",{className:"text-sm text-gray-500",children:new Date(o.created_at).toLocaleString()})]}),n.jsx("button",{onClick:()=>{confirm("Delete permission?")&&s(o.id)},className:"px-3 py-1 border rounded text-sm text-red-600",children:"Delete"})]},o.id))})]})]})}function rL(){const{roles:e,loading:t,fetch:r}=c4();return g.useEffect(()=>{const s=Qi.on("roles:updated",()=>r()),a=Qi.on("role-permissions:updated",()=>r());return()=>{s(),a()}},[]),t?n.jsx("div",{className:"p-4",children:"Loading roles..."}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Roles"}),n.jsx("div",{className:"bg-white border rounded p-4",children:n.jsxs("table",{className:"w-full table-auto border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Role Name"}),n.jsx("th",{className:"p-2 text-left",children:"Description"}),n.jsx("th",{className:"p-2 text-left",children:"Role ID"})]})}),n.jsx("tbody",{children:e.map(s=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:s.name}),n.jsx("td",{className:"p-2",children:s.description}),n.jsx("td",{className:"p-2",children:s.id})]},s.id))})]})})]})}function nL(){const{permissions:e,loading:t,fetch:r}=d4();return g.useEffect(()=>{const s=Qi.on("permissions:updated",()=>r());return()=>s()},[]),t?n.jsx("div",{className:"p-4",children:"Loading permissions..."}):n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Permissions"}),n.jsx("div",{className:"bg-white border rounded p-4",children:n.jsxs("table",{className:"w-full table-auto border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Permission Name"}),n.jsx("th",{className:"p-2 text-left",children:"Key"}),n.jsx("th",{className:"p-2 text-left",children:"Description"})]})}),n.jsx("tbody",{children:e.map(s=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:s.role_name}),n.jsx("td",{className:"p-2",children:s.module_name+"."+s.action_name}),n.jsx("td",{className:"p-2",children:s.created_at})]},s.id))})]})})]})}function sL(){const[e,t]=g.useState({}),[r,s]=g.useState(!0);g.useEffect(()=>{a()},[]);const a=async()=>{var l;s(!0);try{const o=await q.get("/v1/permissions-matrix");if(!((l=o.data)!=null&&l.matrix))return;const c=o.data.matrix,d={};Object.entries(c).forEach(([u,m])=>{d[u]||(d[u]={}),Object.entries(m).forEach(([f,y])=>{y.forEach(x=>{d[u][x]||(d[u][x]=[]),d[u][x].includes(f)||d[u][x].push(f)})})}),t(d)}catch(o){console.error("Permission matrix load failed",o)}finally{s(!1)}},i=(()=>{const l=new Set;return Object.values(e).forEach(o=>{Object.keys(o).forEach(c=>l.add(c))}),Array.from(l).sort()})();return n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Role Permission Matrix"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"System-wide RBAC configuration"}),r?n.jsx("div",{children:"Loading permissions"}):n.jsx("div",{className:"border rounded overflow-auto",children:n.jsxs("table",{className:"min-w-full border text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border px-3 py-2",children:"Module"}),i.map(l=>n.jsx("th",{className:"border px-3 py-2 capitalize",children:l.replace("_"," ")},l))]})}),n.jsx("tbody",{children:Object.entries(e).map(([l,o])=>n.jsxs("tr",{children:[n.jsx("td",{className:"border px-3 py-2 font-semibold bg-gray-50",children:l.replace("_"," ")}),i.map(c=>{var d;return n.jsx("td",{className:"border px-3 py-2 text-center",children:(d=o[c])!=null&&d.length?o[c].join(", "):""},c)})]},l))})]})})]})}function I3e(){const[e,t]=g.useState(!1),[r,s]=g.useState([]),[a,i]=g.useState(null);return{loading:e,matches:r,error:a,getMatches:async(o,c=10)=>{var d,u;try{t(!0),i(null);const m=await q.post("/v1/candidates/match",{job_id:o,limit:c});s(m.data||[])}catch(m){console.error(m),i(((u=(d=m==null?void 0:m.response)==null?void 0:d.data)==null?void 0:u.detail)||"Unable to fetch matches.")}finally{t(!1)}}}}function F3e({match:e}){var t;return n.jsxs("div",{className:"p-4 bg-white rounded shadow",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-bold",children:["Candidate #",e.candidate_id]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Fit Score"}),n.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:e.fit_score.toFixed(1)})]}),n.jsx(yr,{to:`/candidates/${e.candidate_id}`,className:"bg-blue-600 text-white px-4 py-2 rounded h-fit",children:"View Profile"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"font-semibold",children:"Top Factors"}),n.jsx("ul",{className:"list-disc ml-6 text-gray-700",children:(t=e.top_factors)==null?void 0:t.map((r,s)=>n.jsx("li",{children:r},s))})]})]})}function D3e(){const[e,t]=g.useState([]),[r,s]=g.useState(""),{loading:a,matches:i,error:l,getMatches:o}=I3e();g.useEffect(()=>{q.get("/v1/jobs").then(d=>t(d.data||[])).catch(d=>console.error("Failed to load jobs",d))},[]);const c=()=>{r&&o(r)};return n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Candidate Matching"}),n.jsxs("div",{className:"bg-white p-4 rounded shadow mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Job"}),n.jsxs("select",{className:"w-full p-2 border rounded",value:r,onChange:d=>s(d.target.value),children:[n.jsx("option",{value:"",children:"Choose a job"}),e.map(d=>n.jsx("option",{value:d.id,children:d.title},d.id))]}),n.jsx("button",{onClick:c,disabled:!r,className:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded",children:a?"Matching...":"Find Matches"})]}),l&&n.jsx("p",{className:"text-red-600 mb-4",children:l}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map((d,u)=>n.jsx(F3e,{match:d},u))}),!a&&i.length===0&&r&&n.jsx("p",{className:"text-gray-500",children:"No matching candidates found."})]})}function A_(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{var f;try{s(!0);const y=await q.get("/v1/interviews/recruiter/list");t(((f=y.data)==null?void 0:f.results)||[])}catch(y){console.error(y),i("Failed to load interviews.")}finally{s(!1)}},o=f=>{const y=(f||"").toLowerCase();return{scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700",rescheduled:"bg-orange-100 text-orange-800",pending:"bg-purple-100 text-purple-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-rose-100 text-rose-800",on_hold:"bg-amber-100 text-amber-800"}[y]||"bg-gray-100 text-gray-800"},c=f=>{switch((f||"").toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";case"rescheduled":return"Rescheduled";case"pending":return"Pending";case"confirmed":return"Confirmed";case"rejected":return"Rejected";case"on_hold":return"On Hold";default:return f?f.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"Unknown"}},d=f=>f?f.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase()):"Interview",u=f=>{if(!f)return"";const y=new Date(f);return Number.isNaN(y.getTime())?"":y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},m=e.reduce((f,y)=>{const x=new Date(y.scheduled_at).toDateString();return f[x]||(f[x]=[]),f[x].push(y),f},{});return r?n.jsx("div",{className:"p-6 text-center",children:"Loading..."}):n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Interview Calendar"}),a&&n.jsx("p",{className:"text-red-600 mb-4",children:a}),Object.keys(m).length===0&&n.jsx("p",{className:"text-gray-600",children:"No interviews scheduled."}),Object.entries(m).map(([f,y])=>n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:f}),n.jsx("div",{className:"space-y-3",children:y.map(x=>{var p,h;return n.jsxs("div",{className:"bg-white p-4 rounded shadow flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-900",children:((p=x.candidate)==null?void 0:p.full_name)||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:((h=x.job)==null?void 0:h.title)||"Job Title"}),n.jsx("p",{className:"text-xs text-gray-500",children:d(x.mode)}),n.jsx("p",{className:"text-sm text-gray-500",children:u(x.scheduled_at)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-3 py-1 rounded text-xs font-medium ${o(x.status)}`,children:c(x.status)}),x.meeting_link?n.jsx("a",{href:x.meeting_link,target:"_blank",rel:"noreferrer",className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Join Meet"}):null,n.jsx(yr,{to:`/recruiter/interviews/${x.id}`,className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"View"})]})]},x.id)})})]},f))]})}function aL(){const{id:e}=Rr(),[t,r]=g.useState([]),[s,a]=g.useState(null),[i,l]=g.useState(!0);g.useEffect(()=>{o()},[e]);const o=async()=>{try{const[d,u]=await Promise.all([q.get(`/v1/candidates/${e}`),q.get(`/v1/interviews?candidate_id=${e}`)]);a(d.data),r(u.data||[])}catch(d){console.error(d)}finally{l(!1)}},c=d=>({scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[d]||"bg-gray-100 text-gray-800";return i?n.jsx("p",{className:"p-6",children:"Loading..."}):n.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Interviews for ",s==null?void 0:s.name]}),n.jsx("p",{className:"text-gray-600 mb-6",children:s==null?void 0:s.email}),t.length===0&&n.jsx("p",{className:"text-gray-600",children:"No interviews found for this candidate."}),n.jsx("div",{className:"space-y-4",children:t.map(d=>{var u;return n.jsxs("div",{className:"p-4 bg-white rounded shadow flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:(u=d.job)==null?void 0:u.title}),n.jsx("p",{className:"text-gray-600",children:new Date(d.scheduled_at).toLocaleString()})]}),n.jsx("span",{className:`px-3 py-1 rounded ${c(d.status)}`,children:d.status}),n.jsx(yr,{to:`/interviews/${d.id}`,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"View"})]},d.id)})})]})}const u4=e=>String(e||"").toLowerCase().replace(/\s+/g,"_"),$3e=e=>{switch(u4(e)){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return e||"Unknown"}},M3e=e=>{const t=u4(e);return t==="completed"?"bg-green-100 text-green-800":t==="scheduled"?"bg-yellow-100 text-yellow-800":t==="no_show"?"bg-red-100 text-red-800":t==="in_progress"?"bg-blue-100 text-blue-800":t==="cancelled"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-700"},E_=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},B3e=(e,t)=>{if(!e||!t)return"--";const r=new Date(e),s=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(s.getTime()))return"--";const a=Math.max(0,s.getTime()-r.getTime()),i=Math.floor(a/6e4),l=Math.floor(i/60),o=i%60;return l>0?`${l}h ${o}m`:`${o}m`};function T_(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(""),[l,o]=g.useState("all"),[c,d]=g.useState("all"),[u,m]=g.useState(""),[f,y]=g.useState("");g.useEffect(()=>{x()},[]);const x=async()=>{var v;try{s(!0);const j=((v=(await q.get("/v1/interviews/recruiter/list")).data)==null?void 0:v.results)||[],_=await Promise.all(j.map(async N=>{try{const w=await q.get(`/v1/interviews/${N.id}/logs`);return{interview:N,actions:w.data||[]}}catch{return{interview:N,actions:[]}}}));t(_)}catch(b){console.error("Failed to load interview logs",b),i("Failed to load interview logs.")}finally{s(!1)}},p=g.useMemo(()=>{const v=new Set;return e.forEach(b=>{var j,_;(_=(j=b.interview)==null?void 0:j.job)!=null&&_.title&&v.add(b.interview.job.title)}),Array.from(v)},[e]),h=g.useMemo(()=>e.filter(v=>{var _;const b=v.interview||{},j=u4(b.status||"scheduled");if(l!=="all"&&j!==l||c!=="all"&&((_=b.job)==null?void 0:_.title)!==c)return!1;if(u){const N=new Date(`${u}T00:00:00`);if(new Date(b.scheduled_at)<N)return!1}if(f){const N=new Date(`${f}T23:59:59`);if(new Date(b.scheduled_at)>N)return!1}return!0}),[e,l,c,u,f]);return r?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading interview logs..."}):n.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interview Logs"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track scheduled, completed, and no-show interview activity."})]}),n.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),a&&n.jsx("div",{className:"text-red-600 mb-4",children:a}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:v=>o(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"in_progress",children:"In progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"no_show",children:"No Show"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Job Role"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All roles"}),p.map(v=>n.jsx("option",{value:v,children:v},v))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"From"}),n.jsx("input",{type:"date",value:u,onChange:v=>m(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"To"}),n.jsx("input",{type:"date",value:f,onChange:v=>y(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})}),h.length===0?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"No interview activity yet."}):n.jsx("div",{className:"space-y-4",children:h.map(v=>{const b=v.interview||{},j=b.candidate||{},_=b.job||{},N=b.recruiter||{},w=v.actions||[],k=w.find(A=>A.action==="joined"),S=w.find(A=>A.action==="completed"),E=(k==null?void 0:k.timestamp)||b.started_at,T=b.completed_at||(S==null?void 0:S.timestamp);return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:j.full_name||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:_.title||"Job Role"}),n.jsx("p",{className:"text-sm text-gray-500",children:(b.mode||"interview").split("_").map(A=>A?A[0].toUpperCase()+A.slice(1):"").join(" ")}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Recruiter: ",N.full_name||N.email||"--"]})]}),n.jsxs("div",{className:"text-left md:text-right",children:[n.jsx("span",{className:`inline-block mb-2 px-3 py-1 rounded text-sm ${M3e(b.status||"scheduled")}`,children:$3e(b.status||"scheduled")}),n.jsxs("p",{className:"font-semibold text-gray-800",children:["Score: ",b.overall_ai_score??"--"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-700 border-t pt-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Scheduled"}),n.jsx("p",{className:"font-semibold",children:E_(b.scheduled_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Started"}),n.jsx("p",{className:"font-semibold",children:E_(E)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),n.jsx("p",{className:"font-semibold",children:E_(T)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Duration"}),n.jsx("p",{className:"font-semibold",children:B3e(E,T)})]})]})]},b.id)})})]})}function ng(){var j,_,N;const{id:e}=Rr(),t=Et(),r=Tl==null?void 0:Tl(),s=(r==null?void 0:r.user)||null,[a,i]=g.useState(!0),[l,o]=g.useState(null),[c,d]=g.useState("");g.useEffect(()=>{u()},[]);const u=async()=>{try{const w=await q.get(`/v1/interviews/${e}`);o(w.data)}catch{d("Failed to load interview details.")}finally{i(!1)}},m=w=>{switch((w||"").toLowerCase()){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return w||"Unknown"}},f=w=>{const k=(w||"").toLowerCase();return{scheduled:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700"}[k]||"bg-gray-100 text-gray-700"},y=w=>w?w.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase()):"Interview",x=w=>{if(!w)return"Not Scheduled";const k=new Date(w);return Number.isNaN(k.getTime())?"Not Scheduled":k.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})};if(a)return n.jsx("h2",{className:"p-6",children:"Loading Interview..."});if(!l)return n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found"});const p=((j=l.submission)==null?void 0:j.candidate)||l.candidate||{},h=((_=l.submission)==null?void 0:_.job)||l.job||{},v=((N=l.submission)==null?void 0:N.recruiter)||l.recruiter||{},b=((s==null?void 0:s.role)||"").toLowerCase();return n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Interview Details"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back"})]}),c&&n.jsx("div",{className:"text-red-600 mb-4",children:c}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Candidate Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Name:"})," ",p.full_name||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",p.email||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",p.phone||""]})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Job Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Job Title:"})," ",h.title||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Company:"})," ",h.company_name||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",h.location||""]})]})]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Interview Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Type:"})," ",y(l.mode)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Date & Time:"})," ",x(l.scheduled_at)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Status:"})," ",n.jsx("span",{className:`px-2 py-1 rounded ${f(l.status)}`,children:m(l.status)})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recruiter:"})," ",v.full_name||v.email||""]})]})]}),(()=>{const w=[];return b==="candidate"&&l.mode==="ai_chat"&&w.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:m(l.status)==="In Progress"?"Resume Interview":"Start Interview"},"candidate-ai-chat")),b==="candidate"&&l.mode==="video"&&l.meeting_link&&w.push(n.jsx("a",{href:l.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Join Link"},"candidate-video")),b==="candidate"&&l.mode==="in_person"&&w.push(n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",l.location||""]},"candidate-in-person")),b==="recruiter"&&(w.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View Transcript"},"recruiter-transcript")),w.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"View AI Score"},"recruiter-score")),w.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"View Answers"},"recruiter-answers"))),b==="account_manager"&&(w.push(n.jsx("button",{onClick:()=>t(`/interviews/${e}/feedback`),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View Results"},"am-results")),w.push(n.jsx("button",{onClick:()=>t("/recruiter/candidates"),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Compare Candidates"},"am-compare"))),w.length===0?null:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Actions"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:w})]})})()]})]})]})}function P_(){var o,c;const{id:e}=Rr(),t=Et(),[r,s]=g.useState(!0),[a,i]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await q.get(`/v1/live-interviews/${e}`);i(d.data)}catch(d){console.error(d),alert("Failed to load live interview")}finally{s(!1)}};return r?n.jsx("h2",{className:"p-6",children:"Loading..."}):a?n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-5",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Live Interview Detail"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-gray-800 text-white rounded",children:"Back"})]}),n.jsxs("div",{className:"bg-white shadow rounded p-4 mb-4",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Candidate:"})," ",((o=a==null?void 0:a.candidate)==null?void 0:o.full_name)||"N/A"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Job:"})," ",((c=a==null?void 0:a.job)==null?void 0:c.title)||"N/A"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",n.jsx("span",{className:"px-2 py-1 bg-yellow-200 rounded",children:a.status})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Scheduled At:"})," ",a.scheduled_at?new Date(a.scheduled_at).toLocaleString():"Not Scheduled"]}),a.meeting_url&&n.jsxs("p",{className:"mt-2 text-blue-600 underline",children:["Meeting Link: ",a.meeting_url]})]})]}):n.jsx("h2",{className:"p-6 text-red-600",children:"Interview not found"})}const qU=g.createContext(),iL=({children:e})=>{const[t,r]=g.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));g.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},[t]);const s=()=>{r(a=>a==="dark"?"light":"dark")};return n.jsx(qU.Provider,{value:{theme:t,toggleTheme:s},children:e})},U3e=()=>g.useContext(qU);function z3e({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z",clipRule:"evenodd"}))}const W3e=g.forwardRef(z3e);function V3e({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{d:"M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"}))}const H3e=g.forwardRef(V3e),q3e=()=>{const{theme:e,toggleTheme:t}=U3e();return n.jsx("button",{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-darkSlate-800 hover:shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":e==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:e==="dark"?n.jsx(H3e,{className:"w-6 h-6 text-yellow-400",title:"Switch to Light Mode"}):n.jsx(W3e,{className:"w-6 h-6 text-gray-800",title:"Switch to Dark Mode"})})},GU=[{key:"today",label:"Today"},{key:"this_week",label:"This Week"},{key:"this_month",label:"This Month"}],G3e={today:"Today",this_week:"This Week",this_month:"This Month"},J3e=5*60*1e3,K3e=[{key:"total_clients",label:"Total Clients",icon:"",accent:"#3B82F6",onClick:e=>e("/account-manager/clients")},{key:"active_requirements",label:"Active Requirements",icon:"",accent:"#6C2BD9",onClick:e=>e("/account-manager/requirements")},{key:"recruiter_submissions",label:"Recruiter Submissions",icon:"",accent:"#6366F1",onClick:e=>e("/account-manager/submissions")},{key:"interviews_in_progress",label:"Interviews in Progress",icon:"",accent:"#F59E0B",onClick:e=>e("/account-manager/interview-logs")},{key:"hired_candidates",label:"Hired Candidates",icon:"",accent:"#10B981",onClick:e=>e("/account-manager/submissions?status=hired")},{key:"active_consultants",label:"Active Consultants",icon:"",accent:"#14B8A6",onClick:e=>e("/account-manager/assignments")},{key:"pending_timesheets",label:"Pending Timesheets",icon:"",accent:"#EF4444",onClick:e=>e("/account-manager/timesheets")}],X3e={Active:"#6C2BD9",Closed:"#10B981","On Hold":"#F59E0B",Draft:"#94A3B8"},Y3e={"AM Review":"#6C2BD9","Client Review":"#3B82F6","Interview Stage":"#F59E0B","Offer Stage":"#8B5CF6",Successful:"#10B981",Rejected:"#EF4444"},Z3e={kpi:!1,requirements:!1,pipeline:!1,panels:!1},lL=e=>{const t=String(e||"").trim().toLowerCase();return GU.some(r=>r.key===t)?t:"this_month"},om=e=>typeof e!="number"||Number.isNaN(e)?"--":e.toLocaleString(),Q3e=(e,t)=>typeof e!="number"||Number.isNaN(e)?"0.0%":t==="down"?`-${Math.abs(e).toFixed(1)}%`:t==="up"?`+${Math.abs(e).toFixed(1)}%`:`${Math.abs(e).toFixed(1)}%`,eEe=e=>e==="up"?{icon:"",color:"text-emerald-500"}:e==="down"?{icon:"",color:"text-red-500"}:{icon:"",color:"text-gray-500"},JU=e=>String(e||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()).trim(),oL=e=>{const{cx:t,cy:r,innerRadius:s,outerRadius:a,startAngle:i,endAngle:l,fill:o}=e;return n.jsx(JC,{cx:t,cy:r,innerRadius:s,outerRadius:a+8,startAngle:i,endAngle:l,fill:o})};function cL(){return n.jsxs("div",{className:"h-[320px] w-full rounded-xl border border-gray-200 bg-white p-5",children:[n.jsx("div",{className:"h-5 w-40 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-6 h-60 animate-pulse rounded-xl bg-gray-100"})]})}function dL({message:e}){return n.jsx("div",{className:"h-[320px] w-full rounded-xl border border-red-200 bg-red-50 p-5",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[n.jsx(_m,{className:"h-4 w-4"}),e]})})}function tEe({config:e,payload:t,loading:r,hasError:s,onClick:a}){if(r)return n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-9 w-20 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-36 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-4 h-10 animate-pulse rounded bg-gray-100"})]});const i=t||{},l=s||t==null,c=(Array.isArray(i.sparkline)?i.sparkline:[0,0,0,0,0,0,0]).map((u,m)=>({index:m,value:u})),d=eEe(i.trend);return n.jsxs("button",{type:"button",onClick:a,className:"rounded-xl border border-gray-200 bg-white p-4 text-left transition hover:-translate-y-0.5 hover:shadow-md",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-lg",children:e.icon}),l&&n.jsx(_m,{className:"h-4 w-4 text-amber-500",title:"Data unavailable","aria-label":"Data unavailable"})]}),n.jsx("p",{className:"mt-2 text-xs font-medium text-gray-500",children:e.label}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:l?"--":om(i.value)}),n.jsxs("div",{className:`mt-3 flex items-center gap-1 text-xs ${d.color}`,children:[n.jsx("span",{children:d.icon}),n.jsx("span",{children:l?"--":`${Q3e(i.change_pct,i.trend)} vs previous period`})]}),n.jsx("div",{className:"mt-3 h-12",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsx(gk,{data:c,children:n.jsx(qd,{type:"monotone",dataKey:"value",stroke:e.accent,strokeWidth:2,dot:!1,isAnimationActive:!l})})})})]})}function uL({title:e,value:t,subtitle:r,detail:s,actionLabel:a,onAction:i,loading:l,hasError:o,progress:c}){return l?n.jsxs("div",{className:"rounded-xl border border-purple-100 bg-white p-5",children:[n.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-9 w-20 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-56 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-3 h-4 w-44 animate-pulse rounded bg-gray-200"}),n.jsx("div",{className:"mt-4 h-9 w-40 animate-pulse rounded bg-gray-200"})]}):n.jsxs("div",{className:"rounded-xl border border-purple-100 bg-white p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:e}),n.jsx("p",{className:"mt-3 text-3xl font-bold text-gray-900",children:o?"--":om(t)}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r}),typeof c=="number"&&!o&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-100",children:n.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-purple-500 to-indigo-500",style:{width:`${c}%`}})}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s})]}),!c&&n.jsx("p",{className:"mt-4 text-sm font-medium text-gray-700",children:o?"--":s}),n.jsxs("button",{type:"button",onClick:i,className:"mt-4 inline-flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-purple-700",children:[a,n.jsx(U1,{className:"h-4 w-4"})]})]})}function rEe({active:e,payload:t}){if(!e||!(t!=null&&t.length))return null;const r=t[0].payload;return n.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-md",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:[r.status,": ",r.count," (",(r.pct??0).toFixed(1),"%)"]})})}function nEe({active:e,payload:t}){if(!e||!(t!=null&&t.length))return null;const r=t[0].payload,s=Object.entries(r.breakdown||{});return n.jsxs("div",{className:"w-64 rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-md",children:[n.jsxs("p",{className:"font-semibold text-gray-900",children:[r.group,": ",r.count," (",(r.pct??0).toFixed(1),"%)"]}),n.jsx("div",{className:"mt-2 space-y-1 text-gray-700",children:s.map(([a,i])=>n.jsxs("p",{children:[JU(a),": ",i]},a))})]})}function O_(){const e=Et(),[t,r]=Os(),s=g.useRef(0),a=lL(t.get("filter")),[i,l]=g.useState(!0),[o,c]=g.useState(!1),[d,u]=g.useState(null),[m,f]=g.useState(null),[y,x]=g.useState(null),[p,h]=g.useState(null),[v,b]=g.useState(null),[j,_]=g.useState(Z3e),[N,w]=g.useState(-1),[k,S]=g.useState(-1),[E,T]=g.useState(-1),[A,C]=g.useState(-1),[P,O]=g.useState({open:!1,group:"",candidates:[]});g.useEffect(()=>{const he=t.get("filter"),M=lL(he);if(he!==M){const Se=new URLSearchParams(t);Se.set("filter",M),r(Se,{replace:!0})}},[t,r]);const R=g.useCallback(async(he,{silent:M=!1}={})=>{const Se=Date.now();s.current=Se,M?c(!0):l(!0);const me=async(lt,xe)=>{try{const Ae=await q.get(lt,{params:{filter:he}});return{key:xe,ok:!0,data:Ae.data}}catch(Ae){return console.error(`Dashboard API failed: ${xe}`,Ae),{key:xe,ok:!1,data:null}}},[Pe,ue,ye,Ye]=await Promise.all([me("/v1/am/dashboard/kpi-cards","kpi"),me("/v1/am/dashboard/requirements-donut","requirements"),me("/v1/am/dashboard/pipeline-pie","pipeline"),me("/v1/am/dashboard/panels-summary","panels")]);s.current===Se&&(_({kpi:!Pe.ok,requirements:!ue.ok,pipeline:!ye.ok,panels:!Ye.ok}),Pe.ok&&f(Pe.data),ue.ok&&x(ue.data),ye.ok&&h(ye.data),Ye.ok&&b(Ye.data),u(new Date),M?c(!1):l(!1))},[]);g.useEffect(()=>{R(a,{silent:!1})},[a,R]),g.useEffect(()=>{const he=setInterval(()=>{R(a,{silent:!0})},J3e);return()=>clearInterval(he)},[a,R]);const F=he=>{if(he===a)return;const M=new URLSearchParams(t);M.set("filter",he),r(M)},Q=()=>{R(a,{silent:!1})},W=g.useMemo(()=>((y==null?void 0:y.segments)||[]).map(M=>({...M,value:Number(M.count||0),color:X3e[M.status]||"#94A3B8"})),[y]),L=g.useMemo(()=>W.reduce((he,M)=>he+(M.value||0),0),[W]),I=L===0,K=g.useMemo(()=>((p==null?void 0:p.groups)||[]).map(M=>({...M,value:Number(M.count||0),color:M.color||Y3e[M.group]||"#94A3B8"})),[p]),D=Number((p==null?void 0:p.total_candidates)||0),Y=D===0||K.every(he=>he.value===0),re=v||{},B=re.active_requirements||{},G=re.pipeline_ready||{};re.consultant_pool;const ce=g.useMemo(()=>K3e.filter(he=>!(he.key==="total_clients"||he.key==="active_consultants"||he.key==="pending_timesheets")),[]),ae=Number(B.total||0),fe=Number(B.with_submissions||0),ne=ae>0?Math.min(100,Math.round(fe/ae*100)):0;return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"rounded-xl bg-gray-100 p-6",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Account Manager Dashboard"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage client requirements, recruiters, and submissions"})]}),n.jsx(q3e,{})]})}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsx("div",{className:"inline-flex flex-wrap items-center gap-2",children:GU.map(he=>{const M=a===he.key;return n.jsx("button",{type:"button",onClick:()=>F(he.key),className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${M?"border-transparent bg-[#6C2BD9] text-white":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:he.label},he.key)})}),n.jsxs("button",{type:"button",onClick:Q,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50",children:[n.jsx($l,{className:`h-4 w-4 ${i||o?"animate-spin":""}`}),"Refresh"]})]}),n.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",d?d.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"--"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-7",children:ce.map(he=>{var M;return n.jsx(tEe,{config:he,payload:((M=m==null?void 0:m.cards)==null?void 0:M[he.key])||null,loading:i,hasError:j.kpi,onClick:()=>he.onClick(e)},he.key)})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(cL,{}),n.jsx(cL,{})]}):n.jsxs(n.Fragment,{children:[j.requirements?n.jsx(dL,{message:"Requirements chart data unavailable"}):n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Requirements Status"}),n.jsx("p",{className:"text-xs text-gray-500",children:(y==null?void 0:y.period_label)||"--"})]}),n.jsxs("button",{type:"button",onClick:()=>e("/account-manager/requirements"),className:"inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:text-indigo-700",children:["Open Requirements",n.jsx(Xv,{className:"h-3.5 w-3.5"})]})]}),n.jsx("div",{className:"mt-4 h-[280px]",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Kv,{children:[n.jsx(Pi,{data:I?[{status:"No data",value:1,color:"#E5E7EB",count:0,pct:0}]:W,dataKey:"value",nameKey:"status",cx:"50%",cy:"50%",outerRadius:110,innerRadius:65,paddingAngle:I?0:3,activeIndex:k,activeShape:oL,onMouseEnter:(he,M)=>w(M),onMouseLeave:()=>w(-1),onClick:(he,M)=>{if(I)return;S(M);const Se=String(he.status||"").toLowerCase().replace(/\s+/g,"_");e(`/account-manager/requirements?status=${encodeURIComponent(Se)}`)},children:(I?[{color:"#E5E7EB"}]:W).map((he,M)=>n.jsx(wo,{fill:he.color,opacity:N===-1||N===M?1:.35},`${he.status}-${M}`))}),n.jsx(Dn,{content:n.jsx(rEe,{})}),n.jsx("text",{x:"50%",y:"48%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-gray-900 text-2xl font-bold",children:I?"No Data":L}),n.jsx("text",{x:"50%",y:"56%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-gray-500 text-xs",children:I?"No Requirements Yet":"Total"})]})})}),n.jsx("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-2 text-xs",children:W.map(he=>n.jsxs("div",{className:"inline-flex items-center gap-1 text-gray-700",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:he.color}}),n.jsx("span",{children:he.status}),n.jsx("span",{className:"font-semibold",children:he.count})]},he.status))}),n.jsxs("p",{className:"mt-3 text-center text-xs text-gray-500",children:["All time: ",om((y==null?void 0:y.all_time_total)??0)," total"]})]}),j.pipeline?n.jsx(dL,{message:"Candidate pipeline data unavailable"}):n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Candidate Pipeline"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",om(D)," candidates  ",G3e[a]]})]})}),n.jsxs("div",{className:"mt-4 flex flex-col gap-4 lg:flex-row",children:[n.jsx("div",{className:"h-[260px] w-full lg:w-[55%]",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Kv,{children:[n.jsx(Pi,{data:Y?[{group:"No data",value:1,color:"#E5E7EB",count:0,breakdown:{}}]:K,dataKey:"value",nameKey:"group",cx:"50%",cy:"50%",outerRadius:120,innerRadius:0,paddingAngle:Y?0:2,activeIndex:A,activeShape:oL,labelLine:!1,label:({index:he,x:M,y:Se,value:me,payload:Pe})=>E!==he||!me?"":n.jsx("text",{x:M,y:Se,fill:"#111827",textAnchor:"middle",dominantBaseline:"central",fontSize:11,fontWeight:600,children:`${Pe.group} ${me}`}),onMouseEnter:(he,M)=>T(M),onMouseLeave:()=>T(-1),onClick:(he,M)=>{Y||!he.count||(C(M),O({open:!0,group:he.group,candidates:Array.isArray(he.candidates)?he.candidates:[]}))},isAnimationActive:!0,animationDuration:400,children:(Y?[{color:"#E5E7EB"}]:K).map((he,M)=>n.jsx(wo,{fill:he.color,opacity:E===-1||E===M?1:.35},`${he.group}-${M}`))}),n.jsx(Dn,{content:n.jsx(nEe,{})})]})})}),n.jsx("div",{className:"flex-1 space-y-2",children:K.map((he,M)=>n.jsxs("button",{type:"button",onClick:()=>{he.count&&(C(M),O({open:!0,group:he.group,candidates:Array.isArray(he.candidates)?he.candidates:[]}))},className:"flex w-full items-center justify-between rounded-lg border border-gray-200 px-3 py-2 text-left text-xs hover:bg-gray-50",children:[n.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-700",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-sm",style:{backgroundColor:he.color}}),he.group]}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[he.count," (",(he.pct??0).toFixed(1),"%)"]})]},he.group))})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsx(uL,{title:"Active Requirements",value:ae,subtitle:"Assigned to you and waiting for recruiter action",detail:`${fe} of ${ae} have submissions`,actionLabel:"Review Requirements",onAction:()=>e("/account-manager/requirements"),loading:i,hasError:j.panels,progress:j.panels?0:ne}),n.jsx(uL,{title:"Pipeline Ready",value:Number(G.total||0),subtitle:"Candidates ready for your review",detail:`AM Shortlisted: ${om(Number(G.am_shortlisted||0))} | Client Shortlisted: ${om(Number(G.client_shortlisted||0))}`,actionLabel:"Send to Client",onAction:()=>e("/account-manager/candidate-review?status=am_shortlisted"),loading:i,hasError:j.panels}),null]}),P.open&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",children:n.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-lg overflow-hidden bg-white shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:P.group}),n.jsxs("p",{className:"text-xs text-gray-500",children:[P.candidates.length," candidate",P.candidates.length!==1?"s":""]})]}),n.jsx("button",{type:"button",onClick:()=>O({open:!1,group:"",candidates:[]}),className:"rounded-md p-1 text-gray-500 hover:bg-gray-100",children:n.jsx(Ar,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"h-[calc(100%-76px)] overflow-y-auto p-4",children:P.candidates.length===0?n.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600",children:"No candidates found in this group."}):n.jsx("div",{className:"space-y-3",children:P.candidates.map(he=>n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:he.name||"Unnamed Candidate"}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:["Status: ",he.status_label||JU(he.status)]}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:["Job: ",he.job_applied_for||"Not specified"]})]},`${he.candidate_id}-${he.status}`))})})]})})]})}function sEe({data:e,onClose:t,onSuccess:r}){const[s,a]=g.useState(!1),[i,l]=g.useState({billingType:"payroll",billingRate:"",payoutRate:"",startDate:""});function o(d){l({...i,[d.target.name]:d.target.value})}async function c(){if(!i.billingRate||!i.startDate){alert("Billing rate and start date are required");return}if(!e.client_id&&!e.clientId){alert("Client not found for this consultant");return}try{a(!0);const d=new Date(i.startDate).toISOString(),u={consultantId:e.consultant_id||null,applicationId:e.application_id||e.id,clientId:e.client_id||e.clientId,clientName:e.client_name||"Client",role:e.job_title||"Consultant",startDate:d,endDate:null,billingType:i.billingType,billingRate:Number(i.billingRate),payoutRate:i.payoutRate?Number(i.payoutRate):null};await q.post("/v1/am/assign-consultant",u),alert("Consultant assigned successfully"),r()}catch(d){console.error(d),alert("Failed to assign consultant")}finally{a(!1)}}return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg p-6 space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:e.consultant_id?"Assign Consultant":"Convert & Assign Consultant"}),n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",e.consultant_name||e.candidate_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Email:"})," ",e.email]}),n.jsxs("p",{children:[n.jsx("b",{children:"Client:"})," ",e.client_name]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Billing Type"}),n.jsxs("select",{name:"billingType",value:i.billingType,onChange:o,className:"w-full border p-2 rounded",children:[n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Billing Rate"}),n.jsx("input",{type:"number",name:"billingRate",value:i.billingRate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Payout Rate"}),n.jsx("input",{type:"number",name:"payoutRate",value:i.payoutRate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Start Date"}),n.jsx("input",{type:"date",name:"startDate",value:i.startDate,onChange:o,className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{onClick:c,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded",children:s?"Processing...":e.consultant_id?"Assign":"Convert & Assign"})]})]})})}function mL(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null);g.useEffect(()=>{l()},[]);async function l(){var c;try{s(!0);const d=await q.get("/v1/am/ready-for-assignment"),u=((c=d.data)==null?void 0:c.data)||d.data||[];t(Array.isArray(u)?u:[])}catch(d){console.error(d),alert("Failed to load candidates")}finally{s(!1)}}const o=async c=>{var f,y;const d=c.application_id||c.id;if(!d||!window.confirm("Record this candidate as a direct hire? They will be removed from the AM queue."))return;const m=window.prompt("Optional note to attach to the direct hire record:");try{await q.post(`/v1/am/applications/${d}/direct-hire`,{note:m||void 0}),alert("Direct hire recorded"),l()}catch(x){console.error("Direct hire failed",x),alert("Failed to record direct hire: "+((y=(f=x.response)==null?void 0:f.data)==null?void 0:y.detail))}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Ready for Assignment"}),r&&n.jsx("p",{children:"Loading..."}),!r&&e.length===0&&n.jsx("p",{className:"text-gray-500",children:"No candidates ready for assignment"}),!r&&e.length>0&&n.jsxs("table",{className:"w-full border",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 border",children:"Candidate"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Job"}),n.jsx("th",{className:"p-2 border",children:"Client"}),n.jsx("th",{className:"p-2 border",children:"Action"})]})}),n.jsx("tbody",{children:e.map((c,d)=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 border",children:c.candidate_name}),n.jsx("td",{className:"p-2 border",children:c.email}),n.jsx("td",{className:"p-2 border",children:c.job_title}),n.jsx("td",{className:"p-2 border",children:c.client_name}),n.jsx("td",{className:"p-2 border",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>i(c),children:"Assign"}),n.jsx("button",{className:"px-3 py-1 bg-violet-600 text-white rounded",onClick:()=>o(c),children:"Direct Hire"})]})})]},c.application_id||d))})]}),a&&n.jsx(sEe,{data:a,onClose:()=>i(null),onSuccess:()=>{i(null),l()}})]})}function aEe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0);g.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0);const i=await q.get("/v1/client/master");t(i.data||[])}catch(i){console.error("Failed to load clients",i),alert("Unable to load client directory")}finally{s(!1)}};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Directory"}),n.jsx("p",{className:"text-sm text-gray-500",children:"View the clients covered by your Account Manager remit. Operations control edits and onboarding while you focus on requirement coordination."})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:[e.length," client",e.length===1?"":"s"]}),n.jsx("button",{onClick:a,className:"px-3 py-1 text-xs font-semibold uppercase tracking-wide text-blue-600 hover:text-blue-800",children:"Refresh"})]}),r?n.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 text-center text-gray-500",children:"Loading client list..."}):e.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-gray-200 bg-white p-6 text-center text-gray-500",children:"No clients assigned to your account yet."}):n.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-xs uppercase tracking-wider text-gray-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Company"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Account Manager"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(i=>{var l;return n.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900",children:i.name||""}),n.jsx("td",{className:"px-4 py-3 text-gray-700",children:i.company_name||""}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:i.email||""}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:((l=i.account_manager)==null?void 0:l.name)||"Unassigned"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${i.is_active?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"}`,children:i.is_active?"Active":"Inactive"})})]},i.id)})})]})})]})}const iEe=new Set(["",null,void 0]),gi=(...e)=>{for(const t of e)if(!iEe.has(t))return t;return""},m4=e=>String(e||"").trim().toLowerCase().replace(/\s+/g,"_"),lEe=e=>String(e||"interview").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),oEe=e=>{var r,s,a,i;if(Array.isArray(e))return e;const t=[e==null?void 0:e.interview_logs,e==null?void 0:e.interviews,e==null?void 0:e.results,e==null?void 0:e.items,(r=e==null?void 0:e.data)==null?void 0:r.interview_logs,(s=e==null?void 0:e.data)==null?void 0:s.interviews,(a=e==null?void 0:e.data)==null?void 0:a.results,(i=e==null?void 0:e.data)==null?void 0:i.items,e==null?void 0:e.data];for(const l of t)if(Array.isArray(l))return l;return[]},cEe=(e={})=>{var m,f,y,x,p,h,v,b,j,_,N,w,k,S,E,T,A,C,P,O,R,F,Q,W,L,I,K;const t=gi(e.interview_id,e.id,e.uuid),r=gi(e.candidate_name,(m=e.candidate)==null?void 0:m.full_name,(f=e.candidate)==null?void 0:f.name,(x=(y=e.submission)==null?void 0:y.candidate)==null?void 0:x.full_name,(h=(p=e.submission)==null?void 0:p.candidate)==null?void 0:h.name,e.candidate_full_name),s=gi(e.job_title,(v=e.job)==null?void 0:v.title,(j=(b=e.submission)==null?void 0:b.job)==null?void 0:j.title,e.requirement_title,e.role),a=gi(e.interview_mode,e.mode,e.interview_type,e.type),i=gi(e.scheduled_at,e.scheduledAt,e.start_at,e.start_time,e.interview_datetime,e.interview_date),l=gi(e.status,e.stage,e.interview_status),o=gi(e.client_decision,e.client_status,e.decision),c=gi(e.meeting_link,e.meet_link,e.video_link,e.join_url,e.link),d=gi(e.recruiter_name,e.scheduled_by_name,e.created_by_name,e.submitted_by_name,(_=e.recruiter)==null?void 0:_.full_name,(N=e.recruiter)==null?void 0:N.name,(w=e.scheduled_by)==null?void 0:w.full_name,(k=e.scheduled_by)==null?void 0:k.name,(S=e.created_by)==null?void 0:S.full_name,(E=e.created_by)==null?void 0:E.name,(T=e.submission)==null?void 0:T.recruiter_name,(A=e.submission)==null?void 0:A.submitted_by_name,(P=(C=e.submission)==null?void 0:C.recruiter)==null?void 0:P.full_name,(R=(O=e.submission)==null?void 0:O.recruiter)==null?void 0:R.name),u=gi(e.recruiter_email,e.scheduled_by_email,e.created_by_email,(F=e.recruiter)==null?void 0:F.email,(Q=e.scheduled_by)==null?void 0:Q.email,(W=e.created_by)==null?void 0:W.email,(L=e.submission)==null?void 0:L.recruiter_email,(K=(I=e.submission)==null?void 0:I.recruiter)==null?void 0:K.email);return{...e,interview_id:t||`${r||"candidate"}::${s||"job"}::${i||"time"}`,candidate_name:r,job_title:s,interview_mode:a,scheduled_at:i,status:l,client_decision:o,meeting_link:c,recruiter_name:d,recruiter_email:u}},dEe=[{endpoint:"/v1/am/interview-logs"}],uEe=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},mEe=e=>{const t=m4(e);return t==="completed"?"bg-emerald-100 text-emerald-800":t==="in_progress"?"bg-cyan-100 text-cyan-800":t==="scheduled"?"bg-amber-100 text-amber-800":t==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"},fEe=e=>{const t=m4(e);return t==="in_progress"?"In Progress":t==="no_show"?"No Show":t.split("_").filter(Boolean).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")};function hEe(){const[e,t]=g.useState(!0),[r,s]=g.useState([]),[a,i]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState("all"),u=async()=>{var v;try{i(""),t(!0);const b=new Map;let j=0;for(const{endpoint:_,params:N}of dEe)try{const w=N&&Object.keys(N).length>0?{params:N}:void 0,k=await q.get(_,w);j+=1,oEe(k==null?void 0:k.data).map(E=>cEe(E)).forEach(E=>{const T=String(E.interview_id||"");if(!T)return;const A=b.get(T),C=new Date((A==null?void 0:A.scheduled_at)||(A==null?void 0:A.updated_at)||(A==null?void 0:A.created_at)||0).getTime(),P=new Date((E==null?void 0:E.scheduled_at)||(E==null?void 0:E.updated_at)||(E==null?void 0:E.created_at)||0).getTime();(!A||P>=C)&&b.set(T,E)})}catch(w){const k=(v=w==null?void 0:w.response)==null?void 0:v.status;if([401,403,404,405,422].includes(k))continue;console.warn(`Failed to load AM interview data from ${_}:`,w)}if(j===0)throw new Error("No interview endpoints reachable");s(Array.from(b.values()))}catch(b){console.error("Failed to load AM interview calendar:",b),i("Failed to load interview calendar.")}finally{t(!1)}};g.useEffect(()=>{u()},[]);const m=g.useMemo(()=>{const v=new Map;return r.forEach(b=>{const _=gi(b.recruiter_name,b.recruiter_email)||"unknown",N=v.get(_)||0;v.set(_,N+1)}),Array.from(v.entries()).map(([b,j])=>({value:b,label:b==="unknown"?"Unknown recruiter":b,count:j})).sort((b,j)=>b.label.localeCompare(j.label))},[r]),f=g.useMemo(()=>c==="all"?r:r.filter(v=>(gi(v.recruiter_name,v.recruiter_email)||"unknown")===c),[r,c]),y=g.useMemo(()=>c==="all"?null:m.find(v=>v.value===c)||null,[c,m]),x=g.useMemo(()=>{const v={};return f.forEach(b=>{const j=b.scheduled_at||b.created_at,_=j?new Date(j):null,N=_&&!Number.isNaN(_.getTime())?_.toDateString():"Unscheduled";v[N]||(v[N]=[]),v[N].push(b)}),Object.entries(v).sort((b,j)=>b[0]==="Unscheduled"?1:j[0]==="Unscheduled"?-1:new Date(b[0]).getTime()-new Date(j[0]).getTime())},[f]),p=v=>{const b=m4(v);return b==="scheduled"||b==="in_progress"},h=async v=>{var b,j;if(v&&window.confirm("Mark this interview as completed?"))try{o(v),await q.post(`/v1/interviews/${v}/mark-completed`),await u(),alert("Interview marked as completed.")}catch(_){console.error("Failed to mark interview as completed:",_),alert(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to mark interview as completed.")}finally{o("")}};return e?n.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading interviews..."}):n.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Calendar"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Interviews scheduled by recruiters for your managed requirements."})]}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),n.jsx("div",{className:"bg-gradient-to-r from-white to-slate-50 rounded-xl border border-gray-200 p-4 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[n.jsxs("div",{className:"w-full md:max-w-md",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5 tracking-wide uppercase",children:"Recruiter"}),n.jsxs("div",{className:"relative",children:[n.jsx(s3e,{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full appearance-none rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-10 text-sm text-gray-900 shadow-sm transition hover:border-indigo-300 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsxs("option",{value:"all",children:["All Recruiters (",r.length,")"]}),m.map(v=>n.jsxs("option",{value:v.value,children:[v.label," (",v.count,")"]},v.value))]}),n.jsx(fo,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2.5 py-1 text-xs font-semibold text-indigo-700",children:["Recruiters: ",m.length]}),y?n.jsxs("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700",children:[y.label,": ",y.count]}):null]})]}),n.jsxs("p",{className:"text-sm text-gray-600 md:text-right",children:["Showing ",n.jsx("span",{className:"font-semibold text-gray-900",children:f.length})," ","interview",f.length===1?"":"s",y?n.jsxs(n.Fragment,{children:[" ","for ",n.jsx("span",{className:"font-semibold text-gray-900",children:y.label})]}):null]})]})}),x.length===0?n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center text-gray-500",children:"No interviews scheduled."}):x.map(([v,b])=>n.jsxs("section",{className:"space-y-3",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v}),n.jsx("div",{className:"space-y-3",children:b.map(j=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j.candidate_name||"Candidate"}),n.jsx("p",{className:"text-sm text-gray-600",children:j.job_title||"--"}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(l3e,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:lEe(j.interview_mode)})]}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(si,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:uEe(j.scheduled_at)})]}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx(Ao,{className:"h-3.5 w-3.5"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Recruiter:"," ",n.jsx("span",{className:"font-semibold text-gray-900",children:j.recruiter_name||j.recruiter_email||"Unknown recruiter"})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${mEe(j.status)}`,children:fEe(j.status)||"Pending"}),j.meeting_link?n.jsx("a",{href:j.meeting_link,target:"_blank",rel:"noreferrer",className:"px-3 py-1 text-sm rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Join Meet"}):null,p(j.status)?n.jsxs("button",{type:"button",onClick:()=>h(j.interview_id),disabled:l===j.interview_id,className:"inline-flex items-center gap-1 px-3 py-1 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:[n.jsx(Oi,{className:"h-4 w-4"}),l===j.interview_id?"Marking...":"Mark Completed"]}):null]})]},j.interview_id))})]},v))]})}const pEe=new Set(["",null,void 0]),_s=(...e)=>{for(const t of e)if(!pEe.has(t))return t;return""},f4=e=>String(e||"").toLowerCase().replace(/\s+/g,"_"),xEe=e=>{switch(f4(e)){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"no_show":return"No Show";case"cancelled":return"Cancelled";default:return e||"Unknown"}},gEe=e=>{const t=f4(e);return t==="completed"?"bg-green-100 text-green-800":t==="scheduled"?"bg-yellow-100 text-yellow-800":t==="no_show"?"bg-red-100 text-red-800":t==="in_progress"?"bg-blue-100 text-blue-800":t==="cancelled"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-700"},R_=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},yEe=(e,t)=>{if(!e||!t)return"--";const r=new Date(e),s=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(s.getTime()))return"--";const a=Math.max(0,s.getTime()-r.getTime()),i=Math.floor(a/6e4),l=Math.floor(i/60),o=i%60;return l>0?`${l}h ${o}m`:`${o}m`},vEe=e=>{var r,s,a,i;if(Array.isArray(e))return e;const t=[e==null?void 0:e.interview_logs,e==null?void 0:e.results,e==null?void 0:e.interviews,e==null?void 0:e.items,(r=e==null?void 0:e.data)==null?void 0:r.interview_logs,(s=e==null?void 0:e.data)==null?void 0:s.results,(a=e==null?void 0:e.data)==null?void 0:a.interviews,(i=e==null?void 0:e.data)==null?void 0:i.items,e==null?void 0:e.data];for(const l of t)if(Array.isArray(l))return l;return[]},bEe=(e={})=>{var i,l,o,c,d,u,m,f,y,x,p,h;const t=_s(e.interview_id,e.id,e.uuid),r=e.candidate||((i=e.submission)==null?void 0:i.candidate)||{},s=e.job||((l=e.submission)==null?void 0:l.job)||{},a=e.recruiter||((o=e.submission)==null?void 0:o.recruiter)||{};return{id:t,interview_id:t,mode:_s(e.interview_mode,e.mode,e.interview_type,e.type,"interview"),status:_s(e.status,e.stage,e.interview_status,"scheduled"),scheduled_at:_s(e.scheduled_at,e.scheduledAt,e.start_at,e.start_time,e.interview_datetime,e.interview_date),started_at:_s(e.started_at,e.start_at,e.startedAt),completed_at:_s(e.completed_at,e.end_at,e.completedAt),overall_ai_score:_s(e.overall_ai_score,e.overall_score,null),candidate:{id:_s(e.candidate_id,r.id,(c=e.candidate)==null?void 0:c.candidate_id),full_name:_s(e.candidate_name,r.full_name,r.name,(u=(d=e.submission)==null?void 0:d.candidate)==null?void 0:u.full_name),email:_s(e.candidate_email,r.email,(f=(m=e.submission)==null?void 0:m.candidate)==null?void 0:f.email)},job:{id:_s(e.job_id,s.id,(y=e.submission)==null?void 0:y.job_id),title:_s(e.job_title,s.title,(p=(x=e.submission)==null?void 0:x.job)==null?void 0:p.title,e.requirement_title),company_name:_s(e.company_name,s.company_name),location:_s(e.job_location,s.location)},recruiter:{id:_s(e.recruiter_id,a.id,(h=e.submission)==null?void 0:h.recruiter_id),full_name:_s(e.recruiter_name,a.full_name,a.name,e.scheduled_by_name),email:_s(e.recruiter_email,a.email,e.scheduled_by_email)}}},jEe=[{endpoint:"/v1/am/interview-logs"}];function _Ee(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(""),[l,o]=g.useState("all"),[c,d]=g.useState("all"),[u,m]=g.useState(""),[f,y]=g.useState("");g.useEffect(()=>{x()},[]);const x=async()=>{var v;try{s(!0),i("");const b=new Map;let j=0;for(const{endpoint:w,params:k}of jEe)try{const S=k&&Object.keys(k).length>0?{params:k}:void 0,E=await q.get(w,S);j+=1,vEe(E==null?void 0:E.data).map(T=>bEe(T)).forEach(T=>{if(!T.id)return;const A=String(T.id),C=b.get(A);b.set(A,C?{...C,...T}:T)})}catch(S){const E=(v=S==null?void 0:S.response)==null?void 0:v.status;if([401,403,404,405,422].includes(E))continue;console.warn(`Failed to load AM interview data from ${w}:`,S)}if(j===0)throw new Error("No interview endpoints reachable");const _=Array.from(b.values()).sort((w,k)=>{const S=new Date(w.scheduled_at||0).getTime();return new Date(k.scheduled_at||0).getTime()-S}),N=await Promise.all(_.map(async w=>{try{const k=await q.get(`/v1/interviews/${w.id}/logs`),S=Array.isArray(k==null?void 0:k.data)?k.data:[];return{interview:w,actions:S}}catch{return{interview:w,actions:[]}}}));t(N)}catch(b){console.error("Failed to load interview logs",b),i("Failed to load interview logs."),t([])}finally{s(!1)}},p=g.useMemo(()=>{const v=new Set;return e.forEach(b=>{var j,_;(_=(j=b.interview)==null?void 0:j.job)!=null&&_.title&&v.add(b.interview.job.title)}),Array.from(v)},[e]),h=g.useMemo(()=>e.filter(v=>{var _;const b=v.interview||{},j=f4(b.status||"scheduled");if(l!=="all"&&j!==l||c!=="all"&&((_=b.job)==null?void 0:_.title)!==c)return!1;if(u){const N=new Date(`${u}T00:00:00`);if(new Date(b.scheduled_at)<N)return!1}if(f){const N=new Date(`${f}T23:59:59`);if(new Date(b.scheduled_at)>N)return!1}return!0}),[e,l,c,u,f]);return r?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading interview logs..."}):n.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Interview Logs"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track scheduled, completed, and no-show interview activity."})]}),n.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg border text-sm font-semibold text-gray-700 bg-white",children:"Refresh"})]}),a&&n.jsx("div",{className:"text-red-600 mb-4",children:a}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:v=>o(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All statuses"}),n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"in_progress",children:"In progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"no_show",children:"No Show"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Job Role"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All roles"}),p.map(v=>n.jsx("option",{value:v,children:v},v))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"From"}),n.jsx("input",{type:"date",value:u,onChange:v=>m(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"To"}),n.jsx("input",{type:"date",value:f,onChange:v=>y(v.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})}),h.length===0?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"No interview activity yet."}):n.jsx("div",{className:"space-y-4",children:h.map(v=>{const b=v.interview||{},j=b.candidate||{},_=b.job||{},N=b.recruiter||{},w=v.actions||[],k=w.find(A=>A.action==="joined"),S=w.find(A=>A.action==="completed"),E=(k==null?void 0:k.timestamp)||b.started_at,T=b.completed_at||(S==null?void 0:S.timestamp);return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:j.full_name||"Candidate"}),n.jsx("p",{className:"text-gray-600",children:_.title||"Job Role"}),n.jsx("p",{className:"text-sm text-gray-500",children:(b.mode||"interview").split("_").map(A=>A?A[0].toUpperCase()+A.slice(1):"").join(" ")}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Recruiter: ",N.full_name||N.email||"--"]})]}),n.jsxs("div",{className:"text-left md:text-right",children:[n.jsx("span",{className:`inline-block mb-2 px-3 py-1 rounded text-sm ${gEe(b.status||"scheduled")}`,children:xEe(b.status||"scheduled")}),n.jsxs("p",{className:"font-semibold text-gray-800",children:["Score: ",b.overall_ai_score??"--"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-700 border-t pt-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Scheduled"}),n.jsx("p",{className:"font-semibold",children:R_(b.scheduled_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Started"}),n.jsx("p",{className:"font-semibold",children:R_(E)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),n.jsx("p",{className:"font-semibold",children:R_(T)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Duration"}),n.jsx("p",{className:"font-semibold",children:yEe(E,T)})]})]})]},b.id)})})]})}const Gs=(e,t={})=>{if(e==null||e==="")return"";const r=String(e),s=r.toLowerCase();if(t[s])return t[s];const a=r.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").trim();if(!a)return"";const i=new Set(["am","hr","ai","qa","ui","ux","id"]),l=new Set(["to","and","or","of","in","on","for","by"]);return a.toLowerCase().split(/\s+/).map((o,c)=>i.has(o)?o.toUpperCase():c>0&&l.has(o)?o:o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},wEe=new Set(["all","applied","sent_to_client","hired","direct_hire","rejected"]),L_=e=>{const t=String(e||"").trim().toLowerCase();return wEe.has(t)?t:"all"};function NEe(){const[e,t]=Os(),[r,s]=g.useState(!0),[a,i]=g.useState([]),[l,o]=g.useState(L_(e.get("status"))),c=async()=>{try{s(!0);const p=await q.get("/v1/am/submissions");i(p.data.submissions||[])}catch(p){console.error("Failed to load submissions:",p),alert("Failed to fetch submissions")}finally{s(!1)}};g.useEffect(()=>{c()},[]),g.useEffect(()=>{o(L_(e.get("status")))},[e]);const d=p=>{const h=L_(p);o(h);const v=new URLSearchParams(e);h==="all"?v.delete("status"):v.set("status",h),t(v,{replace:!0})},u=()=>l==="all"?a:a.filter(p=>{var h;return((h=p.status)==null?void 0:h.toString().toLowerCase())===l}),m=async p=>{var h,v,b;if(window.confirm("Send this candidate to client?"))try{await q.post("/v1/am/send-to-client",{job_id:(h=a.find(j=>j.application_id===p))==null?void 0:h.job_id,application_ids:[p]}),alert("Candidate sent to client successfully"),c()}catch(j){alert("Failed to send to client: "+((b=(v=j.response)==null?void 0:v.data)==null?void 0:b.detail))}};if(r)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-center text-gray-500",children:"Loading submissions..."})});const f=p=>a.filter(h=>{var v;return((v=h.status)==null?void 0:v.toString().toLowerCase())===p}).length,y=u(),x=[{key:"all",label:`All (${a.length})`},{key:"applied",label:`Pending (${f("applied")})`},{key:"sent_to_client",label:`Sent to Client (${f("sent_to_client")})`},{key:"hired",label:`Hired (${f("hired")})`},{key:"direct_hire",label:`Direct Hire (${f("direct_hire")})`},{key:"rejected",label:`Rejected (${f("rejected")})`}];return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recruiter Submissions"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and manage candidate submissions from recruiters"})]}),n.jsx("div",{className:"flex gap-2 border-b",children:x.map(p=>n.jsx("button",{onClick:()=>d(p.key),className:`px-4 py-2 font-medium text-sm ${l===p.key?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:p.label},p.key))}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:y.length===0?n.jsxs("div",{className:"p-12 text-center text-gray-500",children:[n.jsx("p",{className:"text-lg font-medium",children:"No submissions found"}),n.jsx("p",{className:"text-sm mt-2",children:"Submissions from recruiters will appear here"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Candidate"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Job"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Match"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Submitted"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:y.map(p=>{const h=p.status?p.status.toString().toLowerCase():"";return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:p.candidate_name}),n.jsx("p",{className:"text-sm text-gray-500",children:p.email})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:p.job_title}),n.jsx("td",{className:"px-6 py-4",children:n.jsx(kEe,{status:p.status})}),n.jsx("td",{className:"px-6 py-4",children:p.match_score?n.jsx("div",{className:"w-12 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-600",style:{width:`${Math.min(p.match_score,100)}%`}})}):n.jsx("span",{className:"text-sm text-gray-500",children:""})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:p.submitted_at?new Date(p.submitted_at).toLocaleDateString():""}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[h==="applied"&&n.jsx("button",{onClick:()=>m(p.application_id),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",title:"Send to Client",children:n.jsx(Ri,{className:"w-4 h-4 inline"})}),h==="sent_to_client"&&n.jsx("span",{className:"text-xs text-gray-500",children:"Waiting for client feedback..."}),h==="hired"&&n.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Hired by client"}),h==="direct_hire"&&n.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Direct hire recorded"}),h==="rejected"&&n.jsx("span",{className:"text-xs text-red-600 font-medium",children:" Rejected"})]})})]},p.application_id)})})]})})})]})}function kEe({status:e}){const t=(e==null?void 0:e.toString().toLowerCase())||"",r={applied:{label:"Pending",className:"bg-yellow-100 text-yellow-800"},sent_to_client:{label:"Sent to Client",className:"bg-blue-100 text-blue-800"},hired:{label:"Hired",className:"bg-green-100 text-green-800"},rejected:{label:"Rejected",className:"bg-red-100 text-red-800"},selected:{label:"Selected",className:"bg-indigo-100 text-indigo-800"},scheduled:{label:"Scheduled",className:"bg-cyan-100 text-cyan-800"},in_progress:{label:"In Progress",className:"bg-cyan-100 text-cyan-800"},direct_hire:{label:"Direct Hire",className:"bg-purple-100 text-purple-800"}},s=Gs(e),a=r[t]||{label:s===""?"Pending":s,className:"bg-gray-100 text-gray-800"};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.className}`,children:a.label})}function SEe(){const[e,t]=g.useState(!0),[r,s]=g.useState([]),[a,i]=g.useState(null),[l,o]=g.useState({}),c=async()=>{try{const m=await q.get("/v1/am/pending-timesheets");s(m.data.pending_timesheets||[])}catch(m){console.error("Failed to load timesheets:",m),alert("Failed to fetch timesheets")}finally{t(!1)}};g.useEffect(()=>{c()},[]);const d=async m=>{var f,y;if(window.confirm("Approve this timesheet?"))try{await q.post(`/v1/am/timesheets/${m}/approve`),alert("Timesheet approved successfully"),c()}catch(x){alert("Failed to approve: "+((y=(f=x.response)==null?void 0:f.data)==null?void 0:y.detail))}},u=async m=>{var y,x;const f=window.prompt("Enter rejection reason:",l[m]||"");if(f!==null)try{await q.post(`/v1/am/timesheets/${m}/reject?reason=${encodeURIComponent(f)}`),alert("Timesheet rejected"),c()}catch(p){alert("Failed to reject: "+((x=(y=p.response)==null?void 0:y.data)==null?void 0:x.detail))}};return e?n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-center text-gray-500",children:"Loading timesheets..."})}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Timesheet Approvals"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and approve consultant timesheets"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-blue-900",children:[n.jsx("span",{className:"font-semibold",children:r.length})," timesheet",r.length!==1?"s":""," pending approval"]})}),n.jsx("div",{className:"space-y-4",children:r.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:[n.jsx(pn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:"No pending timesheets"}),n.jsx("p",{className:"text-sm mt-2",children:"All timesheets have been approved or are waiting for submission"})]}):r.map(m=>n.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition",children:[n.jsxs("button",{onClick:()=>i(a===m.timesheet_id?null:m.timesheet_id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50",children:[n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:m.consultant_name||""}),n.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(si,{className:"w-4 h-4"}),n.jsxs("span",{children:[m.period_type==="weekly"?"Weekly":"Monthly"," "," ",new Date(m.period_start).toLocaleDateString()," to"," ",new Date(m.period_end).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsxs("span",{children:[m.total_hours," hours"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Submitted"}),n.jsx("p",{className:"text-sm font-medium",children:m.submitted_at?new Date(m.submitted_at).toLocaleDateString():""})]}),n.jsx("div",{className:`transform transition ${a===m.timesheet_id?"rotate-180":""}`,children:n.jsx("span",{className:"text-gray-400",children:""})})]})]}),a===m.timesheet_id&&n.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Hours"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.total_hours})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Period Type"}),n.jsx("p",{className:"text-lg font-medium text-gray-900",children:m.period_type==="weekly"?"Weekly":"Monthly"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{onClick:()=>d(m.timesheet_id),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[n.jsx(Oi,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>u(m.timesheet_id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center justify-center gap-2",children:[n.jsx(ti,{className:"w-4 h-4"}),"Reject"]})]})]})]},m.timesheet_id))})]})}const I_=e=>e?{...e,full_name:e.full_name||e.name||""}:null;function CEe(){const[e,t]=g.useState(null),[r,s]=g.useState({full_name:"",company_name:""}),[a,i]=g.useState(!0),[l,o]=g.useState(!1),[c,d]=g.useState(!1),[u,m]=g.useState(""),f=async()=>{try{i(!0),m("");const p=await q.get("/auth/me"),h=I_(p.data||null);t(h),s({full_name:(h==null?void 0:h.full_name)||"",company_name:(h==null?void 0:h.company_name)||""})}catch{const h=localStorage.getItem("user");if(h){const v=I_(JSON.parse(h));t(v),s({full_name:(v==null?void 0:v.full_name)||"",company_name:(v==null?void 0:v.company_name)||""})}else m("Unable to load profile")}finally{i(!1)}};g.useEffect(()=>{f()},[]);const y=async()=>{var b,j;const p=Kt(r.full_name),h=Kt(r.company_name),v=Ml(p,"Full name",{pattern:/^[A-Za-z][A-Za-z .'-]{1,79}$/,patternMessage:"Full name can only contain letters, spaces, apostrophes, periods, and hyphens."});if(v){m(v);return}if(h&&h.length<2){m("Company name must be at least 2 characters.");return}try{o(!0),m("");const _=await q.put("/auth/me",{full_name:p,company_name:h}),N=I_(_.data);t(N),d(!1),localStorage.setItem("user",JSON.stringify(N))}catch(_){m(((j=(b=_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to save profile changes")}finally{o(!1)}};if(a)return n.jsx("div",{className:"p-6 text-gray-500",children:"Loading profile..."});if(!e)return n.jsx("div",{className:"p-6 text-red-600",children:u||"Profile not found"});const x=(e.full_name||e.username||"AM").split(" ").map(p=>p[0]).join("").slice(0,2).toUpperCase();return n.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-purple-600 text-white flex items-center justify-center text-2xl font-bold",children:x}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.full_name||e.username||"Account Manager"}),n.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]}),n.jsx("button",{onClick:()=>{d(!c),s({full_name:e.full_name||"",company_name:e.company_name||""})},className:"px-4 py-2 text-sm font-semibold rounded-md border border-purple-200 text-purple-700 hover:bg-purple-50",children:c?"Cancel":"Edit Profile"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Details"}),c&&n.jsx("button",{onClick:y,disabled:l,className:`px-4 py-2 rounded-md text-sm font-semibold ${l?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:l?"Saving...":"Save Changes"})]}),u&&n.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700",children:u}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Full Name"}),c?n.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-gray-900",value:r.full_name,onChange:p=>s(h=>({...h,full_name:p.target.value})),onBlur:p=>s(h=>({...h,full_name:Kt(p.target.value)}))}):n.jsx("p",{className:"font-medium text-gray-900",children:e.full_name||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Email"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.email||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Company"}),c?n.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-gray-900",value:r.company_name,onChange:p=>s(h=>({...h,company_name:p.target.value})),onBlur:p=>s(h=>({...h,company_name:Kt(p.target.value)}))}):n.jsx("p",{className:"font-medium text-gray-900",children:e.company_name||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Role"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.role||"account_manager"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Status"}),n.jsx("p",{className:"font-medium text-gray-900",children:e.is_active===!1?"Inactive":"Active"})]})]})]})]})}function AEe(){const[e,t]=g.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[r,s]=g.useState({}),[a,i]=g.useState(!1),[l,o]=g.useState(""),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[f,y]=g.useState(!1),x=Et(),p=()=>{const b={};return e.oldPassword.trim()||(b.oldPassword="Current password is required"),e.newPassword.trim()?e.newPassword.length<8?b.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=])[A-Za-z\d!@#$%^&*()_+\-=]{8,}/.test(e.newPassword)||(b.newPassword="Password must contain uppercase, lowercase, number and special character"):b.newPassword="New password is required",e.confirmPassword.trim()?e.newPassword!==e.confirmPassword&&(b.confirmPassword="Passwords do not match"):b.confirmPassword="Please confirm your new password",s(b),Object.keys(b).length===0},h=async b=>{var j,_,N,w;if(b.preventDefault(),!!p()&&window.confirm("Are you sure you want to change your password? You will be logged out after the change.")){i(!0),o("");try{const k=new FormData;k.append("current_password",e.oldPassword),k.append("new_password",e.newPassword),await q.post("/v1/am/change-password",k),o("Password changed successfully! You will be redirected to login."),setTimeout(()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),x("/login")},2e3)}catch(k){const S=((_=(j=k.response)==null?void 0:j.data)==null?void 0:_.detail)||((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.message)||"Failed to change password";o(S)}finally{i(!1)}}},v=(b,j)=>{t(_=>({..._,[b]:j})),r[b]&&s(_=>({..._,[b]:""}))};return n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600",children:"Manage your account security and password"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Change Password"}),n.jsx("p",{className:"text-gray-600",children:"Update your password to keep your account secure"})]}),n.jsxs("form",{onSubmit:h,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:c?"text":"password",value:e.oldPassword,onChange:b=>v("oldPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.oldPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.oldPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:u?"text":"password",value:e.newPassword,onChange:b=>v("newPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.newPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.newPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:f?"text":"password",value:e.confirmPassword,onChange:b=>v("confirmPassword",b.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${r.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.confirmPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Changing Password...":"Change Password"})}),l&&n.jsx("div",{className:`p-4 rounded-lg ${l.includes("successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l})]})]})]})}function Au({label:e,value:t,trend:r,color:s="blue",icon:a}){const i=r>0?"text-green-600":"text-red-600",l=r>0?"":"";return n.jsxs("div",{className:`bg-${s}-50 border-2 border-${s}-200 rounded-lg p-4`,children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-${s}-600 text-xs font-semibold`,children:e}),n.jsx("p",{className:`text-${s}-600 text-3xl font-bold mt-2`,children:t})]}),n.jsx("div",{className:"text-2xl",children:a})]}),r!==void 0&&n.jsxs("p",{className:`text-xs mt-2 ${i}`,children:[l," ",Math.abs(r),"% vs last month"]})]})}function fL({data:e,title:t,type:r="bar"}){const s=Math.max(...e.map(a=>a.value));return n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:t}),n.jsx("div",{className:"space-y-4",children:e.map((a,i)=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.label}),n.jsx("span",{className:"text-sm font-bold text-gray-900",children:a.value})]}),n.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${a.color||"bg-blue-600"}`,style:{width:`${a.value/s*100}%`}})})]},i))})]})}function hL({columns:e,data:t,title:r}){return n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:r})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsx("tr",{children:e.map((s,a)=>n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:s},a))})}),n.jsx("tbody",{children:t.map((s,a)=>n.jsx("tr",{className:"border-b hover:bg-gray-50",children:s.map((i,l)=>n.jsx("td",{className:"px-6 py-3 text-sm text-gray-900",children:i},l))},a))})]})})]})}function EEe(){const[e,t]=g.useState({timeToFill:0,conversionRate:0,jobsOpen:0,candidatesInPipeline:0,offersExtended:0,joiningsCompleted:0,avgTimePerStage:{},recruiterKPIs:[],clientMetrics:[],pipelineData:[]}),[r,s]=g.useState(!0),[a,i]=g.useState("month"),[l,o]=g.useState("view");g.useEffect(()=>{c()},[a]);const c=async()=>{var u;try{s(!0);const m=await q.get("/v1/reports/analytics",{params:{period:a}}),f=((u=m.data)==null?void 0:u.data)||m.data;t({timeToFill:f.time_to_fill||23,conversionRate:f.conversion_rate||8.5,jobsOpen:f.open_positions||12,candidatesInPipeline:f.pipeline_count||156,offersExtended:f.offers_extended||8,joiningsCompleted:f.joinings||3,avgTimePerStage:{sourcing:5,screening:3,interview:7,offer:2},recruiterKPIs:[{name:"John Doe",placements:8,avgTimeToFill:18,activeJobs:5},{name:"Sarah Smith",placements:6,avgTimeToFill:25,activeJobs:3},{name:"Mike Johnson",placements:12,avgTimeToFill:20,activeJobs:7},{name:"Emily Brown",placements:5,avgTimeToFill:28,activeJobs:2}],clientMetrics:[{client:"Tech Corp",submissions:12,accepted:8,rate:67},{client:"Finance Inc",submissions:8,accepted:5,rate:63},{client:"Retail Plus",submissions:15,accepted:9,rate:60},{client:"Health Care",submissions:6,accepted:5,rate:83}],pipelineData:[{label:"Sourced",value:50,color:"bg-blue-600"},{label:"Screening",value:35,color:"bg-yellow-600"},{label:"Interview",value:20,color:"bg-orange-600"},{label:"Offer",value:8,color:"bg-purple-600"},{label:"Joined",value:3,color:"bg-green-600"}]})}catch(m){console.error("Failed to load report data:",m)}finally{s(!1)}},d=async u=>{try{const m=await q.get("/v1/reports/export",{params:{format:u,period:a},responseType:u==="pdf"?"blob":"json"});if(u==="pdf"){const f=window.URL.createObjectURL(new Blob([m.data])),y=document.createElement("a");y.href=f,y.setAttribute("download",`recruitment-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(y),y.click()}else if(u==="excel"){const f=window.URL.createObjectURL(new Blob([m.data])),y=document.createElement("a");y.href=f,y.setAttribute("download",`recruitment-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(y),y.click()}}catch(m){alert("Export failed: "+m.message)}};return r?n.jsx("div",{className:"p-6 text-center",children:"Loading reports..."}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Recruitment metrics and KPI dashboard"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6 flex gap-4 flex-wrap items-center",children:[n.jsxs("select",{value:a,onChange:u=>i(u.target.value),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"week",children:"Last 7 Days"}),n.jsx("option",{value:"month",children:"Last 30 Days"}),n.jsx("option",{value:"quarter",children:"Last 90 Days"}),n.jsx("option",{value:"year",children:"Last Year"})]}),n.jsxs("div",{className:"flex gap-2 ml-auto",children:[n.jsx("button",{onClick:()=>d("pdf"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-medium",title:"Export as PDF",children:" PDF"}),n.jsx("button",{onClick:()=>d("excel"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm font-medium",title:"Export as Excel",children:" Excel"}),n.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium",title:"Print",children:" Print"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[n.jsx(Au,{label:"Avg Time to Fill",value:`${e.timeToFill}d`,trend:-5,color:"blue",icon:""}),n.jsx(Au,{label:"Conversion Rate",value:`${e.conversionRate}%`,trend:2,color:"green",icon:""}),n.jsx(Au,{label:"Open Positions",value:e.jobsOpen,trend:3,color:"yellow",icon:""}),n.jsx(Au,{label:"Pipeline",value:e.candidatesInPipeline,trend:-8,color:"purple",icon:""}),n.jsx(Au,{label:"Offers",value:e.offersExtended,trend:1,color:"orange",icon:""}),n.jsx(Au,{label:"Joinings",value:e.joiningsCompleted,trend:5,color:"red",icon:""})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsx(fL,{title:"Pipeline Overview",data:e.pipelineData}),n.jsx(fL,{title:"Time per Stage",data:Object.entries(e.avgTimePerStage).map(([u,m])=>({label:u.charAt(0).toUpperCase()+u.slice(1),value:m,color:"bg-indigo-600"}))})]}),n.jsx(hL,{title:"Recruiter Performance KPIs",columns:["Recruiter","Total Placements","Avg Time to Fill","Active Jobs"],data:e.recruiterKPIs.map(u=>[u.name,u.placements.toString(),`${u.avgTimeToFill} days`,u.activeJobs.toString()])}),n.jsx("div",{className:"mt-6",children:n.jsx(hL,{title:"Client Submission Metrics",columns:["Client Name","Total Submissions","Accepted","Acceptance Rate"],data:e.clientMetrics.map(u=>[u.client,u.submissions.toString(),u.accepted.toString(),`${u.rate}%`])})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Key Insights"}),n.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[n.jsx("li",{children:" Average time-to-fill decreased by 5% this period"}),n.jsx("li",{children:" Mike Johnson leads with 12 placements"}),n.jsx("li",{children:" Tech Corp maintains highest volume (12 submissions)"}),n.jsx("li",{children:" Health Care has best acceptance rate (83%)"}),n.jsx("li",{children:" Interview stage is longest (7 days average)"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg border border-green-200",children:[n.jsx("h3",{className:"text-lg font-bold text-green-900 mb-3",children:"Recommendations"}),n.jsxs("ul",{className:"space-y-2 text-sm text-green-800",children:[n.jsx("li",{children:" Optimize screening process to reduce screening stage time"}),n.jsx("li",{children:" Increase submissions to Finance Inc (low volume)"}),n.jsx("li",{children:" Share best practices from Mike Johnson's pipeline"}),n.jsx("li",{children:" Expand relationship with Health Care (high success)"}),n.jsx("li",{children:" Consider hiring additional screeners"})]})]})]}),n.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg text-center text-sm text-gray-600",children:n.jsxs("p",{children:["Report generated on ",new Date().toLocaleDateString(),"  Last updated"," ",new Date().toLocaleTimeString()]})})]})}function TEe(){const e=Et(),[t,r]=g.useState({title:"",description:"",skills:"",min_experience:0,max_experience:0,location:"",department:"",company_name:"",status:"open",sla_days:7,recruiters:[]}),[s,a]=g.useState(null),[i,l]=g.useState([]),[o,c]=g.useState(!1),[d,u]=g.useState("");g.useEffect(()=>{let p=!0;return q.get("/v1/users?role=recruiter").then(h=>{p&&l(h.data||[])}).catch(()=>{}),()=>{p=!1}},[]);const m=p=>h=>{const v=h.target.type==="number"?Number(h.target.value):h.target.value;r(b=>({...b,[p]:v}))},f=p=>{const h=[...p.target.selectedOptions].map(v=>v.value);r(v=>({...v,recruiters:h}))},y=p=>{var h;a(((h=p.target.files)==null?void 0:h[0])??null)},x=async p=>{var h,v,b,j,_,N,w;p.preventDefault(),c(!0),u("");try{const k={title:t.title,description:t.description,skills:t.skills.split(",").map(T=>T.trim()).filter(Boolean),min_experience:t.min_experience,max_experience:t.max_experience,location:t.location,department:t.department,company_name:t.company_name,status:t.status,sla_days:t.sla_days},S=await nte(k),E=((h=S.data)==null?void 0:h.id)||((v=S.data)==null?void 0:v.public_id)||((b=S.data)==null?void 0:b.job_id)||((j=S.data)==null?void 0:j.uuid);if(s&&E){const T=new FormData;T.append("file",s),await W7(E,T)}(_=t.recruiters)!=null&&_.length&&E&&await V7(E,t.recruiters),e(E?`/recruitment/jobs/${E}`:"/recruitment/jobs")}catch(k){console.error(k),u(((w=(N=k==null?void 0:k.response)==null?void 0:N.data)==null?void 0:w.message)||(k==null?void 0:k.message)||"Failed to create job. Check console for details.")}finally{c(!1)}};return n.jsxs("div",{className:"page-container",children:[n.jsx("h1",{children:"Create Job"}),n.jsxs("form",{onSubmit:x,className:"job-form",children:[n.jsxs("label",{children:["Title",n.jsx("input",{value:t.title,onChange:m("title"),required:!0})]}),n.jsxs("label",{children:["Description",n.jsx("textarea",{value:t.description,onChange:m("description"),required:!0})]}),n.jsxs("label",{children:["Skills (comma separated)",n.jsx("input",{value:t.skills,onChange:m("skills")})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsxs("label",{children:["Min Exp (yrs)",n.jsx("input",{type:"number",min:0,value:t.min_experience,onChange:m("min_experience")})]}),n.jsxs("label",{children:["Max Exp (yrs)",n.jsx("input",{type:"number",min:0,value:t.max_experience,onChange:m("max_experience")})]})]}),n.jsxs("label",{children:["Location",n.jsx("input",{value:t.location,onChange:m("location")})]}),n.jsxs("label",{children:["Department",n.jsx("input",{value:t.department,onChange:m("department")})]}),n.jsxs("label",{children:["Company Name",n.jsx("input",{value:t.company_name,onChange:m("company_name")})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:m("status"),children:[n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"draft",children:"Draft"})]})]}),n.jsxs("label",{children:["SLA (days)",n.jsx("input",{type:"number",min:0,value:t.sla_days,onChange:m("sla_days")})]}),n.jsxs("label",{children:["Assign Recruiters (multi)",n.jsx("select",{multiple:!0,value:t.recruiters,onChange:f,children:i.map(p=>n.jsx("option",{value:p.id||p.user_id,children:p.name||p.full_name||p.email},p.id||p.user_id))})]}),n.jsxs("label",{children:["Upload JD (optional)",n.jsx("input",{type:"file",onChange:y,accept:".pdf,.doc,.docx"})]}),d&&n.jsx("div",{className:"error",children:d}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("button",{type:"submit",disabled:o,children:o?"Creating...":"Create Job"}),n.jsx("button",{type:"button",onClick:()=>e("/recruitment/jobs"),style:{marginLeft:8},disabled:o,children:"Cancel"})]})]})]})}function PEe({value:e,onFile:t}){return n.jsxs("div",{children:[n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:r=>{var s;return t(((s=r.target.files)==null?void 0:s[0])??null)}}),e&&typeof e=="string"&&n.jsx("div",{style:{marginTop:8},children:n.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:"View uploaded JD"})}),e&&e.name&&n.jsx("div",{style:{marginTop:8},children:e.name})]})}function OEe(){var y;const{id:e}=Rr(),t=Et(),[r,s]=g.useState(!0),[a,i]=g.useState(!1),[l,o]=g.useState(null),[c,d]=g.useState(null);if(g.useEffect(()=>{let x=!0;return YS(e).then(p=>{var v;if(!x)return;const h=p.data??((v=p.data)==null?void 0:v.data)??null;o(h)}).catch(console.error).finally(()=>x&&s(!1)),()=>x=!1},[e]),r)return n.jsx("div",{className:"p-6",children:"Loading..."});if(!l)return n.jsx("div",{className:"p-6 text-red-600",children:"Job not found"});const[u,m]=g.useState({title:l.title||"",description:l.description||"",department:l.department||"",location:l.location||"",min_experience:l.min_experience??"",max_experience:l.max_experience??"",status:l.status||"draft",recruiters:((y=l.recruiters)==null?void 0:y.map(x=>x.id||x))||[],sla_days:l.sla_days??7}),f=async x=>{var p,h,v;x.preventDefault(),i(!0);try{if(await ste(e,{title:u.title,description:u.description,department:u.department,location:u.location,min_experience:u.min_experience===""?null:Number(u.min_experience),max_experience:u.max_experience===""?null:Number(u.max_experience),status:u.status,sla_days:u.sla_days}),c){const b=new FormData;b.append("file",c),await W7(e,b)}(p=u.recruiters)!=null&&p.length&&await V7(e,u.recruiters),t(`/recruitment/jobs/${e}`)}catch(b){console.error(b),alert(((v=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:v.detail)||"Failed to update")}finally{i(!1)}};return n.jsxs("div",{className:"page-container",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Job"}),n.jsxs("form",{onSubmit:f,className:"bg-white p-6 rounded shadow space-y-4",children:[n.jsx("input",{className:"w-full p-2 border rounded",value:u.title,onChange:x=>m({...u,title:x.target.value}),required:!0}),n.jsx("textarea",{className:"w-full p-3 border rounded",rows:6,value:u.description,onChange:x=>m({...u,description:x.target.value})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("input",{className:"p-2 border rounded",value:u.department,onChange:x=>m({...u,department:x.target.value})}),n.jsx("input",{className:"p-2 border rounded",value:u.location,onChange:x=>m({...u,location:x.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("input",{type:"number",className:"p-2 border rounded",value:u.min_experience,onChange:x=>m({...u,min_experience:x.target.value})}),n.jsx("input",{type:"number",className:"p-2 border rounded",value:u.max_experience,onChange:x=>m({...u,max_experience:x.target.value})}),n.jsxs("select",{value:u.status,onChange:x=>m({...u,status:x.target.value}),className:"p-2 border rounded",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"closed",children:"Closed"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(RecruiterAssign,{value:u.recruiters,onChange:x=>m({...u,recruiters:x})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Upload JD"}),n.jsx(PEe,{value:l.jd_url||null,onFile:x=>d(x)})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded",children:a?"Saving...":"Save"}),n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border rounded",children:"Cancel"})]})]})]})}function REe({candidate:e}){return(Tl()||{}).role,n.jsxs("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:e.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:e.email})]}),n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-600",children:e.status||"Applied"})]})}function LEe(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState([]),[a,i]=g.useState(null),[l,o]=g.useState(!0),[c,d]=g.useState(!1),[u,m]=g.useState(""),[f,y]=g.useState(null);g.useEffect(()=>{let h=!0;return o(!0),YS(e).then(v=>{var j;if(!h)return;const b=((j=v.data)==null?void 0:j.data)??v.data??null;i(b)}).catch(()=>{}).finally(()=>h&&o(!1)),()=>h=!1},[e]);const x=async()=>{d(!0),m("");try{const v=(await ote(e)).data??[];s(Array.isArray(v)?v:[])}catch(h){console.error(h),m("Failed to run matching")}finally{d(!1)}};g.useEffect(()=>{x()},[e]);const p=async h=>{var b,j;const v=h.candidate_id??h.id;if(!v){alert("Candidate id not available");return}if(confirm(`Promote ${h.full_name||"candidate"} to submission for this job?`)){y(v);try{await lte(e,v),alert("Candidate promoted to submission. Check Submissions page.")}catch(_){console.error(_),alert(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to promote candidate")}finally{y(null)}}};return n.jsxs("div",{className:"page-container",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h2",{children:["Matches for Job ",(a==null?void 0:a.title)??e]}),n.jsxs("div",{children:[n.jsx("button",{onClick:()=>t(`/recruitment/jobs/${e}`),children:"Back to Job"}),n.jsx("button",{onClick:x,disabled:c,style:{marginLeft:8},children:c?"Running...":"Run Match"})]})]}),u&&n.jsx("div",{className:"error",children:u}),n.jsx("div",{style:{marginTop:12},children:r.length===0?n.jsx("div",{children:"No matches returned yet."}):n.jsx("div",{style:{display:"grid",gap:12},children:r.map(h=>{const v=h.candidate_id??h.public_id??h.id;return n.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[n.jsx(REe,{candidate:{id:v,public_id:h.public_id,full_name:h.full_name,email:h.email,phone:h.phone}}),n.jsxs("div",{style:{minWidth:180},children:[n.jsxs("div",{children:["Fit score: ",typeof h.fit_score=="number"?h.fit_score.toFixed(2):h.fit_score]}),h.resume_url&&n.jsx("div",{style:{marginTop:8},children:n.jsx("a",{href:h.resume_url,target:"_blank",rel:"noreferrer",children:"View Resume"})}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("button",{onClick:()=>p(h),disabled:f===v,children:f===v?"Promoting...":"Promote to Submission"}),n.jsx("button",{onClick:()=>{window.open(`/candidates/${v}`,"_blank")},style:{marginLeft:8},children:"View Profile"})]})]})]},v)})})})]})}function F_(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(""),[c,d]=g.useState(null),[u,m]=g.useState({}),[f,y]=g.useState({}),x=async()=>{var b,j;try{i(!0);let _;e?(console.log("Recruiter Page  Loading ONLY this job:",e),_=await ite(e),s(((b=_.data)==null?void 0:b.candidates)||[])):(console.log("Admin Page  Loading ALL submissions"),_=await ate(),s(((j=_.data)==null?void 0:j.candidates)||[])),o("")}catch(_){console.error(_),o("Could not load applied candidates"),s([])}finally{i(!1)}},p=async b=>{var j,_;if(!u[b]){y(N=>({...N,[b]:!0}));try{let N;try{N=await q.get(`/v1/workflow/candidates/${b}/timeline`)}catch{N=await q.get(`/v1/candidates/${b}/timeline`)}const k=(((j=N.data)==null?void 0:j.timeline)||((_=N.data)==null?void 0:_.data)||N.data||[]||[]).map(S=>({status:S.status||S.event||"updated",by:S.by||S.actor||S.user||"",at:S.at||S.timestamp||S.created_at||S.createdAt||"",note:S.note||S.message||"",role:S.role||S.actor_role||"",...S}));m(S=>({...S,[b]:k}))}catch(N){console.error("Failed to load timeline:",N),m(w=>({...w,[b]:[]}))}finally{y(N=>({...N,[b]:!1}))}}},h=b=>{c===b?d(null):(d(b),p(b))};g.useEffect(()=>{x()},[e]);const v=b=>{if(b){if(window.location.pathname.includes("/recruiter/")){t(`/recruiter/candidate-profile/${b}`);return}t(`/candidates/${b}`)}};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Job Submissions":"Applied Candidates"}),n.jsx("p",{className:"text-sm text-gray-500",children:e?"Candidates submitted for this requirement with workflow timeline":"All candidates who have applied to jobs"})]}),a&&n.jsx("div",{className:"bg-white p-6 rounded shadow text-center",children:"Loading applied candidates..."}),!a&&l&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded",children:l}),!a&&r.length===0&&n.jsx("div",{className:"bg-purple-50 border border-purple-100 text-purple-700 p-6 rounded text-center",children:"No candidates have applied yet."}),!a&&r.length>0&&n.jsx("div",{className:"bg-white rounded shadow overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-purple-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"S. No."}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Candidate"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e&&n.jsx("th",{className:"px-4 py-3 text-left",children:"Sent to AM Date"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Timeline"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:r.map((b,j)=>{const _=b.candidate_id||b.id,N=_||b.public_id||`${b.application_id}-${j}`,w=c===N,k=u[N]||[],S=f[N];return n.jsxs(Ce.Fragment,{children:[n.jsxs("tr",{className:w?"bg-purple-50":"",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:j+1}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"font-medium",children:b.full_name||"Unnamed"}),n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",b.public_id||b.candidate_id]})]}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{children:b.email||""}),n.jsx("div",{className:"text-xs text-gray-500",children:b.phone||""})]}),n.jsx("td",{className:"px-4 py-3",children:(()=>{const E=b.status||"applied",T=C=>{switch(C.toLowerCase()){case"applied":return"bg-blue-100 text-blue-800";case"sent_to_client":return"bg-purple-100 text-purple-800";case"called":return"bg-indigo-100 text-indigo-800";case"feedback_added":return"bg-violet-100 text-violet-800";case"hold_revisit":case"client_hold":return"bg-amber-100 text-amber-800";case"interview":return"bg-orange-100 text-orange-800";case"rejected":return"bg-red-100 text-red-800";case"rejected_by_recruiter":case"am_rejected":case"client_rejected":return"bg-rose-100 text-rose-800";case"selected":case"hired":return"bg-green-100 text-green-800";case"on_hold":case"pending":return"bg-yellow-100 text-yellow-800";case"withdrawn":return"bg-gray-100 text-gray-800";case"client_shortlisted":return"bg-emerald-100 text-emerald-800";case"am_shortlisted":return"bg-teal-100 text-teal-800";case"am_hold":return"bg-yellow-100 text-yellow-800";case"sent_to_am":return"bg-indigo-100 text-indigo-800";case"am_viewed":return"bg-cyan-100 text-cyan-800";default:return"bg-indigo-100 text-indigo-800"}},A=C=>C.split("_").map(P=>P.charAt(0).toUpperCase()+P.slice(1)).join(" ");return n.jsx("span",{className:`px-3 py-1 rounded text-xs font-medium ${T(E)}`,children:A(E)})})()}),e&&n.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.sent_to_am_at||b.sent_to_client_at||b.applied_at?(()=>{const E=b.sent_to_am_at||b.sent_to_client_at||b.applied_at,T=new Date(E),A=T.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),C=T.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${A} | ${C}`})():""}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("button",{onClick:()=>h(N),disabled:!_,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 rounded transition-colors",children:[n.jsx(pn,{className:"w-3 h-3"}),w?"Hide":"View"," Timeline",w?n.jsx(z1,{className:"w-3 h-3"}):n.jsx(fo,{className:"w-3 h-3"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>v(_),disabled:!_,className:"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 rounded transition-colors disabled:opacity-60",children:"View Profile"})})]}),w&&n.jsx("tr",{className:"bg-purple-50/50",children:n.jsx("td",{colSpan:e?7:6,className:"px-4 py-4",children:n.jsxs("div",{className:"bg-white rounded-lg border border-purple-200 p-4",children:[n.jsxs("h4",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[n.jsx(pn,{className:"w-4 h-4"}),"Activity Timeline - All Status Updates"]}),S?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-2"}),"Loading timeline..."]}):k.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(cn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No timeline events recorded yet."]}):n.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[...k].sort((E,T)=>new Date(T.at)-new Date(E.at)).map((E,T)=>{var A,C,P,O,R,F,Q,W,L,I,K,D;return n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-shrink-0",children:[n.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${(C=(A=E.role)==null?void 0:A.toLowerCase())!=null&&C.includes("am")||(O=(P=E.role)==null?void 0:P.toLowerCase())!=null&&O.includes("account")?"bg-orange-500":(F=(R=E.role)==null?void 0:R.toLowerCase())!=null&&F.includes("recruiter")?"bg-blue-500":"bg-purple-500"}`}),T<k.length-1&&n.jsx("div",{className:"w-px h-8 bg-gray-200 mx-auto mt-1"})]}),n.jsxs("div",{className:"flex-1 pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-semibold capitalize text-gray-900",children:(E.status||"Updated").replace(/_/g," ")}),n.jsxs("div",{className:"flex items-center gap-2",children:[E.role&&n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${(W=(Q=E.role)==null?void 0:Q.toLowerCase())!=null&&W.includes("am")||(I=(L=E.role)==null?void 0:L.toLowerCase())!=null&&I.includes("account")?"bg-orange-100 text-orange-700":(D=(K=E.role)==null?void 0:K.toLowerCase())!=null&&D.includes("recruiter")?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:E.role}),E.by&&n.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[n.jsx(Ao,{className:"w-3 h-3"}),E.by]})]})]}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:E.at?new Date(E.at).toLocaleString():""}),E.note&&n.jsx("div",{className:"mt-1 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:E.note})]})]},T)})})]})})})]},b.application_id||`${N}-${j}`)})})]})})]})}function tn(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function IEe(e){if(!e)throw new Error("payload is required");const t=await q.post("/v1/auth/register",e);return tn(t)}async function FEe(e){if(!e)throw new Error("payload is required");const t=await q.post("/v1/candidates",e);return tn(t)}async function KU(e){if(!e)throw new Error("candidate id is required");const t=await q.get(`/v1/candidates/${e}`);return tn(t)}async function DEe(e,t,{onUploadProgress:r}={}){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("file is required");const s=new FormData;s.append("file",t);const a=await q.post(`/v1/candidates/${e}/resume/upload`,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return tn(a)}async function $Ee(e,t,{onUploadProgress:r}={}){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("formData is required");const s=await q.post("/v1/candidates/{candidate_id}/resume/upload",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return tn(s)}async function MEe(e){if(!e)throw new Error("candidateId is required");const t=await q.get(`/v1/candidates/${e}/resume/versions`);return tn(t)}async function BEe(e,t){if(!e)throw new Error("candidateId is required");if(!t)throw new Error("versionId is required");const r=await q.post(`/v1/candidates/${e}/resume/restore/${t}`);return tn(r)}async function UEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=await q.post(`/v1/candidates/${e}/forward`,t);return tn(r)}async function zEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=await q.put(`/v1/candidates/${e}/status`,t);return tn(r)}async function WEe(e){if(!e)throw new Error("candidateId is required");const t=await q.get(`/v1/candidates/${e}/timeline`);return tn(t)}async function VEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=(t==null?void 0:t.note)||(t==null?void 0:t.text)||"";if(!r)throw new Error("note payload is required");const s=await q.post(`/v1/candidates/${e}/notes`,{note:r});return tn(s)}async function HEe(e,t={}){if(!e)throw new Error("candidateId is required");if(!t||!t.mode)throw new Error("payload.mode is required (ai|f2f|online)");const r=await q.post(`/v1/candidates/${e}/screening`,t);return tn(r)}async function qEe(e,t={}){if(!e)throw new Error("candidateId is required");if(!t||!t.classification)throw new Error("payload.classification is required");const r=await q.put(`/v1/candidates/${e}/classification`,t);return tn(r)}async function GEe(e={}){if(!e)throw new Error("payload is required");const t=await q.post("/v1/candidates/email/send",e);return tn(t)}async function JEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=await q.post(`/v1/employees/from-candidate/${e}`,t);return tn(r)}async function KEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=await q.post(`/v1/bgv/${e}/initiate`,t);return tn(r)}async function XEe(e,t={}){if(!e)throw new Error("candidateId is required");const r=await q.post(`/v1/bgv/${e}/assign-vendor`,t);return tn(r)}async function YEe(e){if(!e)throw new Error("candidateId is required");const t=await q.get(`/v1/bgv/${e}/reports`);return tn(t)}async function ZEe(e={}){var s,a,i,l,o,c;const t={...e||{}},r=Number(t.limit);Number.isFinite(r)&&r>200&&(t.limit=200);try{const d=await q.get("/v1/candidates",{params:t});return((s=d.data)==null?void 0:s.data)??d.data}catch(d){if(((a=d==null?void 0:d.response)==null?void 0:a.status)===422&&t.limit!==200){const m=await q.get("/v1/candidates",{params:{...t,limit:200}});return((i=m.data)==null?void 0:i.data)??m.data}if(((l=d==null?void 0:d.response)==null?void 0:l.status)!==403)throw d;const u=[()=>q.get("/workflow/candidates",{params:t}),()=>q.get("/v1/workflow/candidates",{params:t})];for(const m of u)try{const f=await m(),y=((o=f==null?void 0:f.data)==null?void 0:o.data)??(f==null?void 0:f.data)??{};return Array.isArray(y)?y:Array.isArray(y==null?void 0:y.candidates)?y.candidates:Array.isArray(y==null?void 0:y.items)?y.items:[]}catch(f){if(![403,404].includes((c=f==null?void 0:f.response)==null?void 0:c.status))throw f}return[]}}async function XU(e={}){const t=Object.entries(e).reduce((r,[s,a])=>(a!=null&&a!==""&&(r[s]=a),r),{});try{const r=await q.get("/v1/candidates/search",{params:t});return tn(r)}catch(r){throw console.error("Search API error:",r),r}}async function QEe(e,{onUploadProgress:t}={}){if(!e)throw new Error("file is required");const r=new FormData;r.append("file",e);const s=await q.post("/v1/candidates/bulk-upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t});return tn(s)}async function eTe(e=[],{duplicateOption:t="skip",onUploadProgress:r}={}){if(!Array.isArray(e)||e.length===0)throw new Error("files are required");const s=new FormData;e.forEach(i=>s.append("files",i)),s.append("duplicate_option",t);const a=await q.post("/v1/candidates/bulk-resume-upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r});return tn(a)}async function tTe(){const e=await q.get("/v1/candidates/bulk-upload/history");return tn(e)}async function rTe(e=[],{duplicateOption:t="skip"}={}){if(!Array.isArray(e)||e.length===0)throw new Error("files are required");const r=new FormData;e.forEach(a=>r.append("files",a)),r.append("duplicate_option",t);const s=await q.post("/v1/candidates/bulk-resume-upload-async",r,{headers:{"Content-Type":"multipart/form-data"}});return tn(s)}async function nTe(e){if(!e)throw new Error("taskId is required");const t=await q.get(`/v1/candidates/bulk-upload-status/${e}`);return tn(t)}async function sTe(e=[]){if(!Array.isArray(e)||e.length===0)throw new Error("ids are required");const t=await q.post("/v1/candidates/verify-bulk",{ids:e});return tn(t)}async function aTe(e={}){if(!e.candidate_ids||e.candidate_ids.length<2)throw new Error("At least two candidate_ids are required");const t=await q.post("/v1/candidates/merge",e);return tn(t)}const zr={registerUser:IEe,createDirectCandidate:FEe,listCandidates:ZEe,searchCandidates:XU,getCandidateById:KU,uploadResumeForCandidate:DEe,uploadResumeFormData:$Ee,getResumeVersions:MEe,restoreResumeVersion:BEe,forwardProfile:UEe,updateStatus:zEe,getTimeline:WEe,addCandidateNote:VEe,mergeCandidates:aTe,initiateScreening:HEe,classifyCandidate:qEe,sendBulkEmail:GEe,convertToEmployee:JEe,initiateBgvCheck:KEe,assignBgvVendor:XEe,getBgvReports:YEe,bulkUploadCandidates:QEe,bulkResumeUploadCandidates:eTe,bulkResumeUploadCandidatesAsync:rTe,getBulkUploadStatus:nTe,getCandidateBulkUploadHistory:tTe,verifyCandidatesBulk:sTe},sg=({label:e,value:t=0,onChange:r,required:s=!1})=>{const[a,i]=g.useState(0),l=u=>{r(u)},o=u=>{i(u)},c=()=>{i(0)},d=a||t;return n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e,s&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(u=>n.jsx("button",{type:"button",onClick:()=>l(u),onMouseEnter:()=>o(u),onMouseLeave:c,className:"transition-transform duration-200 hover:scale-110 focus:outline-none",title:`Rating: ${u} stars`,children:n.jsx("svg",{className:`w-6 h-6 ${u<=d?"text-yellow-400 fill-current":"text-gray-300 fill-current"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},u))}),n.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d?`${d}/5`:"Select rating"})]})]})},iTe=({decision:e,rejectionReason:t,onDecisionChange:r,onRejectionReasonChange:s,errors:a})=>{const i=[{value:"Send to AM",label:"Send to AM"},{value:"Hold / Revisit Later",label:"Hold / Revisit Later"},{value:"Reject",label:"Reject"},{value:"Needs Another Call",label:"Needs Another Call"}],l=["Skill mismatch","Salary mismatch","Experience mismatch","Not interested","No show"];return n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recruiter Decision"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Decision ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map(o=>n.jsx("button",{type:"button",onClick:()=>r(o.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e===o.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:o.label},o.value))}),(a==null?void 0:a.decision)&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.decision})]}),e==="Reject"&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Rejection Reason ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:t||"",onChange:o=>s(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select a reason"}),l.map(o=>n.jsx("option",{value:o,children:o},o))]}),(a==null?void 0:a.rejectionReason)&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.rejectionReason})]})]})},h4="/v1/recruiter",lTe=async e=>(await q.post(`${h4}/call-feedback`,e)).data,YU=async e=>(await q.get(`${h4}/candidates/${e}/call-feedback`)).data,pL=async(e,t)=>(await q.put(`${h4}/call-feedback/${e}`,t)).data,oTe=({candidateId:e,candidateName:t,initialData:r=null,onSuccess:s=()=>{},onCancel:a=()=>{}})=>{const[i,l]=g.useState(!1),[o,c]=g.useState({}),[d,u]=g.useState(""),m=g.useRef(null),[f,y]=g.useState([]),x=g.useRef(null);g.useEffect(()=>{(async()=>{var E,T,A;try{const P=((E=(await q.get("/v1/recruiter/assigned-jobs")).data)==null?void 0:E.jobs)||[];if(Array.isArray(P)&&P.length>0){y(P);return}const O=await q.get("/v1/job-management/requirements"),R=((T=O.data)==null?void 0:T.jobs)||((A=O.data)==null?void 0:A.requirements)||O.data||[];y(Array.isArray(R)?R:[])}catch(C){console.error("Failed to load jobs",C)}})()},[]);const[p,h]=g.useState({call_type:"Initial Screening",call_date:r!=null&&r.call_date?new Date(r.call_date).toISOString().slice(0,16):new Date().toISOString().slice(0,16),call_duration:(r==null?void 0:r.call_duration)||30,call_mode:"Phone",job_id:(r==null?void 0:r.job_id)||"",ratings:(r==null?void 0:r.ratings)||{communication:0,technical_fit:0,experience_relevance:0,culture_fit:0},salary_alignment:(r==null?void 0:r.salary_alignment)||"Negotiable",strengths:(r==null?void 0:r.strengths)||"",concerns:(r==null?void 0:r.concerns)||"",additional_notes:(r==null?void 0:r.additional_notes)||"",candidate_intent:(r==null?void 0:r.candidate_intent)||"Actively looking",decision:(r==null?void 0:r.decision)||"",rejection_reason:typeof(r==null?void 0:r.rejection_reason)=="string"?r.rejection_reason:"",next_actions:(r==null?void 0:r.next_actions)||[],is_draft:(r==null?void 0:r.is_draft)!==!1}),v=g.useCallback(S=>{const E=Object.values(S||{}).map(T=>Number(T)).filter(T=>T>0);return E.length?Number((E.reduce((T,A)=>T+A,0)/E.length).toFixed(2)):0},[]),b=g.useCallback(S=>{const E=[],T=String((S==null?void 0:S.strengths)||"").trim(),A=String((S==null?void 0:S.concerns)||"").trim(),C=String((S==null?void 0:S.additional_notes)||"").trim();return T&&E.push(`Strengths: ${T}`),A&&E.push(`Concerns: ${A}`),C&&E.push(`Notes: ${C}`),E.join(" | ")},[]),j=g.useCallback(()=>{const S={};return p.call_date||(S.call_date="Call date is required"),p.job_id||(S.job_id="Job is required"),["communication","technical_fit","experience_relevance","culture_fit"].forEach(T=>{(!p.ratings[T]||p.ratings[T]===0)&&(S[`ratings_${T}`]=`${T.replace(/_/g," ")} rating is required`)}),p.decision||(S.decision="Decision is required"),p.decision==="Reject"&&!p.rejection_reason&&(S.rejectionReason="Rejection reason is required when decision is Reject"),p.salary_alignment||(S.salary_alignment="Salary alignment is required"),S},[p]),_=(S,E)=>{h(T=>({...T,[S]:E})),o[S]&&c(T=>({...T,[S]:""})),d==="error"&&u("")},N=(S,E)=>{h(T=>({...T,ratings:{...T.ratings,[S]:E}})),o[`ratings_${S}`]&&c(T=>({...T,[`ratings_${S}`]:""}))},w=g.useCallback(async()=>{if(r!=null&&r.id)try{u("saving"),await pL(r.id,{...p,call_date:new Date(p.call_date).toISOString(),is_draft:!0}),u("saved"),setTimeout(()=>u(""),2e3)}catch(S){console.error("Autosave error:",S),u("error")}},[p,r==null?void 0:r.id]);g.useEffect(()=>(m.current=setInterval(()=>{w()},1e4),()=>{m.current&&clearInterval(m.current)}),[w]);const k=async S=>{var T,A;S.preventDefault();const E=j();if(Object.keys(E).length>0){c(E),u("error"),setTimeout(()=>{var P;const C=(P=x.current)==null?void 0:P.querySelector(".text-red-500");C==null||C.scrollIntoView({behavior:"smooth",block:"center"})},0);return}l(!0);try{const C={candidate_id:e,call_type:p.call_type,call_date:new Date(p.call_date).toISOString(),call_duration:parseInt(p.call_duration)||0,call_mode:p.call_mode,job_id:p.job_id,ratings:p.ratings,salary_alignment:p.salary_alignment,strengths:p.strengths||"",concerns:p.concerns||"",additional_notes:p.additional_notes||"",candidate_intent:p.candidate_intent,decision:p.decision,rejection_reason:p.decision==="Reject"&&p.rejection_reason||"",next_actions:p.next_actions,rating:v(p.ratings),free_text:b(p),is_draft:!1};r!=null&&r.id?await pL(r.id,C):await lTe(C),u("saved"),setTimeout(()=>{s()},1e3)}catch(C){let P=((A=(T=C.response)==null?void 0:T.data)==null?void 0:A.detail)||C.message||"Error saving feedback";if(typeof P=="string"&&P.startsWith("["))try{P=JSON.parse(P)}catch{}u("error"),c({submit:P})}finally{l(!1)}};return n.jsxs("form",{ref:x,onSubmit:k,className:"space-y-6",children:[n.jsxs("div",{className:"border-b pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Call Feedback"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Recording feedback for: ",n.jsx("strong",{children:t})]})]}),o.submit&&n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-red-700",children:Array.isArray(o.submit)?o.submit.map((S,E)=>n.jsxs("span",{children:[S.msg||JSON.stringify(S),n.jsx("br",{})]},E)):typeof o.submit=="string"?o.submit:JSON.stringify(o.submit)})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Call Metadata"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Call Type"}),n.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:"Initial Screening"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Call Mode"}),n.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:"Phone"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Call Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:p.call_date,onChange:S=>_("call_date",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.call_date&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.call_date})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Duration (minutes)"}),n.jsx("input",{type:"number",min:"0",value:p.call_duration,onChange:S=>_("call_duration",parseInt(S.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Structured Evaluation"}),n.jsx(sg,{label:"Communication",value:p.ratings.communication,onChange:S=>N("communication",S),required:!0}),o.ratings_communication&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_communication}),n.jsx(sg,{label:"Technical Fit",value:p.ratings.technical_fit,onChange:S=>N("technical_fit",S),required:!0}),o.ratings_technical_fit&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_technical_fit}),n.jsx(sg,{label:"Experience Relevance",value:p.ratings.experience_relevance,onChange:S=>N("experience_relevance",S),required:!0}),o.ratings_experience_relevance&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_experience_relevance}),n.jsx(sg,{label:"Culture Fit",value:p.ratings.culture_fit,onChange:S=>N("culture_fit",S),required:!0}),o.ratings_culture_fit&&n.jsx("p",{className:"text-red-500 text-xs -mt-2 mb-2",children:o.ratings_culture_fit}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Salary Alignment ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex gap-4",children:["Yes","No","Negotiable"].map(S=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"salary_alignment",value:S,checked:p.salary_alignment===S,onChange:E=>_("salary_alignment",E.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm text-gray-700",children:S})]},S))}),o.salary_alignment&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.salary_alignment})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recruiter Notes"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Strengths"}),n.jsx("textarea",{value:p.strengths,onChange:S=>_("strengths",S.target.value),placeholder:"Key strengths observed during the call",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Concerns"}),n.jsx("textarea",{value:p.concerns,onChange:S=>_("concerns",S.target.value),placeholder:"Any concerns or red flags",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Additional Notes"}),n.jsx("textarea",{value:p.additional_notes,onChange:S=>_("additional_notes",S.target.value),placeholder:"Any other relevant information",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Candidate Intent"}),n.jsxs("select",{value:p.candidate_intent,onChange:S=>_("candidate_intent",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Actively looking",children:"Actively looking"}),n.jsx("option",{value:"Passive",children:"Passive"}),n.jsx("option",{value:"Offer in hand",children:"Offer in hand"}),n.jsx("option",{value:"Just exploring",children:"Just exploring"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Job (Assigned by Account Manager)"}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Job/Requirement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:p.job_id,onChange:S=>_("job_id",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select Job"}),Array.isArray(f)&&f.map(S=>n.jsxs("option",{value:S.id,children:[S.title||S.job_title||"Untitled"," -"," ",S.client_name||S.company_name||"N/A"]},S.id))]}),o.job_id&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.job_id})]})]}),n.jsx(iTe,{decision:p.decision,rejectionReason:p.rejection_reason,onDecisionChange:S=>_("decision",S),onRejectionReasonChange:S=>_("rejection_reason",S),errors:o}),n.jsx("div",{className:"border-t pt-6 sticky bottom-0 bg-white z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[d==="saving"&&n.jsx("span",{className:"text-sm text-blue-600",children:" Autosaving..."}),d==="saved"&&n.jsx("span",{className:"text-sm text-green-600",children:" Draft saved"}),d==="error"&&n.jsx("span",{className:"text-sm text-red-600",children:"Please complete required fields and try again"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:bg-blue-400",children:i?"Saving...":"Save Feedback"})]})]})})]})},p4=({isOpen:e,candidateId:t,candidateName:r,initialData:s=null,onClose:a,onSuccess:i})=>{g.useEffect(()=>{const o=c=>{e&&(s!=null&&s.is_draft)&&(c.preventDefault(),c.returnValue="")};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[e,s]);const l=o=>{o.target===o.currentTarget&&(s!=null&&s.is_draft?window.confirm("You have unsaved changes. Are you sure you want to close?")&&a():a())};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-40 transition-opacity duration-300 z-[80] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:l}),n.jsx("div",{className:`fixed top-0 right-0 h-full bg-white shadow-xl transition-transform duration-300 z-[90] overflow-y-auto ${e?"translate-x-0":"translate-x-full"}`,style:{width:"480px"},children:n.jsxs("div",{className:"p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("div",{}),n.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Close drawer",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(oTe,{candidateId:t,candidateName:r,initialData:s,onSuccess:()=>{i&&i(),a()},onCancel:a})})]})})]})},ZU=({candidateId:e,onFeedbackSelect:t=()=>{},onAddNew:r=()=>{}})=>{const[s,a]=g.useState([]),[i,l]=g.useState(!0),[o,c]=g.useState(null),[d,u]=g.useState(null);if(g.useEffect(()=>{e&&(async()=>{try{l(!0);const p=await YU(e);a(p.feedbacks||[]),c(null)}catch(p){console.error("Error fetching feedback history:",p),c("Failed to load feedback history")}finally{l(!1)}})()},[e]),i)return n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(o)return n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:o})});if(!s||s.length===0)return n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No call feedback recorded yet"})});const m=x=>{switch(x){case"Send to AM":case"Proceed to Next Round":return"bg-green-100 text-green-800";case"Hold / Revisit Later":return"bg-yellow-100 text-yellow-800";case"Reject":return"bg-red-100 text-red-800";case"Needs Another Call":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=x=>{if(!x)return 0;const p=Object.values(x).filter(h=>h>0);return p.length>0?(p.reduce((h,v)=>h+v,0)/p.length).toFixed(1):0},y=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Call Feedback History"}),n.jsx("button",{onClick:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors",children:" Add New Feedback"})]}),n.jsx("div",{className:"space-y-3",children:s.map(x=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>u(d===x.id?null:x.id),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"flex-1 text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800",children:x.call_type}),n.jsx("p",{className:"text-sm text-gray-600",children:y(x.call_date)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[f(x.ratings),"/5.0"]}),n.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(p=>n.jsx("svg",{className:`w-4 h-4 ${p<=Math.round(f(x.ratings))?"text-yellow-400 fill-current":"text-gray-300 fill-current"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},p))})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${m(x.decision)}`,children:x.decision})})]})}),n.jsx("svg",{className:`w-5 h-5 text-gray-500 ml-4 transition-transform ${d===x.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),d===x.id&&n.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Mode"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.call_mode})]}),x.call_duration&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Duration"}),n.jsxs("p",{className:"text-sm text-gray-800",children:[x.call_duration," minutes"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Ratings"}),n.jsx("div",{className:"space-y-1",children:Object.entries(x.ratings||{}).map(([p,h])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:p.replace(/_/g," ")}),n.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[h,"/5"]})]},p))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Salary Alignment"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.salary_alignment})]}),x.candidate_intent&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Candidate Intent"}),n.jsx("p",{className:"text-sm text-gray-800",children:x.candidate_intent})]}),(x.strengths||x.concerns||x.additional_notes)&&n.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[x.strengths&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-green-700 uppercase mb-1",children:"Strengths"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.strengths})]}),x.concerns&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 uppercase mb-1",children:"Concerns"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.concerns})]}),x.additional_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700",children:x.additional_notes})]})]}),x.rejection_reason&&n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 uppercase mb-1",children:"Rejection Reason"}),n.jsx("p",{className:"text-sm text-red-700",children:x.rejection_reason})]}),x.next_actions&&x.next_actions.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Next Actions"}),n.jsx("ul",{className:"space-y-1",children:x.next_actions.map((p,h)=>n.jsxs("li",{className:"text-sm text-gray-700 flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),p]},h))})]}),n.jsx("button",{onClick:()=>t(x),className:"w-full mt-3 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-sm font-medium transition-colors",children:"Edit Feedback"})]})]},x.id))})]})},Zv={maxFileSizeBytes:10*1024*1024,maxRows:5e3,allowedExtensions:[".xlsx"]};function xL(e){if(!e)return{ok:!1,message:"Please select a file."};const t=e.name.toLowerCase();return Zv.allowedExtensions.some(s=>t.endsWith(s))?e.size>Zv.maxFileSizeBytes?{ok:!1,message:"File size exceeds 10MB limit."}:{ok:!0,message:""}:{ok:!1,message:"Only .xlsx files are allowed."}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var mp={};mp.version="0.18.5";var ri=1200,Gd=1252,cTe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],x4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},q1=function(e){cTe.indexOf(e)!=-1&&(Gd=x4[0]=e)};function dTe(){q1(1252)}var ki=function(e){ri=e,q1(e)};function G1(){ki(1200),dTe()}function Qv(e){for(var t=[],r=0,s=e.length;r<s;++r)t[r]=e.charCodeAt(r);return t}function uTe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function QU(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var cm=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?uTe(e.slice(2)):t==254&&r==255?QU(e.slice(2)):t==65279?e.slice(1):e},S0=function(t){return String.fromCharCode(t)},bk=function(t){return String.fromCharCode(t)},jr;function mTe(e){jr=e,ki=function(t){ri=t,q1(t)},cm=function(t){return t.charCodeAt(0)===255&&t.charCodeAt(1)===254?jr.utils.decode(1200,Qv(t.slice(2))):t},S0=function(r){return ri===1200?String.fromCharCode(r):jr.utils.decode(ri,[r&255,r>>8])[0]},bk=function(r){return jr.utils.decode(Gd,[r])[0]},Az()}var lc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function fp(e){for(var t="",r=0,s=0,a=0,i=0,l=0,o=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,s=e.charCodeAt(d++),l=(r&3)<<4|s>>4,a=e.charCodeAt(d++),o=(s&15)<<2|a>>6,c=a&63,isNaN(s)?o=c=64:isNaN(a)&&(c=64),t+=lc.charAt(i)+lc.charAt(l)+lc.charAt(o)+lc.charAt(c);return t}function ai(e){var t="",r=0,s=0,a=0,i=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=lc.indexOf(e.charAt(d++)),l=lc.indexOf(e.charAt(d++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=lc.indexOf(e.charAt(d++)),s=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(s)),c=lc.indexOf(e.charAt(d++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var fr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Lo=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function kc(e){return fr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function gL(e){return fr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var qa=function(t){return fr?Lo(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function tx(e){if(typeof ArrayBuffer>"u")return qa(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),s=0;s!=e.length;++s)r[s]=e.charCodeAt(s)&255;return t}function Mc(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function fTe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function g4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return g4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var xs=fr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Lo(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function hTe(e){for(var t=[],r=0,s=e.length+250,a=kc(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)a[r++]=l;else if(l<2048)a[r++]=192|l>>6&31,a[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|l>>8&7,a[r++]=128|l>>2&63,a[r++]=128|o>>6&15|(l&3)<<4,a[r++]=128|o&63}else a[r++]=224|l>>12&15,a[r++]=128|l>>6&63,a[r++]=128|l&63;r>s&&(t.push(a.slice(0,r)),r=0,a=kc(65535),s=65530)}return t.push(a.slice(0,r)),xs(t)}var Qs=/\u0000/g,C0=/[\u0001-\u0006]/g;function Nm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function el(e,t){var r=""+e;return r.length>=t?r:Tn("0",t-r.length)+r}function y4(e,t){var r=""+e;return r.length>=t?r:Tn(" ",t-r.length)+r}function eb(e,t){var r=""+e;return r.length>=t?r:r+Tn(" ",t-r.length)}function pTe(e,t){var r=""+Math.round(e);return r.length>=t?r:Tn("0",t-r.length)+r}function xTe(e,t){var r=""+e;return r.length>=t?r:Tn("0",t-r.length)+r}var yL=Math.pow(2,32);function Eu(e,t){if(e>yL||e<-yL)return pTe(e,t);var r=Math.round(e);return xTe(r,t)}function tb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var vL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],D_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gTe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Jt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},bL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},yTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function rb(e,t,r){for(var s=e<0?-1:1,a=e*s,i=0,l=1,o=0,c=1,d=0,u=0,m=Math.floor(a);d<t&&(m=Math.floor(a),o=m*l+i,u=m*d+c,!(a-m<5e-8));)a=1/(a-m),i=l,l=o,c=d,d=u;if(u>t&&(d>t?(u=c,o=i):(u=d,o=l)),!r)return[0,s*o,u];var f=Math.floor(s*o/u);return[f,s*o-f*u,u]}function oc(e,t,r){if(e>2958465||e<0)return null;var s=e|0,a=Math.floor(86400*(e-s)),i=0,l=[],o={D:s,T:a,u:86400*(e-s)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(s+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++s,++o.D)),s===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(s===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),s<60&&(i=(i+6)%7),r&&(i=NTe(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var ez=new Date(1899,11,31,0,0,0),vTe=ez.getTime(),bTe=new Date(1900,2,1,0,0,0);function tz(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=bTe&&(r+=24*60*60*1e3),(r-(vTe+(e.getTimezoneOffset()-ez.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function v4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function jTe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _Te(e){var t=e<0?12:11,r=v4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function wTe(e){var t=v4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function hp(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=_Te(e):t===10?r=e.toFixed(10).substr(0,12):r=wTe(e),v4(jTe(r.toUpperCase()))}function Jd(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):hp(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ii(14,tz(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function NTe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function kTe(e,t,r,s){var a="",i=0,l=0,o=r.y,c,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return D_[r.m-1][1];case 5:return D_[r.m-1][0];default:return D_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return vL[r.q][0];default:return vL[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?el(r.S,t.length):(s>=2?l=s===3?1e3:100:l=s===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(a=el(i,2+s),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?el(c,d):"";return u}function cc(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var rz=/%/g;function STe(e,t,r){var s=t.replace(rz,""),a=t.length-s.length;return ho(e,s,r*Math.pow(10,2*a))+Tn("%",a)}function CTe(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return ho(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function nz(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+nz(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sz=/# (\?+)( ?)\/( ?)(\d+)/;function ATe(e,t,r){var s=parseInt(e[4],10),a=Math.round(t*s),i=Math.floor(a/s),l=a-i*s,o=s;return r+(i===0?"":""+i)+" "+(l===0?Tn(" ",e[1].length+1+e[4].length):y4(l,e[1].length)+e[2]+"/"+e[3]+el(o,e[4].length))}function ETe(e,t,r){return r+(t===0?"":""+t)+Tn(" ",e[1].length+2+e[4].length)}var az=/^#*0*\.([0#]+)/,iz=/\).*[0#]/,lz=/\(###\) ###\\?-####/;function ia(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function jL(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function _L(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function TTe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function PTe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function hi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(iz)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?hi("n",s,r):"("+hi("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return CTe(e,t,r);if(t.indexOf("%")!==-1)return STe(e,t,r);if(t.indexOf("E")!==-1)return nz(t,r);if(t.charCodeAt(0)===36)return"$"+hi(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Eu(c,t.length);if(t.match(/^[#?]+$/))return a=Eu(r,0),a==="0"&&(a=""),a.length>t.length?a:ia(t.substr(0,t.length-a.length))+a;if(i=t.match(sz))return ATe(i,c,d);if(t.match(/^#+0+$/))return d+Eu(c,t.length-t.indexOf("0"));if(i=t.match(az))return a=jL(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ia(i[1])).replace(/\.$/,"."+ia(i[1])).replace(/\.(\d*)$/,function(x,p){return"."+p+Tn("0",ia(i[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+jL(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+cc(Eu(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+hi(e,t,-r):cc(""+(Math.floor(r)+TTe(r,i[1].length)))+"."+el(_L(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return hi(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Nm(hi(e,t.replace(/[\\-]/g,""),r)),l=0,Nm(Nm(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<a.length?a.charAt(l++):x==="0"?"0":""}));if(t.match(lz))return a=hi(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=rb(c,Math.pow(10,l)-1,!1),a=""+d,u=ho("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=eb(o[2],l),u.length<i[4].length&&(u=ia(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=rb(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?y4(o[1],l)+i[2]+"/"+i[3]+eb(o[2],l):Tn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Eu(r,0),t.length<=a.length?a:ia(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var m=t.indexOf(".")-l,f=t.length-a.length-m;return ia(t.substr(0,m)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=_L(r,i[1].length),r<0?"-"+hi(e,t,-r):cc(PTe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?el(0,3-x.length):"")+x})+"."+el(l,i[1].length);switch(t){case"###,##0.00":return hi(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var y=cc(Eu(c,0));return y!=="0"?d+y:"";case"###,###.00":return hi(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return hi(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function OTe(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return ho(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function RTe(e,t,r){var s=t.replace(rz,""),a=t.length-s.length;return ho(e,s,r*Math.pow(10,2*a))+Tn("%",a)}function oz(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+oz(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function gl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(iz)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?gl("n",s,r):"("+gl("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return OTe(e,t,r);if(t.indexOf("%")!==-1)return RTe(e,t,r);if(t.indexOf("E")!==-1)return oz(t,r);if(t.charCodeAt(0)===36)return"$"+gl(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+el(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ia(t.substr(0,t.length-a.length))+a;if(i=t.match(sz))return ETe(i,c,d);if(t.match(/^#+0+$/))return d+el(c,t.length-t.indexOf("0"));if(i=t.match(az))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ia(i[1])).replace(/\.$/,"."+ia(i[1])),a=a.replace(/\.(\d*)$/,function(x,p){return"."+p+Tn("0",ia(i[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+cc(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+gl(e,t,-r):cc(""+r)+"."+Tn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return gl(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Nm(gl(e,t.replace(/[\\-]/g,""),r)),l=0,Nm(Nm(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<a.length?a.charAt(l++):x==="0"?"0":""}));if(t.match(lz))return a=gl(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=rb(c,Math.pow(10,l)-1,!1),a=""+d,u=ho("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=eb(o[2],l),u.length<i[4].length&&(u=ia(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=rb(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?y4(o[1],l)+i[2]+"/"+i[3]+eb(o[2],l):Tn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ia(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var m=t.indexOf(".")-l,f=t.length-a.length-m;return ia(t.substr(0,m)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+gl(e,t,-r):cc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?el(0,3-x.length):"")+x})+"."+el(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var y=cc(""+c);return y!=="0"?d+y:"";default:if(t.match(/\.[0#?]*$/))return gl(e,t.slice(0,t.lastIndexOf(".")),r)+ia(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ho(e,t,r){return(r|0)===r?gl(e,t,r):hi(e,t,r)}function LTe(e){for(var t=[],r=!1,s=0,a=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(a,s-a),a=s+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var cz=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function mu(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":tb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(cz))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ITe(e,t,r,s){for(var a=[],i="",l=0,o="",c="t",d,u,m,f="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!tb(e,l))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(m=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(m);a[a.length]={t:"t",v:i},++l;break;case"\\":var y=e.charAt(++l),x=y==="("||y===")"?y:"t";a[a.length]={t:x,v:y},++l;break;case"_":a[a.length]={t:"t",v:" "},l+=2;break;case"@":a[a.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(d==null&&(d=oc(t,r,e.charAt(l+1)==="2"),d==null))return"";a[a.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=oc(t,r),d==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var p={t:o,v:o};if(d==null&&(d=oc(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(p.v=d.H>=12?"P":"A"),p.t="T",f="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(p.v=d.H>=12?"PM":"AM"),p.t="T",l+=5,f="h"):e.substr(l,5).toUpperCase()==="/"?(d!=null&&(p.v=d.H>=12?"":""),p.t="T",l+=5,f="h"):(p.t="t",++l),d==null&&p.t==="T")return"";a[a.length]=p,c=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(cz)){if(d==null&&(d=oc(t,r),d==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",mu(e)||(a[a.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":a[a.length]={t:s===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++l;break;case"$":a[a.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++l;break}var h=0,v=0,b;for(l=a.length-1,c="t";l>=0;--l)switch(a[l].t){case"h":case"H":a[l].t=f,c="h",h<1&&(h=1);break;case"s":(b=a[l].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),h<3&&(h=3);case"d":case"y":case"M":case"e":c=a[l].t;break;case"m":c==="s"&&(a[l].t="M",h<2&&(h=2));break;case"X":break;case"Z":h<1&&a[l].v.match(/[Hh]/)&&(h=1),h<2&&a[l].v.match(/[Mm]/)&&(h=2),h<3&&a[l].v.match(/[Ss]/)&&(h=3)}switch(h){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",_;for(l=0;l<a.length;++l)switch(a[l].t){case"t":case"T":case" ":case"D":break;case"X":a[l].v="",a[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[l].v=kTe(a[l].t.charCodeAt(0),a[l].v,d,v),a[l].t="t";break;case"n":case"?":for(_=l+1;a[_]!=null&&((o=a[_].t)==="?"||o==="D"||(o===" "||o==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[l].v+=a[_].v,a[_]={v:"",t:";"},++_;j+=a[l].v,l=_-1;break;case"G":a[l].t="t",a[l].v=Jd(t,r);break}var N="",w,k;if(j.length>0){j.charCodeAt(0)==40?(w=t<0&&j.charCodeAt(0)===45?-t:t,k=ho("n",j,w)):(w=t<0&&s>1?-t:t,k=ho("n",j,w),w<0&&a[0]&&a[0].t=="t"&&(k=k.substr(1),a[0].v="-"+a[0].v)),_=k.length-1;var S=a.length;for(l=0;l<a.length;++l)if(a[l]!=null&&a[l].t!="t"&&a[l].v.indexOf(".")>-1){S=l;break}var E=a.length;if(S===a.length&&k.indexOf("E")===-1){for(l=a.length-1;l>=0;--l)a[l]==null||"n?".indexOf(a[l].t)===-1||(_>=a[l].v.length-1?(_-=a[l].v.length,a[l].v=k.substr(_+1,a[l].v.length)):_<0?a[l].v="":(a[l].v=k.substr(0,_+1),_=-1),a[l].t="t",E=l);_>=0&&E<a.length&&(a[E].v=k.substr(0,_+1)+a[E].v)}else if(S!==a.length&&k.indexOf("E")===-1){for(_=k.indexOf(".")-1,l=S;l>=0;--l)if(!(a[l]==null||"n?".indexOf(a[l].t)===-1)){for(u=a[l].v.indexOf(".")>-1&&l===S?a[l].v.indexOf(".")-1:a[l].v.length-1,N=a[l].v.substr(u+1);u>=0;--u)_>=0&&(a[l].v.charAt(u)==="0"||a[l].v.charAt(u)==="#")&&(N=k.charAt(_--)+N);a[l].v=N,a[l].t="t",E=l}for(_>=0&&E<a.length&&(a[E].v=k.substr(0,_+1)+a[E].v),_=k.indexOf(".")+1,l=S;l<a.length;++l)if(!(a[l]==null||"n?(".indexOf(a[l].t)===-1&&l!==S)){for(u=a[l].v.indexOf(".")>-1&&l===S?a[l].v.indexOf(".")+1:0,N=a[l].v.substr(0,u);u<a[l].v.length;++u)_<k.length&&(N+=k.charAt(_++));a[l].v=N,a[l].t="t",E=l}}}for(l=0;l<a.length;++l)a[l]!=null&&"n?".indexOf(a[l].t)>-1&&(w=s>1&&t<0&&l>0&&a[l-1].v==="-"?-t:t,a[l].v=ho(a[l].t,a[l].v,w),a[l].t="t");var T="";for(l=0;l!==a.length;++l)a[l]!=null&&(T+=a[l].v);return T}var wL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function NL(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function FTe(e,t){var r=LTe(e),s=r.length,a=r[s-1].indexOf("@");if(s<4&&a>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(wL),o=r[1].match(wL);return NL(t,l)?[s,r[0]]:NL(t,o)?[s,r[1]]:[s,r[l!=null&&o!=null?2:1]]}return[s,i]}function ii(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:Jt)[e],s==null&&(s=r.table&&r.table[bL[e]]||Jt[bL[e]]),s==null&&(s=yTe[e]||"General");break}if(tb(s,0))return Jd(t,r);t instanceof Date&&(t=tz(t,r.date1904));var a=FTe(s,t);if(tb(a[1]))return Jd(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ITe(a[1],t,r,a[0])}function Ll(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Jt[r]==null){t<0&&(t=r);continue}if(Jt[r]==e){t=r;break}}t<0&&(t=391)}return Jt[t]=e,t}function rx(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Ll(e[t],t)}function Mf(){Jt=gTe()}var dz={format:ii,load:Ll,_table:Jt,load_table:rx,parse_date_code:oc,is_date:mu,get_table:function(){return dz._table=Jt}},DTe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},uz=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function $Te(e){var t=typeof e=="number"?Jt[e]:e;return t=t.replace(uz,"(\\d+)"),new RegExp("^"+t+"$")}function MTe(e,t,r){var s=-1,a=-1,i=-1,l=-1,o=-1,c=-1;(t.match(uz)||[]).forEach(function(m,f){var y=parseInt(r[f+1],10);switch(m.toLowerCase().charAt(0)){case"y":s=y;break;case"d":i=y;break;case"h":l=y;break;case"s":c=y;break;case"m":l>=0?o=y:a=y;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:s==-1&&a==-1&&i==-1?u:d+"T"+u}var BTe=function(){var e={};e.version="1.2.0";function t(){for(var k=0,S=new Array(256),E=0;E!=256;++E)k=E,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,S[E]=k;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function s(k){var S=0,E=0,T=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)A[T]=k[T];for(T=0;T!=256;++T)for(E=k[T],S=256+T;S<4096;S+=256)E=A[S]=E>>>8^k[E&255];var C=[];for(T=1;T!=16;++T)C[T-1]=typeof Int32Array<"u"?A.subarray(T*256,T*256+256):A.slice(T*256,T*256+256);return C}var a=s(r),i=a[0],l=a[1],o=a[2],c=a[3],d=a[4],u=a[5],m=a[6],f=a[7],y=a[8],x=a[9],p=a[10],h=a[11],v=a[12],b=a[13],j=a[14];function _(k,S){for(var E=S^-1,T=0,A=k.length;T<A;)E=E>>>8^r[(E^k.charCodeAt(T++))&255];return~E}function N(k,S){for(var E=S^-1,T=k.length-15,A=0;A<T;)E=j[k[A++]^E&255]^b[k[A++]^E>>8&255]^v[k[A++]^E>>16&255]^h[k[A++]^E>>>24]^p[k[A++]]^x[k[A++]]^y[k[A++]]^f[k[A++]]^m[k[A++]]^u[k[A++]]^d[k[A++]]^c[k[A++]]^o[k[A++]]^l[k[A++]]^i[k[A++]]^r[k[A++]];for(T+=15;A<T;)E=E>>>8^r[(E^k[A++])&255];return~E}function w(k,S){for(var E=S^-1,T=0,A=k.length,C=0,P=0;T<A;)C=k.charCodeAt(T++),C<128?E=E>>>8^r[(E^C)&255]:C<2048?(E=E>>>8^r[(E^(192|C>>6&31))&255],E=E>>>8^r[(E^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,P=k.charCodeAt(T++)&1023,E=E>>>8^r[(E^(240|C>>8&7))&255],E=E>>>8^r[(E^(128|C>>2&63))&255],E=E>>>8^r[(E^(128|P>>6&15|(C&3)<<4))&255],E=E>>>8^r[(E^(128|P&63))&255]):(E=E>>>8^r[(E^(224|C>>12&15))&255],E=E>>>8^r[(E^(128|C>>6&63))&255],E=E>>>8^r[(E^(128|C&63))&255]);return~E}return e.table=r,e.bstr=_,e.buf=N,e.str=w,e}(),qt=function(){var t={};t.version="1.2.1";function r(Z,H){for(var V=Z.split("/"),ee=H.split("/"),X=0,te=0,ke=Math.min(V.length,ee.length);X<ke;++X){if(te=V[X].length-ee[X].length)return te;if(V[X]!=ee[X])return V[X]<ee[X]?-1:1}return V.length-ee.length}function s(Z){if(Z.charAt(Z.length-1)=="/")return Z.slice(0,-1).indexOf("/")===-1?Z:s(Z.slice(0,-1));var H=Z.lastIndexOf("/");return H===-1?Z:Z.slice(0,H+1)}function a(Z){if(Z.charAt(Z.length-1)=="/")return a(Z.slice(0,-1));var H=Z.lastIndexOf("/");return H===-1?Z:Z.slice(H+1)}function i(Z,H){typeof H=="string"&&(H=new Date(H));var V=H.getHours();V=V<<6|H.getMinutes(),V=V<<5|H.getSeconds()>>>1,Z.write_shift(2,V);var ee=H.getFullYear()-1980;ee=ee<<4|H.getMonth()+1,ee=ee<<5|H.getDate(),Z.write_shift(2,ee)}function l(Z){var H=Z.read_shift(2)&65535,V=Z.read_shift(2)&65535,ee=new Date,X=V&31;V>>>=5;var te=V&15;V>>>=4,ee.setMilliseconds(0),ee.setFullYear(V+1980),ee.setMonth(te-1),ee.setDate(X);var ke=H&31;H>>>=5;var ve=H&63;return H>>>=6,ee.setHours(H),ee.setMinutes(ve),ee.setSeconds(ke<<1),ee}function o(Z){Ss(Z,0);for(var H={},V=0;Z.l<=Z.length-4;){var ee=Z.read_shift(2),X=Z.read_shift(2),te=Z.l+X,ke={};switch(ee){case 21589:V=Z.read_shift(1),V&1&&(ke.mtime=Z.read_shift(4)),X>5&&(V&2&&(ke.atime=Z.read_shift(4)),V&4&&(ke.ctime=Z.read_shift(4))),ke.mtime&&(ke.mt=new Date(ke.mtime*1e3));break}Z.l=te,H[ee]=ke}return H}var c;function d(){return c||(c={})}function u(Z,H){if(Z[0]==80&&Z[1]==75)return It(Z,H);if((Z[0]|32)==109&&(Z[1]|32)==105)return Re(Z,H);if(Z.length<512)throw new Error("CFB file size "+Z.length+" < 512");var V=3,ee=512,X=0,te=0,ke=0,ve=0,J=0,be=[],we=Z.slice(0,512);Ss(we,0);var Ie=m(we);switch(V=Ie[0],V){case 3:ee=512;break;case 4:ee=4096;break;case 0:if(Ie[1]==0)return It(Z,H);default:throw new Error("Major Version: Expected 3 or 4 saw "+V)}ee!==512&&(we=Z.slice(0,ee),Ss(we,28));var He=Z.slice(0,ee);f(we,V);var nt=we.read_shift(4,"i");if(V===3&&nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nt);we.l+=4,ke=we.read_shift(4,"i"),we.l+=4,we.chk("00100000","Mini Stream Cutoff Size: "),ve=we.read_shift(4,"i"),X=we.read_shift(4,"i"),J=we.read_shift(4,"i"),te=we.read_shift(4,"i");for(var tt=-1,_e=0;_e<109&&(tt=we.read_shift(4,"i"),!(tt<0));++_e)be[_e]=tt;var Qe=y(Z,ee);h(J,te,Qe,ee,be);var U=b(Qe,ke,be,ee);U[ke].name="!Directory",X>0&&ve!==P&&(U[ve].name="!MiniFAT"),U[be[0]].name="!FAT",U.fat_addrs=be,U.ssz=ee;var se={},at=[],ct=[],Te=[];j(ke,U,Qe,at,X,se,ct,ve),x(ct,Te,at),at.shift();var Vt={FileIndex:ct,FullPaths:Te};return H&&H.raw&&(Vt.raw={header:He,sectors:Qe}),Vt}function m(Z){if(Z[Z.l]==80&&Z[Z.l+1]==75)return[0,0];Z.chk(O,"Header Signature: "),Z.l+=16;var H=Z.read_shift(2,"u");return[Z.read_shift(2,"u"),H]}function f(Z,H){var V=9;switch(Z.l+=2,V=Z.read_shift(2)){case 9:if(H!=3)throw new Error("Sector Shift: Expected 9 saw "+V);break;case 12:if(H!=4)throw new Error("Sector Shift: Expected 12 saw "+V);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+V)}Z.chk("0600","Mini Sector Shift: "),Z.chk("000000000000","Reserved: ")}function y(Z,H){for(var V=Math.ceil(Z.length/H)-1,ee=[],X=1;X<V;++X)ee[X-1]=Z.slice(X*H,(X+1)*H);return ee[V-1]=Z.slice(V*H),ee}function x(Z,H,V){for(var ee=0,X=0,te=0,ke=0,ve=0,J=V.length,be=[],we=[];ee<J;++ee)be[ee]=we[ee]=ee,H[ee]=V[ee];for(;ve<we.length;++ve)ee=we[ve],X=Z[ee].L,te=Z[ee].R,ke=Z[ee].C,be[ee]===ee&&(X!==-1&&be[X]!==X&&(be[ee]=be[X]),te!==-1&&be[te]!==te&&(be[ee]=be[te])),ke!==-1&&(be[ke]=ee),X!==-1&&ee!=be[ee]&&(be[X]=be[ee],we.lastIndexOf(X)<ve&&we.push(X)),te!==-1&&ee!=be[ee]&&(be[te]=be[ee],we.lastIndexOf(te)<ve&&we.push(te));for(ee=1;ee<J;++ee)be[ee]===ee&&(te!==-1&&be[te]!==te?be[ee]=be[te]:X!==-1&&be[X]!==X&&(be[ee]=be[X]));for(ee=1;ee<J;++ee)if(Z[ee].type!==0){if(ve=ee,ve!=be[ve])do ve=be[ve],H[ee]=H[ve]+"/"+H[ee];while(ve!==0&&be[ve]!==-1&&ve!=be[ve]);be[ee]=-1}for(H[0]+="/",ee=1;ee<J;++ee)Z[ee].type!==2&&(H[ee]+="/")}function p(Z,H,V){for(var ee=Z.start,X=Z.size,te=[],ke=ee;V&&X>0&&ke>=0;)te.push(H.slice(ke*C,ke*C+C)),X-=C,ke=ad(V,ke*4);return te.length===0?it(0):xs(te).slice(0,Z.size)}function h(Z,H,V,ee,X){var te=P;if(Z===P){if(H!==0)throw new Error("DIFAT chain shorter than expected")}else if(Z!==-1){var ke=V[Z],ve=(ee>>>2)-1;if(!ke)return;for(var J=0;J<ve&&(te=ad(ke,J*4))!==P;++J)X.push(te);h(ad(ke,ee-4),H-1,V,ee,X)}}function v(Z,H,V,ee,X){var te=[],ke=[];X||(X=[]);var ve=ee-1,J=0,be=0;for(J=H;J>=0;){X[J]=!0,te[te.length]=J,ke.push(Z[J]);var we=V[Math.floor(J*4/ee)];if(be=J*4&ve,ee<4+be)throw new Error("FAT boundary crossed: "+J+" 4 "+ee);if(!Z[we])break;J=ad(Z[we],be)}return{nodes:te,data:FL([ke])}}function b(Z,H,V,ee){var X=Z.length,te=[],ke=[],ve=[],J=[],be=ee-1,we=0,Ie=0,He=0,nt=0;for(we=0;we<X;++we)if(ve=[],He=we+H,He>=X&&(He-=X),!ke[He]){J=[];var tt=[];for(Ie=He;Ie>=0;){tt[Ie]=!0,ke[Ie]=!0,ve[ve.length]=Ie,J.push(Z[Ie]);var _e=V[Math.floor(Ie*4/ee)];if(nt=Ie*4&be,ee<4+nt)throw new Error("FAT boundary crossed: "+Ie+" 4 "+ee);if(!Z[_e]||(Ie=ad(Z[_e],nt),tt[Ie]))break}te[He]={nodes:ve,data:FL([J])}}return te}function j(Z,H,V,ee,X,te,ke,ve){for(var J=0,be=ee.length?2:0,we=H[Z].data,Ie=0,He=0,nt;Ie<we.length;Ie+=128){var tt=we.slice(Ie,Ie+128);Ss(tt,64),He=tt.read_shift(2),nt=Y1(tt,0,He-be),ee.push(nt);var _e={name:nt,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Qe=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Qe!==0&&(_e.ct=_(tt,tt.l-8));var U=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);U!==0&&(_e.mt=_(tt,tt.l-8)),_e.start=tt.read_shift(4,"i"),_e.size=tt.read_shift(4,"i"),_e.size<0&&_e.start<0&&(_e.size=_e.type=0,_e.start=P,_e.name=""),_e.type===5?(J=_e.start,X>0&&J!==P&&(H[J].name="!StreamData")):_e.size>=4096?(_e.storage="fat",H[_e.start]===void 0&&(H[_e.start]=v(V,_e.start,H.fat_addrs,H.ssz)),H[_e.start].name=_e.name,_e.content=H[_e.start].data.slice(0,_e.size)):(_e.storage="minifat",_e.size<0?_e.size=0:J!==P&&_e.start!==P&&H[J]&&(_e.content=p(_e,H[J].data,(H[ve]||{}).data))),_e.content&&Ss(_e.content,0),te[nt]=_e,ke.push(_e)}}function _(Z,H){return new Date((ps(Z,H+4)/1e7*Math.pow(2,32)+ps(Z,H)/1e7-11644473600)*1e3)}function N(Z,H){return d(),u(c.readFileSync(Z),H)}function w(Z,H){var V=H&&H.type;switch(V||fr&&Buffer.isBuffer(Z)&&(V="buffer"),V||"base64"){case"file":return N(Z,H);case"base64":return u(qa(ai(Z)),H);case"binary":return u(qa(Z),H)}return u(Z,H)}function k(Z,H){var V=H||{},ee=V.root||"Root Entry";if(Z.FullPaths||(Z.FullPaths=[]),Z.FileIndex||(Z.FileIndex=[]),Z.FullPaths.length!==Z.FileIndex.length)throw new Error("inconsistent CFB structure");Z.FullPaths.length===0&&(Z.FullPaths[0]=ee+"/",Z.FileIndex[0]={name:ee,type:5}),V.CLSID&&(Z.FileIndex[0].clsid=V.CLSID),S(Z)}function S(Z){var H="Sh33tJ5";if(!qt.find(Z,"/"+H)){var V=it(4);V[0]=55,V[1]=V[3]=50,V[2]=54,Z.FileIndex.push({name:H,type:2,content:V,size:4,L:69,R:69,C:69}),Z.FullPaths.push(Z.FullPaths[0]+H),E(Z)}}function E(Z,H){k(Z);for(var V=!1,ee=!1,X=Z.FullPaths.length-1;X>=0;--X){var te=Z.FileIndex[X];switch(te.type){case 0:ee?V=!0:(Z.FileIndex.pop(),Z.FullPaths.pop());break;case 1:case 2:case 5:ee=!0,isNaN(te.R*te.L*te.C)&&(V=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(V=!0);break;default:V=!0;break}}if(!(!V&&!H)){var ke=new Date(1987,1,19),ve=0,J=Object.create?Object.create(null):{},be=[];for(X=0;X<Z.FullPaths.length;++X)J[Z.FullPaths[X]]=!0,Z.FileIndex[X].type!==0&&be.push([Z.FullPaths[X],Z.FileIndex[X]]);for(X=0;X<be.length;++X){var we=s(be[X][0]);ee=J[we],ee||(be.push([we,{name:a(we).replace("/",""),type:1,clsid:F,ct:ke,mt:ke,content:null}]),J[we]=!0)}for(be.sort(function(nt,tt){return r(nt[0],tt[0])}),Z.FullPaths=[],Z.FileIndex=[],X=0;X<be.length;++X)Z.FullPaths[X]=be[X][0],Z.FileIndex[X]=be[X][1];for(X=0;X<be.length;++X){var Ie=Z.FileIndex[X],He=Z.FullPaths[X];if(Ie.name=a(He).replace("/",""),Ie.L=Ie.R=Ie.C=-(Ie.color=1),Ie.size=Ie.content?Ie.content.length:0,Ie.start=0,Ie.clsid=Ie.clsid||F,X===0)Ie.C=be.length>1?1:-1,Ie.size=0,Ie.type=5;else if(He.slice(-1)=="/"){for(ve=X+1;ve<be.length&&s(Z.FullPaths[ve])!=He;++ve);for(Ie.C=ve>=be.length?-1:ve,ve=X+1;ve<be.length&&s(Z.FullPaths[ve])!=s(He);++ve);Ie.R=ve>=be.length?-1:ve,Ie.type=1}else s(Z.FullPaths[X+1]||"")==s(He)&&(Ie.R=X+1),Ie.type=2}}}function T(Z,H){var V=H||{};if(V.fileType=="mad")return oe(Z,V);switch(E(Z),V.fileType){case"zip":return Ne(Z,V)}var ee=function(nt){for(var tt=0,_e=0,Qe=0;Qe<nt.FileIndex.length;++Qe){var U=nt.FileIndex[Qe];if(U.content){var se=U.content.length;se>0&&(se<4096?tt+=se+63>>6:_e+=se+511>>9)}}for(var at=nt.FullPaths.length+3>>2,ct=tt+7>>3,Te=tt+127>>7,Vt=ct+_e+at+Te,bt=Vt+127>>7,$t=bt<=109?0:Math.ceil((bt-109)/127);Vt+bt+$t+127>>7>bt;)$t=++bt<=109?0:Math.ceil((bt-109)/127);var Mt=[1,$t,bt,Te,at,_e,tt,0];return nt.FileIndex[0].size=tt<<6,Mt[7]=(nt.FileIndex[0].start=Mt[0]+Mt[1]+Mt[2]+Mt[3]+Mt[4]+Mt[5])+(Mt[6]+7>>3),Mt}(Z),X=it(ee[7]<<9),te=0,ke=0;{for(te=0;te<8;++te)X.write_shift(1,R[te]);for(te=0;te<8;++te)X.write_shift(2,0);for(X.write_shift(2,62),X.write_shift(2,3),X.write_shift(2,65534),X.write_shift(2,9),X.write_shift(2,6),te=0;te<3;++te)X.write_shift(2,0);for(X.write_shift(4,0),X.write_shift(4,ee[2]),X.write_shift(4,ee[0]+ee[1]+ee[2]+ee[3]-1),X.write_shift(4,0),X.write_shift(4,4096),X.write_shift(4,ee[3]?ee[0]+ee[1]+ee[2]-1:P),X.write_shift(4,ee[3]),X.write_shift(-4,ee[1]?ee[0]-1:P),X.write_shift(4,ee[1]),te=0;te<109;++te)X.write_shift(-4,te<ee[2]?ee[1]+te:-1)}if(ee[1])for(ke=0;ke<ee[1];++ke){for(;te<236+ke*127;++te)X.write_shift(-4,te<ee[2]?ee[1]+te:-1);X.write_shift(-4,ke===ee[1]-1?P:ke+1)}var ve=function(nt){for(ke+=nt;te<ke-1;++te)X.write_shift(-4,te+1);nt&&(++te,X.write_shift(-4,P))};for(ke=te=0,ke+=ee[1];te<ke;++te)X.write_shift(-4,Q.DIFSECT);for(ke+=ee[2];te<ke;++te)X.write_shift(-4,Q.FATSECT);ve(ee[3]),ve(ee[4]);for(var J=0,be=0,we=Z.FileIndex[0];J<Z.FileIndex.length;++J)we=Z.FileIndex[J],we.content&&(be=we.content.length,!(be<4096)&&(we.start=ke,ve(be+511>>9)));for(ve(ee[6]+7>>3);X.l&511;)X.write_shift(-4,Q.ENDOFCHAIN);for(ke=te=0,J=0;J<Z.FileIndex.length;++J)we=Z.FileIndex[J],we.content&&(be=we.content.length,!(!be||be>=4096)&&(we.start=ke,ve(be+63>>6)));for(;X.l&511;)X.write_shift(-4,Q.ENDOFCHAIN);for(te=0;te<ee[4]<<2;++te){var Ie=Z.FullPaths[te];if(!Ie||Ie.length===0){for(J=0;J<17;++J)X.write_shift(4,0);for(J=0;J<3;++J)X.write_shift(4,-1);for(J=0;J<12;++J)X.write_shift(4,0);continue}we=Z.FileIndex[te],te===0&&(we.start=we.size?we.start-1:P);var He=te===0&&V.root||we.name;if(be=2*(He.length+1),X.write_shift(64,He,"utf16le"),X.write_shift(2,be),X.write_shift(1,we.type),X.write_shift(1,we.color),X.write_shift(-4,we.L),X.write_shift(-4,we.R),X.write_shift(-4,we.C),we.clsid)X.write_shift(16,we.clsid,"hex");else for(J=0;J<4;++J)X.write_shift(4,0);X.write_shift(4,we.state||0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,we.start),X.write_shift(4,we.size),X.write_shift(4,0)}for(te=1;te<Z.FileIndex.length;++te)if(we=Z.FileIndex[te],we.size>=4096)if(X.l=we.start+1<<9,fr&&Buffer.isBuffer(we.content))we.content.copy(X,X.l,0,we.size),X.l+=we.size+511&-512;else{for(J=0;J<we.size;++J)X.write_shift(1,we.content[J]);for(;J&511;++J)X.write_shift(1,0)}for(te=1;te<Z.FileIndex.length;++te)if(we=Z.FileIndex[te],we.size>0&&we.size<4096)if(fr&&Buffer.isBuffer(we.content))we.content.copy(X,X.l,0,we.size),X.l+=we.size+63&-64;else{for(J=0;J<we.size;++J)X.write_shift(1,we.content[J]);for(;J&63;++J)X.write_shift(1,0)}if(fr)X.l=X.length;else for(;X.l<X.length;)X.write_shift(1,0);return X}function A(Z,H){var V=Z.FullPaths.map(function(J){return J.toUpperCase()}),ee=V.map(function(J){var be=J.split("/");return be[be.length-(J.slice(-1)=="/"?2:1)]}),X=!1;H.charCodeAt(0)===47?(X=!0,H=V[0].slice(0,-1)+H):X=H.indexOf("/")!==-1;var te=H.toUpperCase(),ke=X===!0?V.indexOf(te):ee.indexOf(te);if(ke!==-1)return Z.FileIndex[ke];var ve=!te.match(C0);for(te=te.replace(Qs,""),ve&&(te=te.replace(C0,"!")),ke=0;ke<V.length;++ke)if((ve?V[ke].replace(C0,"!"):V[ke]).replace(Qs,"")==te||(ve?ee[ke].replace(C0,"!"):ee[ke]).replace(Qs,"")==te)return Z.FileIndex[ke];return null}var C=64,P=-2,O="d0cf11e0a1b11ae1",R=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function W(Z,H,V){d();var ee=T(Z,V);c.writeFileSync(H,ee)}function L(Z){for(var H=new Array(Z.length),V=0;V<Z.length;++V)H[V]=String.fromCharCode(Z[V]);return H.join("")}function I(Z,H){var V=T(Z,H);switch(H&&H.type||"buffer"){case"file":return d(),c.writeFileSync(H.filename,V),V;case"binary":return typeof V=="string"?V:L(V);case"base64":return fp(typeof V=="string"?V:L(V));case"buffer":if(fr)return Buffer.isBuffer(V)?V:Lo(V);case"array":return typeof V=="string"?qa(V):V}return V}var K;function D(Z){try{var H=Z.InflateRaw,V=new H;if(V._processChunk(new Uint8Array([3,0]),V._finishFlushFlag),V.bytesRead)K=Z;else throw new Error("zlib does not expose bytesRead")}catch(ee){console.error("cannot use native zlib: "+(ee.message||ee))}}function Y(Z,H){if(!K)return xt(Z,H);var V=K.InflateRaw,ee=new V,X=ee._processChunk(Z.slice(Z.l),ee._finishFlushFlag);return Z.l+=ee.bytesRead,X}function re(Z){return K?K.deflateRawSync(Z):Ke(Z)}var B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ae(Z){var H=(Z<<1|Z<<11)&139536|(Z<<5|Z<<15)&558144;return(H>>16|H>>8|H)&255}for(var fe=typeof Uint8Array<"u",ne=fe?new Uint8Array(256):[],he=0;he<256;++he)ne[he]=ae(he);function M(Z,H){var V=ne[Z&255];return H<=8?V>>>8-H:(V=V<<8|ne[Z>>8&255],H<=16?V>>>16-H:(V=V<<8|ne[Z>>16&255],V>>>24-H))}function Se(Z,H){var V=H&7,ee=H>>>3;return(Z[ee]|(V<=6?0:Z[ee+1]<<8))>>>V&3}function me(Z,H){var V=H&7,ee=H>>>3;return(Z[ee]|(V<=5?0:Z[ee+1]<<8))>>>V&7}function Pe(Z,H){var V=H&7,ee=H>>>3;return(Z[ee]|(V<=4?0:Z[ee+1]<<8))>>>V&15}function ue(Z,H){var V=H&7,ee=H>>>3;return(Z[ee]|(V<=3?0:Z[ee+1]<<8))>>>V&31}function ye(Z,H){var V=H&7,ee=H>>>3;return(Z[ee]|(V<=1?0:Z[ee+1]<<8))>>>V&127}function Ye(Z,H,V){var ee=H&7,X=H>>>3,te=(1<<V)-1,ke=Z[X]>>>ee;return V<8-ee||(ke|=Z[X+1]<<8-ee,V<16-ee)||(ke|=Z[X+2]<<16-ee,V<24-ee)||(ke|=Z[X+3]<<24-ee),ke&te}function lt(Z,H,V){var ee=H&7,X=H>>>3;return ee<=5?Z[X]|=(V&7)<<ee:(Z[X]|=V<<ee&255,Z[X+1]=(V&7)>>8-ee),H+3}function xe(Z,H,V){var ee=H&7,X=H>>>3;return V=(V&1)<<ee,Z[X]|=V,H+1}function Ae(Z,H,V){var ee=H&7,X=H>>>3;return V<<=ee,Z[X]|=V&255,V>>>=8,Z[X+1]=V,H+8}function $e(Z,H,V){var ee=H&7,X=H>>>3;return V<<=ee,Z[X]|=V&255,V>>>=8,Z[X+1]=V&255,Z[X+2]=V>>>8,H+16}function Me(Z,H){var V=Z.length,ee=2*V>H?2*V:H+5,X=0;if(V>=H)return Z;if(fr){var te=gL(ee);if(Z.copy)Z.copy(te);else for(;X<Z.length;++X)te[X]=Z[X];return te}else if(fe){var ke=new Uint8Array(ee);if(ke.set)ke.set(Z);else for(;X<V;++X)ke[X]=Z[X];return ke}return Z.length=ee,Z}function Fe(Z){for(var H=new Array(Z),V=0;V<Z;++V)H[V]=0;return H}function We(Z,H,V){var ee=1,X=0,te=0,ke=0,ve=0,J=Z.length,be=fe?new Uint16Array(32):Fe(32);for(te=0;te<32;++te)be[te]=0;for(te=J;te<V;++te)Z[te]=0;J=Z.length;var we=fe?new Uint16Array(J):Fe(J);for(te=0;te<J;++te)be[X=Z[te]]++,ee<X&&(ee=X),we[te]=0;for(be[0]=0,te=1;te<=ee;++te)be[te+16]=ve=ve+be[te-1]<<1;for(te=0;te<J;++te)ve=Z[te],ve!=0&&(we[te]=be[ve+16]++);var Ie=0;for(te=0;te<J;++te)if(Ie=Z[te],Ie!=0)for(ve=M(we[te],ee)>>ee-Ie,ke=(1<<ee+4-Ie)-1;ke>=0;--ke)H[ve|ke<<Ie]=Ie&15|te<<4;return ee}var Ze=fe?new Uint16Array(512):Fe(512),pt=fe?new Uint16Array(32):Fe(32);if(!fe){for(var Ve=0;Ve<512;++Ve)Ze[Ve]=0;for(Ve=0;Ve<32;++Ve)pt[Ve]=0}(function(){for(var Z=[],H=0;H<32;H++)Z.push(5);We(Z,pt,32);var V=[];for(H=0;H<=143;H++)V.push(8);for(;H<=255;H++)V.push(9);for(;H<=279;H++)V.push(7);for(;H<=287;H++)V.push(8);We(V,Ze,288)})();var Je=function(){for(var H=fe?new Uint8Array(32768):[],V=0,ee=0;V<ce.length-1;++V)for(;ee<ce[V+1];++ee)H[ee]=V;for(;ee<32768;++ee)H[ee]=29;var X=fe?new Uint8Array(259):[];for(V=0,ee=0;V<G.length-1;++V)for(;ee<G[V+1];++ee)X[ee]=V;function te(ve,J){for(var be=0;be<ve.length;){var we=Math.min(65535,ve.length-be),Ie=be+we==ve.length;for(J.write_shift(1,+Ie),J.write_shift(2,we),J.write_shift(2,~we&65535);we-- >0;)J[J.l++]=ve[be++]}return J.l}function ke(ve,J){for(var be=0,we=0,Ie=fe?new Uint16Array(32768):[];we<ve.length;){var He=Math.min(65535,ve.length-we);if(He<10){for(be=lt(J,be,+(we+He==ve.length)),be&7&&(be+=8-(be&7)),J.l=be/8|0,J.write_shift(2,He),J.write_shift(2,~He&65535);He-- >0;)J[J.l++]=ve[we++];be=J.l*8;continue}be=lt(J,be,+(we+He==ve.length)+2);for(var nt=0;He-- >0;){var tt=ve[we];nt=(nt<<5^tt)&32767;var _e=-1,Qe=0;if((_e=Ie[nt])&&(_e|=we&-32768,_e>we&&(_e-=32768),_e<we))for(;ve[_e+Qe]==ve[we+Qe]&&Qe<250;)++Qe;if(Qe>2){tt=X[Qe],tt<=22?be=Ae(J,be,ne[tt+1]>>1)-1:(Ae(J,be,3),be+=5,Ae(J,be,ne[tt-23]>>5),be+=3);var U=tt<8?0:tt-4>>2;U>0&&($e(J,be,Qe-G[tt]),be+=U),tt=H[we-_e],be=Ae(J,be,ne[tt]>>3),be-=3;var se=tt<4?0:tt-2>>1;se>0&&($e(J,be,we-_e-ce[tt]),be+=se);for(var at=0;at<Qe;++at)Ie[nt]=we&32767,nt=(nt<<5^ve[we])&32767,++we;He-=Qe-1}else tt<=143?tt=tt+48:be=xe(J,be,1),be=Ae(J,be,ne[tt]),Ie[nt]=we&32767,++we}be=Ae(J,be,0)-1}return J.l=(be+7)/8|0,J.l}return function(J,be){return J.length<8?te(J,be):ke(J,be)}}();function Ke(Z){var H=it(50+Math.floor(Z.length*1.1)),V=Je(Z,H);return H.slice(0,V)}var gt=fe?new Uint16Array(32768):Fe(32768),At=fe?new Uint16Array(32768):Fe(32768),Lt=fe?new Uint16Array(128):Fe(128),Bt=1,ar=1;function er(Z,H){var V=ue(Z,H)+257;H+=5;var ee=ue(Z,H)+1;H+=5;var X=Pe(Z,H)+4;H+=4;for(var te=0,ke=fe?new Uint8Array(19):Fe(19),ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J=1,be=fe?new Uint8Array(8):Fe(8),we=fe?new Uint8Array(8):Fe(8),Ie=ke.length,He=0;He<X;++He)ke[B[He]]=te=me(Z,H),J<te&&(J=te),be[te]++,H+=3;var nt=0;for(be[0]=0,He=1;He<=J;++He)we[He]=nt=nt+be[He-1]<<1;for(He=0;He<Ie;++He)(nt=ke[He])!=0&&(ve[He]=we[nt]++);var tt=0;for(He=0;He<Ie;++He)if(tt=ke[He],tt!=0){nt=ne[ve[He]]>>8-tt;for(var _e=(1<<7-tt)-1;_e>=0;--_e)Lt[nt|_e<<tt]=tt&7|He<<3}var Qe=[];for(J=1;Qe.length<V+ee;)switch(nt=Lt[ye(Z,H)],H+=nt&7,nt>>>=3){case 16:for(te=3+Se(Z,H),H+=2,nt=Qe[Qe.length-1];te-- >0;)Qe.push(nt);break;case 17:for(te=3+me(Z,H),H+=3;te-- >0;)Qe.push(0);break;case 18:for(te=11+ye(Z,H),H+=7;te-- >0;)Qe.push(0);break;default:Qe.push(nt),J<nt&&(J=nt);break}var U=Qe.slice(0,V),se=Qe.slice(V);for(He=V;He<286;++He)U[He]=0;for(He=ee;He<30;++He)se[He]=0;return Bt=We(U,gt,286),ar=We(se,At,30),H}function Be(Z,H){if(Z[0]==3&&!(Z[1]&3))return[kc(H),2];for(var V=0,ee=0,X=gL(H||1<<18),te=0,ke=X.length>>>0,ve=0,J=0;!(ee&1);){if(ee=me(Z,V),V+=3,ee>>>1)ee>>1==1?(ve=9,J=5):(V=er(Z,V),ve=Bt,J=ar);else{V&7&&(V+=8-(V&7));var be=Z[V>>>3]|Z[(V>>>3)+1]<<8;if(V+=32,be>0)for(!H&&ke<te+be&&(X=Me(X,te+be),ke=X.length);be-- >0;)X[te++]=Z[V>>>3],V+=8;continue}for(;;){!H&&ke<te+32767&&(X=Me(X,te+32767),ke=X.length);var we=Ye(Z,V,ve),Ie=ee>>>1==1?Ze[we]:gt[we];if(V+=Ie&15,Ie>>>=4,!(Ie>>>8&255))X[te++]=Ie;else{if(Ie==256)break;Ie-=257;var He=Ie<8?0:Ie-4>>2;He>5&&(He=0);var nt=te+G[Ie];He>0&&(nt+=Ye(Z,V,He),V+=He),we=Ye(Z,V,J),Ie=ee>>>1==1?pt[we]:At[we],V+=Ie&15,Ie>>>=4;var tt=Ie<4?0:Ie-2>>1,_e=ce[Ie];for(tt>0&&(_e+=Ye(Z,V,tt),V+=tt),!H&&ke<nt&&(X=Me(X,nt+100),ke=X.length);te<nt;)X[te]=X[te-_e],++te}}}return H?[X,V+7>>>3]:[X.slice(0,te),V+7>>>3]}function xt(Z,H){var V=Z.slice(Z.l||0),ee=Be(V,H);return Z.l+=ee[1],ee[0]}function mt(Z,H){if(Z)typeof console<"u"&&console.error(H);else throw new Error(H)}function It(Z,H){var V=Z;Ss(V,0);var ee=[],X=[],te={FileIndex:ee,FullPaths:X};k(te,{root:H.root});for(var ke=V.length-4;(V[ke]!=80||V[ke+1]!=75||V[ke+2]!=5||V[ke+3]!=6)&&ke>=0;)--ke;V.l=ke+4,V.l+=4;var ve=V.read_shift(2);V.l+=6;var J=V.read_shift(4);for(V.l=J,ke=0;ke<ve;++ke){V.l+=20;var be=V.read_shift(4),we=V.read_shift(4),Ie=V.read_shift(2),He=V.read_shift(2),nt=V.read_shift(2);V.l+=8;var tt=V.read_shift(4),_e=o(V.slice(V.l+Ie,V.l+Ie+He));V.l+=Ie+He+nt;var Qe=V.l;V.l=tt+4,Yt(V,be,we,te,_e),V.l=Qe}return te}function Yt(Z,H,V,ee,X){Z.l+=2;var te=Z.read_shift(2),ke=Z.read_shift(2),ve=l(Z);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var J=Z.read_shift(4),be=Z.read_shift(4),we=Z.read_shift(4),Ie=Z.read_shift(2),He=Z.read_shift(2),nt="",tt=0;tt<Ie;++tt)nt+=String.fromCharCode(Z[Z.l++]);if(He){var _e=o(Z.slice(Z.l,Z.l+He));(_e[21589]||{}).mt&&(ve=_e[21589].mt),((X||{})[21589]||{}).mt&&(ve=X[21589].mt)}Z.l+=He;var Qe=Z.slice(Z.l,Z.l+be);switch(ke){case 8:Qe=Y(Z,we);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ke)}var U=!1;te&8&&(J=Z.read_shift(4),J==134695760&&(J=Z.read_shift(4),U=!0),be=Z.read_shift(4),we=Z.read_shift(4)),be!=H&&mt(U,"Bad compressed size: "+H+" != "+be),we!=V&&mt(U,"Bad uncompressed size: "+V+" != "+we),Ge(ee,nt,Qe,{unsafe:!0,mt:ve})}function Ne(Z,H){var V=H||{},ee=[],X=[],te=it(1),ke=V.compression?8:0,ve=0,J=0,be=0,we=0,Ie=0,He=Z.FullPaths[0],nt=He,tt=Z.FileIndex[0],_e=[],Qe=0;for(J=1;J<Z.FullPaths.length;++J)if(nt=Z.FullPaths[J].slice(He.length),tt=Z.FileIndex[J],!(!tt.size||!tt.content||nt=="Sh33tJ5")){var U=we,se=it(nt.length);for(be=0;be<nt.length;++be)se.write_shift(1,nt.charCodeAt(be)&127);se=se.slice(0,se.l),_e[Ie]=BTe.buf(tt.content,0);var at=tt.content;ke==8&&(at=re(at)),te=it(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,ve),te.write_shift(2,ke),tt.mt?i(te,tt.mt):te.write_shift(4,0),te.write_shift(-4,_e[Ie]),te.write_shift(4,at.length),te.write_shift(4,tt.content.length),te.write_shift(2,se.length),te.write_shift(2,0),we+=te.length,ee.push(te),we+=se.length,ee.push(se),we+=at.length,ee.push(at),te=it(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,ve),te.write_shift(2,ke),te.write_shift(4,0),te.write_shift(-4,_e[Ie]),te.write_shift(4,at.length),te.write_shift(4,tt.content.length),te.write_shift(2,se.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,U),Qe+=te.l,X.push(te),Qe+=se.length,X.push(se),++Ie}return te=it(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Ie),te.write_shift(2,Ie),te.write_shift(4,Qe),te.write_shift(4,we),te.write_shift(2,0),xs([xs(ee),xs(X),te])}var st={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function qe(Z,H){if(Z.ctype)return Z.ctype;var V=Z.name||"",ee=V.match(/\.([^\.]+)$/);return ee&&st[ee[1]]||H&&(ee=(V=H).match(/[\.\\]([^\.\\])+$/),ee&&st[ee[1]])?st[ee[1]]:"application/octet-stream"}function ft(Z){for(var H=fp(Z),V=[],ee=0;ee<H.length;ee+=76)V.push(H.slice(ee,ee+76));return V.join(`\r
`)+`\r
`}function kt(Z){var H=Z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(be){var we=be.charCodeAt(0).toString(16).toUpperCase();return"="+(we.length==1?"0"+we:we)});H=H.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),H.charAt(0)==`
`&&(H="=0D"+H.slice(1)),H=H.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var V=[],ee=H.split(`\r
`),X=0;X<ee.length;++X){var te=ee[X];if(te.length==0){V.push("");continue}for(var ke=0;ke<te.length;){var ve=76,J=te.slice(ke,ke+ve);J.charAt(ve-1)=="="?ve--:J.charAt(ve-2)=="="?ve-=2:J.charAt(ve-3)=="="&&(ve-=3),J=te.slice(ke,ke+ve),ke+=ve,ke<te.length&&(J+="="),V.push(J)}}return V.join(`\r
`)}function Oe(Z){for(var H=[],V=0;V<Z.length;++V){for(var ee=Z[V];V<=Z.length&&ee.charAt(ee.length-1)=="=";)ee=ee.slice(0,ee.length-1)+Z[++V];H.push(ee)}for(var X=0;X<H.length;++X)H[X]=H[X].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return qa(H.join(`\r
`))}function je(Z,H,V){for(var ee="",X="",te="",ke,ve=0;ve<10;++ve){var J=H[ve];if(!J||J.match(/^\s*$/))break;var be=J.match(/^(.*?):\s*([^\s].*)$/);if(be)switch(be[1].toLowerCase()){case"content-location":ee=be[2].trim();break;case"content-type":te=be[2].trim();break;case"content-transfer-encoding":X=be[2].trim();break}}switch(++ve,X.toLowerCase()){case"base64":ke=qa(ai(H.slice(ve).join("")));break;case"quoted-printable":ke=Oe(H.slice(ve));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+X)}var we=Ge(Z,ee.slice(V.length),ke,{unsafe:!0});te&&(we.ctype=te)}function Re(Z,H){if(L(Z.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var V=H&&H.root||"",ee=(fr&&Buffer.isBuffer(Z)?Z.toString("binary"):L(Z)).split(`\r
`),X=0,te="";for(X=0;X<ee.length;++X)if(te=ee[X],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),V||(V=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,V.length)!=V))for(;V.length>0&&(V=V.slice(0,V.length-1),V=V.slice(0,V.lastIndexOf("/")+1),te.slice(0,V.length)!=V););var ke=(ee[1]||"").match(/boundary="(.*?)"/);if(!ke)throw new Error("MAD cannot find boundary");var ve="--"+(ke[1]||""),J=[],be=[],we={FileIndex:J,FullPaths:be};k(we);var Ie,He=0;for(X=0;X<ee.length;++X){var nt=ee[X];nt!==ve&&nt!==ve+"--"||(He++&&je(we,ee.slice(Ie,X),V),Ie=X)}return we}function oe(Z,H){var V=H||{},ee=V.boundary||"SheetJS";ee="------="+ee;for(var X=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ee.slice(2)+'"',"","",""],te=Z.FullPaths[0],ke=te,ve=Z.FileIndex[0],J=1;J<Z.FullPaths.length;++J)if(ke=Z.FullPaths[J].slice(te.length),ve=Z.FileIndex[J],!(!ve.size||!ve.content||ke=="Sh33tJ5")){ke=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Qe){return"_x"+Qe.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Qe){return"_u"+Qe.charCodeAt(0).toString(16)+"_"});for(var be=ve.content,we=fr&&Buffer.isBuffer(be)?be.toString("binary"):L(be),Ie=0,He=Math.min(1024,we.length),nt=0,tt=0;tt<=He;++tt)(nt=we.charCodeAt(tt))>=32&&nt<128&&++Ie;var _e=Ie>=He*4/5;X.push(ee),X.push("Content-Location: "+(V.root||"file:///C:/SheetJS/")+ke),X.push("Content-Transfer-Encoding: "+(_e?"quoted-printable":"base64")),X.push("Content-Type: "+qe(ve,ke)),X.push(""),X.push(_e?kt(we):ft(we))}return X.push(ee+`--\r
`),X.join(`\r
`)}function Ue(Z){var H={};return k(H,Z),H}function Ge(Z,H,V,ee){var X=ee&&ee.unsafe;X||k(Z);var te=!X&&qt.find(Z,H);if(!te){var ke=Z.FullPaths[0];H.slice(0,ke.length)==ke?ke=H:(ke.slice(-1)!="/"&&(ke+="/"),ke=(ke+H).replace("//","/")),te={name:a(H),type:2},Z.FileIndex.push(te),Z.FullPaths.push(ke),X||qt.utils.cfb_gc(Z)}return te.content=V,te.size=V?V.length:0,ee&&(ee.CLSID&&(te.clsid=ee.CLSID),ee.mt&&(te.mt=ee.mt),ee.ct&&(te.ct=ee.ct)),te}function ie(Z,H){k(Z);var V=qt.find(Z,H);if(V){for(var ee=0;ee<Z.FileIndex.length;++ee)if(Z.FileIndex[ee]==V)return Z.FileIndex.splice(ee,1),Z.FullPaths.splice(ee,1),!0}return!1}function ge(Z,H,V){k(Z);var ee=qt.find(Z,H);if(ee){for(var X=0;X<Z.FileIndex.length;++X)if(Z.FileIndex[X]==ee)return Z.FileIndex[X].name=a(V),Z.FullPaths[X]=V,!0}return!1}function ut(Z){E(Z,!0)}return t.find=A,t.read=w,t.parse=u,t.write=I,t.writeFile=W,t.utils={cfb_new:Ue,cfb_add:Ge,cfb_del:ie,cfb_mov:ge,cfb_gc:ut,ReadShift:Y0,CheckField:Ez,prep_blob:Ss,bconcat:xs,use_zlib:D,_deflateRaw:Ke,_inflateRaw:xt,consts:Q},t}();let dc;function UTe(e){dc=e}function zTe(e){return typeof e=="string"?tx(e):Array.isArray(e)?fTe(e):e}function nx(e,t,r){if(typeof dc<"u"&&dc.writeFileSync)return r?dc.writeFileSync(e,t,r):dc.writeFileSync(e,t);if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=tx(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var s=r=="utf8"?Cl(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,e);if(typeof Blob<"u"){var a=new Blob([zTe(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Mc(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function WTe(e){if(typeof dc<"u")return dc.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(s){if(!s.message||!s.message.match(/onstruct/))throw s}throw new Error("Cannot access file "+e)}function Rn(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function kL(e,t){for(var r=[],s=Rn(e),a=0;a!==s.length;++a)r[e[s[a]][t]]==null&&(r[e[s[a]][t]]=s[a]);return r}function J1(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}function K1(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]=parseInt(r[s],10);return t}function VTe(e){for(var t=[],r=Rn(e),s=0;s!==r.length;++s)t[e[r[s]]]==null&&(t[e[r[s]]]=[]),t[e[r[s]]].push(r[s]);return t}var nb=new Date(1899,11,30,0,0,0);function as(e,t){var r=e.getTime(),s=nb.getTime()+(e.getTimezoneOffset()-nb.getTimezoneOffset())*6e4;return(r-s)/(24*60*60*1e3)}var mz=new Date,HTe=nb.getTime()+(mz.getTimezoneOffset()-nb.getTimezoneOffset())*6e4,SL=mz.getTimezoneOffset();function X1(e){var t=new Date;return t.setTime(e*24*60*60*1e3+HTe),t.getTimezoneOffset()!==SL&&t.setTime(t.getTime()+(t.getTimezoneOffset()-SL)*6e4),t}function qTe(e){var t=0,r=0,s=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(s=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(s)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var CL=new Date("2017-02-19T19:06:09.000Z"),fz=isNaN(CL.getFullYear())?new Date("2/19/17"):CL,GTe=fz.getFullYear()==2017;function mn(e,t){var r=new Date(e);if(GTe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(fz.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Kd(e,t){if(fr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Cl(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Cl(QU(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Cl(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Cl(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var s=[],a=0;a!=e.length;++a)s.push(String.fromCharCode(e[a]));return s.join("")}function Jr(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Jr(e[r]));return t}function Tn(e,t){for(var r="";r.length<t;)r+=e;return r}function al(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(s)))?t/r:t}var JTe=["january","february","march","april","may","june","july","august","september","october","november","december"];function hf(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&JTe.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return s<0||s>8099?r:(a>0||i>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var KTe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,s,a){if(e||typeof s=="string")return r.split(s);for(var i=r.split(s),l=[i[0]],o=1;o<i.length;++o)l.push(a),l.push(i[o]);return l}}();function hz(e){return e?e.content&&e.type?Kd(e.content,!0):e.data?cm(e.data):e.asNodeBuffer&&fr?cm(e.asNodeBuffer().toString("binary")):e.asBinary?cm(e.asBinary()):e._data&&e._data.getContent?cm(Kd(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function pz(e){if(!e)return null;if(e.data)return Qv(e.data);if(e.asNodeBuffer&&fr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Qv(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function XTe(e){return e&&e.name.slice(-4)===".bin"?pz(e):hz(e)}function yi(e,t){for(var r=e.FullPaths||Rn(e.files),s=t.toLowerCase().replace(/[\/]/g,"\\"),a=s.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(s==l||a==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function b4(e,t){var r=yi(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Hn(e,t,r){if(!r)return XTe(b4(e,t));if(!t)return null;try{return Hn(e,t)}catch{return null}}function Ga(e,t,r){if(!r)return hz(b4(e,t));if(!t)return null;try{return Ga(e,t)}catch{return null}}function YTe(e,t,r){return pz(b4(e,t))}function AL(e){for(var t=e.FullPaths||Rn(e.files),r=[],s=0;s<t.length;++s)t[s].slice(-1)!="/"&&r.push(t[s].replace(/^Root Entry[\/]/,""));return r.sort()}function mr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return fr?s=Lo(r):s=hTe(r),qt.utils.cfb_add(e,t,s)}qt.utils.cfb_add(e,t,r)}else e.file(t,r)}function j4(){return qt.utils.cfb_new()}function xz(e,t){switch(t.type){case"base64":return qt.read(e,{type:"base64"});case"binary":return qt.read(e,{type:"binary"});case"buffer":case"array":return qt.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function A0(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var s=e.split("/");s.length!==0;){var a=s.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Un=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ZTe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,EL=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,QTe=/<[^>]*>/g,na=Un.match(EL)?EL:QTe,e5e=/<\w*:/,t5e=/<(\/?)\w+:/;function sr(e,t,r){for(var s={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(s[0]=e.slice(0,a)),a===e.length)return s;var l=e.match(ZTe),o=0,c="",d=0,u="",m="",f=1;if(l)for(d=0;d!=l.length;++d){for(m=l[d],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(u=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(f=(a=m.charCodeAt(i+1))==34||a==39?1:0,c=m.slice(i+1+f,m.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),s[u]=c,s[u.toLowerCase()]=c;else{var y=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(s[y]&&u.slice(o-3,o)=="ext")continue;s[y]=c,s[y.toLowerCase()]=c}}return s}function ql(e){return e.replace(t5e,"<$1")}var gz={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},_4=J1(gz),kr=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(s){var a=s+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(o,c){return gz[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,l)+r(a.slice(l+3))}}(),w4=/[&<>'"]/g,r5e=/[\u0000-\u0008\u000b-\u001f]/g;function Fr(e){var t=e+"";return t.replace(w4,function(r){return _4[r]}).replace(r5e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function TL(e){return Fr(e).replace(/ /g,"_x0020_")}var yz=/[\u0000-\u001f]/g;function N4(e){var t=e+"";return t.replace(w4,function(r){return _4[r]}).replace(/\n/g,"<br/>").replace(yz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function n5e(e){var t=e+"";return t.replace(w4,function(r){return _4[r]}).replace(yz,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var PL=function(){var e=/&#(\d+);/g;function t(r,s){return String.fromCharCode(parseInt(s,10))}return function(s){return s.replace(e,t)}}();function s5e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function on(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $_(e){for(var t="",r=0,s=0,a=0,i=0,l=0,o=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),s>191&&s<224){l=(s&31)<<6,l|=a&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((s&7)<<18|(a&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function OL(e){var t=kc(2*e.length),r,s,a=1,i=0,l=0,o;for(s=0;s<e.length;s+=a)a=1,(o=e.charCodeAt(s))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(s+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function RL(e){return Lo(e,"binary").toString("utf8")}var ag="foo bar baz",Wr=fr&&(RL(ag)==$_(ag)&&RL||OL(ag)==$_(ag)&&OL)||$_,Cl=fr?function(e){return Lo(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,a=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,a=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},pp=function(){var e={};return function(r,s){var a=r+"|"+(s||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",s||"")}}(),vz=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)s=s.replace(e[a][0],e[a][1]);return s}}(),a5e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),i5e=/<\/?(?:vt:)?variant>/g,l5e=/<(?:vt:)([^>]*)>([\s\S]*)</;function LL(e,t){var r=sr(e),s=e.match(a5e(r.baseType))||[],a=[];if(s.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+s.length+" != "+r.size);return a}return s.forEach(function(i){var l=i.replace(i5e,"").match(l5e);l&&a.push({v:Wr(l[2]),t:l[1]})}),a}var bz=/(^\s|\s$|\n)/;function As(e,t){return"<"+e+(t.match(bz)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function xp(e){return Rn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function St(e,t,r){return"<"+e+(r!=null?xp(r):"")+(t!=null?(t.match(bz)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function jk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function o5e(e,t){switch(typeof e){case"string":var r=St("vt:lpwstr",Fr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return St((e|0)==e?"vt:i4":"vt:r8",Fr(String(e)));case"boolean":return St("vt:bool",e?"true":"false")}if(e instanceof Date)return St("vt:filetime",jk(e));throw new Error("Unable to serialize "+e)}function k4(e){if(fr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Wr(Mc(g4(e)));throw new Error("Bad input format: expected Buffer or string")}var gp=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,rs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},fu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],za={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function c5e(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return s==2047?a==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,a+=Math.pow(2,52)),r*Math.pow(2,s-52)*a)}function d5e(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,l=s?-t:t;isFinite(l)?l==0?a=i=0:(a=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|s}var IL=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var a=0,i=e[0][s].length;a<i;a+=r)t.push.apply(t,e[0][s].slice(a,a+r));return t},FL=fr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Lo(t)})):IL(e)}:IL,DL=function(e,t,r){for(var s=[],a=t;a<r;a+=2)s.push(String.fromCharCode(oo(e,a)));return s.join("").replace(Qs,"")},Y1=fr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Qs,""):DL(e,t,r)}:DL,$L=function(e,t,r){for(var s=[],a=t;a<t+r;++a)s.push(("0"+e[a].toString(16)).slice(-2));return s.join("")},jz=fr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):$L(e,t,r)}:$L,ML=function(e,t,r){for(var s=[],a=t;a<r;a++)s.push(String.fromCharCode(zu(e,a)));return s.join("")},Bf=fr?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):ML(t,r,s)}:ML,_z=function(e,t){var r=ps(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},S4=_z,wz=function(e,t){var r=ps(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},C4=wz,Nz=function(e,t){var r=2*ps(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},A4=Nz,kz=function(t,r){var s=ps(t,r);return s>0?Y1(t,r+4,r+4+s):""},E4=kz,Sz=function(e,t){var r=ps(e,t);return r>0?Bf(e,t+4,t+4+r):""},T4=Sz,Cz=function(e,t){return c5e(e,t)},sb=Cz,P4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};fr&&(S4=function(t,r){if(!Buffer.isBuffer(t))return _z(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},C4=function(t,r){if(!Buffer.isBuffer(t))return wz(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},A4=function(t,r){if(!Buffer.isBuffer(t))return Nz(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},E4=function(t,r){if(!Buffer.isBuffer(t))return kz(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},T4=function(t,r){if(!Buffer.isBuffer(t))return Sz(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},sb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Cz(t,r)},P4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function Az(){Y1=function(e,t,r){return jr.utils.decode(1200,e.slice(t,r)).replace(Qs,"")},Bf=function(e,t,r){return jr.utils.decode(65001,e.slice(t,r))},S4=function(e,t){var r=ps(e,t);return r>0?jr.utils.decode(Gd,e.slice(t+4,t+4+r-1)):""},C4=function(e,t){var r=ps(e,t);return r>0?jr.utils.decode(ri,e.slice(t+4,t+4+r-1)):""},A4=function(e,t){var r=2*ps(e,t);return r>0?jr.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},E4=function(e,t){var r=ps(e,t);return r>0?jr.utils.decode(1200,e.slice(t+4,t+4+r)):""},T4=function(e,t){var r=ps(e,t);return r>0?jr.utils.decode(65001,e.slice(t+4,t+4+r)):""}}typeof jr<"u"&&Az();var zu=function(e,t){return e[t]},oo=function(e,t){return e[t+1]*256+e[t]},u5e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ps=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ad=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},m5e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Y0(e,t){var r="",s,a,i=[],l,o,c,d;switch(t){case"dbcs":if(d=this.l,fr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(oo(this,d)),d+=2;e*=2;break;case"utf8":r=Bf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Y1(this,this.l,this.l+e);break;case"wstr":if(typeof jr<"u")r=jr.utils.decode(ri,this.slice(this.l,this.l+2*e));else return Y0.call(this,e,"dbcs");e=2*e;break;case"lpstr-ansi":r=S4(this,this.l),e=4+ps(this,this.l);break;case"lpstr-cp":r=C4(this,this.l),e=4+ps(this,this.l);break;case"lpwstr":r=A4(this,this.l),e=4+2*ps(this,this.l);break;case"lpp4":e=4+ps(this,this.l),r=E4(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ps(this,this.l),r=T4(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=zu(this,this.l+e++))!==0;)i.push(S0(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=oo(this,this.l+e))!==0;)i.push(S0(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=zu(this,d),this.l=d+1,o=Y0.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(S0(oo(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":if(typeof jr<"u"){r=jr.utils.decode(ri,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=zu(this,d),this.l=d+1,o=Y0.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(S0(zu(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return s=zu(this,this.l),this.l++,s;case 2:return s=(t==="i"?u5e:oo)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(s=(e>0?ad:m5e)(this,this.l),this.l+=4,s):(a=ps(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=sb(this,this.l):a=sb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=jz(this,this.l,e);break}}return this.l+=e,r}var f5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},h5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},p5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function x5e(e,t,r){var s=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)p5e(this,t.charCodeAt(a),this.l+2*a);s=2*t.length}else if(r==="sbcs"){if(typeof jr<"u"&&Gd==874)for(a=0;a!=t.length;++a){var i=jr.utils.encode(Gd,t.charAt(a));this[this.l+a]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;s=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var l=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,f5e(this,t,this.l);break;case 8:if(s=8,r==="f"){d5e(this,t,this.l);break}case 16:break;case-4:s=4,h5e(this,t,this.l);break}return this.l+=s,this}function Ez(e,t){var r=jz(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ss(e,t){e.l=t,e.read_shift=Y0,e.chk=Ez,e.write_shift=x5e}function ra(e,t){e.l+=t}function it(e){var t=kc(e);return Ss(t,0),t}function Io(e,t,r){if(e){var s,a,i;Ss(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var d=wp[o]||wp[65535];for(s=e.read_shift(1),i=s&127,a=1;a<4&&s&128;++a)i+=((s=e.read_shift(1))&127)<<7*a;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,o))return}}}function La(){var e=[],t=fr?256:2048,r=function(d){var u=it(d);return Ss(u,0),u},s=r(t),a=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},i=function(d){return s&&d<s.length-s.l?s:(a(),s=r(Math.max(d+1,t)))},l=function(){return a(),xs(e)},o=function(d){a(),s=d,s.l==null&&(s.l=s.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function ht(e,t,r,s){var a=+t,i;if(!isNaN(a)){s||(s=wp[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,s>=128&&++i,s>=16384&&++i,s>=2097152&&++i;var l=e.next(i);a<=127?l.write_shift(1,a):(l.write_shift(1,(a&127)+128),l.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(s>=128)l.write_shift(1,(s&127)+128),s>>=7;else{l.write_shift(1,s);break}s>0&&P4(r)&&e.push(r)}}function Z0(e,t,r){var s=Jr(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function BL(e,t,r){var s=Jr(e);return s.s=Z0(s.s,t.s,r),s.e=Z0(s.e,t.s,r),s}function Q0(e,t){if(e.cRel&&e.c<0)for(e=Jr(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Jr(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=nr(e);return!e.cRel&&e.cRel!=null&&(r=v5e(r)),!e.rRel&&e.rRel!=null&&(r=g5e(r)),r}function M_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+un(e.s.c)+":"+(e.e.cRel?"":"$")+un(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Pn(e.s.r)+":"+(e.e.rRel?"":"$")+Pn(e.e.r):Q0(e.s,t.biff)+":"+Q0(e.e,t.biff)}function O4(e){return parseInt(y5e(e),10)-1}function Pn(e){return""+(e+1)}function g5e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function y5e(e){return e.replace(/\$(\d+)$/,"$1")}function R4(e){for(var t=b5e(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function un(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function v5e(e){return e.replace(/^([A-Z])/,"$$$1")}function b5e(e){return e.replace(/^\$([A-Z])/,"$1")}function j5e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function _n(e){for(var t=0,r=0,s=0;s<e.length;++s){var a=e.charCodeAt(s);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function nr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function pa(e){var t=e.indexOf(":");return t==-1?{s:_n(e),e:_n(e)}:{s:_n(e.slice(0,t)),e:_n(e.slice(t+1))}}function ur(e,t){return typeof t>"u"||typeof t=="number"?ur(e.s,e.e):(typeof e!="string"&&(e=nr(e)),typeof t!="string"&&(t=nr(t)),e==t?e:e+":"+t)}function vr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,a=0,i=e.length;for(r=0;s<i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.s.c=--r,r=0;s<i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;if(t.s.r=--r,s===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.e.c=--r,r=0;s!=i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;return t.e.r=--r,t}function UL(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ii(e.z,r?as(t):t)}catch{}try{return e.w=ii((e.XF||{}).numFmtId||(r?14:0),r?as(t):t)}catch{return""+t}}function Bl(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Fo[e.v]||e.v:t==null?UL(e,e.v):UL(e,t))}function Bc(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function Tz(e,t,r){var s=r||{},a=e?Array.isArray(e):s.dense,i=e||(a?[]:{}),l=0,o=0;if(i&&s.origin!=null){if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?_n(s.origin):s.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=vr(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[m].length;++f)if(!(typeof t[m][f]>"u")){var y={v:t[m][f]},x=l+m,p=o+f;if(d.s.r>x&&(d.s.r=x),d.s.c>p&&(d.s.c=p),d.e.r<x&&(d.e.r=x),d.e.c<p&&(d.e.c=p),t[m][f]&&typeof t[m][f]=="object"&&!Array.isArray(t[m][f])&&!(t[m][f]instanceof Date))y=t[m][f];else if(Array.isArray(y.v)&&(y.f=t[m][f][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(s.nullError)y.t="e",y.v=0;else if(s.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?y.t="n":typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=s.dateNF||Jt[14],s.cellDates?(y.t="d",y.w=ii(y.z,as(y.v))):(y.t="n",y.v=as(y.v),y.w=ii(y.z,y.v))):y.t="s";if(a)i[x]||(i[x]=[]),i[x][p]&&i[x][p].z&&(y.z=i[x][p].z),i[x][p]=y;else{var h=nr({c:p,r:x});i[h]&&i[h].z&&(y.z=i[h].z),i[h]=y}}}return d.s.c<1e7&&(i["!ref"]=ur(d)),i}function Uf(e,t){return Tz(null,e,t)}function _5e(e){return e.read_shift(4,"i")}function il(e,t){return t||(t=it(4)),t.write_shift(4,e),t}function ea(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function gs(e,t){var r=!1;return t==null&&(r=!0,t=it(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function w5e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function N5e(e,t){return t||(t=it(4)),t.write_shift(2,0),t.write_shift(2,0),t}function L4(e,t){var r=e.l,s=e.read_shift(1),a=ea(e),i=[],l={t:a,h:a};if(s&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(w5e(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function k5e(e,t){var r=!1;return t==null&&(r=!0,t=it(15+4*e.t.length)),t.write_shift(1,0),gs(e.t,t),r?t.slice(0,t.l):t}var S5e=L4;function C5e(e,t){var r=!1;return t==null&&(r=!0,t=it(23+4*e.t.length)),t.write_shift(1,1),gs(e.t,t),t.write_shift(4,1),N5e({},t),r?t.slice(0,t.l):t}function Di(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function hu(e,t){return t==null&&(t=it(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function pu(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function xu(e,t){return t==null&&(t=it(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var A5e=ea,Pz=gs;function I4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function ab(e,t){var r=!1;return t==null&&(r=!0,t=it(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var E5e=ea,_k=I4,F4=ab;function D4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var a=s===0?sb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ad(t,0)>>2;return r?a/100:a}function Oz(e,t){t==null&&(t=it(4));var r=0,s=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?s=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(s=1,r=1),s)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Rz(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function T5e(e,t){return t||(t=it(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var gu=Rz,zf=T5e;function Xs(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Xd(e,t){return(t||it(8)).write_shift(8,e,"f")}function P5e(e){var t={},r=e.read_shift(1),s=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=a;var d=Sd[a];d&&(t.rgb=vp(d));break;case 2:t.rgb=vp([l,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function ib(e,t){if(t||(t=it(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var s=e.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),t.write_shift(1,parseInt(s.slice(0,2),16)),t.write_shift(1,parseInt(s.slice(2,4),16)),t.write_shift(1,parseInt(s.slice(4,6),16)),t.write_shift(1,255)}return t}function O5e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function R5e(e,t){t||(t=it(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Lz(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},s=e.read_shift(4);switch(s){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(s>400)throw new Error("Unsupported Clipboard: "+s.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function L5e(e){return Lz(e,1)}function I5e(e){return Lz(e,2)}var $4=2,Na=3,ig=11,zL=12,lb=19,lg=64,F5e=65,D5e=71,$5e=4108,M5e=4126,ms=80,Iz=81,B5e=[ms,Iz],wk={1:{n:"CodePage",t:$4},2:{n:"Category",t:ms},3:{n:"PresentationFormat",t:ms},4:{n:"ByteCount",t:Na},5:{n:"LineCount",t:Na},6:{n:"ParagraphCount",t:Na},7:{n:"SlideCount",t:Na},8:{n:"NoteCount",t:Na},9:{n:"HiddenCount",t:Na},10:{n:"MultimediaClipCount",t:Na},11:{n:"ScaleCrop",t:ig},12:{n:"HeadingPairs",t:$5e},13:{n:"TitlesOfParts",t:M5e},14:{n:"Manager",t:ms},15:{n:"Company",t:ms},16:{n:"LinksUpToDate",t:ig},17:{n:"CharacterCount",t:Na},19:{n:"SharedDoc",t:ig},22:{n:"HyperlinksChanged",t:ig},23:{n:"AppVersion",t:Na,p:"version"},24:{n:"DigSig",t:F5e},26:{n:"ContentType",t:ms},27:{n:"ContentStatus",t:ms},28:{n:"Language",t:ms},29:{n:"Version",t:ms},255:{},2147483648:{n:"Locale",t:lb},2147483651:{n:"Behavior",t:lb},1919054434:{}},Nk={1:{n:"CodePage",t:$4},2:{n:"Title",t:ms},3:{n:"Subject",t:ms},4:{n:"Author",t:ms},5:{n:"Keywords",t:ms},6:{n:"Comments",t:ms},7:{n:"Template",t:ms},8:{n:"LastAuthor",t:ms},9:{n:"RevNumber",t:ms},10:{n:"EditTime",t:lg},11:{n:"LastPrinted",t:lg},12:{n:"CreatedDate",t:lg},13:{n:"ModifiedDate",t:lg},14:{n:"PageCount",t:Na},15:{n:"WordCount",t:Na},16:{n:"CharCount",t:Na},17:{n:"Thumbnail",t:D5e},18:{n:"Application",t:ms},19:{n:"DocSecurity",t:Na},255:{},2147483648:{n:"Locale",t:lb},2147483651:{n:"Behavior",t:lb},1919054434:{}},WL={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},U5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function z5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var W5e=z5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sd=Jr(W5e),Fo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Fz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},kk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},og={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function M4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function V5e(e){var t=M4();if(!e||!e.match)return t;var r={};if((e.match(na)||[]).forEach(function(s){var a=sr(s);switch(a[0].replace(e5e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[kk[a.ContentType]]!==void 0&&t[kk[a.ContentType]].push(a.PartName);break}}),t.xmlns!==rs.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Dz(e,t){var r=VTe(kk),s=[],a;s[s.length]=Un,s[s.length]=St("Types",null,{xmlns:rs.CT,"xmlns:xsd":rs.xsd,"xmlns:xsi":rs.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return St("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],s[s.length]=St("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:og[c][t.bookType]||og[c].xlsx}))},l=function(c){(e[c]||[]).forEach(function(d){s[s.length]=St("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:og[c][t.bookType]||og[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(d){s[s.length]=St("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var hr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yp(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function eh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var s={};return(e.match(na)||[]).forEach(function(a){var i=sr(a);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:A0(i.Target,t);r[o]=l,s[i.Id]=l}}),r["!id"]=s,r}function km(e){var t=[Un,St("Relationships",null,{xmlns:rs.RELS})];return Rn(e["!id"]).forEach(function(r){t[t.length]=St("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ir(e,t,r,s,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=s,a.Target=r,[hr.HLINK,hr.XPATH,hr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var H5e="application/vnd.oasis.opendocument.spreadsheet";function q5e(e,t){for(var r=k4(e),s,a;s=gp.exec(r);)switch(s[3]){case"manifest":break;case"file-entry":if(a=sr(s[0],!1),a.path=="/"&&a.type!==H5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw s}}function G5e(e){var t=[Un];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function VL(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function J5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function K5e(e){var t=[Un];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(VL(e[r][0],e[r][1])),t.push(J5e("",e[r][0]));return t.push(VL("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function $z(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+mp.version+"</meta:generator></office:meta></office:document-meta>"}var Ci=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],X5e=function(){for(var e=new Array(Ci.length),t=0;t<Ci.length;++t){var r=Ci[t],s="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+s+"[^>]*>([\\s\\S]*?)</"+s+">")}return e}();function Mz(e){var t={};e=Wr(e);for(var r=0;r<Ci.length;++r){var s=Ci[r],a=e.match(X5e[r]);a!=null&&a.length>0&&(t[s[1]]=kr(a[1])),s[2]==="date"&&t[s[1]]&&(t[s[1]]=mn(t[s[1]]))}return t}function B_(e,t,r,s,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Fr(t),s[s.length]=r?St(e,t,r):As(e,t))}function Bz(e,t){var r=t||{},s=[Un,St("cp:coreProperties",null,{"xmlns:cp":rs.CORE_PROPS,"xmlns:dc":rs.dc,"xmlns:dcterms":rs.dcterms,"xmlns:dcmitype":rs.dcmitype,"xmlns:xsi":rs.xsi})],a={};if(!e&&!r.Props)return s.join("");e&&(e.CreatedDate!=null&&B_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:jk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,a),e.ModifiedDate!=null&&B_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:jk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,a));for(var i=0;i!=Ci.length;++i){var l=Ci[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&B_(l[0],o,null,s,a)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var Cd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Uz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function zz(e,t,r,s){var a=[];if(typeof e=="string")a=LL(e,s);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(u){return{v:u}}));var l=typeof t=="string"?LL(t,s).map(function(u){return u.v}):t,o=0,c=0;if(l.length>0)for(var d=0;d!==a.length;d+=2){switch(c=+a[d+1].v,a[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function Y5e(e,t,r){var s={};return t||(t={}),e=Wr(e),Cd.forEach(function(a){var i=(e.match(pp(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=kr(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));l&&l.length>0&&(s[a[1]]=l[1]);break}}),s.HeadingPairs&&s.TitlesOfParts&&zz(s.HeadingPairs,s.TitlesOfParts,t,r),t}function Wz(e){var t=[],r=St;return e||(e={}),e.Application="SheetJS",t[t.length]=Un,t[t.length]=St("Properties",null,{xmlns:rs.EXT_PROPS,"xmlns:vt":rs.vt}),Cd.forEach(function(s){if(e[s[1]]!==void 0){var a;switch(s[2]){case"string":a=Fr(String(e[s[1]]));break;case"bool":a=e[s[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(s[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(s){return"<vt:lpstr>"+Fr(s)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Z5e=/<[^>]+>[^<]*/g;function Q5e(e,t){var r={},s="",a=e.match(Z5e);if(a)for(var i=0;i!=a.length;++i){var l=a[i],o=sr(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":s=kr(o.name);break;case"</property>":s=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[s]=kr(u);break;case"bool":r[s]=on(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[s]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[s]=parseFloat(u);break;case"filetime":case"date":r[s]=mn(u);break;case"cy":case"error":r[s]=kr(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function Vz(e){var t=[Un,St("Properties",null,{xmlns:rs.CUST_PROPS,"xmlns:vt":rs.vt})];if(!e)return t.join("");var r=1;return Rn(e).forEach(function(a){++r,t[t.length]=St("property",o5e(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Fr(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Sk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},U_;function e6e(e,t,r){U_||(U_=J1(Sk)),t=U_[t]||t,e[t]=r}function t6e(e,t){var r=[];return Rn(Sk).map(function(s){for(var a=0;a<Ci.length;++a)if(Ci[a][1]==s)return Ci[a];for(a=0;a<Cd.length;++a)if(Cd[a][1]==s)return Cd[a];throw s}).forEach(function(s){if(e[s[1]]!=null){var a=t&&t.Props&&t.Props[s[1]]!=null?t.Props[s[1]]:e[s[1]];switch(s[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(As(Sk[s[1]]||s[1],a))}}),St("DocumentProperties",r.join(""),{xmlns:za.o})}function r6e(e,t){var r=["Worksheets","SheetNames"],s="CustomDocumentProperties",a=[];return e&&Rn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<Ci.length;++l)if(i==Ci[l][1])return;for(l=0;l<Cd.length;++l)if(i==Cd[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(St(TL(i),o,{"dt:dt":c}))}}),t&&Rn(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),a.push(St(TL(i),l,{"dt:dt":o}))}}),"<"+s+' xmlns="'+za.o+'">'+a.join("")+"</"+s+">"}function B4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function n6e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,s=r%Math.pow(2,32),a=(r-s)/Math.pow(2,32);s*=1e7,a*=1e7;var i=s/Math.pow(2,32)|0;i>0&&(s=s%Math.pow(2,32),a+=i);var l=it(8);return l.write_shift(4,s),l.write_shift(4,a),l}function Hz(e,t,r){var s=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-s&3;)++e.l;return a}function qz(e,t,r){var s=e.read_shift(0,"lpwstr");return s}function Gz(e,t,r){return t===31?qz(e):Hz(e,t,r)}function Ck(e,t,r){return Gz(e,t,r===!1?0:4)}function s6e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Gz(e,t,0)}function a6e(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s){var a=e.l;r[s]=e.read_shift(0,"lpwstr").replace(Qs,""),e.l-a&2&&(e.l+=2)}return r}function i6e(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s)r[s]=e.read_shift(0,"lpstr-cp").replace(Qs,"");return r}function l6e(e){var t=e.l,r=ob(e,Iz);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var s=ob(e,Na);return[r,s]}function o6e(e){for(var t=e.read_shift(4),r=[],s=0;s<t/2;++s)r.push(l6e(e));return r}function HL(e,t){for(var r=e.read_shift(4),s={},a=0;a!=r;++a){var i=e.read_shift(4),l=e.read_shift(4);s[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(Qs,"").replace(C0,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),s}function Jz(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function c6e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function ob(e,t,r){var s=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==zL&&s!==t&&B5e.indexOf(t)===-1&&!((t&65534)==4126&&(s&65534)==4126))throw new Error("Expected type "+t+" saw "+s);switch(t===zL?s:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Hz(e,s,4).replace(Qs,"");case 31:return qz(e);case 64:return B4(e);case 65:return Jz(e);case 71:return c6e(e);case 80:return Ck(e,s,!i.raw).replace(Qs,"");case 81:return s6e(e,s).replace(Qs,"");case 4108:return o6e(e);case 4126:case 4127:return s==4127?a6e(e):i6e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function qL(e,t){var r=it(4),s=it(4);switch(r.write_shift(4,e==80?31:e),e){case 3:s.write_shift(-4,t);break;case 5:s=it(8),s.write_shift(8,t,"f");break;case 11:s.write_shift(4,t?1:0);break;case 64:s=n6e(t);break;case 31:case 80:for(s=it(4+2*(t.length+1)+(t.length%2?0:2)),s.write_shift(4,t.length+1),s.write_shift(0,t,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return xs([r,s])}function GL(e,t){var r=e.l,s=e.read_shift(4),a=e.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=a;++l){var u=e.read_shift(4),m=e.read_shift(4);i[l]=[u,m+r]}i.sort(function(b,j){return b[1]-j[1]});var f={};for(l=0;l!=a;++l){if(e.l!==i[l][1]){var y=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,y=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],y=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],y=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(y=!1,e.l=i[l][1]),y)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var x=t[i[l][0]];if(f[x.n]=ob(e,x.t,{raw:!0}),x.p==="version"&&(f[x.n]=String(f[x.n]>>16)+"."+("0000"+String(f[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(f[x.n]){case 0:f[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ki(o=f[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[x.n])}}else if(i[l][0]===1){if(o=f.CodePage=ob(e,$4),ki(o),c!==-1){var p=e.l;e.l=i[c][1],d=HL(e,o),e.l=p}}else if(i[l][0]===0){if(o===0){c=l,e.l=i[l+1][1];continue}d=HL(e,o)}else{var h=d[i[l][0]],v;switch(e[e.l]){case 65:e.l+=4,v=Jz(e);break;case 30:e.l+=4,v=Ck(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,v=Ck(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=In(e,4);break;case 64:e.l+=4,v=mn(B4(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[h]=v}}return e.l=r+s,f}var Kz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function d6e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function JL(e,t,r){var s=it(8),a=[],i=[],l=8,o=0,c=it(8),d=it(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),a.push(d),l+=8+c.length,!t){d=it(8),d.write_shift(4,0),a.unshift(d);var u=[it(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var m=e[o][0];for(c=it(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=xs(u),i.unshift(c),l+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(Kz.indexOf(e[o][0])>-1||Uz.indexOf(e[o][0])>-1)&&e[o][1]!=null){var f=e[o][1],y=0;if(t){y=+t[e[o][0]];var x=r[y];if(x.p=="version"&&typeof f=="string"){var p=f.split(".");f=(+p[0]<<16)+(+p[1]||0)}c=qL(x.t,f)}else{var h=d6e(f);h==-1&&(h=31,f=String(f)),c=qL(h,f)}i.push(c),d=it(8),d.write_shift(4,t?y:2+o),a.push(d),l+=8+c.length}var v=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,v),v+=i[o].length;return s.write_shift(4,l),s.write_shift(4,i.length),xs([s].concat(a).concat(i))}function KL(e,t,r){var s=e.content;if(!s)return{};Ss(s,0);var a,i,l,o,c=0;s.chk("feff","Byte Order: "),s.read_shift(2);var d=s.read_shift(4),u=s.read_shift(16);if(u!==qt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(a=s.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=s.read_shift(16),o=s.read_shift(4),a===1&&o!==s.l)throw new Error("Length mismatch: "+o+" !== "+s.l);a===2&&(l=s.read_shift(16),c=s.read_shift(4));var m=GL(s,t),f={SystemIdentifier:d};for(var y in m)f[y]=m[y];if(f.FMTID=i,a===1)return f;if(c-s.l==2&&(s.l+=2),s.l!==c)throw new Error("Length mismatch 2: "+s.l+" !== "+c);var x;try{x=GL(s,null)}catch{}for(y in x)f[y]=x[y];return f.FMTID=[i,l],f}function XL(e,t,r,s,a,i){var l=it(a?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,qt.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,a?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,a?68:48);var c=JL(e,r,s);if(o.push(c),a){var d=JL(a,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+c.length),o.push(d)}return xs(o)}function zo(e,t){return e.read_shift(t),null}function u6e(e,t){t||(t=it(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function m6e(e,t,r){for(var s=[],a=e.l+t;e.l<a;)s.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return s}function In(e,t){return e.read_shift(t)===1}function la(e,t){return t||(t=it(2)),t.write_shift(2,+!!e),t}function qn(e){return e.read_shift(2,"u")}function vi(e,t){return t||(t=it(2)),t.write_shift(2,e),t}function Xz(e,t){return m6e(e,t,qn)}function f6e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Yz(e,t,r){return r||(r=it(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function sx(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",i=ri;if(r&&r.biff>=8&&(ri=1200),!r||r.biff==8){var l=e.read_shift(1);l&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=s?e.read_shift(s,a):"";return ri=i,o}function h6e(e){var t=ri;ri=1200;var r=e.read_shift(2),s=e.read_shift(1),a=s&4,i=s&8,l=1+(s&1),o=0,c,d={};i&&(o=e.read_shift(2)),a&&(c=e.read_shift(4));var u=l==2?"dbcs-cont":"sbcs-cont",m=r===0?"":e.read_shift(r,u);return i&&(e.l+=4*o),a&&(e.l+=c),d.t=m,i||(d.raw="<t>"+d.t+"</t>",d.r=d.t),ri=t,d}function p6e(e){var t=e.t||"",r=it(3);r.write_shift(2,t.length),r.write_shift(1,1);var s=it(2*t.length);s.write_shift(2*t.length,t,"utf16le");var a=[r,s];return xs(a)}function Yd(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function ax(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):Yd(e,s,r)}function yu(e,t,r){if(r.biff>5)return ax(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Zz(e,t,r){return r||(r=it(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function x6e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function g6e(e){var t=e.read_shift(4),r=e.l,s=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(s=!0),e.l=r);var a=e.read_shift((s?t-24:t)>>1,"utf16le").replace(Qs,"");return s&&(e.l+=24),a}function y6e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var s=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+s.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(Qs,"");return r+l}function v6e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return g6e(e);case"0303000000000000c000000000000046":return y6e(e);default:throw new Error("Unsupported Moniker "+r)}}function cg(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Qs,""):"";return r}function YL(e,t){t||(t=it(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function b6e(e,t){var r=e.l+t,s=e.read_shift(4);if(s!==2)throw new Error("Unrecognized streamVersion: "+s);var a=e.read_shift(2);e.l+=2;var i,l,o,c,d="",u,m;a&16&&(i=cg(e,r-e.l)),a&128&&(l=cg(e,r-e.l)),(a&257)===257&&(o=cg(e,r-e.l)),(a&257)===1&&(c=v6e(e,r-e.l)),a&8&&(d=cg(e,r-e.l)),a&32&&(u=e.read_shift(16)),a&64&&(m=B4(e)),e.l=r;var f=l||o||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),a&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var y={Target:f};return u&&(y.guid=u),m&&(y.time=m),i&&(y.Tooltip=i),y}function j6e(e){var t=it(512),r=0,s=e.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var a=s.indexOf("#"),i=a>-1?31:23;switch(s.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(i==28)s=s.slice(1),YL(s,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=a>-1?s.slice(0,a):s;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&YL(a>-1?s.slice(a+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var c=0;s.slice(c*3,c*3+3)=="../"||s.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,s.length-3*c+1),r=0;r<s.length-3*c;++r)t.write_shift(1,s.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Qz(e){var t=e.read_shift(1),r=e.read_shift(1),s=e.read_shift(1),a=e.read_shift(1);return[t,r,s,a]}function eW(e,t){var r=Qz(e);return r[3]=0,r}function Gl(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return{r:t,c:r,ixfe:s}}function Zd(e,t,r,s){return s||(s=it(6)),s.write_shift(2,e),s.write_shift(2,t),s.write_shift(2,r||0),s}function _6e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function w6e(e,t,r){return t===0?"":yu(e,t,r)}function N6e(e,t,r){var s=r.biff>8?4:2,a=e.read_shift(s),i=e.read_shift(s,"i"),l=e.read_shift(s,"i");return[a,i,l]}function tW(e){var t=e.read_shift(2),r=D4(e);return[t,r]}function k6e(e,t,r){e.l+=4,t-=4;var s=e.l+t,a=sx(e,t,r),i=e.read_shift(2);if(s-=e.l,i!==s)throw new Error("Malformed AddinUdf: padding = "+s+" != "+i);return e.l+=i,a}function Z1(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);return{s:{c:s,r:t},e:{c:a,r}}}function rW(e,t){return t||(t=it(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function nW(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1);return{s:{c:s,r:t},e:{c:a,r}}}var S6e=nW;function sW(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return e.l+=12,[r,t,s]}function C6e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function A6e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function $s(e){e.l+=2,e.l+=e.read_shift(2)}var E6e={0:$s,4:$s,5:$s,6:$s,7:A6e,8:$s,9:$s,10:$s,11:$s,12:$s,13:C6e,14:$s,15:$s,16:$s,17:$s,18:$s,19:$s,20:$s,21:sW};function T6e(e,t){for(var r=e.l+t,s=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{s.push(E6e[a](e,r-e.l))}catch{return e.l=r,s}}return e.l!=r&&(e.l=r),s}function dg(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function U4(e,t,r){var s=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":s=1280,a=8;break;case"biff4":s=4,a=6;break;case"biff3":s=3,a=6;break;case"biff2":s=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=it(a);return i.write_shift(2,s),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function P6e(e,t){return t===0||e.read_shift(2),1200}function O6e(e,t,r){if(r.enc)return e.l+=t,"";var s=e.l,a=yu(e,0,r);return e.read_shift(t+s-e.l),a}function R6e(e,t){var r=!t||t.biff==8,s=it(r?112:54);for(s.write_shift(t.biff==8?2:1,7),r&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(r?0:536870912));s.l<s.length;)s.write_shift(1,r?0:32);return s}function L6e(e,t,r){var s=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:s&16,fBelow:s&64,fRight:s&128}}function I6e(e,t,r){var s=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=sx(e,0,r);return l.length===0&&(l="Sheet1"),{pos:s,hs:a,dt:i,name:l}}function F6e(e,t){var r=!t||t.biff>=8?2:1,s=it(8+r*e.name.length);s.write_shift(4,e.pos),s.write_shift(1,e.hs||0),s.write_shift(1,e.dt),s.write_shift(1,e.name.length),t.biff>=8&&s.write_shift(1,1),s.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=s.slice(0,s.l);return a.l=s.l,a}function D6e(e,t){for(var r=e.l+t,s=e.read_shift(4),a=e.read_shift(4),i=[],l=0;l!=a&&e.l<r;++l)i.push(h6e(e));return i.Count=s,i.Unique=a,i}function $6e(e,t){var r=it(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var s=[],a=0;a<e.length;++a)s[a]=p6e(e[a]);var i=xs([r].concat(s));return i.parts=[r.length].concat(s.map(function(l){return l.length})),i}function M6e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function B6e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var s=e.read_shift(1);return e.l+=3,s&7&&(t.level=s&7),s&32&&(t.hidden=!0),s&64&&(t.hpt=r/20),t}function U6e(e){var t=_6e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function z6e(e){return e.read_shift(2),e.read_shift(4)}function ZL(e,t,r){var s=0;r&&r.biff==2||(s=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(s=1-(a>>15),a&=32767);var i={Unsynced:s&1,DyZero:(s&2)>>1,ExAsc:(s&4)>>2,ExDsc:(s&8)>>3};return[i,a]}function W6e(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[s,a],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function V6e(){var e=it(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function H6e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var s=e.read_shift(2);return{RTL:s&64}}function q6e(e){var t=it(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function G6e(){}function J6e(e,t,r){var s={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return s.name=sx(e,0,r),s}function K6e(e,t){var r=e.name||"Arial",s=t&&t.biff==5,a=s?15+r.length:16+2*r.length,i=it(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),s||i.write_shift(1,1),i.write_shift((s?1:2)*r.length,r,s?"sbcs":"utf16le"),i}function X6e(e){var t=Gl(e);return t.isst=e.read_shift(4),t}function Y6e(e,t,r,s){var a=it(10);return Zd(e,t,s,a),a.write_shift(4,r),a}function Z6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=e.l+t,a=Gl(e);r.biff==2&&e.l++;var i=ax(e,s-e.l,r);return a.val=i,a}function Q6e(e,t,r,s,a){var i=!a||a.biff==8,l=it(8+ +i+(1+i)*r.length);return Zd(e,t,s,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function ePe(e,t,r){var s=e.read_shift(2),a=yu(e,0,r);return[s,a]}function tPe(e,t,r,s){var a=r&&r.biff==5;s||(s=it(a?3+t.length:5+2*t.length)),s.write_shift(2,e),s.write_shift(a?1:2,t.length),a||s.write_shift(1,1),s.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=s.length>s.l?s.slice(0,s.l):s;return i.l==null&&(i.l=i.length),i}var rPe=yu;function QL(e,t,r){var s=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=s,{s:{r:i,c:o},e:{r:l,c}}}function nPe(e,t){var r=t.biff==8||!t.biff?4:2,s=it(2*r+6);return s.write_shift(r,e.s.r),s.write_shift(r,e.e.r+1),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c+1),s.write_shift(2,0),s}function sPe(e){var t=e.read_shift(2),r=e.read_shift(2),s=tW(e);return{r:t,c:r,ixfe:s[0],rknum:s[1]}}function aPe(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(tW(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulRK length mismatch");return{r:s,c:a,C:l,rkrec:i}}function iPe(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulBlank length mismatch");return{r:s,c:a,C:l,ixfe:i}}function lPe(e,t,r,s){var a={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=U5e[o>>26],s.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=l&15,a.dgRight=l>>4&15,a.dgTop=l>>8&15,a.dgBottom=l>>12&15,a.icvLeft=l>>16&127,a.icvRight=l>>23&127,a.grbitDiag=l>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function oPe(e,t,r){var s={};return s.ifnt=e.read_shift(2),s.numFmtId=e.read_shift(2),s.flags=e.read_shift(2),s.fStyle=s.flags>>2&1,t-=6,s.data=lPe(e,t,s.fStyle,r),s}function eI(e,t,r,s){var a=r&&r.biff==5;s||(s=it(a?16:20)),s.write_shift(2,0),e.style?(s.write_shift(2,e.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,e.numFmtId||0),s.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),s.write_shift(4,i),s.write_shift(4,0),a||s.write_shift(4,0),s.write_shift(2,0),s}function cPe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function dPe(e){var t=it(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function tI(e,t,r){var s=Gl(e);(r.biff==2||t==9)&&++e.l;var a=f6e(e);return s.val=a,s.t=a===!0||a===!1?"b":"e",s}function uPe(e,t,r,s,a,i){var l=it(8);return Zd(e,t,s,l),Yz(r,i,l),l}function mPe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=Gl(e),a=Xs(e);return s.val=a,s}function fPe(e,t,r,s){var a=it(14);return Zd(e,t,s,a),Xd(r,a),a}var rI=w6e;function hPe(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=Yd(e,i),o=[];s>e.l;)o.push(ax(e));return[i,a,l,o]}function nI(e,t,r){var s=e.read_shift(2),a,i={fBuiltIn:s&1,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return r.sbcch===14849&&(a=k6e(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var pPe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function sI(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Yd(e,l,r);a&32&&(d=pPe[d.charCodeAt(0)]);var u=s-e.l;r&&r.biff==2&&--u;var m=s==e.l||o===0||!(u>0)?[]:TIe(e,u,r,o);return{chKey:i,Name:d,itab:c,rgce:m}}function aW(e,t,r){if(r.biff<8)return xPe(e,t,r);for(var s=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)s.push(N6e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return s}function xPe(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=sx(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function gPe(e,t,r){if(r.biff<8){e.l+=t;return}var s=e.read_shift(2),a=e.read_shift(2),i=Yd(e,s,r),l=Yd(e,a,r);return[i,l]}function yPe(e,t,r){var s=nW(e);e.l++;var a=e.read_shift(1);return t-=8,[PIe(e,t,r),a,s]}function aI(e,t,r){var s=S6e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[s,AIe(e,t,r)]}function vPe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,s=e.read_shift(4);return[t,r,s]}function bPe(e,t,r){if(!(r.biff<8)){var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=yu(e,0,r);return r.biff<8&&e.read_shift(1),[{r:s,c:a},o,l,i]}}function jPe(e,t,r){return bPe(e,t,r)}function _Pe(e,t){for(var r=[],s=e.read_shift(2);s--;)r.push(Z1(e));return r}function wPe(e){var t=it(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)rW(e[r],t);return t}function NPe(e,t,r){if(r&&r.biff<8)return SPe(e,t,r);var s=sW(e),a=T6e(e,t-22,s[1]);return{cmo:s,ft:a}}var kPe={8:function(e,t){var r=e.l+t;e.l+=10;var s=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:s}}};function SPe(e,t,r){e.l+=4;var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((kPe[s]||ra)(e,t,r)),{cmo:[a,s,i],ft:l}}function CPe(e,t,r){var s=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=x6e(e,6,r);var o=e.read_shift(2);e.read_shift(2),qn(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-s!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],m=Yd(e,e.lens[d+1]-e.lens[d]-1);if(a+=m,a.length>=(u?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=s+t,{t:a}}catch{return e.l=s+t,{t:a}}}function APe(e,t){var r=Z1(e);e.l+=16;var s=b6e(e,t-24);return[r,s]}function EPe(e){var t=it(24),r=_n(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(s[a],16));return xs([t,j6e(e[1])])}function TPe(e,t){e.read_shift(2);var r=Z1(e),s=e.read_shift((t-10)/2,"dbcs-cont");return s=s.replace(Qs,""),[r,s]}function PPe(e){var t=e[1].Tooltip,r=it(10+2*(t.length+1));r.write_shift(2,2048);var s=_n(e[0]);r.write_shift(2,s.r),r.write_shift(2,s.r),r.write_shift(2,s.c),r.write_shift(2,s.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function OPe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=WL[r]||r,r=e.read_shift(2),t[1]=WL[r]||r,t}function RPe(e){return e||(e=it(4)),e.write_shift(2,1),e.write_shift(2,1),e}function LPe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(eW(e));return r}function IPe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(eW(e));return r}function FPe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function iW(e,t,r){if(!r.cellStyles)return ra(e,t);var s=r&&r.biff>=12?4:2,a=e.read_shift(s),i=e.read_shift(s),l=e.read_shift(s),o=e.read_shift(s),c=e.read_shift(2);s==2&&(e.l+=2);var d={s:a,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function DPe(e,t){var r=it(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var s=0;return e.hidden&&(s|=1),r.write_shift(1,s),s=e.level||0,r.write_shift(1,s),r.write_shift(2,0),r}function $Pe(e,t){var r={};return t<32||(e.l+=16,r.header=Xs(e),r.footer=Xs(e),e.l+=2),r}function MPe(e,t,r){var s={area:!1};if(r.biff!=5)return e.l+=t,s;var a=e.read_shift(1);return e.l+=3,a&16&&(s.area=!0),s}function BPe(e){for(var t=it(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var UPe=Gl,zPe=Xz,WPe=ax;function VPe(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a={fmt:t,env:r,len:s,data:e.slice(e.l,e.l+s)};return e.l+=s,a}function HPe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var s=Gl(e);++e.l;var a=yu(e,t-7,r);return s.t="str",s.val=a,s}function qPe(e){var t=Gl(e);++e.l;var r=Xs(e);return t.t="n",t.val=r,t}function GPe(e,t,r){var s=it(15);return cx(s,e,t),s.write_shift(8,r,"f"),s}function JPe(e){var t=Gl(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function KPe(e,t,r){var s=it(9);return cx(s,e,t),s.write_shift(2,r),s}function XPe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function YPe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function ZPe(e,t,r){var s=e.l+t,a=Gl(e),i=e.read_shift(2),l=Yd(e,i,r);return e.l=s,a.t="str",a.val=l,a}var QPe=[2,3,48,49,131,139,140,245],Ak=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=J1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=kc(1);switch(c.type){case"base64":u=qa(ai(o));break;case"binary":u=qa(o);break;case"buffer":case"array":u=o;break}Ss(u,0);var m=u.read_shift(1),f=!!(m&136),y=!1,x=!1;switch(m){case 2:break;case 3:break;case 48:y=!0,f=!0;break;case 49:y=!0,f=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var p=0,h=521;m==2&&(p=u.read_shift(2)),u.l+=3,m!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),m!=2&&(h=u.read_shift(2));var v=u.read_shift(2),b=c.codepage||1252;m!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(b=e[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var j=[],_={},N=Math.min(u.length,m==2?521:h-10-(y?264:0)),w=x?32:11;u.l<N&&u[u.l]!=13;)switch(_={},_.name=jr.utils.decode(b,u.slice(u.l,u.l+w)).replace(/[\u0000\r\n].*$/g,""),u.l+=w,_.type=String.fromCharCode(u.read_shift(1)),m!=2&&!x&&(_.offset=u.read_shift(4)),_.len=u.read_shift(1),m==2&&(_.offset=u.read_shift(2)),_.dec=u.read_shift(1),_.name.length&&j.push(_),m!=2&&(u.l+=x?13:14),_.type){case"B":(!y||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(u[u.l]!==13&&(u.l=h-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=h;var k=0,S=0;for(d[0]=[],S=0;S!=j.length;++S)d[0][S]=j[S].name;for(;p-- >0;){if(u[u.l]===42){u.l+=v;continue}for(++u.l,d[++k]=[],S=0,S=0;S!=j.length;++S){var E=u.slice(u.l,u.l+j[S].len);u.l+=j[S].len,Ss(E,0);var T=jr.utils.decode(b,E);switch(j[S].type){case"C":T.trim().length&&(d[k][S]=T.replace(/\s+$/,""));break;case"D":T.length===8?d[k][S]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):d[k][S]=T;break;case"F":d[k][S]=parseFloat(T.trim());break;case"+":case"I":d[k][S]=x?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":d[k][S]=!0;break;case"N":case"F":d[k][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));d[k][S]="##MEMO##"+(x?parseInt(T.trim(),10):E.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(d[k][S]=+T||0);break;case"@":d[k][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":d[k][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":d[k][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[k][S]=-E.read_shift(-8,"f");break;case"B":if(y&&j[S].len==8){d[k][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=j[S].len;break;case"0":if(j[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[S].type)}}}if(m!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function s(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Uf(r(o,d),d);return u["!cols"]=d.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete d.DBF,u}function a(o,c){try{return Bc(s(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&ki(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=La(),m=mb(o,{header:1,raw:!0,cellDates:!0}),f=m[0],y=m.slice(1),x=o["!cols"]||[],p=0,h=0,v=0,b=1;for(p=0;p<f.length;++p){if(((x[p]||{}).DBF||{}).name){f[p]=x[p].DBF.name,++v;continue}if(f[p]!=null){if(++v,typeof f[p]=="number"&&(f[p]=f[p].toString(10)),typeof f[p]!="string")throw new Error("DBF Invalid column name "+f[p]+" |"+typeof f[p]+"|");if(f.indexOf(f[p])!==p){for(h=0;h<1024;++h)if(f.indexOf(f[p]+"_"+h)==-1){f[p]+="_"+h;break}}}}var j=vr(o["!ref"]),_=[],N=[],w=[];for(p=0;p<=j.e.c-j.s.c;++p){var k="",S="",E=0,T=[];for(h=0;h<y.length;++h)y[h][p]!=null&&T.push(y[h][p]);if(T.length==0||f[p]==null){_[p]="?";continue}for(h=0;h<T.length;++h){switch(typeof T[h]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=T[h]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(T[h]).length),k=k&&k!=S?"C":S}E>250&&(E=250),S=((x[p]||{}).DBF||{}).type,S=="C"&&x[p].DBF.len>E&&(E=x[p].DBF.len),k=="B"&&S=="N"&&(k="N",w[p]=x[p].DBF.dec,E=x[p].DBF.len),N[p]=k=="C"||S=="N"?E:i[k]||0,b+=N[p],_[p]=k}var A=u.next(32);for(A.write_shift(4,318902576),A.write_shift(4,y.length),A.write_shift(2,296+32*v),A.write_shift(2,b),p=0;p<4;++p)A.write_shift(4,0);for(A.write_shift(4,0|(+t[Gd]||3)<<8),p=0,h=0;p<f.length;++p)if(f[p]!=null){var C=u.next(32),P=(f[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,P,"sbcs"),C.write_shift(1,_[p]=="?"?"C":_[p],"sbcs"),C.write_shift(4,h),C.write_shift(1,N[p]||i[_[p]]||0),C.write_shift(1,w[p]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),h+=N[p]||i[_[p]]||0}var O=u.next(264);for(O.write_shift(4,13),p=0;p<65;++p)O.write_shift(4,0);for(p=0;p<y.length;++p){var R=u.next(b);for(R.write_shift(1,0),h=0;h<f.length;++h)if(f[h]!=null)switch(_[h]){case"L":R.write_shift(1,y[p][h]==null?63:y[p][h]?84:70);break;case"B":R.write_shift(8,y[p][h]||0,"f");break;case"N":var F="0";for(typeof y[p][h]=="number"&&(F=y[p][h].toFixed(w[h]||0)),v=0;v<N[h]-F.length;++v)R.write_shift(1,32);R.write_shift(1,F,"sbcs");break;case"D":y[p][h]?(R.write_shift(4,("0000"+y[p][h].getFullYear()).slice(-4),"sbcs"),R.write_shift(2,("00"+(y[p][h].getMonth()+1)).slice(-2),"sbcs"),R.write_shift(2,("00"+y[p][h].getDate()).slice(-2),"sbcs")):R.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(y[p][h]!=null?y[p][h]:"").slice(0,N[h]);for(R.write_shift(1,Q,"sbcs"),v=0;v<N[h]-Q.length;++v)R.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:a,to_sheet:s,from_sheet:l}}(),lW=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Rn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,y){var x=e[y];return typeof x=="number"?bk(x):x},s=function(f,y,x){var p=y.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return p==59?f:bk(p)};e["|"]=254;function a(f,y){switch(y.type){case"base64":return i(ai(f),y);case"binary":return i(f,y);case"buffer":return i(fr&&Buffer.isBuffer(f)?f.toString("binary"):Mc(f),y);case"array":return i(Kd(f),y)}throw new Error("Unrecognized type "+y.type)}function i(f,y){var x=f.split(/[\n\r]+/),p=-1,h=-1,v=0,b=0,j=[],_=[],N=null,w={},k=[],S=[],E=[],T=0,A;for(+y.codepage>=0&&ki(+y.codepage);v!==x.length;++v){T=0;var C=x[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),P=C.replace(/;;/g,"\0").split(";").map(function(B){return B.replace(/\u0000/g,";")}),O=P[0],R;if(C.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&_.push(C.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,Q=!1,W=!1,L=!1,I=-1,K=-1;for(b=1;b<P.length;++b)switch(P[b].charAt(0)){case"A":break;case"X":h=parseInt(P[b].slice(1))-1,Q=!0;break;case"Y":for(p=parseInt(P[b].slice(1))-1,Q||(h=0),A=j.length;A<=p;++A)j[A]=[];break;case"K":R=P[b].slice(1),R.charAt(0)==='"'?R=R.slice(1,R.length-1):R==="TRUE"?R=!0:R==="FALSE"?R=!1:isNaN(al(R))?isNaN(hf(R).getDate())||(R=mn(R)):(R=al(R),N!==null&&mu(N)&&(R=X1(R))),typeof jr<"u"&&typeof R=="string"&&(y||{}).type!="string"&&(y||{}).codepage&&(R=jr.utils.decode(y.codepage,R)),F=!0;break;case"E":L=!0;var D=Sm(P[b].slice(1),{r:p,c:h});j[p][h]=[j[p][h],D];break;case"S":W=!0,j[p][h]=[j[p][h],"S5S"];break;case"G":break;case"R":I=parseInt(P[b].slice(1))-1;break;case"C":K=parseInt(P[b].slice(1))-1;break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+C)}if(F&&(j[p][h]&&j[p][h].length==2?j[p][h][0]=R:j[p][h]=R,N=null),W){if(L)throw new Error("SYLK shared formula cannot have own formula");var Y=I>-1&&j[I][K];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");j[p][h][1]=kW(Y[1],{r:p-I,c:h-K})}break;case"F":var re=0;for(b=1;b<P.length;++b)switch(P[b].charAt(0)){case"X":h=parseInt(P[b].slice(1))-1,++re;break;case"Y":for(p=parseInt(P[b].slice(1))-1,A=j.length;A<=p;++A)j[A]=[];break;case"M":T=parseInt(P[b].slice(1))/20;break;case"F":break;case"G":break;case"P":N=_[parseInt(P[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=P[b].slice(1).split(" "),A=parseInt(E[0],10);A<=parseInt(E[1],10);++A)T=parseInt(E[2],10),S[A-1]=T===0?{hidden:!0}:{wch:T},Sc(S[A-1]);break;case"C":h=parseInt(P[b].slice(1))-1,S[h]||(S[h]={});break;case"R":p=parseInt(P[b].slice(1))-1,k[p]||(k[p]={}),T>0?(k[p].hpt=T,k[p].hpx=xf(T)):T===0&&(k[p].hidden=!0);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+C)}re<1&&(N=null);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+C)}}return k.length>0&&(w["!rows"]=k),S.length>0&&(w["!cols"]=S),y&&y.sheetRows&&(j=j.slice(0,y.sheetRows)),[j,w]}function l(f,y){var x=a(f,y),p=x[0],h=x[1],v=Uf(p,y);return Rn(h).forEach(function(b){v[b]=h[b]}),v}function o(f,y){return Bc(l(f,y),y)}function c(f,y,x,p){var h="C;Y"+(x+1)+";X"+(p+1)+";K";switch(f.t){case"n":h+=f.v||0,f.f&&!f.F&&(h+=";E"+G4(f.f,{r:x,c:p}));break;case"b":h+=f.v?"TRUE":"FALSE";break;case"e":h+=f.w||f.v;break;case"d":h+='"'+(f.w||f.v)+'"';break;case"s":h+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return h}function d(f,y){y.forEach(function(x,p){var h="F;W"+(p+1)+" "+(p+1)+" ";x.hidden?h+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=bp(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=jp(x.wpx)),typeof x.wch=="number"&&(h+=Math.round(x.wch))),h.charAt(h.length-1)!=" "&&f.push(h)})}function u(f,y){y.forEach(function(x,p){var h="F;";x.hidden?h+="M0;":x.hpt?h+="M"+20*x.hpt+";":x.hpx&&(h+="M"+20*_p(x.hpx)+";"),h.length>2&&f.push(h+"R"+(p+1))})}function m(f,y){var x=["ID;PWXL;N;E"],p=[],h=vr(f["!ref"]),v,b=Array.isArray(f),j=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),f["!cols"]&&d(x,f["!cols"]),f["!rows"]&&u(x,f["!rows"]),x.push("B;Y"+(h.e.r-h.s.r+1)+";X"+(h.e.c-h.s.c+1)+";D"+[h.s.c,h.s.r,h.e.c,h.e.r].join(" "));for(var _=h.s.r;_<=h.e.r;++_)for(var N=h.s.c;N<=h.e.c;++N){var w=nr({r:_,c:N});v=b?(f[_]||[])[N]:f[w],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,f,_,N))}return x.join(j)+j+p.join(j)+j+"E"+j}return{to_workbook:o,to_sheet:l,from_sheet:m}}(),oW=function(){function e(i,l){switch(l.type){case"base64":return t(ai(i),l);case"binary":return t(i,l);case"buffer":return t(fr&&Buffer.isBuffer(i)?i.toString("binary"):Mc(i),l);case"array":return t(Kd(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,m=[];u!==o.length;++u){if(o[u].trim()==="BOT"){m[++c]=[],d=0;continue}if(!(c<0)){var f=o[u].trim().split(","),y=f[0],x=f[1];++u;for(var p=o[u]||"";(p.match(/["]/g)||[]).length&1&&u<o.length-1;)p+=`
`+o[++u];switch(p=p.trim(),+y){case-1:if(p==="BOT"){m[++c]=[],d=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?m[c][d]=!0:p==="FALSE"?m[c][d]=!1:isNaN(al(x))?isNaN(hf(x).getDate())?m[c][d]=x:m[c][d]=mn(x):m[c][d]=al(x),++d;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),m[c][d++]=p!==""?p:null;break}if(p==="EOD")break}}return l&&l.sheetRows&&(m=m.slice(0,l.sheetRows)),m}function r(i,l){return Uf(e(i,l),l)}function s(i,l){return Bc(r(i,l),l)}var a=function(){var i=function(c,d,u,m,f){c.push(d),c.push(u+","+m),c.push('"'+f.replace(/"/g,'""')+'"')},l=function(c,d,u,m){c.push(d+","+u),c.push(d==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var d=[],u=vr(c["!ref"]),m,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var y=u.s.r;y<=u.e.r;++y){l(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var p=nr({r:y,c:x});if(m=f?(c[y]||[])[x]:c[p],!m){l(d,1,0,"");continue}switch(m.t){case"n":var h=m.w;!h&&m.v!=null&&(h=m.v),h==null?m.f&&!m.F?l(d,1,0,"="+m.f):l(d,1,0,""):l(d,0,h,"V");break;case"b":l(d,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=ii(m.z||Jt[14],as(mn(m.v)))),l(d,0,m.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var v=`\r
`,b=d.join(v);return b}}();return{to_workbook:s,to_sheet:r,from_sheet:a}}(),cW=function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,f){for(var y=m.split(`
`),x=-1,p=-1,h=0,v=[];h!==y.length;++h){var b=y[h].trim().split(":");if(b[0]==="cell"){var j=_n(b[1]);if(v.length<=j.r)for(x=v.length;x<=j.r;++x)v[x]||(v[x]=[]);switch(x=j.r,p=j.c,b[2]){case"t":v[x][p]=e(b[3]);break;case"v":v[x][p]=+b[3];break;case"vtf":var _=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[x][p]=!!+b[4];break;default:v[x][p]=+b[4];break}b[2]=="vtf"&&(v[x][p]=[v[x][p],_])}}}return f&&f.sheetRows&&(v=v.slice(0,f.sheetRows)),v}function s(m,f){return Uf(r(m,f),f)}function a(m,f){return Bc(s(m,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(m){if(!m||!m["!ref"])return"";for(var f=[],y=[],x,p="",h=pa(m["!ref"]),v=Array.isArray(m),b=h.s.r;b<=h.e.r;++b)for(var j=h.s.c;j<=h.e.c;++j)if(p=nr({r:b,c:j}),x=v?(m[b]||[])[j]:m[p],!(!x||x.v==null||x.t==="z")){switch(y=["cell",p,"t"],x.t){case"s":case"str":y.push(t(x.v));break;case"n":x.f?(y[2]="vtf",y[3]="n",y[4]=x.v,y[5]=t(x.f)):(y[2]="v",y[3]=x.v);break;case"b":y[2]="vt"+(x.f?"f":"c"),y[3]="nl",y[4]=x.v?"1":"0",y[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var _=as(mn(x.v));y[2]="vtc",y[3]="nd",y[4]=""+_,y[5]=x.w||ii(x.z||Jt[14],_);break;case"e":continue}f.push(y.join(":"))}return f.push("sheet:c:"+(h.e.c-h.s.c+1)+":r:"+(h.e.r-h.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(m){return[i,l,o,l,d(m),c].join(`
`)}return{to_workbook:a,to_sheet:s,from_sheet:u}}(),pf=function(){function e(u,m,f,y,x){x.raw?m[f][y]=u:u===""||(u==="TRUE"?m[f][y]=!0:u==="FALSE"?m[f][y]=!1:isNaN(al(u))?isNaN(hf(u).getDate())?m[f][y]=u:m[f][y]=mn(u):m[f][y]=al(u))}function t(u,m){var f=m||{},y=[];if(!u||u.length===0)return y;for(var x=u.split(/[\r\n]/),p=x.length-1;p>=0&&x[p].length===0;)--p;for(var h=10,v=0,b=0;b<=p;++b)v=x[b].indexOf(" "),v==-1?v=x[b].length:v++,h=Math.max(h,v);for(b=0;b<=p;++b){y[b]=[];var j=0;for(e(x[b].slice(0,h).trim(),y,b,j,f),j=1;j<=(x[b].length-h)/10+1;++j)e(x[b].slice(h+(j-1)*10,h+j*10).trim(),y,b,j,f)}return f.sheetRows&&(y=y.slice(0,f.sheetRows)),y}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function a(u){for(var m={},f=!1,y=0,x=0;y<u.length;++y)(x=u.charCodeAt(y))==34?f=!f:!f&&x in r&&(m[x]=(m[x]||0)+1);x=[];for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&x.push([m[y],y]);if(!x.length){m=s;for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&x.push([m[y],y])}return x.sort(function(p,h){return p[0]-h[0]||s[p[1]]-s[h[1]]}),r[x.pop()[1]]||44}function i(u,m){var f=m||{},y="",x=f.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(y=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(y=u.charAt(4),u=u.slice(6)):y=a(u.slice(0,1024)):f&&f.FS?y=f.FS:y=a(u.slice(0,1024));var h=0,v=0,b=0,j=0,_=0,N=y.charCodeAt(0),w=!1,k=0,S=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var E=f.dateNF!=null?$Te(f.dateNF):null;function T(){var A=u.slice(j,_),C={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)C.t="z";else if(f.raw)C.t="s",C.v=A;else if(A.trim().length===0)C.t="s",C.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(C.t="s",C.v=A.slice(2,-1).replace(/""/g,'"')):hLe(A)?(C.t="n",C.f=A.slice(1)):(C.t="s",C.v=A);else if(A=="TRUE")C.t="b",C.v=!0;else if(A=="FALSE")C.t="b",C.v=!1;else if(!isNaN(b=al(A)))C.t="n",f.cellText!==!1&&(C.w=A),C.v=b;else if(!isNaN(hf(A).getDate())||E&&A.match(E)){C.z=f.dateNF||Jt[14];var P=0;E&&A.match(E)&&(A=MTe(A,f.dateNF,A.match(E)||[]),P=1),f.cellDates?(C.t="d",C.v=mn(A,P)):(C.t="n",C.v=as(mn(A,P))),f.cellText!==!1&&(C.w=ii(C.z,C.v instanceof Date?as(C.v):C.v)),f.cellNF||delete C.z}else C.t="s",C.v=A;if(C.t=="z"||(f.dense?(x[h]||(x[h]=[]),x[h][v]=C):x[nr({c:v,r:h})]=C),j=_+1,S=u.charCodeAt(j),p.e.c<v&&(p.e.c=v),p.e.r<h&&(p.e.r=h),k==N)++v;else if(v=0,++h,f.sheetRows&&f.sheetRows<=h)return!0}e:for(;_<u.length;++_)switch(k=u.charCodeAt(_)){case 34:S===34&&(w=!w);break;case N:case 10:case 13:if(!w&&T())break e;break}return _-j>0&&T(),x["!ref"]=ur(p),x}function l(u,m){return!(m&&m.PRN)||m.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,m):Uf(t(u,m),m)}function o(u,m){var f="",y=m.type=="string"?[0,0,0,0]:rA(u,m);switch(m.type){case"base64":f=ai(u);break;case"binary":f=u;break;case"buffer":m.codepage==65001?f=u.toString("utf8"):m.codepage&&typeof jr<"u"?f=jr.utils.decode(m.codepage,u):f=fr&&Buffer.isBuffer(u)?u.toString("binary"):Mc(u);break;case"array":f=Kd(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+m.type)}return y[0]==239&&y[1]==187&&y[2]==191?f=Wr(f.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?f=Wr(f):m.type=="binary"&&typeof jr<"u"&&m.codepage&&(f=jr.utils.decode(m.codepage,jr.utils.encode(28591,f))),f.slice(0,19)=="socialcalc:version:"?cW.to_sheet(m.type=="string"?f:Wr(f),m):l(f,m)}function c(u,m){return Bc(o(u,m),m)}function d(u){for(var m=[],f=vr(u["!ref"]),y,x=Array.isArray(u),p=f.s.r;p<=f.e.r;++p){for(var h=[],v=f.s.c;v<=f.e.c;++v){var b=nr({r:p,c:v});if(y=x?(u[p]||[])[v]:u[b],!y||y.v==null){h.push("          ");continue}for(var j=(y.w||(Bl(y),y.w)||"").slice(0,10);j.length<10;)j+=" ";h.push(j+(v===0?" ":""))}m.push(h.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function eOe(e,t){var r=t||{},s=!!r.WTF;r.WTF=!0;try{var a=lW.to_workbook(e,r);return r.WTF=s,a}catch(i){if(r.WTF=s,!i.message.match(/SYLK bad record ID/)&&s)throw i;return pf.to_workbook(e,t)}}var Ad=function(){function e(D,Y,re){if(D){Ss(D,D.l||0);for(var B=re.Enum||I;D.l<D.length;){var G=D.read_shift(2),ce=B[G]||B[65535],ae=D.read_shift(2),fe=D.l+ae,ne=ce.f&&ce.f(D,ae,re);if(D.l=fe,Y(ne,ce,G))return}}}function t(D,Y){switch(Y.type){case"base64":return r(qa(ai(D)),Y);case"binary":return r(qa(D),Y);case"buffer":case"array":return r(D,Y)}throw"Unsupported type "+Y.type}function r(D,Y){if(!D)return D;var re=Y||{},B=re.dense?[]:{},G="Sheet1",ce="",ae=0,fe={},ne=[],he=[],M={s:{r:0,c:0},e:{r:0,c:0}},Se=re.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)re.Enum=I,e(D,function(ye,Ye,lt){switch(lt){case 0:re.vers=ye,ye>=4096&&(re.qpro=!0);break;case 6:M=ye;break;case 204:ye&&(ce=ye);break;case 222:ce=ye;break;case 15:case 51:re.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:lt==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=re.dateNF||Jt[14],re.cellDates&&(ye[1].t="d",ye[1].v=X1(ye[1].v))),re.qpro&&ye[3]>ae&&(B["!ref"]=ur(M),fe[G]=B,ne.push(G),B=re.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},ae=ye[3],G=ce||"Sheet"+(ae+1),ce="");var xe=re.dense?(B[ye[0].r]||[])[ye[0].c]:B[nr(ye[0])];if(xe){xe.t=ye[1].t,xe.v=ye[1].v,ye[1].z!=null&&(xe.z=ye[1].z),ye[1].f!=null&&(xe.f=ye[1].f);break}re.dense?(B[ye[0].r]||(B[ye[0].r]=[]),B[ye[0].r][ye[0].c]=ye[1]):B[nr(ye[0])]=ye[1];break}},re);else if(D[2]==26||D[2]==14)re.Enum=K,D[2]==14&&(re.qpro=!0,D.l=0),e(D,function(ye,Ye,lt){switch(lt){case 204:G=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ae&&(B["!ref"]=ur(M),fe[G]=B,ne.push(G),B=re.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},ae=ye[3],G="Sheet"+(ae+1)),Se>0&&ye[0].r>=Se)break;re.dense?(B[ye[0].r]||(B[ye[0].r]=[]),B[ye[0].r][ye[0].c]=ye[1]):B[nr(ye[0])]=ye[1],M.e.c<ye[0].c&&(M.e.c=ye[0].c),M.e.r<ye[0].r&&(M.e.r=ye[0].r);break;case 27:ye[14e3]&&(he[ye[14e3][0]]=ye[14e3][1]);break;case 1537:he[ye[0]]=ye[1],ye[0]==ae&&(G=ye[1]);break}},re);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(B["!ref"]=ur(M),fe[ce||G]=B,ne.push(ce||G),!he.length)return{SheetNames:ne,Sheets:fe};for(var me={},Pe=[],ue=0;ue<he.length;++ue)fe[ne[ue]]?(Pe.push(he[ue]||ne[ue]),me[he[ue]]=fe[he[ue]]||fe[ne[ue]]):(Pe.push(he[ue]),me[he[ue]]={"!ref":"A1"});return{SheetNames:Pe,Sheets:me}}function s(D,Y){var re=Y||{};if(+re.codepage>=0&&ki(+re.codepage),re.type=="string")throw new Error("Cannot write WK1 to JS string");var B=La(),G=vr(D["!ref"]),ce=Array.isArray(D),ae=[];Ct(B,0,i(1030)),Ct(B,6,c(G));for(var fe=Math.min(G.e.r,8191),ne=G.s.r;ne<=fe;++ne)for(var he=Pn(ne),M=G.s.c;M<=G.e.c;++M){ne===G.s.r&&(ae[M]=un(M));var Se=ae[M]+he,me=ce?(D[ne]||[])[M]:D[Se];if(!(!me||me.t=="z"))if(me.t=="n")(me.v|0)==me.v&&me.v>=-32768&&me.v<=32767?Ct(B,13,y(ne,M,me.v)):Ct(B,14,p(ne,M,me.v));else{var Pe=Bl(me);Ct(B,15,m(ne,M,Pe.slice(0,239)))}}return Ct(B,1),B.end()}function a(D,Y){var re=Y||{};if(+re.codepage>=0&&ki(+re.codepage),re.type=="string")throw new Error("Cannot write WK3 to JS string");var B=La();Ct(B,0,l(D));for(var G=0,ce=0;G<D.SheetNames.length;++G)(D.Sheets[D.SheetNames[G]]||{})["!ref"]&&Ct(B,27,L(D.SheetNames[G],ce++));var ae=0;for(G=0;G<D.SheetNames.length;++G){var fe=D.Sheets[D.SheetNames[G]];if(!(!fe||!fe["!ref"])){for(var ne=vr(fe["!ref"]),he=Array.isArray(fe),M=[],Se=Math.min(ne.e.r,8191),me=ne.s.r;me<=Se;++me)for(var Pe=Pn(me),ue=ne.s.c;ue<=ne.e.c;++ue){me===ne.s.r&&(M[ue]=un(ue));var ye=M[ue]+Pe,Ye=he?(fe[me]||[])[ue]:fe[ye];if(!(!Ye||Ye.t=="z"))if(Ye.t=="n")Ct(B,23,T(me,ue,ae,Ye.v));else{var lt=Bl(Ye);Ct(B,22,k(me,ue,ae,lt.slice(0,239)))}}++ae}}return Ct(B,1),B.end()}function i(D){var Y=it(2);return Y.write_shift(2,D),Y}function l(D){var Y=it(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var re=0,B=0,G=0,ce=0;ce<D.SheetNames.length;++ce){var ae=D.SheetNames[ce],fe=D.Sheets[ae];if(!(!fe||!fe["!ref"])){++G;var ne=pa(fe["!ref"]);re<ne.e.r&&(re=ne.e.r),B<ne.e.c&&(B=ne.e.c)}}return re>8191&&(re=8191),Y.write_shift(2,re),Y.write_shift(1,G),Y.write_shift(1,B),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(D,Y,re){var B={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&re.qpro?(B.s.c=D.read_shift(1),D.l++,B.s.r=D.read_shift(2),B.e.c=D.read_shift(1),D.l++,B.e.r=D.read_shift(2),B):(B.s.c=D.read_shift(2),B.s.r=D.read_shift(2),Y==12&&re.qpro&&(D.l+=2),B.e.c=D.read_shift(2),B.e.r=D.read_shift(2),Y==12&&re.qpro&&(D.l+=2),B.s.c==65535&&(B.s.c=B.e.c=B.s.r=B.e.r=0),B)}function c(D){var Y=it(8);return Y.write_shift(2,D.s.c),Y.write_shift(2,D.s.r),Y.write_shift(2,D.e.c),Y.write_shift(2,D.e.r),Y}function d(D,Y,re){var B=[{c:0,r:0},{t:"n",v:0},0,0];return re.qpro&&re.vers!=20768?(B[0].c=D.read_shift(1),B[3]=D.read_shift(1),B[0].r=D.read_shift(2),D.l+=2):(B[2]=D.read_shift(1),B[0].c=D.read_shift(2),B[0].r=D.read_shift(2)),B}function u(D,Y,re){var B=D.l+Y,G=d(D,Y,re);if(G[1].t="s",re.vers==20768){D.l++;var ce=D.read_shift(1);return G[1].v=D.read_shift(ce,"utf8"),G}return re.qpro&&D.l++,G[1].v=D.read_shift(B-D.l,"cstr"),G}function m(D,Y,re){var B=it(7+re.length);B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,D),B.write_shift(1,39);for(var G=0;G<B.length;++G){var ce=re.charCodeAt(G);B.write_shift(1,ce>=128?95:ce)}return B.write_shift(1,0),B}function f(D,Y,re){var B=d(D,Y,re);return B[1].v=D.read_shift(2,"i"),B}function y(D,Y,re){var B=it(7);return B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,D),B.write_shift(2,re,"i"),B}function x(D,Y,re){var B=d(D,Y,re);return B[1].v=D.read_shift(8,"f"),B}function p(D,Y,re){var B=it(13);return B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,D),B.write_shift(8,re,"f"),B}function h(D,Y,re){var B=D.l+Y,G=d(D,Y,re);if(G[1].v=D.read_shift(8,"f"),re.qpro)D.l=B;else{var ce=D.read_shift(2);_(D.slice(D.l,D.l+ce),G),D.l+=ce}return G}function v(D,Y,re){var B=Y&32768;return Y&=-32769,Y=(B?D:0)+(Y>=8192?Y-16384:Y),(B?"":"$")+(re?un(Y):Pn(Y))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(D,Y){Ss(D,0);for(var re=[],B=0,G="",ce="",ae="",fe="";D.l<D.length;){var ne=D[D.l++];switch(ne){case 0:re.push(D.read_shift(8,"f"));break;case 1:ce=v(Y[0].c,D.read_shift(2),!0),G=v(Y[0].r,D.read_shift(2),!1),re.push(ce+G);break;case 2:{var he=v(Y[0].c,D.read_shift(2),!0),M=v(Y[0].r,D.read_shift(2),!1);ce=v(Y[0].c,D.read_shift(2),!0),G=v(Y[0].r,D.read_shift(2),!1),re.push(he+M+":"+ce+G)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:re.push("("+re.pop()+")");break;case 5:re.push(D.read_shift(2));break;case 6:{for(var Se="";ne=D[D.l++];)Se+=String.fromCharCode(ne);re.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:re.push("-"+re.pop());break;case 23:re.push("+"+re.pop());break;case 22:re.push("NOT("+re.pop()+")");break;case 20:case 21:fe=re.pop(),ae=re.pop(),re.push(["AND","OR"][ne-20]+"("+ae+","+fe+")");break;default:if(ne<32&&j[ne])fe=re.pop(),ae=re.pop(),re.push(ae+j[ne]+fe);else if(b[ne]){if(B=b[ne][1],B==69&&(B=D[D.l++]),B>re.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+re.join("|")+"|");return}var me=re.slice(-B);re.length-=B,re.push(b[ne][0]+"("+me.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}re.length==1?Y[1].f=""+re[0]:console.error("WK1 bad formula parse |"+re.join("|")+"|")}function N(D){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=D.read_shift(2),Y[3]=D[D.l++],Y[0].c=D[D.l++],Y}function w(D,Y){var re=N(D);return re[1].t="s",re[1].v=D.read_shift(Y-4,"cstr"),re}function k(D,Y,re,B){var G=it(6+B.length);G.write_shift(2,D),G.write_shift(1,re),G.write_shift(1,Y),G.write_shift(1,39);for(var ce=0;ce<B.length;++ce){var ae=B.charCodeAt(ce);G.write_shift(1,ae>=128?95:ae)}return G.write_shift(1,0),G}function S(D,Y){var re=N(D);re[1].v=D.read_shift(2);var B=re[1].v>>1;if(re[1].v&1)switch(B&7){case 0:B=(B>>3)*5e3;break;case 1:B=(B>>3)*500;break;case 2:B=(B>>3)/20;break;case 3:B=(B>>3)/200;break;case 4:B=(B>>3)/2e3;break;case 5:B=(B>>3)/2e4;break;case 6:B=(B>>3)/16;break;case 7:B=(B>>3)/64;break}return re[1].v=B,re}function E(D,Y){var re=N(D),B=D.read_shift(4),G=D.read_shift(4),ce=D.read_shift(2);if(ce==65535)return B===0&&G===3221225472?(re[1].t="e",re[1].v=15):B===0&&G===3489660928?(re[1].t="e",re[1].v=42):re[1].v=0,re;var ae=ce&32768;return ce=(ce&32767)-16446,re[1].v=(1-ae*2)*(G*Math.pow(2,ce+32)+B*Math.pow(2,ce)),re}function T(D,Y,re,B){var G=it(14);if(G.write_shift(2,D),G.write_shift(1,re),G.write_shift(1,Y),B==0)return G.write_shift(4,0),G.write_shift(4,0),G.write_shift(2,65535),G;var ce=0,ae=0,fe=0,ne=0;return B<0&&(ce=1,B=-B),ae=Math.log2(B)|0,B/=Math.pow(2,ae-31),ne=B>>>0,ne&2147483648||(B/=2,++ae,ne=B>>>0),B-=ne,ne|=2147483648,ne>>>=0,B*=Math.pow(2,32),fe=B>>>0,G.write_shift(4,fe),G.write_shift(4,ne),ae+=16383+(ce?32768:0),G.write_shift(2,ae),G}function A(D,Y){var re=E(D);return D.l+=Y-14,re}function C(D,Y){var re=N(D),B=D.read_shift(4);return re[1].v=B>>6,re}function P(D,Y){var re=N(D),B=D.read_shift(8,"f");return re[1].v=B,re}function O(D,Y){var re=P(D);return D.l+=Y-10,re}function R(D,Y){return D[D.l+Y-1]==0?D.read_shift(Y,"cstr"):""}function F(D,Y){var re=D[D.l++];re>Y-1&&(re=Y-1);for(var B="";B.length<re;)B+=String.fromCharCode(D[D.l++]);return B}function Q(D,Y,re){if(!(!re.qpro||Y<21)){var B=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var G=D.read_shift(Y-21,"cstr");return[B,G]}}function W(D,Y){for(var re={},B=D.l+Y;D.l<B;){var G=D.read_shift(2);if(G==14e3){for(re[G]=[0,""],re[G][0]=D.read_shift(2);D[D.l];)re[G][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return re}function L(D,Y){var re=it(5+D.length);re.write_shift(2,14e3),re.write_shift(2,Y);for(var B=0;B<D.length;++B){var G=D.charCodeAt(B);re[re.l++]=G>127?95:G}return re[re.l++]=0,re}var I={0:{n:"BOF",f:qn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:h},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:R},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:w},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:W},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:R},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:a,to_workbook:t}}();function tOe(e){var t={},r=e.match(na),s=0,a=!1;if(r)for(;s!=r.length;++s){var i=sr(r[s]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=x4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var rOe=function(){var e=pp("t"),t=pp("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:kr(l[1])},c=i.match(t);return c&&(o.s=tOe(c[1])),o}var s=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(l){return l.replace(s,"").split(a).map(r).filter(function(o){return o.v})}}(),nOe=function(){var t=/(\r\n|\n)/g;function r(a,i,l){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),a.b&&(i.push("<b>"),l.push("</b>")),a.i&&(i.push("<i>"),l.push("</i>")),a.strike&&(i.push("<s>"),l.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),a}function s(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(s).join("")}}(),sOe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,aOe=/<(?:\w+:)?r>/,iOe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function z4(e,t){var r=t?t.cellHTML:!0,s={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(s.t=kr(Wr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),s.r=Wr(e),r&&(s.h=N4(s.t))):e.match(aOe)&&(s.r=Wr(e),s.t=kr(Wr((e.replace(iOe,"").match(sOe)||[]).join("").replace(na,""))),r&&(s.h=nOe(rOe(s.r)))),s):{t:""}}var lOe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,oOe=/<(?:\w+:)?(?:si|sstItem)>/g,cOe=/<\/(?:\w+:)?(?:si|sstItem)>/;function dOe(e,t){var r=[],s="";if(!e)return r;var a=e.match(lOe);if(a){s=a[2].replace(oOe,"").split(cOe);for(var i=0;i!=s.length;++i){var l=z4(s[i].trim(),t);l!=null&&(r[r.length]=l)}a=sr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var uOe=/^\s|\s$|[\t\n\r]/;function dW(e,t){if(!t.bookSST)return"";var r=[Un];r[r.length]=St("sst",null,{xmlns:fu[0],count:e.Count,uniqueCount:e.Unique});for(var s=0;s!=e.length;++s)if(e[s]!=null){var a=e[s],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(uOe)&&(i+=' xml:space="preserve"'),i+=">"+Fr(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function mOe(e){return[e.read_shift(4),e.read_shift(4)]}function fOe(e,t){var r=[],s=!1;return Io(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:s=!0;break;case 36:s=!1;break;default:if(l.T,!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function hOe(e,t){return t||(t=it(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var pOe=k5e;function xOe(e){var t=La();ht(t,159,hOe(e));for(var r=0;r<e.length;++r)ht(t,19,pOe(e[r]));return ht(t,160),t.end()}function uW(e){if(typeof jr<"u")return jr.utils.encode(Gd,e);for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function po(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function gOe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=po(e,4),t.U=po(e,4),t.W=po(e,4),t}function yOe(e){for(var t=e.read_shift(4),r=e.l+t-4,s={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(s.name=e.read_shift(0,"lpp4"),s.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return s}function vOe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(yOe(e));return t}function bOe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function jOe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=po(e,4),t.U=po(e,4),t.W=po(e,4),t}function _Oe(e){var t=jOe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function mW(e,t){var r=e.l+t,s={};s.Flags=e.read_shift(4)&63,e.l+=4,s.AlgID=e.read_shift(4);var a=!1;switch(s.AlgID){case 26126:case 26127:case 26128:a=s.Flags==36;break;case 26625:a=s.Flags==4;break;case 0:a=s.Flags==16||s.Flags==4||s.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+s.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return s.AlgIDHash=e.read_shift(4),s.KeySize=e.read_shift(4),s.ProviderType=e.read_shift(4),e.l+=8,s.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,s}function fW(e,t){var r={},s=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,s),e.l=s,r}function wOe(e){var t=po(e);switch(t.Minor){case 2:return[t.Minor,NOe(e)];case 3:return[t.Minor,kOe()];case 4:return[t.Minor,SOe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function NOe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),s=mW(e,r),a=fW(e,e.length-e.l);return{t:"Std",h:s,v:a}}function kOe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function SOe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),s={};return r.replace(na,function(i){var l=sr(i);switch(ql(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){s[o]=l[o]});break;case"<dataIntegrity":s.encryptedHmacKey=l.encryptedHmacKey,s.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":s.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":s.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":s.encs.push(l);break;default:throw l[0]}}),s}function COe(e,t){var r={},s=r.EncryptionVersionInfo=po(e,4);if(t-=4,s.Minor!=2)throw new Error("unrecognized minor version code: "+s.Minor);if(s.Major>4||s.Major<2)throw new Error("unrecognized major version code: "+s.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=mW(e,a),t-=a,r.EncryptionVerifier=fW(e,t),r}function AOe(e){var t={},r=t.EncryptionVersionInfo=po(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function W4(e){var t=0,r,s=uW(e),a=s.length+1,i,l,o,c,d;for(r=kc(a),r[0]=s.length,i=1;i!=a;++i)r[i]=s[i-1];for(i=a-1;i>=0;--i)l=r[i],o=t&16384?1:0,c=t<<1&32767,d=o|c,t=d^l;return t^52811}var hW=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],s=function(l){return(l/2|l*128)&255},a=function(l,o){return s(l^o)},i=function(l){for(var o=t[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],m=0;m!=7;++m)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=uW(l),c=i(o),d=o.length,u=kc(16),m=0;m!=16;++m)u[m]=0;var f,y,x;for((d&1)===1&&(f=c>>8,u[d]=a(e[0],f),--d,f=c&255,y=o[o.length-1],u[d]=a(y,f));d>0;)--d,f=c>>8,u[d]=a(o[d],f),--d,f=c&255,u[d]=a(o[d],f);for(d=15,x=15-o.length;x>0;)f=c>>8,u[d]=a(e[x],f),--d,--x,f=c&255,u[d]=a(o[d],f),--d,--x;return u}}(),EOe=function(e,t,r,s,a){a||(a=t),s||(s=hW(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=s[r],l=(l>>5|l<<3)&255,a[i]=l,++r;return[a,r,s]},TOe=function(e){var t=0,r=hW(e);return function(s){var a=EOe("",s,t,r);return t=a[1],a[0]}};function POe(e,t,r,s){var a={key:qn(e),verificationBytes:qn(e)};return r.password&&(a.verifier=W4(r.password)),s.valid=a.verificationBytes===a.verifier,s.valid&&(s.insitu=TOe(r.password)),a}function OOe(e,t,r){var s=r||{};return s.Info=e.read_shift(2),e.l-=2,s.Info===1?s.Data=AOe(e):s.Data=COe(e,t),s}function ROe(e,t,r){var s={Type:r.biff>=8?e.read_shift(2):0};return s.Type?OOe(e,t-2,s):POe(e,r.biff>=8?t:t-2,r,s),s}var pW=function(){function e(a,i){switch(i.type){case"base64":return t(ai(a),i);case"binary":return t(a,i);case"buffer":return t(fr&&Buffer.isBuffer(a)?a.toString("binary"):Mc(a),i);case"array":return t(Kd(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var l=i||{},o=l.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,m){Array.isArray(o)&&(o[m]=[]);for(var f=/\\\w+\b/g,y=0,x,p=-1;x=f.exec(u);){switch(x[0]){case"\\cell":var h=u.slice(y,f.lastIndex-x[0].length);if(h[0]==" "&&(h=h.slice(1)),++p,h.length){var v={v:h,t:"s"};Array.isArray(o)?o[m][p]=v:o[nr({r:m,c:p})]=v}break}y=f.lastIndex}p>d.e.c&&(d.e.c=p)}),o["!ref"]=ur(d),o}function r(a,i){return Bc(e(a,i),i)}function s(a){for(var i=["{\\rtf1\\ansi"],l=vr(a["!ref"]),o,c=Array.isArray(a),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var m=nr({r:d,c:u});o=c?(a[d]||[])[u]:a[m],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Bl(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}}();function LOe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function vp(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function IOe(e){var t=e[0]/255,r=e[1]/255,s=e[2]/255,a=Math.max(t,r,s),i=Math.min(t,r,s),l=a-i;if(l===0)return[0,0,t];var o=0,c=0,d=a+i;switch(c=l/(d>1?2-d:d),a){case t:o=((r-s)/l+6)%6;break;case r:o=(s-t)/l+2;break;case s:o=(t-r)/l+4;break}return[o/6,c,d/2]}function FOe(e){var t=e[0],r=e[1],s=e[2],a=r*2*(s<.5?s:1-s),i=s-a/2,l=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,l[0]+=a,l[1]+=c;break;case 1:c=a*(2-o),l[0]+=c,l[1]+=a;break;case 2:c=a*(o-2),l[1]+=a,l[2]+=c;break;case 3:c=a*(4-o),l[1]+=c,l[2]+=a;break;case 4:c=a*(o-4),l[2]+=a,l[0]+=c;break;case 5:c=a*(6-o),l[2]+=c,l[0]+=a;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function cb(e,t){if(t===0)return e;var r=IOe(LOe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),vp(FOe(r))}var xW=6,DOe=15,$Oe=1,Js=xW;function bp(e){return Math.floor((e+Math.round(128/Js)/256)*Js)}function jp(e){return Math.floor((e-5)/Js*100+.5)/100}function db(e){return Math.round((e*Js+5)/Js*256)/256}function z_(e){return db(jp(bp(e)))}function V4(e){var t=Math.abs(e-z_(e)),r=Js;if(t>.005)for(Js=$Oe;Js<DOe;++Js)Math.abs(e-z_(e))<=t&&(t=Math.abs(e-z_(e)),r=Js);Js=r}function Sc(e){e.width?(e.wpx=bp(e.width),e.wch=jp(e.wpx),e.MDW=Js):e.wpx?(e.wch=jp(e.wpx),e.width=db(e.wch),e.MDW=Js):typeof e.wch=="number"&&(e.width=db(e.wch),e.wpx=bp(e.width),e.MDW=Js),e.customWidth&&delete e.customWidth}var MOe=96,gW=MOe;function _p(e){return e*96/gW}function xf(e){return e*gW/96}var BOe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function UOe(e,t,r,s){t.Borders=[];var a={},i=!1;(e[0].match(na)||[]).forEach(function(l){var o=sr(l);switch(ql(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=on(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=on(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function zOe(e,t,r,s){t.Fills=[];var a={},i=!1;(e[0].match(na)||[]).forEach(function(l){var o=sr(l);switch(ql(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function WOe(e,t,r,s){t.Fonts=[];var a={},i=!1;(e[0].match(na)||[]).forEach(function(l){var o=sr(l);switch(ql(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Wr(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?on(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?on(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?on(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?on(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?on(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?on(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?on(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=x4[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=on(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Sd[a.color.index];a.color.index==81&&(c=Sd[1]),c||(c=Sd[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=cb(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function VOe(e,t,r){t.NumberFmt=[];for(var s=Rn(Jt),a=0;a<s.length;++a)t.NumberFmt[s[a]]=Jt[s[a]];var i=e[0].match(na);if(i)for(a=0;a<i.length;++a){var l=sr(i[a]);switch(ql(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=kr(Wr(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}Ll(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function HOe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&(t[t.length]=St("numFmt",null,{numFmtId:s,formatCode:Fr(e[s])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=St("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var ug=["numFmtId","fillId","fontId","borderId","xfId"],mg=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function qOe(e,t,r){t.CellXf=[];var s,a=!1;(e[0].match(na)||[]).forEach(function(i){var l=sr(i),o=0;switch(ql(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(s=l,delete s[0],o=0;o<ug.length;++o)s[ug[o]]&&(s[ug[o]]=parseInt(s[ug[o]],10));for(o=0;o<mg.length;++o)s[mg[o]]&&(s[mg[o]]=on(s[mg[o]]));if(t.NumberFmt&&s.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[s.numFmtId]==t.NumberFmt[o]){s.numFmtId=o;break}}t.CellXf.push(s);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=on(l.wrapText)),s.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function GOe(e){var t=[];return t[t.length]=St("cellXfs",null),e.forEach(function(r){t[t.length]=St("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=St("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var JOe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,s=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=o.match(t))&&VOe(m,u,d),(m=o.match(a))&&WOe(m,u,c,d),(m=o.match(s))&&zOe(m,u,c,d),(m=o.match(i))&&UOe(m,u,c,d),(m=o.match(r))&&qOe(m,u,d),u}}();function yW(e,t){var r=[Un,St("styleSheet",null,{xmlns:fu[0],"xmlns:vt":rs.vt})],s;return e.SSF&&(s=HOe(e.SSF))!=null&&(r[r.length]=s),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=GOe(t.cellXfs))&&(r[r.length]=s),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function KOe(e,t){var r=e.read_shift(2),s=ea(e);return[r,s]}function XOe(e,t,r){r||(r=it(6+4*t.length)),r.write_shift(2,e),gs(t,r);var s=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),s}function YOe(e,t,r){var s={};s.sz=e.read_shift(2)/20;var a=O5e(e);a.fItalic&&(s.italic=1),a.fCondense&&(s.condense=1),a.fExtend&&(s.extend=1),a.fShadow&&(s.shadow=1),a.fOutline&&(s.outline=1),a.fStrikeout&&(s.strike=1);var i=e.read_shift(2);switch(i===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(s.underline=l);var o=e.read_shift(1);o>0&&(s.family=o);var c=e.read_shift(1);switch(c>0&&(s.charset=c),e.l++,s.color=P5e(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=ea(e),s}function ZOe(e,t){t||(t=it(25+4*32)),t.write_shift(2,e.sz*20),R5e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),ib(e.color,t);var s=0;return s=2,t.write_shift(1,s),gs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var QOe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],W_,eRe=ra;function iI(e,t){t||(t=it(4*3+8*7+16*1)),W_||(W_=J1(QOe));var r=W_[e.patternType];r==null&&(r=40),t.write_shift(4,r);var s=0;if(r!=40)for(ib({auto:1},t),ib({auto:1},t);s<12;++s)t.write_shift(4,0);else{for(;s<4;++s)t.write_shift(4,0);for(;s<12;++s)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function tRe(e,t){var r=e.l+t,s=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:a}}function vW(e,t,r){r||(r=it(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var s=0;return r.write_shift(1,s),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function h0(e,t){return t||(t=it(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var rRe=ra;function nRe(e,t){return t||(t=it(51)),t.write_shift(1,0),h0(null,t),h0(null,t),h0(null,t),h0(null,t),h0(null,t),t.length>t.l?t.slice(0,t.l):t}function sRe(e,t){return t||(t=it(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),ab(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function aRe(e,t,r){var s=it(2052);return s.write_shift(4,e),ab(t,s),ab(r,s),s.length>s.l?s.slice(0,s.l):s}function iRe(e,t,r){var s={};s.NumberFmt=[];for(var a in Jt)s.NumberFmt[a]=Jt[a];s.CellXf=[],s.Fonts=[];var i=[],l=!1;return Io(e,function(c,d,u){switch(u){case 44:s.NumberFmt[c[0]]=c[1],Ll(c[1],c[0]);break;case 43:s.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=cb(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&s.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),s}function lRe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&++r}),r!=0&&(ht(e,615,il(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&ht(e,44,XOe(a,t[a]))}),ht(e,616))}}function oRe(e){var t=1;ht(e,611,il(t)),ht(e,43,ZOe({sz:12,color:{theme:1},name:"Calibri",family:2})),ht(e,612)}function cRe(e){var t=2;ht(e,603,il(t)),ht(e,45,iI({patternType:"none"})),ht(e,45,iI({patternType:"gray125"})),ht(e,604)}function dRe(e){var t=1;ht(e,613,il(t)),ht(e,46,nRe()),ht(e,614)}function uRe(e){var t=1;ht(e,626,il(t)),ht(e,47,vW({numFmtId:0},65535)),ht(e,627)}function mRe(e,t){ht(e,617,il(t.length)),t.forEach(function(r){ht(e,47,vW(r,0))}),ht(e,618)}function fRe(e){var t=1;ht(e,619,il(t)),ht(e,48,sRe({xfId:0,name:"Normal"})),ht(e,620)}function hRe(e){var t=0;ht(e,505,il(t)),ht(e,506)}function pRe(e){var t=0;ht(e,508,aRe(t,"TableStyleMedium9","PivotStyleMedium4")),ht(e,509)}function xRe(e,t){var r=La();return ht(r,278),lRe(r,e.SSF),oRe(r),cRe(r),dRe(r),uRe(r),mRe(r,t.cellXfs),fRe(r),hRe(r),pRe(r),ht(r,279),r.end()}var gRe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function yRe(e,t,r){t.themeElements.clrScheme=[];var s={};(e[0].match(na)||[]).forEach(function(a){var i=sr(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":s.rgb=i.val;break;case"<a:sysClr":s.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[gRe.indexOf(i[0])]=s,s={}):s.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function vRe(){}function bRe(){}var jRe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,_Re=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,wRe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function NRe(e,t,r){t.themeElements={};var s;[["clrScheme",jRe,yRe],["fontScheme",_Re,vRe],["fmtScheme",wRe,bRe]].forEach(function(a){if(!(s=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](s,t,r)})}var kRe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function bW(e,t){(!e||e.length===0)&&(e=H4());var r,s={};if(!(r=e.match(kRe)))throw new Error("themeElements not found in theme");return NRe(r[0],s,t),s.raw=e,s}function H4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Un];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function SRe(e,t,r){var s=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=s;return}var i=e.slice(e.l);e.l=s;var l;try{l=xz(i,{type:"array"})}catch{return}var o=Ga(l,"theme/theme/theme1.xml",!0);if(o)return bW(o,r)}}function CRe(e){return e.read_shift(4)}function ARe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=ERe(e,4);break;case 2:t.xclrValue=Qz(e);break;case 3:t.xclrValue=CRe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function ERe(e,t){return ra(e,t)}function TRe(e,t){return ra(e,t)}function PRe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,s=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:s[1]=ARe(e);break;case 6:s[1]=TRe(e,r);break;case 14:case 15:s[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return s}function ORe(e,t){var r=e.l+t;e.l+=2;var s=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(PRe(e,r-e.l));return{ixfe:s,ext:i}}function RRe(e,t){t.forEach(function(r){switch(r[0]){}})}function LRe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ea(e)}}function IRe(e){var t=it(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),gs(e.name,t),t.slice(0,t.l)}function FRe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function DRe(e){var t=it(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function $Re(e,t){var r=it(8+2*t.length);return r.write_shift(4,e),gs(t,r),r.slice(0,r.l)}function MRe(e){return e.l+=4,e.read_shift(4)!=0}function BRe(e,t){var r=it(8);return r.write_shift(4,e),r.write_shift(4,1),r}function URe(e,t,r){var s={Types:[],Cell:[],Value:[]},a=r||{},i=[],l=!1,o=2;return Io(e,function(c,d,u){switch(u){case 335:s.Types.push({name:c.name});break;case 51:c.forEach(function(m){o==1?s.Cell.push({type:s.Types[m[0]-1].name,index:m[1]}):o==0&&s.Value.push({type:s.Types[m[0]-1].name,index:m[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),s}function zRe(){var e=La();return ht(e,332),ht(e,334,il(1)),ht(e,335,IRe({name:"XLDAPR",version:12e4,flags:3496657072})),ht(e,336),ht(e,339,$Re(1,"XLDAPR")),ht(e,52),ht(e,35,il(514)),ht(e,4096,il(0)),ht(e,4097,vi(1)),ht(e,36),ht(e,53),ht(e,340),ht(e,337,BRe(1)),ht(e,51,DRe([[1,0]])),ht(e,338),ht(e,333),e.end()}function WRe(e,t,r){var s={Types:[],Cell:[],Value:[]};if(!e)return s;var a=!1,i=2,l;return e.replace(na,function(o){var c=sr(o);switch(ql(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":s.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<s.Types.length;++d)s.Types[d].name==c.name&&(l=s.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?s.Cell.push({type:s.Types[c.t-1].name,index:+c.v}):i==0&&s.Value.push({type:s.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),s}function jW(){var e=[Un];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function VRe(e){var t=[];if(!e)return t;var r=1;return(e.match(na)||[]).forEach(function(s){var a=sr(s);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function HRe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=nr(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}function qRe(e,t,r){var s=[];return Io(e,function(i,l,o){switch(o){case 63:s.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),s}function GRe(e,t,r,s){if(!e)return e;var a=s||{},i=!1;Io(e,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},a)}function JRe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var dm=1024;function _W(e,t){for(var r=[21600,21600],s=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[St("xml",null,{"xmlns:v":za.v,"xmlns:o":za.o,"xmlns:x":za.x,"xmlns:mv":za.mv}).replace(/\/>/,">"),St("o:shapelayout",St("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),St("v:shapetype",[St("v:stroke",null,{joinstyle:"miter"}),St("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:s})];dm<e*1e3;)dm+=1e3;return t.forEach(function(i){var l=_n(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?St("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=St("v:fill",c,o),u={on:"t",obscured:"t"};++dm,a=a.concat(["<v:shape"+xp({id:"_x0000_s"+dm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,St("v:shadow",null,u),St("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",As("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),As("x:AutoFill","False"),As("x:Row",String(l.r)),As("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function lI(e,t,r,s){var a=Array.isArray(e),i;t.forEach(function(l){var o=_n(l.ref);if(a?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},a?e[o.r][o.c]=i:e[l.ref]=i;var c=vr(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=ur(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&s){for(m=0;m<s.length;++m)if(u.a==s[m].id){u.a=s[m].name||u.a;break}}i.c.push(u)})}function KRe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],s=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=sr(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=_n(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var m=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!m&&!!m[1]&&z4(m[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=f.h),s.push(d)}}}}),s}function wW(e){var t=[Un,St("comments",null,{xmlns:fu[0]})],r=[];return t.push("<authors>"),e.forEach(function(s){s[1].forEach(function(a){var i=Fr(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(s){var a=0,i=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?a=r.indexOf("tc="+s[1][0].ID):s[1].forEach(function(c){c.a&&(a=r.indexOf(Fr(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+s[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(As("t",Fr(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;t.push(As("t",Fr(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function XRe(e,t){var r=[],s=!1,a={},i=0;return e.replace(na,function(o,c){var d=sr(o);switch(ql(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":a.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":s=!0;break;case"</mentions>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function YRe(e,t,r){var s=[Un,St("ThreadedComments",null,{xmlns:rs.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),s.push(St("threadedComment",As("text",l.t||""),c))})}),s.push("</ThreadedComments>"),s.join("")}function ZRe(e,t){var r=[],s=!1;return e.replace(na,function(i){var l=sr(i);switch(ql(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function QRe(e){var t=[Un,St("personList",null,{xmlns:rs.TCMNT,"xmlns:x":fu[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,s){t.push(St("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function eLe(e){var t={};t.iauthor=e.read_shift(4);var r=gu(e);return t.rfx=r.s,t.ref=nr(r.s),e.l+=16,t}function tLe(e,t){return t==null&&(t=it(36)),t.write_shift(4,e[1].iauthor),zf(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var rLe=ea;function nLe(e){return gs(e.slice(0,54))}function sLe(e,t){var r=[],s=[],a={},i=!1;return Io(e,function(o,c,d){switch(d){case 632:s.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=s[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function aLe(e){var t=La(),r=[];return ht(t,628),ht(t,630),e.forEach(function(s){s[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),ht(t,632,nLe(a.a)))})}),ht(t,631),ht(t,633),e.forEach(function(s){s[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:_n(s[0]),e:_n(s[0])};ht(t,635,tLe([i,a])),a.t&&a.t.length>0&&ht(t,637,C5e(a)),ht(t,636),delete a.iauthor})}),ht(t,634),ht(t,629),t.end()}var iLe="application/vnd.ms-office.vbaProject";function lLe(e){var t=qt.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,s){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");qt.utils.cfb_add(t,a,e.FileIndex[s].content)}}),qt.write(t)}function oLe(e,t){t.FullPaths.forEach(function(r,s){if(s!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&qt.utils.cfb_add(e,a,t.FileIndex[s].content)}})}var NW=["xlsb","xlsm","xlam","biff8","xla"];function cLe(){return{"!type":"dialog"}}function dLe(){return{"!type":"dialog"}}function uLe(){return{"!type":"macro"}}function mLe(){return{"!type":"macro"}}var Sm=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,a,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=t.c:--u,c?d+=t.r:--d,a+(o?"":"$")+un(u)+(c?"":"$")+Pn(d)}return function(a,i){return t=i,a.replace(e,r)}}(),q4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,G4=function(){return function(t,r){return t.replace(q4,function(s,a,i,l,o,c){var d=R4(l)-(i?0:r.c),u=O4(c)-(o?0:r.r),m=u==0?"":o?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return a+"R"+m+"C"+f})}}();function kW(e,t){return e.replace(q4,function(r,s,a,i,l,o){return s+(a=="$"?a+i:un(R4(i)+t.c))+(l=="$"?l+o:Pn(O4(o)+t.r))})}function fLe(e,t,r){var s=pa(t),a=s.s,i=_n(r),l={r:i.r-a.r,c:i.c-a.c};return kW(e,l)}function hLe(e){return e.length!=1}function oI(e){return e.replace(/_xlfn\./g,"")}function zn(e){e.l+=1}function Cc(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function SW(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return CW(e);r.biff==12&&(s=4)}var a=e.read_shift(s),i=e.read_shift(s),l=Cc(e),o=Cc(e);return{s:{r:a,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function CW(e){var t=Cc(e),r=Cc(e),s=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function pLe(e,t,r){if(r.biff<8)return CW(e);var s=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Cc(e),l=Cc(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function AW(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return xLe(e);var s=e.read_shift(r&&r.biff==12?4:2),a=Cc(e);return{r:s,c:a[0],cRel:a[1],rRel:a[2]}}function xLe(e){var t=Cc(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function gLe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function yLe(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return vLe(e);var a=e.read_shift(s>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:l,rRel:o}}function vLe(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:s}}function bLe(e,t,r){var s=(e[e.l++]&96)>>5,a=SW(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,a]}function jLe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=SW(e,i,r);return[s,a,l]}function _Le(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function wLe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[s,a]}function NLe(e,t,r){var s=(e[e.l++]&96)>>5,a=pLe(e,t-1,r);return[s,a]}function kLe(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function cI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function SLe(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=s;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function CLe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function ALe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function ELe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function TLe(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function EW(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function PLe(e){return e.read_shift(2),EW(e)}function OLe(e){return e.read_shift(2),EW(e)}function RLe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=AW(e,0,r);return[s,a]}function LLe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=yLe(e,0,r);return[s,a]}function ILe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=AW(e,0,r);return[s,a,i]}function FLe(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[MIe[a],OW[a],s]}function DLe(e,t,r){var s=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:$Le(e);return[a,(i[0]===0?OW:$Ie)[i[1]]]}function $Le(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function MLe(e,t,r){e.l+=r&&r.biff==2?3:4}function BLe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function ULe(e){return e.l++,Fo[e.read_shift(1)]}function zLe(e){return e.l++,e.read_shift(2)}function WLe(e){return e.l++,e.read_shift(1)!==0}function VLe(e){return e.l++,Xs(e)}function HLe(e,t,r){return e.l++,sx(e,t-1,r)}function qLe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=In(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Fo[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xs(e);break;case 2:r[1]=yu(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function GLe(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=s;++i)a.push((r.biff==12?gu:Z1)(e));return a}function JLe(e,t,r){var s=0,a=0;r.biff==12?(s=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--a==0&&(a=256));for(var i=0,l=[];i!=s&&(l[i]=[]);++i)for(var o=0;o!=a;++o)l[i][o]=qLe(e,r.biff);return l}function KLe(e,t,r){var s=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,i]}function XLe(e,t,r){if(r.biff==5)return YLe(e);var s=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[s,a,i]}function YLe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function ZLe(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function QLe(e,t,r){var s=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function eIe(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function tIe(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[s,a]}var rIe=ra,nIe=ra,sIe=ra;function ix(e,t,r){return e.l+=2,[gLe(e)]}function J4(e){return e.l+=6,[]}var aIe=ix,iIe=J4,lIe=J4,oIe=ix;function TW(e){return e.l+=2,[qn(e),e.read_shift(2)&1]}var cIe=ix,dIe=TW,uIe=J4,mIe=ix,fIe=ix,hIe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function pIe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),l=hIe[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:s,c:a,C:i}}function xIe(e){return e.l+=2,[e.read_shift(4)]}function gIe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function yIe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function vIe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function bIe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function jIe(e){return e.l+=4,[0,0]}var dI={1:{n:"PtgExp",f:BLe},2:{n:"PtgTbl",f:sIe},3:{n:"PtgAdd",f:zn},4:{n:"PtgSub",f:zn},5:{n:"PtgMul",f:zn},6:{n:"PtgDiv",f:zn},7:{n:"PtgPower",f:zn},8:{n:"PtgConcat",f:zn},9:{n:"PtgLt",f:zn},10:{n:"PtgLe",f:zn},11:{n:"PtgEq",f:zn},12:{n:"PtgGe",f:zn},13:{n:"PtgGt",f:zn},14:{n:"PtgNe",f:zn},15:{n:"PtgIsect",f:zn},16:{n:"PtgUnion",f:zn},17:{n:"PtgRange",f:zn},18:{n:"PtgUplus",f:zn},19:{n:"PtgUminus",f:zn},20:{n:"PtgPercent",f:zn},21:{n:"PtgParen",f:zn},22:{n:"PtgMissArg",f:zn},23:{n:"PtgStr",f:HLe},26:{n:"PtgSheet",f:gIe},27:{n:"PtgEndSheet",f:yIe},28:{n:"PtgErr",f:ULe},29:{n:"PtgBool",f:WLe},30:{n:"PtgInt",f:zLe},31:{n:"PtgNum",f:VLe},32:{n:"PtgArray",f:kLe},33:{n:"PtgFunc",f:FLe},34:{n:"PtgFuncVar",f:DLe},35:{n:"PtgName",f:KLe},36:{n:"PtgRef",f:RLe},37:{n:"PtgArea",f:bLe},38:{n:"PtgMemArea",f:ZLe},39:{n:"PtgMemErr",f:rIe},40:{n:"PtgMemNoMem",f:nIe},41:{n:"PtgMemFunc",f:QLe},42:{n:"PtgRefErr",f:eIe},43:{n:"PtgAreaErr",f:_Le},44:{n:"PtgRefN",f:LLe},45:{n:"PtgAreaN",f:NLe},46:{n:"PtgMemAreaN",f:vIe},47:{n:"PtgMemNoMemN",f:bIe},57:{n:"PtgNameX",f:XLe},58:{n:"PtgRef3d",f:ILe},59:{n:"PtgArea3d",f:jLe},60:{n:"PtgRefErr3d",f:tIe},61:{n:"PtgAreaErr3d",f:wLe},255:{}},_Ie={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wIe={1:{n:"PtgElfLel",f:TW},2:{n:"PtgElfRw",f:mIe},3:{n:"PtgElfCol",f:aIe},6:{n:"PtgElfRwV",f:fIe},7:{n:"PtgElfColV",f:oIe},10:{n:"PtgElfRadical",f:cIe},11:{n:"PtgElfRadicalS",f:uIe},13:{n:"PtgElfColS",f:iIe},15:{n:"PtgElfColSV",f:lIe},16:{n:"PtgElfRadicalLel",f:dIe},25:{n:"PtgList",f:pIe},29:{n:"PtgSxName",f:xIe},255:{}},NIe={0:{n:"PtgAttrNoop",f:jIe},1:{n:"PtgAttrSemi",f:TLe},2:{n:"PtgAttrIf",f:ALe},4:{n:"PtgAttrChoose",f:SLe},8:{n:"PtgAttrGoto",f:CLe},16:{n:"PtgAttrSum",f:MLe},32:{n:"PtgAttrBaxcel",f:cI},33:{n:"PtgAttrBaxcel",f:cI},64:{n:"PtgAttrSpace",f:PLe},65:{n:"PtgAttrSpaceSemi",f:OLe},128:{n:"PtgAttrIfError",f:ELe},255:{}};function lx(e,t,r,s){if(s.biff<8)return ra(e,t);for(var a=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=JLe(e,0,s),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=GLe(e,r[l][1],s),i.push(r[l][2]);break;case"PtgExp":s&&s.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=a-e.l,t!==0&&i.push(ra(e,t)),i}function ox(e,t,r){for(var s=e.l+t,a,i,l=[];s!=e.l;)t=s-e.l,i=e[e.l],a=dI[i]||dI[_Ie[i]],(i===24||i===25)&&(a=(i===24?wIe:NIe)[e[e.l+1]]),!a||!a.f?ra(e,t):l.push([a.n,a.f(e,t,r)]);return l}function kIe(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],a=[],i=0;i<s.length;++i){var l=s[i];if(l)switch(l[0]){case 2:a.push('"'+l[1].replace(/"/g,'""')+'"');break;default:a.push(l[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var SIe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function CIe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function PW(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[s[0]][0]){case 357:return a=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return a=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[s[0]][0][3]?(a=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?a:a+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function uI(e,t,r){var s=PW(e,t,r);return s=="#REF"?s:CIe(s,r)}function Ws(e,t,r,s,a){var i=a&&a.biff||8,l={s:{c:0,r:0}},o=[],c,d,u,m=0,f=0,y,x="";if(!e[0]||!e[0][0])return"";for(var p=-1,h="",v=0,b=e[0].length;v<b;++v){var j=e[0][v];switch(j[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),p>=0){switch(e[0][p][1][0]){case 0:h=Tn(" ",e[0][p][1][1]);break;case 1:h=Tn("\r",e[0][p][1][1]);break;default:if(h="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}d=d+h,p=-1}o.push(d+SIe[j[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Z0(j[1][1],l,a),o.push(Q0(u,i));break;case"PtgRefN":u=r?Z0(j[1][1],r,a):j[1][1],o.push(Q0(u,i));break;case"PtgRef3d":m=j[1][1],u=Z0(j[1][2],l,a),x=uI(s,m,a),o.push(x+"!"+Q0(u,i));break;case"PtgFunc":case"PtgFuncVar":var _=j[1][0],N=j[1][1];_||(_=0),_&=127;var w=_==0?[]:o.slice(-_);o.length-=_,N==="User"&&(N=w.shift()),o.push(N+"("+w.join(",")+")");break;case"PtgBool":o.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(j[1]);break;case"PtgNum":o.push(String(j[1]));break;case"PtgStr":o.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(j[1]);break;case"PtgAreaN":y=BL(j[1][1],r?{s:r}:l,a),o.push(M_(y,a));break;case"PtgArea":y=BL(j[1][1],l,a),o.push(M_(y,a));break;case"PtgArea3d":m=j[1][1],y=j[1][2],x=uI(s,m,a),o.push(x+"!"+M_(y,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=j[1][2];var k=(s.names||[])[f-1]||(s[0]||[])[f],S=k?k.Name:"SH33TJSNAME"+String(f);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var E=j[1][1];f=j[1][2];var T;if(a.biff<=5)E<0&&(E=-E),s[E]&&(T=s[E][f]);else{var A="";if(((s[E]||[])[0]||[])[0]==14849||(((s[E]||[])[0]||[])[0]==1025?s[E][f]&&s[E][f].itab>0&&(A=s.SheetNames[s[E][f].itab-1]+"!"):A=s.SheetNames[f-1]+"!"),s[E]&&s[E][f])A+=s[E][f].Name;else if(s[0]&&s[0][f])A+=s[0][f].Name;else{var C=(PW(s,E,a)||"").split(";;");C[f-1]?A=C[f-1]:A+="SH33TJSERRX"}o.push(A);break}T||(T={Name:"SH33TJSERRY"}),o.push(T.Name);break;case"PtgParen":var P="(",O=")";if(p>=0){switch(h="",e[0][p][1][0]){case 2:P=Tn(" ",e[0][p][1][1])+P;break;case 3:P=Tn("\r",e[0][p][1][1])+P;break;case 4:O=Tn(" ",e[0][p][1][1])+O;break;case 5:O=Tn("\r",e[0][p][1][1])+O;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}o.push(P+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var R={c:r.c,r:r.r};if(s.sharedf[nr(u)]){var F=s.sharedf[nr(u)];o.push(Ws(F,l,R,s,a))}else{var Q=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Ws(d[1],l,R,s,a)),Q=!0;break}Q||o.push(j[1])}break;case"PtgArray":o.push("{"+kIe(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var W=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&W.indexOf(e[0][v][0])==-1){j=e[0][p];var L=!0;switch(j[1][0]){case 4:L=!1;case 0:h=Tn(" ",j[1][1]);break;case 5:L=!1;case 1:h=Tn("\r",j[1][1]);break;default:if(h="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}o.push((L?h:"")+o.pop()+(L?"":h)),p=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function AIe(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],ra(e,t-2)];var o=ox(e,l,r);return t!==l+a&&(i=lx(e,t-l-a,o,r)),e.l=s,[o,i]}function EIe(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],ra(e,t-2)];var o=ox(e,l,r);return t!==l+a&&(i=lx(e,t-l-a,o,r)),e.l=s,[o,i]}function TIe(e,t,r,s){var a=e.l+t,i=ox(e,s,r),l;return a!==e.l&&(l=lx(e,a-e.l,i,r)),[i,l]}function PIe(e,t,r){var s=e.l+t,a,i=e.read_shift(2),l=ox(e,i,r);return i==65535?[[],ra(e,t-2)]:(t!==i+2&&(a=lx(e,s-i-2,l,r)),[l,a])}function OIe(e){var t;if(oo(e,e.l+6)!==65535)return[Xs(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function RIe(e){if(e==null){var t=it(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Xd(e);return Xd(0)}function V_(e,t,r){var s=e.l+t,a=Gl(e);r.biff==2&&++e.l;var i=OIe(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=EIe(e,s-e.l,r);return{cell:a,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function LIe(e,t,r,s,a){var i=Zd(t,r,a),l=RIe(e.v),o=it(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var d=it(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var m=xs([i,l,o,d]);return m}function Q1(e,t,r){var s=e.read_shift(4),a=ox(e,s,r),i=e.read_shift(4),l=i>0?lx(e,i,a,r):null;return[a,l]}var IIe=Q1,ej=Q1,FIe=Q1,DIe=Q1,$Ie={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},OW={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},MIe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mI(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function BIe(e){var t="of:="+e.replace(q4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function H_(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function UIe(e){return e.replace(/\./,"!")}var th={},Cm={},rh=typeof Map<"u";function K4(e,t,r){var s=0,a=e.length;if(r){if(rh?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=rh?r.get(t):r[t];s<i.length;++s)if(e[i[s]].t===t)return e.Count++,i[s]}}else for(;s<a;++s)if(e[s].t===t)return e.Count++,s;return e[a]={t},e.Count++,e.Unique++,r&&(rh?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function tj(e,t){var r={min:e+1,max:e+1},s=-1;return t.MDW&&(Js=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?s=jp(t.wpx):t.wch!=null&&(s=t.wch),s>-1?(r.width=db(s),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Ed(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Uc(e,t,r){var s=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(s==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Ll(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=s=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===s)return a;return e[i]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function RW(e,t,r,s,a,i){try{s.cellNF&&(e.z=Jt[t])}catch(o){if(s.WTF)throw o}if(!(e.t==="z"&&!s.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=mn(e.v)),(!s||s.cellText!==!1)&&e.t!=="z")try{if(Jt[t]==null&&Ll(DTe[t]||"General",t),e.t==="e")e.w=e.w||Fo[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=hp(e.v);else if(e.t==="d"){var l=as(e.v);(l|0)===l?e.w=l.toString(10):e.w=hp(l)}else{if(e.v===void 0)return"";e.w=Jd(e.v,Cm)}else e.t==="d"?e.w=ii(t,as(e.v),Cm):e.w=ii(t,e.v,Cm)}catch(o){if(s.WTF)throw o}if(s.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=cb(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),s.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=cb(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),s.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(s.WTF&&i.Fills)throw o}}}function zIe(e,t,r){if(e&&e["!ref"]){var s=vr(e["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function WIe(e,t){var r=vr(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ur(r))}var VIe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,HIe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,qIe=/<(?:\w:)?hyperlink [^>]*>/mg,GIe=/"(\w*:\w*)"/,JIe=/<(?:\w:)?col\b[^>]*[\/]?>/g,KIe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,XIe=/<(?:\w:)?pageMargins[^>]*\/>/g,LW=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,YIe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ZIe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function QIe(e,t,r,s,a,i,l){if(!e)return e;s||(s={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",m=e.match(HIe);m?(d=e.slice(0,m.index),u=e.slice(m.index+m[0].length)):d=u=e;var f=d.match(LW);f?X4(f[0],o,a,r):(f=d.match(YIe))&&tFe(f[0],f[1]||"",o,a,r);var y=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(y>0){var x=d.slice(y,y+50).match(GIe);x&&WIe(o,x[1])}var p=d.match(ZIe);p&&p[1]&&hFe(p[1],a);var h=[];if(t.cellStyles){var v=d.match(JIe);v&&cFe(h,v)}m&&gFe(m[1],o,t,c,i,l);var b=u.match(KIe);b&&(o["!autofilter"]=uFe(b[0]));var j=[],_=u.match(VIe);if(_)for(y=0;y!=_.length;++y)j[y]=vr(_[y].slice(_[y].indexOf('"')+1));var N=u.match(qIe);N&&iFe(o,N,s);var w=u.match(XIe);if(w&&(o["!margins"]=lFe(sr(w[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=ur(c)),t.sheetRows>0&&o["!ref"]){var k=vr(o["!ref"]);t.sheetRows<=+k.e.r&&(k.e.r=t.sheetRows-1,k.e.r>c.e.r&&(k.e.r=c.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>c.e.c&&(k.e.c=c.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ur(k))}return h.length>0&&(o["!cols"]=h),j.length>0&&(o["!merges"]=j),o}function eFe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ur(e[r])+'"/>';return t+"</mergeCells>"}function X4(e,t,r,s){var a=sr(e);r.Sheets[s]||(r.Sheets[s]={}),a.codeName&&(r.Sheets[s].CodeName=kr(Wr(a.codeName)))}function tFe(e,t,r,s,a){X4(e.slice(0,e.indexOf(">")),r,s,a)}function rFe(e,t,r,s,a){var i=!1,l={},o=null;if(s.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,l.codeName=Cl(Fr(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),o=(o||"")+St("outlinePr",null,d)}!i&&!o||(a[a.length]=St("sheetPr",o,l))}var nFe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sFe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function aFe(e){var t={sheet:1};return nFe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),sFe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=W4(e.password).toString(16).toUpperCase()),St("sheetProtection",null,t)}function iFe(e,t,r){for(var s=Array.isArray(e),a=0;a!=t.length;++a){var i=sr(Wr(t[a]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+kr(i.location))):(i.Target="#"+kr(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=vr(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=nr({c:d,r:c});s?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function lFe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function oFe(e){return Ed(e),St("pageMargins",null,e)}function cFe(e,t){for(var r=!1,s=0;s!=t.length;++s){var a=sr(t[s],!0);a.hidden&&(a.hidden=on(a.hidden));var i=parseInt(a.min,10)-1,l=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,V4(a.width)),Sc(a);i<=l;)e[i++]=Jr(a)}}function dFe(e,t){for(var r=["<cols>"],s,a=0;a!=t.length;++a)(s=t[a])&&(r[r.length]=St("col",null,tj(a,s)));return r[r.length]="</cols>",r.join("")}function uFe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function mFe(e,t,r,s){var a=typeof e.ref=="string"?e.ref:ur(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=pa(a);l.s.r==l.e.r&&(l.e.r=pa(t["!ref"]).e.r,a=ur(l));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==s){c.Ref="'"+r.SheetNames[s]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+a}),St("autoFilter",null,{ref:a})}var fFe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hFe(e,t){t.Views||(t.Views=[{}]),(e.match(fFe)||[]).forEach(function(r,s){var a=sr(r);t.Views[s]||(t.Views[s]={}),+a.zoomScale&&(t.Views[s].zoom=+a.zoomScale),on(a.rightToLeft)&&(t.Views[s].RTL=!0)})}function pFe(e,t,r,s){var a={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),St("sheetViews",St("sheetView",null,a),{})}function xFe(e,t,r,s){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Fo[e.v];break;case"d":s&&s.cellDates?a=mn(e.v,-1).toISOString():(e=Jr(e),e.t="n",a=""+(e.v=as(mn(e.v)))),typeof e.z>"u"&&(e.z=Jt[14]);break;default:a=e.v;break}var o=As("v",Fr(a)),c={r:t},d=Uc(s.cellXfs,e,s);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){o=As("v",""+K4(s.Strings,e.v,s.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=St("f",Fr(e.f),u)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),St("c",o,c)}var gFe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,s=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=pp("v"),l=pp("f");return function(c,d,u,m,f,y){for(var x=0,p="",h=[],v=[],b=0,j=0,_=0,N="",w,k,S=0,E=0,T,A,C=0,P=0,O=Array.isArray(y.CellXf),R,F=[],Q=[],W=Array.isArray(d),L=[],I={},K=!1,D=!!u.sheetStubs,Y=c.split(t),re=0,B=Y.length;re!=B;++re){p=Y[re].trim();var G=p.length;if(G!==0){var ce=0;e:for(x=0;x<G;++x)switch(p[x]){case">":if(p[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(k=sr(p.slice(ce,x),!0),S=k.r!=null?parseInt(k.r,10):S+1,E=-1,u.sheetRows&&u.sheetRows<S)continue;I={},K=!1,k.ht&&(K=!0,I.hpt=parseFloat(k.ht),I.hpx=xf(I.hpt)),k.hidden=="1"&&(K=!0,I.hidden=!0),k.outlineLevel!=null&&(K=!0,I.level=+k.outlineLevel),K&&(L[S-1]=I)}break;case"<":ce=x;break}if(ce>=x)break;if(k=sr(p.slice(ce,x),!0),S=k.r!=null?parseInt(k.r,10):S+1,E=-1,!(u.sheetRows&&u.sheetRows<S)){m.s.r>S-1&&(m.s.r=S-1),m.e.r<S-1&&(m.e.r=S-1),u&&u.cellStyles&&(I={},K=!1,k.ht&&(K=!0,I.hpt=parseFloat(k.ht),I.hpx=xf(I.hpt)),k.hidden=="1"&&(K=!0,I.hidden=!0),k.outlineLevel!=null&&(K=!0,I.level=+k.outlineLevel),K&&(L[S-1]=I)),h=p.slice(x).split(e);for(var ae=0;ae!=h.length&&h[ae].trim().charAt(0)=="<";++ae);for(h=h.slice(ae),x=0;x!=h.length;++x)if(p=h[x].trim(),p.length!==0){if(v=p.match(r),b=x,j=0,_=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(b=0,N=v[1],j=0;j!=N.length&&!((_=N.charCodeAt(j)-64)<1||_>26);++j)b=26*b+_;--b,E=b}else++E;for(j=0;j!=p.length&&p.charCodeAt(j)!==62;++j);if(++j,k=sr(p.slice(0,j),!0),k.r||(k.r=nr({r:S-1,c:E})),N=p.slice(j),w={t:""},(v=N.match(i))!=null&&v[1]!==""&&(w.v=kr(v[1])),u.cellFormula){if((v=N.match(l))!=null&&v[1]!==""){if(w.f=kr(Wr(v[1])).replace(/\r\n/g,`
`),u.xlfn||(w.f=oI(w.f)),v[0].indexOf('t="array"')>-1)w.F=(N.match(a)||[])[1],w.F.indexOf(":")>-1&&F.push([vr(w.F),w.F]);else if(v[0].indexOf('t="shared"')>-1){A=sr(v[0]);var fe=kr(Wr(v[1]));u.xlfn||(fe=oI(fe)),Q[parseInt(A.si,10)]=[A,fe,k.r]}}else(v=N.match(/<f[^>]*\/>/))&&(A=sr(v[0]),Q[A.si]&&(w.f=fLe(Q[A.si][1],Q[A.si][2],k.r)));var ne=_n(k.r);for(j=0;j<F.length;++j)ne.r>=F[j][0].s.r&&ne.r<=F[j][0].e.r&&ne.c>=F[j][0].s.c&&ne.c<=F[j][0].e.c&&(w.F=F[j][1])}if(k.t==null&&w.v===void 0)if(w.f||w.F)w.v=0,w.t="n";else if(D)w.t="z";else continue;else w.t=k.t||"n";switch(m.s.c>E&&(m.s.c=E),m.e.c<E&&(m.e.c=E),w.t){case"n":if(w.v==""||w.v==null){if(!D)continue;w.t="z"}else w.v=parseFloat(w.v);break;case"s":if(typeof w.v>"u"){if(!D)continue;w.t="z"}else T=th[parseInt(w.v,10)],w.v=T.t,w.r=T.r,u.cellHTML&&(w.h=T.h);break;case"str":w.t="s",w.v=w.v!=null?Wr(w.v):"",u.cellHTML&&(w.h=N4(w.v));break;case"inlineStr":v=N.match(s),w.t="s",v!=null&&(T=z4(v[1]))?(w.v=T.t,u.cellHTML&&(w.h=T.h)):w.v="";break;case"b":w.v=on(w.v);break;case"d":u.cellDates?w.v=mn(w.v,1):(w.v=as(mn(w.v,1)),w.t="n");break;case"e":(!u||u.cellText!==!1)&&(w.w=w.v),w.v=Fz[w.v];break}if(C=P=0,R=null,O&&k.s!==void 0&&(R=y.CellXf[k.s],R!=null&&(R.numFmtId!=null&&(C=R.numFmtId),u.cellStyles&&R.fillId!=null&&(P=R.fillId))),RW(w,C,P,u,f,y),u.cellDates&&O&&w.t=="n"&&mu(Jt[C])&&(w.t="d",w.v=X1(w.v)),k.cm&&u.xlmeta){var he=(u.xlmeta.Cell||[])[+k.cm-1];he&&he.type=="XLDAPR"&&(w.D=!0)}if(W){var M=_n(k.r);d[M.r]||(d[M.r]=[]),d[M.r][M.c]=w}else d[k.r]=w}}}}L.length>0&&(d["!rows"]=L)}}();function yFe(e,t,r,s){var a=[],i=[],l=vr(e["!ref"]),o="",c,d="",u=[],m=0,f=0,y=e["!rows"],x=Array.isArray(e),p={r:d},h,v=-1;for(f=l.s.c;f<=l.e.c;++f)u[f]=un(f);for(m=l.s.r;m<=l.e.r;++m){for(i=[],d=Pn(m),f=l.s.c;f<=l.e.c;++f){c=u[f]+d;var b=x?(e[m]||[])[f]:e[c];b!==void 0&&(o=xFe(b,c,e,t))!=null&&i.push(o)}(i.length>0||y&&y[m])&&(p={r:d},y&&y[m]&&(h=y[m],h.hidden&&(p.hidden=1),v=-1,h.hpx?v=_p(h.hpx):h.hpt&&(v=h.hpt),v>-1&&(p.ht=v,p.customHeight=1),h.level&&(p.outlineLevel=h.level)),a[a.length]=St("row",i.join(""),p))}if(y)for(;m<y.length;++m)y&&y[m]&&(p={r:m+1},h=y[m],h.hidden&&(p.hidden=1),v=-1,h.hpx?v=_p(h.hpx):h.hpt&&(v=h.hpt),v>-1&&(p.ht=v,p.customHeight=1),h.level&&(p.outlineLevel=h.level),a[a.length]=St("row","",p));return a.join("")}function IW(e,t,r,s){var a=[Un,St("worksheet",null,{xmlns:fu[0],"xmlns:r":rs.r})],i=r.SheetNames[e],l=0,o="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=vr(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=ur(u)}s||(s={}),c["!comments"]=[];var m=[];rFe(c,r,e,t,a),a[a.length]=St("dimension",null,{ref:d}),a[a.length]=pFe(c,t,e,r),t.sheetFormat&&(a[a.length]=St("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=dFe(c,c["!cols"])),a[l=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=yFe(c,t),o.length>0&&(a[a.length]=o)),a.length>l+1&&(a[a.length]="</sheetData>",a[l]=a[l].replace("/>",">")),c["!protect"]&&(a[a.length]=aFe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=mFe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=eFe(c["!merges"]));var f=-1,y,x=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(y={ref:p[0]},p[1].Target.charAt(0)!="#"&&(x=Ir(s,-1,Fr(p[1].Target).replace(/#.*$/,""),hr.HLINK),y["r:id"]="rId"+x),(f=p[1].Target.indexOf("#"))>-1&&(y.location=Fr(p[1].Target.slice(f+1))),p[1].Tooltip&&(y.tooltip=Fr(p[1].Tooltip)),a[a.length]=St("hyperlink",null,y))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=oFe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=As("ignoredErrors",St("ignoredError",null,{numberStoredAsText:1,sqref:d}))),m.length>0&&(x=Ir(s,-1,"../drawings/drawing"+(e+1)+".xml",hr.DRAW),a[a.length]=St("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=m),c["!comments"].length>0&&(x=Ir(s,-1,"../drawings/vmlDrawing"+(e+1)+".vml",hr.VML),a[a.length]=St("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function vFe(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=s,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function bFe(e,t,r){var s=it(145),a=(r["!rows"]||[])[e]||{};s.write_shift(4,e),s.write_shift(4,0);var i=320;a.hpx?i=_p(a.hpx)*20:a.hpt&&(i=a.hpt*20),s.write_shift(2,i),s.write_shift(1,0);var l=0;a.level&&(l|=a.level),a.hidden&&(l|=16),(a.hpx||a.hpt)&&(l|=32),s.write_shift(1,l),s.write_shift(1,0);var o=0,c=s.l;s.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var m=-1,f=-1,y=u<<10;y<u+1<<10;++y){d.c=y;var x=Array.isArray(r)?(r[d.r]||[])[d.c]:r[nr(d)];x&&(m<0&&(m=y),f=y)}m<0||(++o,s.write_shift(4,m),s.write_shift(4,f))}var p=s.l;return s.l=c,s.write_shift(4,o),s.l=p,s.length>s.l?s.slice(0,s.l):s}function jFe(e,t,r,s){var a=bFe(s,r,t);(a.length>17||(t["!rows"]||[])[s])&&ht(e,0,a)}var _Fe=gu,wFe=zf;function NFe(){}function kFe(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=A5e(e),r}function SFe(e,t,r){r==null&&(r=it(84+4*e.length));var s=192;t&&(t.above&&(s&=-65),t.left&&(s&=-129)),r.write_shift(1,s);for(var a=1;a<3;++a)r.write_shift(1,0);return ib({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Pz(e,r),r.slice(0,r.l)}function CFe(e){var t=Di(e);return[t]}function AFe(e,t,r){return r==null&&(r=it(8)),hu(t,r)}function EFe(e){var t=pu(e);return[t]}function TFe(e,t,r){return r==null&&(r=it(4)),xu(t,r)}function PFe(e){var t=Di(e),r=e.read_shift(1);return[t,r,"b"]}function OFe(e,t,r){return r==null&&(r=it(9)),hu(t,r),r.write_shift(1,e.v?1:0),r}function RFe(e){var t=pu(e),r=e.read_shift(1);return[t,r,"b"]}function LFe(e,t,r){return r==null&&(r=it(5)),xu(t,r),r.write_shift(1,e.v?1:0),r}function IFe(e){var t=Di(e),r=e.read_shift(1);return[t,r,"e"]}function FFe(e,t,r){return r==null&&(r=it(9)),hu(t,r),r.write_shift(1,e.v),r}function DFe(e){var t=pu(e),r=e.read_shift(1);return[t,r,"e"]}function $Fe(e,t,r){return r==null&&(r=it(8)),xu(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function MFe(e){var t=Di(e),r=e.read_shift(4);return[t,r,"s"]}function BFe(e,t,r){return r==null&&(r=it(12)),hu(t,r),r.write_shift(4,t.v),r}function UFe(e){var t=pu(e),r=e.read_shift(4);return[t,r,"s"]}function zFe(e,t,r){return r==null&&(r=it(8)),xu(t,r),r.write_shift(4,t.v),r}function WFe(e){var t=Di(e),r=Xs(e);return[t,r,"n"]}function VFe(e,t,r){return r==null&&(r=it(16)),hu(t,r),Xd(e.v,r),r}function FW(e){var t=pu(e),r=Xs(e);return[t,r,"n"]}function HFe(e,t,r){return r==null&&(r=it(12)),xu(t,r),Xd(e.v,r),r}function qFe(e){var t=Di(e),r=D4(e);return[t,r,"n"]}function GFe(e,t,r){return r==null&&(r=it(12)),hu(t,r),Oz(e.v,r),r}function JFe(e){var t=pu(e),r=D4(e);return[t,r,"n"]}function KFe(e,t,r){return r==null&&(r=it(8)),xu(t,r),Oz(e.v,r),r}function XFe(e){var t=Di(e),r=L4(e);return[t,r,"is"]}function YFe(e){var t=Di(e),r=ea(e);return[t,r,"str"]}function ZFe(e,t,r){return r==null&&(r=it(12+4*e.v.length)),hu(t,r),gs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function QFe(e){var t=pu(e),r=ea(e);return[t,r,"str"]}function eDe(e,t,r){return r==null&&(r=it(8+4*e.v.length)),xu(t,r),gs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function tDe(e,t,r){var s=e.l+t,a=Di(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=ej(e,s-e.l,r);l[3]=Ws(o,null,a,r.supbooks,r)}else e.l=s;return l}function rDe(e,t,r){var s=e.l+t,a=Di(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=ej(e,s-e.l,r);l[3]=Ws(o,null,a,r.supbooks,r)}else e.l=s;return l}function nDe(e,t,r){var s=e.l+t,a=Di(e);a.r=r["!row"];var i=Xs(e),l=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=ej(e,s-e.l,r);l[3]=Ws(o,null,a,r.supbooks,r)}else e.l=s;return l}function sDe(e,t,r){var s=e.l+t,a=Di(e);a.r=r["!row"];var i=ea(e),l=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=ej(e,s-e.l,r);l[3]=Ws(o,null,a,r.supbooks,r)}else e.l=s;return l}var aDe=gu,iDe=zf;function lDe(e,t){return t==null&&(t=it(4)),t.write_shift(4,e),t}function oDe(e,t){var r=e.l+t,s=gu(e),a=I4(e),i=ea(e),l=ea(e),o=ea(e);e.l=r;var c={rfx:s,relId:a,loc:i,display:o};return l&&(c.Tooltip=l),c}function cDe(e,t){var r=it(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));zf({s:_n(e[0]),e:_n(e[0])},r),F4("rId"+t,r);var s=e[1].Target.indexOf("#"),a=s==-1?"":e[1].Target.slice(s+1);return gs(a||"",r),gs(e[1].Tooltip||"",r),gs("",r),r.slice(0,r.l)}function dDe(){}function uDe(e,t,r){var s=e.l+t,a=Rz(e),i=e.read_shift(1),l=[a];if(l[2]=i,r.cellFormula){var o=IIe(e,s-e.l,r);l[1]=o}else e.l=s;return l}function mDe(e,t,r){var s=e.l+t,a=gu(e),i=[a];if(r.cellFormula){var l=DIe(e,s-e.l,r);i[1]=l,e.l=s}else e.l=s;return i}function fDe(e,t,r){r==null&&(r=it(18));var s=tj(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(s.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof s.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var DW=["left","right","top","bottom","header","footer"];function hDe(e){var t={};return DW.forEach(function(r){t[r]=Xs(e)}),t}function pDe(e,t){return t==null&&(t=it(6*8)),Ed(e),DW.forEach(function(r){Xd(e[r],t)}),t}function xDe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function gDe(e,t,r){r==null&&(r=it(30));var s=924;return(((t||{}).Views||[])[0]||{}).RTL&&(s|=32),r.write_shift(2,s),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function yDe(e){var t=it(24);return t.write_shift(4,4),t.write_shift(4,1),zf(e,t),t}function vDe(e,t){return t==null&&(t=it(16*4+2)),t.write_shift(2,e.password?W4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function bDe(){}function jDe(){}function _De(e,t,r,s,a,i,l){if(!e)return e;var o=t||{};s||(s={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,f=!1,y,x,p,h,v,b,j,_,N,w=[];o.biff=12,o["!row"]=0;var k=0,S=!1,E=[],T={},A=o.supbooks||a.supbooks||[[]];if(A.sharedf=T,A.arrayf=E,A.SheetNames=a.SheetNames||a.Sheets.map(function(W){return W.name}),!o.supbooks&&(o.supbooks=A,a.Names))for(var C=0;C<a.Names.length;++C)A[0][C+1]=a.Names[C];var P=[],O=[],R=!1;wp[16]={n:"BrtShortReal",f:FW};var F;if(Io(e,function(L,I,K){if(!f)switch(K){case 148:d=L;break;case 0:y=L,o.sheetRows&&o.sheetRows<=y.r&&(f=!0),_=Pn(h=y.r),o["!row"]=y.r,(L.hidden||L.hpt||L.level!=null)&&(L.hpt&&(L.hpx=xf(L.hpt)),O[L.r]=L);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:L[2]},L[2]){case"n":x.v=L[1];break;case"s":j=th[L[1]],x.v=j.t,x.r=j.r;break;case"b":x.v=!!L[1];break;case"e":x.v=L[1],o.cellText!==!1&&(x.w=Fo[x.v]);break;case"str":x.t="s",x.v=L[1];break;case"is":x.t="s",x.v=L[1].t;break}if((p=l.CellXf[L[0].iStyleRef])&&RW(x,p.numFmtId,null,o,i,l),v=L[0].c==-1?v+1:L[0].c,o.dense?(c[h]||(c[h]=[]),c[h][v]=x):c[un(v)+_]=x,o.cellFormula){for(S=!1,k=0;k<E.length;++k){var D=E[k];y.r>=D[0].s.r&&y.r<=D[0].e.r&&v>=D[0].s.c&&v<=D[0].e.c&&(x.F=ur(D[0]),S=!0)}!S&&L.length>3&&(x.f=L[3])}if(u.s.r>y.r&&(u.s.r=y.r),u.s.c>v&&(u.s.c=v),u.e.r<y.r&&(u.e.r=y.r),u.e.c<v&&(u.e.c=v),o.cellDates&&p&&x.t=="n"&&mu(Jt[p.numFmtId])){var Y=oc(x.v);Y&&(x.t="d",x.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}F&&(F.type=="XLDAPR"&&(x.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||m)break;x={t:"z",v:void 0},v=L[0].c==-1?v+1:L[0].c,o.dense?(c[h]||(c[h]=[]),c[h][v]=x):c[un(v)+_]=x,u.s.r>y.r&&(u.s.r=y.r),u.s.c>v&&(u.s.c=v),u.e.r<y.r&&(u.e.r=y.r),u.e.c<v&&(u.e.c=v),F&&(F.type=="XLDAPR"&&(x.D=!0),F=void 0);break;case 176:w.push(L);break;case 49:F=((o.xlmeta||{}).Cell||[])[L-1];break;case 494:var re=s["!id"][L.relId];for(re?(L.Target=re.Target,L.loc&&(L.Target+="#"+L.loc),L.Rel=re):L.relId==""&&(L.Target="#"+L.loc),h=L.rfx.s.r;h<=L.rfx.e.r;++h)for(v=L.rfx.s.c;v<=L.rfx.e.c;++v)o.dense?(c[h]||(c[h]=[]),c[h][v]||(c[h][v]={t:"z",v:void 0}),c[h][v].l=L):(b=nr({c:v,r:h}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=L);break;case 426:if(!o.cellFormula)break;E.push(L),N=o.dense?c[h][v]:c[un(v)+_],N.f=Ws(L[1],u,{r:y.r,c:v},A,o),N.F=ur(L[0]);break;case 427:if(!o.cellFormula)break;T[nr(L[0].s)]=L[1],N=o.dense?c[h][v]:c[un(v)+_],N.f=Ws(L[1],u,{r:y.r,c:v},A,o);break;case 60:if(!o.cellStyles)break;for(;L.e>=L.s;)P[L.e--]={width:L.w/256,hidden:!!(L.flags&1),level:L.level},R||(R=!0,V4(L.w/256)),Sc(P[L.e+1]);break;case 161:c["!autofilter"]={ref:ur(L)};break;case 476:c["!margins"]=L;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),L.name&&(a.Sheets[r].CodeName=L.name),(L.above||L.left)&&(c["!outline"]={above:L.above,left:L.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),L.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!I.T){if(!m||o.WTF)throw new Error("Unexpected record 0x"+K.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=ur(d||u)),o.sheetRows&&c["!ref"]){var Q=vr(c["!ref"]);o.sheetRows<=+Q.e.r&&(Q.e.r=o.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ur(Q))}return w.length>0&&(c["!merges"]=w),P.length>0&&(c["!cols"]=P),O.length>0&&(c["!rows"]=O),c}function wDe(e,t,r,s,a,i,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Jr(t),t.z=t.z||Jt[14],t.v=as(mn(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:s};switch(c.s=Uc(a.cellXfs,t,a),t.l&&i["!links"].push([nr(c),t.l]),t.c&&i["!comments"].push([nr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=K4(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,l?ht(e,18,zFe(t,c)):ht(e,7,BFe(t,c))):(c.t="str",l?ht(e,17,eDe(t,c)):ht(e,6,ZFe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?ht(e,13,KFe(t,c)):ht(e,2,GFe(t,c)):l?ht(e,16,HFe(t,c)):ht(e,5,VFe(t,c)),!0;case"b":return c.t="b",l?ht(e,15,LFe(t,c)):ht(e,4,OFe(t,c)),!0;case"e":return c.t="e",l?ht(e,14,$Fe(t,c)):ht(e,3,FFe(t,c)),!0}return l?ht(e,12,TFe(t,c)):ht(e,1,AFe(t,c)),!0}function NDe(e,t,r,s){var a=vr(t["!ref"]||"A1"),i,l="",o=[];ht(e,145);var c=Array.isArray(t),d=a.e.r;t["!rows"]&&(d=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=d;++u){l=Pn(u),jFe(e,t,a,u);var m=!1;if(u<=a.e.r)for(var f=a.s.c;f<=a.e.c;++f){u===a.s.r&&(o[f]=un(f)),i=o[f]+l;var y=c?(t[u]||[])[f]:t[i];if(!y){m=!1;continue}m=wDe(e,y,u,f,s,t,m)}}ht(e,146)}function kDe(e,t){!t||!t["!merges"]||(ht(e,177,lDe(t["!merges"].length)),t["!merges"].forEach(function(r){ht(e,176,iDe(r))}),ht(e,178))}function SDe(e,t){!t||!t["!cols"]||(ht(e,390),t["!cols"].forEach(function(r,s){r&&ht(e,60,fDe(s,r))}),ht(e,391))}function CDe(e,t){!t||!t["!ref"]||(ht(e,648),ht(e,649,yDe(vr(t["!ref"]))),ht(e,650))}function ADe(e,t,r){t["!links"].forEach(function(s){if(s[1].Target){var a=Ir(r,-1,s[1].Target.replace(/#.*$/,""),hr.HLINK);ht(e,494,cDe(s,a))}}),delete t["!links"]}function EDe(e,t,r,s){if(t["!comments"].length>0){var a=Ir(s,-1,"../drawings/vmlDrawing"+(r+1)+".vml",hr.VML);ht(e,551,F4("rId"+a)),t["!legacy"]=a}}function TDe(e,t,r,s){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:ur(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=pa(i);o.s.r==o.e.r&&(o.e.r=pa(t["!ref"]).e.r,i=ur(o));for(var c=0;c<l.length;++c){var d=l[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==s){d.Ref="'"+r.SheetNames[s]+"'!"+i;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+i}),ht(e,161,zf(vr(i))),ht(e,162)}}function PDe(e,t,r){ht(e,133),ht(e,137,gDe(t,r)),ht(e,138),ht(e,134)}function ODe(e,t){t["!protect"]&&ht(e,535,vDe(t["!protect"]))}function RDe(e,t,r,s){var a=La(),i=r.SheetNames[e],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=vr(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],ht(a,129),(r.vbaraw||l["!outline"])&&ht(a,147,SFe(o,l["!outline"])),ht(a,148,wFe(c)),PDe(a,l,r.Workbook),SDe(a,l),NDe(a,l,e,t),ODe(a,l),TDe(a,l,r,e),kDe(a,l),ADe(a,l,s),l["!margins"]&&ht(a,476,pDe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&CDe(a,l),EDe(a,l,e,s),ht(a,130),a.end()}function LDe(e){var t=[],r=e.match(/^<c:numCache>/),s;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var a=kr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){s=i.replace(/<.*?>/g,"")}),[t,a,s]}function IDe(e,t,r,s,a,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var f=LDe(m);u.s.r=u.s.c=0,u.e.c=o,d=un(o),f[0].forEach(function(y,x){l[d+Pn(x)]={t:"n",v:y,z:f[1]},c=x}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=ur(u)),l}function FDe(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(LW);return o&&X4(o[0],i,a,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}function DDe(e,t){e.l+=10;var r=ea(e);return{name:r}}function $De(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Io(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}var Y4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],MDe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],BDe=[],UDe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function fI(e,t){for(var r=0;r!=e.length;++r)for(var s=e[r],a=0;a!=t.length;++a){var i=t[a];if(s[i[0]]==null)s[i[0]]=i[1];else switch(i[2]){case"bool":typeof s[i[0]]=="string"&&(s[i[0]]=on(s[i[0]]));break;case"int":typeof s[i[0]]=="string"&&(s[i[0]]=parseInt(s[i[0]],10));break}}}function hI(e,t){for(var r=0;r!=t.length;++r){var s=t[r];if(e[s[0]]==null)e[s[0]]=s[1];else switch(s[2]){case"bool":typeof e[s[0]]=="string"&&(e[s[0]]=on(e[s[0]]));break;case"int":typeof e[s[0]]=="string"&&(e[s[0]]=parseInt(e[s[0]],10));break}}}function $W(e){hI(e.WBProps,Y4),hI(e.CalcPr,UDe),fI(e.WBView,MDe),fI(e.Sheets,BDe),Cm.date1904=on(e.WBProps.date1904)}function zDe(e){return!e.Workbook||!e.Workbook.WBProps?"false":on(e.Workbook.WBProps.date1904)?"true":"false"}var WDe="][*?/\\".split("");function MW(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return WDe.forEach(function(s){if(e.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function VDe(e,t,r){e.forEach(function(s,a){MW(s);for(var i=0;i<a;++i)if(s==e[i])throw new Error("Duplicate Sheet Name: "+s);if(r){var l=t&&t[a]&&t[a].CodeName||s;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function BW(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];VDe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)zIe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var HDe=/<\w+:workbook/;function qDe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},s=!1,a="xmlns",i={},l=0;if(e.replace(na,function(c,d){var u=sr(c);switch(ql(u[0])){case"<?xml":break;case"<workbook":c.match(HDe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[a];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Y4.forEach(function(m){if(u[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=on(u[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(u[m[0]],10);break;default:r.WBProps[m[0]]=u[m[0]]}}),u.codeName&&(r.WBProps.CodeName=Wr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=kr(Wr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":s=!0;break;case"</definedNames>":s=!1;break;case"<definedName":i={},i.Name=Wr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),on(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=kr(Wr(e.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":s=!0;break;case"</AlternateContent>":s=!1;break;case"<revisionPtr":break;default:if(!s&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),fu.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return $W(r),r}function UW(e){var t=[Un];t[t.length]=St("workbook",null,{xmlns:fu[0],"xmlns:r":rs.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Y4.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(s[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(s.codeName=e.Workbook.WBProps.CodeName,delete s.CodeName)),t[t.length]=St("workbookPr",null,s);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Fr(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=St("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=St("definedName",Fr(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function GDe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=_k(e),r.name=ea(e),r}function JDe(e,t){return t||(t=it(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),F4(e.strRelID,t),gs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function KDe(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ea(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function XDe(e,t){t||(t=it(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Pz(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function YDe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function ZDe(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=E5e(e),l=FIe(e,0,r),o=I4(e);e.l=s;var c={Name:i,Ptg:l};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function QDe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},s=[],a=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],wp[16]={n:"BrtFRTArchID$",f:YDe},Io(e,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ws(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;case 16:break;default:if(!d.T){if(!a||t.WTF&&s[s.length-1]!=37&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),$W(r),r.Names=i,r.supbooks=l,r}function e$e(e,t){ht(e,143);for(var r=0;r!=t.SheetNames.length;++r){var s=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:s,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};ht(e,156,JDe(a))}ht(e,144)}function t$e(e,t){t||(t=it(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return gs("SheetJS",t),gs(mp.version,t),gs(mp.version,t),gs("7262",t),t.length>t.l?t.slice(0,t.l):t}function r$e(e,t){t||(t=it(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function n$e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,s=0,a=-1,i=-1;s<r.length;++s)!r[s]||!r[s].Hidden&&a==-1?a=s:r[s].Hidden==1&&i==-1&&(i=s);i>a||(ht(e,135),ht(e,158,r$e(a)),ht(e,136))}}function s$e(e,t){var r=La();return ht(r,131),ht(r,128,t$e()),ht(r,153,XDe(e.Workbook&&e.Workbook.WBProps||null)),n$e(r,e),e$e(r,e),ht(r,132),r.end()}function a$e(e,t,r){return t.slice(-4)===".bin"?QDe(e,r):qDe(e,r)}function i$e(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?_De(e,s,r,a,i,l,o):QIe(e,s,r,a,i,l,o)}function l$e(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?$De(e,s,r,a,i):FDe(e,s,r,a,i)}function o$e(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?uLe():mLe()}function c$e(e,t,r,s,a,i,l,o){return t.slice(-4)===".bin"?cLe():dLe()}function d$e(e,t,r,s){return t.slice(-4)===".bin"?iRe(e,r,s):JOe(e,r,s)}function u$e(e,t,r){return bW(e,r)}function m$e(e,t,r){return t.slice(-4)===".bin"?fOe(e,r):dOe(e,r)}function f$e(e,t,r){return t.slice(-4)===".bin"?sLe(e,r):KRe(e,r)}function h$e(e,t,r){return t.slice(-4)===".bin"?qRe(e):VRe(e)}function p$e(e,t,r,s){return r.slice(-4)===".bin"?GRe(e,t,r,s):void 0}function x$e(e,t,r){return t.slice(-4)===".bin"?URe(e,t,r):WRe(e,t,r)}function g$e(e,t,r){return(t.slice(-4)===".bin"?s$e:UW)(e)}function y$e(e,t,r,s,a){return(t.slice(-4)===".bin"?RDe:IW)(e,r,s,a)}function v$e(e,t,r){return(t.slice(-4)===".bin"?xRe:yW)(e,r)}function b$e(e,t,r){return(t.slice(-4)===".bin"?xOe:dW)(e,r)}function j$e(e,t,r){return(t.slice(-4)===".bin"?aLe:wW)(e)}function _$e(e){return(e.slice(-4)===".bin"?zRe:jW)()}var zW=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,WW=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function zi(e,t){var r=e.split(/\s+/),s=[];if(s[0]=r[0],r.length===1)return s;var a=e.match(zW),i,l,o,c;if(a)for(c=0;c!=a.length;++c)i=a[c].match(WW),(l=i[1].indexOf(":"))===-1?s[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),s[o]=i[2].slice(1,i[2].length-1));return s}function w$e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var s=e.match(zW),a,i,l,o;if(s)for(o=0;o!=s.length;++o)a=s[o].match(WW),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?l="xmlns"+a[1].slice(6):l=a[1].slice(i+1),r[l]=a[2].slice(1,a[2].length-1));return r}var nh;function N$e(e,t){var r=nh[e]||kr(e);return r==="General"?Jd(t):ii(r,t)}function k$e(e,t,r,s){var a=s;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=on(s);break;case"i2":case"int":a=parseInt(s,10);break;case"r4":case"float":a=parseFloat(s);break;case"date":case"dateTime.tz":a=mn(s);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[kr(t)]=a}function S$e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Fo[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=hp(e.v):e.w=Jd(e.v):e.w=N$e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var s=nh[t]||t||"General";if(r.cellNF&&(e.z=s),r.cellDates&&e.t=="n"&&mu(s)){var a=oc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function C$e(e,t,r){if(r.cellStyles&&t.Interior){var s=t.Interior;s.Pattern&&(s.patternType=BOe[s.Pattern]||s.Pattern)}e[t.ID]=t}function A$e(e,t,r,s,a,i,l,o,c,d){var u="General",m=s.StyleID,f={};d=d||{};var y=[],x=0;for(m===void 0&&o&&(m=o.StyleID),m===void 0&&l&&(m=l.StyleID);i[m]!==void 0&&(i[m].nf&&(u=i[m].nf),i[m].Interior&&y.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":s.t="b",s.v=on(e);break;case"String":s.t="s",s.r=PL(kr(e)),s.v=e.indexOf("<")>-1?kr(t||e).replace(/<.*?>/g,""):s.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),s.v=(mn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),s.v!==s.v?s.v=kr(e):s.v<60&&(s.v=s.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":s.v===void 0&&(s.v=+e),s.t||(s.t="n");break;case"Error":s.t="e",s.v=Fz[e],d.cellText!==!1&&(s.w=e);break;default:e==""&&t==""?s.t="z":(s.t="s",s.v=PL(t||e));break}if(S$e(s,u,d),d.cellFormula!==!1)if(s.Formula){var p=kr(s.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),s.f=Sm(p,a),delete s.Formula,s.ArrayRange=="RC"?s.F=Sm("RC:RC",a):s.ArrayRange&&(s.F=Sm(s.ArrayRange,a),c.push([vr(s.F),s.F]))}else for(x=0;x<c.length;++x)a.r>=c[x][0].s.r&&a.r<=c[x][0].e.r&&a.c>=c[x][0].s.c&&a.c<=c[x][0].e.c&&(s.F=c[x][1]);d.cellStyles&&(y.forEach(function(h){!f.patternType&&h.patternType&&(f.patternType=h.patternType)}),s.s=f),s.StyleID!==void 0&&(s.ixfe=s.StyleID)}function E$e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function q_(e,t){var r=t||{};Mf();var s=cm(k4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof jr<"u"?s=jr.utils.decode(65001,Qv(s)):s=Wr(s));var a=s.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var l=Jr(r);return l.type="string",pf.to_workbook(s,l)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ye){a.indexOf("<"+Ye)>=0&&(i=!0)}),i)return u8e(s,r);nh={"General Number":"General","General Date":Jt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Jt[15],"Short Date":Jt[14],"Long Time":Jt[19],"Medium Time":Jt[18],"Short Time":Jt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Jt[2],Standard:Jt[4],Percent:Jt[10],Scientific:Jt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},m=[],f=r.dense?[]:{},y="",x={},p={},h=zi('<Data ss:Type="String">'),v=0,b=0,j=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},w={},k="",S=0,E=[],T={},A={},C=0,P=[],O=[],R={},F=[],Q,W=!1,L=[],I=[],K={},D=0,Y=0,re={Sheets:[],WBProps:{date1904:!1}},B={};gp.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"");for(var G="";o=gp.exec(s);)switch(o[3]=(G=o[3]).toLowerCase()){case"data":if(G=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?A$e(s.slice(v,o.index),k,h,c[c.length-1][0]=="comment"?R:x,{c:b,r:j},N,F[b],p,L,r):(k="",h=zi(o[0]),v=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(x.c=O),(!r.sheetRows||r.sheetRows>j)&&x.v!==void 0&&(r.dense?(f[j]||(f[j]=[]),f[j][b]=x):f[un(b)+Pn(j)]=x),x.HRef&&(x.l={Target:kr(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(D=b+(parseInt(x.MergeAcross,10)|0),Y=j+(parseInt(x.MergeDown,10)|0),E.push({s:{c:b,r:j},e:{c:D,r:Y}})),!r.sheetStubs)x.MergeAcross?b=D+1:++b;else if(x.MergeAcross||x.MergeDown){for(var ce=b;ce<=D;++ce)for(var ae=j;ae<=Y;++ae)(ce>b||ae>j)&&(r.dense?(f[ae]||(f[ae]=[]),f[ae][ce]={t:"z"}):f[un(ce)+Pn(ae)]={t:"z"});b=D+1}else++b;else x=w$e(o[0]),x.Index&&(b=+x.Index-1),b<_.s.c&&(_.s.c=b),b>_.e.c&&(_.e.c=b),o[0].slice(-2)==="/>"&&++b,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(j<_.s.r&&(_.s.r=j),j>_.e.r&&(_.e.r=j),o[0].slice(-2)==="/>"&&(p=zi(o[0]),p.Index&&(j=+p.Index-1)),b=0,++j):(p=zi(o[0]),p.Index&&(j=+p.Index-1),K={},(p.AutoFitHeight=="0"||p.Height)&&(K.hpx=parseInt(p.Height,10),K.hpt=_p(K.hpx),I[j]=K),p.Hidden=="1"&&(K.hidden=!0,I[j]=K));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));m.push(y),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(f["!ref"]=ur(_),r.sheetRows&&r.sheetRows<=_.e.r&&(f["!fullref"]=f["!ref"],_.e.r=r.sheetRows-1,f["!ref"]=ur(_))),E.length&&(f["!merges"]=E),F.length>0&&(f["!cols"]=F),I.length>0&&(f["!rows"]=I),u[y]=f}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=b=0,c.push([o[3],!1]),d=zi(o[0]),y=kr(d.Name),f=r.dense?[]:{},E=[],L=[],I=[],B={name:y,Hidden:0},re.Sheets.push(B);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),F=[],W=!1}break;case"style":o[1]==="/"?C$e(N,w,r):w=zi(o[0]);break;case"numberformat":w.nf=kr(zi(o[0]).Format||"General"),nh[w.nf]&&(w.nf=nh[w.nf]);for(var fe=0;fe!=392&&Jt[fe]!=w.nf;++fe);if(fe==392){for(fe=57;fe!=392;++fe)if(Jt[fe]==null){Ll(w.nf,fe);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=zi(o[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!W&&Q.wpx>10){W=!0,Js=xW;for(var ne=0;ne<F.length;++ne)F[ne]&&Sc(F[ne])}W&&Sc(Q),F[Q.Index-1||F.length]=Q;for(var he=0;he<+Q.Span;++he)F[F.length]=Jr(Q);break;case"namedrange":if(o[1]==="/")break;re.Names||(re.Names=[]);var M=sr(o[0]),Se={Name:M.Name,Ref:Sm(M.RefersTo.slice(1),{r:0,c:0})};re.Sheets.length>0&&(Se.Sheet=re.Sheets.length-1),re.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?k+=s.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;w.Interior=zi(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?e6e(T,G,s.slice(C,o.index)):C=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));E$e(R),O.push(R)}else c.push([o[3],!1]),d=zi(o[0]),R={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var me=zi(o[0]);f["!autofilter"]={ref:Sm(me.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return vI(s,r);var Pe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Pe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Pe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":re.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Pe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Pe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(s.slice(C,o.index)){case"SheetHidden":B.Hidden=1;break;case"SheetVeryHidden":B.Hidden=2;break}else C=o.index+o[0].length;break;case"header":f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+sr(o[0]).Margin)||(f["!margins"].header=+sr(o[0]).Margin);break;case"footer":f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+sr(o[0]).Margin)||(f["!margins"].footer=+sr(o[0]).Margin);break;case"pagemargins":var ue=sr(o[0]);f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+ue.Top)||(f["!margins"].top=+ue.Top),isNaN(+ue.Left)||(f["!margins"].left=+ue.Left),isNaN(+ue.Right)||(f["!margins"].right=+ue.Right),isNaN(+ue.Bottom)||(f["!margins"].bottom=+ue.Bottom);break;case"displayrighttoleft":re.Views||(re.Views=[]),re.Views[0]||(re.Views[0]={}),re.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Pe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Pe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Pe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Pe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Pe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Pe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Pe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Pe=!1}break;case"smarttags":break;default:Pe=!1;break}if(Pe||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?k$e(A,G,P,s.slice(C,o.index)):(P=o,C=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=u),ye.SheetNames=m,ye.Workbook=re,ye.SSF=Jr(Jt),ye.Props=T,ye.Custprops=A,ye}function Ek(e,t){switch(eA(t=t||{}),t.type||"base64"){case"base64":return q_(ai(e),t);case"binary":case"buffer":case"file":return q_(e,t);case"array":return q_(Mc(e),t)}}function T$e(e,t){var r=[];return e.Props&&r.push(t6e(e.Props,t)),e.Custprops&&r.push(r6e(e.Props,e.Custprops)),r.join("")}function P$e(){return""}function O$e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(s,a){var i=[];i.push(St("NumberFormat",null,{"ss:Format":Fr(Jt[s.numFmtId])}));var l={"ss:ID":"s"+(21+a)};r.push(St("Style",i.join(""),l))}),St("Styles",r.join(""))}function VW(e){return St("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+G4(e.Ref,{r:0,c:0})})}function R$e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],s=0;s<t.length;++s){var a=t[s];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(VW(a)))}return St("Names",r.join(""))}function L$e(e,t,r,s){if(!e||!((s||{}).Workbook||{}).Names)return"";for(var a=s.Workbook.Names,i=[],l=0;l<a.length;++l){var o=a[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(VW(o)))}return i.join("")}function I$e(e,t,r,s){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(St("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(St("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(St("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[r])if(s.Workbook.Sheets[r].Hidden)a.push(St("Visible",s.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(s.Workbook.Sheets[i]&&!s.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(As("ProtectContents","True")),e["!protect"].objects&&a.push(As("ProtectObjects","True")),e["!protect"].scenarios&&a.push(As("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(As("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(As("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&a.push("<"+l[1]+"/>")})),a.length==0?"":St("WorksheetOptions",a.join(""),{xmlns:za.x})}function F$e(e){return e.map(function(t){var r=s5e(t.t||""),s=St("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return St("Comment",s,{"ss:Author":t.a})}).join("")}function D$e(e,t,r,s,a,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Fr(G4(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var c=_n(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Fr(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Fr(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=l.c||d[u].s.r!=l.r||(d[u].e.c>d[u].s.c&&(o["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(o["ss:MergeDown"]=d[u].e.r-d[u].s.r));var m="",f="";switch(e.t){case"z":if(!s.sheetStubs)return"";break;case"n":m="Number",f=String(e.v);break;case"b":m="Boolean",f=e.v?"1":"0";break;case"e":m="Error",f=Fo[e.v];break;case"d":m="DateTime",f=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Jt[14]);break;case"s":m="String",f=n5e(e.v||"");break}var y=Uc(s.cellXfs,e,s);o["ss:StyleID"]="s"+(21+y),o["ss:Index"]=l.c+1;var x=e.v!=null?f:"",p=e.t=="z"?"":'<Data ss:Type="'+m+'">'+x+"</Data>";return(e.c||[]).length>0&&(p+=F$e(e.c)),St("Cell",p,o)}function $$e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=xf(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function M$e(e,t,r,s){if(!e["!ref"])return"";var a=vr(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(h,v){Sc(h);var b=!!h.width,j=tj(v,h),_={"ss:Index":v+1};b&&(_["ss:Width"]=bp(j.width)),h.hidden&&(_["ss:Hidden"]="1"),o.push(St("Column",null,_))});for(var c=Array.isArray(e),d=a.s.r;d<=a.e.r;++d){for(var u=[$$e(d,(e["!rows"]||[])[d])],m=a.s.c;m<=a.e.c;++m){var f=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>m)&&!(i[l].s.r>d)&&!(i[l].e.c<m)&&!(i[l].e.r<d)){(i[l].s.c!=m||i[l].s.r!=d)&&(f=!0);break}if(!f){var y={r:d,c:m},x=nr(y),p=c?(e[d]||[])[m]:e[x];u.push(D$e(p,x,e,t,r,s,y))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function B$e(e,t,r){var s=[],a=r.SheetNames[e],i=r.Sheets[a],l=i?L$e(i,t,e,r):"";return l.length>0&&s.push("<Names>"+l+"</Names>"),l=i?M$e(i,t,e,r):"",l.length>0&&s.push("<Table>"+l+"</Table>"),s.push(I$e(i,t,e,r)),s.join("")}function U$e(e,t){t||(t={}),e.SSF||(e.SSF=Jr(Jt)),e.SSF&&(Mf(),rx(e.SSF),t.revssf=K1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Uc(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(T$e(e,t)),r.push(P$e()),r.push(""),r.push("");for(var s=0;s<e.SheetNames.length;++s)r.push(St("Worksheet",B$e(s,t,e),{"ss:Name":Fr(e.SheetNames[s])}));return r[2]=O$e(e,t),r[3]=R$e(e),Un+St("Workbook",r.join(""),{xmlns:za.ss,"xmlns:o":za.o,"xmlns:x":za.x,"xmlns:ss":za.ss,"xmlns:dt":za.dt,"xmlns:html":za.html})}function z$e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=L5e(r),r.length-r.l<=4)return t;var s=r.read_shift(4);if(s==0||s>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(s=r.read_shift(4),s!==1907505652)||(t.UnicodeClipboardFormat=I5e(r),s=r.read_shift(4),s==0||s>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var W$e=[60,1084,2066,2165,2175];function V$e(e,t,r,s,a){var i=s,l=[],o=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}l.push(o),r.l+=i;for(var c=oo(r,r.l),d=Tk[c],u=0;d!=null&&W$e.indexOf(c)>-1;)i=oo(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=Tk[c=oo(r,r.l)];var m=xs(l);Ss(m,0);var f=0;m.lens=[];for(var y=0;y<l.length;++y)m.lens.push(f),f+=l[y].length;if(m.length<s)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+m.length+" < "+s;return t.f(m,m.length,a)}function xl(e,t,r){if(e.t!=="z"&&e.XF){var s=0;try{s=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Jt[s])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Fo[e.v]:s===0||s=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=hp(e.v):e.w=Jd(e.v):e.w=ii(s,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&s&&e.t=="n"&&mu(Jt[s]||String(s))){var a=oc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function fg(e,t,r){return{v:e,ixfe:t,t:r}}function H$e(e,t){var r={opts:{}},s={},a=t.dense?[]:{},i={},l={},o=null,c=[],d="",u={},m,f="",y,x,p,h,v={},b=[],j,_,N=[],w=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(Ke){return Ke<8?Sd[Ke]:Ke<64&&w[Ke-8]||Sd[Ke]},T=function(Ke,gt,At){var Lt=gt.XF.data;if(!(!Lt||!Lt.patternType||!At||!At.cellStyles)){gt.s={},gt.s.patternType=Lt.patternType;var Bt;(Bt=vp(E(Lt.icvFore)))&&(gt.s.fgColor={rgb:Bt}),(Bt=vp(E(Lt.icvBack)))&&(gt.s.bgColor={rgb:Bt})}},A=function(Ke,gt,At){if(!(K>1)&&!(At.sheetRows&&Ke.r>=At.sheetRows)){if(At.cellStyles&&gt.XF&&gt.XF.data&&T(Ke,gt,At),delete gt.ixfe,delete gt.XF,m=Ke,f=nr(Ke),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Ke.r<l.s.r&&(l.s.r=Ke.r),Ke.c<l.s.c&&(l.s.c=Ke.c),Ke.r+1>l.e.r&&(l.e.r=Ke.r+1),Ke.c+1>l.e.c&&(l.e.c=Ke.c+1),At.cellFormula&&gt.f){for(var Lt=0;Lt<b.length;++Lt)if(!(b[Lt][0].s.c>Ke.c||b[Lt][0].s.r>Ke.r)&&!(b[Lt][0].e.c<Ke.c||b[Lt][0].e.r<Ke.r)){gt.F=ur(b[Lt][0]),(b[Lt][0].s.c!=Ke.c||b[Lt][0].s.r!=Ke.r)&&delete gt.f,gt.f&&(gt.f=""+Ws(b[Lt][1],l,Ke,L,C));break}}At.dense?(a[Ke.r]||(a[Ke.r]=[]),a[Ke.r][Ke.c]=gt):a[f]=gt}},C={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var P,O=[],R=[],F=[],Q=[],W=!1,L=[];L.SheetNames=C.snames,L.sharedf=C.sharedf,L.arrayf=C.arrayf,L.names=[],L.XTI=[];var I=0,K=0,D=0,Y=[],re=[],B;C.codepage=1200,ki(1200);for(var G=!1;e.l<e.length-1;){var ce=e.l,ae=e.read_shift(2);if(ae===0&&I===10)break;var fe=e.l===e.length?0:e.read_shift(2),ne=Tk[ae];if(ne&&ne.f){if(t.bookSheets&&I===133&&ae!==133)break;if(I=ae,ne.r===2||ne.r==12){var he=e.read_shift(2);if(fe-=2,!C.enc&&he!==ae&&((he&255)<<8|he>>8)!==ae)throw new Error("rt mismatch: "+he+"!="+ae);ne.r==12&&(e.l+=10,fe-=10)}var M={};if(ae===10?M=ne.f(e,fe,C):M=V$e(ae,ne,e,fe,C),K==0&&[9,521,1033,2057].indexOf(I)===-1)continue;switch(ae){case 34:r.opts.Date1904=k.WBProps.date1904=M;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=M,!t.password)throw new Error("File is password-protected");if(M.valid==null)throw new Error("Encryption scheme unsupported");if(!M.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=M;break;case 66:var Se=Number(M);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}ki(C.codepage=Se),G=!0;break;case 317:C.rrtabid=M;break;case 25:C.winlocked=M;break;case 439:r.opts.RefreshAll=M;break;case 12:r.opts.CalcCount=M;break;case 16:r.opts.CalcDelta=M;break;case 17:r.opts.CalcIter=M;break;case 13:r.opts.CalcMode=M;break;case 14:r.opts.CalcPrecision=M;break;case 95:r.opts.CalcSaveRecalc=M;break;case 15:C.CalcRefMode=M;break;case 2211:r.opts.FullCalc=M;break;case 129:M.fDialog&&(a["!type"]="dialog"),M.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),M.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:N.push(M);break;case 430:L.push([M]),L[L.length-1].XTI=[];break;case 35:case 547:L[L.length-1].push(M);break;case 24:case 536:B={Name:M.Name,Ref:Ws(M.rgce,l,null,L,C)},M.itab>0&&(B.Sheet=M.itab-1),L.names.push(B),L[0]||(L[0]=[],L[0].XTI=[]),L[L.length-1].push(M),M.Name=="_xlnm._FilterDatabase"&&M.itab>0&&M.rgce&&M.rgce[0]&&M.rgce[0][0]&&M.rgce[0][0][0]=="PtgArea3d"&&(re[M.itab-1]={ref:ur(M.rgce[0][0][1][2])});break;case 22:C.ExternCount=M;break;case 23:L.length==0&&(L[0]=[],L[0].XTI=[]),L[L.length-1].XTI=L[L.length-1].XTI.concat(M),L.XTI=L.XTI.concat(M);break;case 2196:if(C.biff<8)break;B!=null&&(B.Comment=M[1]);break;case 18:a["!protect"]=M;break;case 19:M!==0&&C.WTF&&console.error("Password verifier: "+M);break;case 133:i[M.pos]=M,C.snames.push(M.name);break;case 10:{if(--K)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,a["!ref"]=ur(l),t.sheetRows&&t.sheetRows<=l.e.r){var me=l.e.r;l.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=ur(l),l.e.r=me}l.e.r++,l.e.c++}O.length>0&&(a["!merges"]=O),R.length>0&&(a["!objects"]=R),F.length>0&&(a["!cols"]=F),Q.length>0&&(a["!rows"]=Q),k.Sheets.push(S)}d===""?u=a:s[d]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[ae]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[M.BIFFVer]||8),C.biffguess=M.BIFFVer==0,M.BIFFVer==0&&M.dt==4096&&(C.biff=5,G=!0,ki(C.codepage=28591)),C.biff==8&&M.BIFFVer==0&&M.dt==16&&(C.biff=2),K++)break;if(a=t.dense?[]:{},C.biff<8&&!G&&(G=!0,ki(C.codepage=t.codepage||1252)),C.biff<5||M.BIFFVer==0&&M.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var Pe={pos:e.l-fe,name:d};i[Pe.pos]=Pe,C.snames.push(d)}else d=(i[ce]||{name:""}).name;M.dt==32&&(a["!type"]="chart"),M.dt==64&&(a["!type"]="macro"),O=[],R=[],C.arrayf=b=[],F=[],Q=[],W=!1,S={Hidden:(i[ce]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[M.r]||[])[M.c]:a[nr({c:M.c,r:M.r})])&&++M.c,j={ixfe:M.ixfe,XF:N[M.ixfe]||{},v:M.val,t:"n"},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t);break;case 5:case 517:j={ixfe:M.ixfe,XF:N[M.ixfe],v:M.val,t:M.t},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t);break;case 638:j={ixfe:M.ixfe,XF:N[M.ixfe],v:M.rknum,t:"n"},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t);break;case 189:for(var ue=M.c;ue<=M.C;++ue){var ye=M.rkrec[ue-M.c][0];j={ixfe:ye,XF:N[ye],v:M.rkrec[ue-M.c][1],t:"n"},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:ue,r:M.r},j,t)}break;case 6:case 518:case 1030:{if(M.val=="String"){o=M;break}if(j=fg(M.val,M.cell.ixfe,M.tt),j.XF=N[j.ixfe],t.cellFormula){var Ye=M.formula;if(Ye&&Ye[0]&&Ye[0][0]&&Ye[0][0][0]=="PtgExp"){var lt=Ye[0][0][1][0],xe=Ye[0][0][1][1],Ae=nr({r:lt,c:xe});v[Ae]?j.f=""+Ws(M.formula,l,M.cell,L,C):j.F=((t.dense?(a[lt]||[])[xe]:a[Ae])||{}).F}else j.f=""+Ws(M.formula,l,M.cell,L,C)}D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A(M.cell,j,t),o=M}break;case 7:case 519:if(o)o.val=M,j=fg(M,o.cell.ixfe,"s"),j.XF=N[j.ixfe],t.cellFormula&&(j.f=""+Ws(o.formula,l,o.cell,L,C)),D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A(o.cell,j,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(M);var $e=nr(M[0].s);if(y=t.dense?(a[M[0].s.r]||[])[M[0].s.c]:a[$e],t.cellFormula&&y){if(!o||!$e||!y)break;y.f=""+Ws(M[1],l,M[0],L,C),y.F=ur(M[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!o)break;v[nr(o.cell)]=M[0],y=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[nr(o.cell)],(y||{}).f=""+Ws(M[0],l,m,L,C)}}break;case 253:j=fg(c[M.isst].t,M.ixfe,"s"),c[M.isst].h&&(j.h=c[M.isst].h),j.XF=N[j.ixfe],D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:M.ixfe,XF:N[M.ixfe],t:"z"},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t));break;case 190:if(t.sheetStubs)for(var Me=M.c;Me<=M.C;++Me){var Fe=M.ixfe[Me-M.c];j={ixfe:Fe,XF:N[Fe],t:"z"},D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:Me,r:M.r},j,t)}break;case 214:case 516:case 4:j=fg(M.val,M.ixfe,"s"),j.XF=N[j.ixfe],D>0&&(j.z=Y[j.ixfe>>8&63]),xl(j,t,r.opts.Date1904),A({c:M.c,r:M.r},j,t);break;case 0:case 512:K===1&&(l=M);break;case 252:c=M;break;case 1054:if(C.biff==4){Y[D++]=M[1];for(var We=0;We<D+163&&Jt[We]!=M[1];++We);We>=163&&Ll(M[1],D+163)}else Ll(M[1],M[0]);break;case 30:{Y[D++]=M;for(var Ze=0;Ze<D+163&&Jt[Ze]!=M;++Ze);Ze>=163&&Ll(M,D+163)}break;case 229:O=O.concat(M);break;case 93:R[M.cmo[0]]=C.lastobj=M;break;case 438:C.lastobj.TxO=M;break;case 127:C.lastobj.ImData=M;break;case 440:for(h=M[0].s.r;h<=M[0].e.r;++h)for(p=M[0].s.c;p<=M[0].e.c;++p)y=t.dense?(a[h]||[])[p]:a[nr({c:p,r:h})],y&&(y.l=M[1]);break;case 2048:for(h=M[0].s.r;h<=M[0].e.r;++h)for(p=M[0].s.c;p<=M[0].e.c;++p)y=t.dense?(a[h]||[])[p]:a[nr({c:p,r:h})],y&&y.l&&(y.l.Tooltip=M[1]);break;case 28:{if(C.biff<=5&&C.biff>=2)break;y=t.dense?(a[M[0].r]||[])[M[0].c]:a[nr(M[0])];var pt=R[M[2]];y||(t.dense?(a[M[0].r]||(a[M[0].r]=[]),y=a[M[0].r][M[0].c]={t:"z"}):y=a[nr(M[0])]={t:"z"},l.e.r=Math.max(l.e.r,M[0].r),l.s.r=Math.min(l.s.r,M[0].r),l.e.c=Math.max(l.e.c,M[0].c),l.s.c=Math.min(l.s.c,M[0].c)),y.c||(y.c=[]),x={a:M[1],t:pt.TxO.t},y.c.push(x)}break;case 2173:RRe(N[M.ixfe],M.ext);break;case 125:{if(!C.cellStyles)break;for(;M.e>=M.s;)F[M.e--]={width:M.w/256,level:M.level||0,hidden:!!(M.flags&1)},W||(W=!0,V4(M.w/256)),Sc(F[M.e+1])}break;case 520:{var Ve={};M.level!=null&&(Q[M.r]=Ve,Ve.level=M.level),M.hidden&&(Q[M.r]=Ve,Ve.hidden=!0),M.hpt&&(Q[M.r]=Ve,Ve.hpt=M.hpt,Ve.hpx=xf(M.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Ed(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ae]]=M;break;case 161:a["!margins"]||Ed(a["!margins"]={}),a["!margins"].header=M.header,a["!margins"].footer=M.footer;break;case 574:M.RTL&&(k.Views[0].RTL=!0);break;case 146:w=M;break;case 2198:P=M;break;case 140:_=M;break;case 442:d?S.CodeName=M||S.name:k.WBProps.CodeName=M||"ThisWorkbook";break}}else ne||console.error("Missing Info for XLS Record 0x"+ae.toString(16)),e.l+=fe}return r.SheetNames=Rn(i).sort(function(Je,Ke){return Number(Je)-Number(Ke)}).map(function(Je){return i[Je].name}),t.bookSheets||(r.Sheets=s),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&re.forEach(function(Je,Ke){r.Sheets[r.SheetNames[Ke]]["!autofilter"]=Je}),r.Strings=c,r.SSF=Jr(Jt),C.enc&&(r.Encryption=C.enc),P&&(r.Themes=P),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),L.names.length>0&&(k.Names=L.names),r.Workbook=k,r}var sh={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function q$e(e,t,r){var s=qt.find(e,"/!DocumentSummaryInformation");if(s&&s.size>0)try{var a=KL(s,wk,sh.DSI);for(var i in a)t[i]=a[i]}catch(d){if(r.WTF)throw d}var l=qt.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=KL(l,Nk,sh.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(zz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function G$e(e,t){var r=[],s=[],a=[],i=0,l,o=kL(wk,"n"),c=kL(Nk,"n");if(e.Props)for(l=Rn(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?s:a).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=Rn(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?s:a).push([l[i],e.Custprops[l[i]]]);var d=[];for(i=0;i<a.length;++i)Kz.indexOf(a[i][0])>-1||Uz.indexOf(a[i][0])>-1||a[i][1]!=null&&d.push(a[i]);s.length&&qt.utils.cfb_add(t,"/SummaryInformation",XL(s,sh.SI,c,Nk)),(r.length||d.length)&&qt.utils.cfb_add(t,"/DocumentSummaryInformation",XL(r,sh.DSI,o,wk,d.length?d:null,sh.UDI))}function Z4(e,t){t||(t={}),eA(t),G1(),t.codepage&&q1(t.codepage);var r,s;if(e.FullPaths){if(qt.find(e,"/encryption"))throw new Error("File is password-protected");r=qt.find(e,"!CompObj"),s=qt.find(e,"/Workbook")||qt.find(e,"/Book")}else{switch(t.type){case"base64":e=qa(ai(e));break;case"binary":e=qa(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ss(e,0),s={content:e}}var a,i;if(r&&z$e(r),t.bookProps&&!t.bookSheets)a={};else{var l=fr?"buffer":"array";if(s&&s.content)a=H$e(s.content,t);else if((i=qt.find(e,"PerfectOffice_MAIN"))&&i.content)a=Ad.to_workbook(i.content,(t.type=l,t));else if((i=qt.find(e,"NativeContent_MAIN"))&&i.content)a=Ad.to_workbook(i.content,(t.type=l,t));else throw(i=qt.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&qt.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=lLe(e))}var o={};return e.FullPaths&&q$e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function J$e(e,t){var r=t||{},s=qt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return qt.utils.cfb_add(s,a,HW(e,r)),r.biff==8&&(e.Props||e.Custprops)&&G$e(e,s),r.biff==8&&e.vbaraw&&oLe(s,qt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),s}var wp={0:{f:vFe},1:{f:CFe},2:{f:qFe},3:{f:IFe},4:{f:PFe},5:{f:WFe},6:{f:YFe},7:{f:MFe},8:{f:sDe},9:{f:nDe},10:{f:tDe},11:{f:rDe},12:{f:EFe},13:{f:JFe},14:{f:DFe},15:{f:RFe},16:{f:FW},17:{f:QFe},18:{f:UFe},19:{f:L4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ZDe},40:{},42:{},43:{f:YOe},44:{f:KOe},45:{f:eRe},46:{f:rRe},47:{f:tRe},48:{},49:{f:_5e},50:{},51:{f:FRe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:iW},62:{f:XFe},63:{f:HRe},64:{f:bDe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ra,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:xDe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:kFe},148:{f:_Fe,p:16},151:{f:dDe},152:{},153:{f:KDe},154:{},155:{},156:{f:GDe},157:{},158:{},159:{T:1,f:mOe},160:{T:-1},161:{T:1,f:gu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:aDe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:LRe},336:{T:-1},337:{f:MRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_k},357:{},358:{},359:{},360:{T:1},361:{},362:{f:aW},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:uDe},427:{f:mDe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:hDe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:NFe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:oDe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_k},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:rLe},633:{T:1},634:{T:-1},635:{T:1,f:eLe},636:{T:-1},637:{f:S5e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:DDe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:jDe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Tk={6:{f:V_},10:{f:zo},12:{f:qn},13:{f:qn},14:{f:In},15:{f:In},16:{f:Xs},17:{f:In},18:{f:In},19:{f:qn},20:{f:rI},21:{f:rI},23:{f:aW},24:{f:sI},25:{f:In},26:{},27:{},28:{f:jPe},29:{},34:{f:In},35:{f:nI},38:{f:Xs},39:{f:Xs},40:{f:Xs},41:{f:Xs},42:{f:In},43:{f:In},47:{f:ROe},49:{f:J6e},51:{f:qn},60:{},61:{f:W6e},64:{f:In},65:{f:G6e},66:{f:qn},77:{},80:{},81:{},82:{},85:{f:qn},89:{},90:{},91:{},92:{f:O6e},93:{f:NPe},94:{},95:{f:In},96:{},97:{},99:{f:In},125:{f:iW},128:{f:cPe},129:{f:L6e},130:{f:qn},131:{f:In},132:{f:In},133:{f:I6e},134:{},140:{f:OPe},141:{f:qn},144:{},146:{f:IPe},151:{},152:{},153:{},154:{},155:{},156:{f:qn},157:{},158:{},160:{f:zPe},161:{f:$Pe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:aPe},190:{f:iPe},193:{f:zo},197:{},198:{},199:{},200:{},201:{},202:{f:In},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:qn},220:{},221:{f:In},222:{},224:{f:oPe},225:{f:P6e},226:{f:zo},227:{},229:{f:_Pe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:D6e},253:{f:X6e},255:{f:M6e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Xz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:In},353:{f:zo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:hPe},431:{f:In},432:{},433:{},434:{},437:{},438:{f:CPe},439:{f:In},440:{f:APe},441:{},442:{f:ax},443:{},444:{f:qn},445:{},446:{},448:{f:zo},449:{f:z6e,r:2},450:{f:zo},512:{f:QL},513:{f:UPe},515:{f:mPe},516:{f:Z6e},517:{f:tI},519:{f:WPe},520:{f:B6e},523:{},545:{f:aI},549:{f:ZL},566:{},574:{f:H6e},638:{f:sPe},659:{},1048:{},1054:{f:ePe},1084:{},1212:{f:yPe},2048:{f:TPe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:dg},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:zo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:FPe,r:12},2173:{f:ORe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:In,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:gPe,r:12},2197:{},2198:{f:SRe,r:12},2199:{},2200:{},2201:{},2202:{f:vPe,r:12},2203:{f:zo},2204:{},2205:{},2206:{},2207:{},2211:{f:U6e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:qn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:MPe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:LPe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:QL},1:{},2:{f:JPe},3:{f:qPe},4:{f:HPe},5:{f:tI},7:{f:XPe},8:{},9:{f:dg},11:{},22:{f:qn},30:{f:rPe},31:{},32:{},33:{f:aI},36:{},37:{f:ZL},50:{f:YPe},62:{},52:{},67:{},68:{f:qn},69:{},86:{},126:{},127:{f:VPe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ZPe},223:{},234:{},354:{},421:{},518:{f:V_},521:{f:dg},536:{f:sI},547:{f:nI},561:{},579:{},1030:{f:V_},1033:{f:dg},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ct(e,t,r,s){var a=t;if(!isNaN(a)){var i=s||(r||[]).length||0,l=e.next(4);l.write_shift(2,a),l.write_shift(2,i),i>0&&P4(r)&&e.push(r)}}function K$e(e,t,r,s){var a=(r||[]).length||0;if(a<=8224)return Ct(e,t,r,a);var i=t;if(!isNaN(i)){for(var l=r.parts||[],o=0,c=0,d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<a;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function cx(e,t,r){return e||(e=it(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function X$e(e,t,r,s){var a=it(9);return cx(a,e,t),Yz(r,s||"b",a),a}function Y$e(e,t,r){var s=it(8+2*r.length);return cx(s,e,t),s.write_shift(1,r.length),s.write_shift(r.length,r,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function Z$e(e,t,r,s){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?as(mn(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Ct(e,2,KPe(r,s,a)):Ct(e,3,GPe(r,s,a));return;case"b":case"e":Ct(e,5,X$e(r,s,t.v,t.t));return;case"s":case"str":Ct(e,4,Y$e(r,s,(t.v||"").slice(0,255)));return}Ct(e,1,cx(null,r,s))}function Q$e(e,t,r,s){var a=Array.isArray(t),i=vr(t["!ref"]||"A1"),l,o="",c=[];if(i.e.c>255||i.e.r>16383){if(s.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=ur(i)}for(var d=i.s.r;d<=i.e.r;++d){o=Pn(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=un(u)),l=c[u]+o;var m=a?(t[d]||[])[u]:t[l];m&&Z$e(e,m,d,u)}}}function e8e(e,t){for(var r=t||{},s=La(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ct(s,r.biff==4?1033:r.biff==3?521:9,U4(e,16,r)),Q$e(s,e.Sheets[e.SheetNames[a]],a,r),Ct(s,10),s.end()}function t8e(e,t,r){Ct(e,49,K6e({sz:12,name:"Arial"},r))}function r8e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)t[a]!=null&&Ct(e,1054,tPe(a,t[a],r))})}function n8e(e,t){var r=it(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ct(e,2151,r),r=it(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),rW(vr(t["!ref"]||"A1"),r),r.write_shift(4,4),Ct(e,2152,r)}function s8e(e,t){for(var r=0;r<16;++r)Ct(e,224,eI({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(s){Ct(e,224,eI(s,0,t))})}function a8e(e,t){for(var r=0;r<t["!links"].length;++r){var s=t["!links"][r];Ct(e,440,EPe(s)),s[1].Tooltip&&Ct(e,2048,PPe(s))}delete t["!links"]}function i8e(e,t){if(t){var r=0;t.forEach(function(s,a){++r<=256&&s&&Ct(e,125,DPe(tj(a,s),a))})}}function l8e(e,t,r,s,a){var i=16+Uc(a.cellXfs,t,a);if(t.v==null&&!t.bf){Ct(e,513,Zd(r,s,i));return}if(t.bf)Ct(e,6,LIe(t,r,s,a,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?as(mn(t.v)):t.v;Ct(e,515,fPe(r,s,l,i));break;case"b":case"e":Ct(e,517,uPe(r,s,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=K4(a.Strings,t.v,a.revStrings);Ct(e,253,Y6e(r,s,o,i))}else Ct(e,516,Q6e(r,s,(t.v||"").slice(0,255),i,a));break;default:Ct(e,513,Zd(r,s,i))}}function o8e(e,t,r){var s=La(),a=r.SheetNames[e],i=r.Sheets[a]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,m="",f=[],y=vr(i["!ref"]||"A1"),x=d?65536:16384;if(y.e.c>255||y.e.r>=x){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");y.e.c=Math.min(y.e.c,255),y.e.r=Math.min(y.e.c,x-1)}Ct(s,2057,U4(r,16,t)),Ct(s,13,vi(1)),Ct(s,12,vi(100)),Ct(s,15,la(!0)),Ct(s,17,la(!1)),Ct(s,16,Xd(.001)),Ct(s,95,la(!0)),Ct(s,42,la(!1)),Ct(s,43,la(!1)),Ct(s,130,vi(1)),Ct(s,128,dPe()),Ct(s,131,la(!1)),Ct(s,132,la(!1)),d&&i8e(s,i["!cols"]),Ct(s,512,nPe(y,t)),d&&(i["!links"]=[]);for(var p=y.s.r;p<=y.e.r;++p){m=Pn(p);for(var h=y.s.c;h<=y.e.c;++h){p===y.s.r&&(f[h]=un(h)),u=f[h]+m;var v=c?(i[p]||[])[h]:i[u];v&&(l8e(s,v,p,h,t),d&&v.l&&i["!links"].push([u,v.l]))}}var b=o.CodeName||o.name||a;return d&&Ct(s,574,q6e((l.Views||[])[0])),d&&(i["!merges"]||[]).length&&Ct(s,229,wPe(i["!merges"])),d&&a8e(s,i),Ct(s,442,Zz(b)),d&&n8e(s,i),Ct(s,10),s.end()}function c8e(e,t,r){var s=La(),a=(e||{}).Workbook||{},i=a.Sheets||[],l=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Ct(s,2057,U4(e,5,r)),r.bookType=="xla"&&Ct(s,135),Ct(s,225,o?vi(1200):null),Ct(s,193,u6e(2)),c&&Ct(s,191),c&&Ct(s,192),Ct(s,226),Ct(s,92,R6e("SheetJS",r)),Ct(s,66,vi(o?1200:1252)),o&&Ct(s,353,vi(0)),o&&Ct(s,448),Ct(s,317,BPe(e.SheetNames.length)),o&&e.vbaraw&&Ct(s,211),o&&e.vbaraw){var d=l.CodeName||"ThisWorkbook";Ct(s,442,Zz(d))}Ct(s,156,vi(17)),Ct(s,25,la(!1)),Ct(s,18,la(!1)),Ct(s,19,vi(0)),o&&Ct(s,431,la(!1)),o&&Ct(s,444,vi(0)),Ct(s,61,V6e()),Ct(s,64,la(!1)),Ct(s,141,vi(0)),Ct(s,34,la(zDe(e)=="true")),Ct(s,14,la(!0)),o&&Ct(s,439,la(!1)),Ct(s,218,vi(0)),t8e(s,e,r),r8e(s,e.SSF,r),s8e(s,r),o&&Ct(s,352,la(!1));var u=s.end(),m=La();o&&Ct(m,140,RPe()),o&&r.Strings&&K$e(m,252,$6e(r.Strings)),Ct(m,10);var f=m.end(),y=La(),x=0,p=0;for(p=0;p<e.SheetNames.length;++p)x+=(o?12:11)+(o?2:1)*e.SheetNames[p].length;var h=u.length+x+f.length;for(p=0;p<e.SheetNames.length;++p){var v=i[p]||{};Ct(y,133,F6e({pos:h,hs:v.Hidden||0,dt:0,name:e.SheetNames[p]},r)),h+=t[p].length}var b=y.end();if(x!=b.length)throw new Error("BS8 "+x+" != "+b.length);var j=[];return u.length&&j.push(u),b.length&&j.push(b),f.length&&j.push(f),xs(j)}function d8e(e,t){var r=t||{},s=[];e&&!e.SSF&&(e.SSF=Jr(Jt)),e&&e.SSF&&(Mf(),rx(e.SSF),r.revssf=K1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,tA(r),r.cellXfs=[],Uc(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)s[s.length]=o8e(a,r,e);return s.unshift(c8e(e,s,r)),xs(s)}function HW(e,t){for(var r=0;r<=e.SheetNames.length;++r){var s=e.Sheets[e.SheetNames[r]];if(!(!s||!s["!ref"])){var a=pa(s["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return d8e(e,t);case 4:case 3:case 2:return e8e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function pI(e,t){var r=t||{},s=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=a.index,o=i&&i.index||e.length,c=KTe(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,m=0,f=0,y={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(l=0;l<c.length;++l){var p=c[l].trim(),h=p.slice(0,3).toLowerCase();if(h=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(h!="<td"&&h!="<th")){var v=p.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var b=v[o].trim();if(b.match(/<t[dh]/i)){for(var j=b,_=0;j.charAt(0)=="<"&&(_=j.indexOf(">"))>-1;)j=j.slice(_+1);for(var N=0;N<x.length;++N){var w=x[N];w.s.c==u&&w.s.r<d&&d<=w.e.r&&(u=w.e.c+1,N=-1)}var k=sr(b.slice(0,b.indexOf(">")));f=k.colspan?+k.colspan:1,((m=+k.rowspan)>1||f>1)&&x.push({s:{r:d,c:u},e:{r:d+(m||1)-1,c:u+f-1}});var S=k.t||k["data-t"]||"";if(!j.length){u+=f;continue}if(j=vz(j),y.s.r>d&&(y.s.r=d),y.e.r<d&&(y.e.r=d),y.s.c>u&&(y.s.c=u),y.e.c<u&&(y.e.c=u),!j.length){u+=f;continue}var E={t:"s",v:j};r.raw||!j.trim().length||S=="s"||(j==="TRUE"?E={t:"b",v:!0}:j==="FALSE"?E={t:"b",v:!1}:isNaN(al(j))?isNaN(hf(j).getDate())||(E={t:"d",v:mn(j)},r.cellDates||(E={t:"n",v:as(E.v)}),E.z=r.dateNF||Jt[14]):E={t:"n",v:al(j)}),r.dense?(s[d]||(s[d]=[]),s[d][u]=E):s[nr({r:d,c:u})]=E,u+=f}}}}return s["!ref"]=ur(y),x.length&&(s["!merges"]=x),s}function qW(e,t,r,s){for(var a=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>l)&&!(a[d].e.r<r||a[d].e.c<l)){if(a[d].s.r<r||a[d].s.c<l){o=-1;break}o=a[d].e.r-a[d].s.r+1,c=a[d].e.c-a[d].s.c+1;break}if(!(o<0)){var u=nr({r,c:l}),m=s.dense?(e[r]||[])[l]:e[u],f=m&&m.v!=null&&(m.h||N4(m.w||(Bl(m),m.w)||""))||"",y={};o>1&&(y.rowspan=o),c>1&&(y.colspan=c),s.editable?f='<span contenteditable="true">'+f+"</span>":m&&(y["data-t"]=m&&m.t||"z",m.v!=null&&(y["data-v"]=m.v),m.z!=null&&(y["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+m.l.Target+'">'+f+"</a>")),y.id=(s.id||"sjs")+"-"+u,i.push(St("td",f,y))}}var x="<tr>";return x+i.join("")+"</tr>"}var GW='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',JW="</body></html>";function u8e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Bc(pI(r[0],t),t);var s=iA();return r.forEach(function(a,i){lA(s,pI(a,t),"Sheet"+(i+1))}),s}function KW(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function XW(e,t){var r=t||{},s=r.header!=null?r.header:GW,a=r.footer!=null?r.footer:JW,i=[s],l=pa(e["!ref"]);r.dense=Array.isArray(e),i.push(KW(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(qW(e,l,o,r));return i.push("</table>"+a),i.join("")}function YW(e,t,r){var s=r||{},a=0,i=0;if(s.origin!=null)if(typeof s.origin=="number")a=s.origin;else{var l=typeof s.origin=="string"?_n(s.origin):s.origin;a=l.r,i=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var u=pa(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),a==-1&&(d.e.r=a=u.e.r+1)}var m=[],f=0,y=e["!rows"]||(e["!rows"]=[]),x=0,p=0,h=0,v=0,b=0,j=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&p<c;++x){var _=o[x];if(xI(_)){if(s.display)continue;y[p]={hidden:!0}}var N=_.children;for(h=v=0;h<N.length;++h){var w=N[h];if(!(s.display&&xI(w))){var k=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):vz(w.innerHTML),S=w.getAttribute("data-z")||w.getAttribute("z");for(f=0;f<m.length;++f){var E=m[f];E.s.c==v+i&&E.s.r<p+a&&p+a<=E.e.r&&(v=E.e.c+1-i,f=-1)}j=+w.getAttribute("colspan")||1,((b=+w.getAttribute("rowspan")||1)>1||j>1)&&m.push({s:{r:p+a,c:v+i},e:{r:p+a+(b||1)-1,c:v+i+(j||1)-1}});var T={t:"s",v:k},A=w.getAttribute("data-t")||w.getAttribute("t")||"";k!=null&&(k.length==0?T.t=A||"z":s.raw||k.trim().length==0||A=="s"||(k==="TRUE"?T={t:"b",v:!0}:k==="FALSE"?T={t:"b",v:!1}:isNaN(al(k))?isNaN(hf(k).getDate())||(T={t:"d",v:mn(k)},s.cellDates||(T={t:"n",v:as(T.v)}),T.z=s.dateNF||Jt[14]):T={t:"n",v:al(k)})),T.z===void 0&&S!=null&&(T.z=S);var C="",P=w.getElementsByTagName("A");if(P&&P.length)for(var O=0;O<P.length&&!(P[O].hasAttribute("href")&&(C=P[O].getAttribute("href"),C.charAt(0)!="#"));++O);C&&C.charAt(0)!="#"&&(T.l={Target:C}),s.dense?(e[p+a]||(e[p+a]=[]),e[p+a][v+i]=T):e[nr({c:v+i,r:p+a})]=T,d.e.c<v+i&&(d.e.c=v+i),v+=j}}++p}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),d.e.r=Math.max(d.e.r,p-1+a),e["!ref"]=ur(d),p>=c&&(e["!fullref"]=ur((d.e.r=o.length-x+p-1+a,d))),e}function ZW(e,t){var r=t||{},s=r.dense?[]:{};return YW(s,e,t)}function m8e(e,t){return Bc(ZW(e,t),t)}function xI(e){var t="",r=f8e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function f8e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function h8e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(s,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kr(t.replace(/<[^>]*>/g,""));return[r]}var gI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function QW(e,t){var r=t||{},s=k4(e),a=[],i,l,o={name:""},c="",d=0,u,m,f={},y=[],x=r.dense?[]:{},p,h,v={value:""},b="",j=0,_=[],N=-1,w=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},T=[],A={},C=0,P=0,O=[],R=1,F=1,Q=[],W={Names:[]},L={},I=["",""],K=[],D={},Y="",re=0,B=!1,G=!1,ce=0;for(gp.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=gp.exec(s);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(k.e.c>=k.s.c&&k.e.r>=k.s.r?x["!ref"]=ur(k):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(x["!fullref"]=x["!ref"],k.e.r=r.sheetRows-1,x["!ref"]=ur(k)),T.length&&(x["!merges"]=T),O.length&&(x["!rows"]=O),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),y.push(u.name),f[u.name]=x,G=!1):p[0].charAt(p[0].length-2)!=="/"&&(u=sr(p[0],!1),N=w=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,x=r.dense?[]:{},T=[],O=[],G=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){N+=R,R=1;break}if(m=sr(p[0],!1),m.?N=m.-1:N==-1&&(N=0),R=+m["number-rows-repeated"]||1,R<10)for(ce=0;ce<R;++ce)S>0&&(O[N+ce]={level:S});w=-1;break;case"covered-table-cell":p[1]!=="/"&&++w,r.sheetStubs&&(r.dense?(x[N]||(x[N]=[]),x[N][w]={t:"z"}):x[nr({r:N,c:w})]={t:"z"}),b="",_=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++w,v=sr(p[0],!1),F=parseInt(v["number-columns-repeated"]||"1",10),h={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(h.f=mI(kr(v.formula))),(v.||v["value-type"])=="string"&&(h.t="s",h.v=kr(v["string-value"]||""),r.dense?(x[N]||(x[N]=[]),x[N][w]=h):x[nr({r:N,c:w})]=h),w+=F-1;else if(p[1]!=="/"){++w,b="",j=0,_=[],F=1;var ae=R?N+R-1:N;if(w>k.e.c&&(k.e.c=w),w<k.s.c&&(k.s.c=w),N<k.s.r&&(k.s.r=N),ae>k.e.r&&(k.e.r=ae),v=sr(p[0],!1),K=[],D={},h={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=kr(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(C=parseInt(v["number-matrix-rows-spanned"],10)||0,P=parseInt(v["number-matrix-columns-spanned"],10)||0,A={s:{r:N,c:w},e:{r:N+C-1,c:w+P-1}},h.F=ur(A),Q.push([A,h.F])),v.formula)h.f=mI(v.formula);else for(ce=0;ce<Q.length;++ce)N>=Q[ce][0].s.r&&N<=Q[ce][0].e.r&&w>=Q[ce][0].s.c&&w<=Q[ce][0].e.c&&(h.F=Q[ce][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(C=parseInt(v["number-rows-spanned"],10)||0,P=parseInt(v["number-columns-spanned"],10)||0,A={s:{r:N,c:w},e:{r:N+C-1,c:w+P-1}},T.push(A)),v["number-columns-repeated"]&&(F=parseInt(v["number-columns-repeated"],10)),h.t){case"boolean":h.t="b",h.v=on(v["boolean-value"]);break;case"float":h.t="n",h.v=parseFloat(v.value);break;case"percentage":h.t="n",h.v=parseFloat(v.value);break;case"currency":h.t="n",h.v=parseFloat(v.value);break;case"date":h.t="d",h.v=mn(v["date-value"]),r.cellDates||(h.t="n",h.v=as(h.v)),h.z="m/d/yy";break;case"time":h.t="n",h.v=qTe(v["time-value"])/86400,r.cellDates&&(h.t="d",h.v=X1(h.v)),h.z="HH:MM:SS";break;case"number":h.t="n",h.v=parseFloat(v.);break;default:if(h.t==="string"||h.t==="text"||!h.t)h.t="s",v["string-value"]!=null&&(b=kr(v["string-value"]),_=[]);else throw new Error("Unsupported value type "+h.t)}}else{if(B=!1,h.t==="s"&&(h.v=b||"",_.length&&(h.R=_),B=j==0),L.Target&&(h.l=L),K.length>0&&(h.c=K,K=[]),b&&r.cellText!==!1&&(h.w=b),B&&(h.t="z",delete h.v),(!B||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var fe=0;fe<R;++fe){if(F=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(x[N+fe]||(x[N+fe]=[]),x[N+fe][w]=fe==0?h:Jr(h);--F>0;)x[N+fe][w+F]=Jr(h);else for(x[nr({r:N+fe,c:w})]=h;--F>0;)x[nr({r:N+fe,c:w+F})]=Jr(h);k.e.c<=w&&(k.e.c=w)}F=parseInt(v["number-columns-repeated"]||"1",10),w+=F-1,F=0,h={},b="",_=[]}L={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((i=a.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((i=a.pop())[0]!==p[3])throw"Bad state: "+i;D.t=b,_.length&&(D.R=_),D.a=Y,K.push(D)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);Y="",re=0,b="",j=0,_=[];break;case"creator":p[1]==="/"?Y=s.slice(re,p.index):re=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((i=a.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);b="",j=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[o.name]=c,(i=a.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&(c="",o=sr(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":l=sr(p[0],!1),c+=gI[p[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":l=sr(p[0],!1),c+=gI[p[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=s.slice(d,p.index);break}else d=p.index+p[0].length;break;case"named-range":l=sr(p[0],!1),I=H_(l["cell-range-address"]);var ne={Name:l.name,Ref:I[0]+"!"+I[1]};G&&(ne.Sheet=y.length),W.Names.push(ne);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var he=h8e(s.slice(j,p.index));b=(b.length>0?b+`
`:"")+he[0]}else sr(p[0],!1),j=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{I=H_(sr(p[0])["target-range-address"]),f[I[0]]["!autofilter"]={ref:I[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(L=sr(p[0],!1),!L.href)break;L.Target=kr(L.href),delete L.href,L.Target.charAt(0)=="#"&&L.Target.indexOf(".")>-1?(I=H_(L.Target.slice(1)),L.Target="#"+I[0]+"!"+I[1]):L.Target.match(/^\.\.[\\\/]/)&&(L.Target=L.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var M={Sheets:f,SheetNames:y,Workbook:W};return r.bookSheets&&delete M.Sheets,M}function yI(e,t){t=t||{},yi(e,"META-INF/manifest.xml")&&q5e(Hn(e,"META-INF/manifest.xml"),t);var r=Ga(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var s=QW(Wr(r),t);return yi(e,"meta.xml")&&(s.Props=Mz(Hn(e,"meta.xml"))),s}function vI(e,t){return QW(e,t)}var p8e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+xp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Un+t}}(),bI=function(){var e=function(i){return Fr(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,s=function(i,l,o){var c=[];c.push('      <table:table table:name="'+Fr(l.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,u=0,m=pa(i["!ref"]||"A1"),f=i["!merges"]||[],y=0,x=Array.isArray(i);if(i["!cols"])for(u=0;u<=m.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var p="",h=i["!rows"]||[];for(d=0;d<m.s.r;++d)p=h[d]?' table:style-name="ro'+h[d].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;d<=m.e.r;++d){for(p=h[d]?' table:style-name="ro'+h[d].ods+'"':"",c.push("        <table:table-row"+p+`>
`),u=0;u<m.s.c;++u)c.push(t);for(;u<=m.e.c;++u){var v=!1,b={},j="";for(y=0;y!=f.length;++y)if(!(f[y].s.c>u)&&!(f[y].s.r>d)&&!(f[y].e.c<u)&&!(f[y].e.r<d)){(f[y].s.c!=u||f[y].s.r!=d)&&(v=!0),b["table:number-columns-spanned"]=f[y].e.c-f[y].s.c+1,b["table:number-rows-spanned"]=f[y].e.r-f[y].s.r+1;break}if(v){c.push(r);continue}var _=nr({r:d,c:u}),N=x?(i[d]||[])[u]:i[_];if(N&&N.f&&(b["table:formula"]=Fr(BIe(N.f)),N.F&&N.F.slice(0,_.length)==_)){var w=pa(N.F);b["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,b["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(!N){c.push(t);continue}switch(N.t){case"b":j=N.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=N.v?"true":"false";break;case"n":j=N.w||String(N.v||0),b["office:value-type"]="float",b["office:value"]=N.v||0;break;case"s":case"str":j=N.v==null?"":N.v,b["office:value-type"]="string";break;case"d":j=N.w||mn(N.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=mn(N.v).toISOString(),b["table:style-name"]="ce1";break;default:c.push(t);continue}var k=e(j);if(N.l&&N.l.Target){var S=N.l.Target;S=S.charAt(0)=="#"?"#"+UIe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),k=St("text:a",k,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+St("table:table-cell",St("text:p",k,{}),b)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var m=d["!cols"][u];if(m.width==null&&m.wpx==null&&m.wch==null)continue;Sc(m),m.ods=o;var f=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var m=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var c=[Un],d=xp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=xp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push($z().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),a(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=l.SheetNames.length;++m)c.push(s(l.Sheets[l.SheetNames[m]],l,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function eV(e,t){if(t.bookType=="fods")return bI(e,t);var r=j4(),s="",a=[],i=[];return s="mimetype",mr(r,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",mr(r,s,bI(e,t)),a.push([s,"text/xml"]),i.push([s,"ContentFile"]),s="styles.xml",mr(r,s,p8e(e,t)),a.push([s,"text/xml"]),i.push([s,"StylesFile"]),s="meta.xml",mr(r,s,Un+$z()),a.push([s,"text/xml"]),i.push([s,"MetadataFile"]),s="manifest.rdf",mr(r,s,K5e(i)),a.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",mr(r,s,G5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Qd(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Pk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Wr(Mc(e))}function x8e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):qa(Cl(e))}function g8e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var s=0;s<t.length;++s)if(e[r+s]!=t[s])continue e;return!0}return!1}function Ac(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(a){r.set(a,s),s+=a.length}),r}function jI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function y8e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,s=e[t+14]&1,a=t+13;a>=t;--a)s=s*256+e[a];return(e[t+15]&128?-s:s)*Math.pow(10,r-6176)}function v8e(e,t,r){var s=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,s-6176);e[t+15]|=s>>7,e[t+14]|=(s&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Np(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function Lr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function On(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Cr(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],a=Np(e,r),i=a&7;a=Math.floor(a/8);var l=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=Np(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var d={data:o,type:i};t[a]==null?t[a]=[d]:t[a].push(d)}return t}function ws(e){var t=[];return e.forEach(function(r,s){r.forEach(function(a){a.data&&(t.push(Lr(s*8+a.type)),a.type==2&&t.push(Lr(a.data.length)),t.push(a.data))})}),Ac(t)}function Q4(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function pi(e){for(var t,r=[],s=[0];s[0]<e.length;){var a=Np(e,s),i=Cr(e.slice(s[0],s[0]+a));s[0]+=a;var l={id:On(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=Cr(o.data),d=On(c[3][0].data);l.messages.push({meta:c,data:e.slice(s[0],s[0]+d)}),s[0]+=d}),(t=i[3])!=null&&t[0]&&(l.merge=On(i[3][0].data)>>>0>0),r.push(l)}return r}function Tu(e){var t=[];return e.forEach(function(r){var s=[];s[1]=[{data:Lr(r.id),type:0}],s[2]=[],r.merge!=null&&(s[3]=[{data:Lr(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(l){a.push(l.data),l.meta[3]=[{type:0,data:Lr(l.data.length)}],s[2].push({data:ws(l.meta),type:2})});var i=ws(s);t.push(Lr(i.length)),t.push(i),a.forEach(function(l){return t.push(l)})}),Ac(t)}function b8e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=Np(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}a.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Ac(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(a.push(a[0].slice(-c)),d-=c;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-c,-c+d))}}var u=Ac(a);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function xi(e){for(var t=[],r=0;r<e.length;){var s=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(b8e(s,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ac(t)}function Pu(e){for(var t=[],r=0;r<e.length;){var s=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Lr(s),l=i.length;t.push(i),s<=60?(l++,t.push(new Uint8Array([s-1<<2]))):s<=256?(l+=2,t.push(new Uint8Array([240,s-1&255]))):s<=65536?(l+=3,t.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(l+=4,t.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(l+=5,t.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),t.push(e.slice(r,r+s)),l+=s,a[0]=0,a[1]=l&255,a[2]=l>>8&255,a[3]=l>>16&255,r+=s}return Ac(t)}function j8e(e,t,r,s){var a=Qd(e),i=a.getUint32(4,!0),l=(s>1?12:8)+jI(i&(s>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=a.getUint32(l,!0),l+=4),l+=jI(i&(s>1?12288:4096))*4,i&16&&(c=a.getUint32(l,!0),l+=4),i&32&&(d=a.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+a.getFloat64(l,!0)*1e3),l+=8);var m;switch(e[2]){case 0:break;case 2:m={t:"n",v:d};break;case 3:m={t:"s",v:t[c]};break;case 5:m={t:"d",v:u};break;case 6:m={t:"b",v:d>0};break;case 7:m={t:"n",v:d/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else if(c>-1)m={t:"s",v:t[c]};else if(!isNaN(d))m={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return m}function _8e(e,t,r){var s=Qd(e),a=s.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);a&1&&(c=y8e(e,i),i+=16),a&2&&(d=s.getFloat64(i,!0),i+=8),a&4&&(u.setTime(u.getTime()+s.getFloat64(i,!0)*1e3),i+=8),a&8&&(o=s.getUint32(i,!0),i+=4),a&16&&(l=s.getUint32(i,!0),i+=4);var m;switch(e[1]){case 0:break;case 2:m={t:"n",v:c};break;case 3:m={t:"s",v:t[o]};break;case 5:m={t:"d",v:u};break;case 6:m={t:"b",v:d>0};break;case 7:m={t:"n",v:d/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:m={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return m}function G_(e,t){var r=new Uint8Array(32),s=Qd(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,v8e(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,s.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,s.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(8,i,!0),r.slice(0,a)}function J_(e,t){var r=new Uint8Array(32),s=Qd(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,s.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,s.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,s.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(4,i,!0),r.slice(0,a)}function w8e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return j8e(e,t,r,e[0]);case 5:return _8e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function zs(e){var t=Cr(e);return Np(t[1][0].data)}function _I(e,t){var r=Cr(t.data),s=On(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(l){var o=Cr(l.data),c=On(o[1][0].data)>>>0;switch(s){case 1:i[c]=Pk(o[3][0].data);break;case 8:{var d=e[zs(o[9][0].data)][0],u=Cr(d.data),m=e[zs(u[1][0].data)][0],f=On(m.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var y=Cr(m.data);i[c]=y[3].map(function(x){return Pk(x.data)}).join("")}break}}),i}function N8e(e,t){var r,s,a,i,l,o,c,d,u,m,f,y,x,p,h=Cr(e),v=On(h[1][0].data)>>>0,b=On(h[2][0].data)>>>0,j=((s=(r=h[8])==null?void 0:r[0])==null?void 0:s.data)&&On(h[8][0].data)>0||!1,_,N;if((i=(a=h[7])==null?void 0:a[0])!=null&&i.data&&t!=0)_=(o=(l=h[7])==null?void 0:l[0])==null?void 0:o.data,N=(d=(c=h[6])==null?void 0:c[0])==null?void 0:d.data;else if((m=(u=h[4])==null?void 0:u[0])!=null&&m.data&&t!=1)_=(y=(f=h[4])==null?void 0:f[0])==null?void 0:y.data,N=(p=(x=h[3])==null?void 0:x[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var w=j?4:1,k=Qd(_),S=[],E=0;E<_.length/2;++E){var T=k.getUint16(E*2,!0);T<65535&&S.push([E,T])}if(S.length!=b)throw"Expected ".concat(b," cells, found ").concat(S.length);var A=[];for(E=0;E<S.length-1;++E)A[S[E][0]]=N.subarray(S[E][1]*w,S[E+1][1]*w);return S.length>=1&&(A[S[S.length-1][0]]=N.subarray(S[S.length-1][1]*w)),{R:v,cells:A}}function k8e(e,t){var r,s=Cr(t.data),a=(r=s==null?void 0:s[7])!=null&&r[0]?On(s[7][0].data)>>>0>0?1:0:-1,i=Q4(s[5],function(l){return N8e(l,a)});return{nrows:On(s[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function S8e(e,t,r){var s,a=Cr(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(On(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(On(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=ur(i);var l=Cr(a[4][0].data),o=_I(e,e[zs(l[4][0].data)][0]),c=(s=l[17])!=null&&s[0]?_I(e,e[zs(l[17][0].data)][0]):[],d=Cr(l[3][0].data),u=0;d[1].forEach(function(m){var f=Cr(m.data),y=e[zs(f[2][0].data)][0],x=On(y.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var p=k8e(e,y);p.data.forEach(function(h,v){h.forEach(function(b,j){var _=nr({r:u+v,c:j}),N=w8e(b,o,c);N&&(r[_]=N)})}),u+=p.nrows})}function C8e(e,t){var r=Cr(t.data),s={"!ref":"A1"},a=e[zs(r[2][0].data)],i=On(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return S8e(e,a[0],s),s}function A8e(e,t){var r,s=Cr(t.data),a={name:(r=s[1])!=null&&r[0]?Pk(s[1][0].data):"",sheets:[]},i=Q4(s[2],zs);return i.forEach(function(l){e[l].forEach(function(o){var c=On(o.meta[1][0].data);c==6e3&&a.sheets.push(C8e(e,o))})}),a}function E8e(e,t){var r=iA(),s=Cr(t.data),a=Q4(s[1],zs);if(a.forEach(function(i){e[i].forEach(function(l){var o=On(l.meta[1][0].data);if(o==2){var c=A8e(e,l);c.sheets.forEach(function(d,u){lA(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function K_(e){var t,r,s,a,i={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=xi(c.content)}catch(m){return console.log("?? "+c.content.length+" "+(m.message||m))}var u;try{u=pi(d)}catch(m){return console.log("## "+(m.message||m))}u.forEach(function(m){i[m.id]=m.messages,l.push(m.id)})}}),!l.length)throw new Error("File has no messages");var o=((a=(s=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:s[1])==null?void 0:a[0].data)&&On(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=On(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return E8e(i,o)}function T8e(e,t,r){var s,a,i,l;if(!((s=e[6])!=null&&s[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&On(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,d=Qd(e[7][0].data),u=0,m=[],f=Qd(e[4][0].data),y=0,x=[],p=0;p<t.length;++p){if(t[p]==null){d.setUint16(p*2,65535,!0),f.setUint16(p*2,65535);continue}d.setUint16(p*2,u,!0),f.setUint16(p*2,y,!0);var h,v;switch(typeof t[p]){case"string":h=G_({t:"s",v:t[p]},r),v=J_({t:"s",v:t[p]},r);break;case"number":h=G_({t:"n",v:t[p]},r),v=J_({t:"n",v:t[p]},r);break;case"boolean":h=G_({t:"b",v:t[p]},r),v=J_({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}m.push(h),u+=h.length,x.push(v),y+=v.length,++c}for(e[2][0].data=Lr(c);p<e[7][0].data.length/2;++p)d.setUint16(p*2,65535,!0),f.setUint16(p*2,65535,!0);return e[6][0].data=Ac(m),e[3][0].data=Ac(x),c}function P8e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=pa(r["!ref"]);s.s.r=s.s.c=0;var a=!1;s.e.c>9&&(a=!0,s.e.c=9),s.e.r>49&&(a=!0,s.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(ur(s)));var i=mb(r,{range:s,header:1}),l=["~Sh33tJ5~"];i.forEach(function(Y){return Y.forEach(function(re){typeof re=="string"&&l.push(re)})});var o={},c=[],d=qt.read(t.numbers,{type:"base64"});d.FileIndex.map(function(Y,re){return[Y,d.FullPaths[re]]}).forEach(function(Y){var re=Y[0],B=Y[1];if(re.type==2&&re.name.match(/\.iwa/)){var G=re.content,ce=xi(G),ae=pi(ce);ae.forEach(function(fe){c.push(fe.id),o[fe.id]={deps:[],location:B,type:On(fe.messages[0].meta[1][0].data)}})}}),c.sort(function(Y,re){return Y-re});var u=c.filter(function(Y){return Y>1}).map(function(Y){return[Y,Lr(Y)]});d.FileIndex.map(function(Y,re){return[Y,d.FullPaths[re]]}).forEach(function(Y){var re=Y[0];if(Y[1],!!re.name.match(/\.iwa/)){var B=pi(xi(re.content));B.forEach(function(G){G.messages.forEach(function(ce){u.forEach(function(ae){G.messages.some(function(fe){return On(fe.meta[1][0].data)!=11006&&g8e(fe.data,ae[1])})&&o[ae[0]].deps.push(G.id)})})})}});for(var m=qt.find(d,o[1].location),f=pi(xi(m.content)),y,x=0;x<f.length;++x){var p=f[x];p.id==1&&(y=p)}var h=zs(Cr(y.messages[0].data)[1][0].data);for(m=qt.find(d,o[h].location),f=pi(xi(m.content)),x=0;x<f.length;++x)p=f[x],p.id==h&&(y=p);for(h=zs(Cr(y.messages[0].data)[2][0].data),m=qt.find(d,o[h].location),f=pi(xi(m.content)),x=0;x<f.length;++x)p=f[x],p.id==h&&(y=p);for(h=zs(Cr(y.messages[0].data)[2][0].data),m=qt.find(d,o[h].location),f=pi(xi(m.content)),x=0;x<f.length;++x)p=f[x],p.id==h&&(y=p);var v=Cr(y.messages[0].data);{v[6][0].data=Lr(s.e.r+1),v[7][0].data=Lr(s.e.c+1);var b=zs(v[46][0].data),j=qt.find(d,o[b].location),_=pi(xi(j.content));{for(var N=0;N<_.length&&_[N].id!=b;++N);if(_[N].id!=b)throw"Bad ColumnRowUIDMapArchive";var w=Cr(_[N].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var k=0;k<=s.e.c;++k){var S=[];S[1]=S[2]=[{type:0,data:Lr(k+420690)}],w[1].push({type:2,data:ws(S)}),w[2].push({type:0,data:Lr(k)}),w[3].push({type:0,data:Lr(k)})}w[4]=[],w[5]=[],w[6]=[];for(var E=0;E<=s.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:Lr(E+726270)}],w[4].push({type:2,data:ws(S)}),w[5].push({type:0,data:Lr(E)}),w[6].push({type:0,data:Lr(E)});_[N].messages[0].data=ws(w)}j.content=Pu(Tu(_)),j.size=j.content.length,delete v[46];var T=Cr(v[4][0].data);{T[7][0].data=Lr(s.e.r+1);var A=Cr(T[1][0].data),C=zs(A[2][0].data);j=qt.find(d,o[C].location),_=pi(xi(j.content));{if(_[0].id!=C)throw"Bad HeaderStorageBucket";var P=Cr(_[0].messages[0].data);for(E=0;E<i.length;++E){var O=Cr(P[2][0].data);O[1][0].data=Lr(E),O[4][0].data=Lr(i[E].length),P[2][E]={type:P[2][0].type,data:ws(O)}}_[0].messages[0].data=ws(P)}j.content=Pu(Tu(_)),j.size=j.content.length;var R=zs(T[2][0].data);j=qt.find(d,o[R].location),_=pi(xi(j.content));{if(_[0].id!=R)throw"Bad HeaderStorageBucket";for(P=Cr(_[0].messages[0].data),k=0;k<=s.e.c;++k)O=Cr(P[2][0].data),O[1][0].data=Lr(k),O[4][0].data=Lr(s.e.r+1),P[2][k]={type:P[2][0].type,data:ws(O)};_[0].messages[0].data=ws(P)}j.content=Pu(Tu(_)),j.size=j.content.length;var F=zs(T[4][0].data);(function(){for(var Y=qt.find(d,o[F].location),re=pi(xi(Y.content)),B,G=0;G<re.length;++G){var ce=re[G];ce.id==F&&(B=ce)}var ae=Cr(B.messages[0].data);{ae[3]=[];var fe=[];l.forEach(function(M,Se){fe[1]=[{type:0,data:Lr(Se)}],fe[2]=[{type:0,data:Lr(1)}],fe[3]=[{type:2,data:x8e(M)}],ae[3].push({type:2,data:ws(fe)})})}B.messages[0].data=ws(ae);var ne=Tu(re),he=Pu(ne);Y.content=he,Y.size=Y.content.length})();var Q=Cr(T[3][0].data);{var W=Q[1][0];delete Q[2];var L=Cr(W.data);{var I=zs(L[2][0].data);(function(){for(var Y=qt.find(d,o[I].location),re=pi(xi(Y.content)),B,G=0;G<re.length;++G){var ce=re[G];ce.id==I&&(B=ce)}var ae=Cr(B.messages[0].data);{delete ae[6],delete Q[7];var fe=new Uint8Array(ae[5][0].data);ae[5]=[];for(var ne=0,he=0;he<=s.e.r;++he){var M=Cr(fe);ne+=T8e(M,i[he],l),M[1][0].data=Lr(he),ae[5].push({data:ws(M),type:2})}ae[1]=[{type:0,data:Lr(s.e.c+1)}],ae[2]=[{type:0,data:Lr(s.e.r+1)}],ae[3]=[{type:0,data:Lr(ne)}],ae[4]=[{type:0,data:Lr(s.e.r+1)}]}B.messages[0].data=ws(ae);var Se=Tu(re),me=Pu(Se);Y.content=me,Y.size=Y.content.length})()}W.data=ws(L)}T[3][0].data=ws(Q)}v[4][0].data=ws(T)}y.messages[0].data=ws(v);var K=Tu(f),D=Pu(K);return m.content=D,m.size=m.content.length,d}function tV(e){return function(r){for(var s=0;s!=e.length;++s){var a=e[s];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function eA(e){tV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function tA(e){tV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function O8e(e){return hr.WS.indexOf(e)>-1?"sheet":e==hr.CS?"chart":e==hr.DS?"dialog":e==hr.MS?"macro":e&&e.length?e:"sheet"}function R8e(e,t){if(!e)return 0;try{e=t.map(function(s){return s.id||(s.id=s.strRelID),[s.name,e["!id"][s.id].Target,O8e(e["!id"][s.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function L8e(e,t,r,s,a,i,l,o,c,d,u,m){try{i[s]=eh(Ga(e,r,!0),t);var f=Hn(e,t),y;switch(o){case"sheet":y=i$e(f,t,a,c,i[s],d,u,m);break;case"chart":if(y=l$e(f,t,a,c,i[s],d,u,m),!y||!y["!drawel"])break;var x=A0(y["!drawel"].Target,t),p=yp(x),h=JRe(Ga(e,x,!0),eh(Ga(e,p,!0),x)),v=A0(h,x),b=yp(v);y=IDe(Ga(e,v,!0),v,c,eh(Ga(e,b,!0),v),d,y);break;case"macro":y=o$e(f,t,a,c,i[s],d,u,m);break;case"dialog":y=c$e(f,t,a,c,i[s],d,u,m);break;default:throw new Error("Unrecognized sheet type "+o)}l[s]=y;var j=[];i&&i[s]&&Rn(i[s]).forEach(function(_){var N="";if(i[s][_].Type==hr.CMNT){N=A0(i[s][_].Target,t);var w=f$e(Hn(e,N,!0),N,c);if(!w||!w.length)return;lI(y,w,!1)}i[s][_].Type==hr.TCMNT&&(N=A0(i[s][_].Target,t),j=j.concat(XRe(Hn(e,N,!0),c)))}),j&&j.length&&lI(y,j,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function mi(e){return e.charAt(0)=="/"?e.slice(1):e}function rV(e,t){if(Mf(),t=t||{},eA(t),yi(e,"META-INF/manifest.xml")||yi(e,"objectdata.xml"))return yI(e,t);if(yi(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof K_<"u"){if(e.FileIndex)return K_(e);var r=qt.utils.cfb_new();return AL(e).forEach(function(O){mr(r,O,YTe(e,O))}),K_(r)}throw new Error("Unsupported NUMBERS file")}if(!yi(e,"[Content_Types].xml"))throw yi(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):yi(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var s=AL(e),a=V5e(Ga(e,"[Content_Types].xml")),i=!1,l,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Hn(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Hn(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(th=[],a.sst)try{th=m$e(Hn(e,mi(a.sst)),a.sst,t)}catch(O){if(t.WTF)throw O}t.cellStyles&&a.themes.length&&(c=u$e(Ga(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(d=d$e(Hn(e,mi(a.style)),a.style,c,t))}a.links.map(function(O){try{var R=eh(Ga(e,yp(mi(O))),O);return p$e(Hn(e,mi(O)),R,O,t)}catch{}});var u=a$e(Hn(e,mi(a.workbooks[0])),a.workbooks[0],t),m={},f="";a.coreprops.length&&(f=Hn(e,mi(a.coreprops[0]),!0),f&&(m=Mz(f)),a.extprops.length!==0&&(f=Hn(e,mi(a.extprops[0]),!0),f&&Y5e(f,m,t)));var y={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(f=Ga(e,mi(a.custprops[0]),!0),f&&(y=Q5e(f,t)));var x={};if((t.bookSheets||t.bookProps)&&(u.Sheets?l=u.Sheets.map(function(R){return R.name}):m.Worksheets&&m.SheetNames.length>0&&(l=m.SheetNames),t.bookProps&&(x.Props=m,x.Custprops=y),t.bookSheets&&typeof l<"u"&&(x.SheetNames=l),t.bookSheets?x.SheetNames:t.bookProps))return x;l={};var p={};t.bookDeps&&a.calcchain&&(p=h$e(Hn(e,mi(a.calcchain)),a.calcchain));var h=0,v={},b,j;{var _=u.Sheets;m.Worksheets=_.length,m.SheetNames=[];for(var N=0;N!=_.length;++N)m.SheetNames[N]=_[N].name}var w=i?"bin":"xml",k=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,k+1)+"_rels/"+a.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");yi(e,S)||(S="xl/_rels/workbook."+w+".rels");var E=eh(Ga(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=x$e(Hn(e,mi(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=ZRe(Hn(e,mi(a.people[0])),t)),E&&(E=R8e(E,u.Sheets));var T=Hn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(h=0;h!=m.Worksheets;++h){var A="sheet";if(E&&E[h]?(b="xl/"+E[h][1].replace(/[\/]?xl\//,""),yi(e,b)||(b=E[h][1]),yi(e,b)||(b=S.replace(/_rels\/.*$/,"")+E[h][1]),A=E[h][2]):(b="xl/worksheets/sheet"+(h+1-T)+"."+w,b=b.replace(/sheet0\./,"sheet.")),j=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(h!=t.sheets)continue e;break;case"string":if(m.SheetNames[h].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,P=0;P!=t.sheets.length;++P)typeof t.sheets[P]=="number"&&t.sheets[P]==h&&(C=1),typeof t.sheets[P]=="string"&&t.sheets[P].toLowerCase()==m.SheetNames[h].toLowerCase()&&(C=1);if(!C)continue e}}L8e(e,b,j,m.SheetNames[h],h,v,l,A,t,u,c,d)}return x={Directory:a,Workbook:u,Props:m,Custprops:y,Deps:p,Sheets:l,SheetNames:m.SheetNames,Strings:th,Styles:d,Themes:c,SSF:Jr(Jt)},t&&t.bookFiles&&(e.files?(x.keys=s,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(O,R){O=O.replace(/^Root Entry[\/]/,""),x.keys.push(O),x.files[O]=e.FileIndex[R]}))),t&&t.bookVBA&&(a.vba.length>0?x.vbaraw=Hn(e,mi(a.vba[0]),!0):a.defaults&&a.defaults.bin===iLe&&(x.vbaraw=Hn(e,"xl/vbaProject.bin",!0))),x}function I8e(e,t){var r=t||{},s="Workbook",a=qt.find(e,s);try{if(s="/!DataSpaces/Version",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(gOe(a.content),s="/!DataSpaces/DataSpaceMap",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var i=vOe(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var l=bOe(a.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);_Oe(a.content)}catch{}if(s="/EncryptionInfo",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var o=wOe(a.content);if(s="/EncryptedPackage",a=qt.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function F8e(e,t){return t.bookType=="ods"?eV(e,t):t.bookType=="numbers"?P8e(e,t):t.bookType=="xlsb"?D8e(e,t):nV(e,t)}function D8e(e,t){dm=1024,e&&!e.SSF&&(e.SSF=Jr(Jt)),e&&e.SSF&&(Mf(),rx(e.SSF),t.revssf=K1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",s=NW.indexOf(t.bookType)>-1,a=M4();tA(t=t||{});var i=j4(),l="",o=0;if(t.cellXfs=[],Uc(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",mr(i,l,Bz(e.Props,t)),a.coreprops.push(l),Ir(t.rels,2,l,hr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,mr(i,l,Wz(e.Props)),a.extprops.push(l),Ir(t.rels,3,l,hr.EXT_PROPS),e.Custprops!==e.Props&&Rn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",mr(i,l,Vz(e.Custprops)),a.custprops.push(l),Ir(t.rels,4,l,hr.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],f=(m||{})["!type"]||"sheet";switch(f){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,mr(i,l,y$e(o-1,l,t,e,u)),a.sheets.push(l),Ir(t.wbrels,-1,"worksheets/sheet"+o+"."+r,hr.WS[0])}if(m){var y=m["!comments"],x=!1,p="";y&&y.length>0&&(p="xl/comments"+o+"."+r,mr(i,p,j$e(y,p)),a.comments.push(p),Ir(u,-1,"../comments"+o+"."+r,hr.CMNT),x=!0),m["!legacy"]&&x&&mr(i,"xl/drawings/vmlDrawing"+o+".vml",_W(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&mr(i,yp(l),km(u))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,mr(i,l,b$e(t.Strings,l,t)),a.strs.push(l),Ir(t.wbrels,-1,"sharedStrings."+r,hr.SST)),l="xl/workbook."+r,mr(i,l,g$e(e,l)),a.workbooks.push(l),Ir(t.rels,1,l,hr.WB),l="xl/theme/theme1.xml",mr(i,l,H4(e.Themes,t)),a.themes.push(l),Ir(t.wbrels,-1,"theme/theme1.xml",hr.THEME),l="xl/styles."+r,mr(i,l,v$e(e,l,t)),a.styles.push(l),Ir(t.wbrels,-1,"styles."+r,hr.STY),e.vbaraw&&s&&(l="xl/vbaProject.bin",mr(i,l,e.vbaraw),a.vba.push(l),Ir(t.wbrels,-1,"vbaProject.bin",hr.VBA)),l="xl/metadata."+r,mr(i,l,_$e(l)),a.metadata.push(l),Ir(t.wbrels,-1,"metadata."+r,hr.XLMETA),mr(i,"[Content_Types].xml",Dz(a,t)),mr(i,"_rels/.rels",km(t.rels)),mr(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function nV(e,t){dm=1024,e&&!e.SSF&&(e.SSF=Jr(Jt)),e&&e.SSF&&(Mf(),rx(e.SSF),t.revssf=K1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",s=NW.indexOf(t.bookType)>-1,a=M4();tA(t=t||{});var i=j4(),l="",o=0;if(t.cellXfs=[],Uc(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",mr(i,l,Bz(e.Props,t)),a.coreprops.push(l),Ir(t.rels,2,l,hr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,mr(i,l,Wz(e.Props)),a.extprops.push(l),Ir(t.rels,3,l,hr.EXT_PROPS),e.Custprops!==e.Props&&Rn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",mr(i,l,Vz(e.Custprops)),a.custprops.push(l),Ir(t.rels,4,l,hr.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var m={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],y=(f||{})["!type"]||"sheet";switch(y){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,mr(i,l,IW(o-1,t,e,m)),a.sheets.push(l),Ir(t.wbrels,-1,"worksheets/sheet"+o+"."+r,hr.WS[0])}if(f){var x=f["!comments"],p=!1,h="";if(x&&x.length>0){var v=!1;x.forEach(function(b){b[1].forEach(function(j){j.T==!0&&(v=!0)})}),v&&(h="xl/threadedComments/threadedComment"+o+"."+r,mr(i,h,YRe(x,u,t)),a.threadedcomments.push(h),Ir(m,-1,"../threadedComments/threadedComment"+o+"."+r,hr.TCMNT)),h="xl/comments"+o+"."+r,mr(i,h,wW(x)),a.comments.push(h),Ir(m,-1,"../comments"+o+"."+r,hr.CMNT),p=!0}f["!legacy"]&&p&&mr(i,"xl/drawings/vmlDrawing"+o+".vml",_W(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}m["!id"].rId1&&mr(i,yp(l),km(m))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,mr(i,l,dW(t.Strings,t)),a.strs.push(l),Ir(t.wbrels,-1,"sharedStrings."+r,hr.SST)),l="xl/workbook."+r,mr(i,l,UW(e)),a.workbooks.push(l),Ir(t.rels,1,l,hr.WB),l="xl/theme/theme1.xml",mr(i,l,H4(e.Themes,t)),a.themes.push(l),Ir(t.wbrels,-1,"theme/theme1.xml",hr.THEME),l="xl/styles."+r,mr(i,l,yW(e,t)),a.styles.push(l),Ir(t.wbrels,-1,"styles."+r,hr.STY),e.vbaraw&&s&&(l="xl/vbaProject.bin",mr(i,l,e.vbaraw),a.vba.push(l),Ir(t.wbrels,-1,"vbaProject.bin",hr.VBA)),l="xl/metadata."+r,mr(i,l,jW()),a.metadata.push(l),Ir(t.wbrels,-1,"metadata."+r,hr.XLMETA),u.length>1&&(l="xl/persons/person.xml",mr(i,l,QRe(u)),a.people.push(l),Ir(t.wbrels,-1,"persons/person.xml",hr.PEOPLE)),mr(i,"[Content_Types].xml",Dz(a,t)),mr(i,"_rels/.rels",km(t.rels)),mr(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function rA(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ai(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $8e(e,t){return qt.find(e,"EncryptedPackage")?I8e(e,t):Z4(e,t)}function M8e(e,t){var r,s=e,a=t||{};return a.type||(a.type=fr&&Buffer.isBuffer(e)?"buffer":"base64"),r=xz(s,a),rV(r,a)}function sV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Ek(e.slice(r),t);default:break e}return pf.to_workbook(e,t)}function B8e(e,t){var r="",s=rA(e,t);switch(t.type){case"base64":r=ai(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Kd(e);break;default:throw new Error("Unrecognized type "+t.type)}return s[0]==239&&s[1]==187&&s[2]==191&&(r=Wr(r)),t.type="binary",sV(r,t)}function U8e(e,t){var r=e;return t.type=="base64"&&(r=ai(r)),r=jr.utils.decode(1200,r.slice(2),"str"),t.type="binary",sV(r,t)}function z8e(e){return e.match(/[^\x00-\x7F]/)?Cl(e):e}function X_(e,t,r,s){return s?(r.type="string",pf.to_workbook(e,r)):pf.to_workbook(t,r)}function ub(e,t){G1();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return ub(new Uint8Array(e),(r=Jr(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var s=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Cm={},r.dateNF&&(Cm.dateNF=r.dateNF),r.type||(r.type=fr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=fr?"buffer":"binary",s=WTe(e),typeof Uint8Array<"u"&&!fr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,s=z8e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Jr(r),r.type="array",ub(g4(s),r)}switch((a=rA(s,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return $8e(qt.read(s,r),r);break;case 9:if(a[1]<=8)return Z4(s,r);break;case 60:return Ek(s,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return eOe(s,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return oW.to_workbook(s,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?M8e(s,r):X_(e,s,r,i);case 239:return a[3]===60?Ek(s,r):X_(e,s,r,i);case 255:if(a[1]===254)return U8e(s,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Ad.to_workbook(s,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Ad.to_workbook(s,r);break;case 3:case 131:case 139:case 140:return Ak.to_workbook(s,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return pW.to_workbook(s,r);break;case 10:case 13:case 32:return B8e(s,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return QPe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Ak.to_workbook(s,r):X_(e,s,r,i)}function wI(e,t){var r=t||{};return r.type="file",ub(e,r)}function aV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return nx(t.file,qt.write(e,{type:fr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return qt.write(e,t)}function W8e(e,t){var r=Jr(t||{}),s=F8e(e,r);return iV(s,r)}function V8e(e,t){var r=Jr(t||{}),s=nV(e,r);return iV(s,r)}function iV(e,t){var r={},s=fr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=s;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=s;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?qt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(tx(a))}return t.password&&typeof encrypt_agile<"u"?aV(encrypt_agile(a,t.password),t):t.type==="file"?nx(t.file,a):t.type=="string"?Wr(a):a}function H8e(e,t){var r=t||{},s=J$e(e,r);return aV(s,r)}function yl(e,t,r){r||(r="");var s=r+e;switch(t.type){case"base64":return fp(Cl(s));case"binary":return Cl(s);case"string":return e;case"file":return nx(t.file,s,"utf8");case"buffer":return fr?Lo(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):yl(s,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function q8e(e,t){switch(t.type){case"base64":return fp(e);case"binary":return e;case"string":return e;case"file":return nx(t.file,e,"binary");case"buffer":return fr?Lo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function hg(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",s=0;s<e.length;++s)r+=String.fromCharCode(e[s]);return t.type=="base64"?fp(r):t.type=="string"?Wr(r):r;case"file":return nx(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function nA(e,t){G1(),BW(e);var r=Jr(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=nA(e,r);return r.type="array",tx(s)}return V8e(e,r)}function rj(e,t){G1(),BW(e);var r=Jr(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=rj(e,r);return r.type="array",tx(s)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yl(U$e(e,r),r);case"slk":case"sylk":return yl(lW.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return yl(XW(e.Sheets[e.SheetNames[a]],r),r);case"txt":return q8e(cV(e.Sheets[e.SheetNames[a]],r),r);case"csv":return yl(aA(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return yl(oW.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return hg(Ak.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return yl(pf.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return yl(pW.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return yl(cW.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return yl(eV(e,r),r);case"wk1":return hg(Ad.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return hg(Ad.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),hg(HW(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),H8e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return W8e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function sA(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function kp(e,t,r){var s=r||{};return s.type="file",s.file=t,sA(s),rj(e,s)}function G8e(e,t,r){var s=r||{};return s.type="file",s.file=t,sA(s),nA(e,s)}function J8e(e,t,r,s){var a=r||{};a.type="file",a.file=e,sA(a),a.type="buffer";var i=s;return i instanceof Function||(i=r),dc.writeFile(e,rj(t,a),i)}function lV(e,t,r,s,a,i,l,o){var c=Pn(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),m=!0,f=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!l||e[r])for(var y=t.s.c;y<=t.e.c;++y){var x=l?e[r][y]:e[s[y]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[y]!=null&&(f[i[y]]=d);continue}var p=x.v;switch(x.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[y]!=null){if(p==null)if(x.t=="e"&&p===null)f[i[y]]=null;else if(d!==void 0)f[i[y]]=d;else if(u&&p===null)f[i[y]]=null;else continue;else f[i[y]]=u&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?p:Bl(x,p,o);p!=null&&(m=!1)}}return{row:f,isempty:m}}function mb(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,a=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=vr(u);break;case"number":c=vr(e["!ref"]),c.s.r=u;break;default:c=u}s>0&&(a=0);var m=Pn(c.s.r),f=[],y=[],x=0,p=0,h=Array.isArray(e),v=c.s.r,b=0,j={};h&&!e[v]&&(e[v]=[]);var _=d.skipHidden&&e["!cols"]||[],N=d.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(_[b]||{}).hidden)switch(f[b]=un(b),r=h?e[v][b]:e[f[b]+m],s){case 1:i[b]=b-c.s.c;break;case 2:i[b]=f[b];break;case 3:i[b]=d.header[b-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Bl(r,null,d),p=j[l]||0,!p)j[l]=1;else{do o=l+"_"+p++;while(j[o]);j[l]=p,j[o]=1}i[b]=o}for(v=c.s.r+a;v<=c.e.r;++v)if(!(N[v]||{}).hidden){var w=lV(e,c,v,f,s,i,h,d);(w.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(y[x++]=w.row)}return y.length=x,y}var NI=/"/g;function oV(e,t,r,s,a,i,l,o){for(var c=!0,d=[],u="",m=Pn(r),f=t.s.c;f<=t.e.c;++f)if(s[f]){var y=o.dense?(e[r]||[])[f]:e[s[f]+m];if(y==null)u="";else if(y.v!=null){c=!1,u=""+(o.rawNumbers&&y.t=="n"?y.v:Bl(y,null,o));for(var x=0,p=0;x!==u.length;++x)if((p=u.charCodeAt(x))===a||p===i||p===34||o.forceQuotes){u='"'+u.replace(NI,'""')+'"';break}u=="ID"&&(u='"ID"')}else y.f!=null&&!y.F?(c=!1,u="="+y.f,u.indexOf(",")>=0&&(u='"'+u.replace(NI,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function aA(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var a=vr(e["!ref"]),i=s.FS!==void 0?s.FS:",",l=i.charCodeAt(0),o=s.RS!==void 0?s.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",m=[];s.dense=Array.isArray(e);for(var f=s.skipHidden&&e["!cols"]||[],y=s.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(f[x]||{}).hidden||(m[x]=un(x));for(var p=0,h=a.s.r;h<=a.e.r;++h)(y[h]||{}).hidden||(u=oV(e,a,h,m,l,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&r.push((p++?o:"")+u)));return delete s.dense,r.join("")}function cV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=aA(e,t);if(typeof jr>"u"||t.type=="string")return r;var s=jr.utils.encode(1200,r,"str");return""+s}function K8e(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var a=vr(e["!ref"]),i="",l=[],o,c=[],d=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)l[o]=un(o);for(var u=a.s.r;u<=a.e.r;++u)for(i=Pn(u),o=a.s.c;o<=a.e.c;++o)if(t=l[o]+i,r=d?(e[u]||[])[o]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}c[c.length]=t+"="+s}return c}function dV(e,t,r){var s=r||{},a=+!s.skipHeader,i=e||{},l=0,o=0;if(i&&s.origin!=null)if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?_n(s.origin):s.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+t.length-1+a}};if(i["!ref"]){var m=vr(i["!ref"]);u.e.c=Math.max(u.e.c,m.e.c),u.e.r=Math.max(u.e.r,m.e.r),l==-1&&(l=m.e.r+1,u.e.r=l+t.length-1+a)}else l==-1&&(l=0,u.e.r=t.length-1+a);var f=s.header||[],y=0;t.forEach(function(p,h){Rn(p).forEach(function(v){(y=f.indexOf(v))==-1&&(f[y=f.length]=v);var b=p[v],j="z",_="",N=nr({c:o+y,r:l+h+a});d=Sp(i,N),b&&typeof b=="object"&&!(b instanceof Date)?i[N]=b:(typeof b=="number"?j="n":typeof b=="boolean"?j="b":typeof b=="string"?j="s":b instanceof Date?(j="d",s.cellDates||(j="n",b=as(b)),_=s.dateNF||Jt[14]):b===null&&s.nullError&&(j="e",b=0),d?(d.t=j,d.v=b,delete d.w,delete d.R,_&&(d.z=_)):i[N]=d={t:j,v:b},_&&(d.z=_))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var x=Pn(l);if(a)for(y=0;y<f.length;++y)i[un(y+o)+x]={t:"s",v:f[y]};return i["!ref"]=ur(u),i}function X8e(e,t){return dV(null,e,t)}function Sp(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=_n(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Sp(e,nr(t)):Sp(e,nr({r:t,c:r||0}))}function Y8e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function iA(){return{SheetNames:[],Sheets:{}}}function lA(e,t,r,s){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var l=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=l+a)!=-1;++a);}if(MW(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Z8e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=Y8e(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function Q8e(e,t){return e.z=t,e}function uV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function e7e(e,t,r){return uV(e,"#"+t,r)}function t7e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function r7e(e,t,r,s){for(var a=typeof t!="string"?t:vr(t),i=typeof t=="string"?t:ur(t),l=a.s.r;l<=a.e.r;++l)for(var o=a.s.c;o<=a.e.c;++o){var c=Sp(e,l,o);c.t="n",c.F=i,delete c.v,l==a.s.r&&o==a.s.c&&(c.f=r,s&&(c.D=!0))}return e}var Il={encode_col:un,encode_row:Pn,encode_cell:nr,encode_range:ur,decode_col:R4,decode_row:O4,split_cell:j5e,decode_cell:_n,decode_range:pa,format_cell:Bl,sheet_add_aoa:Tz,sheet_add_json:dV,sheet_add_dom:YW,aoa_to_sheet:Uf,json_to_sheet:X8e,table_to_sheet:ZW,table_to_book:m8e,sheet_to_csv:aA,sheet_to_txt:cV,sheet_to_json:mb,sheet_to_html:XW,sheet_to_formulae:K8e,sheet_to_row_object_array:mb,sheet_get_cell:Sp,book_new:iA,book_append_sheet:lA,book_set_sheet_visibility:Z8e,cell_set_number_format:Q8e,cell_set_hyperlink:uV,cell_set_internal_link:e7e,cell_add_comment:t7e,sheet_set_array_formula:r7e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},nj;function n7e(e){nj=e}function s7e(e,t){var r=nj(),s=t??{};if(e==null||e["!ref"]==null)return r.push(null),r;var a=vr(e["!ref"]),i=s.FS!==void 0?s.FS:",",l=i.charCodeAt(0),o=s.RS!==void 0?s.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",m=[];s.dense=Array.isArray(e);for(var f=s.skipHidden&&e["!cols"]||[],y=s.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(f[x]||{}).hidden||(m[x]=un(x));var p=a.s.r,h=!1,v=0;return r._read=function(){if(!h)return h=!0,r.push("\uFEFF");for(;p<=a.e.r;)if(++p,!(y[p-1]||{}).hidden&&(u=oV(e,a,p-1,m,l,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),u||s.blankrows!==!1)))return r.push((v++?o:"")+u);return r.push(null)},r}function a7e(e,t){var r=nj(),s=t||{},a=s.header!=null?s.header:GW,i=s.footer!=null?s.footer:JW;r.push(a);var l=pa(e["!ref"]);s.dense=Array.isArray(e),r.push(KW(e,l,s));var o=l.s.r,c=!1;return r._read=function(){if(o>l.e.r)return c||(c=!0,r.push("</table>"+i)),r.push(null);for(;o<=l.e.r;){r.push(qW(e,l,o,s)),++o;break}},r}function i7e(e,t){var r=nj({objectMode:!0});if(e==null||e["!ref"]==null)return r.push(null),r;var s={t:"n",v:0},a=0,i=1,l=[],o=0,c="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},m=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)&&(a=3),typeof m){case"string":d=vr(m);break;case"number":d=vr(e["!ref"]),d.s.r=m;break;default:d=m}a>0&&(i=0);var f=Pn(d.s.r),y=[],x=0,p=Array.isArray(e),h=d.s.r,v=0,b={};p&&!e[h]&&(e[h]=[]);var j=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(v=d.s.c;v<=d.e.c;++v)if(!(j[v]||{}).hidden)switch(y[v]=un(v),s=p?e[h][v]:e[y[v]+f],a){case 1:l[v]=v-d.s.c;break;case 2:l[v]=y[v];break;case 3:l[v]=u.header[v-d.s.c];break;default:if(s==null&&(s={w:"__EMPTY",t:"s"}),c=o=Bl(s,null,u),x=b[o]||0,!x)b[o]=1;else{do c=o+"_"+x++;while(b[c]);b[o]=x,b[c]=1}l[v]=c}return h=d.s.r+i,r._read=function(){for(;h<=d.e.r;)if(!(_[h-1]||{}).hidden){var N=lV(e,d,h,y,a,l,p,u);if(++h,N.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows)){r.push(N.row);return}}return r.push(null)},r}var l7e={to_json:i7e,to_html:a7e,to_csv:s7e,set_readable:n7e};const o7e=mp.version,oA=Object.freeze(Object.defineProperty({__proto__:null,CFB:qt,SSF:dz,parse_xlscfb:Z4,parse_zip:rV,read:ub,readFile:wI,readFileSync:wI,set_cptable:mTe,set_fs:UTe,stream:l7e,utils:Il,version:o7e,write:rj,writeFile:kp,writeFileAsync:J8e,writeFileSync:kp,writeFileXLSX:G8e,writeXLSX:nA},Symbol.toStringTag,{value:"Module"}));function kI({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7Z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function c7e({className:e="w-4 h-4"}){return n.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:n.jsx("path",{d:"M12 5v14M5 12h14"})})}function d7e({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}function u7e({className:e="w-4 h-4"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M3 6h18"}),n.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),n.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),n.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}function Y_(){var yn,Br,Fa,Ls,de,Le,rt,dt;const e=Math.round(Zv.maxFileSizeBytes/1048576),t=50,r=5*1024*1024,s=[".pdf",".doc",".docx",".zip"],[a,i]=g.useState([]),[l,o]=g.useState(!1),[c,d]=g.useState(""),[u,m]=g.useState({name:"",email:"",applied_job:"",source:"",status:""}),[f,y]=g.useState(null),[x,p]=g.useState([]),[h,v]=g.useState(!1),[b,j]=g.useState(null),[_,N]=g.useState(null),[w,k]=g.useState(!1),[S,E]=g.useState("Date (Newest First)"),[T,A]=g.useState(new Set),[C,P]=g.useState(!1),[O,R]=g.useState(null),[F,Q]=g.useState(!1),[W,L]=g.useState(0),[I,K]=g.useState(null),[D,Y]=g.useState([]),[re,B]=g.useState(""),[G,ce]=g.useState(!1),[ae,fe]=g.useState([]),[ne,he]=g.useState(!1),[M,Se]=g.useState(1),[me,Pe]=g.useState(!1),[ue,ye]=g.useState(null),Ye=10,[lt,xe]=g.useState(!1),[Ae,$e]=g.useState([]),[Me,Fe]=g.useState(!1),[We,Ze]=g.useState(0),[pt,Ve]=g.useState(null),[Je,Ke]=g.useState(null),[gt,At]=g.useState(""),[Lt,Bt]=g.useState(!1),[ar,er]=g.useState([]),[Be,xt]=g.useState(null),[mt,It]=g.useState(!1),[Yt,Ne]=g.useState([]),[st,qe]=g.useState("skip"),[ft,kt]=g.useState(null),[Oe,je]=g.useState(null),Re=g.useRef(null),{page:oe,setPage:Ue,limit:Ge,setLimit:ie,pageSizeOptions:ge}=Yp("candidates:intake");function ut(le){if(!le)return"--";const Xe=String(le).trim().toUpperCase();if(!Xe||Xe.startsWith("TEMP-"))return"--";const z=Xe.match(/^([A-Z]{2,6})-C-(\d{1,})$/);if(!z)return"--";const pe=z[1],De=z[2],ze=De.length>=4?De:De.padStart(4,"0");return`${pe}-C-${ze}`}function Z(le){if(!le||typeof le!="string"||!le.includes("@"))return"";const z=(le.split("@")[0]||"").toLowerCase().replace(/\d+/g," ").replace(/[._-]+/g," ").replace(/\s+/g," ").trim();return z?z.split(" ").slice(0,4).map(De=>De.charAt(0).toUpperCase()+De.slice(1)).join(" "):""}function H(le){if(!le||typeof le!="string")return"";let pe=(le.replace(/\\/g,"/").split("/").pop()||"").replace(/\.[^/.]+$/,"").replace(/\(\d+\)\s*$/,"").trim();return pe=pe.replace(/([a-z])([A-Z])/g,"$1 $2"),pe=pe.replace(/[._-]+/g," "),pe=pe.replace(/\b(resume|cv|profile|updated|final|latest)\b/gi," "),pe=pe.replace(/\s+/g," ").trim(),!pe||pe.length<2||/[0-9]{4,}/.test(pe)&&pe.length>12?"":pe.split(" ").slice(0,4).map(ze=>ze?ze.charAt(0).toUpperCase()+ze.slice(1):"").filter(Boolean).join(" ")}function V(le){return(le==null?void 0:le.public_id)||(le==null?void 0:le.publicId)||(le==null?void 0:le.candidate_public_id)||(le==null?void 0:le.candidatePublicId)||(le==null?void 0:le.candidate_code)||(le==null?void 0:le.candidateCode)||(le==null?void 0:le.code)||""}const{id:ee}=Rr();g.useEffect(()=>{X()},[]),g.useEffect(()=>{J()},[]),g.useEffect(()=>{if(ee&&a.length>0){const le=a.find(Xe=>Xe.id===ee||Xe._id===ee);le&&y(le)}},[ee,a]),g.useEffect(()=>()=>{Oe&&clearInterval(Oe)},[Oe]);async function X(){var le,Xe;o(!0),d("");try{const z=await zr.listCandidates();console.log("Candidates loaded:",(z==null?void 0:z.length)||0),i(z||[])}catch(z){console.error("Failed to fetch candidates:",z),console.error("Error details:",(le=z.response)==null?void 0:le.data),console.error("Error status:",(Xe=z.response)==null?void 0:Xe.status),d("Failed to load candidates. Please try again.")}finally{o(!1)}}async function te(le){var Xe,z,pe,De;try{await q.delete(`/v1/candidates/${le}`),i(ze=>ze.filter(yt=>(yt.id||yt._id)!==le)),A(ze=>{const yt=new Set(ze);return yt.delete(le),yt}),console.log("Candidate deleted successfully"),alert("Candidate deleted successfully")}catch(ze){if(console.error("Failed to delete candidate:",ze),((Xe=ze.response)==null?void 0:Xe.status)===403)alert("Access denied: You don't have permission to delete candidates. Please contact your administrator.");else if(((z=ze.response)==null?void 0:z.status)===404)alert("Candidate not found. It may have already been deleted."),i(yt=>yt.filter(Ft=>(Ft.id||Ft._id)!==le)),A(yt=>{const Ft=new Set(yt);return Ft.delete(le),Ft});else{const yt=((De=(pe=ze.response)==null?void 0:pe.data)==null?void 0:De.detail)||ze.message||"Unknown error occurred";alert(`Failed to delete candidate: ${yt}. Please try again.`)}}}function ke(le){ye({...le}),Pe(!0)}async function ve(){try{const le=ue.id||ue._id;await q.put(`/v1/candidates/${le}`,{full_name:ue.full_name||ue.name,email:ue.email,phone:ue.phone,current_location:ue.current_location,current_address:ue.current_address,permanent_address:ue.permanent_address,skills:Array.isArray(ue.skills)?ue.skills.join(", "):ue.skills,experience:ue.experience_years||ue.experience,education:ue.education,current_employer:ue.current_employer,previous_employers:ue.previous_employers,notice_period:ue.notice_period,expected_salary:ue.expected_salary||ue.expectedCtc,preferred_location:ue.preferred_location,languages_known:ue.languages_known,linkedin_url:ue.linkedin_url,github_url:ue.github_url,source:ue.source,referral:ue.referral}),i(Xe=>Xe.map(z=>(z.id||z._id)===le?{...z,...ue}:z)),f&&(f.id||f._id)===le&&y({...f,...ue}),Pe(!1),ye(null),console.log("Candidate updated successfully")}catch(le){console.error("Failed to update candidate:",le),alert("Failed to update candidate. Please try again.")}}async function J(){he(!0);try{const le=await zr.getCandidateBulkUploadHistory(),Xe=Array.isArray(le)?le:[];fe(Xe),Se(1)}catch(le){console.error("Failed to fetch upload history:",le)}finally{he(!1)}}function be(le){const Xe=xL(le);if(!Xe.ok){R(null),B(Xe.message),ce(!0);return}R(le),B("")}async function we(){const le=xL(O);if(!le.ok){B(le.message),ce(!0);return}Q(!0),L(0),K(null),Y([]);try{const Xe=await zr.bulkUploadCandidates(O,{onUploadProgress:z=>{if(!z.total)return;const pe=Math.round(z.loaded*100/z.total);L(pe)}});K(Xe),Y(Xe.errors||[]),(Xe.errors||[]).length>0&&ce(!0),await X(),await J()}catch(Xe){const z=Xe.response.data.message||Xe.response.data.detail||"Bulk upload failed. Please check your file and try again.";B(z),ce(!0)}finally{Q(!1),R(null)}}function Ie(le){if(!le)return{ok:!1,message:"File is required."};const Xe=`.${le.name.split(".").pop()}`.toLowerCase();if(!s.includes(Xe))return{ok:!1,message:`Unsupported file type: ${Xe}. Only PDF, DOC, DOCX, ZIP files are allowed.`};if(le.size>r){const z=(le.size/1048576).toFixed(2);return{ok:!1,message:`File "${le.name}" is too large (${z}MB). Maximum size is 5MB.`}}return le.size===0?{ok:!1,message:`File "${le.name}" is empty.`}:{ok:!0}}function He(le=[]){const Xe=Array.from(le||[]);if(Xe.length===0)return;const z=[],pe=[];Ve(null),xt(null),Ne([]),kt(null),Ze(0);for(const Ft of Xe){const tr=Ie(Ft);tr.ok?pe.push(Ft):z.push({file:Ft.name,message:tr.message})}const De=Array.isArray(Ae)?Ae:[],ze=Math.max(0,t-De.length);let yt=pe;yt.length>ze&&(yt=yt.slice(0,ze),z.push({file:"Selection",message:`Only ${ze} more file(s) can be added (max ${t}).`})),er(z),$e([...De,...yt]),z.length>0?At("Some files were skipped. Please review the messages below."):At("")}async function nt(){var le,Xe,z,pe,De;if(Ae.length===0){At("Please select at least one resume file.");return}Fe(!0),Ze(0),Ve(null),At(""),xt(null);try{const ze=Ae.reduce((Ft,tr)=>Ft+tr.size,0);if(Ae.length>10||ze>50*1024*1024){const Ft=await zr.bulkResumeUploadCandidatesAsync(Ae,{duplicateOption:st});kt(Ft.task_id);const tr=setInterval(async()=>{var Xt,Ut,_r,vn,Kr,rn,ba,Sr,zc;try{const Cn=await zr.getBulkUploadStatus(Ft.task_id);if(Cn.status==="processing")Ze(Cn.progress||0);else if(Cn.status==="completed"){clearInterval(tr),je(null),Ve(Cn.result);const Do={total:((Xt=Cn.result)==null?void 0:Xt.total_processed)||Ae.length,success:((Ut=Cn.result)==null?void 0:Ut.success)||0,failed:((_r=Cn.result)==null?void 0:_r.failed)||0,duplicates:((vn=Cn.result)==null?void 0:vn.duplicates)||0,updated:((Kr=Cn.result)==null?void 0:Kr.updated)||0,created:((ba=(rn=Cn.result)==null?void 0:rn.results)==null?void 0:ba.filter(bu=>bu.status==="Created").length)||0};if(xt(Do),Ke({created_at:new Date().toISOString(),task_id:Ft.task_id,duplicate_option:st,summary:Do,results:((Sr=Cn.result)==null?void 0:Sr.results)||[]}),Fe(!1),Ze(100),(zc=Cn.result)!=null&&zc.results){const bu=Cn.result.results.filter(Hf=>Hf.status.includes("Failed")&&!Hf.status.includes("Duplicate"));Ne(bu)}await X()}else Cn.status==="failed"&&(clearInterval(tr),je(null),Fe(!1),At(`Upload failed: ${Cn.error||"Unknown error"}`))}catch(Cn){console.error("Error polling task status:",Cn)}},2e3);je(tr)}else{const Ft=await zr.bulkResumeUploadCandidates(Ae,{duplicateOption:st,onUploadProgress:Xt=>{if(!Xt.total)return;const Ut=Math.round(Xt.loaded*100/Xt.total);Ze(Ut)}});Ve(Ft);const tr={total:Ft.total_processed||Ae.length,success:Ft.success||0,failed:Ft.failed||0,duplicates:Ft.duplicates||0,updated:Ft.updated||0,created:((le=Ft.results)==null?void 0:le.filter(Xt=>Xt.status==="Created").length)||0};if(xt(tr),Ke({created_at:new Date().toISOString(),duplicate_option:st,summary:tr,results:Ft.results||[]}),Ft.results){const Xt=Ft.results.filter(Ut=>Ut.status.includes("Failed")&&!Ut.status.includes("Duplicate"));Ne(Xt)}await X(),Fe(!1)}}catch(ze){const yt=((z=(Xe=ze.response)==null?void 0:Xe.data)==null?void 0:z.detail)||((De=(pe=ze.response)==null?void 0:pe.data)==null?void 0:De.message)||"Resume upload failed. Please check your files and try again.";At(yt),Fe(!1),Oe&&(clearInterval(Oe),je(null))}}function tt(){$e([]),Ve(null),At(""),er([]),xt(null),Ne([]),Ze(0),kt(null),Oe&&(clearInterval(Oe),je(null))}function _e(le){if(le===0)return"0 Bytes";const Xe=1024,z=["Bytes","KB","MB","GB"],pe=Math.floor(Math.log(le)/Math.log(Xe));return parseFloat((le/Math.pow(Xe,pe)).toFixed(2))+" "+z[pe]}function Qe(le){var pe;const Xe=Ae.filter((De,ze)=>ze!==le);$e(Xe);const z=(pe=Ae[le])==null?void 0:pe.name;z&&er(De=>De.filter(ze=>ze.file!==z)),Xe.length===0&&(At(""),er([]))}async function U(){if(T.size===0){B("Please select at least one candidate to verify."),ce(!0);return}if(window.confirm(`Verify ${T.size} candidate(s) and move to Candidate Pool-`)){P(!0);try{await zr.verifyCandidatesBulk(Array.from(T)),A(new Set),await X()}catch(Xe){const z=Xe.response.data.detail||"Failed to verify selected candidates.";B(z),ce(!0)}finally{P(!1)}}}function se(){if(T.size===0){B("Please select at least one candidate to export."),ce(!0);return}const le=Vt.filter(pe=>T.has(pe.id??pe._id)).map(pe=>({"Full Name":pe.full_name||pe.name||"",Email:pe.email||"",Phone:pe.phone||"","Alternate Phone":pe.alternate_phone||"","Date of Birth":pe.dob||pe.date_of_birth||"",Gender:pe.gender||"","Marital Status":pe.marital_status||"","Current Company":pe.current_employer||"","Current Job Title":pe.current_job_title||"","Total Experience (Years)":pe.experience_years??pe.experience??"","Relevant Experience (Years)":pe.relevant_experience_years??"","Current CTC":pe.current_ctc??"","Expected CTC":pe.expected_ctc??pe.expected_salary??"","Notice Period (Days)":pe.notice_period_days??pe.notice_period??"","Current Location":pe.current_location||"","Preferred Location":pe.preferred_location||"",Skills:Array.isArray(pe.skills)?pe.skills.join(", "):pe.skills||"","Primary Skill":pe.primary_skill||"","Secondary Skill":pe.secondary_skill||"",Qualification:pe.qualification||"","University/College":pe.university||"","Year of Graduation":pe.graduation_year||"",Certifications:pe.certifications_text||"","Resume URL":pe.resume_url||"","LinkedIn URL":pe.linkedin_url||"","GitHub URL":pe.github_url||"","Portfolio URL":pe.portfolio_url||"",Address:pe.current_address||"",City:pe.city||"",State:pe.state||"",Country:pe.country||"",Pincode:pe.pincode||"","Willing to Relocate (Yes/No)":pe.willing_to_relocate===!0?"Yes":pe.willing_to_relocate===!1?"No":"","Preferred Employment Type":pe.preferred_employment_type||"","Availability to Join (Date)":pe.availability_to_join||"","Last Working Day":pe.last_working_day||"","Recruiter Notes":pe.internal_notes||"",Source:pe.source||"",Status:pe.status||"","Applied Job":pe.job_title||"","Created At":pe.created_at||""})),Xe=Il.book_new(),z=Il.json_to_sheet(le);Il.book_append_sheet(Xe,z,"Candidates"),kp(Xe,"selected_candidates.xlsx")}async function at(){B("");try{const le=await q.get("/v1/candidates/bulk-template",{responseType:"blob"}),Xe=new Blob([le.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=window.URL.createObjectURL(Xe),pe=document.createElement("a");pe.href=z,pe.download="Candidate_Bulk_Upload_Template.xlsx",pe.click(),window.URL.revokeObjectURL(z)}catch(le){const Xe=le.response.data.detail||"Unable to download template. Please login and try again.";B(Xe)}}async function ct(le){if(le){B("");try{const Xe=await q.get(le,{responseType:"blob"}),z=new Blob([Xe.data],{type:"text/csv"}),pe=document.createElement("a");pe.href=window.URL.createObjectURL(z),pe.download="candidate_bulk_upload_errors.csv",pe.click(),window.URL.revokeObjectURL(pe.href)}catch(Xe){const z=Xe.response.data.detail||"Unable to download error CSV. Please login and try again.";B(z),ce(!0)}}}const Te=a.filter(le=>{const Xe=!u.name||(le.full_name||le.name||"").toLowerCase().includes(u.name.toLowerCase()),z=!u.email||(le.email||"").toLowerCase().includes(u.email.toLowerCase()),pe=!u.applied_job||(le.job_title||"").toLowerCase().includes(u.applied_job.toLowerCase());return Xe&&z&&pe}),Vt=g.useMemo(()=>{const le=[...Te];return le.sort((Xe,z)=>{switch(S){case"Name (A-Z)":const pe=(Xe.full_name||Xe.name||"").toLowerCase(),De=(z.full_name||z.name||"").toLowerCase();return pe.localeCompare(De);case"Name (Z-A)":const ze=(Xe.full_name||Xe.name||"").toLowerCase();return(z.full_name||z.name||"").toLowerCase().localeCompare(ze);case"Email (A-Z)":const Ft=(Xe.email||"").toLowerCase(),tr=(z.email||"").toLowerCase();return Ft.localeCompare(tr);case"Email (Z-A)":const Xt=(Xe.email||"").toLowerCase();return(z.email||"").toLowerCase().localeCompare(Xt);case"Date (Newest First)":return new Date(z.created_at)-new Date(Xe.created_at);case"Date (Oldest First)":return new Date(Xe.created_at)-new Date(z.created_at);default:return 0}}),le},[Te,S]),bt=Vt.length>0&&Vt.every(le=>T.has(le.id??le._id??le.email??le.public_id)),$t=Math.max(1,Math.ceil(Vt.length/Math.max(1,Ge)));g.useEffect(()=>{oe>$t&&Ue($t)},[oe,$t,Ue]),g.useEffect(()=>{Ue(1)},[u.name,u.email,u.applied_job,S,Ue]);function Mt(le){A(Xe=>{const z=new Set(Xe);return z.has(le)?z.delete(le):z.add(le),z})}function br(){A(bt?new Set:new Set(Vt.map(le=>le.id??le._id??le.email??le.public_id).filter(Boolean)))}async function Pr(le){const Xe=le.id||le._id;if(!Xe)return alert("Candidate ID missing");if(le.resume_url){const Ft=String(le.resume_url).trim().replace(/\\/g,"/"),tr=/^https?:\/\//i.test(Ft),Xt="https://ats-10-iyol.onrender.com",Ut=Ft.startsWith("/")?Ft:`/${Ft}`,_r=tr?Ft:`${Xt}${Ut}`;window.open(encodeURI(_r),"_blank","noopener,noreferrer");return}const z=await q.get(`/v1/candidates/${Xe}/resume/download`,{responseType:"blob"}),pe=new Blob([z.data]),De=window.URL.createObjectURL(pe),ze=document.createElement("a");ze.href=De,ze.download="resume.pdf",ze.click(),window.URL.revokeObjectURL(De)}const Rs=async le=>{var z;j(le);const Xe=le._id||le.id;if(!Xe){alert("Candidate ID missing");return}try{const pe=await YU(Xe);N(((z=pe==null?void 0:pe.feedbacks)==null?void 0:z[0])||null)}catch(pe){console.error("Failed to load feedback:",pe),N(null)}k(!1),v(!0)},jt=async le=>{v(!1),k(!1);const Xe=(le==null?void 0:le.id)||(le==null?void 0:le._id);if(!Xe){y(le);return}y(le);try{const z=await zr.getCandidateById(Xe);z&&y({...z,job_title:le.job_title||z.job_title})}catch(z){console.error("Failed to fetch candidate details:",z)}},gn=Math.max(1,Math.ceil(ae.length/Ye)),js=(M-1)*Ye,va=ae.slice(js,js+Ye);return n.jsxs("div",{className:"space-y-6",children:[lt&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>xe(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Bulk Resume Upload"}),n.jsx("button",{type:"button",onClick:()=>{xe(!1),tt()},className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duplicate Candidate Handling:"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"duplicateOption",value:"skip",checked:st==="skip",onChange:le=>qe(le.target.value),className:"mr-2"}),"Skip duplicates"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"duplicateOption",value:"overwrite",checked:st==="overwrite",onChange:le=>qe(le.target.value),className:"mr-2"}),"Update existing"]})]})]}),n.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-all ${Lt?"border-purple-400 bg-purple-100":Ae.length>0?"border-green-300 bg-green-50":"border-purple-200 bg-purple-50"}`,onDragOver:le=>{le.preventDefault(),Bt(!0)},onDragLeave:le=>{le.preventDefault(),Bt(!1)},onDrop:le=>{le.preventDefault(),Bt(!1),He(le.dataTransfer.files)},children:[n.jsx("input",{id:"resumeUploadInput",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.zip",className:"hidden",ref:Re,onChange:le=>{He(le.target.files),le.target.value=""}}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"resumeUploadInput",className:"cursor-pointer text-lg font-medium text-purple-700 hover:text-purple-800",children:Lt?"Drop files here":"Click to browse or drag and drop files"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Maximum ",t," files  5MB each  PDF, DOC, DOCX, ZIP"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Select multiple files (Ctrl/Shift) or add more files again anytime."})]})]})]}),ar.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:"File Validation Errors:"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:ar.map((le,Xe)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:""}),n.jsxs("span",{children:[n.jsxs("strong",{children:[le.file,":"]})," ",le.message]})]},Xe))})]}),Ae.length>0&&n.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-t-lg",children:[n.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Selected Files (",Ae.length,"/",t,")"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:()=>{var le;return(le=Re.current)==null?void 0:le.click()},className:"text-xs text-purple-700 hover:text-purple-900 underline",children:"Add More"}),n.jsx("button",{type:"button",onClick:()=>{$e([]),er([]),At("")},className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear All"})]})]}),n.jsx("div",{className:"max-h-48 overflow-auto",children:Ae.map((le,Xe)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-sm",children:le.name}),n.jsx("p",{className:"text-xs text-gray-500",children:_e(le.size)})]})]}),n.jsx("button",{type:"button",onClick:()=>Qe(Xe),className:"text-red-500 hover:text-red-700 p-1",title:"Remove file",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Xe))})]}),gt&&n.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})}),n.jsx("span",{className:"text-sm text-red-700",children:gt})]})}),Me&&n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:ft?"Processing resumes in background...":"Processing resumes..."}),n.jsxs("span",{className:"text-sm text-gray-600",children:[We,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${We}%`}})}),n.jsx("p",{className:"text-xs text-gray-500",children:ft?`Task ID: ${ft} - Please wait while we parse and extract information from your resumes...`:"Please wait while we parse and extract information from your resumes..."}),ft&&n.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[n.jsx("strong",{children:"Large batch detected:"})," Processing in background for better performance. You can close this modal and check progress later if needed."]})]}),Be&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-3",children:"Upload Summary"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Be.total}),n.jsx("div",{className:"text-gray-600",children:"Total Files"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:Be.created}),n.jsx("div",{className:"text-gray-600",children:"Created"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Be.updated}),n.jsx("div",{className:"text-gray-600",children:"Updated"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Be.duplicates}),n.jsx("div",{className:"text-gray-600",children:"Duplicates"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:Be.failed}),n.jsx("div",{className:"text-gray-600",children:"Failed"})]})]})]}),pt&&pt.results&&pt.results.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Detailed Results"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Resume"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate Name"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:pt.results.map((le,Xe)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"p-3 truncate max-w-xs",title:le.resume,children:le.resume}),n.jsx("td",{className:"p-3 font-mono text-xs whitespace-nowrap",children:ut(le.candidate_id||le.public_id||le.publicId||le.candidate_public_id||le.candidatePublicId)}),n.jsx("td",{className:"p-3",children:le.name||"--"}),n.jsx("td",{className:"p-3",children:le.email||"--"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${le.status==="Created"?"bg-green-100 text-green-800":le.status==="Updated"?"bg-blue-100 text-blue-800":le.status.includes("Duplicate")?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:le.status})})]},`${le.resume}-${Xe}`))})]})})})]}),n.jsxs("div",{className:"mt-6 flex justify-between",children:[n.jsx("div",{children:Yt.length>0&&n.jsxs("button",{type:"button",onClick:()=>It(!0),className:"px-4 py-2 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200",children:["Retry Failed (",Yt.length,")"]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",onClick:()=>{xe(!1),tt()},children:pt?"Close":"Cancel"}),!pt&&n.jsx("button",{type:"button",onClick:nt,disabled:Me||Ae.length===0,className:"px-6 py-2 rounded-md bg-purple-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-purple-700 font-medium",children:Me?"Processing...":`Upload ${Ae.length} Resume${Ae.length!==1?"s":""}`})]})]})]})]}),mt&&Yt.length>0&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>It(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Retry Failed Uploads"}),n.jsx("button",{type:"button",onClick:()=>It(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["The following ",Yt.length," file(s) failed to upload. Review the errors and decide how to proceed:"]}),n.jsx("div",{className:"max-h-64 overflow-auto border border-gray-200 rounded",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"File"}),n.jsx("th",{className:"p-2 text-left",children:"Error"})]})}),n.jsx("tbody",{children:Yt.map((le,Xe)=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"p-2",children:le.resume}),n.jsx("td",{className:"p-2 text-red-600",children:le.status})]},Xe))})]})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[n.jsx("strong",{children:"Common fixes:"}),n.jsx("br",{})," Check file format (PDF, DOC, DOCX only)",n.jsx("br",{})," Ensure files are under 5MB each",n.jsx("br",{})," Verify files are not corrupted"]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>It(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Close"}),n.jsx("button",{type:"button",onClick:()=>{It(!1),tt()},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:"Start Over"})]})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",n.jsx("strong",{children:T.size})]}),n.jsx("button",{type:"button",onClick:at,className:"px-3 py-2 rounded-md bg-indigo-50 text-indigo-700 border",children:"Download Template"}),O?n.jsx("button",{type:"button",onClick:we,disabled:F,className:"bg-blue-600 text-white px-3 py-2 rounded disabled:bg-gray-300",children:F?"Uploading...":"Upload"}):n.jsxs("label",{className:"bg-gray-100 px-3 py-2 rounded cursor-pointer",children:["Select Excel (.xlsx)",n.jsx("input",{type:"file",hidden:!0,accept:".xlsx",onChange:le=>{var Xe;return be((Xe=le.target.files)==null?void 0:Xe[0])}})]}),n.jsx("button",{type:"button",onClick:()=>xe(!0),className:"px-3 py-2 rounded-md bg-purple-50 text-purple-700 border",children:"Upload Resumes"}),O&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:["Selected: ",n.jsx("strong",{children:O.name}),n.jsx("button",{type:"button",onClick:()=>R(null),className:"text-xs px-2 py-1 border rounded",children:"Clear"})]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Max ",e,"MB - Max ",Zv.maxRows," rows"]})]}),F&&n.jsxs("span",{className:"text-xs text-gray-500",children:[W,"% uploaded"]}),n.jsx("button",{type:"button",onClick:se,disabled:T.size===0,className:"bg-gray-900 text-white px-4 py-2 rounded disabled:bg-gray-300",children:"Export Selected"}),n.jsx("button",{type:"button",onClick:U,disabled:T.size===0||C,className:"bg-emerald-600 text-white px-4 py-2 rounded disabled:bg-gray-300",children:C?"Verifying...":"Verify Selected"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Sort by"}),n.jsxs("select",{value:S,onChange:le=>E(le.target.value),className:`\r
      px-3 py-1.5\r
      text-sm\r
      font-medium\r
      text-gray-700\r
      bg-gray-100\r
      border border-gray-200\r
      rounded-full\r
      cursor-pointer\r
      hover:bg-gray-200\r
      focus:outline-none\r
      focus:ring-0\r
      transition\r
    `,children:[n.jsx("option",{value:"Date (Newest First)",children:"Date (Newest First)"}),n.jsx("option",{value:"Date (Oldest First)",children:"Date (Oldest First)"}),n.jsx("option",{value:"Name (A-Z)",children:"Name (A-Z)"}),n.jsx("option",{value:"Name (Z-A)",children:"Name (Z-A)"}),n.jsx("option",{value:"Email (A-Z)",children:"Email (A-Z)"}),n.jsx("option",{value:"Email (Z-A)",children:"Email (Z-A)"})]})]})]}),re&&n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:re}),I&&n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Total Rows:"})," ",n.jsx("strong",{children:I.total_rows})]}),n.jsxs("div",{className:"text-sm text-green-700",children:[n.jsx("span",{className:"text-gray-500",children:"Success:"})," ",n.jsx("strong",{children:I.success_count})]}),n.jsxs("div",{className:"text-sm text-red-700",children:[n.jsx("span",{className:"text-gray-500",children:"Failed:"})," ",n.jsx("strong",{children:I.failed_count})]}),ae[0].error_csv_url&&n.jsx("button",{type:"button",onClick:()=>ct(ae[0].error_csv_url),className:"text-sm text-blue-600 underline",children:"Download Error CSV"})]}),D.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Row"}),n.jsx("th",{className:"border p-2 text-left",children:"Field"}),n.jsx("th",{className:"border p-2 text-left",children:"Message"})]})}),n.jsx("tbody",{children:D.map((le,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:le.row}),n.jsx("td",{className:"border p-2",children:le.field}),n.jsx("td",{className:"border p-2",children:le.message})]},`${le.row}-${le.field}-${Xe}`))})]})}):n.jsx("div",{className:"text-sm text-gray-600",children:"No row errors reported."})]}),G&&(re||D.length>0)&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ce(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-lg p-5 rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Upload Errors"}),n.jsx("button",{onClick:()=>ce(!1),className:"text-lg",children:"x"})]}),re&&n.jsx("div",{className:"text-sm text-red-700 mb-3",children:re}),D.length>0&&n.jsx("div",{className:"max-h-64 overflow-auto border rounded",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Row"}),n.jsx("th",{className:"p-2 text-left",children:"Field"}),n.jsx("th",{className:"p-2 text-left",children:"Message"})]})}),n.jsx("tbody",{children:D.map((le,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 border-t",children:le.row}),n.jsx("td",{className:"p-2 border-t",children:le.field}),n.jsx("td",{className:"p-2 border-t",children:le.message})]},`${le.row}-${le.field}-${Xe}`))})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>ce(!1),children:"Close"})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsx("input",{value:u.name,onChange:le=>m(Xe=>({...Xe,name:le.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Name"}),n.jsx("input",{value:u.email,onChange:le=>m(Xe=>({...Xe,email:le.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Email"}),n.jsx("input",{value:u.applied_job,onChange:le=>m(Xe=>({...Xe,applied_job:le.target.value})),className:"w-full border-2 border-purple-300 px-3 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",placeholder:"Filter by Applied Job"})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:bt,onChange:br}),"Select all filtered candidates"]}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",T.size]})]}),n.jsx(Xp,{items:Vt,totalPages:$t,currentPage:oe,onPageChange:Ue,totalRecords:Vt.length,pageSize:Ge,onPageSizeChange:le=>{ie(le),Ue(1)},pageSizeOptions:ge,loading:l,error:c||null,onRetry:X,emptyMessage:"No candidates",keyExtractor:le=>le.id||le._id||le.email||le.public_id,renderCard:le=>{var z,pe,De;const Xe=le.id||le._id||le.email||le.public_id;return n.jsxs("article",{className:"border border-gray-200 rounded-xl p-4 bg-white shadow-sm hover:shadow-md transition",onClick:()=>jt(le),children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("input",{type:"checkbox",checked:T.has(Xe),onChange:ze=>{ze.stopPropagation(),Mt(Xe)}}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:le.full_name||le.name||((z=le.parsed_data_json)==null?void 0:z.full_name)||((De=(pe=le.parsed_resume)==null?void 0:pe.data)==null?void 0:De.full_name)||H(le.resume_url||le.resume_path)||Z(le.email)||"--"}),n.jsx("div",{className:"text-xs text-gray-500 font-mono",children:ut(V(le))})]})]}),n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700",children:le.intake_status||le.status||"--"})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Email:"})," ",le.email||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",le.phone||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Applied Job:"})," ",le.job_title||"--"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Date:"})," ",Zp(le.created_at)]})]}),n.jsx("div",{className:"mt-3",children:n.jsx($U,{lastActivityAt:le.last_activity_at,lastActivityType:le.last_activity_type,lastActivityRelative:le.last_activity_relative,className:"min-w-0"})}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:ze=>{ze.stopPropagation(),jt(le)},title:"View Candidate",className:"w-8 h-8 rounded-full hover:bg-indigo-100 text-indigo-600 inline-flex items-center justify-center",children:n.jsx(kI,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-purple-100 text-purple-600 cursor-pointer inline-flex items-center justify-center",title:"Add Call Feedback",onClick:ze=>{ze.stopPropagation(),y(null),h&&(b==null?void 0:b.id)===le.id?v(!1):Rs(le)},children:n.jsx(c7e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-rose-100 text-rose-600 cursor-pointer inline-flex items-center justify-center",title:"View Feedback History",onClick:ze=>{if(ze.stopPropagation(),y(null),!(le.id||le._id)){alert("Candidate ID missing");return}j(le),v(!1),k(!0)},children:n.jsx(kI,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-blue-100 text-blue-600 cursor-pointer inline-flex items-center justify-center",title:"Edit Candidate",onClick:ze=>{ze.stopPropagation(),ke(le)},children:n.jsx(d7e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"w-8 h-8 rounded-full hover:bg-red-100 text-red-600 cursor-pointer inline-flex items-center justify-center",title:"Delete Candidate",onClick:ze=>{ze.stopPropagation(),window.confirm(`Are you sure you want to delete ${le.full_name||le.name||"this candidate"}?`)&&te(le.id||le._id)},children:n.jsx(u7e,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",className:"px-3 py-1 text-xs border rounded hover:bg-gray-50",onClick:ze=>{ze.stopPropagation(),Pr(le)},children:"Resume"})]})]})}})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Upload History"}),n.jsx("button",{onClick:J,className:"text-sm px-3 py-1 border rounded",disabled:ne,children:ne?"Refreshing...":"Refresh"})]}),ne?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading history..."}):ae.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No uploads yet."}):n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Date"}),n.jsx("th",{className:"border p-2 text-left",children:"File"}),n.jsx("th",{className:"border p-2 text-left",children:"Total"}),n.jsx("th",{className:"border p-2 text-left",children:"Success"}),n.jsx("th",{className:"border p-2 text-left",children:"Failed"}),n.jsx("th",{className:"border p-2 text-left",children:"Errors"})]})}),n.jsx("tbody",{children:va.map(le=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:le.created_at?new Date(le.created_at).toLocaleString():"--"}),n.jsx("td",{className:"border p-2",children:le.filename||"--"}),n.jsx("td",{className:"border p-2",children:le.total_rows}),n.jsx("td",{className:"border p-2 text-green-700",children:le.success_count}),n.jsx("td",{className:"border p-2 text-red-700",children:le.failed_count}),n.jsx("td",{className:"border p-2",children:le.error_csv_url?n.jsx("button",{type:"button",onClick:()=>ct(le.error_csv_url),className:"text-blue-600 underline",children:"Download CSV"}):"--"})]},le.id))})]}),ae.length>Ye&&n.jsxs("div",{className:"flex items-center justify-between mt-3 text-sm",children:[n.jsxs("span",{className:"text-gray-500",children:["Page ",M," of ",gn]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:M===1,onClick:()=>Se(le=>Math.max(1,le-1)),children:"Prev"}),n.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:M===gn,onClick:()=>Se(le=>Math.min(gn,le+1)),children:"Next"})]})]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold",children:"Resume Upload Logs"}),(Je==null?void 0:Je.created_at)&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Last upload:"," ",new Date(Je.created_at).toLocaleString()]})]}),!Je||!Array.isArray(Je.results)||Je.results.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No resume uploads yet."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3 grid grid-cols-2 md:grid-cols-5 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),n.jsx("div",{className:"font-semibold",children:((yn=Je.summary)==null?void 0:yn.total)??Je.results.length})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Created"}),n.jsx("div",{className:"font-semibold text-green-700",children:((Br=Je.summary)==null?void 0:Br.created)??Je.results.filter(le=>le.status==="Created").length})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Updated"}),n.jsx("div",{className:"font-semibold text-blue-700",children:((Fa=Je.summary)==null?void 0:Fa.updated)??0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Duplicates"}),n.jsx("div",{className:"font-semibold text-yellow-700",children:((Ls=Je.summary)==null?void 0:Ls.duplicates)??0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Failed"}),n.jsx("div",{className:"font-semibold text-red-700",children:((de=Je.summary)==null?void 0:de.failed)??0})]})]}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Resume"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Candidate Name"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"p-3 text-left font-medium text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:Je.results.map((le,Xe)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"p-3 font-mono text-xs whitespace-nowrap",children:ut(le.candidate_id||le.public_id||le.publicId||le.candidate_public_id||le.candidatePublicId)}),n.jsx("td",{className:"p-3 truncate max-w-xs",title:le.resume,children:le.resume}),n.jsx("td",{className:"p-3",children:le.name||Z(le.email)||"--"}),n.jsx("td",{className:"p-3",children:le.email||"--"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${le.status==="Created"?"bg-green-100 text-green-800":le.status==="Updated"?"bg-blue-100 text-blue-800":le.status.includes("Duplicate")?"bg-yellow-100 text-yellow-800":le.status.includes("Failed")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:le.status})})]},`${le.resume}-${Xe}`))})]})})})]})]}),f&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>y(null)}),n.jsxs("div",{className:"relative bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Candidate Profile"}),n.jsx("button",{onClick:()=>y(null),className:"text-lg",children:"x"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("b",{children:"Name:"})," ",f.full_name||f.name||((Le=f.parsed_data_json)==null?void 0:Le.full_name)||((dt=(rt=f.parsed_resume)==null?void 0:rt.data)==null?void 0:dt.full_name)||H(f.resume_url||f.resume_path)||Z(f.email)||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Candidate ID:"})," ",ut(V(f))]}),n.jsxs("div",{children:[n.jsx("b",{children:"Email:"})," ",f.email||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Phone:"})," ",f.phone||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Date of Birth:"})," ",f.dob||f.date_of_birth||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Location:"})," ",f.current_location||f.currentLocation||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"City:"})," ",f.city||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Pincode:"})," ",f.pincode||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Address:"})," ",f.current_address||f.currentAddress||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Permanent Address:"})," ",f.permanent_address||f.permanentAddress||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Applied Job:"})," ",f.job_title||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Classification:"})," ",f.classification||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Source:"})," ",f.source||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Referral:"})," ",f.referral||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Skills:"})," ",Array.isArray(f.skills)?f.skills.join(", "):f.skills||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Experience (years):"})," ",f.experience_years||f.experience||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Education:"})," ",f.education||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Current Employer:"})," ",f.current_employer||f.currentEmployer||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Previous Employers:"})," ",f.previous_employers||f.previousEmployers||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Notice Period:"})," ",f.notice_period||f.noticePeriod||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Expected CTC:"})," ",f.expected_salary||f.expectedCtc||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Preferred Location:"})," ",f.preferred_location||f.preferredLocation||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Languages Known:"})," ",f.languages_known||f.languagesKnown||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"Ready to Relocate:"})," ",f.ready_to_relocate!==void 0?f.ready_to_relocate?"Yes":"No":f.readyToRelocate!==void 0?f.readyToRelocate?"Yes":"No":"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"LinkedIn:"})," ",f.linkedin_url||f.linkedinUrl||"--"]}),n.jsxs("div",{children:[n.jsx("b",{children:"GitHub:"})," ",f.github_url||f.githubUrl||"--"]})," "]})," ",f.parsed_data_json&&n.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Parsed Resume Data"}),n.jsx("span",{className:"text-xs text-gray-500",children:"(auto-extracted from resume)"})]}),f.parsed_data_json.resume_text&&n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Resume Text (preview)"}),n.jsx("div",{className:"text-xs text-gray-700 whitespace-pre-wrap bg-white border border-gray-200 rounded p-2 max-h-40 overflow-auto",children:f.parsed_data_json.resume_text})]}),n.jsx("pre",{className:"text-xs bg-white border border-gray-200 rounded p-2 overflow-auto max-h-64",children:JSON.stringify(f.parsed_data_json,null,2)})]}),n.jsxs("div",{className:"mt-6 flex justify-between",children:[n.jsx("button",{onClick:()=>Pr(f),className:"text-indigo-600 font-semibold",children:"Download Resume"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>ke(f),className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700",children:"Edit"}),n.jsx("button",{onClick:()=>y(null),className:"bg-gray-100 px-4 py-1.5 rounded",children:"Close"})]})]})]})," "]}),me&&ue&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{Pe(!1),ye(null)}}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Edit Candidate Profile"}),n.jsx("button",{onClick:()=>{Pe(!1),ye(null)},className:"text-lg",children:"x"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Name:"}),n.jsx("input",{type:"text",value:ue.full_name||ue.name||"",onChange:le=>ye({...ue,full_name:le.target.value,name:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Candidate ID:"}),n.jsx("input",{type:"text",value:ut(V(ue)),readOnly:!0,className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Email:"}),n.jsx("input",{type:"email",value:ue.email||"",onChange:le=>ye({...ue,email:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Phone:"}),n.jsx("input",{type:"text",value:ue.phone||"",onChange:le=>ye({...ue,phone:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Location:"}),n.jsx("input",{type:"text",value:ue.current_location||"",onChange:le=>ye({...ue,current_location:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"City:"}),n.jsx("input",{type:"text",value:ue.city||"",onChange:le=>ye({...ue,city:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Address:"}),n.jsx("textarea",{value:ue.current_address||"",onChange:le=>ye({...ue,current_address:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 h-20"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Skills:"}),n.jsx("input",{type:"text",value:Array.isArray(ue.skills)?ue.skills.join(", "):ue.skills||"",onChange:le=>ye({...ue,skills:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Comma separated skills"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Experience (years):"}),n.jsx("input",{type:"number",value:ue.experience_years||ue.experience||"",onChange:le=>ye({...ue,experience_years:le.target.value,experience:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Education:"}),n.jsx("input",{type:"text",value:ue.education||"",onChange:le=>ye({...ue,education:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Current Employer:"}),n.jsx("input",{type:"text",value:ue.current_employer||"",onChange:le=>ye({...ue,current_employer:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Expected CTC:"}),n.jsx("input",{type:"text",value:ue.expected_salary||ue.expectedCtc||"",onChange:le=>ye({...ue,expected_salary:le.target.value,expectedCtc:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"Source:"}),n.jsxs("select",{value:ue.source||"",onChange:le=>ye({...ue,source:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[n.jsx("option",{value:"",children:"Select Source"}),n.jsx("option",{value:"Direct",children:"Direct"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Bulk Resume Upload",children:"Bulk Resume Upload"}),n.jsx("option",{value:"Portal",children:"Portal"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-1",children:"LinkedIn:"}),n.jsx("input",{type:"url",value:ue.linkedin_url||"",onChange:le=>ye({...ue,linkedin_url:le.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]}),n.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>{Pe(!1),ye(null)},className:"bg-gray-100 px-6 py-2 rounded hover:bg-gray-200",children:"Cancel"}),n.jsx("button",{onClick:ve,className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Save Changes"})]})]})]}),h&&n.jsx(p4,{isOpen:h,candidateId:b.id||b._id,candidateName:b.full_name||b.name,initialData:_,onClose:()=>v(!1),onSuccess:()=>v(!1)}),w&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),n.jsxs("div",{className:"relative bg-white w-full max-w-4xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Call Feedback History"}),n.jsx("button",{onClick:()=>k(!1),className:"text-lg",children:"x"})]}),n.jsx(ZU,{candidateId:b._id||b.id,onFeedbackSelect:le=>{N(le),k(!1),v(!0)},onAddNew:()=>{N(null),k(!1),v(!0)}})]})]})]})}const mV={interview_scheduled:"Scheduled",scheduled:"Scheduled",rescheduled:"Scheduled",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",selected:"Selected",rejected:"Not Selected"},m7e={Scheduled:"bg-amber-100 text-amber-800","In Progress":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Selected:"bg-emerald-100 text-emerald-800","Not Selected":"bg-rose-100 text-rose-800"},f7e={ai_chat:"AI Chat",video:"Online Meeting",live:"Online Meeting",in_person:"In-Person"},ly=e=>{const t=String(e||"").toLowerCase().replace(/\s+/g,"_");return mV[t],t},h7e=e=>{const t=ly(e);return mV[t]||"Scheduled"},p7e=e=>f7e[e]||"Interview",SI=e=>{if(!e)return"Not Scheduled";const t=new Date(e);return Number.isNaN(t.getTime())?"Not Scheduled":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},x7e=(e,t,r)=>{if(!e)return{isBefore:!0,isAfter:!1,start:null,end:null};const s=new Date(e);if(Number.isNaN(s.getTime()))return{isBefore:!0,isAfter:!1,start:null,end:null};const a=r!=null?r*1e3:t!=null?t*60*1e3:60*60*1e3,i=new Date(s.getTime()+a),l=new Date;return{isBefore:l.getTime()<s.getTime(),isAfter:l.getTime()>i.getTime(),start:s,end:i}};function g7e(){const e=Et(),[t,r]=g.useState(!0),[s,a]=g.useState([]),[i,l]=g.useState(null),[o,c]=g.useState("");g.useEffect(()=>{(async()=>{var m,f,y;r(!0),c("");try{const x=await q.get("/v1/candidate/my-interviews"),p=((m=x.data)==null?void 0:m.interviews)??x.data??[];a(Array.isArray(p)?p:[])}catch(x){c(((y=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:y.detail)||"Failed to load interviews. Please try again.")}finally{r(!1)}})()},[]);const d=async u=>{var f,y;const m=u.id||u.interview_id;l(m);try{await q.post(`/v1/interviews/${m}/start`),e(`/interviews/${m}`)}catch(x){c(((y=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:y.detail)||"Interview is not available yet. Please try again later.")}finally{l(null)}};return t?n.jsx("div",{className:"text-gray-600",children:"Loading interviews..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Interviews"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track your scheduled interviews and join at the right time."})]}),o&&n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:o}),s.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center text-gray-500",children:"No interviews scheduled yet."}):n.jsx("div",{className:"grid gap-4",children:s.map(u=>{const m=h7e(u.status),f=x7e(u.scheduled_at,u.duration,u.duration_seconds),y=f.isBefore,x=f.isAfter,p=m==="Completed"||m==="Cancelled"||m==="Selected"||m==="Not Selected",h=!y&&!x&&!p&&u.type!=="in_person"&&(ly(u.status)==="scheduled"||ly(u.status)==="in_progress"),v=p?m:y?`Available at ${SI(u.scheduled_at)}`:x?"Interview Window Closed":ly(u.status)==="in_progress"?"Resume Interview":u.type==="ai_chat"?"Start Interview":u.type==="in_person"?"In Person":"Join Meet";return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.job_title||"Job Interview"}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${m7e[m]||"bg-gray-100 text-gray-700"}`,children:m})]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[u.company||"Company"," - ",p7e(u.type)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",SI(u.scheduled_at)]}),u.type==="in_person"&&(u.location||u.instructions)&&n.jsxs("p",{className:"text-xs text-gray-500",children:[u.location?`Location: ${u.location}`:"",u.location&&u.instructions?"  ":"",u.instructions?`Instructions: ${u.instructions}`:""]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.jsx("button",{type:"button",onClick:()=>e(`/candidate/my-interviews/${u.id||u.interview_id}`),className:"px-4 py-2 rounded border text-sm font-medium text-gray-700 hover:bg-gray-50",children:"View Details"}),u.type==="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>h?d(u):null,disabled:!h||i===(u.id||u.interview_id),className:`px-4 py-2 rounded text-sm font-semibold ${h?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:i===(u.id||u.interview_id)?"Starting...":v}),u.type!=="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>{if(h){if(u.join_link&&u.type!=="in_person"){window.open(u.join_link,"_blank","noopener");return}e(`/candidate/my-interviews/${u.id||u.interview_id}`)}},disabled:!h,className:`px-4 py-2 rounded text-sm font-semibold ${h?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:v})]})]},u.id||u.interview_id)})})]})}const fV={interview_scheduled:"Scheduled",scheduled:"Scheduled",rescheduled:"Scheduled",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",selected:"Selected",rejected:"Not Selected"},y7e={Scheduled:"bg-amber-100 text-amber-800","In Progress":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Selected:"bg-emerald-100 text-emerald-800","Not Selected":"bg-rose-100 text-rose-800"},v7e={ai_chat:"AI Chat",video:"Online Meeting",live:"Online Meeting",in_person:"In-Person"},E0=e=>{const t=String(e||"").toLowerCase().replace(/\s+/g,"_");return fV[t],t},b7e=e=>{const t=E0(e);return fV[t]||"Scheduled"},j7e=e=>v7e[e]||"Interview",CI=e=>{if(!e)return"Not Scheduled";const t=new Date(e);return Number.isNaN(t.getTime())?"Not Scheduled":t.toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"})},_7e=(e,t)=>{if(!e)return{isBefore:!0,isAfter:!1,start:null,end:null};const r=new Date(e);if(Number.isNaN(r.getTime()))return{isBefore:!0,isAfter:!1,start:null,end:null};const s=t!=null?t*1e3:60*60*1e3,a=new Date(r.getTime()+s),i=new Date;return{isBefore:i.getTime()<r.getTime(),isAfter:i.getTime()>a.getTime(),start:r,end:a}};function w7e(){var k,S,E,T,A,C,P,O,R,F;const{interviewId:e}=Rr(),t=Et(),[r,s]=g.useState(!0),[a,i]=g.useState(!1),[l,o]=g.useState(""),[c,d]=g.useState(null);g.useEffect(()=>{(async()=>{var W,L;s(!0),o("");try{const I=await q.get(`/v1/interviews/${e}`);d(I.data)}catch(I){o(((L=(W=I==null?void 0:I.response)==null?void 0:W.data)==null?void 0:L.detail)||"Failed to load interview details. Please try again.")}finally{s(!1)}})()},[e]);const u=g.useMemo(()=>{const Q=E0(c==null?void 0:c.status);return[{label:"Applied",done:!0},{label:"Shortlisted",done:!!c},{label:"Interview",done:!!c},{label:"Result",done:Q==="selected"||Q==="rejected"}]},[c]),m=async()=>{var Q,W;if(c){i(!0),o("");try{await q.post(`/v1/interviews/${c.id}/start`),t(`/interviews/${c.id}`)}catch(L){o(((W=(Q=L==null?void 0:L.response)==null?void 0:Q.data)==null?void 0:W.detail)||"Interview is not available yet. Please try again later.")}finally{i(!1)}}};if(r)return n.jsx("div",{className:"text-gray-600",children:"Loading interview..."});if(l)return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 px-4 py-2 rounded",children:l}),n.jsx("button",{type:"button",onClick:()=>t("/candidate/my-interviews"),className:"text-sm text-purple-600 font-semibold",children:"Back to My Interviews"})]});if(!c)return null;const f=b7e(c.status),y=_7e(c.scheduled_at,c.duration_seconds),x=y.isBefore,p=y.isAfter,h=f==="Completed"||f==="Cancelled"||f==="Selected"||f==="Not Selected",v=!x&&!p&&!h&&c.mode!=="in_person"&&(E0(c.status)==="scheduled"||E0(c.status)==="in_progress"),b=h?f:x?`Available at ${CI(c.scheduled_at)}`:p?"Interview Window Closed":E0(c.status)==="in_progress"?"Resume Interview":c.mode==="ai_chat"?"Start Interview":c.mode==="in_person"?"In Person":"Join Meet",j=((S=(k=c==null?void 0:c.submission)==null?void 0:k.job)==null?void 0:S.title)||"Interview",_=((T=(E=c==null?void 0:c.submission)==null?void 0:E.job)==null?void 0:T.company_name)||"Company",N=((C=(A=c==null?void 0:c.submission)==null?void 0:A.recruiter)==null?void 0:C.full_name)||((O=(P=c==null?void 0:c.submission)==null?void 0:P.recruiter)==null?void 0:O.email)||"--",w=(F=(R=c==null?void 0:c.submission)==null?void 0:R.job)==null?void 0:F.description;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:j}),n.jsx("p",{className:"text-sm text-gray-500",children:_})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${y7e[f]||"bg-gray-100 text-gray-700"}`,children:f})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Recruiter"}),n.jsx("p",{className:"font-semibold text-gray-900",children:N})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Interview Mode"}),n.jsx("p",{className:"font-semibold text-gray-900",children:j7e(c.mode)})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Scheduled At"}),n.jsx("p",{className:"font-semibold text-gray-900",children:CI(c.scheduled_at)})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-gray-500",children:"Status"}),n.jsx("p",{className:"font-semibold text-gray-900",children:f})]})]}),(c.meeting_link||c.location||c.notes)&&n.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-3 text-sm",children:[c.meeting_link&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Meeting Link"}),n.jsx("a",{href:c.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 font-semibold break-all",children:c.meeting_link})]}),c.location&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Location"}),n.jsx("p",{className:"font-semibold text-gray-900",children:c.location})]}),c.notes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Instructions"}),n.jsx("p",{className:"text-gray-700",children:c.notes})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",onClick:()=>t("/candidate/my-interviews"),className:"px-4 py-2 rounded border text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Back to My Interviews"}),c.mode==="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>v?m():null,disabled:!v||a,className:`px-4 py-2 rounded text-sm font-semibold ${v?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:a?"Starting...":b}),c.mode!=="ai_chat"&&n.jsx("button",{type:"button",onClick:()=>{v&&c.meeting_link&&window.open(c.meeting_link,"_blank","noopener")},disabled:!v,className:`px-4 py-2 rounded text-sm font-semibold ${v?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:b})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Status Timeline"}),n.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:u.map(Q=>n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Q.done?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"}`,children:Q.label},Q.label))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Job Description"}),n.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line border rounded-lg p-4 bg-gray-50",children:w||"Description not available."})]})]})}const N7e="modulepreload",k7e=function(e){return"/"+e},AI={},sj=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=k7e(c),c in AI)return;AI[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":N7e,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((f,y)=>{m.addEventListener("load",f),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ja=(...e)=>{const t=new Set(["n/a","na","none","null","undefined","unknown","unassigned","--","","-"]);for(const r of e){if(r==null)continue;const s=String(r).trim();if(s&&!t.has(s.toLowerCase()))return s}return""},S7e=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t:t==null?void 0:t.name).filter(Boolean):typeof e=="string"?e.split(/,|;/).map(t=>t.trim()).filter(Boolean):[],C7e=(e="")=>String(e||"").split(/\s+/).filter(Boolean).slice(0,2).map(t=>t.charAt(0).toUpperCase()).join(""),A7e=(e="")=>String(e||"").trim().toLowerCase(),EI=(e="")=>{const t=A7e(e);return t.includes("excel")?"candidate-card-premium__source-badge--excel":t.includes("bulk")?"candidate-card-premium__source-badge--bulk":"candidate-card-premium__source-badge--default"},E7e=(e="")=>{const t=String(e||"").trim().toLowerCase();if(!t||t==="n/a"||t==="na")return"candidate-card-premium__notice--unknown";if(t.includes("immediate")||t==="0"||t.includes("0 day"))return"candidate-card-premium__notice--immediate";const r=t.match(/\d+/),s=r?Number(r[0]):NaN;return Number.isFinite(s)?s<=15?"candidate-card-premium__notice--short":s<=45?"candidate-card-premium__notice--medium":"candidate-card-premium__notice--long":"candidate-card-premium__notice--unknown"},T7e=e=>{const t=["candidate-card-premium__skill--blue","candidate-card-premium__skill--teal","candidate-card-premium__skill--violet","candidate-card-premium__skill--indigo"];return t[e%t.length]},P7e=new Set(["","new","applied","sourced","verified"]),O7e=new Set(["called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","shortlisted"]),R7e=new Set(["am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client"]),L7e=new Set(["client_viewed","client_shortlisted","client_hold","client_rejected"]),I7e=new Set(["sent_to_am","am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client","client_viewed","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined"]);function F7e({candidate:e,profile:t,workflowMeta:r,selectable:s=!1,selected:a=!1,onSelect:i,onViewDetails:l}){var W,L,I,K,D,Y,re,B,G,ce,ae,fe,ne,he,M,Se,me,Pe,ue,ye,Ye,lt,xe,Ae,$e,Me,Fe,We,Ze,pt,Ve,Je,Ke,gt,At,Lt,Bt,ar,er,Be,xt;const[o,c]=g.useState(""),d=(t==null?void 0:t.id)||(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.candidate_id),u=ja(t==null?void 0:t.name,e==null?void 0:e.full_name,e==null?void 0:e.name,"Unknown"),m=ja(t==null?void 0:t.designation,t==null?void 0:t.currentRole,e==null?void 0:e.current_designation,e==null?void 0:e.designation,e==null?void 0:e.current_role,"Not specified"),f=ja(r==null?void 0:r.roleName,e==null?void 0:e.assignment_role,e==null?void 0:e.requirement_title,e==null?void 0:e.job_title,e==null?void 0:e.applied_role,e==null?void 0:e.applied_for,(W=e==null?void 0:e.requirement)==null?void 0:W.title,(L=e==null?void 0:e.job)==null?void 0:L.title,t==null?void 0:t.jobTitle,t==null?void 0:t.jobTitle,m),y=ja(t==null?void 0:t.totalExperience,e==null?void 0:e.experience_years,e==null?void 0:e.total_experience,"N/A"),x=ja(t==null?void 0:t.noticePeriod,"N/A"),p=ja(t==null?void 0:t.phone,e==null?void 0:e.phone,e==null?void 0:e.phone_number,"N/A"),h=ja(t==null?void 0:t.email,e==null?void 0:e.email,"N/A"),v=ja(t==null?void 0:t.location,t==null?void 0:t.city,e==null?void 0:e.location,"N/A"),b=ja(e==null?void 0:e.source,"Portal"),j=S7e(t==null?void 0:t.skills),_=j.slice(0,4),N=Math.max(0,j.length-_.length),w=ja(t==null?void 0:t.avatarUrl,t==null?void 0:t.photoUrl,e==null?void 0:e.avatar_url,e==null?void 0:e.photo_url,e==null?void 0:e.profile_photo),k=ja(r==null?void 0:r.recruiterName,e==null?void 0:e.recruiter_name),S=ja(r==null?void 0:r.amName,e==null?void 0:e.assigned_by_name,e==null?void 0:e.assigned_by,e==null?void 0:e.submitted_to_am_name,e==null?void 0:e.am_name,(I=t==null?void 0:t.accountManager)==null?void 0:I.name,e==null?void 0:e.am_name,e==null?void 0:e.account_manager_name,e==null?void 0:e.accountManagerName,(K=e==null?void 0:e.account_manager)==null?void 0:K.name,(D=e==null?void 0:e.account_manager)==null?void 0:D.am_name,(Y=e==null?void 0:e.am)==null?void 0:Y.name,(re=e==null?void 0:e.am)==null?void 0:re.am_name,(B=e==null?void 0:e.submission)==null?void 0:B.account_manager_name,(ce=(G=e==null?void 0:e.submission)==null?void 0:G.account_manager)==null?void 0:ce.name,(ae=e==null?void 0:e.requirement)==null?void 0:ae.account_manager_name,(ne=(fe=e==null?void 0:e.requirement)==null?void 0:fe.account_manager)==null?void 0:ne.name,(he=e==null?void 0:e.job)==null?void 0:he.account_manager_name,(Se=(M=e==null?void 0:e.job)==null?void 0:M.account_manager)==null?void 0:Se.name),E=ja(r==null?void 0:r.clientName,e==null?void 0:e.client_name,e==null?void 0:e.client_display_name,e==null?void 0:e.clientName,e==null?void 0:e.company_name,e==null?void 0:e.companyName,(me=e==null?void 0:e.client)==null?void 0:me.name,(Pe=e==null?void 0:e.client)==null?void 0:Pe.client_name,(ue=e==null?void 0:e.client)==null?void 0:ue.company_name,(ye=e==null?void 0:e.submission)==null?void 0:ye.client_name,(lt=(Ye=e==null?void 0:e.submission)==null?void 0:Ye.client)==null?void 0:lt.name,(Ae=(xe=e==null?void 0:e.submission)==null?void 0:xe.client)==null?void 0:Ae.client_name,(Me=($e=e==null?void 0:e.submission)==null?void 0:$e.client)==null?void 0:Me.company_name,(Fe=e==null?void 0:e.requirement)==null?void 0:Fe.client_name,(Ze=(We=e==null?void 0:e.requirement)==null?void 0:We.client)==null?void 0:Ze.name,(Ve=(pt=e==null?void 0:e.requirement)==null?void 0:pt.client)==null?void 0:Ve.client_name,(Ke=(Je=e==null?void 0:e.requirement)==null?void 0:Je.client)==null?void 0:Ke.company_name,(gt=e==null?void 0:e.job)==null?void 0:gt.client_name,(At=e==null?void 0:e.job)==null?void 0:At.clientName,(Bt=(Lt=e==null?void 0:e.job)==null?void 0:Lt.client)==null?void 0:Bt.name,(er=(ar=e==null?void 0:e.job)==null?void 0:ar.client)==null?void 0:er.client_name,(xt=(Be=e==null?void 0:e.job)==null?void 0:Be.client)==null?void 0:xt.company_name),T=ja(r==null?void 0:r.actedBy,e==null?void 0:e.updated_by_name,e==null?void 0:e.submitted_by_name,e==null?void 0:e.recruiter_name),A=String((r==null?void 0:r.statusRaw)||(t==null?void 0:t.status)||(e==null?void 0:e.status)||"").trim().toLowerCase();P7e.has(A);const C=O7e.has(A),P=R7e.has(A),O=L7e.has(A),F=I7e.has(A)?[{key:"status",className:O?"candidate-card-premium__action-tag--client":P?"candidate-card-premium__action-tag--am":C?"candidate-card-premium__action-tag--recruiter":"candidate-card-premium__action-tag--status",label:Gs(A),detailTitle:O?"Client Action":P?"Account Manager Action":C?"Recruiter Action":"Status Update"}]:[],Q=g.useMemo(()=>F.find(mt=>mt.key===o)||null,[F,o]);return n.jsxs("div",{className:"candidate-card--premium",children:[n.jsxs("div",{className:"candidate-card-premium__header",children:[n.jsxs("div",{className:"candidate-card-premium__header-left",children:[s&&n.jsx("label",{className:"candidate-card-premium__select",children:n.jsx("input",{type:"checkbox",checked:a,onChange:()=>i==null?void 0:i(d),"aria-label":`Select ${u}`})}),n.jsx("div",{className:"candidate-card-premium__avatar-shell",children:n.jsx("div",{className:"candidate-card-premium__avatar-ring",children:w?n.jsx("img",{src:w,alt:u,className:"candidate-card-premium__avatar-image"}):n.jsx("span",{className:"candidate-card-premium__avatar-initials",children:C7e(u)})})}),n.jsxs("div",{className:"candidate-card-premium__identity",children:[n.jsx("h3",{className:"candidate-card-premium__name",children:u}),n.jsx("p",{className:"candidate-card-premium__role",children:m}),n.jsx("span",{className:"candidate-card-premium__experience-badge",children:y})]})]}),n.jsxs("div",{className:"candidate-card-premium__header-right",children:[n.jsxs("span",{className:`candidate-card-premium__source-badge ${EI(b)}`,title:b,children:[n.jsx("span",{className:"candidate-card-premium__source-icon",children:EI(b).includes("--excel")?n.jsx(U4e,{}):n.jsx(o4,{})}),n.jsx("span",{className:"candidate-card-premium__source-text",children:b||"Portal"})]}),F.length>0&&n.jsx("div",{className:"candidate-card-premium__action-tags candidate-card-premium__action-tags--header",children:F.map(mt=>n.jsx("button",{type:"button",className:`candidate-card-premium__action-tag ${mt.className} ${o===mt.key?"candidate-card-premium__action-tag--active":""}`,onClick:()=>c(It=>It===mt.key?"":mt.key),children:mt.label},mt.key))}),Q&&n.jsxs("div",{className:"candidate-card-premium__action-detail",children:[n.jsx("div",{className:"candidate-card-premium__action-detail-title",children:Q.detailTitle}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Client: ",E||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Role: ",f||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Account Manager: ",S||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Recruiter: ",k||"N/A"]}),n.jsxs("div",{className:"candidate-card-premium__action-detail-line",children:["Used by Recruiter: ",k||T||"N/A"]})]})]})]}),n.jsxs("div",{className:"candidate-card-premium__content",children:[n.jsxs("span",{className:`candidate-card-premium__notice ${E7e(x)}`,children:[n.jsx("span",{className:"candidate-card-premium__notice-icon",children:n.jsx(N4e,{size:10,fill:"currentColor"})}),x]}),n.jsxs("div",{className:"candidate-card-premium__contact-row",children:[n.jsxs("a",{href:`tel:${p}`,className:"candidate-card-premium__contact-item",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx(V1,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text",children:p})]}),n.jsxs("a",{href:`mailto:${h}`,className:"candidate-card-premium__contact-item",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx(uu,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text candidate-card-premium__contact-text--email",children:h})]})]}),n.jsx("div",{className:"candidate-card-premium__contact-row",children:n.jsxs("span",{className:"candidate-card-premium__contact-item candidate-card-premium__contact-item--muted",children:[n.jsx("span",{className:"candidate-card-premium__contact-icon",children:n.jsx($c,{})}),n.jsx("span",{className:"candidate-card-premium__contact-text",children:v})]})}),n.jsx("div",{className:"candidate-card-premium__skills",children:_.length>0?n.jsxs(n.Fragment,{children:[_.map((mt,It)=>n.jsx("span",{className:`candidate-card-premium__skill-chip ${T7e(It)}`,children:mt},`${d}-${mt}-${It}`)),N>0&&n.jsxs("span",{className:"candidate-card-premium__skill-more",children:["+",N," more"]})]}):n.jsx("span",{className:"candidate-card-premium__skill-empty",children:"No skills added"})}),n.jsx("div",{className:"candidate-card-premium__footer",children:n.jsx("button",{type:"button",className:"candidate-card-premium__view-btn",onClick:()=>l==null?void 0:l(e),children:"View Profile"})})]})]})}const Ul=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,D7e=()=>{const e="https://ats-10-iyol.onrender.com";try{return new URL(e).origin}catch{return String(e).replace(/\/+$/,"")}},fb=e=>{if(!Ul(e))return null;const t=String(e).trim();if(!t)return null;if(/^https?:\/\//i.test(t)||t.startsWith("blob:")||t.startsWith("data:"))return t;const r=t.replace(/\\/g,"/"),s=r.toLowerCase();let a=r;const i=s.indexOf("/uploads/"),l=s.indexOf("uploads/");return i>=0?a=r.slice(i):l>=0?a=`/${r.slice(l)}`:r.startsWith("/")||(a=`/${r}`),`${D7e()}${a}`},Pt=(...e)=>{for(const t of e)if(Ul(t))return t;return null},cA=new Set(["engineer","developer","manager","analyst","consultant","architect","lead","specialist","executive","officer","intern","designer","administrator","devops","qa","tester","associate","director","head","coordinator","principal","staff","recruiter","account","am","hr","sap","abap"]),$7e=new Set(["worked","working","experience","knowledge","responsible","responsibilities","project","projects","ticket","tickets","clarification","issues","resolution","candidate","college","university","payroll","involved","support"]),M7e=new Set(["strong","knowledge","tickets","issues","clarification","resolution","experience","resume","profile","summary","objective","skills","education","work","project","projects","candidate"]),B7e=new Set(["india","karnataka","mysore","bengaluru","bangalore","mumbai","delhi","hyderabad","chennai","pune","noida","gurgaon","remote","onsite","hybrid","city","state"]),U7e=new Set(["worked","working","experience","knowledge","responsible","responsibilities","project","projects","ticket","tickets","clarification","issues","resolution","candidate","college","university","payroll","involved","support"]),TI=new Set(["and","or","the","of","in","for","to","at","by","with","on","from","as","other","identifying","travel","ensure","public","involvement","involved","team","enhancements","correction","personal","good","defined","executed","changes","responsible","productivity","user","upgrade","smart","preparing","post","functional","prepared","organizational","implementation","knowledge","groups","role","actively","go","suggestion","positive","provide","escalating","handle","requirement","standards","handling","preparation","screen","end","medical","configuring","assist","info","providing","testing","coordinating","working","client","supporting","problem","cross","having","define","lead","managing","worked","writing","area","day","unit","modules","applications","module","project","projects","resume","candidate","profile","summary","technical","experience","professional","clarification","issues","ticket","tickets","support","location","region","country","south","north","east","west"]),z7e=new Set(["jan","january","feb","february","mar","march","apr","april","may","jun","june","jul","july","aug","august","sep","sept","september","oct","october","nov","november","dec","december","q1","q2","q3","q4"]),W7e={successfactors:"SAP SuccessFactors","success factors":"SAP SuccessFactors",fiori:"SAP Fiori",fieldglass:"FieldGlass","field glass":"FieldGlass",onb:"SAP ONB",cats:"SAP CATS",ess:"SAP ESS/MSS",mss:"SAP ESS/MSS","ess/mss":"SAP ESS/MSS",rmk:"SAP RMK",fico:"SAP FICO",payroll:"Payroll Processing",attendance:"Attendance Management",compensation:"Compensation & Benefits",workflow:"Workflow Management",abap:"ABAP"},hV=e=>String(e||"").toLowerCase().replace(/&/g," and ").replace(/[^\w#+/.\- ]+/g," ").replace(/\s+/g," ").trim(),V7e=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>70||t.includes("@")||/https?:\/\//i.test(t))return!1;const r=t.toLowerCase().split(/[\s/,&-]+/).map(s=>s.trim()).filter(Boolean);return!(!r.length||r.length>6||r.some(s=>/^(19|20)\d{2}$/.test(s))||r.some(s=>/^\d+$/.test(s))||r.some(s=>z7e.has(s))||r.every(s=>TI.has(s))||r.length===1&&TI.has(r[0]))},H7e=e=>{const t=String(e||"").trim();if(!V7e(t))return null;const r=hV(t);return W7e[r]||t},PI=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g,"").trim(),pV=e=>String(e||"").toLowerCase().split(/[\s,;/\\|-]+/).map(t=>t.trim()).filter(Boolean),xV=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>60||t.includes("/")||t.includes(":")||/\d/.test(t))return!1;const r=t.split(/\s+/).filter(Boolean);if(r.length===0||r.length>4)return!1;const s=r.map(a=>a.toLowerCase());return s.some(a=>M7e.has(a))||s.some(a=>cA.has(a))?!1:r.every(a=>/^[A-Za-z.'-]+$/.test(a))},gV=e=>{const t=String(e||"").trim();if(!t||t.length>60||t.includes("@"))return!1;const r=pV(t);if(r.length===0||r.length>6||r.some(i=>U7e.has(i)))return!1;const s=r.some(i=>cA.has(i));return!!(r.some(i=>B7e.has(i))&&!s||t.includes(",")&&!s&&r.length<=4||!s&&r.length<=3&&!/\d/.test(t))},q7e=e=>{const t=String(e||"").trim();if(!t||t.length<2||t.length>120||t.includes("@")||/[.!?]/.test(t)&&t.split(/\s+/).length>4||/\b(19|20)\d{2}\b/.test(t))return!0;const r=pV(t);return r.length===0||r.length>8||r.some(a=>$7e.has(a))?!0:!r.some(a=>cA.has(a))},G7e=e=>{if(!Ul(e))return null;const t=String(e).replace(/\s+/g," ").trim();return t&&gV(t)?t:null},Z_=(e=[])=>{for(const t of e){const r=G7e(t);if(r)return r}return null},OI=(e=[],t=[])=>{const r=new Set(t.map(s=>PI(s)).filter(Boolean));for(const s of e){if(!Ul(s))continue;const a=String(s).trim();if(!a)continue;const i=PI(a);if(i&&!r.has(i)&&!gV(a)&&!q7e(a))return a}return null},J7e=e=>{const t=String(e||"").trim();if(!t||!t.includes("@"))return null;const s=(t.split("@")[0]||"").replace(/\d+/g," ").replace(/[._-]+/g," ").replace(/\s+/g," ").trim();if(!s)return null;const a=s.split(" ").filter(Boolean).slice(0,4).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ");return xV(a)?a:null},K7e=e=>{if(!e||typeof e!="object")return{};const t=Pt(e.parsed_resume,e.parsedResume),r=t&&typeof t=="object"?Pt(t.data,t.parsed_data,t.parsedData,t):null,s=Pt(e.parsed_data_json,e.parsedDataJson),a=Pt(s,r,{});return a&&typeof a=="object"?a:{}},yV=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},Q_=e=>{const t=yV(e);return t?t.toLocaleDateString("en-US"):"N/A"},X7e=e=>{if(!Ul(e))return"";const t=Number(e);return Number.isNaN(t)?String(e):t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(1)} GB`},Y7e=e=>Ul(e)?typeof e=="number"?`${e} yrs`:typeof e=="string"&&e.match(/^\d+(\.\d+)?$/)?`${e} yrs`:e:null,Z7e=e=>Ul(e)?typeof e=="number"?e===0?"Immediate":`${e} days`:typeof e=="string"&&e.match(/^\d+$/)?e==="0"?"Immediate":`${e} days`:e:null,RI=(e,t)=>Ul(e)?t?typeof e=="number"?new Intl.NumberFormat("en-IN").format(e):String(e):"[REDACTED]":"N/A",Q7e=e=>{if(!e)return[];const t=Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(s=>s.trim()).filter(Boolean):[],r=new Map;return t.forEach(s=>{let a="",i="Intermediate";typeof s=="string"?a=s:s&&typeof s=="object"&&(a=s.name||s.skill||s.title||"",i=s.level||s.proficiency||"Intermediate");const l=H7e(a);if(!l)return;const o=hV(l);!o||r.has(o)||r.set(o,{name:l,level:i})}),Array.from(r.values())},eMe=e=>e?(Array.isArray(e)?e:[e]).map(r=>{if(typeof r=="string")return{name:r,organization:"",expiryDate:null,isExpiring:!1,credentialId:"",credentialUrl:""};const s=r.expiry_date||r.expiryDate,a=yV(s),i=a?a.getTime()-Date.now()<=30*24*60*60*1e3&&a.getTime()>Date.now():!1;return{name:r.name||r.title||"Certification",organization:r.organization||r.issuer||"",expiryDate:s,isExpiring:i,credentialId:Pt(r.credential_id,r.credentialId,r.id),credentialUrl:Pt(r.credential_url,r.credentialUrl,r.url)}}).filter(r=>r&&r.name):[],tMe=e=>e?(Array.isArray(e)?e:[e]).map(r=>typeof r=="string"?{name:r,shortDesc:"",stack:[]}:{name:r.name||r.title||"Project",shortDesc:r.short_desc||r.shortDesc||r.summary||"",stack:r.stack||r.technologies||r.tech||[]}).filter(r=>r&&r.name):[],rMe=e=>{if(Array.isArray(e.education_history)&&e.education_history.length>0){const t=e.education_history[0],r=Pt(t.cgpa,e.cgpa),s=Pt(t.percentage,e.percentage);return{degree:t.degree||t.title||"",institution:t.institution||t.university||"",college:t.college||t.institution||t.university||"",year:t.end_year||t.year||"",cgpa:r,percentage:s}}if(Array.isArray(e.education)&&e.education.length>0){const t=e.education[0],r=Pt(t.cgpa,e.cgpa),s=Pt(t.percentage,e.percentage);return{degree:t.degree||t.title||"",institution:t.institution||t.university||"",college:t.college||t.institution||t.university||"",year:t.end_year||t.year||"",cgpa:r,percentage:s}}if(e.education&&typeof e.education=="object"){const t=Pt(e.education.cgpa,e.cgpa),r=Pt(e.education.percentage,e.percentage);return{degree:e.education.degree||e.education.title||"",institution:e.education.institution||e.education.university||"",college:e.education.college||e.education.institution||e.education.university||"",year:e.education.year||e.education.graduation_year||"",cgpa:t,percentage:r}}return{degree:e.education||e.highest_degree||e.degree||"",institution:e.institution||e.university||e.college||"",college:e.college||e.institution||e.university||"",year:e.graduation_year||e.year||"",cgpa:e.cgpa||"",percentage:e.percentage||""}},Bs=e=>Pt(e==null?void 0:e.apiId,e==null?void 0:e.id,e==null?void 0:e._id,e==null?void 0:e.candidate_id),eu=(e,t=!0)=>{var A,C,P,O,R,F,Q;if(!e)return null;const r=Bs(e),s=r||e.public_id||e.email||e.phone||"",a=K7e(e),i=Pt(e.work_history,e.employment_history,e.experience_history,a.work_history,a.work_experience,a.experience,[]),l=Array.isArray(i)&&i.length>0?i[0]||{}:{},o=[e.current_location,e.currentLocation,e.location,e.city,e.current_city,e.currentCity,e.preferred_location,e.preferredLocation,a.current_location,a.currentLocation,a.location,a.city,a.current_city,a.currentCity,a.preferred_location,a.preferredLocation],c=OI([e.current_role,e.currentRole,e.current_job_title,e.currentJobTitle,e.current_designation,e.currentDesignation,e.designation,e.designation_title,e.role,e.title,a.current_role,a.currentRole,a.current_job_title,a.currentJobTitle,a.current_designation,a.currentDesignation,a.designation,a.designation_title,a.role,l.role,l.designation,l.title],o),d=OI([e.current_designation,e.currentDesignation,e.current_job_title,e.currentJobTitle,e.designation,e.designation_title,e.current_role,e.currentRole,e.role,e.title,a.current_designation,a.currentDesignation,a.current_job_title,a.currentJobTitle,a.current_role,a.currentRole,a.designation,a.designation_title,a.role,l.role,l.designation,l.title],o),u=Q7e(Pt(e.skills,a.skills,e.skill_set,e.top_skills)),m=eMe(Pt(e.certifications,a.certifications,e.certifications_text,a.certifications_text)),f=tMe(Pt(e.projects,a.projects)),y=rMe({...a,...e,education:Pt(e.education,a.education),education_history:Pt(e.education_history,a.education_history)}),x=Pt(e.relevance_score,e.match_score,e.match_percentage,e.semantic_score);let p=Number(x);Number.isNaN(p)&&(p=null);const h=Pt(e.current_ctc,a.current_ctc,e.current_salary,e.currentCTC,e.currentCtc,e.currentSalary,e.current_compensation,e.currentCompensation,e.ctc,a.currentCTC,a.currentCtc,a.current_salary,a.currentSalary,a.current_compensation,a.currentCompensation,a.ctc,l.current_ctc,l.ctc,l.salary,l.compensation,l.package),v=Pt(e.expected_ctc,a.expected_ctc,e.expected_salary,e.expectedCTC,e.expectedCtc,e.expectedSalary,e.expected_compensation,e.expectedCompensation,e.salary_expectation,e.salaryExpectation,a.expectedCTC,a.expectedCtc,a.expected_salary,a.expectedSalary,a.expected_compensation,a.expectedCompensation,a.salary_expectation,a.salaryExpectation,l.expected_ctc,l.expectedCtc),b=Pt(e.notice_period,e.notice_period_days,a.notice_period,a.notice_period_days,e.noticePeriod,e.noticePeriodDays),j=Pt(e.resume_size,e.resumeSize),_=Pt(e.resume_updated_at,e.resumeUpdatedAt,e.updated_at,e.updatedAt),N=[];Ul(j)&&N.push(X7e(j)),Ul(_)&&N.push(`Updated ${Q_(_)}`);const w=Z_([e.current_location,e.location,e.city,a.current_location,a.location,a.city]),k=Z_([e.city,e.current_city,e.current_location,a.city,a.current_location,a.location]),S=Z_([e.preferred_location,e.preferredLocation,a.preferred_location,a.preferredLocation]),E=Pt(e.email,a.email),T=Pt([e.full_name,e.name,e.fullName,a.full_name,a.name,a.fullName].find(W=>xV(W)),J7e(E),"Unnamed Candidate");return{id:s,apiId:r,name:T,gender:Pt(e.gender,a.gender),dateOfBirth:Pt(e.date_of_birth,e.dob,e.dateOfBirth,a.date_of_birth,a.dob,a.dateOfBirth),nationality:Pt(e.nationality,a.nationality),isVerified:!!Pt(e.is_verified,e.verified,e.profile_verified),phone:Pt(e.phone,e.mobile,e.phone_number,a.phone,a.mobile),mobileNumber:Pt(e.mobile,e.phone,e.phone_number,a.phone,a.mobile),email:Pt(e.email,a.email),location:w,city:k||w,pincode:Pt(e.pincode,e.pin_code,e.zipcode,a.pincode),currentAddress:Pt(e.current_address,e.currentAddress,e.address,a.current_address,a.currentAddress),permanentAddress:Pt(e.permanent_address,e.permanentAddress,a.permanent_address,a.permanentAddress),preferredLocation:S,languagesKnown:Pt(e.languages_known,e.languagesKnown,e.languages,a.languages,a.languages_known),photoUrl:fb(Pt(e.photo_url,e.avatar_url,e.profile_picture,e.photo,a.photo_url,a.photo)),resumeUrl:fb(Pt(e.resume_url,e.resumeUrl,a.resume_url,a.resumeUrl)),resumeMeta:N.join(" | ")||"Resume meta not available",currentRole:c,designation:d,currentCompany:Pt(e.current_employer,e.current_company,a.current_company,a.current_employer),totalExperience:Y7e(Pt(e.total_experience,e.experience_years,e.experience,a.total_experience,a.experience_years)),employmentStatus:Pt(e.employment_status,e.employmentStatus),professionalHeadline:Pt(e.professional_headline,e.headline,e.profile_headline),preferredWorkMode:Pt(e.preferred_work_mode,e.preferredWorkMode,e.work_mode,e.workMode),willingToRelocate:Pt(e.willing_to_relocate,e.ready_to_relocate,e.willingToRelocate,e.readyToRelocate,e.ready_for_relocation,e.readyForRelocation,e.open_to_relocate,e.openToRelocate,a.willing_to_relocate,a.ready_to_relocate,a.willingToRelocate,a.readyToRelocate,a.ready_for_relocation,a.readyForRelocation,a.open_to_relocate,a.openToRelocate),readyToRelocate:Pt(e.ready_to_relocate,e.willing_to_relocate,e.readyToRelocate,e.willingToRelocate,e.ready_for_relocation,e.readyForRelocation,e.open_to_relocate,e.openToRelocate,a.ready_to_relocate,a.willing_to_relocate,a.readyToRelocate,a.willingToRelocate,a.ready_for_relocation,a.readyForRelocation,a.open_to_relocate,a.openToRelocate),travelAvailability:Pt(e.travel_availability,e.travelAvailability),salaryNegotiable:Pt(e.salary_negotiable,e.salaryNegotiable),careerSummary:Pt(e.career_summary,e.summary,e.professional_summary,e.professionalSummary,a.professional_summary,a.professionalSummary,a.summary),availabilityStatus:Pt(e.availability_status,e.availabilityStatus),availableFrom:Pt(e.available_from,e.availableFrom),requiresSponsorship:Pt(e.requires_sponsorship,e.requiresSponsorship),noticePeriod:Z7e(b),currentCtcDisplay:RI(h,t),expectedCtcDisplay:RI(v,t),skills:u,certifications:m,education:y,workHistory:i,educationHistory:Pt(e.education_history,e.education_details,a.education_history,a.education_list,a.education,[]),projects:f,workAuthorization:Pt(e.work_authorization,e.visa_status,e.citizenship),social:{linkedin:Pt(e.linkedin_url,e.linkedin,a.linkedin_url,a.linkedin),github:Pt(e.github_url,e.github,a.github_url,a.github),portfolio:Pt(e.portfolio_url,e.portfolio,a.portfolio_url,a.portfolio)},jobTitle:Pt(e.job_title,e.applied_role,e.applied_for,e.appliedJob,(A=e.job)==null?void 0:A.title,a.applied_for,a.applied_role),accountManager:{id:Pt(e.account_manager_id,(C=e.account_manager)==null?void 0:C.id,(P=e.account_manager)==null?void 0:P.am_id),name:Pt(e.account_manager_name,(O=e.account_manager)==null?void 0:O.name,(R=e.account_manager)==null?void 0:R.am_name),email:Pt(e.account_manager_email,(F=e.account_manager)==null?void 0:F.email,(Q=e.account_manager)==null?void 0:Q.am_email)},status:Pt(e.status,e.application_status,"new"),appliedDate:Q_(Pt(e.applied_date,e.appliedAt,e.created_at)),updatedAt:Q_(Pt(e.updated_at,e.updatedAt)),matchScore:p,keyAchievement:Pt(e.key_achievement,e.highlight),relevantYears:Pt(e.relevant_experience_years,e.relevant_years)}},yd=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,Ms=(...e)=>{for(const t of e)if(yd(t))return t;return null},wa=(e,t="N/A")=>yd(e)?Array.isArray(e)?e.length?e.join(", "):t:e:t,vV=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},nMe=e=>{const t=vV(e);return t?t.toLocaleDateString("en-US"):"N/A"},sMe=e=>{const t=vV(e);return t?t.toLocaleString("en-US"):"N/A"},p0=e=>e?Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[]:[],aMe=e=>{if(e===!0)return"Yes";if(e===!1)return"No";if(typeof e=="number"){if(e===1)return"Yes";if(e===0)return"No"}if(typeof e=="string"){const t=e.trim().toLowerCase();return["yes","y","true","1"].includes(t)?"Yes":["no","n","false","0"].includes(t)?"No":e.trim()}return e},LI=e=>e==="N/A"||!yd(e)?null:e,iMe=e=>{const t=String(e||"").trim();return t?t.startsWith("blob:")||t.startsWith("data:")?t:encodeURI(t):""},Gc=({id:e,title:t,children:r,actions:s=null})=>n.jsxs("section",{id:e,className:"candidate-detail__section",children:[n.jsxs("div",{className:"candidate-detail__section-header",children:[n.jsx("h3",{children:t}),s]}),n.jsx("div",{className:"candidate-detail__section-body",children:r})]}),ew=({fields:e})=>n.jsx("div",{className:"candidate-detail__grid",children:e.map(t=>n.jsxs("div",{className:"candidate-detail__field",children:[n.jsx("div",{className:"candidate-detail__field-label",children:t.label}),n.jsx("div",{className:"candidate-detail__field-value",children:wa(t.value)})]},t.label))}),pg=({label:e})=>n.jsx("div",{className:"candidate-detail__empty",children:e}),lMe=["new","applied","sourced","called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","am_viewed","am_shortlisted","am_hold","am_rejected","sent_to_client","client_viewed","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],oMe=[];function aj({candidate:e,profile:t,loading:r,onClose:s,onPreviewResume:a,onScheduleInterview:i,onShortlist:l,onAddNote:o,onSendEmail:c,onOpenFullProfile:d,onOpenFeedback:u,onMessageAm:m,onMessageCandidate:f,customQuickActions:y,onSendToAM:x,onUpdateStatus:p,workflowStatusOptions:h=oMe,hideQuickActions:v=!1,hideStatusControls:b=!1,hideSendToAMAction:j=!1,hideScheduleInterviewAction:_=!1,hideOpenFullProfileAction:N=!1,contextNote:w="",quickActionsDisabled:k=!1,quickActionsDisabledMessage:S=""}){var lt,xe,Ae,$e,Me,Fe,We,Ze,pt,Ve,Je,Ke,gt,At,Lt,Bt,ar,er,Be,xt,mt,It,Yt,Ne,st,qe,ft,kt,Oe,je,Re,oe,Ue,Ge,ie,ge,ut,Z,H,V,ee,X,te,ke;const E=g.useRef(null),[T,A]=g.useState(""),[C,P]=g.useState(!1),[O,R]=g.useState(""),[F,Q]=g.useState(!1),[W,L]=g.useState({type:"",text:""}),I=g.useMemo(()=>[{id:"notice",label:"Notice Period"},{id:"personal",label:"Personal Information"},{id:"professional",label:"Professional Information"},{id:"education",label:"Education Details"},{id:"skills",label:"Skills"},{id:"certifications",label:"Certifications"},{id:"experience",label:"Experience"}],[]),K=g.useMemo(()=>T.trim()?I.filter(ve=>ve.label.toLowerCase().includes(T.trim().toLowerCase())):I,[T,I]);if(g.useEffect(()=>{const ve=J=>{J.key==="Escape"&&s()};return document.addEventListener("keydown",ve),()=>document.removeEventListener("keydown",ve)},[s]),!e||!t)return null;const D=(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.candidate_id)||"",Y=String((t==null?void 0:t.status)||(e==null?void 0:e.status)||"").toLowerCase().trim(),re=g.useMemo(()=>{const ve=new Set;return(h.length?h:lMe.map(be=>({value:be,label:Gs(be)}))).map(be=>{if(typeof be=="string")return{value:be.toLowerCase(),label:Gs(be)};const we=String((be==null?void 0:be.value)||"").toLowerCase().trim();return we?{value:we,label:be.label||Gs(we)}:null}).filter(be=>!be||ve.has(be.value)?!1:(ve.add(be.value),!0))},[h]);g.useEffect(()=>{var J;const ve=Y||((J=re[0])==null?void 0:J.value)||"";R(be=>be===ve?be:ve),L(be=>be.type||be.text?{type:"",text:""}:be)},[D,Y,re]);const B=[{label:"Notice Period",value:t.noticePeriod}],G=[{label:"Name",value:t.name},{label:"Gender",value:t.gender},{label:"DOB",value:yd(t.dateOfBirth)?nMe(t.dateOfBirth):null},{label:"Phone Number",value:t.phone},{label:"Email",value:t.email},{label:"Current Address",value:Ms(t.currentAddress,e.current_address)},{label:"Permanent Address",value:Ms(t.permanentAddress,e.permanent_address)},{label:"City",value:Ms(t.city,e.city)},{label:"Pincode",value:Ms(t.pincode,e.pincode)},{label:"Ready to Relocate",value:aMe(Ms(t.readyToRelocate,t.willingToRelocate,e.ready_to_relocate,e.willing_to_relocate,e.readyToRelocate,e.willingToRelocate,e.open_to_relocate,e.openToRelocate))},{label:"Preferred Location",value:Ms(t.preferredLocation,e.preferred_location)}],ce=[{label:"Designation",value:Ms(t.designation,t.currentRole,e.current_designation,e.currentDesignation,e.current_job_title,e.currentJobTitle,e.designation,e.current_role,e.currentRole,e.role,(xe=(lt=t.workHistory)==null?void 0:lt[0])==null?void 0:xe.role,($e=(Ae=t.workHistory)==null?void 0:Ae[0])==null?void 0:$e.designation,(Fe=(Me=t.workHistory)==null?void 0:Me[0])==null?void 0:Fe.title,(Ze=(We=e.work_history)==null?void 0:We[0])==null?void 0:Ze.role,(Ve=(pt=e.work_history)==null?void 0:pt[0])==null?void 0:Ve.designation,(Ke=(Je=e.work_history)==null?void 0:Je[0])==null?void 0:Ke.title)},{label:"Current CTC",value:LI(Ms(t.currentCtcDisplay,e.current_ctc,e.currentCtc,e.current_salary,e.currentSalary,e.currentCTC,e.ctc,(At=(gt=t.workHistory)==null?void 0:gt[0])==null?void 0:At.current_ctc,(Bt=(Lt=t.workHistory)==null?void 0:Lt[0])==null?void 0:Bt.ctc,(er=(ar=t.workHistory)==null?void 0:ar[0])==null?void 0:er.salary,(xt=(Be=t.workHistory)==null?void 0:Be[0])==null?void 0:xt.compensation,(It=(mt=e.work_history)==null?void 0:mt[0])==null?void 0:It.current_ctc,(Ne=(Yt=e.work_history)==null?void 0:Yt[0])==null?void 0:Ne.ctc,(qe=(st=e.work_history)==null?void 0:st[0])==null?void 0:qe.salary,(kt=(ft=e.work_history)==null?void 0:ft[0])==null?void 0:kt.compensation))},{label:"Expected CTC",value:LI(Ms(t.expectedCtcDisplay,e.expected_ctc,e.expectedCtc,e.expected_salary,e.expectedSalary,e.expectedCTC,e.salary_expectation,e.salaryExpectation))}],ae=p0(Ms(t.educationHistory,e.education_history,e.educationHistory,e.education_details,e.educationDetails)),fe=yd((Oe=t.education)==null?void 0:Oe.degree)||yd((je=t.education)==null?void 0:je.college)||yd((Re=t.education)==null?void 0:Re.institution)?[t.education]:[],ne=ae.length?ae:fe,he=(Array.isArray(t.skills)?t.skills:p0(e.skills)).map(ve=>typeof ve=="string"?ve:(ve==null?void 0:ve.name)||(ve==null?void 0:ve.skill)||(ve==null?void 0:ve.title)||"").filter(Boolean),M=(Array.isArray(t.certifications)?t.certifications:p0(e.certifications)).filter(Boolean),Se=p0(Ms(t.workHistory,e.work_history,e.workHistory,e.employment_history,e.experience_history)),me=async()=>{if(!(!p||!O||F)){Q(!0),L({type:"",text:""});try{const ve=await p(e,O);ve&&ve.ok===!1?L({type:"error",text:ve.message||"Failed to update status"}):L({type:"success",text:`Status updated to ${Gs(O)}`})}catch(ve){L({type:"error",text:(ve==null?void 0:ve.message)||"Failed to update status"})}finally{Q(!1)}}},Pe=ve=>{if(!E.current)return;const J=E.current.querySelector(`#${ve}`);J&&J.scrollIntoView({behavior:"smooth",block:"start"})},ue=e.job_title||t.jobTitle||e.applied_role||e.applied_for||"Not specified",ye=e.account_manager_name||((oe=t.accountManager)==null?void 0:oe.name)||((Ue=e.account_manager)==null?void 0:Ue.name)||((Ge=e.account_manager)==null?void 0:Ge.am_name)||null,Ye=iMe(fb(Ms(t.resumeUrl,e.resume_url,e.resumeUrl,e.resume_path,e.resumePath,(ie=e.parsed_resume)==null?void 0:ie.resume_url,(ge=e.parsed_resume)==null?void 0:ge.resumeUrl,(Z=(ut=e.parsed_resume)==null?void 0:ut.data)==null?void 0:Z.resume_url,(V=(H=e.parsed_resume)==null?void 0:H.data)==null?void 0:V.resumeUrl,(ee=e.parsed_data_json)==null?void 0:ee.resume_url,(X=e.parsed_data_json)==null?void 0:X.resumeUrl,(te=e.parsedDataJson)==null?void 0:te.resume_url,(ke=e.parsedDataJson)==null?void 0:ke.resumeUrl)));return n.jsxs("div",{className:"candidate-detail-modal",role:"dialog","aria-modal":"true","aria-labelledby":"candidate-detail-title",onClick:ve=>{ve.target===ve.currentTarget&&s()},children:[n.jsxs("div",{className:"candidate-detail",children:[n.jsxs("div",{className:"candidate-detail__header",children:[n.jsx("button",{type:"button",className:"candidate-detail__back",onClick:s,children:"Back to cards"}),n.jsxs("div",{className:"candidate-detail__header-main",children:[n.jsx("h2",{id:"candidate-detail-title",children:t.name||"Candidate"}),n.jsxs("div",{className:"candidate-detail__header-meta",children:[n.jsx("span",{className:"candidate-status-badge candidate-status-badge--neutral",children:Gs(t.status)||"Unknown"}),n.jsxs("span",{className:"candidate-detail__job",children:["Applied for: ",ue]}),ye&&n.jsxs("span",{className:"candidate-detail__job",children:["AM: ",ye]})]})]}),n.jsxs("div",{className:"candidate-detail__header-actions",children:[n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>Ye&&window.open(Ye,"_blank"),disabled:!Ye,children:"Download Resume"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>{if(Ye){if(typeof a=="function"){a(Ye,e);return}window.open(Ye,"_blank")}},disabled:!Ye,children:"Preview Resume"})]})]}),n.jsxs("div",{className:"candidate-detail__body",children:[n.jsxs("aside",{className:"candidate-detail__nav",children:[n.jsx("div",{className:"candidate-detail__nav-search",children:n.jsx("input",{type:"text",value:T,onChange:ve=>A(ve.target.value),placeholder:"Search sections"})}),n.jsx("div",{className:"candidate-detail__nav-list",children:K.map(ve=>n.jsx("button",{type:"button",onClick:()=>Pe(ve.id),children:ve.label},ve.id))})]}),n.jsxs("main",{className:"candidate-detail__content",ref:E,children:[r&&n.jsx("div",{className:"candidate-detail__loading",children:"Loading..."}),n.jsx(Gc,{id:"notice",title:"Notice Period",children:n.jsx(ew,{fields:B})}),n.jsx(Gc,{id:"personal",title:"Personal Information",children:n.jsx(ew,{fields:G})}),n.jsx(Gc,{id:"professional",title:"Professional Information",children:n.jsx(ew,{fields:ce})}),n.jsx(Gc,{id:"education",title:"Education Details",actions:d&&!N&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d(e,t),children:"Add Education"}),children:ne.length===0?n.jsx(pg,{label:"No education details available"}):n.jsx("div",{className:"candidate-detail__cards",children:ne.map((ve,J)=>{var be;return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsxs("div",{className:"candidate-detail__card-title",children:["Highest Degree: ",wa(ve.degree||ve.title)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["College Name:"," ",wa(ve.college||ve.institution||ve.university||((be=t.education)==null?void 0:be.college))]}),n.jsx("div",{className:"candidate-detail__card-meta",children:wa(ve.cgpa?`CGPA: ${ve.cgpa}`:ve.percentage?`%: ${ve.percentage}`:null,"CGPA/%: N/A")})]},ve.id||J)})})}),n.jsx(Gc,{id:"skills",title:"Skills",children:he.length===0?n.jsx(pg,{label:"No skills available"}):n.jsx("div",{className:"candidate-detail__chip-row",children:he.map((ve,J)=>n.jsx("span",{className:"candidate-detail__chip",children:ve},`${ve}-${J}`))})}),n.jsx(Gc,{id:"certifications",title:"Certifications",actions:d&&!N&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d(e,t),children:"Add Certification"}),children:M.length===0?n.jsx(pg,{label:"No certifications available"}):n.jsx("div",{className:"candidate-detail__cards",children:M.map((ve,J)=>{const be=ve.credentialId||ve.credential_id||ve.id||null,we=ve.credentialUrl||ve.credential_url||ve.url||null;return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsx("div",{className:"candidate-detail__card-title",children:wa(ve.name||ve.title)}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Credential ID: ",wa(be)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Credential Link:"," ",we?n.jsx("a",{href:we,target:"_blank",rel:"noreferrer",children:"Open Link"}):"N/A"]})]},J)})})}),n.jsx(Gc,{id:"experience",title:"Experience",children:Se.length===0?n.jsx(pg,{label:"No experience details available"}):n.jsx("div",{className:"candidate-detail__cards",children:Se.map((ve,J)=>{if(typeof ve=="string")return n.jsx("div",{className:"candidate-detail__card",children:n.jsx("div",{className:"candidate-detail__card-text",children:ve})},J);const be=p0(Ms(ve.skills_learned,ve.skillsLearnt,ve.skills,ve.technologies,ve.tech_stack,ve.stack));return n.jsxs("div",{className:"candidate-detail__card",children:[n.jsxs("div",{className:"candidate-detail__card-title",children:["Company Worked For:"," ",wa(ve.company||ve.company_name||ve.employer)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Role: ",wa(ve.role||ve.designation||ve.title)]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Project Done:"," ",wa(Ms(ve.project_done,ve.project,ve.project_name,ve.projects))]}),n.jsxs("div",{className:"candidate-detail__card-text",children:["Skills Learnt: ",wa(be)]}),n.jsxs("div",{className:"candidate-detail__card-meta",children:["Years: ",wa(Ms(ve.years,ve.duration_years,ve.total_years,ve.duration))]}),n.jsxs("div",{className:"candidate-detail__card-meta",children:["CTC: ",wa(Ms(ve.ctc,ve.current_ctc,ve.salary,ve.compensation,ve.package))]})]},ve.id||J)})})})]}),n.jsxs("aside",{className:"candidate-detail__aside",children:[!v&&n.jsxs("div",{className:"candidate-detail__aside-card",children:[n.jsx("div",{className:"candidate-detail__aside-title",children:"Quick Actions"}),k&&n.jsx("div",{className:"candidate-detail__activity-item",children:S||"Actions disabled for current status"}),String(w||"").trim()?n.jsxs("div",{className:"candidate-detail__activity-item",children:[n.jsx("strong",{children:"AM Note:"})," ",String(w||"").trim()]}):null,y?y.map((ve,J)=>n.jsx("button",{type:"button",className:`candidate-card__btn ${ve.variant==="primary"?"candidate-card__btn--primary":ve.variant==="success"?"candidate-card__btn--success":ve.variant==="warning"?"candidate-card__btn--warning":ve.variant==="danger"?"candidate-card__btn--danger":"candidate-card__btn--ghost"}`,onClick:()=>ve.onClick(e,t),disabled:ve.disabled,children:ve.label},J)):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:()=>u&&u(e),disabled:k,children:"Call Feedback"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>P(!0),disabled:k,children:"View Callback History"}),!b&&n.jsxs("div",{className:"candidate-detail__status-controls",children:[n.jsx("select",{className:"candidate-detail__status-select",value:O,onChange:ve=>{R(ve.target.value),L({type:"",text:""})},children:re.map(ve=>n.jsx("option",{value:ve.value,children:ve.label},ve.value))}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:me,disabled:!p||F||!O||O===Y,children:F?"Updating...":"Update Status"}),W.text&&n.jsx("div",{className:`candidate-detail__status-message ${W.type==="error"?"candidate-detail__status-message--error":"candidate-detail__status-message--success"}`,children:W.text})]}),!j&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--success",onClick:()=>x&&x(e,t),children:"Send to Account Manager"}),!_&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>i&&i(e,t),children:"Schedule Interview"}),o&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>o(e),children:"Add Note"}),c&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>c(t),children:"Send Email"}),m&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>m(e),disabled:k,children:"Message AM"}),f&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>f(e),disabled:k,children:"Message Candidate"}),!N&&n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>d&&d(e,t),children:"Open Full Profile"})]})]}),n.jsxs("div",{className:"candidate-detail__aside-card",children:[n.jsx("div",{className:"candidate-detail__aside-title",children:"Activity Feed"}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Viewed ",sMe(e.updated_at||e.last_updated)]}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Status ",Gs(wa(t.status,"Unknown"))]}),n.jsxs("div",{className:"candidate-detail__activity-item",children:["Applied ",wa(t.appliedDate,"N/A")]})]})]})]})]}),C&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Call Feedback History"}),n.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-light",children:"x"})]}),n.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-80px)]",children:n.jsx(ZU,{candidateId:D,onAddNew:()=>{P(!1),u&&u(e)},onFeedbackSelect:ve=>{P(!1),u&&u(e,ve)}})})]})})]})}const cMe=()=>({am:[{id:"shortlist_notification",name:"Candidate Shortlist Notification",subject:"Candidate Shortlisted - {candidateName}",body:`Hi,

I'd like to bring {candidateName} to your attention for the {position} role.

Key Highlights:
- {experience} years of experience
- Strong skills in: {skills}
- Current CTC: {currentCTC}
- Expected CTC: {expectedCTC}
- Notice Period: {noticePeriod}

Match Score: {matchScore}%

Please review the profile and let me know if you'd like to proceed.

Best regards`},{id:"interview_scheduled",name:"Interview Scheduled - AM Notification",subject:"Interview Scheduled - {candidateName}",body:`Hi,

Interview has been scheduled with {candidateName}.

Details:
- Date & Time: {interviewDate}
- Mode: {interviewMode}
- Interviewer: {interviewer}

Candidate Summary:
{summary}

Best regards`}],candidate:[{id:"initial_contact",name:"Initial Contact Email",subject:"Exciting Opportunity for {candidateName}",body:`Dear {candidateName},

I came across your profile and was impressed by your experience in {skills}. We have an exciting opportunity for a {position} role at {companyName} that aligns well with your background.

Key Details:
- Position: {position}
- Location: {location}
- Experience Required: {experienceRange} years

Would you be interested in learning more? Please let me know your availability for a quick call.

Best regards`},{id:"interview_invitation",name:"Interview Invitation",subject:"Interview Invitation - {position}",body:`Dear {candidateName},

We're pleased to invite you for an interview.

Date: {interviewDate}
Time: {interviewTime}
Mode: {interviewMode}
Duration: {duration} minutes
Interviewer: {interviewer}

Meeting Link: {meetingLink}

Please confirm your availability. If the timing doesn't work, feel free to suggest alternative slots.

Best regards`},{id:"follow_up",name:"Follow-up Email",subject:"Following Up - {position} Opportunity",body:`Dear {candidateName},

I wanted to follow up on my previous email regarding the {position} opportunity.

Would you have a few minutes this week for a quick chat?

Best regards`}]}),Wi=(e,t="")=>e||t,dMe=(e={})=>Array.isArray(e.skills)?e.skills.slice(0,3).join(", "):e.skills||"",II=(e,t={})=>e.replace(/{candidateName}/g,Wi(t.name||t.full_name)).replace(/{position}/g,Wi(t.job_title||t.applied_for,"[Position]")).replace(/{companyName}/g,Wi(t.company||t.current_company,"[Company]")).replace(/{experience}/g,Wi(t.experience_years||t.experience,"N/A")).replace(/{experienceRange}/g,"3-7").replace(/{skills}/g,Wi(dMe(t),"")).replace(/{currentCTC}/g,Wi(t.current_ctc||t.current_salary,"N/A")).replace(/{expectedCTC}/g,Wi(t.expected_ctc||t.expected_salary,"N/A")).replace(/{noticePeriod}/g,Wi(t.notice_period,"N/A")).replace(/{matchScore}/g,Wi(t.match_score||t.semantic_score,"N/A")).replace(/{location}/g,Wi(t.current_location||t.location,"")).replace(/{summary}/g,Wi(t.summary||t.career_summary,"")).replace(/{interviewDate}/g,"[Date]").replace(/{interviewTime}/g,"[Time]").replace(/{interviewMode}/g,"[Mode]").replace(/{interviewer}/g,"[Interviewer]").replace(/{duration}/g,"30").replace(/{meetingLink}/g,"[Meeting Link]");function bV({candidate:e,recipient:t,onClose:r,onSend:s}){var y,x;const i=g.useMemo(()=>cMe(),[])[t]||[],l=(e==null?void 0:e.account_manager_email)||((y=e==null?void 0:e.account_manager)==null?void 0:y.email)||((x=e==null?void 0:e.account_manager)==null?void 0:x.am_email)||"",o=t==="am"?l:(e==null?void 0:e.email)||"",c=p=>p==="email"||p==="both",[d,u]=g.useState({to:o,cc:"",subject:"",body:"",attachments:[],template:"",deliveryMode:t==="am"?"both":"email"});g.useEffect(()=>{u(p=>({...p,to:t==="am"?l:(e==null?void 0:e.email)||"",deliveryMode:t==="am"?"both":"email"}))},[e,t,l]);const m=p=>{const h=i.find(v=>v.id===p);h&&u(v=>({...v,subject:II(h.subject,e),body:II(h.body,e),template:p}))},f=async()=>{if(!s){r();return}await s({...d,recipient:t}),r()};return n.jsx("div",{className:"custom-message-modal-overlay",onClick:r,children:n.jsxs("div",{className:"custom-message-modal",onClick:p=>p.stopPropagation(),children:[n.jsxs("div",{className:"message-header",children:[n.jsx("h2",{children:t==="am"?"Send to Account Manager":"Send to Candidate"}),n.jsx("button",{className:"close-btn",onClick:r,children:"?"})]}),n.jsxs("div",{className:"message-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Send Via"}),n.jsxs("select",{value:d.deliveryMode,onChange:p=>u(h=>({...h,deliveryMode:p.target.value})),className:"template-select",children:[n.jsx("option",{value:"email",children:"Email"}),n.jsx("option",{value:"portal_note",children:"Portal Note"}),n.jsx("option",{value:"both",children:"Email + Portal Note"})]})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Email Template"}),n.jsxs("select",{value:d.template,onChange:p=>m(p.target.value),className:"template-select",children:[n.jsx("option",{value:"",children:"Select a template..."}),i.map(p=>n.jsx("option",{value:p.id,children:p.name},p.id))]})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"email",value:d.to,onChange:p=>u(h=>({...h,to:p.target.value})),placeholder:t==="am"?"account.manager@company.com":e==null?void 0:e.email,required:!0})]}),c(d.deliveryMode)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"CC (optional)"}),n.jsx("input",{type:"email",value:d.cc,onChange:p=>u(h=>({...h,cc:p.target.value})),placeholder:"cc@company.com"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Subject"}),n.jsx("input",{type:"text",value:d.subject,onChange:p=>u(h=>({...h,subject:p.target.value})),placeholder:"Email subject",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Message"}),n.jsx("textarea",{value:d.body,onChange:p=>u(h=>({...h,body:p.target.value})),placeholder:"Type your message here...",rows:"10",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Attachments"}),n.jsxs("div",{className:"attachment-section",children:[n.jsx("button",{type:"button",className:"btn-attach",onClick:()=>document.getElementById("file-input").click(),children:"Attach Files"}),n.jsx("input",{id:"file-input",type:"file",multiple:!0,style:{display:"none"},onChange:p=>{const h=Array.from(p.target.files||[]);u(v=>({...v,attachments:[...v.attachments,...h]}))}}),d.attachments.length>0&&n.jsx("div",{className:"attachments-list",children:d.attachments.map((p,h)=>n.jsxs("div",{className:"attachment-item",children:[n.jsx("span",{children:p.name}),n.jsx("button",{type:"button",onClick:()=>u(v=>({...v,attachments:v.attachments.filter((b,j)=>j!==h)})),children:"?"})]},h))})]})]}),n.jsxs("div",{className:"quick-insert",children:[n.jsx("button",{type:"button",className:"btn-insert",onClick:()=>u(p=>({...p,body:`${p.body}

Candidate Profile: ${window.location.origin}/candidates/${(e==null?void 0:e.id)||""}`})),children:"Insert Profile Link"}),n.jsx("button",{type:"button",className:"btn-insert",onClick:()=>u(p=>({...p,body:`${p.body}

Resume: ${(e==null?void 0:e.resume_url)||""}`})),children:"Insert Resume Link"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"btn-cancel",onClick:r,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn-send",onClick:f,children:"Send Message"})]})]})]})})}const id={allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],allowedExts:[".pdf",".doc",".docx",".txt"],maxSize:5*1024*1024,errorMessages:{invalidType:"Please upload PDF, DOC, DOCX, or TXT files only",tooLarge:"File size must be less than 5MB",uploadFailed:"Upload failed. Please try again"}},hb={allowedExts:[".xlsx",".csv"],maxSize:10*1024*1024,maxRows:5e3},tw=50,uMe=1200,mMe=10*60*1e3,fMe={uploading:{message:"Uploading file...",progress:25},parsing:{message:"Parsing resume...",progress:50},validating:{message:"Validating data...",progress:75},complete:{message:"Resume parsed successfully!",progress:100},importing:{message:"Importing candidate...",progress:90}},jV="Excel Upload",ah=2,hMe=[{value:"",label:"-- Ignore --"},{value:"name",label:"Name"},{value:"email",label:"Email"},{value:"phone",label:"Phone Number"},{value:"noticePeriod",label:"Notice Period"},{value:"gender",label:"Gender"},{value:"dateOfBirth",label:"DOB (YYYY-MM-DD)"},{value:"currentAddress",label:"Current Address"},{value:"permanentAddress",label:"Permanent Address"},{value:"city",label:"City"},{value:"pincode",label:"Pincode"},{value:"readyToRelocate",label:"Ready To Relocate"},{value:"preferredLocation",label:"Preferred Location"},{value:"designation",label:"Designation"},{value:"currentCtc",label:"Current CTC"},{value:"expectedCtc",label:"Expected CTC"},{value:"highestDegree",label:"Highest Degree"},{value:"collegeName",label:"College Name"},{value:"cgpaPercentage",label:"CGPA / %"},{value:"skills",label:"Skills (comma separated)"},{value:"certificationName",label:"Certification Name"},{value:"certificationCredentialId",label:"Certification Credential ID"},{value:"certificationCredentialLink",label:"Certification Credential Link"},{value:"experienceCompany",label:"Experience Company"},{value:"experienceRole",label:"Experience Role"},{value:"experienceProject",label:"Experience Project"},{value:"experienceSkillsLearnt",label:"Experience Skills Learnt"},{value:"experienceYears",label:"Experience Years"},{value:"experienceCtc",label:"Experience CTC"},{value:"additionalEducation1HighestDegree",label:"Education 2 Highest Degree"},{value:"additionalEducation1CollegeName",label:"Education 2 College Name"},{value:"additionalEducation1CgpaPercentage",label:"Education 2 CGPA / %"},{value:"additionalEducation2HighestDegree",label:"Education 3 Highest Degree"},{value:"additionalEducation2CollegeName",label:"Education 3 College Name"},{value:"additionalEducation2CgpaPercentage",label:"Education 3 CGPA / %"},{value:"additionalCertification1Name",label:"Certification 2 Name"},{value:"additionalCertification1CredentialId",label:"Certification 2 Credential ID"},{value:"additionalCertification1CredentialLink",label:"Certification 2 Credential Link"},{value:"additionalCertification2Name",label:"Certification 3 Name"},{value:"additionalCertification2CredentialId",label:"Certification 3 Credential ID"},{value:"additionalCertification2CredentialLink",label:"Certification 3 Credential Link"},{value:"additionalExperience1Company",label:"Experience 2 Company"},{value:"additionalExperience1Role",label:"Experience 2 Role"},{value:"additionalExperience1Project",label:"Experience 2 Project"},{value:"additionalExperience1SkillsLearnt",label:"Experience 2 Skills Learnt"},{value:"additionalExperience1Years",label:"Experience 2 Years"},{value:"additionalExperience1Ctc",label:"Experience 2 CTC"},{value:"additionalExperience2Company",label:"Experience 3 Company"},{value:"additionalExperience2Role",label:"Experience 3 Role"},{value:"additionalExperience2Project",label:"Experience 3 Project"},{value:"additionalExperience2SkillsLearnt",label:"Experience 3 Skills Learnt"},{value:"additionalExperience2Years",label:"Experience 3 Years"},{value:"additionalExperience2Ctc",label:"Experience 3 CTC"},{value:"source",label:"Source"},{value:"appliedFor",label:"Applied For"}],pMe=["Name*","Email*","Phone Number*","Notice Period","Gender","DOB","Current Address","Permanent Address","City","Pincode","Ready To Relocate","Preferred Location","Designation*","Current CTC","Expected CTC","Highest Degree","College Name","CGPA / %","Skills*","Certification Name","Certification Credential ID","Certification Credential Link","Experience Company","Experience Role","Experience Project","Experience Skills Learnt","Experience Years*","Experience CTC","Education 2 Highest Degree","Education 2 College Name","Education 2 CGPA / %","Education 3 Highest Degree","Education 3 College Name","Education 3 CGPA / %","Certification 2 Name","Certification 2 Credential ID","Certification 2 Credential Link","Certification 3 Name","Certification 3 Credential ID","Certification 3 Credential Link","Experience 2 Company","Experience 2 Role","Experience 2 Project","Experience 2 Skills Learnt","Experience 2 Years","Experience 2 CTC","Experience 3 Company","Experience 3 Role","Experience 3 Project","Experience 3 Skills Learnt","Experience 3 Years","Experience 3 CTC","Source","Applied For"],FI=["Full Name*","Email*","Phone*","Alternate Phone","Date of Birth","Gender","Marital Status","Current Company","Current Job Title","Total Experience (Years)","Relevant Experience (Years)","Current CTC","Expected CTC","Notice Period (Days)","Current Location","Preferred Location","Skills","Primary Skill","Secondary Skill","Qualification","University/College","Year of Graduation","Certifications","Resume URL","LinkedIn URL","GitHub URL","Portfolio URL","Address","City","State","Country","Pincode","Willing to Relocate (Yes/No)","Preferred Employment Type","Availability to Join (Date)","Last Working Day","Recruiter Notes","Source"],xMe=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g," ").replace(/\s+/g," ").trim(),_V=e=>String(e||"").toLowerCase().split(/\s+/).map(t=>t?t[0].toUpperCase()+t.slice(1):"").join(" ").trim(),wV=e=>{if(!e)return"";const t=String(e).replace(/\D/g,"");return t?t.length===10?`+91${t}`:t.length===12&&t.startsWith("91")?`+${t}`:t.startsWith("+")?t:t.length>10?`+${t}`:t:""},oy=e=>{if(!e)return"";const t=Array.isArray(e)?e:String(e).split(/,|;|\n/).map(s=>s.trim()).filter(Boolean);return Array.from(new Set(t.map(s=>s.toLowerCase()))).map(s=>s.trim()).filter(Boolean).join(", ")},NV=e=>{if(e==null||e==="")return"";const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?"":Math.round(t*10)/10},kV=(e="")=>e.slice(e.lastIndexOf(".")).toLowerCase(),gMe=e=>{if(!e)return{valid:!1,message:"No file selected"};const t=kV(e.name);return!id.allowedTypes.includes(e.type)&&!id.allowedExts.includes(t)?{valid:!1,message:id.errorMessages.invalidType}:e.size>id.maxSize?{valid:!1,message:id.errorMessages.tooLarge}:{valid:!0}},yMe=(e=[])=>{const t=new Set;return e.filter(r=>{if(!r)return!1;const s=`${r.name||"file"}:${r.size||0}:${r.lastModified||0}`;return t.has(s)?!1:(t.add(s),!0)})},vMe=(e=[])=>{const t=[],r=[];return e.forEach(s=>{const a=gMe(s);if(a.valid){t.push(s);return}r.push(`${s.name||"file"}: ${a.message}`)}),{validFiles:t,invalidEntries:r}},bMe=e=>{if(!e)return{valid:!1,message:"No file selected"};const t=kV(e.name);return hb.allowedExts.includes(t)?e.size>hb.maxSize?{valid:!1,message:"File size must be less than 10MB"}:{valid:!0}:{valid:!1,message:"Please upload XLSX or CSV files only"}},jMe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,DI=/^\d+(\.\d+)?$/,_Me=e=>{if(!e)return!0;try{return new URL(String(e).trim()),!0}catch{return!1}},SV=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),wMe=e=>{const t=String(e||"").trim().toLowerCase();return t?["true","yes","y","1"].includes(t):!1},$I=(e,t)=>{const r=[],s=String(e.name||e.fullName||"").trim(),a=String(e.designation||e.currentPosition||"").trim(),i=String(e.email||"").trim(),l=String(e.phone||"").trim(),o=SV(e.skills),c=String(e.experienceYears||e.totalExperience||"").trim();s||r.push(`Row ${t}: Missing name`),i?jMe.test(i)?i.toLowerCase().endsWith("@gmail.com")||r.push(`Row ${t}: Only Gmail addresses are allowed`):r.push(`Row ${t}: Invalid email format`):r.push(`Row ${t}: Missing email`),l?/^\+?\d{10,15}$/.test(l.replace(/\s/g,""))||r.push(`Row ${t}: Invalid phone format`):r.push(`Row ${t}: Missing phone`),a||r.push(`Row ${t}: Missing designation`),o.length===0&&r.push(`Row ${t}: Missing skills (comma separated)`),c?DI.test(c)||r.push(`Row ${t}: Experience years must be numeric`):r.push(`Row ${t}: Missing experience years`);const d=String(e.pincode||"").trim();if(d&&!/^\d{6}$/.test(d)&&r.push(`Row ${t}: Pincode must be 6 digits`),[e.certificationCredentialLink,e.additionalCertification1CredentialLink,e.additionalCertification2CredentialLink].map(f=>String(f||"").trim()).filter(Boolean).forEach(f=>{_Me(f)||r.push(`Row ${t}: Invalid certification URL`)}),[e.additionalExperience1Years,e.additionalExperience2Years].map(f=>String(f||"").trim()).filter(Boolean).forEach(f=>{DI.test(f)||r.push(`Row ${t}: Additional experience years must be numeric`)}),e.dateOfBirth){const f=new Date(String(e.dateOfBirth));Number.isNaN(f.getTime())&&r.push(`Row ${t}: DOB must be a valid date`)}return r},NMe=(e=[])=>{const t=[],r=new Set;return e.forEach((s,a)=>{const i=String(s.email||"").trim().toLowerCase(),l=String(s.phone||"").replace(/\D/g,"");if(!i&&!l)return;const o=`${i}|${l}`;r.has(o)&&t.push({row:a+2,reason:"Duplicate in file",key:o}),r.add(o)}),t},kMe=e=>{const t=xMe(e);if(!t)return"";const r=t.match(/^education\s*(\d+)\s*(highest degree|degree|college name|college|cgpa|percentage)$/);if(r){const i=Number(r[1]);if(i>=2&&i<=ah+1){const l=i-1,o=r[2];return o.includes("degree")?`additionalEducation${l}HighestDegree`:o.includes("college")?`additionalEducation${l}CollegeName`:`additionalEducation${l}CgpaPercentage`}}const s=t.match(/^certification\s*(\d+)\s*(name|credential id|id|credential link|link|url)$/);if(s){const i=Number(s[1]);if(i>=2&&i<=ah+1){const l=i-1,o=s[2];return o==="name"?`additionalCertification${l}Name`:o.includes("id")?`additionalCertification${l}CredentialId`:`additionalCertification${l}CredentialLink`}}const a=t.match(/^experience\s*(\d+)\s*(company|role|project|skills learnt|skills learned|skills|years|ctc)$/);if(a){const i=Number(a[1]);if(i>=2&&i<=ah+1){const l=i-1,o=a[2];return o==="company"?`additionalExperience${l}Company`:o==="role"?`additionalExperience${l}Role`:o==="project"?`additionalExperience${l}Project`:o.includes("skills")?`additionalExperience${l}SkillsLearnt`:o==="years"?`additionalExperience${l}Years`:`additionalExperience${l}Ctc`}}return t.includes("full")&&t.includes("name")||t==="name"?"name":t.includes("email")?"email":t.includes("phone")||t.includes("mobile")?"phone":t==="notice period"||t.includes("notice")?"noticePeriod":t==="gender"?"gender":t.includes("dob")||t.includes("date of birth")?"dateOfBirth":t.includes("current address")?"currentAddress":t.includes("permanent address")?"permanentAddress":t==="city"?"city":t.includes("pincode")||t.includes("pin code")?"pincode":t.includes("ready to relocate")||t.includes("willing to relocate")?"readyToRelocate":t.includes("preferred location")?"preferredLocation":t.includes("designation")||t.includes("current position")||t.includes("job title")?"designation":t.includes("current ctc")?"currentCtc":t.includes("expected ctc")?"expectedCtc":t.includes("highest degree")?"highestDegree":t.includes("college")?"collegeName":t.includes("cgpa")||t.includes("percentage")?"cgpaPercentage":t.includes("skill")?"skills":t==="certification name"?"certificationName":t.includes("certification credential id")?"certificationCredentialId":t.includes("certification credential link")||t.includes("certification credential url")?"certificationCredentialLink":t==="experience company"?"experienceCompany":t==="experience role"?"experienceRole":t==="experience project"?"experienceProject":t==="experience skills learnt"||t==="experience skills learned"?"experienceSkillsLearnt":t==="experience years"||t==="years"||t==="total experience years"||t==="total experience"?"experienceYears":t==="experience ctc"?"experienceCtc":t==="source"?"source":t==="applied for"||t==="applied role"?"appliedFor":""},MI=(e,t)=>{const r={};return Object.entries(t).forEach(([s,a])=>{a&&(r[a]=e[s])}),r},wr=e=>String(e||"").trim(),SMe=e=>{const t=wr(e);if(!t)return"";const r=t.match(/\d+/);return r?r[0]:""},BI=async()=>{const e=await sj(()=>Promise.resolve().then(()=>oA),void 0),t=["Rehan N","rehann786@gmail.com","+918147852318","30","Male","1998-08-10","MG Road, Bengaluru","Ballari, Karnataka","Bengaluru","560001","Yes","Bengaluru, Hyderabad","SAP ABAP Consultant","12.5","16","M.Tech in VLSI Design and Embedded Systems","BITM, Ballari","8.2","ABAP, ALV, Adobe Forms, BAPI, BDC","AWS Developer Associate","AWS-12345","https://example.com/cert/aws","ABC Tech","Senior Consultant","Master Data Migration","ABAP, BAPI, IDOC","7","12.5","B.Tech","VTU","78%","","","","SAP Certified ABAP","SAP-4455","https://example.com/cert/sap-abap","","","","XYZ Systems","ABAP Developer","Custom transaction build","SmartForms, WebDynpro","3","6.5","","","","","","",jV,"System Engineer"],r=e.utils.aoa_to_sheet([pMe,t]),s=e.utils.book_new();e.utils.book_append_sheet(s,r,"Candidates");const a=e.write(s,{bookType:"xlsx",type:"array"});return new File([a],"Candidate_Profile_Bulk_Template.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})},CMe=(e={})=>[{name:wr(e.certificationName),id:wr(e.certificationCredentialId),link:wr(e.certificationCredentialLink)},...Array.from({length:ah},(r,s)=>{const a=s+1;return{name:wr(e[`additionalCertification${a}Name`]),id:wr(e[`additionalCertification${a}CredentialId`]),link:wr(e[`additionalCertification${a}CredentialLink`])}})].filter(r=>r.name||r.id||r.link).map(r=>[r.name,r.id?`ID:${r.id}`:"",r.link].filter(Boolean).join(" | ").trim()).filter(Boolean).join("; "),AMe=(e={})=>{const t=[],r=wr(e.appliedFor),s=wr(e.permanentAddress);return r&&t.push(`Applied For: ${r}`),s&&t.push(`Permanent Address: ${s}`),Array.from({length:ah},(a,i)=>i+1).forEach(a=>{const i=[wr(e[`additionalEducation${a}HighestDegree`]),wr(e[`additionalEducation${a}CollegeName`]),wr(e[`additionalEducation${a}CgpaPercentage`])].filter(Boolean).join(" | ");i&&t.push(`Education ${a+1}: ${i}`);const l=[wr(e[`additionalExperience${a}Company`]),wr(e[`additionalExperience${a}Role`]),wr(e[`additionalExperience${a}Project`]),wr(e[`additionalExperience${a}SkillsLearnt`]),wr(e[`additionalExperience${a}Years`]),wr(e[`additionalExperience${a}Ctc`])].filter(Boolean).join(" | ");l&&t.push(`Experience ${a+1}: ${l}`)}),t.join(" || ")},EMe=(e={})=>{const t=oy(e.skills),r=SV(e.skills)[0]||"",s=wr(e.experienceCompany),a=wr(e.city||e.preferredLocation),i=wMe(e.readyToRelocate)?"Yes":"No";return{"Full Name*":_V(e.name||e.fullName||""),"Email*":wr(e.email).toLowerCase(),"Phone*":wV(e.phone),"Alternate Phone":"","Date of Birth":wr(e.dateOfBirth),Gender:wr(e.gender),"Marital Status":"","Current Company":s,"Current Job Title":wr(e.designation||e.currentPosition),"Total Experience (Years)":NV(e.experienceYears||e.totalExperience),"Relevant Experience (Years)":"","Current CTC":wr(e.currentCtc),"Expected CTC":wr(e.expectedCtc),"Notice Period (Days)":SMe(e.noticePeriod),"Current Location":a,"Preferred Location":wr(e.preferredLocation),Skills:t,"Primary Skill":r,"Secondary Skill":"",Qualification:wr(e.highestDegree),"University/College":wr(e.collegeName),"Year of Graduation":"",Certifications:CMe(e),"Resume URL":"","LinkedIn URL":"","GitHub URL":"","Portfolio URL":"",Address:wr(e.currentAddress),City:wr(e.city),State:"",Country:"",Pincode:wr(e.pincode),"Willing to Relocate (Yes/No)":i,"Preferred Employment Type":"","Availability to Join (Date)":"","Last Working Day":"","Recruiter Notes":AMe(e),Source:wr(e.source)||jV}},TMe=async(e=[])=>{const t=await sj(()=>Promise.resolve().then(()=>oA),void 0),r=e.map(l=>{const o=EMe(l);return FI.map(c=>o[c]??"")}),s=t.utils.aoa_to_sheet([FI,...r]),a=t.utils.book_new();t.utils.book_append_sheet(a,s,"Candidates");const i=t.write(a,{bookType:"xlsx",type:"array"});return new File([i],`candidate_bulk_upload_${Date.now()}.xlsx`,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})},UI=(e=[],t=[])=>Array.isArray(e)?e.map((r,s)=>{const a=Number(r==null?void 0:r.row)||s+2,i=t[a-2]||{};return{row:a,field:(r==null?void 0:r.field)||"Upload",message:(r==null?void 0:r.message)||"Upload failed",fullName:i.name||i.fullName||"",email:i.email||"",phone:i.phone||""}}):[],xg=(e,t="Upload failed.")=>{var a,i,l,o;const r=(i=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:i.detail,s=(o=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:o.message;if(typeof r=="string"&&r.trim())return r;if(typeof s=="string"&&s.trim())return s;if(r&&typeof r=="object"){if(typeof r.message=="string"&&r.message.trim())return r.message;const c=Array.isArray(r.missing)?`Missing: ${r.missing.join(", ")}`:"",d=Array.isArray(r.extra)?`Extra: ${r.extra.join(", ")}`:"",u=[c,d].filter(Boolean);if(u.length)return u.join(" | ")}return typeof(e==null?void 0:e.message)=="string"&&e.message.trim()?e.message:t},PMe=(e=[],t=[])=>{const r=new Map;return t.forEach(s=>{const a=Number(s.row);if(!a)return;const i=`${s.field||""} ${s.message||""}`.toLowerCase();if(i.includes("duplicate")||i.includes("already exists")){r.set(a,"Duplicate");return}r.has(a)||r.set(a,"Failed")}),e.map((s,a)=>({type:"excel",name:s.name||s.fullName||"Unknown",email:s.email||"",status:r.get(a+2)||"Imported"}))},rw=(e=0,t=[])=>{const r=new Set,s=new Set;t.forEach(i=>{const l=Number(i==null?void 0:i.row);if(!l)return;const o=`${(i==null?void 0:i.field)||""} ${(i==null?void 0:i.message)||""}`.toLowerCase();if(o.includes("duplicate")||o.includes("already exists")){r.add(l);return}s.add(l)});const a=Math.max(0,Number(e||0)-r.size-s.size);return{total:Number(e||0),successful:a,duplicates:r.size,failed:s.size}},OMe=(e=[])=>{if(!e.length)return"";const t=["Row Number","Error Type","Details","Full Name","Email","Phone"],r=e.map(s=>[s.row,s.field||"Validation",s.message,s.fullName||"",s.email||"",s.phone||""]);return[t,...r].map(s=>s.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")).join(`
`)};function RMe({form:e=null,setForm:t=null,onImportComplete:r=null,onLog:s=null}){var A,C;const a=!e||typeof t!="function",i=g.useRef(null),l=g.useRef(null),[o,c]=g.useState({dragging:!1,stage:null,progress:0,message:"",error:"",warning:"",file:null,selectedFiles:[],parsedData:null,conflicts:[],showMergeModal:!1,mergeOption:"merge",summary:null,results:[]}),[d,u]=g.useState({dragging:!1,file:null,error:"",headers:[],rows:[],mapping:{},previewRows:[],validationErrors:[],duplicates:[],showMappingModal:!1,summary:null,uploadErrors:[],uploading:!1,progress:0}),[m,f]=g.useState("resume"),y=g.useRef({}),x=[{id:"resume",label:"Upload Resume",meta:"PDF, DOC, DOCX, TXT  Max 5MB",icon:x5},{id:"excel",label:"Upload Excel/CSV",meta:"XLSX, CSV  Max 10MB / 5000 rows",icon:p5}],p=g.useMemo(()=>o.parsedData?o.conflicts.map(P=>({label:P.label,existing:P.existing,parsed:P.parsed,action:P.action})):[],[o.parsedData,o.conflicts]),h=(P,O={})=>{const R=fMe[P];if(!R)return;const F=Number(O.totalFiles)>0?Number(O.totalFiles):1;let Q=R.message;a&&F>1&&(P==="uploading"?Q=`Uploading ${F} resumes...`:P==="parsing"?Q=`Parsing ${F} resumes...`:P==="importing"?Q=`Importing ${F} candidates...`:P==="complete"&&(Q=`${F} resumes parsed successfully!`)),c(W=>({...W,stage:P,progress:R.progress,message:Q}))},v=P=>{var O;f(P),(O=y.current[P])==null||O.focus()},b=(P,O)=>{const R=x.map(Q=>Q.id),F=R.indexOf(O);if(F!==-1){if(P.key==="ArrowRight"||P.key==="ArrowDown"){P.preventDefault();const Q=(F+1)%R.length;v(R[Q]);return}if(P.key==="ArrowLeft"||P.key==="ArrowUp"){P.preventDefault();const Q=(F-1+R.length)%R.length;v(R[Q]);return}if(P.key==="Home"){P.preventDefault(),v(R[0]);return}P.key==="End"&&(P.preventDefault(),v(R[R.length-1]))}},j=(P={})=>({fullName:_V(P.full_name||P.fullName||""),email:String(P.email||"").trim().toLowerCase(),phone:wV(P.phone||""),skills:oy(P.skills||""),experience:NV(P.experience_years||P.experience||""),education:P.education||"",certifications:P.certifications||[],currentLocation:P.current_location||P.location||"",linkedinUrl:P.linkedin_url||P.linkedin||"",githubUrl:P.github_url||P.github||"",portfolioUrl:P.portfolio_url||P.portfolio||"",resumeUrl:P.resume_url||""}),_=P=>{if(a)return[];const O=[];return[{key:"fullName",label:"Name",existing:e.fullName,parsed:P.fullName},{key:"email",label:"Email",existing:e.email,parsed:P.email},{key:"phone",label:"Phone",existing:e.phone,parsed:P.phone},{key:"skills",label:"Skills",existing:e.skills,parsed:P.skills},{key:"experience",label:"Experience",existing:e.experience,parsed:P.experience},{key:"education",label:"Education",existing:e.education,parsed:P.education},{key:"currentLocation",label:"Location",existing:e.currentLocation,parsed:P.currentLocation},{key:"linkedinUrl",label:"LinkedIn",existing:e.linkedinUrl,parsed:P.linkedinUrl},{key:"githubUrl",label:"GitHub",existing:e.githubUrl,parsed:P.githubUrl},{key:"portfolioUrl",label:"Portfolio",existing:e.portfolioUrl,parsed:P.portfolioUrl}].forEach(F=>{F.parsed&&F.existing&&String(F.existing).trim()!==String(F.parsed).trim()&&O.push({...F,action:"Keep existing"})}),O},N=(P,O)=>{a||!t||t(R=>{const F={...R},Q=(W,L)=>{if(L){if(O==="overwrite"){F[W]=L;return}F[W]||(F[W]=L)}};if(Q("fullName",P.fullName),Q("email",P.email),Q("phone",P.phone),P.skills){const W=oy(R.skills),L=oy(`${W}, ${P.skills}`);F.skills=O==="overwrite"?P.skills:L}if(P.experience!==""&&(F.experience=O==="overwrite"?P.experience:R.experience||P.experience),Q("education",P.education),Q("currentLocation",P.currentLocation),Q("linkedinUrl",P.linkedinUrl),Q("githubUrl",P.githubUrl),Q("portfolioUrl",P.portfolioUrl),P.certifications&&P.certifications.length){const W=Array.isArray(R.certifications)?R.certifications:[],L=P.certifications.map(I=>({name:String(I).trim(),organization:"",issueDate:"",expiryDate:"",credentialId:"",credentialUrl:""}));F.certifications=O==="overwrite"||W.every(I=>!I.name)?L:[...W,...L]}return P.resumeUrl&&(F.resumeUrl=P.resumeUrl),F})},w=async(P=[])=>{var Y,re,B;const O=yMe(Array.isArray(P)?P:Array.from(P||[])),R=a?O:O.slice(0,1);if(!R.length){c(G=>({...G,error:"No file selected",warning:"",file:null,selectedFiles:[]}));return}const{validFiles:F,invalidEntries:Q}=vMe(R),W=a&&F.length>tw,L=W?F.slice(0,tw):F,I=[];if(Q.length>0){const G=Q.slice(0,2).join(" | "),ce=Q.length-2;I.push(ce>0?`Skipped ${Q.length} invalid files (${G} +${ce} more).`:`Skipped ${Q.length} invalid files (${G}).`)}if(W&&I.push(`Only first ${tw} valid resumes were processed in this batch.`),!L.length){c(G=>({...G,error:id.errorMessages.invalidType,warning:"",file:null,selectedFiles:[],stage:null,progress:0,message:""}));return}const K=L.length,D=L[0];c(G=>({...G,error:"",warning:I.join(" "),file:D,selectedFiles:L,parsedData:null,conflicts:[],showMergeModal:!1,summary:null,results:[]})),h("uploading",{totalFiles:K});try{if(h("parsing",{totalFiles:K}),a){const G=new FormData;L.forEach(he=>{G.append("files",he)}),G.append("duplicate_option","overwrite"),h("importing",{totalFiles:K});const ce=await q.post("/v1/candidates/bulk-resume-upload-async",G,{headers:{"Content-Type":"multipart/form-data"}}),ae=(Y=ce==null?void 0:ce.data)==null?void 0:Y.task_id;if(!ae)throw new Error("Async upload did not return task_id");const fe=Date.now();let ne=null;for(;Date.now()-fe<mMe;){const he=await q.get(`/v1/candidates/bulk-upload-status/${ae}`),M=(he==null?void 0:he.data)||{},Se=String(M.status||"").toLowerCase(),me=Number(M.progress||0);if(Se==="completed"){ne=M.result||{};break}if(Se==="failed")throw new Error(M.error||"Bulk resume upload failed");c(Pe=>({...Pe,stage:"importing",progress:Math.min(99,Math.max(Pe.progress||0,me||1)),message:Se==="pending"?`Queued ${K} resumes for processing...`:`Importing ${K} candidates... (${Math.max(1,me)}%)`})),await new Promise(Pe=>setTimeout(Pe,uMe))}if(!ne)throw new Error("Bulk upload status polling timed out");h("complete",{totalFiles:K}),c(he=>({...he,summary:{success:ne.success??0,failed:ne.failed??0,duplicates:ne.duplicates??0,updated:ne.updated??0,total_processed:ne.total_processed??K},results:Array.isArray(ne.results)?ne.results:[],parsedData:null,conflicts:[]})),typeof r=="function"&&r(),typeof s=="function"&&s((Array.isArray(ne.results)?ne.results:[]).map(he=>({type:"resume",name:he.name||"Unknown",email:he.email||"",status:he.status||"Processed",resume:he.resume||D.name})))}else{const G=new FormData;G.append("file",D);const ce=await q.post("/v1/candidate/resume/parse",G,{headers:{"Content-Type":"multipart/form-data"}});h("validating",{totalFiles:1});const ae=j({...((re=ce.data)==null?void 0:re.parsed)||{},resume_url:(B=ce.data)==null?void 0:B.resume_url}),fe=_(ae);fe.length>0?c(ne=>({...ne,parsedData:ae,conflicts:fe,showMergeModal:!0,mergeOption:"merge"})):(N(ae,"overwrite"),h("complete"),c(ne=>({...ne,parsedData:ae})))}}catch(G){c(ce=>{var ae,fe;return{...ce,error:((fe=(ae=G==null?void 0:G.response)==null?void 0:ae.data)==null?void 0:fe.detail)||(G==null?void 0:G.message)||id.errorMessages.uploadFailed,stage:null,progress:0,message:""}})}finally{i.current&&(i.current.value="")}},k=P=>{P.preventDefault();const O=Array.from(P.dataTransfer.files||[]);c(R=>({...R,dragging:!1})),O.length>0&&w(O)},S=async P=>{const O=bMe(P);if(!O.valid){u(R=>({...R,error:O.message,file:null}));return}u(R=>({...R,error:"",file:P,summary:null,uploadErrors:[]}));try{const R=await sj(()=>Promise.resolve().then(()=>oA),void 0),F=await P.arrayBuffer(),Q=R.read(F,{type:"array"}),W=Q.Sheets[Q.SheetNames[0]],L=R.utils.sheet_to_json(W,{header:1,defval:""}),[I=[],...K]=L;if(!I.length){u(re=>({...re,error:"No headers found in the file."}));return}if(K.length>hb.maxRows){u(re=>({...re,error:`Row limit exceeded (max ${hb.maxRows})`}));return}const D=K.map(re=>{const B={};return I.forEach((G,ce)=>{B[G]=re[ce]??""}),B}),Y={};I.forEach(re=>{Y[re]=kMe(re)}),u(re=>({...re,headers:I,rows:D,mapping:Y,previewRows:D.slice(0,3),showMappingModal:!0}))}catch(R){u(F=>({...F,error:xg(R,"Failed to read the file. Please upload a valid Excel/CSV file.")}))}},E=async()=>{var L,I,K;const P=d.mapping,O=d.rows.map(D=>MI(D,P));if(O.length===0){u(D=>({...D,error:"No data rows found to import."}));return}const R=[];O.forEach((D,Y)=>{const re=$I(D,Y+2);re.length&&re.forEach(B=>{R.push({row:Y+2,field:"Validation",message:B,fullName:D.name||D.fullName,email:D.email,phone:D.phone})})});const F=NMe(O),Q=F.map(D=>{const Y=O[D.row-2]||{};return{row:D.row,field:"Duplicate",message:D.reason||"Duplicate in file",fullName:Y.name||Y.fullName||"",email:Y.email||"",phone:Y.phone||""}}),W=[...R,...Q];u(D=>({...D,validationErrors:R,duplicates:F,summary:rw(O.length,W),uploading:!0,progress:20,error:""}));try{const D=await TMe(O),Y=new FormData;Y.append("file",D);const re=await q.post("/v1/candidates/bulk-upload",Y,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:fe=>{if(!fe.total)return;const ne=Math.round(fe.loaded/fe.total*100);u(he=>({...he,progress:Math.max(he.progress,Math.min(95,ne))}))}}),B=UI(((L=re==null?void 0:re.data)==null?void 0:L.errors)||[],O),G=[],ce=new Set;[...W,...B].forEach(fe=>{const ne=`${fe.row}|${fe.field}|${fe.message}`;ce.has(ne)||(ce.add(ne),G.push(fe))});const ae=rw(O.length,G);u(fe=>({...fe,summary:ae,uploadErrors:G,uploading:!1,progress:100,showMappingModal:!1})),typeof r=="function"&&r(),typeof s=="function"&&s(PMe(O,G))}catch(D){const Y=UI(((K=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:K.errors)||[],O),re=O.map((ae,fe)=>({row:ae,rowNumber:fe+2})).filter(ae=>!W.some(fe=>Number(fe.row)===ae.rowNumber)).map(ae=>({row:ae.rowNumber,field:"Upload",message:xg(D,"Upload failed."),fullName:ae.row.name||ae.row.fullName||"",email:ae.row.email||"",phone:ae.row.phone||""})),B=[],G=new Set;[...W,...Y,...re].forEach(ae=>{const fe=`${ae.row}|${ae.field}|${ae.message}`;G.has(fe)||(G.add(fe),B.push(ae))});const ce=rw(O.length,B);u(ae=>({...ae,summary:ce,uploadErrors:B,uploading:!1,progress:100,showMappingModal:!1,error:xg(D,"Upload failed.")}))}},T=async()=>{try{const P=await BI(),O=URL.createObjectURL(P),R=document.createElement("a");R.href=O,R.download="Candidate_Profile_Bulk_Template.xlsx",R.click(),URL.revokeObjectURL(O)}catch{try{const O=await BI(),R=URL.createObjectURL(O),F=document.createElement("a");F.href=R,F.download="Candidate_Profile_Bulk_Template.xlsx",F.click(),URL.revokeObjectURL(R)}catch(O){u(R=>({...R,error:xg(O,"Failed to download template.")}))}}};return n.jsxs("section",{className:"bulk-import",children:[n.jsx("div",{className:"bulk-import__tabs-header",children:n.jsx("div",{className:"bulk-import__tabs",role:"tablist","aria-label":"Resume and CSV upload tools",children:x.map(P=>{var W,L;const O=P.icon,R=m===P.id,Q=P.id==="resume"?((W=o.selectedFiles)==null?void 0:W.length)||0:((L=d.rows)==null?void 0:L.length)||0;return n.jsxs("button",{ref:I=>{y.current[P.id]=I},type:"button",id:`bulk-import-tab-${P.id}`,role:"tab","aria-selected":R,"aria-controls":`bulk-import-panel-${P.id}`,tabIndex:R?0:-1,"data-import-tab":P.id,className:`bulk-import__tab ${R?"bulk-import__tab--active":""}`,onClick:()=>f(P.id),onKeyDown:I=>b(I,P.id),children:[n.jsx("span",{className:"bulk-import__tab-icon","aria-hidden":"true",children:n.jsx(O,{size:16})}),n.jsxs("span",{className:"bulk-import__tab-content",children:[n.jsx("span",{className:"bulk-import__tab-label",children:P.label}),n.jsx("span",{className:"bulk-import__tab-meta",children:P.meta})]}),Q>0&&n.jsx("span",{className:"bulk-import__tab-badge","aria-label":`${Q} selected`,children:Q})]},P.id)})})}),n.jsx("div",{id:`bulk-import-panel-${m}`,role:"tabpanel","aria-labelledby":`bulk-import-tab-${m}`,className:"bulk-import__panel",children:m==="resume"?n.jsxs("div",{className:"bulk-import__card bulk-import__card--tabbed",children:[n.jsxs("div",{className:"bulk-import__card-header",children:[n.jsx("span",{className:"bulk-import__card-icon",children:n.jsx(x5,{size:16})}),n.jsxs("div",{children:[n.jsx("h4",{className:"bulk-import__title",children:"Upload Resume"}),n.jsx("p",{className:"bulk-import__subtitle",children:"Parse candidate data from resume"})]})]}),n.jsxs("div",{className:`bulk-import__dropzone ${o.dragging?"bulk-import__dropzone--active":""}`,onDragOver:P=>{P.preventDefault(),c(O=>({...O,dragging:!0}))},onDragLeave:()=>c(P=>({...P,dragging:!1})),onDrop:k,onClick:()=>{var P;return(P=i.current)==null?void 0:P.click()},role:"button",tabIndex:0,"aria-label":"Upload resume",onKeyDown:P=>{var O;(P.key==="Enter"||P.key===" ")&&((O=i.current)==null||O.click())},children:[n.jsx(g5,{className:"text-slate-500",size:20}),n.jsx("p",{className:"bulk-import__dropzone-title",children:a?"Drag and drop resumes or click to upload":"Drag and drop or click to upload"}),n.jsx("p",{className:"bulk-import__dropzone-meta",children:a?"PDF, DOC, DOCX, TXT  Max 5MB each":"PDF, DOC, DOCX, TXT  Max 5MB"}),a&&n.jsx("p",{className:"bulk-import__dropzone-hint",children:"Upload multiple resumes at once. Matching email/phone will auto-update existing candidate details."}),n.jsx("input",{ref:i,type:"file",multiple:a,accept:".pdf,.doc,.docx,.txt",className:"hidden",onChange:P=>w(Array.from(P.target.files||[]))})]}),a&&((A=o.selectedFiles)==null?void 0:A.length)>0&&n.jsxs("div",{className:"bulk-import__selection",children:[n.jsxs("div",{className:"bulk-import__selection-title",children:["Selected resumes: ",o.selectedFiles.length]}),n.jsxs("div",{className:"bulk-import__selection-list",children:[o.selectedFiles.slice(0,4).map(P=>n.jsx("span",{className:"bulk-import__selection-chip",children:P.name},`${P.name}-${P.size}`)),o.selectedFiles.length>4&&n.jsxs("span",{className:"bulk-import__selection-chip bulk-import__selection-chip--muted",children:["+",o.selectedFiles.length-4," more"]})]})]}),o.warning&&n.jsxs("div",{className:"bulk-import__warning",children:[n.jsx(Uj,{})," ",o.warning]}),o.error&&n.jsxs("div",{className:"bulk-import__error",children:[n.jsx(Uj,{})," ",o.error]}),o.stage&&n.jsxs("div",{className:"bulk-import__progress","aria-live":"polite",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:o.message}),n.jsxs("span",{className:"font-semibold",children:[o.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full mt-2",children:n.jsx("div",{className:"h-1.5 bg-blue-500 rounded-full transition-all",style:{width:`${o.progress}%`}})})]}),!a&&(e==null?void 0:e.resumeUrl)&&n.jsx("div",{className:"bulk-import__subtitle",children:"Current resume uploaded."}),a&&o.summary&&n.jsxs("div",{className:"bulk-import__summary",children:[n.jsxs("div",{className:"bulk-import__summary-title",children:[n.jsx(h5,{})," Resume import complete"]}),n.jsxs("div",{className:"bulk-import__stats",children:[n.jsxs("div",{children:["Total: ",o.summary.total_processed]}),n.jsxs("div",{children:["Imported: ",o.summary.success+o.summary.updated]}),n.jsxs("div",{children:["Duplicates: ",o.summary.duplicates]}),n.jsxs("div",{children:["Failed: ",o.summary.failed]}),n.jsxs("div",{children:["Updated: ",o.summary.updated]})]}),((C=o.results)==null?void 0:C.length)>0&&n.jsxs("div",{className:"mt-2 space-y-1 text-slate-700",children:[n.jsx("div",{className:"font-semibold text-slate-800",children:"Import log"}),n.jsx("ul",{className:"divide-y divide-emerald-100 rounded border border-emerald-100 bg-white",children:o.results.map((P,O)=>n.jsxs("li",{className:"px-3 py-2 text-xs",children:[n.jsxs("div",{className:"font-semibold",children:[P.name||"Unknown"," ",P.email?n.jsxs("span",{className:"text-slate-500",children:["(",P.email,")"]}):null]}),n.jsxs("div",{className:"text-slate-600",children:[P.resume||"resume"," - ",P.status||"Processed"]})]},O))})]})]})]}):n.jsxs("div",{className:"bulk-import__card bulk-import__card--tabbed",children:[n.jsxs("div",{className:"bulk-import__card-header",children:[n.jsx("span",{className:"bulk-import__card-icon bulk-import__card-icon--success",children:n.jsx(p5,{size:16})}),n.jsxs("div",{children:[n.jsx("h4",{className:"bulk-import__title",children:"Upload Excel/CSV"}),n.jsx("p",{className:"bulk-import__subtitle",children:"Import multiple candidates at once"})]})]}),n.jsxs("div",{className:`bulk-import__dropzone ${d.dragging?"bulk-import__dropzone--active":""}`,onDragOver:P=>{P.preventDefault(),u(O=>({...O,dragging:!0}))},onDragLeave:()=>u(P=>({...P,dragging:!1})),onDrop:P=>{var R;P.preventDefault(),u(F=>({...F,dragging:!1}));const O=(R=P.dataTransfer.files)==null?void 0:R[0];O&&S(O)},onClick:()=>{var P;return(P=l.current)==null?void 0:P.click()},role:"button",tabIndex:0,"aria-label":"Upload Excel or CSV",onKeyDown:P=>{var O;(P.key==="Enter"||P.key===" ")&&((O=l.current)==null||O.click())},children:[n.jsx(g5,{className:"text-slate-500",size:20}),n.jsx("p",{className:"bulk-import__dropzone-title",children:"Drag and drop or click to upload"}),n.jsx("p",{className:"bulk-import__dropzone-meta",children:"XLSX, CSV  Max 10MB / 5000 rows"}),n.jsx("input",{ref:l,type:"file",accept:".xlsx,.csv",className:"hidden",onChange:P=>{var O;return S((O=P.target.files)==null?void 0:O[0])}})]}),n.jsxs("button",{type:"button",onClick:T,className:"bulk-import__link",children:[n.jsx(q7,{})," Download Template"]}),d.error&&n.jsxs("div",{className:"bulk-import__error",children:[n.jsx(Uj,{})," ",d.error]}),d.uploading&&n.jsxs("div",{className:"bulk-import__progress","aria-live":"polite",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Uploading file..."}),n.jsxs("span",{className:"font-semibold",children:[d.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full mt-2",children:n.jsx("div",{className:"h-1.5 bg-emerald-500 rounded-full transition-all",style:{width:`${d.progress}%`}})})]}),d.summary&&n.jsxs("div",{className:"bulk-import__summary",children:[n.jsxs("div",{className:"bulk-import__summary-title",children:[n.jsx(h5,{})," Upload complete"]}),n.jsxs("div",{className:"bulk-import__stats",children:[n.jsxs("div",{children:["Total Rows: ",d.summary.total]}),n.jsxs("div",{children:["Imported: ",d.summary.successful]}),n.jsxs("div",{children:["Duplicates: ",d.summary.duplicates]}),n.jsxs("div",{children:["Failed: ",d.summary.failed]})]}),d.uploadErrors.length>0&&n.jsx("button",{type:"button",className:"bulk-import__link mt-2",onClick:()=>{const P=OMe(d.uploadErrors),O=new Blob([P],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(O),F=document.createElement("a");F.href=R,F.download="bulk_upload_errors.csv",F.click(),URL.revokeObjectURL(R)},children:"Download Error Report"})]})]})}),o.showMergeModal&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl p-6 w-full max-w-3xl",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Data Conflict Detected"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Existing profile has data. How would you like to proceed?"}),n.jsx("div",{className:"space-y-2 mb-4",children:[{value:"overwrite",label:"Overwrite all fields"},{value:"merge",label:"Merge (keep existing, add new)"},{value:"cancel",label:"Cancel"}].map(P=>n.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"radio",name:"mergeOption",value:P.value,checked:o.mergeOption===P.value,onChange:()=>c(O=>({...O,mergeOption:P.value}))}),P.label]},P.value))}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Field"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Existing"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Parsed"}),n.jsx("th",{className:"p-2 text-left font-semibold text-gray-600",children:"Action"})]})}),n.jsx("tbody",{children:p.map(P=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 font-medium",children:P.label}),n.jsx("td",{className:"p-2 text-gray-600",children:P.existing||""}),n.jsx("td",{className:"p-2 text-gray-600",children:P.parsed||""}),n.jsx("td",{className:"p-2 text-gray-600",children:P.action})]},P.label))})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-gray-200 text-gray-700",onClick:()=>c(P=>({...P,showMergeModal:!1,parsedData:null,conflicts:[]})),children:"Cancel"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white",onClick:()=>{if(o.mergeOption==="cancel"){c(P=>({...P,showMergeModal:!1,parsedData:null,conflicts:[]}));return}N(o.parsedData,o.mergeOption),h("complete"),c(P=>({...P,showMergeModal:!1}))},children:"Proceed"})]})]})]}),d.showMappingModal&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Map Excel Columns to Profile Fields"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left font-semibold",children:"Excel Column"}),n.jsx("th",{className:"p-2 text-left font-semibold",children:"Profile Field"})]})}),n.jsx("tbody",{children:d.headers.map(P=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 font-medium",children:P}),n.jsx("td",{className:"p-2",children:n.jsx("select",{className:"border border-gray-300 rounded px-2 py-1 text-xs",value:d.mapping[P]||"",onChange:O=>u(R=>({...R,mapping:{...R.mapping,[P]:O.target.value}})),children:hMe.map(O=>n.jsx("option",{value:O.value,children:O.label},O.value))})})]},P))})]})}),n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Preview (first 3 rows):"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Name"}),n.jsx("th",{className:"p-2 text-left",children:"Email"}),n.jsx("th",{className:"p-2 text-left",children:"Phone"}),n.jsx("th",{className:"p-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:d.previewRows.map((P,O)=>{const R=MI(P,d.mapping),F=$I(R,O+2);return n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:R.name||R.fullName||"--"}),n.jsx("td",{className:"p-2",children:R.email||"--"}),n.jsx("td",{className:"p-2",children:R.phone||"--"}),n.jsx("td",{className:"p-2",children:F.length===0?n.jsx("span",{className:"text-green-600",children:""}):n.jsx("span",{className:"text-red-600",children:""})})]},O)})})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-gray-200 text-gray-700",onClick:()=>u(P=>({...P,showMappingModal:!1})),children:"Cancel"}),n.jsxs("button",{type:"button",className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white",onClick:E,children:["Import ",d.rows.length," Candidates"]})]})]})]})]})}const LMe=new Set(["SUPER_ADMIN","HIRING_MANAGER","RECRUITER"]),zI=["new","applied","sourced","hold_revisit","rejected_by_recruiter"],WI=200,IMe=["resume upload","bulk resume upload","excel upload","bulk upload"],FMe=e=>{const t=String((e==null?void 0:e.source)||"").toLowerCase();return IMe.some(r=>t.includes(r))},DMe=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M4 5h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm0 2v9h16V7H4zm2 2h12v2H6V9zm0 4h8v2H6v-2z",fill:"currentColor"})}),Vr=(...e)=>{const t=new Set(["n/a","na","none","null","undefined","unknown","unassigned","--","","-"]);for(const r of e){if(r==null)continue;const s=String(r).trim();if(s&&!t.has(s.toLowerCase()))return s}return""},$Me=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US")},vl=e=>String(e||"").trim().toLowerCase(),Ou=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),gg=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),yg=e=>{var t,r,s,a;return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.candidates)?e.candidates:Array.isArray(e==null?void 0:e.requirements)?e.requirements:Array.isArray(e==null?void 0:e.jobs)?e.jobs:Array.isArray(e==null?void 0:e.data)?e.data:Array.isArray((t=e==null?void 0:e.data)==null?void 0:t.items)?e.data.items:Array.isArray((r=e==null?void 0:e.data)==null?void 0:r.candidates)?e.data.candidates:Array.isArray((s=e==null?void 0:e.data)==null?void 0:s.requirements)?e.data.requirements:Array.isArray((a=e==null?void 0:e.data)==null?void 0:a.jobs)?e.data.jobs:[]},VI=(e={})=>{var t,r,s;return[e==null?void 0:e.id,e==null?void 0:e._id,e==null?void 0:e.candidate_id,e==null?void 0:e.public_id,e==null?void 0:e.publicId,(t=e==null?void 0:e.candidate)==null?void 0:t.id,(r=e==null?void 0:e.candidate)==null?void 0:r.candidate_id,(s=e==null?void 0:e.candidate)==null?void 0:s.public_id].map(vl).filter(Boolean)},MMe=(e,t)=>{var d,u,m,f,y,x,p,h,v,b,j,_,N,w,k,S,E,T,A,C,P,O,R,F,Q,W,L,I,K,D,Y,re,B,G,ce,ae,fe,ne,he,M,Se;const r=String((t==null?void 0:t.status)||(e==null?void 0:e.status)||"").trim(),s=Vr(e==null?void 0:e.assignment_role,e==null?void 0:e.requirement_title,e==null?void 0:e.job_title,e==null?void 0:e.applied_role,e==null?void 0:e.applied_for,(d=e==null?void 0:e.requirement)==null?void 0:d.title,(u=e==null?void 0:e.requirement)==null?void 0:u.job_title,(m=e==null?void 0:e.job)==null?void 0:m.title,(f=e==null?void 0:e.job)==null?void 0:f.job_title,t==null?void 0:t.jobTitle,t==null?void 0:t.currentRole,t==null?void 0:t.designation),a=Vr(e==null?void 0:e.recruiter_name,e==null?void 0:e.recruiterName,e==null?void 0:e.assigned_recruiter_name,e==null?void 0:e.submitted_by_name,e==null?void 0:e.submittedByName,(y=e==null?void 0:e.submission)==null?void 0:y.recruiter_name,(x=e==null?void 0:e.submission)==null?void 0:x.submitted_by_name,(h=(p=e==null?void 0:e.submission)==null?void 0:p.recruiter)==null?void 0:h.name,(v=e==null?void 0:e.recruiter)==null?void 0:v.name,e==null?void 0:e.owner_name,(b=e==null?void 0:e.owner)==null?void 0:b.name),i=Vr((j=t==null?void 0:t.accountManager)==null?void 0:j.name,e==null?void 0:e.assigned_by_name,e==null?void 0:e.assigned_by,e==null?void 0:e.am_name,e==null?void 0:e.submitted_to_am_name,e==null?void 0:e.accountManagerName,e==null?void 0:e.account_manager_name,(_=e==null?void 0:e.account_manager)==null?void 0:_.name,(N=e==null?void 0:e.account_manager)==null?void 0:N.am_name,(w=e==null?void 0:e.submission)==null?void 0:w.account_manager_name,(S=(k=e==null?void 0:e.submission)==null?void 0:k.account_manager)==null?void 0:S.name,(E=e==null?void 0:e.requirement)==null?void 0:E.account_manager_name,(A=(T=e==null?void 0:e.requirement)==null?void 0:T.account_manager)==null?void 0:A.name,(C=e==null?void 0:e.job)==null?void 0:C.account_manager_name,(O=(P=e==null?void 0:e.job)==null?void 0:P.account_manager)==null?void 0:O.name,(R=e==null?void 0:e.job)==null?void 0:R.assigned_by_name,(F=e==null?void 0:e.job)==null?void 0:F.assigned_by),l=Vr(e==null?void 0:e.client_name,e==null?void 0:e.client_display_name,e==null?void 0:e.clientName,e==null?void 0:e.company_name,e==null?void 0:e.companyName,(Q=e==null?void 0:e.client)==null?void 0:Q.client_name,(W=e==null?void 0:e.client)==null?void 0:W.name,(L=e==null?void 0:e.submission)==null?void 0:L.client_name,(K=(I=e==null?void 0:e.submission)==null?void 0:I.client)==null?void 0:K.client_name,(Y=(D=e==null?void 0:e.submission)==null?void 0:D.client)==null?void 0:Y.name,(re=e==null?void 0:e.requirement)==null?void 0:re.client_name,(G=(B=e==null?void 0:e.requirement)==null?void 0:B.client)==null?void 0:G.client_name,(ae=(ce=e==null?void 0:e.requirement)==null?void 0:ce.client)==null?void 0:ae.name,(fe=e==null?void 0:e.job)==null?void 0:fe.client_name,(he=(ne=e==null?void 0:e.job)==null?void 0:ne.client)==null?void 0:he.client_name,(Se=(M=e==null?void 0:e.job)==null?void 0:M.client)==null?void 0:Se.name),o=Vr(e==null?void 0:e.last_action_by_name,e==null?void 0:e.updated_by_name,e==null?void 0:e.status_updated_by_name,e==null?void 0:e.modified_by_name),c=$Me((e==null?void 0:e.status_updated_at)||(e==null?void 0:e.updated_at)||(e==null?void 0:e.last_action_at));return{statusRaw:r,statusLabel:r?Gs(r):"Unknown",roleName:s,recruiterName:a,amName:i,clientName:l,actedBy:o,actedOn:c}};function HI(){const e=Et(),[t,r]=Os(),s=g.useRef(""),a=g.useRef(new Map),i=g.useRef(""),l=t.get("candidateId"),o=t.get("viewOnly")==="1",[c,d]=g.useState([]),[u,m]=g.useState(!1),[f,y]=g.useState([]),[x,p]=g.useState(new Set),[h,v]=g.useState(""),[b,j]=g.useState(""),[_,N]=g.useState(!1),[w,k]=g.useState(null),[S,E]=g.useState(!1),[T,A]=g.useState(""),[C,P]=g.useState(""),[O,R]=g.useState(!1),[F,Q]=g.useState(!1),[W,L]=g.useState(""),[I,K]=g.useState("pdf"),[D,Y]=g.useState(""),[re,B]=g.useState(""),G=g.useMemo(()=>{if(!T)return"";const je=String(T).trim();return je?je.startsWith("blob:")||je.includes("#")?je:je.toLowerCase().includes(".pdf")?`${je}#toolbar=1&navpanes=0&view=FitH`:je:""},[T]),[ce,ae]=g.useState(!1),[fe,ne]=g.useState(null),[he,M]=g.useState(null),[Se,me]=g.useState({open:!1,recipient:"am",candidate:null}),Pe=(localStorage.getItem("role")||"").toUpperCase(),ue=LMe.has(Pe);g.useEffect(()=>{We()},[]);const ye=je=>String(je||"").trim().toLowerCase(),Ye=(je="")=>{const Re=String(je||"").trim();if(!Re)return"";const oe=Re.split("?")[0].split("#")[0],Ue=oe.lastIndexOf(".");return Ue<0?"":oe.slice(Ue).toLowerCase()},lt=(je="")=>{const Re=String(je||"").trim();if(!Re)return"";const oe=/filename\*?=(?:UTF-8'')?"?([^";\r\n]+)"?/i.exec(Re);if(!(oe!=null&&oe[1]))return"";try{const Ue=decodeURIComponent(oe[1]);return Ye(Ue)}catch{return Ye(oe[1])}},xe=async je=>{if(!(je instanceof Blob)||je.size<4)return!1;const Re=new Uint8Array(await je.slice(0,4).arrayBuffer());return Re[0]===37&&Re[1]===80&&Re[2]===68&&Re[3]===70},Ae=async je=>{if(!(je instanceof Blob)||je.size<4)return!1;const Re=new Uint8Array(await je.slice(0,4).arrayBuffer());return Re[0]===80&&Re[1]===75&&Re[2]===3&&Re[3]===4},$e=()=>{i.current&&(URL.revokeObjectURL(i.current),i.current="")},Me=()=>{R(!1),Q(!1),L(""),A(""),P(""),K("pdf"),Y(""),B(""),$e()},Fe=async(je,Re)=>{var Ge,ie;const oe=String(je||"").trim(),Ue=Bs(Re);if(!(!oe&&!Ue)){R(!0),P(oe),L(""),Q(!0),A(""),K("pdf"),Y(""),B(""),$e();try{let ge=null;if(Ue)try{ge=await q.get(`/v1/candidates/${Ue}/resume/download`,{responseType:"blob"})}catch{ge=null}!ge&&oe&&(ge=await q.get(oe,{responseType:"blob"}));const ut=ge==null?void 0:ge.data;if(!(ut instanceof Blob))throw new Error("Invalid preview payload");const Z=String(((Ge=ge==null?void 0:ge.headers)==null?void 0:Ge["content-type"])||"").toLowerCase(),H=String(((ie=ge==null?void 0:ge.headers)==null?void 0:ie["content-disposition"])||"").toLowerCase(),V=lt(H)||Ye(oe),ee=await xe(ut)||Z.includes("application/pdf")||V===".pdf",X=Z.startsWith("image/")||[".png",".jpg",".jpeg",".gif",".webp"].includes(V),te=Z.startsWith("text/")||V===".txt"||V===".log",ke=Z.includes("wordprocessingml")||V===".docx"||await Ae(ut)&&V!==".zip";if(ee){const ve=ut.type==="application/pdf"?ut:new Blob([ut],{type:"application/pdf"}),J=URL.createObjectURL(ve);i.current=J,K("pdf"),A(J);return}if(X){const ve=ut.type&&ut.type.startsWith("image/")?ut:new Blob([ut],{type:Z||"image/png"}),J=URL.createObjectURL(ve);i.current=J,K("image"),A(J);return}if(te){const ve=await ut.text();K("text"),B(ve||"No text content found in file.");return}if(ke){const ve=await sj(()=>import("./index-CHFN2ggr.js").then(Ie=>Ie.i),[]),J=await ut.arrayBuffer(),be=await ve.convertToHtml({arrayBuffer:J}),we=String((be==null?void 0:be.value)||"").trim();if(!we){L("DOCX parsed but no preview content was found."),K("unsupported");return}K("html"),Y(we);return}if(V===".doc"){K("unsupported"),L("DOC format is not supported for inline preview. Please open/download the file.");return}K("unsupported"),L("Unsupported file type for inline preview.")}catch(ge){console.error("Failed to load resume preview",ge),K("unsupported"),L("Unable to render inline preview. Open in new tab instead.")}finally{Q(!1)}}},We=async()=>{var je,Re,oe;try{m(!0);const[Ue,Ge,ie,ge]=await Promise.allSettled([zr.listCandidates({limit:WI}),q.get("/workflow/candidates",{params:{limit:WI}}),q.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),Up()]),ut=Ue.status==="fulfilled"?yg(Ue.value):[],Z=Ge.status==="fulfilled"?yg((je=Ge.value)==null?void 0:je.data):[],H=ie.status==="fulfilled"?yg((Re=ie.value)==null?void 0:Re.data):[],V=ge.status==="fulfilled"?yg((oe=ge.value)==null?void 0:oe.data):[],ee=new Map,X=new Map,te=Array.from(new Set(V.map(U=>vl((U==null?void 0:U.id)||(U==null?void 0:U.job_id)||(U==null?void 0:U.jobId)||(U==null?void 0:U.requirement_id)||(U==null?void 0:U.requirementId))).filter(Boolean)));await Promise.allSettled(te.map(async U=>{var se,at,ct,Te;try{const Vt=await q.get(`/v1/recruiter/assigned-jobs/${U}`),bt=((se=Vt==null?void 0:Vt.data)==null?void 0:se.job)||(Vt==null?void 0:Vt.data)||{},$t=(bt==null?void 0:bt.account_manager)||((at=Vt==null?void 0:Vt.data)==null?void 0:at.account_manager)||{},Mt={...bt,id:Vr(bt==null?void 0:bt.id,bt==null?void 0:bt.job_id,bt==null?void 0:bt.requirement_id,U),job_id:Vr(bt==null?void 0:bt.job_id,bt==null?void 0:bt.id,bt==null?void 0:bt.requirement_id,U),title:Vr(bt==null?void 0:bt.title,bt==null?void 0:bt.job_title,bt==null?void 0:bt.requirement_title),client_name:Vr(bt==null?void 0:bt.client_name,(ct=bt==null?void 0:bt.client)==null?void 0:ct.name,(Te=bt==null?void 0:bt.client)==null?void 0:Te.client_name,bt==null?void 0:bt.company_name),account_manager:$t,account_manager_name:Vr($t==null?void 0:$t.name,$t==null?void 0:$t.am_name,bt==null?void 0:bt.account_manager_name,bt==null?void 0:bt.assigned_by_name),account_manager_email:Vr($t==null?void 0:$t.email,$t==null?void 0:$t.am_email,bt==null?void 0:bt.account_manager_email),account_manager_id:Vr($t==null?void 0:$t.id,$t==null?void 0:$t.am_id,bt==null?void 0:bt.account_manager_id)},br=vl((Mt==null?void 0:Mt.id)||(Mt==null?void 0:Mt.job_id)||U);br&&ee.set(br,Mt);const Pr=Ou((Mt==null?void 0:Mt.title)||(Mt==null?void 0:Mt.job_title)||(Mt==null?void 0:Mt.requirement_title));Pr&&X.set(Pr,Mt)}catch{}}));const ke=new Map,ve=new Map;Z.forEach(U=>{var at;VI(U).forEach(ct=>ke.set(ct,U));const se=vl((U==null?void 0:U.email)||((at=U==null?void 0:U.candidate)==null?void 0:at.email));se&&ve.set(se,U)});const J=new Map,be=new Map,we=new Map,Ie=new Map,He=new Map,nt=new Map,tt=new Map;[...H,...V].forEach(U=>{var at,ct,Te,Vt;[U==null?void 0:U.id,U==null?void 0:U._id,U==null?void 0:U.job_id,U==null?void 0:U.jobId,U==null?void 0:U.requirement_id,U==null?void 0:U.requirementId,U==null?void 0:U.assigned_job_id,(at=U==null?void 0:U.requirement)==null?void 0:at.id,(ct=U==null?void 0:U.job)==null?void 0:ct.id,(Te=U==null?void 0:U.job)==null?void 0:Te.job_id,(Vt=U==null?void 0:U.requirement)==null?void 0:Vt.requirement_id].map(vl).filter(Boolean).forEach(bt=>J.set(bt,U)),[U==null?void 0:U.title,U==null?void 0:U.job_title,U==null?void 0:U.requirement_title,U==null?void 0:U.role,U==null?void 0:U.position_title,U==null?void 0:U.requirement_code].map(Ou).filter(Boolean).forEach(bt=>be.set(bt,U))}),V.forEach(U=>{var $t,Mt,br,Pr,Rs,jt;const se=Vr(U==null?void 0:U.client_name,($t=U==null?void 0:U.client)==null?void 0:$t.client_name,(Mt=U==null?void 0:U.client)==null?void 0:Mt.name,U==null?void 0:U.company_name),at=Vr(U==null?void 0:U.title,U==null?void 0:U.job_title,U==null?void 0:U.requirement_title,U==null?void 0:U.role,U==null?void 0:U.position_title);[U==null?void 0:U.id,U==null?void 0:U._id,U==null?void 0:U.job_id,U==null?void 0:U.jobId,U==null?void 0:U.requirement_id,U==null?void 0:U.requirementId].map(vl).filter(Boolean).forEach(gn=>we.set(gn,U)),[U==null?void 0:U.title,U==null?void 0:U.job_title,U==null?void 0:U.requirement_title,U==null?void 0:U.role].map(Ou).filter(Boolean).forEach(gn=>Ie.set(gn,U));const ct=Ou(at),Te=gg(se);if(ct&&Te){const gn=`${ct}||${Te}`;He.has(gn)||He.set(gn,[]),He.get(gn).push(U)}ct&&(nt.has(ct)||nt.set(ct,[]),nt.get(ct).push(U));const Vt=Vr(U==null?void 0:U.assigned_by_name,U==null?void 0:U.account_manager_name,(br=U==null?void 0:U.account_manager)==null?void 0:br.name,(Pr=U==null?void 0:U.account_manager)==null?void 0:Pr.am_name,(Rs=U==null?void 0:U.am)==null?void 0:Rs.name,(jt=U==null?void 0:U.am)==null?void 0:jt.am_name),bt=gg(se);Vt&&bt&&(tt.has(bt)||tt.set(bt,[]),tt.get(bt).push(Vt))});const Qe=[...ut.map(U=>{var Fa,Ls,de,Le,rt,dt,le,Xe,z,pe,De,ze,yt,Ft,tr,Xt,Ut,_r,vn,Kr,rn,ba,Sr,zc,Cn,Do,bu,Hf,gA,yA,vA,bA,jA,_A,wA,NA,kA,SA,CA,AA,EA,TA,PA,OA,RA,LA,IA,FA,DA,$A,MA,BA,UA,zA,WA,VA,HA,qA,GA,JA,KA,XA,YA,ZA,QA,e3,t3,r3,n3,s3,a3,i3,l3,o3,c3,d3,u3,m3,f3,h3,p3,x3,g3,y3,v3,b3,j3,_3,w3,N3,k3,S3,C3,A3,E3,T3,P3,O3,R3,L3,I3,F3,D3,$3,M3,B3,U3,z3,W3,V3,H3,q3,G3,J3,K3;const se=VI(U).map(oj=>ke.get(oj)).find(Boolean)||ve.get(vl(U==null?void 0:U.email)),at=vl((U==null?void 0:U.requirement_id)||(U==null?void 0:U.job_id)||(U==null?void 0:U.applied_job_id)||(U==null?void 0:U.appliedJobId)||(U==null?void 0:U.assigned_job_id)||((Fa=U==null?void 0:U.submission)==null?void 0:Fa.job_id)||((Ls=U==null?void 0:U.submission)==null?void 0:Ls.requirement_id)||(se==null?void 0:se.requirement_id)||(se==null?void 0:se.job_id)||(se==null?void 0:se.assigned_job_id)||((de=se==null?void 0:se.submission)==null?void 0:de.job_id)||((Le=se==null?void 0:se.submission)==null?void 0:Le.requirement_id)),ct=Ou((U==null?void 0:U.requirement_title)||(U==null?void 0:U.job_title)||(U==null?void 0:U.applied_role)||(U==null?void 0:U.applied_for)||((rt=U==null?void 0:U.job)==null?void 0:rt.title)||((dt=U==null?void 0:U.job)==null?void 0:dt.job_title)||(se==null?void 0:se.requirement_title)||(se==null?void 0:se.job_title)||(se==null?void 0:se.applied_role)||(se==null?void 0:se.applied_for)||((le=se==null?void 0:se.job)==null?void 0:le.title)||((Xe=se==null?void 0:se.job)==null?void 0:Xe.job_title)||(U==null?void 0:U.designation)||(U==null?void 0:U.current_designation)||(U==null?void 0:U.current_role)||(U==null?void 0:U.role)),Te=J.get(at)||be.get(ct),Vt=Vr(U==null?void 0:U.client_name,(z=U==null?void 0:U.client)==null?void 0:z.client_name,(pe=U==null?void 0:U.client)==null?void 0:pe.name,se==null?void 0:se.client_name,(De=se==null?void 0:se.client)==null?void 0:De.client_name,(ze=se==null?void 0:se.client)==null?void 0:ze.name,Te==null?void 0:Te.client_name,(yt=Te==null?void 0:Te.client)==null?void 0:yt.client_name,(Ft=Te==null?void 0:Te.client)==null?void 0:Ft.name),bt=Ou(Vr(U==null?void 0:U.requirement_title,U==null?void 0:U.job_title,U==null?void 0:U.applied_role,U==null?void 0:U.applied_for,se==null?void 0:se.requirement_title,se==null?void 0:se.job_title,se==null?void 0:se.applied_role,se==null?void 0:se.applied_for,Te==null?void 0:Te.title,Te==null?void 0:Te.job_title,Te==null?void 0:Te.requirement_title,U==null?void 0:U.designation,U==null?void 0:U.current_designation)),$t=`${bt}||${gg(Vt)}`,Mt=(()=>{const oj=gg(Vt),nH=tt.get(oj)||[],X3=Array.from(new Set(nH.filter(Boolean)));return X3.length===1?X3[0]:""})(),br=He.get($t)||[],Pr=nt.get(bt)||[],Rs=br.length===1?br[0]:Pr.length===1?Pr[0]:null,jt=ee.get(at)||ee.get(vl((U==null?void 0:U.applied_job_id)||(U==null?void 0:U.job_id)||(U==null?void 0:U.jobId)||(se==null?void 0:se.job_id)||(se==null?void 0:se.applied_job_id)))||X.get(ct)||Rs||we.get(at)||we.get(vl((U==null?void 0:U.applied_job_id)||(U==null?void 0:U.job_id)||(U==null?void 0:U.jobId)||(se==null?void 0:se.job_id)||(se==null?void 0:se.applied_job_id)))||Ie.get(ct),gn=Vr(Te==null?void 0:Te.title,Te==null?void 0:Te.job_title,Te==null?void 0:Te.requirement_title,Te==null?void 0:Te.role,Te==null?void 0:Te.position_title,se==null?void 0:se.requirement_title,se==null?void 0:se.job_title,(tr=se==null?void 0:se.job)==null?void 0:tr.title,(Xt=se==null?void 0:se.job)==null?void 0:Xt.job_title,se==null?void 0:se.applied_role,se==null?void 0:se.applied_for,U==null?void 0:U.requirement_title,U==null?void 0:U.job_title,U==null?void 0:U.applied_role,U==null?void 0:U.applied_for,(Ut=U==null?void 0:U.job)==null?void 0:Ut.title,(_r=U==null?void 0:U.job)==null?void 0:_r.job_title),js=Vr(jt==null?void 0:jt.client_name,(vn=jt==null?void 0:jt.client)==null?void 0:vn.name,(Kr=jt==null?void 0:jt.client)==null?void 0:Kr.client_name,jt==null?void 0:jt.company_name,U==null?void 0:U.client_name,(rn=U==null?void 0:U.client)==null?void 0:rn.client_name,(ba=U==null?void 0:U.client)==null?void 0:ba.name,(Sr=U==null?void 0:U.client)==null?void 0:Sr.company_name,se==null?void 0:se.client_name,(zc=se==null?void 0:se.client)==null?void 0:zc.client_name,(Cn=se==null?void 0:se.client)==null?void 0:Cn.name,(Do=se==null?void 0:se.client)==null?void 0:Do.company_name,(bu=se==null?void 0:se.submission)==null?void 0:bu.client_name,(gA=(Hf=se==null?void 0:se.submission)==null?void 0:Hf.client)==null?void 0:gA.client_name,(vA=(yA=se==null?void 0:se.submission)==null?void 0:yA.client)==null?void 0:vA.name,(jA=(bA=se==null?void 0:se.submission)==null?void 0:bA.client)==null?void 0:jA.company_name,(_A=se==null?void 0:se.requirement)==null?void 0:_A.client_name,(wA=se==null?void 0:se.job)==null?void 0:wA.client_name,Te==null?void 0:Te.client_name,(NA=Te==null?void 0:Te.client)==null?void 0:NA.client_name,(kA=Te==null?void 0:Te.client)==null?void 0:kA.name,(SA=Te==null?void 0:Te.client)==null?void 0:SA.company_name,Te==null?void 0:Te.company,Te==null?void 0:Te.company_name),va=Vr(jt==null?void 0:jt.assigned_by_name,jt==null?void 0:jt.assigned_by,(CA=jt==null?void 0:jt.account_manager)==null?void 0:CA.name,(AA=jt==null?void 0:jt.account_manager)==null?void 0:AA.am_name,(EA=jt==null?void 0:jt.am)==null?void 0:EA.name,(TA=jt==null?void 0:jt.am)==null?void 0:TA.am_name,jt==null?void 0:jt.assigned_am_name,jt==null?void 0:jt.account_manager_name,U==null?void 0:U.account_manager_name,(PA=U==null?void 0:U.account_manager)==null?void 0:PA.name,(OA=U==null?void 0:U.account_manager)==null?void 0:OA.am_name,se==null?void 0:se.account_manager_name,(RA=se==null?void 0:se.account_manager)==null?void 0:RA.name,(LA=se==null?void 0:se.account_manager)==null?void 0:LA.am_name,se==null?void 0:se.am_name,se==null?void 0:se.submitted_to_am_name,(IA=se==null?void 0:se.submission)==null?void 0:IA.account_manager_name,(DA=(FA=se==null?void 0:se.submission)==null?void 0:FA.account_manager)==null?void 0:DA.name,(MA=($A=se==null?void 0:se.submission)==null?void 0:$A.account_manager)==null?void 0:MA.am_name,(BA=se==null?void 0:se.requirement)==null?void 0:BA.account_manager_name,(zA=(UA=se==null?void 0:se.requirement)==null?void 0:UA.account_manager)==null?void 0:zA.name,(WA=se==null?void 0:se.job)==null?void 0:WA.account_manager_name,(HA=(VA=se==null?void 0:se.job)==null?void 0:VA.account_manager)==null?void 0:HA.name,(GA=(qA=se==null?void 0:se.job)==null?void 0:qA.account_manager)==null?void 0:GA.am_name,(JA=Te==null?void 0:Te.account_manager)==null?void 0:JA.name,(KA=Te==null?void 0:Te.account_manager)==null?void 0:KA.am_name,Te==null?void 0:Te.assigned_am_name,Te==null?void 0:Te.assigned_by_name,Te==null?void 0:Te.assigned_by,(XA=Te==null?void 0:Te.am)==null?void 0:XA.name,(YA=Te==null?void 0:Te.am)==null?void 0:YA.am_name,Te==null?void 0:Te.am_name,Te==null?void 0:Te.account_manager_name,Mt),yn=Vr((ZA=jt==null?void 0:jt.account_manager)==null?void 0:ZA.email,(QA=jt==null?void 0:jt.account_manager)==null?void 0:QA.am_email,(e3=jt==null?void 0:jt.am)==null?void 0:e3.email,(t3=jt==null?void 0:jt.am)==null?void 0:t3.am_email,jt==null?void 0:jt.account_manager_email,U==null?void 0:U.account_manager_email,(r3=U==null?void 0:U.account_manager)==null?void 0:r3.email,(n3=U==null?void 0:U.account_manager)==null?void 0:n3.am_email,se==null?void 0:se.account_manager_email,(s3=se==null?void 0:se.account_manager)==null?void 0:s3.email,(a3=se==null?void 0:se.account_manager)==null?void 0:a3.am_email,(i3=se==null?void 0:se.submission)==null?void 0:i3.account_manager_email,(o3=(l3=se==null?void 0:se.submission)==null?void 0:l3.account_manager)==null?void 0:o3.email,(c3=se==null?void 0:se.requirement)==null?void 0:c3.account_manager_email,(d3=se==null?void 0:se.job)==null?void 0:d3.account_manager_email,(u3=Te==null?void 0:Te.account_manager)==null?void 0:u3.email,(m3=Te==null?void 0:Te.account_manager)==null?void 0:m3.am_email,(f3=Te==null?void 0:Te.am)==null?void 0:f3.email,(h3=Te==null?void 0:Te.am)==null?void 0:h3.am_email,Te==null?void 0:Te.account_manager_email),Br=Vr((p3=jt==null?void 0:jt.account_manager)==null?void 0:p3.id,(x3=jt==null?void 0:jt.account_manager)==null?void 0:x3.am_id,(g3=jt==null?void 0:jt.am)==null?void 0:g3.id,(y3=jt==null?void 0:jt.am)==null?void 0:y3.am_id,jt==null?void 0:jt.account_manager_id,U==null?void 0:U.account_manager_id,(v3=U==null?void 0:U.account_manager)==null?void 0:v3.id,(b3=U==null?void 0:U.account_manager)==null?void 0:b3.am_id,se==null?void 0:se.account_manager_id,(j3=se==null?void 0:se.account_manager)==null?void 0:j3.id,(_3=se==null?void 0:se.account_manager)==null?void 0:_3.am_id,(w3=se==null?void 0:se.submission)==null?void 0:w3.account_manager_id,(k3=(N3=se==null?void 0:se.submission)==null?void 0:N3.account_manager)==null?void 0:k3.id,(S3=se==null?void 0:se.requirement)==null?void 0:S3.account_manager_id,(C3=se==null?void 0:se.job)==null?void 0:C3.account_manager_id,(A3=Te==null?void 0:Te.account_manager)==null?void 0:A3.id,(E3=Te==null?void 0:Te.account_manager)==null?void 0:E3.am_id,(T3=Te==null?void 0:Te.am)==null?void 0:T3.id,(P3=Te==null?void 0:Te.am)==null?void 0:P3.am_id,Te==null?void 0:Te.account_manager_id);return{...se,...U,assignment_role:gn||(U==null?void 0:U.assignment_role),requirement_title:gn||(U==null?void 0:U.requirement_title)||(se==null?void 0:se.requirement_title),job_title:gn||(U==null?void 0:U.job_title)||(se==null?void 0:se.job_title),client_name:js||(U==null?void 0:U.client_name),account_manager_name:va||(U==null?void 0:U.account_manager_name),account_manager_email:yn||(U==null?void 0:U.account_manager_email),account_manager_id:Br||(U==null?void 0:U.account_manager_id),recruiter_name:Vr(U==null?void 0:U.recruiter_name,se==null?void 0:se.recruiter_name,se==null?void 0:se.assigned_recruiter_name,se==null?void 0:se.submitted_by_name,(O3=se==null?void 0:se.submission)==null?void 0:O3.recruiter_name,(R3=se==null?void 0:se.submission)==null?void 0:R3.submitted_by_name),requirement:{...(jt==null?void 0:jt.requirement)||{},...(Te==null?void 0:Te.requirement)||{},...(se==null?void 0:se.requirement)||{},...(U==null?void 0:U.requirement)||{},title:Vr(Te==null?void 0:Te.title,Te==null?void 0:Te.requirement_title,(L3=se==null?void 0:se.requirement)==null?void 0:L3.title,(I3=se==null?void 0:se.requirement)==null?void 0:I3.requirement_title,(F3=U==null?void 0:U.requirement)==null?void 0:F3.title),client_name:Vr(js,Te==null?void 0:Te.client_name,jt==null?void 0:jt.client_name,(D3=se==null?void 0:se.requirement)==null?void 0:D3.client_name,($3=U==null?void 0:U.requirement)==null?void 0:$3.client_name)},job:{...jt||{},...(Te==null?void 0:Te.job)||{},...(se==null?void 0:se.job)||{},...(U==null?void 0:U.job)||{},title:Vr(Te==null?void 0:Te.title,Te==null?void 0:Te.job_title,jt==null?void 0:jt.title,jt==null?void 0:jt.job_title,(M3=se==null?void 0:se.job)==null?void 0:M3.title,(B3=U==null?void 0:U.job)==null?void 0:B3.title,gn),client_name:Vr(js,(U3=Te==null?void 0:Te.job)==null?void 0:U3.client_name,jt==null?void 0:jt.client_name,(z3=se==null?void 0:se.job)==null?void 0:z3.client_name,(W3=U==null?void 0:U.job)==null?void 0:W3.client_name)},account_manager:{...(se==null?void 0:se.account_manager)||{},...(U==null?void 0:U.account_manager)||{},name:va||((V3=U==null?void 0:U.account_manager)==null?void 0:V3.name),am_name:va||((H3=U==null?void 0:U.account_manager)==null?void 0:H3.am_name),email:yn||((q3=U==null?void 0:U.account_manager)==null?void 0:q3.email),am_email:yn||((G3=U==null?void 0:U.account_manager)==null?void 0:G3.am_email),id:Br||((J3=U==null?void 0:U.account_manager)==null?void 0:J3.id),am_id:Br||((K3=U==null?void 0:U.account_manager)==null?void 0:K3.am_id)}}})].sort((U,se)=>{const at=new Date(U.created_at||U.updated_at||0).getTime();return new Date(se.created_at||se.updated_at||0).getTime()-at});d(Qe)}catch(Ue){console.error("Error fetching candidates",Ue)}finally{m(!1)}};g.useEffect(()=>{const je=ye(l);if(!je){s.current="";return}if(s.current===je||u)return;const Re=c.find(oe=>[Bs(oe),oe==null?void 0:oe.id,oe==null?void 0:oe._id,oe==null?void 0:oe.candidate_id,oe==null?void 0:oe.public_id,oe==null?void 0:oe.publicId].some(Ge=>ye(Ge)===je));if(Re){s.current=je,ar(Re);return}s.current=je,(async()=>{try{E(!0);const oe=await zr.getCandidateById(l);oe&&(N(!0),k(oe))}catch(oe){console.error("Failed to open deep-linked candidate",oe)}finally{E(!1)}})()},[c,l,u]),g.useEffect(()=>()=>{$e()},[]);const Ze=g.useMemo(()=>c.map(je=>{const Re=eu(je,ue);if(!Re)return{candidate:je,profile:null};const oe=String(Re.status||"").toLowerCase().trim();return(oe==="new"||oe==="verified")&&FMe(je)&&(Re.status="sourced"),{candidate:je,profile:Re}}).filter(je=>je.profile),[c,ue]),pt=g.useMemo(()=>{const je=h.trim().toLowerCase();return Ze.filter(({profile:Re})=>{const oe=String(Re.status||"").toLowerCase().trim(),Ue=b?oe===b.toLowerCase():!0,Ge=je?[Re.name,Re.email,Re.phone,Re.location,...Array.isArray(Re.skills)?Re.skills.map(ie=>ie.name||ie):[]].filter(Boolean).some(ie=>String(ie).toLowerCase().includes(je)):!0;return Ue&&Ge})},[Ze,h,b]),Ve=g.useMemo(()=>{const je=new Set;return Ze.forEach(({profile:oe})=>{const Ue=String((oe==null?void 0:oe.status)||"").toLowerCase().trim();Ue&&je.add(Ue)}),[...zI,...Array.from(je).filter(oe=>!zI.includes(oe))].map(oe=>({value:oe,label:Gs(oe)}))},[Ze]),Je=je=>{p(Re=>{const oe=new Set(Re);return oe.has(je)?oe.delete(je):oe.add(je),oe})},Ke=()=>p(new Set),gt=()=>{p(new Set(pt.map(({profile:je})=>je.id||je._id)))},At=x.size,Lt=()=>{const je=At>0?pt.filter(({profile:ut})=>x.has(ut.id||ut._id)):pt;if(je.length===0){alert("No candidates to export.");return}const Re=["Name","Email","Phone","Status","Experience","Notice Period","Location","Skills"],oe=je.map(({profile:ut})=>[ut.name||"",ut.email||"",ut.phone||"",ut.status||"",ut.totalExperience||"",ut.noticePeriod||"",ut.location||"",Array.isArray(ut.skills)?ut.skills.map(Z=>Z.name||Z).join(", "):""]),Ue=[Re,...oe].map(ut=>ut.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(",")).join(`
`),Ge=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL(Ge),ge=document.createElement("a");ge.href=ie,ge.download="candidates.csv",ge.click(),URL.revokeObjectURL(ie)},Bt=w?eu(w,ue):null,ar=async je=>{if(!je)return;N(!0),k(je);const Re=Bs(je);if(Re)try{E(!0);const oe=await zr.getCandidateById(Re);k({...je,...oe||{}})}catch(oe){console.error("Failed to load candidate detail",oe)}finally{E(!1)}},er=()=>{if(N(!1),k(null),Me(),l||o){const je=new URLSearchParams(t);je.delete("candidateId"),je.delete("viewOnly"),r(je,{replace:!0}),s.current=""}},Be=je=>{const Re=Bs(je),oe=Re?`?candidateId=${Re}`:"";e(`/recruiter/interviews/calendar${oe}`)},xt=async je=>{const Re=Bs(je);if(Re)try{await zr.updateStatus(Re,{status:"shortlisted"}),We()}catch(oe){console.error("Failed to shortlist candidate",oe)}},mt=async je=>{const Re=Bs(je);if(Re)try{await q.post(`/v1/candidate-workflow/${Re}/send-to-am`),alert("Candidate sent to Account Manager successfully!"),We(),er()}catch(oe){console.error("Failed to send to Account Manager",oe),alert("Failed to send candidate to Account Manager")}},It=async(je,Re)=>{var Ge,ie;const Ue=Bs(je||w);if(!Ue)return{ok:!1,message:"Candidate ID not found"};if(!Re)return{ok:!1,message:"Please select a valid status"};try{if(await q.put(`/v1/workflow/candidates/${Ue}/status`,{new_status:Re,notes:"Status updated from recruiter candidate profile"}),await We(),w&&Bs(w)===Ue){const ge=await zr.getCandidateById(Ue);k(ut=>({...ut||{},...ge||{}}))}return{ok:!0}}catch(ge){return console.error("Failed to update candidate status",ge),{ok:!1,message:((ie=(Ge=ge==null?void 0:ge.response)==null?void 0:Ge.data)==null?void 0:ie.detail)||"Failed to update status"}}},Yt=(je,Re=null)=>{ne(je),M(Re||null),ae(!0)},Ne=async()=>{if(!w)return;const je=Bs(w);if(je)try{const Re=await zr.getCandidateById(je);k(oe=>({...oe||{},...Re||{}}))}catch(Re){console.error("Failed to refresh candidate detail",Re)}},st=je=>{var Re,oe,Ue,Ge,ie,ge;return{id:(je==null?void 0:je.account_manager_id)||((Re=je==null?void 0:je.account_manager)==null?void 0:Re.id)||((oe=je==null?void 0:je.account_manager)==null?void 0:oe.am_id)||"",name:(je==null?void 0:je.account_manager_name)||((Ue=je==null?void 0:je.account_manager)==null?void 0:Ue.name)||((Ge=je==null?void 0:je.account_manager)==null?void 0:Ge.am_name)||"",email:(je==null?void 0:je.account_manager_email)||((ie=je==null?void 0:je.account_manager)==null?void 0:ie.email)||((ge=je==null?void 0:je.account_manager)==null?void 0:ge.am_email)||""}},qe=async je=>{var Ge,ie;if(!je)return je;const Re=st(je);if(Re.id||Re.email||Re.name)return je;const oe=(je==null?void 0:je.applied_job_id)||(je==null?void 0:je.job_id)||(je==null?void 0:je.jobId)||"";if(!oe)return je;const Ue=a.current.get(oe);if(Ue)return{...je,...Ue};try{const ge=await q.get(`/v1/recruiter/assigned-jobs/${oe}`),ut=((Ge=ge==null?void 0:ge.data)==null?void 0:Ge.account_manager)||{},Z={account_manager_id:ut.am_id||"",account_manager_name:ut.am_name||"",account_manager_email:ut.am_email||"",job_title:(je==null?void 0:je.job_title)||((ie=ge==null?void 0:ge.data)==null?void 0:ie.title)||""};return a.current.set(oe,Z),{...je,...Z}}catch{return je}},ft=async(je,Re)=>{if(!je)return;const oe=Re==="am"?await qe(je):je;me({open:!0,recipient:Re,candidate:oe})},kt=async je=>{const Re=Se.candidate,oe=Bs(Re);if(!oe)throw new Error("Candidate ID not found");const Ue=(je==null?void 0:je.deliveryMode)||"email",Ge=Ue==="email"||Ue==="both",ie=Ue==="portal_note"||Ue==="both",ge=(je==null?void 0:je.recipient)||Se.recipient||"candidate",ut=String((je==null?void 0:je.subject)||"").trim(),Z=String((je==null?void 0:je.body)||"").trim(),H=String((je==null?void 0:je.to)||"").trim(),V=String((je==null?void 0:je.cc)||"").trim();if(!Z)throw new Error("Message body is required");if(ie){const ee=ge==="am"?"Account Manager":"Candidate",X=ut?`[Message to ${ee}] ${ut}
${Z}`:`[Message to ${ee}] ${Z}`;await zr.addCandidateNote(oe,{note:X})}if(Ge)if(ge==="candidate"){const ee=new FormData;ee.append("subject",ut||"Candidate Update"),ee.append("message_body",Z),ee.append("candidate_ids",oe),await q.post("/v1/candidates/email/send",ee,{headers:{"Content-Type":"multipart/form-data"}})}else{const ee=st(Re),X=H||ee.email;if(!X)throw new Error("Account Manager email is not mapped for this job");const te=new URLSearchParams;ut&&te.set("subject",ut),Z&&te.set("body",Z),V&&te.set("cc",V),window.open(`mailto:${encodeURIComponent(X)}?${te.toString()}`,"_blank")}await We(),await Ne()},Oe=(je=[])=>{!Array.isArray(je)||je.length===0||y(Re=>[...je,...Re].slice(0,50))};return n.jsxs("div",{className:"candidate-profile",children:[n.jsxs("div",{className:"candidate-profile__header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"candidate-profile__title",children:"Candidate Profiles"}),n.jsx("p",{className:"candidate-profile__subtitle",children:"Every candidate in your pipeline, ready for quick review."})]}),n.jsx("div",{className:"candidate-profile__header-actions",children:n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:We,children:"Refresh"})})]}),n.jsxs("details",{className:"candidate-profile__import-panel",children:[n.jsxs("summary",{className:"candidate-profile__import-summary",children:[n.jsx("span",{children:"Bulk Import"}),n.jsx("span",{className:"candidate-profile__import-summary-subtext",children:"Resume and CSV tools"})]}),n.jsx("div",{className:"candidate-profile__import-content",children:n.jsx(RMe,{onImportComplete:We,onLog:Oe})})]}),n.jsxs("div",{className:"candidate-profile__toolbar",children:[n.jsxs("div",{className:"candidate-profile__filters",children:[n.jsx("input",{type:"text",placeholder:"Search name, email, or skills",value:h,onChange:je=>v(je.target.value)}),n.jsxs("select",{value:b,onChange:je=>j(je.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),Ve.map(je=>n.jsx("option",{value:je.value,children:je.label},je.value))]})]}),n.jsxs("div",{className:"candidate-profile__bulk",children:[n.jsxs("div",{className:"candidate-profile__bulk-meta",children:[n.jsx("span",{className:"candidate-profile__bulk-count",children:u?"Loading candidates...":`${pt.length} candidates`}),n.jsxs("span",{className:"candidate-profile__bulk-count",children:["Selected ",At]})]}),n.jsxs("div",{className:"candidate-profile__bulk-actions",children:[n.jsx("button",{type:"button",className:"candidate-card__btn",onClick:gt,children:"Select All"}),n.jsx("button",{type:"button",className:"candidate-card__btn",onClick:Ke,children:"Clear"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--icon",disabled:At===0,onClick:()=>{const je=Array.from(x)[0],Re=Ze.find(({profile:oe})=>oe.id===je||oe._id===je);Re&&ft(Re.candidate,"am")},title:"Message AM","aria-label":"Message AM",children:n.jsx(DMe,{})}),n.jsx("button",{type:"button",className:"candidate-card__btn",disabled:At===0,onClick:()=>{const je=Array.from(x)[0],Re=Ze.find(({profile:oe})=>oe.id===je||oe._id===je);Re&&ft(Re.candidate,"candidate")},children:"Message Candidate"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--primary",onClick:Lt,children:"Export CSV"})]})]})]}),u?n.jsx("div",{className:"candidate-profile__loading",children:"Loading candidates..."}):pt.length===0?n.jsx("div",{className:"candidate-profile__empty",children:"No candidates found. Try refreshing the list."}):n.jsx("div",{className:"candidate-grid",children:pt.map(({candidate:je,profile:Re})=>{const oe=Re.id||je.id;return n.jsx(F7e,{candidate:je,profile:Re,workflowMeta:MMe(je,Re),selectable:!0,selected:x.has(oe),onSelect:Je,onViewDetails:ar},oe)})}),_&&w&&Bt&&n.jsx(aj,{candidate:w,profile:Bt,loading:S,onClose:er,onPreviewResume:Fe,onScheduleInterview:Be,onShortlist:xt,onMessageAm:je=>ft(je,"am"),onMessageCandidate:je=>ft(je,"candidate"),onOpenFullProfile:()=>e(`/recruiter/candidate-profile/${Bs(w)}`),onOpenFeedback:Yt,onSendToAM:()=>mt(w),onUpdateStatus:It,workflowStatusOptions:Ve,hideQuickActions:!1,hideStatusControls:!0,hideFeedbackSection:!0,hideSendToAMAction:!0,hideScheduleInterviewAction:!0,hideOpenFullProfileAction:!0}),O&&n.jsx("div",{className:"candidate-preview-modal",onClick:je=>{je.target===je.currentTarget&&Me()},children:n.jsxs("div",{className:"candidate-preview",children:[n.jsxs("div",{className:"candidate-preview__header",children:[n.jsx("span",{children:"Resume Preview"}),n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:Me,children:"Close"})]}),F?n.jsx("div",{className:"candidate-profile__loading",children:"Loading resume preview..."}):I==="html"?n.jsx("div",{className:"candidate-preview__html",dangerouslySetInnerHTML:{__html:D}}):I==="text"?n.jsx("pre",{className:"candidate-preview__text",children:re}):I==="image"&&T?n.jsx("img",{className:"candidate-preview__image",src:T,alt:"Resume preview"}):T?n.jsx("iframe",{src:G||T,title:"Resume preview"}):n.jsx("div",{className:"candidate-profile__empty",children:"Resume preview unavailable."}),W&&n.jsx("div",{className:"candidate-profile__empty",children:W}),n.jsx("div",{className:"candidate-preview__actions",children:n.jsx("button",{type:"button",className:"candidate-card__btn candidate-card__btn--ghost",onClick:()=>window.open(T||C,"_blank"),disabled:!T&&!C,children:"Open in new tab"})})]})}),ce&&fe&&n.jsx(p4,{isOpen:ce,candidateId:Bs(fe),candidateName:fe.full_name||fe.name||"Candidate",initialData:he,onClose:()=>{ae(!1),M(null)},onSuccess:()=>{ae(!1),M(null),We(),Ne()}}),Se.open&&Se.candidate&&n.jsx(bV,{candidate:Se.candidate,recipient:Se.recipient,onClose:()=>me({open:!1,recipient:"am",candidate:null}),onSend:async je=>{try{await kt(je)}catch(Re){alert((Re==null?void 0:Re.message)||"Failed to send message");return}me({open:!1,recipient:"am",candidate:null})}}),f.length>0&&n.jsxs("div",{className:"candidate-profile__import-log",children:[n.jsx("h3",{className:"candidate-profile__import-log-title",children:"Recent Imports"}),n.jsx("div",{className:"candidate-profile__import-log-list",children:f.map((je,Re)=>n.jsxs("div",{className:"candidate-profile__import-log-item",children:[n.jsxs("div",{className:"candidate-profile__import-log-primary",children:[n.jsx("span",{className:"candidate-profile__import-log-name",children:je.name||"Unknown"}),je.email&&n.jsx("span",{className:"candidate-profile__import-log-email",children:je.email})]}),n.jsxs("div",{className:"candidate-profile__import-log-meta",children:[n.jsx("span",{className:"candidate-profile__import-log-pill",children:je.type==="excel"?"Excel":"Resume"}),n.jsx("span",{className:"candidate-profile__import-log-status",children:je.status}),je.resume&&n.jsx("span",{className:"candidate-profile__import-log-file",children:je.resume})]})]},Re))})]})]})}function BMe(){const[e,t]=g.useState([]),[r,s]=g.useState(new Set),[a,i]=g.useState(!1),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState("");g.useEffect(()=>{f()},[]);async function f(){i(!0);try{const h=await zr.listCandidates({limit:100}),v=Array.isArray(h)?h:(h==null?void 0:h.items)??[];t(v)}catch(h){console.error(h)}finally{i(!1)}}function y(h){s(v=>{const b=new Set(v);return b.has(h)?b.delete(h):b.add(h),b})}async function x(){var v;if(selectedIds.size===0){alert("Select at least one candidate");return}const h=new FormData;h.append("subject",l.trim()),h.append("message_body",message.trim()),Array.from(selectedIds).forEach(b=>{h.append("candidate_ids",b)});try{await api.post("/v1/candidates/email/send",h),alert("Emails sent successfully")}catch(b){console.error(((v=b.response)==null?void 0:v.data)||b),alert("Send email failed")}}async function p(){if(!u)return alert("Select status");try{await Promise.all(Array.from(r).map(h=>zr.updateStatus(h,{status:u}))),alert("Status updated"),m(""),f()}catch(h){console.error(h),alert("Bulk status update failed")}}return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Bulk Candidate Actions"}),n.jsx("div",{className:"bg-white rounded shadow p-4",children:a?"Loading...":n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map(h=>{const v=h.id??h._id;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:r.has(v),onChange:()=>y(v)})}),n.jsx("td",{children:h.name||"-"}),n.jsx("td",{children:h.email}),n.jsx("td",{children:h.status})]},v)})})]})}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Bulk Email"}),n.jsx("input",{value:l,onChange:h=>o(h.target.value),placeholder:"Subject",className:"w-full p-2 border rounded"}),n.jsx("textarea",{value:c,onChange:h=>d(h.target.value),placeholder:"Email body",rows:4,className:"w-full p-2 border rounded"}),n.jsx("button",{onClick:x,className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"Send Email"})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-3",children:[n.jsx("h3",{className:"font-semibold",children:"Bulk Status Update"}),n.jsxs("select",{value:u,onChange:h=>m(h.target.value),className:"p-2 border rounded",children:[n.jsx("option",{value:"",children:"Select status"}),n.jsx("option",{value:"screening",children:"Screening"}),n.jsx("option",{value:"shortlisted",children:"Shortlisted"}),n.jsx("option",{value:"rejected",children:"Rejected"})]}),n.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Update Status"})]})]})}function qI(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState(!1),[i,l]=g.useState(null),[o,c]=g.useState({name:"",email:"",classification:""}),[d,u]=g.useState(new Set),[m,f]=g.useState(1),y=20,[x,p]=g.useState(0),[h,v]=g.useState(""),[b,j]=g.useState(!1),[_,N]=g.useState(!1),[w,k]=g.useState([]),[S,E]=g.useState(""),[T,A]=g.useState(!1),[C,P]=g.useState(!1),[O,R]=g.useState(!1),[F,Q]=g.useState(""),[W,L]=g.useState(""),[I,K]=g.useState(!1),[D]=Os(),Y=D.get("job_id");g.useEffect(()=>{B()},[o,m]),g.useEffect(()=>{re()},[]);async function re(){try{const ue=await q.get("/v1/client/master");k(ue.data||[])}catch(ue){console.error("Failed to load clients",ue)}}async function B(){var ue,ye,Ye,lt;a(!0),l(null);try{const Ae={q:o.email?o.email.trim():o.name?o.name.trim():void 0,classification:o.classification||void 0,status:"verified",page:m,limit:y},$e=o.classification?await q.get("/v1/candidates/pool",{params:Ae}).then(We=>We.data):await zr.listCandidates(Ae),Fe=(Array.isArray($e)?$e:($e==null?void 0:$e.items)??[]).filter(We=>We.status==="verified");r(Fe),p(Fe.length)}catch(xe){if(console.error(xe),((ue=xe.response)==null?void 0:ue.status)===403)l("Access denied: You don't have permission to view the candidate pool. Please contact your administrator.");else if(((ye=xe.response)==null?void 0:ye.status)===404)l("Candidate pool endpoint not found. Please check your configuration.");else{const Ae=((lt=(Ye=xe.response)==null?void 0:Ye.data)==null?void 0:lt.detail)||xe.message||"Unknown error occurred";l(`Failed to load candidates: ${Ae}`)}}finally{a(!1)}}const G=g.useMemo(()=>[...t].sort((ue,ye)=>new Date(ye.created_at||ye.updated_at||0)-new Date(ue.created_at||ue.updated_at||0)),[t]),ce=G.filter(ue=>d.has(ue.id??ue._id)),ae=G.length>0&&G.every(ue=>d.has(ue.id??ue._id));function fe(ue){u(ye=>{const Ye=new Set(ye);return Ye.has(ue)?Ye.delete(ue):Ye.add(ue),console.log("SELECTED IDS =>",Array.from(Ye)),Ye})}function ne(){u(ae?new Set:new Set(G.map(ue=>ue.id??ue._id)))}async function he(){if(d.size===0||!h){alert("Select candidates and classification");return}if(window.confirm(`Classify ${d.size} candidate(s) as ${h}?`)){j(!0);try{await Promise.all(Array.from(d).map(ue=>q.put(`/v1/candidates/${ue}/classification`,{classification:h}))),v(""),B()}finally{j(!1)}}}async function M(){var ue;if(!Y){alert("Job ID missing");return}if(d.size===0){alert("Select at least one candidate");return}try{await Promise.all(Array.from(d).map(ye=>q.post(`/v1/jobs/${Y}/submissions`,{job_id:Y,candidate_id:ye}))),alert("Candidates successfully sent to Account Manager "),u(new Set)}catch(ye){console.error("Attach failed:",((ue=ye.response)==null?void 0:ue.data)||ye),alert("Failed to attach candidates")}}async function Se(ue){if(d.size===0){alert("Select candidates first");return}if(ue==="employee"&&ce.some(ye=>ye.classification!=="payroll")){alert("Only Payroll candidates can be converted to Employee");return}if(ue==="consultant"){if(ce.some(ye=>!ye.classification||ye.classification==="unclassified")){alert("Please classify candidate before converting to Consultant");return}if(!S){alert("Please assign client");return}}if(ue==="consultant"&&!S){alert("Please assign client");return}if(window.confirm(`Convert ${d.size} candidate(s) to ${ue}?`)){N(!0);try{await Promise.all(Array.from(d).map(ye=>q.post(ue==="employee"?`/v1/employees/from-candidate/${ye}`:`/v1/consultants/from-candidate/${ye}`,ue==="consultant"?{client_id:S}:void 0))),u(new Set),B()}finally{N(!1)}}}function me(){if(G.length===0)return;const ue=G.map(lt=>({Name:lt.full_name||"",Email:lt.email||"",Phone:lt.phone||"",Job:lt.job_title||"",Classification:lt.classification||"",Created:lt.created_at?new Date(lt.created_at).toLocaleDateString():""})),ye=Il.json_to_sheet(ue),Ye=Il.book_new();Il.book_append_sheet(Ye,ye,"Candidates"),kp(Ye,"Candidate_Pool.xlsx")}async function Pe(){if(console.log("MERGE CLICKED WITH IDS:",Array.from(d)),d.size<2){alert("Select at least two candidates");return}P(!0);try{await zr.mergeCandidates({candidate_ids:Array.from(d)}),u(new Set),A(!1),await B(),alert("Candidates merged successfully ")}catch(ue){console.error("Merge failed:",ue),alert("Merge failed ")}finally{P(!1)}}return n.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-purple-50 via-purple-25 to-emerald-50 rounded-lg min-h-screen",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Candidate Pool"}),n.jsx("p",{className:"text-purple-100 mt-2",children:"Manage and convert candidates"})]}),n.jsx("button",{onClick:()=>e("/recruiter/assigned-jobs"),className:"px-4 py-2 bg-white text-purple-600 font-semibold rounded hover:bg-gray-100 transition",children:" Back to Assigned Jobs"})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 bg-white rounded-lg shadow-lg p-5 border border-purple-200",children:[n.jsx("button",{onClick:()=>Se("employee"),disabled:!d.size||_,className:"px-4 py-2 bg-gradient-to-r from-purple-100 to-purple-200 text-purple-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Convert  Employee"}),n.jsx("button",{onClick:()=>Se("consultant"),disabled:!d.size||_,className:"px-4 py-2 bg-gradient-to-r from-emerald-100 to-emerald-200 text-emerald-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Convert  Consultant"}),n.jsxs("select",{value:S,onChange:ue=>E(ue.target.value),className:"border-2 border-purple-300 px-3 py-2 rounded bg-white font-medium",children:[n.jsx("option",{value:"",children:"Assign Client"}),w.map(ue=>n.jsx("option",{value:ue.id,children:ue.company_name||ue.name||ue.email},ue.id))]}),n.jsxs("select",{value:h,onChange:ue=>v(ue.target.value),className:"border-2 border-purple-300 px-2 py-1 rounded bg-white font-medium",children:[n.jsx("option",{value:"",children:"Set Classification"}),n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]}),n.jsx("button",{onClick:he,disabled:!d.size||!h||b,className:"px-4 py-2 bg-gradient-to-r from-emerald-100 to-emerald-200 text-emerald-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:"Confirm Classification"}),Y&&n.jsx("button",{onClick:M,disabled:!d.size,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-emerald-500 text-white rounded font-semibold disabled:opacity-40 hover:shadow-md transition",children:"Attach Selected  Job"}),n.jsx("button",{onClick:()=>R(!0),disabled:!d.size,title:"Bulk Email",className:`\r
     p-2 rounded \r
    bg-gradient-to-r from-red-500 to-red-600 text-white \r
    border-2 border-red-600\r
    hover:shadow-md\r
    disabled:opacity-40\r
    transition\r
    font-semibold\r
  `,children:""}),n.jsx("button",{onClick:me,className:"px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border-2 border-gray-300 rounded font-semibold hover:shadow-md transition",children:"Export"}),n.jsx("button",{onClick:()=>{if(d.size<2){alert("Select at least two candidates");return}window.confirm("Are you sure you want to merge selected candidates?")&&Pe()},disabled:C,className:"px-4 py-2 bg-gradient-to-r from-red-100 to-red-200 text-red-700 rounded font-semibold disabled:opacity-50 hover:shadow-md transition",children:C?"Merging...":"Merge Selected"})]}),n.jsx("div",{className:"bg-white border-2 border-purple-200 rounded-lg shadow-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border-collapse",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-50 to-emerald-50 border-b-2 border-purple-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 border-r border-purple-200 text-center w-10",children:n.jsx("input",{type:"checkbox",checked:ae,onChange:ne,className:"cursor-pointer w-4 h-4"})}),n.jsx("th",{className:"p-2 border-r border-purple-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:o.name,onChange:ue=>c(ye=>({...ye,name:ue.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none"}),!o.name&&n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none",children:"Name"})]})}),n.jsx("th",{className:"p-2 border-r border-purple-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:o.email,onChange:ue=>c(ye=>({...ye,email:ue.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none"}),!o.email&&n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none",children:"Email"})]})}),n.jsx("th",{className:"p-2 border-r border-purple-200 text-xs font-semibold text-center",children:"Phone"}),n.jsx("th",{className:"p-2 border-r border-purple-200 text-xs font-semibold text-center",children:"Applied Job"}),n.jsx("th",{className:"p-2",children:n.jsxs("select",{value:o.classification,onChange:ue=>c(ye=>({...ye,classification:ue.target.value})),className:"w-full border-2 border-purple-300 px-2 py-2 text-sm bg-white rounded focus:border-emerald-400 focus:outline-none",children:[n.jsx("option",{value:"",children:"Classification"}),n.jsx("option",{value:"payroll",children:"Payroll"}),n.jsx("option",{value:"sourcing",children:"Sourcing"})]})})]})}),n.jsx("tbody",{children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"Loading..."})}):i?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-red-600 font-semibold",children:i})}):G.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"No candidates found"})}):G.map((ue,ye)=>{const Ye=ue.id??ue._id,lt=`${Ye}-${ye}`;return n.jsxs("tr",{className:"border-b border-purple-100 hover:bg-purple-25 transition",children:[n.jsx("td",{className:"p-2 border-r border-purple-100",children:n.jsx("input",{type:"checkbox",checked:d.has(Ye),onChange:()=>fe(Ye),className:"cursor-pointer w-4 h-4"})}),n.jsx("td",{className:"p-2 border-r border-purple-100 font-medium text-gray-900",children:ue.full_name}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ue.email}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ue.phone||""}),n.jsx("td",{className:"p-2 border-r border-purple-100 text-gray-700",children:ue.job_title||""}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`px-2 py-1 bg-gradient-to-r from-purple-50 to-emerald-50/40\r
\r
 text-purple-700 rounded text-xs font-semibold`,children:ue.classification||""})})]},lt)})})]})}),n.jsxs("div",{className:"flex justify-between items-center text-sm bg-white rounded-lg shadow-lg p-4 border border-purple-200",children:[n.jsxs("span",{className:"text-gray-700 font-semibold",children:["Showing ",G.length," of ",x]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>f(ue=>Math.max(1,ue-1)),className:"px-3 py-1 border-2 border-purple-300 rounded font-semibold text-purple-700 hover:bg-purple-50 transition",children:"Prev"}),n.jsx("span",{className:"px-3 py-1 border-2 border-purple-300 rounded font-bold text-purple-700 bg-purple-50",children:m}),n.jsx("button",{onClick:()=>f(ue=>ue+1),className:"px-3 py-1 border-2 border-purple-300 rounded font-semibold text-purple-700 hover:bg-purple-50 transition",children:"Next"})]})]})]})}function UMe(){const[e,t]=g.useState([]),[r,s]=g.useState(!1),[a,i]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(null),[u,m]=g.useState([]),[f,y]=g.useState(!1),[x,p]=g.useState(!1),[h,v]=g.useState([]),[b,j]=g.useState(!1),_=["identity","education","employment","address","criminal"],[N,w]=g.useState(["identity","education"]);g.useEffect(()=>{k(),S()},[]),g.useEffect(()=>{c?C(c.id||c._id):v([])},[c]);async function k(){s(!0);try{const F={q:a||void 0,status:l||void 0},Q=await zr.listCandidates(F),W=Array.isArray(Q)?Q:(Q==null?void 0:Q.items)??[];t(W)}catch(F){console.error("fetchCandidates error",F),alert("Failed to load candidates")}finally{s(!1)}}async function S(){var F;y(!0);try{const Q=await q.get("/v1/bgv/vendors");m(((F=Q.data)==null?void 0:F.data)??Q.data??[])}catch(Q){console.error("fetchVendors error",Q),m([])}finally{y(!1)}}function E(F){w(Q=>{const W=new Set(Q);return W.has(F)?W.delete(F):W.add(F),Array.from(W)})}async function T(F){if(F){if(N.length===0){alert("Select at least one check to initiate.");return}if(window.confirm(`Initiate BGV for candidate ${F} with checks: ${N.join(", ")}?`)){p(!0);try{const Q={checks:N};await zr.initiateBgvCheck(F,Q),alert("BGV initiated"),k(),C(F)}catch(Q){console.error("initiateBgv error",Q),alert("Failed to initiate BGV")}finally{p(!1)}}}}async function A(F,Q){if(!F||!Q){alert("Choose a vendor");return}if(window.confirm("Assign vendor for BGV?")){p(!0);try{await zr.assignBgvVendor(F,{vendor_id:Q}),alert("Vendor assigned"),k(),d(W=>W&&{...W,bgv_vendor_id:Q}),C(F)}catch(W){console.error("assignVendor error",W),alert("Failed to assign vendor")}finally{p(!1)}}}async function C(F){if(F){j(!0);try{const Q=await zr.getBgvReports(F),W=Array.isArray(Q)?Q:(Q==null?void 0:Q.items)??[];v(W)}catch(Q){console.error("getBgvReports error",Q),v([])}finally{j(!1)}}}async function P(F,Q,W){if(window.confirm(`Confirm mark candidate as ${Q}?`))try{await q.patch(`/v1/bgv/admin/verify/${F}`,{status:Q,remarks:W}),alert("Final verification updated"),k(),d(L=>L&&{...L,bgv_final_status:Q})}catch(L){console.error("final verify failed",L),alert("Failed to update")}}function O(F){d(F)}function R(){return b?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading reports..."}):!h||h.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No reports yet."}):n.jsx("ul",{className:"space-y-2",children:h.map(F=>{const Q=F.id??F._id??F.report_id,W=F.name||F.type||`Report ${Q}`,L=F.download_url||F.report_url||F.url,I=F.expiry_date||F.expires_at||F.expiry;return n.jsxs("li",{className:"p-2 border rounded flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:W}),n.jsx("div",{className:"text-xs text-gray-500",children:F.status||"unknown status"}),I&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Expiry: ",new Date(I).toLocaleDateString()]})]}),n.jsx("div",{className:"flex flex-col gap-2 items-end",children:L?n.jsx("a",{href:L,target:"_blank",rel:"noreferrer",className:"text-sm text-indigo-600 underline",children:"Open"}):n.jsx("span",{className:"text-xs text-gray-500",children:"No URL"})})]},Q)})})}return n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Background Verification"}),n.jsx("div",{className:"text-sm text-gray-500",children:"BGC initiation, vendor assignment, reports & expiry"})]}),n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("input",{placeholder:"Search name or email...",className:"p-2 border rounded flex-1",value:a,onChange:F=>i(F.target.value)}),n.jsxs("select",{value:l,onChange:F=>o(F.target.value),className:"p-2 border rounded",children:[n.jsx("option",{value:"",children:"All candidates"}),n.jsx("option",{value:"verified",children:"Verified / Eligible"}),n.jsx("option",{value:"bgv_pending",children:"BGV Pending"}),n.jsx("option",{value:"bgv_in_progress",children:"BGV In progress"}),n.jsx("option",{value:"bgv_complete",children:"BGV Complete"})]}),n.jsx("button",{onClick:()=>k(),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Refresh"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Candidates"}),r?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):e.length===0?n.jsx("div",{className:"text-sm text-gray-500",children:"No candidates found."}):n.jsx("div",{className:"space-y-2",children:e.map(F=>{const Q=F.id??F._id;return n.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:F.full_name||F.email}),n.jsxs("div",{className:"text-xs text-gray-500",children:[F.email,"  ",F.phone||"N/A"]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["BGV status: ",F.bgv_status||F.status||"N/A"]})]}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{onClick:()=>O(F),className:"px-3 py-1 border rounded text-sm",children:"Open"}),n.jsx("button",{onClick:()=>T(Q),disabled:x,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:x?"Starting...":"Initiate BGV"}),n.jsx("div",{children:n.jsxs("select",{defaultValue:"",onChange:W=>{W.target.value&&A(Q,W.target.value)},className:"p-1 border rounded text-sm","aria-label":"Assign vendor",children:[n.jsx("option",{value:"",children:"Assign vendor"}),f?n.jsx("option",{children:"Loading vendors..."}):u.length===0?n.jsx("option",{children:"No vendors"}):u.map(W=>n.jsx("option",{value:W.id||W._id,children:W.name},W.id||W._id))]})})]})]},Q)})})]})}),n.jsxs("aside",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Selected Candidate"}),c?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"font-medium",children:c.name||c.email}),n.jsx("div",{className:"text-xs text-gray-500",children:c.email}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Phone: ",c.phone||"N/A"]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["BGV status:"," ",c.bgv_status||c.status||"N/A"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Select checks"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(F=>n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:N.includes(F),onChange:()=>E(F)}),n.jsx("span",{className:"capitalize",children:F})]},F))}),n.jsx("div",{className:"mt-2",children:n.jsx("button",{onClick:()=>T(c.id||c._id),disabled:x,className:"px-3 py-2 bg-green-600 text-white rounded",children:x?"Initiating...":"Initiate BGV"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Assigned Vendor"}),n.jsx("div",{children:n.jsxs("select",{value:c.bgv_vendor_id||"",onChange:F=>A(c.id||c._id,F.target.value),className:"p-2 border rounded w-full",children:[n.jsx("option",{value:"",children:"Select vendor"}),f?n.jsx("option",{children:"Loading vendors..."}):u.map(F=>n.jsx("option",{value:F.id||F._id,children:F.name||F.company_name},F.id||F._id))]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Reports"}),R()]}),n.jsxs("div",{className:"mt-4 p-3 border rounded",children:[n.jsx("h4",{className:"text-sm font-medium mb-1",children:"Final HR Verification"}),n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["Current Status:"," ",n.jsx("span",{className:"font-semibold",children:(c==null?void 0:c.bgv_final_status)||"Not Reviewed"})]}),n.jsx("textarea",{className:"w-full border p-2 rounded mb-2",placeholder:"Remarks (optional)",onChange:F=>c._remarks=F.target.value}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-2 bg-green-600 text-white rounded",onClick:()=>P(c.id||c._id,"verified",c._remarks||""),children:"Approve"}),n.jsx("button",{className:"px-3 py-2 bg-red-600 text-white rounded",onClick:()=>P(c.id||c._id,"failed",c._remarks||""),children:"Reject"})]})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"Select a candidate to see BGV options and reports"})]})]})]})}const zMe=g.createContext({role:null,permissions:[],hasPermission:()=>!1,loading:!0,setPermissions:()=>{}});function GI({children:e}){const[t,r]=g.useState(null),[s,a]=g.useState([]),[i,l]=g.useState(!0),o=async()=>{var d;l(!0);try{const u=await q.get("/auth/me");r(((d=u.data)==null?void 0:d.role)||null);const f=(await q.get("/v1/permissions/me")).data||{},y=(f==null?void 0:f.modules)||{},x=Array.isArray(f)?f.map(p=>typeof p=="string"?p:p==null?void 0:p.key).filter(Boolean):Object.entries(y).flatMap(([p,h])=>(Array.isArray(h)?h:[]).map(v=>`${String(p).toLowerCase()}:${String(v).toLowerCase()}`));a(x)}catch{r(null),a([])}finally{l(!1)}};g.useEffect(()=>{let d=!0;o();const u=Qi.on("permissions:updated",()=>d&&o()),m=Qi.on("role-permissions:updated",()=>d&&o()),f=Qi.on("users:updated",()=>d&&o());return()=>{d=!1,u(),m(),f()}},[]);const c=d=>{const u=String(d||"").toLowerCase();return s.includes(u)};return n.jsx(zMe.Provider,{value:{role:t,permissions:s,hasPermission:c,loading:i,setPermissions:a},children:e})}const ya=e=>{var t;return((t=e.data)==null?void 0:t.data)||e.data},WMe=(e={})=>q.get("/v1/workflow/am/requirements",{params:e}).then(ya),VMe=e=>q.post("/v1/workflow/am/requirements",e).then(ya),HMe=e=>q.post("/v1/workflow/am/requirements/parse-email",{raw_email:e}).then(ya),qMe=(e,t)=>q.post(`/v1/workflow/am/requirements/${e}/assign`,t).then(ya),GMe=e=>q.get(`/v1/workflow/am/requirements/${e}`).then(ya),JMe=(e,t)=>q.post(`/v1/workflow/am/submissions/${e}/stage`,t).then(ya),KMe=e=>q.post(`/v1/workflow/am/interviews/${e}/client-informed`).then(ya),XMe=(e="assigned")=>q.get("/v1/workflow/recruiter/requirements",{params:{scope:e}}).then(ya),YMe=e=>q.get(`/v1/workflow/recruiter/requirements/${e}`).then(ya),ZMe=(e,t=0)=>q.post(`/v1/workflow/recruiter/requirements/${e}/match`,{min_score:t}).then(ya),QMe=(e,t,r)=>q.post(`/v1/workflow/recruiter/requirements/${e}/candidates/${t}/call-note`,r).then(ya),e9e=(e,t)=>q.post(`/v1/workflow/recruiter/requirements/${e}/submit`,t).then(ya),t9e=e=>q.get(`/v1/workflow/recruiter/requirements/${e}/submissions`).then(ya),r9e=(e,t)=>q.post(`/v1/workflow/recruiter/submissions/${e}/schedule-interview`,t).then(ya),n9e=(e,t)=>q.post(`/v1/workflow/recruiter/submissions/${e}/interview-notes`,t).then(ya),Cs={getAmRequirements:WMe,createRequirement:VMe,parseRequirementEmail:HMe,assignRecruiters:qMe,getAmRequirementDetail:GMe,updateSubmissionStage:JMe,markClientInformed:KMe,getRecruiterRequirements:XMe,getRecruiterRequirementDetail:YMe,runMatch:ZMe,addCallNote:QMe,submitCandidates:e9e,getRecruiterSubmissions:t9e,scheduleInterview:r9e,addInterviewNotes:n9e},s9e=()=>{const[e,t]=g.useState([]),[r,s]=g.useState(!1),[a,i]=g.useState(null),l=async()=>{s(!0),i(null);try{const o=await Cs.getRecruiterRequirements("assigned");t(o.requirements||[])}catch(o){i(o.message||"Failed to fetch requirements")}finally{s(!1)}};return g.useEffect(()=>{l()},[]),{requirements:e,loading:r,error:a,refetch:l}},a9e=()=>{const[e,t]=g.useState([]),[r,s]=g.useState(!1),[a,i]=g.useState(null),l=async()=>{var o,c,d,u,m,f,y,x,p;s(!0),i(null);try{const h=await Up(),v=((o=h==null?void 0:h.data)==null?void 0:o.jobs)||((d=(c=h==null?void 0:h.data)==null?void 0:c.data)==null?void 0:d.jobs)||((u=h==null?void 0:h.data)==null?void 0:u.requirements)||((f=(m=h==null?void 0:h.data)==null?void 0:m.data)==null?void 0:f.requirements)||[];t(v)}catch(h){((y=h==null?void 0:h.response)==null?void 0:y.status)===403?i("You do not have access to assigned jobs for this account."):i(((p=(x=h==null?void 0:h.response)==null?void 0:x.data)==null?void 0:p.detail)||h.message||"Failed to fetch assigned jobs")}finally{s(!1)}};return g.useEffect(()=>{l()},[]),{jobs:e,loading:r,error:a,refetch:l}},CV=g.forwardRef(({notifications:e,loading:t,unreadCount:r,onMarkAsRead:s,onMarkAllAsRead:a,onNotificationClick:i,onClose:l},o)=>{const c=p=>{const h=new Date,v=new Date(p),b=Math.floor((h-v)/(1e3*60*60));return b<1?`${Math.floor((h-v)/6e4)}m ago`:b<24?`${b}h ago`:`${Math.floor(b/24)}d ago`},d=p=>{switch(p){case"urgent":return n.jsx(_m,{className:"w-4 h-4 text-red-500"});case"high":return n.jsx(_m,{className:"w-4 h-4 text-amber-500"});default:return n.jsx(pn,{className:"w-4 h-4 text-blue-500"})}},u=(p,h)=>{if(h)return"border-l-4 border-gray-300";switch(p){case"urgent":return"border-l-4 border-red-500";case"high":return"border-l-4 border-amber-500";default:return"border-l-4 border-blue-500"}},m=p=>{var h;return String(((h=p==null?void 0:p.action)==null?void 0:h.type)||"").trim().toLowerCase()},f=p=>{var v,b;const h=m(p);return h==="view_interview_calendar"?!0:h!=="schedule_interview"?!1:!!((v=p==null?void 0:p.action)!=null&&v.candidate_id||(b=p==null?void 0:p.candidate)!=null&&b.id||p!=null&&p.reference_id)},y=p=>{const h=m(p);return h==="view_interview_calendar"?"Open calendar":h==="schedule_interview"?"Open scheduling":""},x=p=>f(p)?n.jsx(si,{className:"w-5 h-5 text-violet-600"}):(p==null?void 0:p.type)==="passive_requirement"?n.jsx(_m,{className:"w-5 h-5 text-amber-600"}):n.jsx(pn,{className:"w-5 h-5 text-blue-600"});return t?n.jsx("div",{ref:o,className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"flex items-center justify-center h-20",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})})})}):n.jsxs("div",{ref:o,className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 flex flex-col",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-50 rounded-t-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"}),r>0&&n.jsxs("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:[r," unread"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[r>0&&n.jsx("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"}),n.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:n.jsx(Ar,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto max-h-80",children:e.length===0?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(dp,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-gray-500",children:"All caught up!"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No notifications to show"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:e.map(p=>{const h=f(p),v=y(p);return n.jsx("div",{onClick:()=>{h&&i&&i(p)},className:`p-3 hover:bg-gray-50 transition-colors ${u(p.priority,p.is_read)} ${p.is_read?"bg-white":"bg-blue-50"} ${h?"cursor-pointer":""}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:x(p)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:p.title}),n.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:p.message}),p.candidate&&n.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Candidate:"," ",n.jsx("span",{className:"font-medium text-gray-800",children:p.candidate.full_name||p.candidate.public_id||p.candidate.id})]}),p.requirement&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:[n.jsxs("p",{className:"font-medium text-gray-700",children:["Req: ",p.requirement.code||"N/A"]}),n.jsx("p",{className:"text-gray-600 truncate",children:p.requirement.title}),p.requirement.last_activity_at&&n.jsxs("p",{className:"text-gray-500 mt-1",children:["Last activity:"," ",c(p.requirement.last_activity_at)]})]})]}),n.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[d(p.priority),!p.is_read&&n.jsx("button",{onClick:b=>{b.stopPropagation(),s(p.id)},className:"p-1 hover:bg-blue-100 rounded",title:"Mark as read",children:n.jsx(cl,{className:"w-3 h-3 text-blue-600"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:c(p.created_at)}),p.is_read&&p.read_at&&n.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[n.jsx(dp,{className:"w-3 h-3 mr-1"}),"Read"]}),h&&v&&n.jsx("span",{className:"text-xs text-violet-600 font-medium",children:v})]})]})]})},p.id)})})}),e.length>0&&n.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Showing ",e.length," recent notifications"]})})]})});CV.displayName="NotificationPanel";const AV=()=>{const e=Et(),t=Xn(),[r,s]=g.useState([]),[a,i]=g.useState(0),[l,o]=g.useState(!1),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[f,y]=g.useState(!1),x=g.useRef(null),p=g.useRef(null),h=async(A,C,P={})=>{var O;try{return await ud.get(A,P)}catch(R){if(((O=R==null?void 0:R.response)==null?void 0:O.status)===404&&C)return ud.get(C,P);throw R}},v=async(A,C,P={})=>{var O;try{return await ud.post(A,P)}catch(R){if(((O=R==null?void 0:R.response)==null?void 0:O.status)===404&&C)return ud.post(C,P);throw R}},b=async()=>{var A;if(!f)try{const P=(await h("/api/notifications/summary","/v1/notifications/summary")).data;i(Number((P==null?void 0:P.total_unread)||0)),d(!!(P!=null&&P.has_urgent)),y(!1),l&&await j()}catch(C){if(((A=C==null?void 0:C.response)==null?void 0:A.status)===403){y(!0),i(0),d(!1),s([]);return}console.error("Failed to fetch notification summary:",C)}},j=async()=>{var A,C,P;if(!f){m(!0);try{const O=await h("/api/notifications","/v1/notifications",{params:{limit:50,unread_only:!1}}),R=((A=O==null?void 0:O.data)==null?void 0:A.notifications)||((C=O==null?void 0:O.data)==null?void 0:C.data)||(O==null?void 0:O.data)||[];s(Array.isArray(R)?R:[])}catch(O){if(((P=O==null?void 0:O.response)==null?void 0:P.status)===403){y(!0),s([]);return}console.error("Failed to fetch notifications:",O)}finally{m(!1)}}},_=async A=>{try{await v(`/api/notifications/${A}/mark-read`,`/v1/notifications/${A}/mark-read`),s(C=>C.map(P=>P.id===A?{...P,is_read:!0,read_at:new Date().toISOString()}:P)),await b()}catch(C){console.error("Failed to mark notification as read:",C)}},N=async()=>{try{await v("/api/notifications/mark-all-read","/v1/notifications/mark-all-read"),s(A=>A.map(C=>({...C,is_read:!0,read_at:new Date().toISOString()}))),i(0),d(!1)}catch(A){console.error("Failed to mark all notifications as read:",A)}},w=()=>{o(!l)},k=(A,C)=>{var W,L,I,K,D;const P=new URLSearchParams,O=((W=A==null?void 0:A.action)==null?void 0:W.candidate_id)||((L=A==null?void 0:A.candidate)==null?void 0:L.id)||(A==null?void 0:A.reference_id);O&&P.set("candidate_id",String(O));const R=((I=A==null?void 0:A.action)==null?void 0:I.requirement_id)||((K=A==null?void 0:A.requirement)==null?void 0:K.id);R&&P.set("requirement_id",String(R));const F=(D=A==null?void 0:A.action)==null?void 0:D.recruiter_name;F&&P.set("recruiter_name",String(F));const Q=P.toString();return Q?`${C}?${Q}`:C},S=A=>{var L,I,K,D,Y,re,B,G,ce,ae;if(!A||typeof A!="object")return"";const C=(L=A.action)==null?void 0:L.type;if(C==="view_interview_calendar"){const fe=t.pathname.startsWith("/account-manager")?"/account-manager/interview-calendar":"/recruiter/interviews/calendar";return k(A,fe)}if(C!=="schedule_interview")return"";if(t.pathname.startsWith("/account-manager"))return k(A,"/account-manager/interview-calendar");const P=((I=A.action)==null?void 0:I.candidate_id)||((K=A.candidate)==null?void 0:K.id)||A.reference_id;if(!P)return"";const O=new URLSearchParams;O.set("candidate_id",String(P));const R=((D=A.action)==null?void 0:D.job_id)||((Y=A.requirement)==null?void 0:Y.job_id)||((re=A.action)==null?void 0:re.requirement_id)||((B=A.requirement)==null?void 0:B.id);R&&O.set("jobId",String(R));const F=(G=A.candidate)==null?void 0:G.full_name;F&&O.set("candidate_name",String(F));const Q=(ce=A.requirement)==null?void 0:ce.title;Q&&O.set("jobTitle",String(Q));const W=(ae=A.requirement)==null?void 0:ae.code;return W&&O.set("requirement_code",String(W)),O.set("tab","client_shortlisted"),`/recruiter/candidate-workflow?${O.toString()}`},E=async A=>{if(!A)return;!A.is_read&&A.id&&await _(A.id);const C=S(A);C&&(o(!1),e(C))};g.useEffect(()=>{const A=C=>{x.current&&!x.current.contains(C.target)&&p.current&&!p.current.contains(C.target)&&o(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]),g.useEffect(()=>{l&&j()},[l,f]),g.useEffect(()=>{if(f)return;b();const A=setInterval(b,6e4);return()=>clearInterval(A)},[f]);const T=()=>{let A="relative p-2 rounded-lg transition-all duration-200 cursor-pointer ";return c?A+"text-red-500 hover:bg-red-50 animate-pulse":a>0?A+"text-amber-500 hover:bg-amber-50":A+"text-gray-400 hover:bg-gray-100"};return n.jsxs("div",{className:"relative",children:[n.jsxs("div",{ref:p,onClick:w,className:T(),title:`${a} unread notifications`,children:[c?n.jsx(t4e,{className:"w-6 h-6"}):n.jsx(i4,{className:"w-6 h-6"}),a>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:a>99?"99+":a})]}),l&&n.jsx(CV,{ref:x,notifications:r,loading:u,unreadCount:a,onMarkAsRead:_,onMarkAllAsRead:N,onNotificationClick:E,onClose:()=>o(!1)})]})},i9e=()=>{const[e,t]=g.useState({active_requirements:0,passive_requirements:0,total_requirements:0,passive_details:[]}),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState(!1),c=async()=>{var h;const y=await ud.get("/v1/workflow/recruiter/requirements",{params:{scope:"assigned"}}),x=((h=y==null?void 0:y.data)==null?void 0:h.data)||(y==null?void 0:y.data)||{},p=Array.isArray(x==null?void 0:x.requirements)?x.requirements:[];return{active_requirements:p.length,passive_requirements:0,total_requirements:p.length,passive_details:[]}},d=async()=>{var y;try{const x=await ud.get("/v1/recruiter/requirements/summary");return(x==null?void 0:x.data)||{}}catch(x){if(((y=x==null?void 0:x.response)==null?void 0:y.status)===404){const p=await ud.get("/api/recruiter/requirements/summary");return(p==null?void 0:p.data)||{}}throw x}},u=async()=>{var y;try{const x=await d();t(p=>({...p,...x})),o(!1),i(new Date)}catch(x){if(((y=x==null?void 0:x.response)==null?void 0:y.status)===403){o(!0);try{const p=await c();t(p),i(new Date)}catch{}return}console.error("Failed to fetch requirements summary:",x)}finally{s(!1)}},m=async()=>{s(!0),await u()};g.useEffect(()=>{if(l)return;u();const y=setInterval(u,12e4);return()=>clearInterval(y)},[l]);const f=y=>{const x=new Date,p=new Date(y),h=Math.floor((x-p)/(1e3*60*60));return h<1?`${Math.floor((x-p)/6e4)}m ago`:h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`};return r&&!a?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(y=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]},y))}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qCe,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Active Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.active_requirements})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requirements with recent activity"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-amber-500",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:n.jsx(_m,{className:"w-6 h-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Passive Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.passive_requirements})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Inactive for 48+ hours"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(pn,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-gray-600",children:"Total Requirements"}),n.jsx("p",{className:"text-2xl font-bold",children:e.total_requirements})]})]}),n.jsx("button",{onClick:m,children:n.jsx($l,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),a&&n.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Updated ",f(a.toISOString())]})]})]})})};function vg({title:e,value:t,trend:r,color:s="blue"}){const a={blue:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-300",green:"bg-gradient-to-br from-emerald-50 to-emerald-50 border-emerald-200",red:"bg-gradient-to-br from-red-50 to-red-100 border-red-300",yellow:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-300"};return n.jsxs("div",{className:`border-2 p-4 rounded-lg shadow-md ${a[s]} hover:shadow-lg transition`,children:[n.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:e}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mt-2",children:t}),r&&n.jsxs("p",{className:`text-xs mt-1 font-semibold ${r>0?"text-emerald-400":"text-red-600"}`,children:[r>0?"":""," ",Math.abs(r),"% from last week"]})]})}function l9e({data:e,onStageClick:t=null}){const r=[{key:"applied",label:"Applied",color:"from-blue-500 to-blue-600"},{key:"screened",label:"Screened",color:"from-green-500 to-green-600"},{key:"submitted",label:"Submitted",color:"from-purple-500 to-purple-600"},{key:"interview",label:"Interview",color:"from-orange-500 to-orange-600"},{key:"offer",label:"Offer",color:"from-pink-500 to-pink-600"},{key:"hired",label:"Hired",color:"from-emerald-500 to-emerald-600"}],s=Math.max(...Object.values(e),10),a=Object.values(e).reduce((i,l)=>i+l,0);return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200 hover:shadow-xl transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:"Recruitment Pipeline"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Total:"," ",n.jsx("span",{className:"font-semibold text-purple-600",children:a})]})]}),n.jsx("div",{className:"space-y-3",children:r.map(i=>{const l=e[i.key]||0,o=a>0?Math.round(l/a*100):0;return n.jsxs("div",{className:`${t?"cursor-pointer hover:bg-gray-50":""} p-2 rounded transition-colors`,onClick:()=>t&&t(i.key),children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsxs("span",{className:"font-medium text-gray-700",children:[i.label,i.key==="submitted"&&n.jsx("span",{className:"ml-1 text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full",children:"NEW"})]}),n.jsxs("span",{className:"text-purple-600 font-semibold",children:[l," (",o,"%)"]})]}),n.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full bg-gradient-to-r ${i.color} transition-all duration-300`,style:{width:`${l/s*100}%`}})})]},i.key)})}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:n.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[n.jsx("span",{children:"Pipeline Health:"}),n.jsx("span",{className:`font-semibold ${e.submitted>0?"text-green-600":"text-yellow-600"}`,children:e.submitted>0?"Active Submissions":"No Active Submissions"})]})})]})}function o9e({days:e}){const t=e<=14?"On Track":e<=21?"At Risk":"Critical",r=e<=14?"text-emerald-300":e<=21?"text-amber-600":"text-red-600";return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200 hover:shadow-xl transition",children:[n.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Avg. Time-to-Fill"}),n.jsxs("p",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent mt-2",children:[e," days"]}),n.jsxs("p",{className:`text-sm font-semibold mt-2 ${r}`,children:[" ",t]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Target: 14 days"})]})}function bg({icon:e,label:t,onClick:r,color:s="blue"}){const i={blue:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",border:"border-purple-300",text:"text-purple-700"},green:{bg:"bg-gradient-to-br from-slate-50 to-gray-50",border:"border-slate-200",text:"text-slate-600"},purple:{bg:"bg-gradient-to-br from-purple-100 to-purple-50",border:"border-purple-300",text:"text-purple-700"}}[s];return n.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition hover:shadow-md ${i.bg} ${i.border} ${i.text}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:e}),n.jsx("span",{className:"text-sm font-medium text-center",children:t})]})}function nw(){const e=Et(),{requirements:t}=s9e(),[r,s]=g.useState(!0),[a,i]=g.useState([]),[l,o]=g.useState({}),[c,d]=g.useState(0),[u,m]=g.useState([]),[f,y]=g.useState([]),[x,p]=g.useState({applied:0,screened:0,submitted:0,interview:0,offer:0,hired:0}),[h,v]=g.useState(18),[b,j]=g.useState(null),[_,N]=g.useState(null),[w,k]=g.useState(!0),S=async()=>{try{const R=await q.get("/v1/dashboard/recruiter/pipeline");p({applied:R.data.applied||0,screened:R.data.screened||0,submitted:R.data.submitted||0,interview:R.data.interview||0,offer:R.data.offer||0,hired:R.data.hired||0}),j(new Date)}catch(R){console.error("Failed to fetch pipeline data:",R)}},E=R=>{e(`/candidates?status=${R}`)};if(g.useEffect(()=>{let R=!0;const F=W=>Array.isArray(W)?W:[];async function Q(){var W,L,I,K,D;try{const Y=await Up(),re=Array.isArray((W=Y==null?void 0:Y.data)==null?void 0:W.jobs)?Y.data.jobs:[];i(re),await S();const B={};await Promise.all(re.map(async G=>{var ce,ae,fe,ne;try{const he=await q.get(`/v1/jobs/${G.id}/candidates`);B[G.id]=((ce=he.data)==null?void 0:ce.total_candidates)??((ae=he.data)==null?void 0:ae.total)??((ne=(fe=he.data)==null?void 0:fe.data)==null?void 0:ne.length)??0}catch{B[G.id]=0}})),o(B);try{const G=await q.get("/workflow/candidates",{params:{limit:500}}),ce=G==null?void 0:G.data,ae=Array.isArray(ce)?ce:(ce==null?void 0:ce.candidates)||(ce==null?void 0:ce.items)||(ce==null?void 0:ce.data)||[];d(Array.isArray(ae)?ae.length:0)}catch{try{const G=await q.get("/v1/candidates"),ce=G==null?void 0:G.data,ae=Array.isArray(ce)?ce:(ce==null?void 0:ce.items)||(ce==null?void 0:ce.data)||[];d(Array.isArray(ae)?ae.length:0)}catch{d(0)}}try{const G=await q.get("/v1/interviews",{params:{assigned_to:"me"}});m(F(G.data))}catch(G){console.error("Failed to fetch interviews:",G),m([])}try{let G;try{G=await q.get("/api/notifications",{params:{limit:10,unread_only:!1}}),y(F(((L=G==null?void 0:G.data)==null?void 0:L.notifications)||((I=G==null?void 0:G.data)==null?void 0:I.data)||[]))}catch{G=await q.get("/v1/notifications"),y(F(((K=G==null?void 0:G.data)==null?void 0:K.notifications)||((D=G==null?void 0:G.data)==null?void 0:D.data)||[]))}}catch{y([])}v(18)}catch(Y){console.error("Recruiter dashboard error:",Y)}finally{R&&s(!1)}}return Q(),()=>R=!1},[]),g.useEffect(()=>{if(!w)return;const R=setInterval(()=>{S()},3e4);return N(R),()=>{R&&clearInterval(R)}},[w]),g.useEffect(()=>()=>{_&&clearInterval(_)},[_]),r)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin mb-4",children:""}),n.jsx("p",{className:"text-gray-600",children:"Loading Recruiter Dashboard"})]})});const T=a.length,A=Object.values(l).reduce((R,F)=>R+F,0);a.filter(R=>R.status==="active").length;const C=u.filter(R=>{var L,I;const F=(((L=R==null?void 0:R.candidate)==null?void 0:L.full_name)||"").trim(),Q=(((I=R==null?void 0:R.job)==null?void 0:I.title)||"").trim(),W=R==null?void 0:R.scheduled_at;return!(!F||!Q||!W||F.toLowerCase()==="unknown"||Q.toLowerCase()==="position tbd")}),P=C.length,O=C.filter(R=>{const F=new Date().toDateString();return new Date(R.scheduled_at).toDateString()===F}).length;return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6 bg-gradient-to-br from-purple-50 via-purple-25 to-purple-50 rounded-lg",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 rounded-lg p-8 text-white shadow-lg",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Recruiter Dashboard"}),n.jsx("p",{className:"text-purple-100 mt-2 text-lg",children:"Manage your recruitment pipeline and candidates"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(AV,{})})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(vg,{title:"Assigned Jobs",value:T,color:"blue",trend:5}),n.jsx(vg,{title:"Total Candidates",value:A,color:"green",trend:12}),n.jsx(vg,{title:"Interviews Today",value:O,color:"purple"}),n.jsx(vg,{title:"Requirements Assigned",value:t.length,color:"yellow",trend:t.length>0?10:0})]}),n.jsx(i9e,{}),t.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"font-bold text-gray-900 text-lg",children:["Assigned Requirements (",t.length,")"]}),n.jsx("button",{onClick:()=>e("/recruiter/requirements"),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold",children:"View All "})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(0,3).map(R=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer",onClick:()=>e(`/recruiter/requirements/${R.id}`),children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:R.title}),n.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[R.positions_count||1," open"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:R.title||"Position"}),R.skills_mandatory&&R.skills_mandatory.length>0&&n.jsxs("div",{className:"flex gap-2 flex-wrap mb-3",children:[R.skills_mandatory.slice(0,3).map((F,Q)=>n.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:F},Q)),R.skills_mandatory.length>3&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",R.skills_mandatory.length-3," more"]})]}),n.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[n.jsxs("span",{children:["Client: ",R.client_name||"Client"]}),n.jsx("button",{onClick:F=>{F.stopPropagation(),e(`/recruiter/requirements/${R.id}`)},className:"text-blue-600 hover:text-blue-700 font-semibold",children:"View Details"})]})]},R.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${b&&Date.now()-b<6e4?"bg-green-500":"bg-yellow-500"} animate-pulse`}),n.jsx("span",{className:"text-sm text-gray-600",children:b?`Last updated: ${b.toLocaleTimeString()}`:"Loading..."})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>k(!w),className:`text-xs px-2 py-1 rounded ${w?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:["Auto-refresh ",w?"ON":"OFF"]}),n.jsx("button",{onClick:S,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:" Refresh Now"})]})]})}),n.jsx(l9e,{data:x,onStageClick:E})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(o9e,{days:h}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsx("h4",{className:"font-bold text-lg text-gray-800 mb-4",children:"Pipeline Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("/candidates?status=screened"),className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition",children:[" Review Screened Candidates (",x.screened,")"]}),n.jsxs("button",{onClick:()=>e("/candidates?status=submitted"),className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition",children:[" Track Submitted Candidates (",x.submitted,")"]}),n.jsxs("button",{onClick:()=>e("/candidates?status=interview"),className:"w-full px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition",children:[" Manage Interviews (",x.interview,")"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-4",children:[n.jsx(bg,{icon:"",label:"Assigned Jobs",onClick:()=>e("/recruiter/assigned-jobs"),color:"green"}),n.jsx(bg,{icon:"",label:"Schedule Interview",onClick:()=>e("/recruiter/interviews"),color:"purple"}),n.jsx(bg,{icon:"",label:"View Reports",onClick:()=>e("/reports"),color:"purple"}),n.jsx(bg,{icon:n.jsx(cn,{size:22}),label:"Trackers",onClick:()=>e("/recruiter/trackers"),color:"blue"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-purple-200",children:[n.jsxs("h3",{className:"font-bold text-2xl bg-gradient-to-r from-purple-600 to-emerald-500 bg-clip-text text-transparent mb-4",children:["Today's Interviews (",O,")"]}),P>0?n.jsx("div",{className:"space-y-3",children:C.slice(0,5).map(R=>n.jsxs("div",{className:"flex items-start justify-between p-3 border rounded hover:bg-gray-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:R.candidate.full_name}),n.jsx("p",{className:"text-sm text-gray-600",children:R.job.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(R.scheduled_at).toLocaleTimeString()})]}),n.jsx("span",{className:`px-3 py-1 text-xs rounded font-medium ${R.status==="completed"?"bg-green-100 text-green-700":R.status==="scheduled"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:R.status||"pending"})]},R.id))}):n.jsx("p",{className:"text-gray-600 text-center py-4",children:"No interviews scheduled for today"})]}),f.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Recent Notifications"}),n.jsx("div",{className:"space-y-2",children:f.slice(0,5).map((R,F)=>n.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:[n.jsx("p",{className:"font-medium text-blue-900",children:R.title||R.message}),n.jsx("p",{className:"text-xs text-blue-700 mt-1",children:R.created_at?new Date(R.created_at).toLocaleString():""})]},F))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"font-bold text-gray-900 text-lg flex items-center gap-2",children:[n.jsx(cn,{size:20,className:"text-purple-600"}),"Trackers"]}),n.jsx("button",{onClick:()=>e("/recruiter/trackers"),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold",children:"Go to Trackers "})]}),n.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Manage and export your daily recruitment tracker in spreadsheet format."}),n.jsxs("button",{onClick:()=>e("/recruiter/trackers"),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition text-sm font-semibold",children:[n.jsx(cn,{size:16}),"Open Trackers"]})]})]})}const JI=()=>{const e=Et(),[t,r]=g.useState("assigned"),[s,a]=g.useState([]),[i,l]=g.useState(!1),[o,c]=g.useState(""),d=async u=>{l(!0),c("");try{const m=await Cs.getRecruiterRequirements(u);a(m.requirements||[])}catch{c("Failed to fetch requirements")}finally{l(!1)}};return g.useEffect(()=>{d(t)},[t]),i?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Requirements"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage assigned requirements and view all open requirements."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:`px-4 py-2 rounded ${t==="assigned"?"bg-blue-600 text-white":"bg-white border"}`,onClick:()=>r("assigned"),children:"My Assigned"}),n.jsx("button",{className:`px-4 py-2 rounded ${t==="all"?"bg-blue-600 text-white":"bg-white border"}`,onClick:()=>r("all"),children:"All Requirements"})]})]}),o&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-red-800",children:o})}),s.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[n.jsx(ha,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No requirements"}),n.jsx("p",{className:"text-gray-600 mt-2",children:t==="assigned"?"No assigned requirements yet.":"No open requirements available."})]}):n.jsx("div",{className:"grid gap-4",children:s.map(u=>{var m;return n.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:u.title}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Req ID: ",u.requirement_code||u.id]})]}),n.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:u.status})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(qr,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Positions"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.positions_count||1})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($c,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Location"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:((m=u.location_details)==null?void 0:m.city)||"Any"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(ha,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Experience"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[u.experience_min||0,"+ yrs"]})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(u.skills_mandatory||[]).slice(0,6).map((f,y)=>n.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:f},y))})]}),n.jsxs("div",{className:"flex justify-between items-end pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:["Client: ",n.jsx("strong",{className:"ml-1",children:u.client_name||""})]}),t==="assigned"?n.jsxs("button",{onClick:()=>e(`/recruiter/requirements/${u.id}`),className:"flex items-center text-blue-600 hover:text-blue-700",children:["Find Matching Candidates",n.jsx(U1,{className:"h-4 w-4 ml-1"})]}):n.jsx("span",{className:"text-xs text-gray-400",children:"Read-only"})]})]})},u.id)})})]})})},EV=new Set(["selected","rejected","negotiation","hired","offer_declined"]),jg=({stage:e})=>{const t=e?e.replace(/_/g," "):"",r=EV.has(e)?"bg-gray-100 text-gray-700":e==="client_shortlisted"?"bg-emerald-100 text-emerald-700":e==="interview_scheduled"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700";return n.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:t})},c9e=({open:e,title:t,onClose:r,onSubmit:s,fields:a,setFields:i})=>e?n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t}),n.jsx("button",{className:"text-gray-500",onClick:r,children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",className:"w-full p-2 border rounded",value:a.rating,onChange:l=>i(o=>({...o,rating:Number(l.target.value)}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Strengths"}),n.jsx("input",{className:"w-full p-2 border rounded",value:a.strengths,onChange:l=>i(o=>({...o,strengths:l.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Concerns"}),n.jsx("input",{className:"w-full p-2 border rounded",value:a.concerns,onChange:l=>i(o=>({...o,concerns:l.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:a.free_text,onChange:l=>i(o=>({...o,free_text:l.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:r,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:s,children:"Save"})]})]})}):null,d9e=({open:e,onClose:t,onSubmit:r,fields:s,setFields:a})=>e?n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Schedule Interview"}),n.jsx("button",{className:"text-gray-500",onClick:t,children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Date"}),n.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:s.interview_date,onChange:i=>a(l=>({...l,interview_date:i.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Time"}),n.jsx("input",{type:"time",className:"w-full p-2 border rounded",value:s.interview_time,onChange:i=>a(l=>({...l,interview_time:i.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Mode"}),n.jsxs("select",{className:"w-full p-2 border rounded",value:s.interview_mode,onChange:i=>a(l=>({...l,interview_mode:i.target.value})),children:[n.jsx("option",{value:"in_person",children:"In person"}),n.jsx("option",{value:"video",children:"Video"}),n.jsx("option",{value:"phone",children:"Phone"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Interviewer Name"}),n.jsx("input",{className:"w-full p-2 border rounded",value:s.interviewer_name,onChange:i=>a(l=>({...l,interviewer_name:i.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Location / Link"}),n.jsx("input",{className:"w-full p-2 border rounded",value:s.location_or_link,onChange:i=>a(l=>({...l,location_or_link:i.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded",value:s.notes,onChange:i=>a(l=>({...l,notes:i.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:t,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:r,children:"Schedule"})]})]})}):null,KI=()=>{var L;const{requirementId:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState(!0),[u,m]=g.useState("matched"),[f,y]=g.useState(0),[x,p]=g.useState(new Set),[h,v]=g.useState({open:!1,candidate:null,mode:"call"}),[b,j]=g.useState({rating:4,strengths:"",concerns:"",free_text:""}),[_,N]=g.useState({open:!1,submission:null}),[w,k]=g.useState({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""}),S=async()=>{d(!0);try{const I=await Cs.getRecruiterRequirementDetail(e);s(I);const K=await Cs.getRecruiterSubmissions(e);i(K.submissions||[])}catch(I){console.error("Failed to load requirement",I)}finally{d(!1)}};g.useEffect(()=>{S()},[e]);const E=async()=>{try{const I=await Cs.runMatch(e,f);o(I.candidates||[])}catch(I){console.error("Match failed",I),alert("Match failed")}},T=g.useMemo(()=>{const I={};return a.forEach(K=>{var D;(D=K.notes)!=null&&D.some(Y=>Y.note_stage==="call_feedback")&&(I[K.candidate_id]=!0)}),I},[a]),A=I=>{p(K=>{const D=new Set(K);return D.has(I)?D.delete(I):D.add(I),D})},C=async()=>{if(x.size===0){alert("Select candidates with call notes");return}try{await Cs.submitCandidates(e,{candidate_ids:Array.from(x)}),p(new Set),S()}catch(I){console.error("Submit failed",I),alert("Submit failed")}},P=async()=>{if(h.candidate)try{h.mode==="call"?await Cs.addCallNote(e,h.candidate.candidate_id,b):await Cs.addInterviewNotes(h.candidate.id,b),v({open:!1,candidate:null,mode:"call"}),j({rating:4,strengths:"",concerns:"",free_text:""}),S()}catch(I){console.error("Failed to add note",I),alert("Failed to add note")}},O=async()=>{if(_.submission){if(!w.interview_date||!w.interview_time){alert("Please provide interview date and time");return}try{await Cs.scheduleInterview(_.submission.id,w),N({open:!1,submission:null}),k({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""}),S()}catch(I){console.error("Schedule failed",I),alert("Schedule failed")}}},R=r==null?void 0:r.requirement,F=r==null?void 0:r.assignment,Q=a.filter(I=>["client_shortlisted","interview_scheduled","interview_completed"].includes(I.stage)),W=a.filter(I=>EV.has(I.stage));return c?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):R?n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("button",{onClick:()=>t("/recruiter/requirements"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[n.jsx(UR,{className:"h-5 w-5 mr-1"}),"Back to Requirements"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{className:"col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:R.title}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Client: ",R.client_name]})]}),n.jsx(jg,{stage:R.status})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 pb-6 border-b",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Positions"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:R.positions_count||1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Experience"}),n.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[R.experience_min||0,"+"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:((L=R.location_details)==null?void 0:L.city)||"Any"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(R.skills_mandatory||[]).map((I,K)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium",children:I},K))})]}),R.description&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Job Description"}),n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:R.description})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx("div",{className:"flex gap-2",children:[{key:"matched",label:"Matched Candidates"},{key:"submissions",label:"My Submissions"},{key:"interviews",label:"Interview Stage"},{key:"closed",label:"Closed"}].map(I=>n.jsx("button",{onClick:()=>m(I.key),className:`px-3 py-2 rounded text-sm font-medium ${u===I.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:I.label},I.key))})}),u==="matched"&&n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:E,children:"Run Match"}),n.jsxs("label",{className:"text-sm text-gray-600",children:["Min score: ",f,"%",n.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:I=>y(Number(I.target.value)),className:"ml-2 align-middle"})]})]}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:C,children:"Submit to AM"})]}),l.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidates matched yet. Click Run Match."}):n.jsx("div",{className:"divide-y",children:l.map(I=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:I.full_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:I.email}),I.current_location&&n.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[n.jsx($c,{className:"h-3 w-3 mr-1"}),I.current_location]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[n.jsx(QCe,{className:"h-4 w-4 mr-1"}),I.match_score,"%"]})})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(I.matched_skills||[]).map((K,D)=>n.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:[" ",K]},D)),(I.missing_skills||[]).slice(0,3).map((K,D)=>n.jsxs("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs",children:[" ",K]},D))]}),n.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{v({open:!0,candidate:I,mode:"call"}),j({rating:4,strengths:"",concerns:"",free_text:""})},children:"Add Call Notes"}),n.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[n.jsx("input",{type:"checkbox",checked:x.has(I.candidate_id),onChange:()=>A(I.candidate_id),disabled:!T[I.candidate_id]}),"Select for submission"]})]})]},I.candidate_id))})]}),u==="submissions"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:a.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No submissions yet."}):n.jsx("div",{className:"divide-y",children:a.map(I=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:I.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:I.email||""})]}),n.jsx(jg,{stage:I.stage})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Match Score: ",I.match_score||0,"%"]})]},I.id))})}),u==="interviews"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:Q.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No interviews scheduled yet."}):n.jsx("div",{className:"divide-y",children:Q.map(I=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:I.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:I.email||""})]}),n.jsx(jg,{stage:I.stage})]}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[I.stage==="client_shortlisted"&&n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>{N({open:!0,submission:I}),k({interview_date:"",interview_time:"",interview_mode:"video",location_or_link:"",interviewer_name:"",notes:""})},children:"Schedule Interview"}),I.stage==="interview_scheduled"&&n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{v({open:!0,candidate:I,mode:"interview"}),j({rating:4,strengths:"",concerns:"",free_text:""})},children:"Add Interview Notes"})]})]},I.id))})}),u==="closed"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:W.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No closed candidates yet."}):n.jsx("div",{className:"divide-y",children:W.map(I=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:I.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:I.email||""})]}),n.jsx(jg,{stage:I.stage})]})},I.id))})})]}),n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Notes"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"}),n.jsx("p",{className:"font-medium text-gray-900",children:F!=null&&F.assigned_at?new Date(F.assigned_at).toLocaleDateString():""})]}),F!=null&&F.notes?n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsx("p",{className:"text-blue-800 text-sm",children:F.notes})}):n.jsx("p",{className:"text-sm text-gray-500",children:"No notes from AM."}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[n.jsx(qr,{className:"h-4 w-4"}),a.length," submissions"]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mt-2",children:[n.jsx(Oi,{className:"h-4 w-4"}),Q.length," in interview"]})]})]})})]})]}),n.jsx(c9e,{open:h.open,title:h.mode==="call"?"Add Call Notes":"Add Interview Notes",onClose:()=>v({open:!1,candidate:null,mode:"call"}),onSubmit:P,fields:b,setFields:j}),n.jsx(d9e,{open:_.open,onClose:()=>N({open:!1,submission:null}),onSubmit:O,fields:w,setFields:k})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("button",{onClick:()=>t("/recruiter/requirements"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-6",children:[n.jsx(UR,{className:"h-5 w-5 mr-1"}),"Back to Requirements"]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:"Requirement not found"})]})},TV=({isOpen:e,onClose:t,job:r})=>{const[s,a]=g.useState(null),[i,l]=g.useState(!1),[o,c]=g.useState(!1),[d,u]=g.useState(null),[m,f]=g.useState(!1),[y,x]=g.useState(!1),[p,h]=g.useState({full_name:"",email:"",phone:"",location:"",skills:[],experiences:[],education:[]});g.useEffect(()=>{u(r?null:" No job selected. Cannot add candidate.")},[r]);const v=O=>O?typeof O=="string"?O:Array.isArray(O)?O.map(R=>(R==null?void 0:R.msg)||(R==null?void 0:R.message)||JSON.stringify(R)).join(", "):O.detail?v(O.detail):O.message?O.message:JSON.stringify(O):"Unknown error",b=()=>!p.full_name||!p.full_name.trim()?(u("Full Name is required"),!1):!p.email||!p.email.trim()?(u("Email is required"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)?r?(u(null),!0):(u("No job selected. Cannot add candidate."),!1):(u("Invalid email format"),!1),j=async O=>{var F,Q,W,L,I,K,D,Y,re;if(!O)return;if(!r){u("Please select a job before uploading resume");return}a(O),l(!0),u(null),f(!1);const R=new FormData;R.append("job_id",r.job_id||r.id),R.append("resume",O);try{const B=await q.post("/v1/candidates/manual",R,{headers:{"Content-Type":"multipart/form-data"}});h({full_name:((F=B.data.parsed)==null?void 0:F.full_name)||p.full_name,email:((Q=B.data.parsed)==null?void 0:Q.email)||p.email,phone:((W=B.data.parsed)==null?void 0:W.phone)||p.phone,location:((L=B.data.parsed)==null?void 0:L.location)||p.location,skills:((I=B.data.parsed)==null?void 0:I.skills)||p.skills||[],experiences:((K=B.data.parsed)==null?void 0:K.experiences)||[],education:((D=B.data.parsed)==null?void 0:D.education)||[]}),u(null),f(" Resume parsed successfully! Review and edit details below.")}catch(B){console.error("Resume parsing error:",B);const G=v(((re=(Y=B.response)==null?void 0:Y.data)==null?void 0:re.detail)||B.message);u(G||"Failed to parse resume. Please try again."),a(null)}finally{l(!1)}},_=(O,R)=>{h(F=>({...F,[O]:R})),u(null)},N=O=>{const R=O.split(",").map(F=>F.trim()).filter(F=>F);h(F=>({...F,skills:R}))},w=()=>{h(O=>({...O,experiences:[...O.experiences,{company:"",role:"",start_date:"",end_date:"",description:""}]}))},k=(O,R,F)=>{h(Q=>{const W=[...Q.experiences];return W[O]={...W[O],[R]:F},{...Q,experiences:W}})},S=O=>{h(R=>({...R,experiences:R.experiences.filter((F,Q)=>Q!==O)}))},E=()=>{h(O=>({...O,education:[...O.education,{institution:"",degree:"",field_of_study:"",year:""}]}))},T=(O,R,F)=>{h(Q=>{const W=[...Q.education];return W[O]={...W[O],[R]:F},{...Q,education:W}})},A=O=>{h(R=>({...R,education:R.education.filter((F,Q)=>Q!==O)}))},C=async()=>{var O,R;if(b()){c(!0),u(null);try{const F=Array.isArray(p.education)?p.education.map(L=>typeof L=="string"?L:(L==null?void 0:L.degree)||(L==null?void 0:L.field_of_study)||(L==null?void 0:L.institution)||"").filter(Boolean).join(", "):p.education||"",Q={job_id:r.job_id||r.id,full_name:p.full_name,email:p.email,phone:p.phone||"",location:p.location||"",skills:Array.isArray(p.skills)?p.skills:[],education:F},W=await q.post("/v1/candidates/from-resume",Q);f(" Candidate added successfully!"),setTimeout(()=>{t(),P()},1500)}catch(F){console.error("Submission error:",F);const Q=v(((R=(O=F.response)==null?void 0:O.data)==null?void 0:R.detail)||F.message);u(Q||"Failed to add candidate. Please try again.")}finally{c(!1)}}},P=()=>{a(null),x(!1),h({full_name:"",email:"",phone:"",location:"",skills:[],experiences:[],education:[]}),u(null),f(!1)};return e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40",onClick:t}),n.jsx("div",{className:`fixed top-0 right-0 h-full bg-white shadow-xl z-50 transition-transform overflow-y-auto ${e?"translate-x-0":"translate-x-full"}`,style:{width:"500px"},children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Add New Candidate"}),n.jsx("button",{onClick:t,className:"text-2xl font-bold text-gray-400 hover:text-gray-600",children:""})]}),r?n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:n.jsx("div",{className:"font-semibold text-blue-900",children:r.title})}):n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700 font-semibold",children:" No job selected"}),d&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:d}),m&&n.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:m}),!s&&!y&&n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-3 font-semibold",children:"How would you like to add a candidate?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"entry-method",value:"resume",onChange:()=>{x(!1),u(null)},className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"ml-2 text-sm",children:" Upload Resume"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"entry-method",value:"manual",onChange:()=>{x(!0),u(null)},className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"ml-2 text-sm",children:" Enter Manually"})]})]})]}),!y&&n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Upload Resume (PDF, DOC, DOCX)"}),n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:O=>{var R;return j((R=O.target.files)==null?void 0:R[0])},disabled:i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm cursor-pointer hover:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i&&n.jsx("p",{className:"text-sm text-blue-600 mt-2 animate-pulse",children:" Parsing resume, please wait..."})]}),(s||y)&&!i&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Full Name *"}),n.jsx("input",{type:"text",value:p.full_name,onChange:O=>_("full_name",O.target.value),placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email *"}),n.jsx("input",{type:"email",value:p.email,onChange:O=>_("email",O.target.value),placeholder:"john@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone Number"}),n.jsx("input",{type:"tel",value:p.phone,onChange:O=>_("phone",O.target.value),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:p.location,onChange:O=>_("location",O.target.value),placeholder:"San Francisco, CA",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Skills (Comma Separated)"}),n.jsx("textarea",{value:p.skills.join(", "),onChange:O=>N(O.target.value),placeholder:"Python, React, Node.js, SQL",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Work Experience"}),n.jsx("button",{onClick:w,className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition",children:"+ Add Experience"})]}),p.experiences.length===0?n.jsx("p",{className:"text-xs text-gray-500 italic",children:"No experiences added yet"}):p.experiences.map((O,R)=>n.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Experience ",R+1]}),n.jsx("button",{onClick:()=>S(R),className:"text-red-600 text-xs hover:text-red-800 font-semibold",children:"Remove"})]}),n.jsx("input",{type:"text",placeholder:"Company Name",value:O.company,onChange:F=>k(R,"company",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Job Title / Role",value:O.role,onChange:F=>k(R,"role",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[n.jsx("input",{type:"month",placeholder:"Start Date",value:O.start_date,onChange:F=>k(R,"start_date",F.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs"}),n.jsx("input",{type:"month",placeholder:"End Date",value:O.end_date,onChange:F=>k(R,"end_date",F.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs"})]}),n.jsx("textarea",{placeholder:"Description (Optional)",value:O.description,onChange:F=>k(R,"description",F.target.value),rows:2,className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]},R))]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Education"}),n.jsx("button",{onClick:E,className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition",children:"+ Add Education"})]}),p.education.length===0?n.jsx("p",{className:"text-xs text-gray-500 italic",children:"No education added yet"}):p.education.map((O,R)=>n.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Education ",R+1]}),n.jsx("button",{onClick:()=>A(R),className:"text-red-600 text-xs hover:text-red-800 font-semibold",children:"Remove"})]}),n.jsx("input",{type:"text",placeholder:"Institution / University",value:O.institution,onChange:F=>T(R,"institution",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Degree (e.g., B.Tech, MBA)",value:O.degree,onChange:F=>T(R,"degree",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"text",placeholder:"Field of Study",value:O.field_of_study,onChange:F=>T(R,"field_of_study",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs mb-2"}),n.jsx("input",{type:"number",placeholder:"Graduation Year",value:O.year,onChange:F=>T(R,"year",F.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]},R))]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:C,disabled:o||!r,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:o?"Submitting...":" Add Candidate"}),n.jsx("button",{onClick:()=>{t(),P()},className:"flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg font-semibold hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})]}):null},u9e={query:"",experience:{min:"",max:"",type:"total"},location:{current:"",preferred:"",remote:!1},salary:{min:"",max:"",currency:"INR",type:"expected"},keywords:[],companies:[],designations:[],education:{degrees:[],institutions:[],majors:[],topTier:!1},certifications:[],activeCertsOnly:!1},m9e=["react","reactjs","redux","javascript","typescript","node.js","nodejs","express","python","java","spring boot","django","flask","fastapi","sql","postgresql","mysql","mongodb","redis","aws","azure","gcp","docker","kubernetes","html","css","tailwind","rest","graphql","microservices","machine learning","nlp"],f9e=["aws certified","aws certified solutions architect","pmp","scrum master","azure certified","google cloud certified"],h9e=["bachelor","bachelors","b.tech","be","master","masters","m.tech","mba","bca","mca"],p9e=["computer science","information technology","software engineering","electronics","electrical","data science"],x9e=["bangalore","bengaluru","hyderabad","chennai","pune","mumbai","delhi","noida","gurgaon","kolkata","ahmedabad"],g9e=new Set(["html","css","tailwind","javascript"]),PV=["must","required","mandatory","essential"],y9e=["preferred","nice to have","plus","good to have"],v9e=["remote","work from home","wfh","hybrid"],fa=e=>String(e||"").toLowerCase().replace(/\s+/g," ").trim(),b9e=e=>e?Array.isArray(e)?e:String(e).split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[],j9e=e=>b9e(e).map(t=>typeof t=="string"?t:(t==null?void 0:t.name)||(t==null?void 0:t.title)||(t==null?void 0:t.label)||(t==null?void 0:t.skill)||"").map(t=>t.trim()).filter(Boolean),_9e=e=>JSON.parse(JSON.stringify(e)),tu=e=>String(e||"").split(" ").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),pb=(e,t)=>{const r=fa(e);return t.some(s=>r.includes(fa(s)))},Cp=(e,t)=>{const r=fa(e);return t.filter(s=>{const a=fa(s).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${a}\\b`,"i").test(r)})},w9e=e=>String(e||"").split(/[\n.!?]+/).map(t=>t.trim()).filter(Boolean),XI=e=>{const t=fa(e);return t==="reactjs"?"react":t==="nodejs"?"node.js":t},N9e=e=>{const t=fa(e);let r=null,s=null;const a=t.match(/(\d{1,2})\s*(?:-|to)\s*(\d{1,2})\s*(?:\+)?\s*(?:years|year|yrs|yr)/i);if(a&&(r=Number(a[1]),s=Number(a[2])),r===null){const i=t.match(/(\d{1,2})\s*\+\s*(?:years|year|yrs|yr)/i);i&&(r=Number(i[1]),s="")}if(r===null){const i=t.match(/(?:minimum|min)\s*(\d{1,2})\s*(?:\+)?\s*(?:years|year|yrs|yr)/i);i&&(r=Number(i[1]),s="")}return{min_years:r===null?"":r,max_years:s===null?"":s,type:t.includes("relevant experience")?"relevant":"total"}},k9e=(e,t)=>{const r=fa(t),s=String((e==null?void 0:e.location)||"").trim(),a=Cp(r,x9e).map(o=>o==="bengaluru"?"bangalore":o).map(tu),i=s||a[0]||"",l=a.filter(o=>fa(o)!==fa(i));return{primary:i,alternatives:l,remote_allowed:pb(r,v9e)}},S9e=e=>{const t=fa(e),r=Cp(t,h9e).map(tu),s=Cp(t,p9e).map(tu);return{degrees:r,majors:s,institutions:[],tier:"any",required:pb(t,PV)}},C9e=e=>Cp(e,f9e).map(t=>({name:tu(t),required:!1})),A9e=(e,t)=>{const r=[],s=l=>{const o=String(l||"").trim();o&&(r.some(c=>fa(c)===fa(o))||r.push(o))};s(e==null?void 0:e.title);const a=/\b(?:senior|sr|lead|principal|staff|junior|jr)?\s*(?:software engineer|engineer|developer|architect|analyst|consultant|manager)\b/gi;return(String(t||"").match(a)||[]).forEach(l=>s(tu(l))),r},E9e=(e={},t="")=>{const r=fa([e==null?void 0:e.title,t].filter(Boolean).join(" "));return r.includes("frontend")||r.includes("front end")||r.includes("web")||r.includes("ui")||r.includes("react")||r.includes("angular")||r.includes("vue")},T9e=(e,t,r="text")=>{if(r==="job_skills")return"must_have";const s=fa(e);for(const a of t){const i=fa(a);if(i.includes(s)){if(pb(i,PV))return"must_have";if(pb(i,y9e))return"nice_to_have"}}return"nice_to_have"},P9e=(e,t)=>{const r=w9e(t),s=new Map,a=E9e(e,t);j9e(e==null?void 0:e.skills).forEach(o=>{const c=XI(o);c&&s.set(c,{source:"job_skills"})}),Cp(t,m9e).forEach(o=>{const c=XI(o);c&&(!a&&g9e.has(c)||s.has(c)||s.set(c,{source:"text"}))});const i=[],l=[];return s.forEach((o,c)=>{const d=T9e(c,r,o.source),u={name:tu(c),variations:[tu(c)],weight:d==="must_have"?1:.5,category:"General"};d==="must_have"?i.push(u):l.push(u)}),{must_have:i,nice_to_have:l}},O9e=(e,t)=>{var a;const r=String((e==null?void 0:e.title)||"").trim();return r||(((a=t==null?void 0:t.skills)==null?void 0:a.must_have)||[]).map(i=>i.name).slice(0,3).join(" ").trim()},R9e=e=>{let t=0;(e.skills.must_have||[]).length>0&&(t+=1),(e.experience.min_years!==""||e.experience.max_years!=="")&&(t+=1),e.location.primary&&(t+=1),(e.education.degrees||[]).length>0&&(t+=1),(e.certifications||[]).length>0&&(t+=1),(e.designation.keywords||[]).length>0&&(t+=1);const r=.35+t/6*.6;return Math.max(.35,Math.min(.95,Number(r.toFixed(2))))},L9e=()=>_9e(u9e),OV=(e={})=>{const t=[e==null?void 0:e.description,e==null?void 0:e.jd_text].filter(Boolean).join(`
`),r=[e==null?void 0:e.title,t].filter(Boolean).join(`
`),s={skills:P9e(e,r),experience:N9e(r),location:k9e(e,r),education:S9e(r),certifications:C9e(r),designation:{keywords:A9e(e,r)}};s.confidence_score=R9e(s);const a=I9e(s,{query:"",keywords:[]}),i=O9e(e,s)||a.query,l=a.keywords;return{analysis:s,query:i,keywords:l,filters:a}},I9e=(e={},t={})=>{var c,d,u,m,f,y,x,p,h,v,b,j,_,N,w;const r=L9e();r.query=String(t.query||"").trim(),r.keywords=Array.isArray(t.keywords)?[...t.keywords]:[];const s=(((c=e==null?void 0:e.skills)==null?void 0:c.must_have)||[]).map(k=>k.name),a=(((d=e==null?void 0:e.skills)==null?void 0:d.nice_to_have)||[]).map(k=>k.name),i=(s.length>0?s:a).map(k=>String(k||"").trim()).filter(Boolean);if(r.keywords.length===0&&i.length&&(r.keywords=i.slice(0,5)),!r.query){const k=(((u=e==null?void 0:e.designation)==null?void 0:u.keywords)||[]).slice(0,2),S=((m=e==null?void 0:e.location)==null?void 0:m.primary)||"";r.query=[...k,...r.keywords.slice(0,4),S].filter(Boolean).join(" ").trim()}const l=(f=e==null?void 0:e.experience)==null?void 0:f.min_years,o=(y=e==null?void 0:e.experience)==null?void 0:y.max_years;return r.experience.min=l===""||l===void 0?"":String(l),r.experience.max=o===""||o===void 0?"":String(o),r.experience.type=((x=e==null?void 0:e.experience)==null?void 0:x.type)==="relevant"?"relevant":"total",r.location.current=((p=e==null?void 0:e.location)==null?void 0:p.primary)||"",r.location.preferred=(((h=e==null?void 0:e.location)==null?void 0:h.alternatives)||[])[0]||"",r.location.remote=!!((v=e==null?void 0:e.location)!=null&&v.remote_allowed),r.designations=(((b=e==null?void 0:e.designation)==null?void 0:b.keywords)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.degrees=(((j=e==null?void 0:e.education)==null?void 0:j.degrees)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.majors=(((_=e==null?void 0:e.education)==null?void 0:_.majors)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.institutions=(((N=e==null?void 0:e.education)==null?void 0:N.institutions)||[]).map(k=>String(k||"").trim()).filter(Boolean),r.education.topTier=!!((w=e==null?void 0:e.education)!=null&&w.top_tier),r.certifications=((e==null?void 0:e.certifications)||[]).map(k=>typeof k=="string"?k:(k==null?void 0:k.name)||"").map(k=>String(k||"").trim()).filter(Boolean),r},F9e=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,""),RV=e=>{try{const t=JSON.stringify(e||{}),r=new TextEncoder().encode(t);let s="";return r.forEach(a=>{s+=String.fromCharCode(a)}),F9e(window.btoa(s))}catch{return""}},YI=()=>{var E;const e=Et(),{jobs:t,loading:r,error:s}=a9e(),[a,i]=g.useState(!1),[l,o]=g.useState(null),[c,d]=g.useState(!1),[u,m]=g.useState(null),[f,y]=g.useState(""),[x,p]=g.useState(""),[h,v]=g.useState(""),b=T=>{if(!T)return;const A=new URLSearchParams;A.set("jobId",T.id||T.job_id),T.title&&A.set("jobTitle",T.title),A.set("tab","sent_to_am"),e(`/recruiter/candidate-workflow?${A.toString()}`)},j=t.filter(T=>{var C,P,O;const A=f.toLowerCase();return!A||((C=T.title)==null?void 0:C.toLowerCase().includes(A))||((P=T.location)==null?void 0:P.toLowerCase().includes(A))||((O=T.department)==null?void 0:O.toLowerCase().includes(A))||(T.skills||[]).some(R=>(typeof R=="string"?R:(R==null?void 0:R.name)||"").toLowerCase().includes(A))}),_=T=>{const A={active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",open:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",closed:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",draft:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"};return n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${A[T]||A.active}`,children:T||"Active"})},N=T=>{const A={hybrid:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",remote:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",onsite:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"};return T?n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${A[T]||A.hybrid}`,children:T}):null},w=T=>{var A;return(T==null?void 0:T.client_name)||((A=T==null?void 0:T.client)==null?void 0:A.client_name)||(T==null?void 0:T.client_display_name)||(T==null?void 0:T.company_name)||"Client not specified"},k=T=>{const A=String(T||"").toUpperCase();return A.includes("INR")||A.includes("")?lAe:Qp},S=async T=>{const A=(T==null?void 0:T.id)||(T==null?void 0:T.job_id)||"";if(!A)return;v(""),p(A);const C=new URLSearchParams;try{const{analysis:P,query:O,keywords:R}=OV(T),F=RV(P);O&&C.set("q",O),R.length&&C.set("keywords",R.join(",")),(T!=null&&T.job_id||T!=null&&T.id)&&C.set("job_id",T.job_id||T.id),T!=null&&T.title&&C.set("job_title",T.title),F&&C.set("analysis",F),C.set("auto_search","1"),e(`/recruiter/resdex/advanced-search?${C.toString()}`)}catch{v("Unable to analyze this JD. Please try manual search.")}finally{p("")}};return r?n.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Assigned Jobs"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Jobs assigned to you by Account Managers"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by title, location, department, skills...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:f,onChange:T=>y(T.target.value)})]})}),s&&n.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 flex items-center",children:[n.jsx(Zs,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),n.jsx("p",{className:"text-red-800 dark:text-red-300",children:s})]}),h&&n.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-6 flex items-center",children:[n.jsx(Zs,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 mr-3"}),n.jsx("p",{className:"text-amber-800 dark:text-amber-300",children:h})]}),j.length===0?n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-12 text-center",children:[n.jsx(ha,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"No assigned jobs"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Jobs assigned to you by Account Managers will appear here"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:j.map(T=>{var A;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-5 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_(T.status),N(T.mode)]}),n.jsxs("span",{className:"text-purple-200 text-xs",children:["ID: ",T.job_id||((A=T.id)==null?void 0:A.slice(0,8))]})]}),n.jsx("h3",{className:"text-lg font-bold text-white mt-1 line-clamp-1",children:T.title})]}),n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(df,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:w(T)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx($c,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:T.location||"Location not specified"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(ha,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:T.experience||`${T.min_experience||0} - ${T.max_experience||"Any"} yrs`})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(qr,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[T.no_of_positions||1," position(s)"]})]}),(T.budget||T.salary_range)&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.createElement(k(T.budget||T.salary_range),{className:"w-4 h-4 text-green-500 flex-shrink-0"}),n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:T.budget||T.salary_range})]}),n.jsx("div",{className:"pt-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Array.isArray(T.skills)?T.skills:[]).slice(0,3).map((C,P)=>n.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 rounded-full text-xs",children:typeof C=="string"?C:(C==null?void 0:C.name)||C},P)),Array.isArray(T.skills)&&T.skills.length>3&&n.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full text-xs",children:["+",T.skills.length-3]})]})})]}),n.jsxs("div",{className:"px-4 pb-4 pt-0 flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>{m(T),d(!0)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:[n.jsx(cl,{className:"w-4 h-4"}),"View Details"]}),n.jsxs("button",{onClick:()=>b(T),className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:[n.jsx(qr,{className:"w-4 h-4"}),"Submissions"]})]}),n.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[n.jsxs("button",{onClick:()=>S(T),disabled:x===(T.id||T.job_id),className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 border border-purple-500 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-sm disabled:opacity-60 disabled:cursor-not-allowed",children:[n.jsx(Es,{className:"w-4 h-4"}),x===(T.id||T.job_id)?"Analyzing JD...":"Smart Search"]}),n.jsxs("button",{onClick:()=>{o(T),i(!0)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[n.jsx(Yv,{className:"w-4 h-4"}),"Add Candidate"]})]})]},T.id)})}),c&&u&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-white",children:u.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs("span",{className:"text-purple-200 text-sm",children:["ID: ",u.job_id||((E=u.id)==null?void 0:E.slice(0,8))]}),_(u.status),N(u.mode)]})]}),n.jsx("button",{onClick:()=>{d(!1),m(null)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Ar,{className:"w-6 h-6 text-white"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Client"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:w(u)})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Client TA (Contact)"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.client_ta||u.client_contact||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Mode"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium capitalize",children:u.mode||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Experience"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.experience||`${u.min_experience||0} - ${u.max_experience||"Any"} years`})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.location||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.duration||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"No of Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-semibold text-lg",children:u.no_of_positions||1})]}),n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Budget / CTC"}),n.jsx("p",{className:"text-green-700 dark:text-green-300 mt-1 font-semibold",children:u.budget||u.salary_range||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.work_timings||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-medium",children:u.joining_preference||""})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Posted"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:Zp(u.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 uppercase tracking-wide",children:"Skills Required"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(u.skills)?u.skills:[]).map((T,A)=>n.jsx("span",{className:"px-3 py-1.5 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 rounded-full text-sm font-medium",children:typeof T=="string"?T:(T==null?void 0:T.name)||T},A)),(!u.skills||u.skills.length===0)&&n.jsx("span",{className:"text-gray-400 italic",children:"No skills specified"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 uppercase tracking-wide",children:"Job Description"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:u.description||u.jd_text||"No description provided"})})]}),u.am_notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-amber-700 dark:text-amber-400 mb-3 uppercase tracking-wide",children:" Notes from Account Manager"}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-5 rounded-lg",children:n.jsx("p",{className:"text-amber-900 dark:text-amber-200 whitespace-pre-wrap leading-relaxed",children:u.am_notes})})]})]}),n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{d(!1),m(null)},className:"px-5 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Close"}),n.jsxs("button",{onClick:()=>b(u),className:"px-5 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium",children:[n.jsx(qr,{className:"w-4 h-4"}),"View Submissions"]}),n.jsxs("button",{onClick:()=>{o(u),i(!0),d(!1)},className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium",children:[n.jsx(Yv,{className:"w-4 h-4"}),"Add Candidate"]})]})]})}),n.jsx(TV,{isOpen:a,onClose:()=>i(!1),job:l})]})})};function D9e(){var S,E,T,A;const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState([]),[l,o]=g.useState(new Set),[c,d]=g.useState(!0),[u,m]=g.useState(!1),[f,y]=g.useState(!1),[x,p]=g.useState(!1),[h,v]=g.useState(""),[b,j]=g.useState("");g.useEffect(()=>{_()},[e]);async function _(){var C,P,O;try{v(""),d(!0);const R=await cte(e),F=R.data||((C=R.data)==null?void 0:C.data);if(console.log(" Job loaded:",F),!F)throw new Error("No job data in response");s(F)}catch(R){console.error(" Job load error:",R);const F=((O=(P=R.response)==null?void 0:P.data)==null?void 0:O.detail)||R.message||"Failed to load job details";v(F),s(null)}finally{d(!1)}}async function N(){var C;if(x){p(!1);return}try{v(""),m(!0);const P=await dte(e),O=P.data||((C=P.data)==null?void 0:C.data);i(O.candidates||[]),p(!0)}catch(P){console.error("Candidate pool error:",P),v("Failed to fetch candidate pool")}finally{m(!1)}}function w(C){const P=new Set(l);P.has(C)?P.delete(C):P.add(C),o(P)}async function k(){var C,P,O;if(l.size===0){v("Please select at least one candidate");return}try{v(""),j(""),y(!0);const R=await ute(e,Array.from(l)),F=R.data||((C=R.data)==null?void 0:C.data);j(`Successfully sent ${F.total_submitted} candidates to Account Manager`),o(new Set),setTimeout(()=>{N()},1e3)}catch(R){console.error("Send to AM error:",R),v(((O=(P=R.response)==null?void 0:P.data)==null?void 0:O.detail)||"Failed to send candidates")}finally{y(!1)}}return c?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(zj,{className:"animate-spin text-4xl text-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading job details..."})]}):r?n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[n.jsx(UN,{})," Back to Jobs"]})}),h&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-600",children:h}),b&&n.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 text-green-600 flex items-center gap-2",children:[n.jsx(Lx,{className:"text-lg"})," ",b]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.location&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(G7,{})," ",r.location]}),r.job_type&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(mte,{})," ",r.job_type]}),r.department&&n.jsxs("div",{className:"text-gray-600",children:[" ",r.department]})]})]}),n.jsxs("div",{className:"lg:col-span-1 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Account Manager"}),n.jsx("p",{className:"font-bold text-gray-900",children:((S=r.account_manager)==null?void 0:S.am_name)||"Unassigned"}),((E=r.account_manager)==null?void 0:E.am_email)&&n.jsx("p",{className:"text-sm text-gray-600",children:r.account_manager.am_email})]})]}),r.description&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-700 whitespace-pre-line line-clamp-3",children:r.description})]}),r.skills&&r.skills.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(H7,{})," Required Skills"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(r.skills)?r.skills:[]).map((C,P)=>n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:C},P))})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.min_experience!==void 0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"MIN EXPERIENCE"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.min_experience," years"]})]}),r.max_experience&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"MAX EXPERIENCE"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.max_experience," years"]})]}),r.salary_range&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"SALARY RANGE"}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:r.salary_range})]}),r.status&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"STATUS"}),n.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-bold",children:r.status.toUpperCase()})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[n.jsxs("div",{onClick:N,className:"p-6 cursor-pointer hover:bg-gray-50 transition flex items-center justify-between border-b",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Candidate Pool & Assignment"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Select candidates to send to"," ",((T=r.account_manager)==null?void 0:T.am_name)||"Account Manager"]})]}),n.jsx("div",{className:"text-gray-600",children:x?n.jsx(z1,{className:"h-6 w-6"}):n.jsx(fo,{className:"h-6 w-6"})})]}),x&&n.jsx("div",{className:"p-6",children:u?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(zj,{className:"animate-spin text-2xl text-blue-600 mr-3"}),n.jsx("span",{className:"text-gray-600",children:"Matching candidates with job..."})]}):a.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No candidates available in the pool"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-3 mb-6",children:a.map(C=>{var L,I;const P=C.match_score??C.match_percentage??0,O=Number(P),R=Number.isFinite(O)?Math.round(O):0,F=C.fit_label,Q=R>=80?"bg-green-100 text-green-700":R>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700",W=R>=80?"bg-green-500":R>=50?"bg-yellow-500":"bg-gray-400";return n.jsx("div",{className:`border rounded-lg p-4 transition ${l.has(C.candidate_id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("input",{type:"checkbox",checked:l.has(C.candidate_id),onChange:()=>w(C.candidate_id),className:"w-5 h-5 mt-1 rounded cursor-pointer"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-900",children:C.full_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",C.public_id]})]}),n.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 ${Q}`,children:[n.jsx(Lx,{className:"h-4 w-4"}),R,"% Match"]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${W}`,style:{width:`${Math.min(100,Math.max(0,R))}%`}})}),F&&n.jsx("span",{className:"text-xs font-semibold text-gray-600",children:F})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),n.jsx("p",{className:"text-gray-700",children:C.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),n.jsx("p",{className:"text-gray-700",children:C.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Experience"}),n.jsxs("p",{className:"text-gray-700",children:[C.experience_years," years",C.experience_match&&n.jsx("span",{className:"ml-1 text-green-600",children:""})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Location"}),n.jsx("p",{className:"text-gray-700",children:C.current_location||""})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(L=C.matched_skills)==null?void 0:L.map((K,D)=>n.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium flex items-center gap-1",children:[n.jsx(Lx,{className:"h-3 w-3"})," ",K]},`matched-${D}`)),(I=C.unmatched_skills)==null?void 0:I.map((K,D)=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium text-opacity-70",children:K},`unmatched-${D}`))]})]})]})]})},C.candidate_id)})}),l.size>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-semibold",children:[l.size," candidate",l.size>1?"s":""," selected"]}),n.jsxs("p",{className:"text-sm text-blue-700",children:["Ready to send to"," ",((A=r.account_manager)==null?void 0:A.am_name)||"Account Manager"]})]}),n.jsx("button",{onClick:k,disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:f?n.jsxs(n.Fragment,{children:[n.jsx(zj,{className:"animate-spin"})," Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lx,{})," Send to Account Manager"]})})]})]})})]})]}):n.jsxs("div",{className:"p-8",children:[n.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-4",children:[n.jsx(UN,{})," Back"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[n.jsx("h2",{className:"font-bold text-lg mb-2 text-red-600",children:" Error Loading Job"}),n.jsx("p",{className:"text-red-700 mb-4",children:h||"Job not found"}),n.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]})]})}const $9e=()=>q.get("/v1/recruiter/profile").then(LV),M9e=e=>q.put("/v1/recruiter/profile",e).then(LV);function LV(e){var t;return((t=e.data)==null?void 0:t.data)||e.data}const B9e=e=>!e||e.trim().length===0?"Full name is required":e.length<2?"Full name must be at least 2 characters":e.length>100?"Full name cannot exceed 100 characters":e[0].match(/[A-Z]/)?null:"Full name must start with capital letter",U9e=e=>!e||e.trim().length===0?"Phone number is required":e.replace(/\D/g,"").length!==10?"Phone must be exactly 10 digits":null;function z9e(){const[e,t]=g.useState({email_notifications:!1,sms_alerts:!1,report_emails:!1,interview_reminders:!1,two_factor_enabled:!1}),[r,s]=g.useState(!0),[a,i]=g.useState(""),[l,o]=g.useState("");g.useEffect(()=>{c()},[]);async function c(){s(!0),i("");try{const u=await q.get("/v1/recruiter/preferences");t(u.data)}catch{i("Failed to load settings")}s(!1)}async function d(u){i(""),o("");const m={...e,[u]:!e[u]};t(m);try{const f=new URLSearchParams;Object.entries(m).forEach(([y,x])=>{f.append(y,String(x))}),await q.put("/v1/recruiter/preferences",f),o("Settings updated")}catch{i("Failed to update settings"),t(e)}}return r?n.jsx("div",{children:"Loading settings..."}):n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"font-medium mb-2",children:"Product Settings"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.email_notifications,onChange:()=>d("email_notifications")}),"Email Notifications"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.sms_alerts,onChange:()=>d("sms_alerts")}),"SMS Alerts"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.report_emails,onChange:()=>d("report_emails")}),"Report Emails"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.interview_reminders,onChange:()=>d("interview_reminders")}),"Interview Reminders"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:e.two_factor_enabled,onChange:()=>d("two_factor_enabled")}),"Two-Factor Authentication"]})]}),a&&n.jsx("div",{className:"text-xs text-red-500 mt-1",children:a}),l&&n.jsx("div",{className:"text-xs text-green-600 mt-1",children:l})]})}function W9e(){return n.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Settings"}),n.jsx(z9e,{})]})}function ZI(){const[e,t]=g.useState(null),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState(!1),[c,d]=g.useState({full_name:"",phone:""}),[u,m]=g.useState({}),[f,y]=g.useState(!1);g.useEffect(()=>{(async()=>{var j,_;try{s(!0),i(null);const N=await $9e();t(N),d({full_name:N.full_name||"",phone:N.phone||""})}catch(N){i(((_=(j=N.response)==null?void 0:j.data)==null?void 0:_.detail)||"Failed to load profile")}finally{s(!1)}})()},[]);const x=()=>{o(!0),m({})},p=()=>{o(!1),d({full_name:(e==null?void 0:e.full_name)||"",phone:(e==null?void 0:e.phone)||""}),m({})},h=async()=>{var N,w;const b={},j=B9e(c.full_name);j&&(b.full_name=j);const _=U9e(c.phone);if(_&&(b.phone=_),Object.keys(b).length>0){m(b);return}try{y(!0);const k=await M9e(c);t(k),o(!1),m({})}catch(k){m({submit:((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.detail)||"Failed to update profile"})}finally{y(!1)}};if(r)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),n.jsx("p",{className:"text-gray-600 mt-4",children:"Loading profile..."})]})});if(a&&!e)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:a})})});const v=e;return n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center text-2xl font-bold text-indigo-600",children:v.full_name?v.full_name.charAt(0).toUpperCase():"R"}),n.jsxs("div",{className:"ml-6 text-white",children:[n.jsx("h1",{className:"text-2xl font-bold",children:v.full_name||"Recruiter"}),n.jsx("p",{className:"text-indigo-100",children:v.email}),n.jsxs("p",{className:"text-indigo-200 text-sm",children:["Role: ",v.role||"Recruiter"]})]})]}),!l&&n.jsx("button",{onClick:x,className:"bg-white text-indigo-600 px-4 py-2 rounded-lg font-medium hover:bg-indigo-50",children:"Edit Profile"})]})}),n.jsxs("div",{className:"px-6 py-8",children:[u.submit&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-700",children:u.submit})}),l?n.jsxs("div",{className:"max-w-2xl",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Edit Profile"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:c.full_name,onChange:b=>d({...c,full_name:b.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${u.full_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Enter full name"}),u.full_name&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.full_name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:c.phone,onChange:b=>d({...c,phone:b.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${u.phone?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Enter 10-digit phone number"}),u.phone&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.phone}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Format: +1234567890 (10 digits)"})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsx("button",{onClick:h,disabled:f,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:f?"Saving...":"Save Changes"}),n.jsx("button",{onClick:p,disabled:f,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 disabled:opacity-50",children:"Cancel"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),n.jsx("p",{className:"text-gray-900",children:v.full_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:v.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:v.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Role"}),n.jsx("p",{className:"text-gray-900",children:v.role||"Recruiter"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Username"}),n.jsx("p",{className:"text-gray-900",children:v.username||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Login"}),n.jsx("p",{className:"text-gray-900",children:v.last_login?new Date(v.last_login).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),n.jsx("p",{className:"text-green-600 font-medium",children:v.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Company"}),n.jsx("p",{className:"text-gray-900",children:v.company_name||"N/A"})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),n.jsx("p",{className:"text-gray-900 break-all",children:v.id||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),n.jsx("p",{className:"text-gray-900",children:v.created_at?new Date(v.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Updated At"}),n.jsx("p",{className:"text-gray-900",children:v.updated_at?new Date(v.updated_at).toLocaleDateString():"N/A"})]})]})]})]}),n.jsx(W9e,{})]})]})})}function V9e(){const[e,t]=g.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[r,s]=g.useState({}),[a,i]=g.useState(!1),[l,o]=g.useState(""),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[f,y]=g.useState(!1),[x,p]=g.useState(null),h=Et();g.useEffect(()=>{(async()=>{try{const N=await q.get("/v1/recruiter/profile");p(N.data)}catch(N){console.error("Failed to fetch user profile:",N)}})()},[]);const v=()=>{const _={};return e.oldPassword.trim()||(_.oldPassword="Current password is required"),e.newPassword.trim()?e.newPassword.length<8?_.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=])[A-Za-z\d!@#$%^&*()_+\-=]{8,}/.test(e.newPassword)||(_.newPassword="Password must contain uppercase, lowercase, number and special character"):_.newPassword="New password is required",e.confirmPassword.trim()?e.newPassword!==e.confirmPassword&&(_.confirmPassword="Passwords do not match"):_.confirmPassword="Please confirm your new password",s(_),Object.keys(_).length===0},b=async _=>{var N,w,k,S;if(_.preventDefault(),!!v()&&window.confirm("Are you sure you want to change your password? You will be logged out after the change.")){i(!0),o("");try{const E=new FormData;E.append("current_password",e.oldPassword),E.append("new_password",e.newPassword),await q.post("/v1/recruiter/change-password",E),o("Password changed successfully! You will be redirected to login."),setTimeout(()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),h("/login")},2e3)}catch(E){const T=((w=(N=E.response)==null?void 0:N.data)==null?void 0:w.detail)||((S=(k=E.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to change password";o(T)}finally{i(!1)}}},j=(_,N)=>{t(w=>({...w,[_]:N})),r[_]&&s(w=>({...w,[_]:""}))};return n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Change Password"}),n.jsx("p",{className:"text-gray-600",children:"Update your password to keep your account secure"})]}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:c?"text":"password",value:e.oldPassword,onChange:_=>j("oldPassword",_.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.oldPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.oldPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:u?"text":"password",value:e.newPassword,onChange:_=>j("newPassword",_.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.newPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.newPassword})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:f?"text":"password",value:e.confirmPassword,onChange:_=>j("confirmPassword",_.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.confirmPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Changing Password...":"Change Password"})}),l&&n.jsx("div",{className:`p-4 rounded-lg ${l.includes("successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l})]})]})]})}const Ok={new:{label:"New",color:"bg-blue-100 text-blue-700",icon:qr},applied:{label:"Applied",color:"bg-blue-100 text-blue-700",icon:qr},sourced:{label:"Sourced",color:"bg-blue-100 text-blue-700",icon:qr},called:{label:"Called",color:"bg-indigo-100 text-indigo-700",icon:V1},feedback_added:{label:"Feedback Added",color:"bg-purple-100 text-purple-700",icon:zU},hold_revisit:{label:"Hold/Revisit",color:"bg-amber-100 text-amber-700",icon:pn},rejected_by_recruiter:{label:"Rejected",color:"bg-red-100 text-red-700",icon:ti},sent_to_am:{label:"Sent to AM",color:"bg-teal-100 text-teal-700",icon:Ri},am_shortlisted:{label:"AM Shortlisted",color:"bg-green-100 text-green-700",icon:mf},am_rejected:{label:"AM Rejected",color:"bg-red-100 text-red-700",icon:t3e},sent_to_client:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:Ri},client_shortlisted:{label:"Client Shortlisted",color:"bg-green-100 text-green-700",icon:Oi},client_hold:{label:"Client Hold",color:"bg-amber-100 text-amber-700",icon:pn},client_rejected:{label:"Client Rejected",color:"bg-red-100 text-red-700",icon:ti},interview_scheduled:{label:"Interview Scheduled",color:"bg-violet-100 text-violet-700",icon:si},interview_completed:{label:"Interview Done",color:"bg-violet-100 text-violet-700",icon:Oi},selected:{label:"Selected",color:"bg-emerald-100 text-emerald-700",icon:mf},negotiation:{label:"Negotiation",color:"bg-yellow-100 text-yellow-700",icon:Qp},hired:{label:"Hired",color:"bg-green-100 text-green-700",icon:WU},offer_declined:{label:"Offer Declined",color:"bg-gray-100 text-gray-700",icon:ti}},to=e=>{const t=String(e||"new").toLowerCase().trim();return t==="am_viewed"?"sent_to_am":t==="client_viewed"?"sent_to_client":t},xo=e=>String(e||"").toLowerCase().trim(),H9e=["new","applied","sourced","called","feedback_added","hold_revisit","rejected_by_recruiter","sent_to_am","am_shortlisted","hold_revisit","am_rejected","sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],QI=["sent_to_am","am_shortlisted","hold_revisit","am_rejected","sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected"],IV=(e,t={})=>{var r;return e==="hold_revisit"&&t.isJobScoped?"AM Hold":((r=Ok[e])==null?void 0:r.label)||e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")},gf=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,rr=(...e)=>{for(const t of e)if(gf(t))return typeof t=="string"?t.trim():t;return""},Rk=e=>String(e||"").trim().toLowerCase(),q9e=/^[a-z]{2,6}-c-\d{3,}$/i,G9e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,J9e=/^[0-9a-f]{24}$/i,K9e=/^[0-9a-f]{32}$/i,X9e=/^[0-9A-HJKMNP-TV-Z]{26}$/,Y9e=/^\d+$/,Z9e=e=>q9e.test(String(e||"").trim()),FV=e=>{const t=String(e||"").trim();return!t||Z9e(t)?!1:G9e.test(t)||J9e.test(t)||K9e.test(t)||X9e.test(t)||Y9e.test(t)},Q9e=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=new Set([e==null?void 0:e.application_id,e==null?void 0:e.applicationId,t==null?void 0:t.application_id,t==null?void 0:t.applicationId].map(a=>Rk(a)).filter(Boolean)),s=[e==null?void 0:e.candidate_uuid,t==null?void 0:t.candidate_uuid,e==null?void 0:e.candidate_id,t==null?void 0:t.candidate_id,e==null?void 0:e.id,t==null?void 0:t.id];for(const a of s){const i=String(a||"").trim();if(!i)continue;const l=Rk(i);if(l&&!r.has(l)&&FV(i))return i}return""},eBe=e=>{if(!gf(e))return"--";const t=String(e).trim();return t?/yr|year/i.test(t)?t:`${t} yrs`:"--"},tBe=(e=new Date)=>{const t=o=>String(o).padStart(2,"0"),r=e.getFullYear(),s=t(e.getMonth()+1),a=t(e.getDate()),i=t(e.getHours()),l=t(e.getMinutes());return`${r}-${s}-${a}T${i}:${l}`},rBe=()=>{const e=String(localStorage.getItem("user_id")||localStorage.getItem("id")||"").trim();if(e)return e;try{const t=localStorage.getItem("user");if(!t)return"";const r=JSON.parse(t);return String((r==null?void 0:r.id)||(r==null?void 0:r.user_id)||"").trim()}catch{return""}},nBe=(e={})=>String(rr(e==null?void 0:e.assigned_recruiter_id,e==null?void 0:e.recruiter_id,e==null?void 0:e.submitted_by)||"").trim(),sBe=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e,t];return r.some(o=>gf(rr(o==null?void 0:o.interview_id,o==null?void 0:o.next_interview_id,o==null?void 0:o.latest_interview_id,o==null?void 0:o.upcoming_interview_id)))||r.some(o=>{const c=rr(o==null?void 0:o.scheduled_at,o==null?void 0:o.interview_scheduled_at,o==null?void 0:o.next_interview_date,o==null?void 0:o.interview_date,o==null?void 0:o.interview_datetime);if(!c)return!1;const d=new Date(c).getTime();return Number.isFinite(d)&&d>0})||r.some(o=>{const c=Number(rr(o==null?void 0:o.interview_count,o==null?void 0:o.interviews_count,o==null?void 0:o.scheduled_interviews_count,o==null?void 0:o.upcoming_interviews_count,o==null?void 0:o.total_interviews)||0);return Number.isFinite(c)&&c>0})?!0:[e==null?void 0:e.interviews,t==null?void 0:t.interviews,e==null?void 0:e.interview_logs,t==null?void 0:t.interview_logs].some(o=>!Array.isArray(o)||o.length===0?!1:o.some(c=>{const d=to((c==null?void 0:c.status)||(c==null?void 0:c.stage)||"");if(d==="cancelled"||d==="rejected")return!1;const u=rr(c==null?void 0:c.scheduled_at,c==null?void 0:c.interview_date,c==null?void 0:c.interview_datetime);if(u){const m=new Date(u).getTime();if(Number.isFinite(m)&&m>0)return!0}return gf(rr(c==null?void 0:c.id,c==null?void 0:c.interview_id,c==null?void 0:c.uuid))}))},ij=(e={},t="new")=>{const r=to((e==null?void 0:e.status)||(e==null?void 0:e.stage)||t||"new");if(r==="interview_scheduled"&&!sBe(e)){const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},a=!!rr(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready),i=String(rr(e==null?void 0:e.interview_scheduling_note,s==null?void 0:s.interview_scheduling_note)||"").trim();return!a&&i?"interview_scheduled":"client_shortlisted"}return r},Lk=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id,t==null?void 0:t.id,t==null?void 0:t.candidate_id,t==null?void 0:t.public_id];return Array.from(new Set(r.map(s=>String(s||"").trim().toLowerCase()).filter(Boolean)))},sw=(e={})=>String(rr(e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id)||"").trim().toLowerCase(),aBe=(e=[])=>{const t=new Map,r=new Map,s=(a,i)=>{if(!a)return!0;const l=new Date((a==null?void 0:a.scheduledAt)||0).getTime();return new Date(i||0).getTime()>=l};return e.forEach(a=>{var f,y,x;const i=to((a==null?void 0:a.status)||"scheduled");if(["cancelled","rejected","no_show"].includes(i))return;const l=i==="completed"?"interview_completed":"interview_scheduled",o=rr(a==null?void 0:a.scheduled_at,a==null?void 0:a.scheduledAt),c=String(rr((f=a==null?void 0:a.candidate)==null?void 0:f.id,a==null?void 0:a.candidate_id,(y=a==null?void 0:a.candidate)==null?void 0:y.candidate_id)||"").trim().toLowerCase(),d=String(rr((x=a==null?void 0:a.job)==null?void 0:x.id,a==null?void 0:a.job_id)||"").trim().toLowerCase();if(!c)return;const u={status:l,scheduledAt:o||null,interviewStatus:i};if(d){const p=`${c}::${d}`,h=t.get(p);s(h,o)&&t.set(p,u)}const m=r.get(c);s(m,o)&&r.set(c,u)}),{byCandidateJob:t,byCandidate:r}},eF=(e={},t="",r="")=>{const s=String(t||"").trim().toLowerCase(),a=String(r||"").trim().toLowerCase();if(s&&Lk(e).includes(s))return!0;if(a){const i=String(rr(e==null?void 0:e.full_name,e==null?void 0:e.candidate_name,e==null?void 0:e.name)||"").trim().toLowerCase();if(i&&(i.includes(a)||a.includes(i)))return!0}return!1},DV=(e={},t="")=>{const r=ij(e);if(!["client_shortlisted","interview_scheduled","interview_completed"].includes(r))return!1;const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{};if(r==="client_shortlisted"&&!!!rr(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready))return!1;const a=nBe(e);return a&&t?a===String(t).trim():((e==null?void 0:e.is_assigned_recruiter)===!0,!0)},dA=e=>String(e||"").trim().split(/[\s_]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),tF={shortlisted:{label:"Shortlisted",icon:Oi,markerClass:"bg-green-50 border-green-200 text-green-700",badgeClass:"bg-green-50 border-green-200 text-green-700",latestClass:"ring-2 ring-green-200 border-green-200 shadow-md"},sent:{label:"Sent to Client",icon:Ri,markerClass:"bg-blue-50 border-blue-200 text-blue-700",badgeClass:"bg-blue-50 border-blue-200 text-blue-700",latestClass:"ring-2 ring-blue-200 border-blue-200 shadow-md"},interview:{label:"Interview",icon:si,markerClass:"bg-violet-50 border-violet-200 text-violet-700",badgeClass:"bg-violet-50 border-violet-200 text-violet-700",latestClass:"ring-2 ring-violet-200 border-violet-200 shadow-md"},hold:{label:"On Hold",icon:pn,markerClass:"bg-orange-50 border-orange-200 text-orange-700",badgeClass:"bg-orange-50 border-orange-200 text-orange-700",latestClass:"ring-2 ring-orange-200 border-orange-200 shadow-md"},rejected:{label:"Rejected",icon:ti,markerClass:"bg-red-50 border-red-200 text-red-700",badgeClass:"bg-red-50 border-red-200 text-red-700",latestClass:"ring-2 ring-red-200 border-red-200 shadow-md"}},iBe=e=>{const t=xo(e);return t.includes("reject")?"rejected":t.includes("hold")?"hold":t.includes("interview")?"interview":t.includes("shortlist")||["selected","hired","joined","offer_accepted"].includes(t)?"shortlisted":"sent"},lBe=(e={})=>{const t=xo(e==null?void 0:e.status);if(t==="am_rejected")return"Account Manager";if(t==="client_rejected")return"Client";const r=dA(rr(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")||String(rr(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name)).trim().toLowerCase().includes("client")?"Client":""},Ap=(e={})=>{const t=dA(rr(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();if(t.includes("account manager"))return"Account Manager";if(t.includes("client"))return"Client";if(t.includes("recruiter"))return"Recruiter";if(t.includes("candidate"))return"Candidate";const r=String(rr(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name)).trim().toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")?"Client":r.includes("recruiter")?"Recruiter":r.includes("candidate")?"Candidate":""},oBe=(e={})=>{const t=xo(e==null?void 0:e.status);return t==="am_hold"||t==="hold_revisit"?"Account Manager":t==="client_hold"?"Client":Ap(e)},cBe=(e={})=>{const t=xo(e==null?void 0:e.status);return t==="am_shortlisted"?"Account Manager":t==="client_shortlisted"?"Client":Ap(e)},dBe=(e={})=>{const t=xo(e==null?void 0:e.status),r=Ap(e);return r||(t==="sent_to_client"?"Account Manager":t==="sent_to_am"?"Recruiter":t==="client_viewed"?"Client":t==="am_viewed"?"Account Manager":"")},uBe=(e={},t="sent")=>{const r=xo(e==null?void 0:e.status);if(r==="am_viewed")return`Viewed by ${Ap(e)||"Account Manager"}`;if(r==="client_viewed")return`Viewed by ${Ap(e)||"Client"}`;if(t==="hold"){const a=oBe(e);return a?`On Hold by ${a}`:"On Hold"}if(t==="interview")return r==="interview_completed"?"Interview Completed":r==="interview_scheduled"?"Interview Scheduled":"Interview";if(t==="shortlisted"){const a=cBe(e);return a?`Shortlisted by ${a}`:"Shortlisted"}if(t==="sent"){const a=dBe(e);return r==="sent_to_am"?a&&a!=="Account Manager"?`Sent to Account Manager by ${a}`:"Sent to Account Manager":r==="sent_to_client"?a&&a!=="Client"?`Sent to Client by ${a}`:"Sent to Client":a?`Sent by ${a}`:"Sent"}const s=lBe(e);return s?`Rejected by ${s}`:"Rejected"},mBe=e=>{if(!e)return"Date unavailable";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Date unavailable";const r=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t);return`${r}  ${s}`},fBe=e=>{const t=String(e||"").trim();return!t||/status\s+changed\s+from/i.test(t)||/(?:from|to)\s+[a-z]+_[a-z0-9_]+/i.test(t)||/\b[a-z]+_[a-z0-9_]+\b/i.test(t)?"":t},hBe=(...e)=>{const t=rr(...e);if(!t)return"";const r=String(t).trim(),a=r.toUpperCase().match(/^[A-Z]+-C-(\d+)$/);return a?`ATS-C-${a[1].padStart(4,"0")}`:r},_g=(e=[])=>{const t=a=>{const i=String(a||"").trim().toUpperCase().match(/^ATS-C-(\d+)$/);if(!i)return null;const l=Number(i[1]);return Number.isFinite(l)&&l>0?l:null};let r=e.reduce((a,i)=>{const l=t(i==null?void 0:i.public_id);return l&&l>a?l:a},0)+1;const s=new Set;return e.map(a=>{let l=t(a==null?void 0:a.public_id);if(!l||s.has(l)){for(;s.has(r);)r+=1;l=r,r+=1}return s.add(l),{...a,public_id:`ATS-C-${String(l).padStart(4,"0")}`}})},Ru=(e={},t={})=>{const r=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},s=rr(e==null?void 0:e.candidate_id,e==null?void 0:e.id,e==null?void 0:e.application_id,r==null?void 0:r.candidate_id,r==null?void 0:r.id,e==null?void 0:e.public_id),a=Array.isArray(e==null?void 0:e.skills)?e.skills:Array.isArray(r==null?void 0:r.skills)?r.skills:[];return{...e,...t,id:s?String(s):"",candidate_id:rr(e==null?void 0:e.candidate_id,e==null?void 0:e.id,r==null?void 0:r.candidate_id,r==null?void 0:r.id,s),application_id:rr(e==null?void 0:e.application_id,e==null?void 0:e.applicationId,e==null?void 0:e.id),full_name:rr(e==null?void 0:e.full_name,e==null?void 0:e.candidate_name,e==null?void 0:e.name,r==null?void 0:r.full_name,r==null?void 0:r.candidate_name,r==null?void 0:r.name)||"Unknown",public_id:hBe(e==null?void 0:e.public_id,e==null?void 0:e.candidate_code,r==null?void 0:r.public_id,r==null?void 0:r.candidate_code),email:rr(e==null?void 0:e.email,e==null?void 0:e.candidate_email,r==null?void 0:r.email,r==null?void 0:r.candidate_email),phone:rr(e==null?void 0:e.phone,e==null?void 0:e.mobile,e==null?void 0:e.phone_number,r==null?void 0:r.phone,r==null?void 0:r.mobile,r==null?void 0:r.phone_number),current_location:rr(e==null?void 0:e.current_location,e==null?void 0:e.currentLocation,e==null?void 0:e.location,e==null?void 0:e.city,e==null?void 0:e.preferred_location,r==null?void 0:r.current_location,r==null?void 0:r.currentLocation,r==null?void 0:r.location,r==null?void 0:r.city,r==null?void 0:r.preferred_location),experience_years:rr(e==null?void 0:e.experience_years,e==null?void 0:e.experience,e==null?void 0:e.total_experience,r==null?void 0:r.experience_years,r==null?void 0:r.experience,r==null?void 0:r.total_experience),skills:a,status:ij(e,(t==null?void 0:t.status)||"new"),updated_at:(e==null?void 0:e.updated_at)||(e==null?void 0:e.sent_to_am_at)||(e==null?void 0:e.sent_to_client_at)||(e==null?void 0:e.created_at)||(t==null?void 0:t.updated_at)||null}};function pBe({candidate:e,onViewProfile:t,onViewTimeline:r,onScheduleInterview:s,currentUserId:a,isJobScoped:i,isHighlighted:l=!1,candidateCardKey:o=""}){var h,v,b;const c=ij(e,(e==null?void 0:e.status)||"new"),d=Ok[c]||Ok.new,u=IV(c,{isJobScoped:i}),m=DV(e,a),f=rr(e==null?void 0:e.email,e==null?void 0:e.candidate_email),y=rr(e==null?void 0:e.phone,e==null?void 0:e.mobile,e==null?void 0:e.phone_number),x=rr(e==null?void 0:e.current_location,e==null?void 0:e.location,e==null?void 0:e.city,e==null?void 0:e.preferred_location),p=rr(e==null?void 0:e.experience_years,e==null?void 0:e.experience,e==null?void 0:e.total_experience);return String(rr(e==null?void 0:e.interview_scheduling_note,(h=e==null?void 0:e.candidate)==null?void 0:h.interview_scheduling_note,(v=e==null?void 0:e.candidate_details)==null?void 0:v.interview_scheduling_note,"")).trim(),n.jsxs("div",{"data-candidate-key":o||void 0,className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow ${l?"ring-2 ring-violet-500 border-violet-300":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.full_name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.public_id||((b=e.id)==null?void 0:b.slice(0,8))})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.color}`,children:u})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(uu,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:f||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(V1,{className:"w-3 h-3"}),n.jsx("span",{children:y||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx($c,{className:"w-3 h-3"}),n.jsx("span",{children:x||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(ha,{className:"w-3 h-3"}),n.jsx("span",{children:eBe(p)})]})]}),e.skills&&e.skills.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.skills.slice(0,4).map((j,_)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:typeof j=="string"?j:j==null?void 0:j.name},_)),e.skills.length>4&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.skills.length-4]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>t(e.id),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:[n.jsx(cl,{className:"w-3 h-3"}),"View Details"]}),m&&n.jsxs("button",{onClick:()=>s(e),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-violet-600 text-white rounded-lg text-sm hover:bg-violet-700 transition-colors disabled:opacity-50",children:[n.jsx(si,{className:"w-3 h-3"}),"Schedule Interview"]}),n.jsxs("button",{onClick:()=>r(e),disabled:!e.id,className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(pn,{className:"w-3 h-3"}),"Timeline"]})]})]})}function rF(){var ut,Z;const[e]=Os(),t=e.get("jobId")||"",r=e.get("jobTitle")||"",s=(e.get("candidate_id")||e.get("candidateId")||"").trim(),a=(e.get("candidate_name")||e.get("candidateName")||"").trim(),i=!!(s||a),l=!!t,o=g.useMemo(()=>rBe(),[]),[c,d]=g.useState([]),[u,m]=g.useState(!0),[f,y]=g.useState(!1),[x,p]=g.useState(""),[h,v]=g.useState(""),[b,j]=g.useState(!1),[_,N]=g.useState(null),[w,k]=g.useState(!1),[S,E]=g.useState(!1),[T,A]=g.useState(!1),[C,P]=g.useState(""),[O,R]=g.useState([]),F=g.useRef({}),Q=(localStorage.getItem("role")||"").toUpperCase(),W=["SUPER_ADMIN","HIRING_MANAGER","RECRUITER"].includes(Q),[L,I]=g.useState(!1),[K,D]=g.useState(null),[Y,re]=g.useState(""),[B,G]=g.useState(3),[ce,ae]=g.useState(!1),[fe,ne]=g.useState(null),[he,M]=g.useState(""),[Se,me]=g.useState(""),[Pe,ue]=g.useState("ai_chat"),[ye,Ye]=g.useState(""),[lt,xe]=g.useState(""),[Ae,$e]=g.useState(""),[Me,Fe]=g.useState(""),[We,Ze]=g.useState(""),[pt,Ve]=g.useState(!1),[Je,Ke]=g.useState(!1),gt=l?QI:H9e;g.useEffect(()=>{It()},[t]),g.useEffect(()=>{Ke(!1)},[t,s,a]);const At=async(H,V={})=>{var ee;try{return await q.get(H,V)}catch(X){if(((ee=X==null?void 0:X.response)==null?void 0:ee.status)===404)return q.get(`/v1${H}`,V);throw X}},Lt=async(H,V={},ee={})=>{var X;try{return await q.post(H,V,ee)}catch(te){if(((X=te==null?void 0:te.response)==null?void 0:X.status)===404)return q.post(`/v1${H}`,V,ee);throw te}},Bt=async(H={})=>{var V;try{return await q.post("/v1/interviews/recruiter/schedule-bulk",H)}catch(ee){if(((V=ee==null?void 0:ee.response)==null?void 0:V.status)===404)return q.post("/interviews/recruiter/schedule-bulk",H);throw ee}},ar=async()=>{var H;try{const V=await q.get("/v1/interviews/recruiter/list"),ee=(V==null?void 0:V.data)??{};return Array.isArray(ee==null?void 0:ee.results)?ee.results:Array.isArray(ee==null?void 0:ee.data)?ee.data:Array.isArray(ee)?ee:[]}catch(V){if(((H=V==null?void 0:V.response)==null?void 0:H.status)===404){const ee=await q.get("/interviews/recruiter/list"),X=(ee==null?void 0:ee.data)??{};if(Array.isArray(X==null?void 0:X.results))return X.results;if(Array.isArray(X==null?void 0:X.data))return X.data;if(Array.isArray(X))return X}return[]}},er=async(H=[])=>{if(!Array.isArray(H)||H.length===0)return H;const V=await ar();if(!Array.isArray(V)||V.length===0)return H;const{byCandidateJob:ee,byCandidate:X}=aBe(V);if(ee.size===0&&X.size===0)return H;const te=new Set(["rejected_by_recruiter","am_rejected","client_rejected","hired","joined","rejected","offer_declined"]);return H.map(ke=>{const ve=to((ke==null?void 0:ke.status)||"");if(te.has(ve))return ke;const J=Lk(ke);if(J.length===0)return ke;const be=String(rr(ke==null?void 0:ke.job_id,ke==null?void 0:ke.requirement_id)||"").trim().toLowerCase();let we=null;return be&&(we=J.map(Ie=>ee.get(`${Ie}::${be}`)).find(Boolean)),we||(we=J.map(Ie=>X.get(Ie)).find(Boolean)),we?Ru({...ke,status:we.status,stage:we.status,interview_status:we.interviewStatus,scheduled_at:we.scheduledAt,interview_scheduled_at:we.scheduledAt,updated_at:we.scheduledAt||(ke==null?void 0:ke.updated_at)}):ke})},Be=(H={})=>{var te,ke;const V=[H==null?void 0:H.candidate_id,H==null?void 0:H.id,H==null?void 0:H.public_id,H==null?void 0:H.application_id,(te=H==null?void 0:H.candidate)==null?void 0:te.id,(ke=H==null?void 0:H.candidate)==null?void 0:ke.candidate_id],ee=new Set,X=[];return V.forEach(ve=>{const J=String(ve||"").trim();if(!J)return;const be=J.toLowerCase();ee.has(be)||(ee.add(be),X.push({raw:J,cacheKey:be}))}),X},xt=(H={})=>{const V=Q9e(H);if(!V)return[];const ee=Rk(V);return ee?[{raw:V,cacheKey:ee}]:[]},mt=async(H=[])=>{if(!Array.isArray(H)||H.length===0)return H;const V=te=>{const ke=!gf(rr(te==null?void 0:te.current_location,te==null?void 0:te.location,te==null?void 0:te.city,te==null?void 0:te.preferred_location)),ve=!gf(rr(te==null?void 0:te.experience_years,te==null?void 0:te.experience,te==null?void 0:te.total_experience));return ke||ve},ee=[],X=new Set;return H.filter(V).forEach(te=>{xt(te).forEach(ke=>{F.current[ke.cacheKey]||X.has(ke.cacheKey)||(X.add(ke.cacheKey),ee.push(ke))})}),ee.length>0&&(await Promise.allSettled(ee.map(ke=>q.get(`/v1/candidates/${ke.raw}`)))).forEach((ke,ve)=>{var we,Ie,He;const J=ee[ve];if(!J||ke.status!=="fulfilled")return;const be=((Ie=(we=ke.value)==null?void 0:we.data)==null?void 0:Ie.data)??((He=ke.value)==null?void 0:He.data)??null;be&&typeof be=="object"&&(F.current[J.cacheKey]=be,Be(be).forEach(nt=>{F.current[nt.cacheKey]=be}))}),H.map(te=>{const ve=Be(te).find(He=>!!F.current[He.cacheKey]);if(!ve)return te;const J=F.current[ve.cacheKey];if(!J||typeof J!="object")return te;const be=(J==null?void 0:J.candidate)||(J==null?void 0:J.candidate_details)||(J==null?void 0:J.profile)||{},we=eu(J,W)||{},Ie=Array.isArray(we==null?void 0:we.skills)?we.skills.map(He=>typeof He=="string"?He:(He==null?void 0:He.name)||"").filter(Boolean):[];return Ru({...te,email:rr(te==null?void 0:te.email,J==null?void 0:J.email,be==null?void 0:be.email,we==null?void 0:we.email),phone:rr(te==null?void 0:te.phone,J==null?void 0:J.phone,J==null?void 0:J.mobile,J==null?void 0:J.phone_number,be==null?void 0:be.phone,be==null?void 0:be.mobile,be==null?void 0:be.phone_number,we==null?void 0:we.phone),current_location:rr(te==null?void 0:te.current_location,te==null?void 0:te.location,te==null?void 0:te.city,te==null?void 0:te.preferred_location,J==null?void 0:J.current_location,J==null?void 0:J.location,J==null?void 0:J.city,J==null?void 0:J.preferred_location,be==null?void 0:be.current_location,be==null?void 0:be.location,be==null?void 0:be.city,be==null?void 0:be.preferred_location,we==null?void 0:we.location,we==null?void 0:we.city,we==null?void 0:we.preferredLocation),experience_years:rr(te==null?void 0:te.experience_years,te==null?void 0:te.experience,te==null?void 0:te.total_experience,J==null?void 0:J.experience_years,J==null?void 0:J.experience,J==null?void 0:J.total_experience,be==null?void 0:be.experience_years,be==null?void 0:be.experience,be==null?void 0:be.total_experience,we==null?void 0:we.totalExperience),skills:Array.isArray(te==null?void 0:te.skills)&&te.skills.length>0?te.skills:Array.isArray(J==null?void 0:J.skills)&&J.skills.length>0?J.skills:Array.isArray(be==null?void 0:be.skills)&&be.skills.length>0?be.skills:Ie})})},It=async()=>{var H,V,ee,X;m(!0);try{if(l){const He=(((H=(await q.get(`/v1/recruiter/jobs/${t}/submissions`)).data)==null?void 0:H.candidates)||[]).map(_e=>Ru({..._e,id:_e.candidate_id||_e.id||_e.application_id,candidate_id:_e.candidate_id||_e.id||_e.application_id,application_id:_e.application_id,full_name:_e.full_name||_e.candidate_name||_e.name,public_id:_e.public_id,status:to(_e.status||"sent_to_am"),sent_to_am_at:_e.sent_to_am_at,sent_to_client_at:_e.sent_to_client_at,job_id:_e.job_id||t,requirement_id:_e.requirement_id||_e.job_id||t,job_title:_e.job_title||r,requirement_title:_e.requirement_title||_e.job_title||r,is_final:["rejected_by_recruiter","am_rejected","client_rejected","hired","rejected","offer_declined"].includes(to(_e.status)),updated_at:_e.updated_at||_e.sent_to_am_at||_e.sent_to_client_at||_e.created_at||null})),nt=await mt(He),tt=await er(nt);d(_g(tt));return}const te=await At("/workflow/candidates",{params:{limit:500}}),ve=Array.from(new Map((((V=te.data)==null?void 0:V.candidates)||[]).map(we=>[String((we==null?void 0:we.candidate_id)||(we==null?void 0:we.id)||(we==null?void 0:we.application_id)||(we==null?void 0:we.public_id)||""),we])).values()).map(we=>Ru(we)).sort((we,Ie)=>new Date(Ie.updated_at||0)-new Date(we.updated_at||0)),J=await mt(ve),be=await er(J);d(_g(be))}catch(te){console.error("Failed to fetch candidates:",te);try{const ke=await q.get("/v1/candidates"),ve=((ee=ke.data)==null?void 0:ee.items)||((X=ke.data)==null?void 0:X.data)||ke.data||[],J=(Array.isArray(ve)?ve:[]).map(Ie=>Ru(Ie)),be=await mt(J),we=await er(be);d(_g(we))}catch(ke){console.error("Fallback also failed:",ke)}}finally{m(!1)}},Yt=()=>{ae(!1),ne(null),M(""),me(""),ue("ai_chat"),Ye(""),xe(""),$e(""),Fe(""),Ze(""),Ve(!1)},Ne=(H={})=>{var te,ke,ve,J,be,we;const V=rr(H==null?void 0:H.candidate_id,H==null?void 0:H.id,H==null?void 0:H.application_id,(te=H==null?void 0:H.candidate)==null?void 0:te.id,(ke=H==null?void 0:H.candidate)==null?void 0:ke.candidate_id),ee=rr(H==null?void 0:H.job_id,H==null?void 0:H.requirement_id,(ve=H==null?void 0:H.job)==null?void 0:ve.id,(J=H==null?void 0:H.job)==null?void 0:J.job_id,t),X=rr(H==null?void 0:H.job_title,H==null?void 0:H.requirement_title,(be=H==null?void 0:H.job)==null?void 0:be.title,(we=H==null?void 0:H.requirement)==null?void 0:we.title,r)||String(ee||"");if(!V){alert("Candidate details are missing. Please refresh and try again.");return}if(!ee){alert("Job details are missing for this candidate. Open this workflow from a job and try again.");return}ne({...H,candidate_id:String(V)}),M(String(ee)),me(X),ue("ai_chat"),Ye(""),xe(""),$e(""),Fe(""),Ze(""),ae(!0)},st=async()=>{var X,te;const H=String((fe==null?void 0:fe.candidate_id)||"").trim(),V=String(he||"").trim();if(Ze(""),!H||!V){Ze("Missing candidate or job context for scheduling.");return}if(!ye){Ze("Select schedule date and time.");return}if(!Pe){Ze("Select an interview type.");return}const ee=new Date(ye);if(Number.isNaN(ee.getTime())){Ze("Select a valid schedule date and time.");return}if(ee<new Date){Ze("Schedule time must be in the future.");return}if(Pe==="video"&&!lt.trim()){Ze("Online meeting link is required (Google Meet, Teams, Zoom, etc.).");return}if(Pe==="in_person"&&!Ae.trim()){Ze("Location is required for in-person interviews.");return}Ve(!0);try{const ke=ee.toISOString();await Bt({job_id:V,candidate_ids:[H],interview_type:Pe,scheduled_at:ke,meeting_link:Pe==="video"?lt.trim():null,location:Pe==="in_person"?Ae.trim():null,contact_person:Pe==="in_person"?Me.trim():null});let ve=!1;try{await Lt(`/workflow/candidates/${H}/schedule-interview`,{job_id:V,interview_date:ke,notes:`Interview scheduled via recruiter workflow (${Pe}).`}),ve=!0}catch(we){console.warn("Interview was created but workflow status sync failed:",we)}const J=H.toLowerCase(),be=we=>!we||typeof we!="object"||!Lk(we).includes(J)?we:Ru({...we,status:"interview_scheduled",stage:"interview_scheduled",scheduled_at:ke,interview_scheduled_at:ke,interview_scheduling_ready:!1,updated_at:ke});d(we=>_g((Array.isArray(we)?we:[]).map(be))),N(we=>{if(!we)return we;const Ie=be(we);return Ie&&typeof Ie=="object"?Ie:we}),Yt(),ve&&It()}catch(ke){Ze(((te=(X=ke==null?void 0:ke.response)==null?void 0:X.data)==null?void 0:te.detail)||"Failed to schedule interview. Please try again.")}finally{Ve(!1)}},qe=async(H,V,ee=null)=>{var X,te;y(!0);try{const ke=H&&typeof H=="object"?H:{id:H},ve=(ke==null?void 0:ke.candidate_id)||(ke==null?void 0:ke.id)||H,J=(ke==null?void 0:ke.job_id)||(ke==null?void 0:ke.requirement_id)||t||null;if(!ve)throw new Error("Candidate id missing for workflow action");let be="",we={};switch(V){case"call":be=`/workflow/candidates/${ve}/call`;break;case"add_feedback":D(ve),I(!0),y(!1);return;case"hold":be=`/workflow/candidates/${ve}/hold`;break;case"reject":be=`/workflow/candidates/${ve}/reject`,we={rejection_type:ee||"recruiter"};break;case"send_to_am":be=`/workflow/candidates/${ve}/send-to-am`,we=J?{job_id:J}:{};break;case"schedule_interview":Ne({...ke,candidate_id:String(ve),job_id:J?String(J):ke==null?void 0:ke.job_id});return;case"select":be=`/workflow/candidates/${ve}/select`;break;case"hire":be=`/workflow/candidates/${ve}/hire`;break;default:console.error("Unknown action:",V);return}await Lt(be,we),It()}catch(ke){console.error("Action failed:",ke),alert(((te=(X=ke.response)==null?void 0:X.data)==null?void 0:te.detail)||"Action failed")}finally{y(!1)}},ft=async()=>{var H,V;if(!(!K||!Y.trim())){y(!0);try{await Lt(`/workflow/candidates/${K}/add-feedback`,null,{params:{feedback:Y,rating:B}}),I(!1),re(""),G(3),D(null),It()}catch(ee){console.error("Feedback submission failed:",ee),alert(((V=(H=ee.response)==null?void 0:H.data)==null?void 0:V.detail)||"Failed to add feedback")}finally{y(!1)}}},kt=async H=>{var ee;if(!H)return;const V=c.find(X=>String((X==null?void 0:X.id)||"")===String(H)||String((X==null?void 0:X.candidate_id)||"")===String(H));V?(N(V),j(!0)):(N(null),j(!0));try{k(!0);const X=V&&((ee=xt(V)[0])==null?void 0:ee.raw)||(()=>{const ke=String(H||"").trim();return FV(ke)?ke:""})();if(!X)return;const te=await zr.getCandidateById(X);te&&(Array.from(new Set([H,X,te==null?void 0:te.id,te==null?void 0:te.candidate_id,te==null?void 0:te.public_id].map(ve=>String(ve||"").trim().toLowerCase()).filter(Boolean))).forEach(ve=>{F.current[ve]=te}),N(ve=>{const J={...ve||{},...te||{}};return{...J,status:ij(J,(J==null?void 0:J.status)||"new")}}))}catch(X){console.error("Failed to load candidate detail",X)}finally{k(!1)}},Oe=async H=>{var ee,X;if(H!=null&&H.candidate_id||H!=null&&H.id||H!=null&&H.application_id){E(!0),A(!0),R([]),P((H==null?void 0:H.full_name)||"Candidate");try{const te=Array.from(new Set([H==null?void 0:H.candidate_id,H==null?void 0:H.id,H==null?void 0:H.application_id].filter(Boolean).map(be=>String(be))));let ke=[];for(const be of te)try{const we=await At(`/workflow/candidates/${be}/timeline`),Ie=((ee=we==null?void 0:we.data)==null?void 0:ee.timeline)||((X=we==null?void 0:we.data)==null?void 0:X.data)||[];if(Array.isArray(Ie)&&Ie.length>0){ke=Ie;break}Array.isArray(Ie)&&ke.length===0&&(ke=Ie)}catch{}let ve=Array.isArray(ke)?ke:[];if(!ve.some(be=>xo(be==null?void 0:be.status).includes("interview"))&&te.length>0){const be=await ar(),we=new Set(te.map(He=>String(He||"").trim().toLowerCase()).filter(Boolean)),Ie=(Array.isArray(be)?be:[]).filter(He=>{var tt,_e;const nt=String(rr((tt=He==null?void 0:He.candidate)==null?void 0:tt.id,He==null?void 0:He.candidate_id,(_e=He==null?void 0:He.candidate)==null?void 0:_e.candidate_id)||"").trim().toLowerCase();return nt&&we.has(nt)}).map(He=>{var U,se;const tt=xo(He==null?void 0:He.status)==="completed"?"interview_completed":"interview_scheduled",_e=String((He==null?void 0:He.mode)||"interview").replace(/_/g," ").trim();return{id:`iv-${(He==null?void 0:He.id)||Math.random()}`,status:tt,note:tt==="interview_completed"?`Interview completed (${_e}).`:`Interview scheduled (${_e}).`,by:rr((U=He==null?void 0:He.recruiter)==null?void 0:U.full_name,(se=He==null?void 0:He.recruiter)==null?void 0:se.email),role:"Recruiter",at:rr(He==null?void 0:He.scheduled_at,He==null?void 0:He.created_at),created_at:rr(He==null?void 0:He.scheduled_at,He==null?void 0:He.created_at)}});if(Ie.length>0){const He=new Map;[...Ie,...ve].forEach(nt=>{const tt=[xo(nt==null?void 0:nt.status),String((nt==null?void 0:nt.at)||(nt==null?void 0:nt.created_at)||"").trim()].join("::");He.has(tt)||He.set(tt,nt)}),ve=Array.from(He.values())}}R(ve)}catch(te){console.error("Failed to load candidate timeline:",te),R([])}finally{A(!1)}}},je=g.useMemo(()=>{const H=c.map(ee=>to(ee.status)).filter(Boolean),V=new Set;return[...gt,...H].filter(ee=>!ee||V.has(ee)?!1:(V.add(ee),!0))},[gt,c]),Re=g.useMemo(()=>{const H=l?c.filter(te=>QI.includes(to(te.status))):c,V=i?H.filter(te=>eF(te,s,a)):H,ee=h&&!i?V.filter(te=>to(te.status)===h):V;if(!x.trim())return ee;const X=x.toLowerCase();return ee.filter(te=>{var ke,ve,J,be;return((ke=te.full_name)==null?void 0:ke.toLowerCase().includes(X))||((ve=te.email)==null?void 0:ve.toLowerCase().includes(X))||((J=te.phone)==null?void 0:J.includes(X))||((be=te.skills)==null?void 0:be.some(we=>(typeof we=="string"?we:(we==null?void 0:we.name)||"").toLowerCase().includes(X)))})},[c,x,l,h,i,s,a]),oe=g.useMemo(()=>{if(!i)return"";const H=Re.find(V=>eF(V,s,a));return sw(H)},[Re,i,s,a]);g.useEffect(()=>{if(!oe||Je)return;const H=Array.from(document.querySelectorAll("[data-candidate-key]")).find(V=>{var ee;return String(((ee=V==null?void 0:V.dataset)==null?void 0:ee.candidateKey)||"").trim().toLowerCase()===oe});H&&(H.scrollIntoView({behavior:"smooth",block:"center"}),Ke(!0))},[oe,Je]);const Ue=g.useMemo(()=>_?eu(_,W):null,[W,_]),Ge=g.useMemo(()=>je.map(H=>({value:H,label:IV(H,{isJobScoped:l})})),[l,je]),ie=g.useMemo(()=>{if(!Array.isArray(O))return[];const H=V=>{const ee=(V==null?void 0:V.at)||(V==null?void 0:V.created_at)||(V==null?void 0:V.updated_at)||null;if(!ee)return 0;const X=new Date(ee).getTime();return Number.isFinite(X)?X:0};return[...O].sort((V,ee)=>H(ee)-H(V))},[O]),ge=g.useMemo(()=>DV(_,o),[_,o]);return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Candidate Workflow"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l?"Job-specific workflow and submissions timeline":"Track and manage candidates through the recruitment pipeline"}),l&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg bg-indigo-50 text-indigo-800 px-3 py-1.5 text-sm",children:[n.jsx("span",{className:"font-medium",children:"Requirement:"}),n.jsx("span",{children:r||t})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, email, phone, skills...",value:x,onChange:H=>p(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.jsxs("select",{value:h,onChange:H=>v(H.target.value),className:"w-44 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:"",children:"All Status"}),Ge.map(H=>n.jsx("option",{value:H.value,children:H.label},H.value))]}),n.jsxs("button",{onClick:()=>{It()},className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx($l,{className:"w-4 h-4"}),"Refresh"]})]}),u?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx(qs,{className:"w-8 h-8 animate-spin text-blue-600"}),n.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading candidates..."})]}):Re.length===0?n.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsx(qr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No candidates found"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x?"Try adjusting your search terms":"No candidates found for the selected filters"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Re.map(H=>n.jsx(pBe,{candidate:H,onViewProfile:kt,onViewTimeline:Oe,onScheduleInterview:V=>qe(V,"schedule_interview"),currentUserId:o,isJobScoped:l,isHighlighted:oe===sw(H),candidateCardKey:sw(H)},H.id))}),status==="client_shortlisted"&&schedulingNote&&n.jsxs("div",{className:"mb-4 rounded-md border border-violet-200 bg-violet-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"AM Note"}),n.jsx("p",{className:"mt-1 text-sm text-violet-900",children:schedulingNote})]}),S&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-2xl max-h-[80vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl flex flex-col",children:[n.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Status Timeline"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:C})]}),n.jsx("button",{onClick:()=>{E(!1),R([]),P("")},className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500",children:n.jsx(ti,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"px-5 py-4 overflow-y-auto",children:T?n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Loading timeline..."]}):ie.length===0?n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline entries found."}):n.jsx("div",{className:"space-y-4",children:ie.map((H,V)=>{const ee=iBe(H==null?void 0:H.status),X=tF[ee]||tF.sent,te=X.icon,ke=uBe(H,ee),ve=rr(H==null?void 0:H.by,H==null?void 0:H.user,H==null?void 0:H.actor_name),J=dA(rr(H==null?void 0:H.role,H==null?void 0:H.actor_role)),be=fBe(H==null?void 0:H.note),we=mBe((H==null?void 0:H.at)||(H==null?void 0:H.created_at)||(H==null?void 0:H.updated_at)),Ie=V===0;return n.jsxs("div",{className:"relative pl-12",children:[V<ie.length-1&&n.jsx("span",{className:"absolute left-[17px] top-10 bottom-[-16px] w-px bg-gray-200 dark:bg-gray-700"}),n.jsx("span",{className:`absolute left-0 top-2 flex h-9 w-9 items-center justify-center rounded-full border ${X.markerClass}`,children:n.jsx(te,{className:"h-4 w-4"})}),n.jsxs("div",{className:`rounded-xl border bg-white dark:bg-gray-900 px-4 py-3 shadow-sm ${Ie?X.latestClass:"border-gray-200 dark:border-gray-700"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold ${X.badgeClass}`,children:ke}),Ie&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-semibold text-gray-600 dark:bg-gray-800 dark:text-gray-300",children:"Latest"})]}),n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:we})]}),(ve||J)&&n.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[ve||"System",J?`  ${J}`:""]}),be&&n.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:be})]})]},H.id||`${H.status||"status"}-${H.at||V}`)})})})]})}),ce&&fe&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Schedule Interview"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Candidate: ",(fe==null?void 0:fe.full_name)||"Candidate"]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Job: ",Se||he]})]}),n.jsx("button",{onClick:Yt,className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500","aria-label":"Close schedule interview modal",children:n.jsx(ti,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-5 py-4 space-y-4",children:[We&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:We}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Interview Type"}),n.jsxs("select",{value:Pe,onChange:H=>ue(H.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"ai_chat",children:"AI Chat Interview"}),n.jsx("option",{value:"video",children:"Online Meeting (Meet/Teams/Zoom)"}),n.jsx("option",{value:"in_person",children:"In-Person"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Date & Time"}),n.jsx("input",{type:"datetime-local",value:ye,onChange:H=>Ye(H.target.value),min:tBe(new Date),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),Pe==="video"&&n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Online Meeting Link"}),n.jsx("input",{type:"url",value:lt,onChange:H=>xe(H.target.value),placeholder:"https://meet.google.com/... or https://teams.microsoft.com/...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),Pe==="in_person"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),n.jsx("input",{value:Ae,onChange:H=>$e(H.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Contact Person"}),n.jsx("input",{value:Me,onChange:H=>Fe(H.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),n.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:Yt,className:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:st,disabled:pt||!ye||!Pe,className:"px-4 py-2 rounded-lg bg-violet-600 text-white hover:bg-violet-700 transition-colors disabled:opacity-60",children:pt?"Scheduling...":"Schedule Interview"})]})]})}),b&&_&&Ue&&n.jsx(aj,{candidate:_,profile:Ue,loading:w,contextNote:rr(_==null?void 0:_.interview_scheduling_note,(ut=_==null?void 0:_.candidate)==null?void 0:ut.interview_scheduling_note,Ue==null?void 0:Ue.interview_scheduling_note,(Z=Ue==null?void 0:Ue.candidate)==null?void 0:Z.interview_scheduling_note),hideQuickActions:!ge,customQuickActions:ge?[{label:"Schedule Interview",variant:"primary",disabled:f,onClick:H=>qe(H,"schedule_interview")}]:void 0,workflowStatusOptions:Ge,onClose:()=>{j(!1),N(null),k(!1)},onPreviewResume:H=>{H&&window.open(H,"_blank")}}),L&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[n.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Call Feedback"})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rating"}),n.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(H=>n.jsx("button",{onClick:()=>G(H),className:`w-10 h-10 rounded-lg font-medium transition-colors ${B>=H?"bg-yellow-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:H},H))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Feedback Notes"}),n.jsx("textarea",{value:Y,onChange:H=>re(H.target.value),placeholder:"Enter your call feedback...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>{I(!1),re(""),D(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ft,disabled:!Y.trim()||f,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:f?"Saving...":"Save Feedback"})]})]})})]})}const nF=[{key:"checkbox",label:"",width:"50px",fixed:!0},{key:"serial",label:"S#",width:"60px",fixed:!0},{key:"recruiterName",label:"Recruiter Name",width:"150px"},{key:"status",label:"Status",width:"120px"},{key:"comment",label:"Comment",width:"150px"},{key:"month",label:"Month",width:"80px"},{key:"date",label:"Date",width:"120px"},{key:"clients",label:"Clients",width:"120px"},{key:"reqJrId",label:"Req / JR ID",width:"120px"},{key:"spocHm",label:"SPOC / HM",width:"120px"},{key:"clientTaBu",label:"Client TA / BU",width:"130px"},{key:"amName",label:"AM Name",width:"120px"},{key:"skills",label:"Skills",width:"150px"},{key:"candidateName",label:"Candidate Name",width:"150px"},{key:"contactNumber",label:"Contact #",width:"120px"},{key:"emailId",label:"Email ID",width:"180px"},{key:"currentCompany",label:"Current Company",width:"150px"},{key:"designation",label:"Designation",width:"120px"},{key:"experienceInField",label:"Experience in Field",width:"140px"},{key:"totalExperience",label:"Total Experience",width:"130px"},{key:"relevantExperience",label:"Relevant Experience",width:"150px"},{key:"currentCtc",label:"Current CTC",width:"120px"},{key:"expectedCtc",label:"Expected CTC",width:"120px"},{key:"noticePeriod",label:"Notice Period (LWD)",width:"160px"},{key:"qualification",label:"Qualification",width:"120px"},{key:"currentLocation",label:"Current Location",width:"140px"},{key:"preferredLocation",label:"Preferred Location",width:"160px"},{key:"certifications",label:"Certifications",width:"150px"},{key:"vendors",label:"Vendors",width:"120px"},{key:"actions",label:"Actions",width:"100px"}],$V=g.forwardRef(({isAdmin:e},t)=>{const[r,s]=g.useState([]),[a,i]=g.useState(new Set),[l,o]=g.useState(1),[c,d]=g.useState(10),[u,m]=g.useState(!0);g.useImperativeHandle(t,()=>({addEntry:_=>{const N=[...r,{..._,id:Date.now(),serial:r.length+1,date:f(_.date),noticePeriod:_.noticePeriod?f(_.noticePeriod):""}];s(N),localStorage.setItem("recruiterTrackerData",JSON.stringify(N))}})),g.useEffect(()=>{const _=localStorage.getItem("recruiterTrackerData");if(_)s(JSON.parse(_));else{const N=[{id:1,serial:1,recruiterName:"John Doe",status:"In Progress",comment:"Good candidate",month:"JAN",date:"15 JAN 2024",clients:"ABC Corp",reqJrId:"JR001",spocHm:"Jane Smith",clientTaBu:"IT",amName:"Mike Johnson",skills:["React","Node.js"],candidateName:"Alice Brown",contactNumber:"9876543210",emailId:"alice@example.com",currentCompany:"XYZ Ltd",designation:"Developer",experienceInField:3,totalExperience:5,relevantExperience:3,currentCtc:6e5,expectedCtc:8e5,noticePeriod:"15 FEB 2024",qualification:"B.Tech",currentLocation:"Mumbai",preferredLocation:"Bangalore",certifications:["AWS"],vendors:"Vendor A"}];s(N),localStorage.setItem("recruiterTrackerData",JSON.stringify(N))}m(!1)},[]);const f=_=>{if(!_)return"";const N=new Date(_),w=N.getDate().toString().padStart(2,"0"),k=N.toLocaleString("default",{month:"short"}).toUpperCase(),S=N.getFullYear();return`${w} ${k} ${S}`},y=_=>{i(_?new Set(b.map(N=>N.id)):new Set)},x=(_,N)=>{const w=new Set(a);N?w.add(_):w.delete(_),i(w)},p=_=>{if(e||confirm("Are you sure you want to delete this entry?")){const N=r.filter(w=>w.id!==_);s(N),localStorage.setItem("recruiterTrackerData",JSON.stringify(N)),i(w=>{const k=new Set(w);return k.delete(_),k})}},h=()=>{if(!e&&a.size>0){alert("You can only delete your own entries.");return}if(confirm(`Delete ${a.size} selected entries?`)){const _=r.filter(N=>!a.has(N.id));s(_),localStorage.setItem("recruiterTrackerData",JSON.stringify(_)),i(new Set)}},v=(_=!1)=>{const N=_&&a.size>0?r.filter(A=>a.has(A.id)):r,w=Il.json_to_sheet(N.map(A=>({...A,skills:Array.isArray(A.skills)?A.skills.join(", "):A.skills,certifications:Array.isArray(A.certifications)?A.certifications.join(", "):A.certifications}))),k=Il.book_new();Il.book_append_sheet(k,w,"Recruiter Tracker");const S=new Date().toLocaleString("default",{month:"short"}).toUpperCase(),E=new Date().getFullYear(),T=`Recruiter_Tracker_${S}_${E}.xlsx`;kp(k,T)},b=r.slice((l-1)*c,l*c),j=Math.ceil(r.length/c);return u?n.jsx("div",{className:"p-8 text-center",children:"Loading tracker data..."}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"flex items-center gap-4",children:a.size>0&&n.jsxs("span",{className:"text-sm text-gray-600",children:[a.size," row",a.size>1?"s":""," selected"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[a.size>0&&n.jsxs("button",{onClick:h,className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-red-600 to-red-700 text-white rounded-md hover:from-red-700 hover:to-red-800 focus:ring-2 focus:ring-red-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(ff,{className:"w-4 h-4"}),"Delete Selected"]}),n.jsxs("button",{onClick:()=>v(!1),className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-md hover:from-emerald-700 hover:to-emerald-800 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(up,{className:"w-4 h-4"}),"Export All"]}),a.size>0&&n.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-3 py-2 text-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:[n.jsx(up,{className:"w-4 h-4"}),"Export Selected"]})]})]}),n.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsx("tr",{children:nF.map(_=>n.jsx("th",{className:`px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-gray-200 ${_.fixed?"sticky left-0 bg-gray-50 z-20":""}`,style:{width:_.width,minWidth:_.width},children:_.key==="checkbox"?n.jsx("input",{type:"checkbox",checked:a.size===b.length&&b.length>0,onChange:N=>y(N.target.checked),className:"rounded border-gray-300"}):_.label},_.key))})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((_,N)=>n.jsx("tr",{className:N%2===0?"bg-white":"bg-gray-50",children:nF.map(w=>n.jsx("td",{className:`px-3 py-2 text-sm text-gray-900 border-r border-gray-200 ${w.fixed?"sticky left-0 bg-inherit z-10":""}`,style:{width:w.width,minWidth:w.width},children:w.key==="checkbox"?n.jsx("input",{type:"checkbox",checked:a.has(_.id),onChange:k=>x(_.id,k.target.checked),className:"rounded border-gray-300"}):w.key==="serial"?_.serial:w.key==="skills"||w.key==="certifications"?Array.isArray(_[w.key])?_[w.key].join(", "):_[w.key]:w.key==="actions"?n.jsx("button",{onClick:()=>p(_.id),className:"inline-flex items-center justify-center p-1.5 text-red-600 hover:text-white hover:bg-gradient-to-r hover:from-red-600 hover:to-red-700 rounded-md transition-all duration-200 focus:ring-2 focus:ring-red-500 focus:ring-offset-1",title:"Delete row",children:n.jsx(ff,{className:"w-4 h-4"})}):_[w.key]||""},w.key))},_.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Rows per page:"}),n.jsxs("select",{value:c,onChange:_=>{d(Number(_.target.value)),o(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm text-gray-700",children:[Math.min((l-1)*c+1,r.length)," -"," ",Math.min(l*c,r.length)," of ",r.length]}),n.jsx("button",{onClick:()=>o(_=>Math.max(_-1,1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-1",children:"Previous"}),n.jsx("button",{onClick:()=>o(_=>Math.min(_+1,j)),disabled:l===j,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-1",children:"Next"})]})]})]})});$V.displayName="TrackerTable";const xBe=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],gBe=["New","In Progress","Submitted","Interview","Offered","Joined","Closed"];function yBe({isAdmin:e,onSubmit:t}){const[r,s]=g.useState({recruiterName:"",status:"",comment:"",month:new Date().toLocaleString("default",{month:"short"}).toUpperCase(),date:new Date().toISOString().split("T")[0],clients:"",reqJrId:"",spocHm:"",clientTaBu:"",amName:"",skills:[],candidateName:"",contactNumber:"",emailId:"",currentCompany:"",designation:"",experienceInField:"",totalExperience:"",relevantExperience:"",currentCtc:"",expectedCtc:"",noticePeriod:"",qualification:"",currentLocation:"",preferredLocation:"",certifications:[],vendors:""}),[a,i]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(!1),u=(h,v)=>{s(b=>({...b,[h]:v}))},m=()=>{a.trim()&&!r.skills.includes(a.trim())&&(s(h=>({...h,skills:[...h.skills,a.trim()]})),i(""))},f=h=>{s(v=>({...v,skills:v.skills.filter(b=>b!==h)}))},y=()=>{l.trim()&&!r.certifications.includes(l.trim())&&(s(h=>({...h,certifications:[...h.certifications,l.trim()]})),o(""))},x=h=>{s(v=>({...v,certifications:v.certifications.filter(b=>b!==h)}))},p=async h=>{h.preventDefault();const b=["recruiterName","status","month","date","clients","candidateName","contactNumber","emailId"].filter(N=>!r[N]);if(b.length>0){alert(`Please fill in required fields: ${b.join(", ")}`);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.emailId)){alert("Please enter a valid email address");return}if(!/^(\+91)?[6-9]\d{9}$/.test(r.contactNumber.replace(/\s+/g,""))){alert("Please enter a valid Indian phone number");return}d(!0);try{t&&await t(r),s({recruiterName:"",status:"",comment:"",month:new Date().toLocaleString("default",{month:"short"}).toUpperCase(),date:new Date().toISOString().split("T")[0],clients:"",reqJrId:"",spocHm:"",clientTaBu:"",amName:"",skills:[],candidateName:"",contactNumber:"",emailId:"",currentCompany:"",designation:"",experienceInField:"",totalExperience:"",relevantExperience:"",currentCtc:"",expectedCtc:"",noticePeriod:"",qualification:"",currentLocation:"",preferredLocation:"",certifications:[],vendors:""}),alert("Entry added successfully!")}catch{alert("Error adding entry. Please try again.")}finally{d(!1)}};return n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Add New Tracker Entry"}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Basic Tracking Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recruiter Name *"}),n.jsx("input",{type:"text",value:r.recruiterName,onChange:h=>u("recruiterName",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),n.jsxs("select",{value:r.status,onChange:h=>u("status",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Status"}),gBe.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),n.jsx("textarea",{value:r.comment,onChange:h=>u("comment",h.target.value),rows:1,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Requirement / Client Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month *"}),n.jsx("select",{value:r.month,onChange:h=>u("month",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:xBe.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),n.jsx("input",{type:"date",value:r.date,onChange:h=>u("date",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clients *"}),n.jsx("input",{type:"text",value:r.clients,onChange:h=>u("clients",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Req / JR ID"}),n.jsx("input",{type:"text",value:r.reqJrId,onChange:h=>u("reqJrId",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SPOC / HM"}),n.jsx("input",{type:"text",value:r.spocHm,onChange:h=>u("spocHm",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client TA / BU"}),n.jsx("input",{type:"text",value:r.clientTaBu,onChange:h=>u("clientTaBu",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AM Name"}),n.jsx("input",{type:"text",value:r.amName,onChange:h=>u("amName",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Skill + Candidate Info"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:a,onChange:h=>i(h.target.value),onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),m()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add skill"}),n.jsx("button",{type:"button",onClick:m,className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200 font-medium",children:"Add"})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:r.skills.map(h=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[h,n.jsx("button",{type:"button",onClick:()=>f(h),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-200 rounded-full w-4 h-4 flex items-center justify-center transition-all duration-150",children:""})]},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Candidate Name *"}),n.jsx("input",{type:"text",value:r.candidateName,onChange:h=>u("candidateName",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number *"}),n.jsx("input",{type:"tel",value:r.contactNumber,onChange:h=>u("contactNumber",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"9876543210",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email ID *"}),n.jsx("input",{type:"email",value:r.emailId,onChange:h=>u("emailId",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Experience Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Company"}),n.jsx("input",{type:"text",value:r.currentCompany,onChange:h=>u("currentCompany",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),n.jsx("input",{type:"text",value:r.designation,onChange:h=>u("designation",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience in Field"}),n.jsx("input",{type:"number",value:r.experienceInField,onChange:h=>u("experienceInField",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Experience"}),n.jsx("input",{type:"number",value:r.totalExperience,onChange:h=>u("totalExperience",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relevant Experience"}),n.jsx("input",{type:"number",value:r.relevantExperience,onChange:h=>u("relevantExperience",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.5"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Compensation Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current CTC"}),n.jsx("input",{type:"number",value:r.currentCtc,onChange:h=>u("currentCtc",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected CTC"}),n.jsx("input",{type:"number",value:r.expectedCtc,onChange:h=>u("expectedCtc",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Notice & Education"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notice Period (LWD)"}),n.jsx("input",{type:"date",value:r.noticePeriod,onChange:h=>u("noticePeriod",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification"}),n.jsx("input",{type:"text",value:r.qualification,onChange:h=>u("qualification",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Location"}),n.jsx("input",{type:"text",value:r.currentLocation,onChange:h=>u("currentLocation",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Location"}),n.jsx("input",{type:"text",value:r.preferredLocation,onChange:h=>u("preferredLocation",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800",children:"Certification + Vendor"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certifications"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:l,onChange:h=>o(h.target.value),onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),y()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add certification"}),n.jsx("button",{type:"button",onClick:y,className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200 font-medium",children:"Add"})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:r.certifications.map(h=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[h,n.jsx("button",{type:"button",onClick:()=>x(h),className:"text-green-600 hover:text-green-800 hover:bg-green-200 rounded-full w-4 h-4 flex items-center justify-center transition-all duration-150",children:""})]},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendors"}),n.jsx("input",{type:"text",value:r.vendors,onChange:h=>u("vendors",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed font-medium focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 shadow-sm transition-all duration-200",children:c?"Adding...":"Add To Tracker"})})]})]})}function vBe(){const t=Xn().pathname.includes("/admin/"),r=g.useRef();return n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Recruiter Tracker Management":"Recruiter Tracker"}),n.jsx("p",{className:"text-gray-600 mt-2",children:t?"Manage and monitor all recruiter tracking activities":"Spreadsheet-style tracker for daily recruitment operations"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx(yBe,{isAdmin:t,onSubmit:s=>{r.current&&r.current.addEntry&&r.current.addEntry(s)}})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n.jsx($V,{ref:r,isAdmin:t})})]})})}const sF=["#7c3aed","#06b6d4","#f97316","#10b981","#ef4444"],Lu=e=>e.toISOString().slice(0,10),bBe=e=>{const t=new Date;if(e==="today")return{from:Lu(t),to:Lu(t)};if(e==="week"){const s=(t.getDay()+6)%7,a=new Date(t);return a.setDate(t.getDate()-s),{from:Lu(a),to:Lu(t)}}if(e==="month"){const r=new Date(t.getFullYear(),t.getMonth(),1);return{from:Lu(r),to:Lu(t)}}return{from:"",to:""}};function jBe(){var O,R,F,Q;const[e,t]=g.useState("month"),[r,s]=g.useState(""),[a,i]=g.useState(""),[l,o]=g.useState(!1),[c,d]=g.useState(""),[u,m]=g.useState(null),[f,y]=g.useState(null),[x,p]=g.useState(null),[h,v]=g.useState(null),[b,j]=g.useState("candidates"),[_,N]=g.useState("csv"),w=g.useMemo(()=>e==="custom"?{from:r,to:a}:bBe(e),[e,r,a]),k=g.useMemo(()=>{const W={};return w.from&&(W.from=w.from),w.to&&(W.to=w.to),W},[w]);g.useEffect(()=>{(async()=>{o(!0),d("");try{const[L,I,K,D]=await Promise.all([q.get("/v1/reports/candidates",{params:k}),q.get("/v1/reports/jobs",{params:k}),q.get("/v1/reports/interviews",{params:k}),q.get("/v1/reports/recruiters",{params:k})]);m(L.data),y(I.data),p(K.data),v(D.data)}catch(L){console.error("Failed to load reports:",L),d("Failed to load reports. Please try again.")}finally{o(!1)}})()},[k]);const S=async()=>{try{const W=await q.get("/v1/reports/export",{params:{type:b,format:_,...k},responseType:"blob"}),L=new Blob([W.data]),I=window.URL.createObjectURL(L),K=document.createElement("a");K.href=I,K.download=`${b}_report.${_}`,K.click(),window.URL.revokeObjectURL(I)}catch(W){console.error("Export failed:",W),d("Export failed. Please try again.")}},E=((O=u==null?void 0:u.candidates_by_status)==null?void 0:O.map(W=>({name:W.status,value:W.count})))||[],T=((R=u==null?void 0:u.candidates_by_source)==null?void 0:R.map(W=>({name:W.source,count:W.count})))||[],A=((F=f==null?void 0:f.jobs_by_department)==null?void 0:F.map(W=>({name:W.department,count:W.count})))||[],C=(u==null?void 0:u.trend)||[],P=(x==null?void 0:x.trend)||[];return n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Reports"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Real-time recruiting analytics and performance"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:e,onChange:W=>t(W.target.value),children:[n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"This week"}),n.jsx("option",{value:"month",children:"This month"}),n.jsx("option",{value:"custom",children:"Custom range"})]}),e==="custom"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"date",value:r,onChange:W=>s(W.target.value),className:"px-3 py-2 border rounded text-sm bg-white"}),n.jsx("input",{type:"date",value:a,onChange:W=>i(W.target.value),className:"px-3 py-2 border rounded text-sm bg-white"})]}),n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:b,onChange:W=>j(W.target.value),children:[n.jsx("option",{value:"candidates",children:"Candidates"}),n.jsx("option",{value:"jobs",children:"Jobs"}),n.jsx("option",{value:"interviews",children:"Interviews"}),n.jsx("option",{value:"recruiters",children:"Recruiters"})]}),n.jsxs("select",{className:"px-3 py-2 border rounded text-sm bg-white",value:_,onChange:W=>N(W.target.value),children:[n.jsx("option",{value:"csv",children:"CSV"}),n.jsx("option",{value:"xlsx",children:"Excel"}),n.jsx("option",{value:"pdf",children:"PDF"})]}),n.jsx("button",{onClick:S,className:"px-4 py-2 bg-purple-600 text-white rounded text-sm",children:"Export"})]})]}),c&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:c}),l?n.jsx("div",{className:"bg-white p-6 rounded shadow text-center text-gray-500",children:"Loading reports..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Candidates"}),n.jsx("div",{className:"text-2xl font-semibold",children:(u==null?void 0:u.total_candidates)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"New Candidates"}),n.jsx("div",{className:"text-2xl font-semibold",children:(u==null?void 0:u.new_candidates)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Jobs"}),n.jsx("div",{className:"text-2xl font-semibold",children:(f==null?void 0:f.total_jobs)??0})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Total Interviews"}),n.jsx("div",{className:"text-2xl font-semibold",children:(x==null?void 0:x.total_interviews)??0})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Status"}),n.jsx("div",{className:"h-64",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Kv,{children:[n.jsx(Pi,{data:E,dataKey:"value",nameKey:"name",outerRadius:90,children:E.map((W,L)=>n.jsx(wo,{fill:sF[L%sF.length]},`cell-${W.name}-${L}`))}),n.jsx(Dn,{}),n.jsx(_d,{})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Sources"}),n.jsx("div",{className:"h-64",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Jv,{data:T,children:[n.jsx(lo,{strokeDasharray:"3 3"}),n.jsx(Ka,{dataKey:"name"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(Dl,{dataKey:"count",fill:"#7c3aed"})]})})})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Jobs by Department"}),n.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-600 mb-3",children:[n.jsxs("span",{className:"bg-gray-50 px-2 py-1 rounded",children:["Active: ",(f==null?void 0:f.active_jobs)??0]}),n.jsxs("span",{className:"bg-gray-50 px-2 py-1 rounded",children:["Closed: ",(f==null?void 0:f.closed_jobs)??0]})]}),n.jsx("div",{className:"h-64",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Jv,{data:A,children:[n.jsx(lo,{strokeDasharray:"3 3"}),n.jsx(Ka,{dataKey:"name"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(Dl,{dataKey:"count",fill:"#10b981"})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Interview Outcomes"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Scheduled: ",(x==null?void 0:x.scheduled_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Scheduled today: ",(x==null?void 0:x.scheduled_today)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Completed: ",(x==null?void 0:x.completed_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["Cancelled: ",(x==null?void 0:x.cancelled_count)??0]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:["No-show rate:"," ",(((x==null?void 0:x.no_show_rate)??0)*100).toFixed(1),"%"]})]})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Candidate Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(gk,{data:C,children:[n.jsx(lo,{strokeDasharray:"3 3"}),n.jsx(Ka,{dataKey:"date"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(qd,{type:"monotone",dataKey:"count",stroke:"#7c3aed"})]})})})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Interview Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(gk,{data:P,children:[n.jsx(lo,{strokeDasharray:"3 3"}),n.jsx(Ka,{dataKey:"date"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(qd,{type:"monotone",dataKey:"count",stroke:"#06b6d4"})]})})})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Recruiter Performance"}),(Q=h==null?void 0:h.recruiters)!=null&&Q.length?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border p-2 text-left",children:"Recruiter"}),n.jsx("th",{className:"border p-2 text-left",children:"Candidates Sourced"}),n.jsx("th",{className:"border p-2 text-left",children:"Interviews Scheduled"}),n.jsx("th",{className:"border p-2 text-left",children:"Hires Made"})]})}),n.jsx("tbody",{children:h.recruiters.map(W=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:W.recruiter_name}),n.jsx("td",{className:"border p-2",children:W.candidates_sourced}),n.jsx("td",{className:"border p-2",children:W.interviews_scheduled}),n.jsx("td",{className:"border p-2",children:W.hires_made})]},W.recruiter_id))})]})}):n.jsx("div",{className:"text-sm text-gray-500",children:"No recruiter data found."})]})]})]})})}function MV({candidate:e,onClose:t,setExternalForm:r,onSubmit:s}){if(!e)return n.jsx("div",{className:"p-6 bg-white rounded shadow",children:"No candidate selected"});const[a,i]=g.useState({job_title:e.job_title||"",department:"",employment_type:"Full-time",start_date:"",compensation:"",currency:"INR",work_location:"",probation_period:"3 months",reporting_manager:"",acceptance_deadline:""});g.useEffect(()=>{r==null||r(a)},[]);function l(c){const d={...a,[c.target.name]:c.target.value};i(d),r==null||r(d)}async function o(){if(!a.job_title||!a.start_date||!a.compensation){alert("Please fill required fields");return}await s({candidate_id:e.id||e._id,candidate_name:e.full_name,candidate_email:e.email,...a})}return n.jsxs("div",{className:"p-6 bg-white rounded shadow space-y-4 w-full max-w-lg",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Send Offer Letter"}),n.jsx("input",{value:e.full_name,disabled:!0,className:"w-full p-2 border rounded bg-gray-50"}),n.jsx("input",{value:e.email,disabled:!0,className:"w-full p-2 border rounded bg-gray-50"}),n.jsx("input",{name:"job_title",value:a.job_title,placeholder:"Job Title *",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"department",value:a.department,placeholder:"Department",onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("select",{name:"employment_type",value:a.employment_type,onChange:l,className:"w-full p-2 border rounded",children:[n.jsx("option",{children:"Full-time"}),n.jsx("option",{children:"Part-time"}),n.jsx("option",{children:"Contract"})]}),n.jsx("input",{type:"date",name:"start_date",value:a.start_date,onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"compensation",value:a.compensation,placeholder:"Compensation Amount *",onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("select",{name:"currency",value:a.currency,onChange:l,className:"w-full p-2 border rounded",children:[n.jsx("option",{children:"INR"}),n.jsx("option",{children:"USD"})]}),n.jsx("input",{name:"work_location",value:a.work_location,placeholder:"Work Location",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"probation_period",value:a.probation_period,placeholder:"Probation Period",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{name:"reporting_manager",value:a.reporting_manager,placeholder:"Reporting Manager",onChange:l,className:"w-full p-2 border rounded"}),n.jsx("input",{type:"date",name:"acceptance_deadline",value:a.acceptance_deadline,onChange:l,className:"w-full p-2 border rounded"}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),n.jsx("button",{onClick:o,className:"px-4 py-2 bg-green-600 text-white rounded",children:"Send Offer"})]})]})}function _Be(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(""),l=Et();g.useEffect(()=>{o()},[]);async function o(){var c;try{s(!0);const d=await q.get("/v1/consultants"),u=((c=d.data)==null?void 0:c.data)??d.data??[];t(Array.isArray(u)?u:[])}catch(d){console.error(d),t([])}finally{s(!1)}}return n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultants"}),n.jsx("input",{value:a,onChange:c=>i(c.target.value),placeholder:"Search name / email",className:"border rounded px-3 py-1"})]}),n.jsx("div",{className:"bg-white border rounded shadow-sm overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:"Name"}),n.jsx("th",{className:"px-4 py-3",children:"Type"}),n.jsx("th",{className:"px-4 py-3",children:"Status"}),n.jsx("th",{className:"px-4 py-3",children:"Payroll Ready"}),n.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-6 text-center",children:"Loading..."})}):e.filter(c=>{if(!a)return!0;const d=a.toLowerCase();return(c.full_name||"").toLowerCase().includes(d)||(c.email||"").toLowerCase().includes(d)}).map(c=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-4 py-3",children:c.full_name}),n.jsx("td",{className:"px-4 py-3 capitalize",children:c.type}),n.jsx("td",{className:"px-4 py-3",children:c.status?c.status.charAt(0).toUpperCase()+c.status.slice(1).toLowerCase():""}),n.jsx("td",{className:"px-4 py-3",children:c.payrollReady?"Yes":"No"}),n.jsxs("td",{className:"px-4 py-3 flex gap-2",children:[n.jsx("button",{onClick:()=>l(`/consultants/${c.id}`),className:"px-2 py-1 bg-blue-600 text-white rounded",children:"View"}),c.type==="payroll"&&n.jsx("button",{onClick:()=>l(`/consultants/${c.id}/deploy`),className:"px-2 py-1 bg-green-600 text-white rounded",children:"Deploy"})]})]},c.id))})]})})]})}const BV=e=>q.get(`/v1/consultants/${e}`),wBe=(e,t)=>q.put(`/v1/consultants/${e}/sourcing-config`,t),NBe=(e,t)=>q.put(`/v1/consultants/${e}/payroll-setup`,t),kBe=e=>q.get(`/v1/consultants/${e}/deployment-eligibility`),SBe=e=>q.post(`/v1/consultants/${e}/validate-eligibility`),CBe=e=>q.get(`/v1/consultants/${e}/summary`),ABe=e=>q.post("/v1/consultant-deployments",e),UV=e=>q.get("/v1/consultant-deployments",{params:e}),EBe=e=>q.get(`/v1/consultant-deployments/${e}`),TBe=e=>q.put(`/v1/consultant-deployments/${e}/end`);function zV({consultant:e,showActions:t=!0}){const r=Et();if(!e)return null;const s=e.status==="deployed",a=e.type==="payroll";return n.jsxs("div",{className:"bg-white border rounded-lg p-6 flex justify-between items-center",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h2",{className:"text-xl font-semibold",children:e.name||e.full_name||"Unnamed Consultant"}),n.jsx("p",{className:"text-sm text-gray-500",children:e.email||"No email"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(aw,{label:e.type,color:a?"indigo":"purple"}),n.jsx(aw,{label:e.status||"available",color:s?"red":"green"}),a&&n.jsx(aw,{label:e.payrollReady?"Payroll Ready":"Payroll Pending",color:e.payrollReady?"green":"yellow"})]})]}),t&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>r(`/consultants/${e.id}`),className:"px-3 py-1 border rounded text-sm",children:"View"}),a&&e.payrollReady&&!s&&n.jsx("button",{onClick:()=>r(`/consultants/${e.id}/deploy`),className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Deploy"})]})]})}function aw({label:e,color:t}){const r={green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",indigo:"bg-indigo-100 text-indigo-700",purple:"bg-purple-100 text-purple-700",yellow:"bg-yellow-100 text-yellow-700"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${r[t]||"bg-gray-100 text-gray-600"}`,children:e})}function PBe({consultant:e,onUpdated:t}){const[r,s]=g.useState(""),[a,i]=g.useState(""),[l,o]=g.useState(!1),[c,d]=g.useState("");g.useEffect(()=>{e!=null&&e.billing_rate&&s(e.billing_rate),e!=null&&e.payout_rate&&i(e.payout_rate)},[e]);function u(){if(!r||!a)return"Billing rate and payout rate are required";const f=Number(r),y=Number(a);return f<=0||y<=0?"Rates must be positive values":y>f?"Payout rate cannot exceed billing rate":""}async function m(){var y,x;const f=u();if(f){d(f);return}o(!0),d("");try{await NBe(e.id,{billing_rate:Number(r),payout_rate:Number(a)}),t==null||t()}catch(p){console.error(p),d(((x=(y=p==null?void 0:p.response)==null?void 0:y.data)==null?void 0:x.message)||"Failed to save payroll configuration")}finally{o(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Payroll Configuration"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Configure billing and payout rates for this consultant."})]}),n.jsx("div",{className:"flex gap-3 text-sm",children:n.jsx(OBe,{label:"Payroll Ready",value:e.payrollReady?"Yes":"No",color:e.payrollReady?"green":"red"})}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Billing Rate (per month)"}),n.jsx("input",{type:"number",value:r,onChange:f=>s(f.target.value),className:"w-full border rounded px-3 py-2",placeholder:"e.g. 100000"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Payout Rate (per month)"}),n.jsx("input",{type:"number",value:a,onChange:f=>i(f.target.value),className:"w-full border rounded px-3 py-2",placeholder:"e.g. 70000"})]})]}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:m,disabled:l,className:`px-4 py-2 rounded text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?"Saving...":"Save Payroll Config"})})]})}function OBe({label:e,value:t,color:r}){const s={green:"border-green-200 text-green-700",red:"border-red-200 text-red-700"};return n.jsxs("span",{className:`px-3 py-1 border rounded-full text-xs ${s[r]}`,children:[e,": ",n.jsx("b",{children:t})]})}function RBe({consultant:e,onUpdated:t}){const[r,s]=g.useState("percentage"),[a,i]=g.useState(""),[l,o]=g.useState(!1),[c,d]=g.useState("");g.useEffect(()=>{e!=null&&e.sourcing_fee_type&&s(e.sourcing_fee_type),e!=null&&e.sourcing_fee_amount&&i(e.sourcing_fee_amount)},[e]);function u(){if(!a)return"Fee amount is required";const f=Number(a);return f<=0?"Fee amount must be greater than zero":r==="percentage"&&f>100?"Percentage fee cannot exceed 100%":""}async function m(){var y,x;const f=u();if(f){d(f);return}o(!0),d("");try{await wBe(e.id,{fee_type:r,fee_amount:Number(a)}),t==null||t()}catch(p){console.error(p),d(((x=(y=p==null?void 0:p.response)==null?void 0:y.data)==null?void 0:x.message)||"Failed to save sourcing configuration")}finally{o(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Sourcing Configuration"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Configure referral or sourcing fee for this consultant."})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"feeType",value:"percentage",checked:r==="percentage",onChange:()=>s("percentage")}),n.jsx("span",{className:"text-sm",children:"Percentage (%)"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"feeType",value:"flat",checked:r==="flat",onChange:()=>s("flat")}),n.jsx("span",{className:"text-sm",children:"Flat Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Fee Amount ",r==="percentage"?"(%)":""]}),n.jsx("input",{type:"number",value:a,onChange:f=>i(f.target.value),className:"w-full border rounded px-3 py-2",placeholder:r==="percentage"?"e.g. 10":"e.g. 50000"})]}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:m,disabled:l,className:`px-4 py-2 text-white rounded ${l?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?"Saving...":"Save Sourcing Config"})})]})}function WV({consultantId:e,strict:t=!1,onEligible:r}){const[s,a]=g.useState(!0),[i,l]=g.useState(!1),[o,c]=g.useState([]),[d,u]=g.useState("");g.useEffect(()=>{e&&m()},[e]);async function m(){var f,y,x,p;a(!0),u("");try{const v=(t?await SBe(e):await kBe(e)).data||{};l(!!v.eligible),c(v.reasons||[]),v.eligible&&(r==null||r())}catch(h){console.error(h);const v=((y=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:y.message)||"Consultant is not eligible for deployment";l(!1),u(v),(p=(x=h==null?void 0:h.response)==null?void 0:x.data)!=null&&p.reasons&&c(h.response.data.reasons)}finally{a(!1)}}return n.jsxs("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Deployment Eligibility"}),n.jsx("p",{className:"text-sm text-gray-500",children:"System validation before consultant deployment."})]}),s?n.jsx("div",{className:"text-sm text-gray-500",children:"Checking eligibility..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(LBe,{value:i?"Eligible":"Not Eligible",color:i?"green":"red"}),!i&&n.jsx("button",{onClick:m,className:"text-sm text-indigo-600 underline",children:"Recheck"})]}),!i&&n.jsxs("div",{className:"border border-red-300 bg-red-50 rounded p-4 text-sm",children:[n.jsx("p",{className:"font-medium mb-2",children:"Deployment blocked for the following reasons:"}),n.jsx("ul",{className:"list-disc ml-5 space-y-1",children:o.length>0?o.map((f,y)=>n.jsx("li",{children:f},y)):n.jsx("li",{children:d})})]}),i&&n.jsx("div",{className:"border border-green-300 bg-green-50 rounded p-4 text-sm text-green-800",children:"Consultant is fully eligible for deployment."})]})]})}function LBe({value:e,color:t}){const r={green:"border-green-300 text-green-700",red:"border-red-300 text-red-700"};return n.jsx("span",{className:`px-3 py-1 border rounded-full text-xs font-medium ${r[t]}`,children:e})}function IBe({deployments:e=[],loading:t=!1,onRowClick:r,showConsultant:s=!1}){const a=g.useMemo(()=>[...e].sort((i,l)=>new Date(l.start_date)-new Date(i.start_date)),[e]);return n.jsx("div",{className:"bg-white border rounded-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[s&&n.jsx("th",{className:"border px-4 py-2 text-left",children:"Consultant"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Client"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Project"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Start Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"End Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:t?n.jsx("tr",{children:n.jsx("td",{colSpan:s?6:5,className:"p-6 text-center",children:"Loading deployments..."})}):a.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:s?6:5,className:"p-6 text-center",children:"No deployments found"})}):a.map(i=>n.jsxs("tr",{onClick:()=>r==null?void 0:r(i),className:"hover:bg-gray-50 cursor-pointer",children:[s&&n.jsx("td",{className:"border px-4 py-2",children:i.consultant_name||i.consultant_id}),n.jsx("td",{className:"border px-4 py-2",children:i.client}),n.jsx("td",{className:"border px-4 py-2",children:i.project||""}),n.jsx("td",{className:"border px-4 py-2",children:i.start_date}),n.jsx("td",{className:"border px-4 py-2",children:i.end_date||""}),n.jsx("td",{className:"border px-4 py-2",children:n.jsx(FBe,{status:i.status})})]},i.id))})]})})}function FBe({status:e}){const t={active:"bg-green-100 text-green-700",ended:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${t[e]||"bg-gray-100 text-gray-600"}`,children:e})}function DBe(){var y;const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState(null),[l,o]=g.useState([]),[c,d]=g.useState("overview"),[u,m]=g.useState(!0);g.useEffect(()=>{f()},[e]);async function f(){var x;try{m(!0);const[p,h,v]=await Promise.all([BV(e),CBe(e),UV({consultant_id:e})]);s(p.data),i(h.data);const b=((x=v.data)==null?void 0:x.data)??v.data??[];o(b.sort((j,_)=>new Date(_.start_date)-new Date(j.start_date)))}catch(p){console.error("Failed to load consultant",p)}finally{m(!1)}}return u?n.jsx("div",{className:"p-6",children:"Loading consultant"}):r?n.jsxs("div",{className:"max-w-7xl space-y-6",children:[n.jsx(zV,{consultant:r}),n.jsx("div",{className:"flex gap-6 border-b",children:["overview","configuration","deployments"].map(x=>n.jsx("button",{onClick:()=>d(x),className:`px-4 py-2 capitalize border-b-2 ${c===x?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500"}`,children:x},x))}),c==="overview"&&n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsx(iw,{label:"Total Deployments",value:a==null?void 0:a.totalDeployments}),n.jsx(iw,{label:"Active Deployment",value:a!=null&&a.activeDeployment?"Yes":"No"}),n.jsx(iw,{label:"Current Client",value:((y=a==null?void 0:a.activeDeployment)==null?void 0:y.client)||""})]}),c==="configuration"&&n.jsxs("div",{className:"space-y-6",children:[r.type==="payroll"&&n.jsxs(n.Fragment,{children:[n.jsx(PBe,{consultant:r,onUpdated:f}),n.jsx(WV,{consultantId:r.id})]}),r.type==="sourcing"&&n.jsx(RBe,{consultant:r,onUpdated:f})]}),c==="deployments"&&n.jsx(IBe,{deployments:l,onRowClick:x=>t(`/consultant-deployments/${x.id}`)})]}):n.jsx("div",{className:"p-6 text-red-600",children:"Consultant not found"})}function iw({label:e,value:t}){return n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:e}),n.jsx("p",{className:"text-xl font-bold mt-1",children:t??""})]})}function $Be({onSubmit:e,submitting:t=!1,disabled:r=!1}){const[s,a]=g.useState({client_name:"",client_id:"",project:"",start_date:"",end_date:"",notes:""}),[i,l]=g.useState("");function o(d,u){a(m=>({...m,[d]:u}))}function c(d){if(d.preventDefault(),!s.client_name||!s.start_date){l("Client name and start date are required.");return}l(""),e==null||e({client:s.client_name,client_id:s.client_id||void 0,project:s.project||void 0,start_date:s.start_date,end_date:s.end_date||null,notes:s.notes||void 0})}return n.jsxs("form",{onSubmit:c,className:`bg-white border rounded-lg p-6 space-y-4 ${r?"opacity-50 pointer-events-none":""}`,children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Deployment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Name *"}),n.jsx("input",{value:s.client_name,onChange:d=>o("client_name",d.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Client / Company name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project / Assignment"}),n.jsx("input",{value:s.project,onChange:d=>o("project",d.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Project name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date *"}),n.jsx("input",{type:"date",value:s.start_date,onChange:d=>o("start_date",d.target.value),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date (optional)"}),n.jsx("input",{type:"date",value:s.end_date,onChange:d=>o("end_date",d.target.value),className:"w-full border rounded px-3 py-2"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes (optional)"}),n.jsx("textarea",{value:s.notes,onChange:d=>o("notes",d.target.value),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Additional deployment notes"})]}),i&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:i}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx("button",{type:"submit",disabled:t,className:`px-4 py-2 rounded text-white ${t?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:t?"Deploying...":"Deploy Consultant"})})]})}function MBe(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState(!1),[l,o]=g.useState(!1),[c,d]=g.useState("");g.useEffect(()=>{u()},[e]);async function u(){try{const f=await BV(e);s(f.data)}catch(f){console.error("Failed to load consultant",f)}}async function m(f){var y,x,p;if(a){o(!0),d("");try{const h=await ABe({consultant_id:e,client_id:f.client_id||void 0,client:f.client_name,project:f.project,start_date:f.start_date,end_date:f.end_date||null,notes:f.notes}),v=((y=h.data)==null?void 0:y.data)||h.data;if(!(v!=null&&v.id))throw new Error("Invalid deployment response");alert("Consultant deployed successfully"),t(`/consultant-deployments/${v.id}`)}catch(h){console.error(h),d(((p=(x=h==null?void 0:h.response)==null?void 0:x.data)==null?void 0:p.message)||(h==null?void 0:h.message)||"Failed to deploy consultant")}finally{o(!1)}}}return n.jsxs("div",{className:"max-w-4xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Deploy Consultant"}),n.jsx("button",{onClick:()=>t(-1),className:"text-sm px-3 py-1 border rounded",children:"Back"})]}),r&&n.jsx(zV,{consultant:r,showActions:!1}),n.jsx(WV,{consultantId:e,strict:!0,onEligible:()=>i(!0)}),n.jsx($Be,{disabled:!a,submitting:l,onSubmit:m}),c&&n.jsx("div",{className:"border border-red-300 bg-red-50 rounded p-3 text-sm text-red-700",children:c})]})}function BBe(){const e=Et(),[t]=Os(),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),f=t.get("consultant_id");g.useEffect(()=>{y()},[l,c,u,f]);async function y(){var x;i(!0);try{const h=await UV({consultant_id:f||void 0,status:l||void 0,start_date_from:c||void 0,start_date_to:u||void 0}),v=((x=h.data)==null?void 0:x.data)??h.data??[];v.sort((b,j)=>new Date(j.start_date)-new Date(b.start_date)),s(v)}catch(p){console.error(p),s([])}finally{i(!1)}}return n.jsxs("div",{className:"max-w-7xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Deployments"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Track active and past consultant assignments"})]}),n.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 border rounded text-sm",children:"Back"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-4 flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Status"}),n.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"ended",children:"Ended"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From Date"}),n.jsx("input",{type:"date",value:c,onChange:x=>d(x.target.value),className:"border rounded px-2 py-1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To Date"}),n.jsx("input",{type:"date",value:u,onChange:x=>m(x.target.value),className:"border rounded px-2 py-1"})]}),n.jsx("button",{onClick:y,className:"px-3 py-1 bg-indigo-600 text-white rounded text-sm",children:"Apply Filters"})]}),n.jsx("div",{className:"bg-white border rounded-lg overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border px-4 py-2 text-left",children:"Consultant"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Client"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Project"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Start Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"End Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:a?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-6 text-center",children:"Loading deployments..."})}):r.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-6 text-center",children:"No deployments found"})}):r.map(x=>n.jsxs("tr",{onClick:()=>e(`/consultant-deployments/${x.id}`),className:"hover:bg-gray-50 cursor-pointer",children:[n.jsx("td",{className:"border px-4 py-2",children:x.consultant_name||x.consultant_id}),n.jsx("td",{className:"border px-4 py-2",children:x.client}),n.jsx("td",{className:"border px-4 py-2",children:x.project||""}),n.jsx("td",{className:"border px-4 py-2",children:x.start_date}),n.jsx("td",{className:"border px-4 py-2",children:x.end_date||""}),n.jsx("td",{className:"border px-4 py-2 capitalize",children:n.jsx(UBe,{status:x.status})})]},x.id))})]})})]})}function UBe({status:e}){const t={active:"bg-green-100 text-green-700",ended:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[e]||"bg-gray-100 text-gray-600"}`,children:e})}function zBe(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState(!0),[l,o]=g.useState(!1),[c,d]=g.useState("");g.useEffect(()=>{u()},[e]);async function u(){var y;try{i(!0);const x=await EBe(e),p=((y=x.data)==null?void 0:y.data)||x.data;s(p)}catch(x){console.error(x),d("Failed to load deployment")}finally{i(!1)}}async function m(){var x,p;if(!(!r||!window.confirm("Are you sure you want to end this deployment?"))){o(!0);try{await TBe(r.id),alert("Deployment ended successfully"),await u()}catch(h){console.error(h),alert(((p=(x=h==null?void 0:h.response)==null?void 0:x.data)==null?void 0:p.message)||(h==null?void 0:h.message)||"Failed to end deployment")}finally{o(!1)}}}if(a)return n.jsx("div",{children:"Loading deployment..."});if(c)return n.jsx("div",{className:"text-red-600",children:c});if(!r)return n.jsx("div",{children:"Deployment not found"});const f=r.status==="active";return n.jsxs("div",{className:"max-w-5xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Deployment Details"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Deployment ID: ",r.id]})]}),n.jsx("button",{onClick:()=>t(-1),className:"px-3 py-1 border rounded text-sm",children:"Back"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx(WBe,{value:r.status,color:f?"green":"gray"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Started on"," ",n.jsx("b",{children:r.start_date})]}),r.end_date&&n.jsxs("span",{className:"text-sm text-gray-600",children:["Ended on ",n.jsx("b",{children:r.end_date})]})]}),f&&n.jsx("button",{onClick:m,disabled:l,className:`px-4 py-2 rounded text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:l?"Ending...":"End Deployment"})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-6 grid grid-cols-2 gap-6",children:[n.jsx(Iu,{label:"Consultant ID",value:r.consultant_id}),n.jsx(Iu,{label:"Client",value:r.client}),n.jsx(Iu,{label:"Project",value:r.project||""}),n.jsx(Iu,{label:"Notes",value:r.notes||""}),n.jsx(Iu,{label:"Start Date",value:r.start_date}),n.jsx(Iu,{label:"End Date",value:r.end_date||""})]})]})}function Iu({label:e,value:t}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:"font-medium",children:t})]})}function WBe({value:e,color:t}){const r={green:"border-green-300 text-green-700",gray:"border-gray-300 text-gray-600"};return n.jsx("span",{className:`px-3 py-1 border rounded-full text-xs font-medium capitalize ${r[t]}`,children:e})}function VBe(){const[e,t]=g.useState(!0),[r,s]=g.useState(null),[a,i]=g.useState("");g.useEffect(()=>{l()},[]);async function l(){try{t(!0);const c=await q.get("/v1/consultant/dashboard");s(c.data)}catch(c){console.error(c),i("Failed to load consultant dashboard")}finally{t(!1)}}if(e)return n.jsx("div",{className:"p-6",children:"Loading dashboard..."});if(a)return n.jsx("div",{className:"p-6 text-red-500",children:a});const o=r==null?void 0:r.active_deployment;return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"My assignment, timesheets & attendance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Assignment"}),n.jsx("p",{className:"text-lg font-semibold",children:o?"Active":"Not Assigned"}),o&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.client_name,"  ",o.role]})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Deployments"}),n.jsx("p",{className:"text-lg font-semibold",children:r.total_deployments})]}),n.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Payroll Status"}),n.jsx("p",{className:"text-lg font-semibold",children:r.payroll_ready?"Ready":"Pending"})]})]})]})}function HBe(){const[e,t]=g.useState(null),[r,s]=g.useState(!1),[a,i]=g.useState(!1),[l,o]=g.useState(!1),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,y]=g.useState(!1),[x,p]=g.useState(!0),[h,v]=g.useState(null);g.useEffect(()=>{_()},[]);async function b(){try{i(!0),await q.put("/v1/consultant/me",{phone:e.phone,current_location:e.current_location,education:e.education,experience_years:e.experience_years,skills:e.skills}),s(!1)}catch{alert("Failed to save profile")}finally{i(!1)}}const j=async()=>{var N,w,k,S;if(!c||!u){alert("Both password fields are required");return}if(c!==u){alert("Passwords do not match");return}try{y(!0),await q.post("/v1/consultant/change-password",{password:c,confirm_password:u}),alert("Password reset successfully"),o(!1),d(""),m("")}catch(E){alert(((w=(N=E==null?void 0:E.response)==null?void 0:N.data)==null?void 0:w.detail)||((S=(k=E==null?void 0:E.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to reset password")}finally{y(!1)}};async function _(){try{const N=await q.get("/v1/consultant/me");t(N.data)}catch(N){console.error(N),v("Failed to load consultant profile")}finally{p(!1)}}return x?n.jsx("div",{className:"p-6",children:"Loading profile..."}):h?n.jsx("div",{className:"p-6 text-red-600",children:h}):e?n.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Consultant Profile"}),n.jsxs("div",{className:"flex gap-2",children:[!r&&n.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded",children:"Edit Profile"}),n.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1 text-sm bg-red-600 text-white rounded",children:"Reset Password"})]})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Basic Information"}),n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",e.full_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Designation:"})," ",e.designation||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Email:"})," ",e.email||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Phone:"})," ",r?n.jsx("input",{value:e.phone||"",onChange:N=>t({...e,phone:N.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.phone||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Location:"})," ",r?n.jsx("input",{value:e.current_location||"",onChange:N=>t({...e,current_location:N.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.current_location||""]})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Professional Details"}),n.jsxs("p",{children:[n.jsx("b",{children:"Experience:"})," ",r?n.jsx("input",{type:"number",value:e.experience_years??"",onChange:N=>t({...e,experience_years:N.target.value}),className:"border px-2 py-1 rounded ml-2 w-24"}):e.experience_years??""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Education:"})," ",r?n.jsx("input",{value:e.education||"",onChange:N=>t({...e,education:N.target.value}),className:"border px-2 py-1 rounded ml-2"}):e.education||""]}),n.jsxs("div",{children:[n.jsx("b",{children:"Skills:"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(e.skills||[]).length===0&&n.jsx("span",{children:""}),(e.skills||[]).map(N=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:N},N))]})]})]}),r&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:b,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded",children:a?"Saving...":"Save"}),n.jsx("button",{onClick:()=>{s(!1),_()},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"})]}),n.jsxs("div",{className:"bg-white border rounded p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Consultant Status"}),n.jsxs("p",{children:[n.jsx("b",{children:"Consultant Code:"})," ",e.consultant_code]}),n.jsxs("p",{children:[n.jsx("b",{children:"Type:"})," ",e.type]}),n.jsxs("p",{children:[n.jsx("b",{children:"Status:"})," ",e.status]}),n.jsxs("p",{children:[n.jsx("b",{children:"Payroll Ready:"})," ",e.payroll_ready?"Yes":"No"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-96 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reset Consultant Password"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"Email"}),n.jsx("input",{type:"email",value:e.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"New Password"}),n.jsx("input",{type:"password",value:c,onChange:N=>d(N.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),n.jsx("input",{type:"password",value:u,onChange:N=>m(N.target.value),className:"w-full border p-2 rounded"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1 border rounded",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:f,className:"px-4 py-1 bg-red-600 text-white rounded",children:f?"Resetting...":"Reset"})]})]})})]}):null}const dl={getRequirements:async()=>(await q.get("/v1/client/requirements")).data,createRequirement:async e=>q.post("/v1/client/requirements",e),parseJD:async e=>q.post("/v1/client/parse-jd",{description:e}),uploadRequirementsExcel:async e=>(await q.post("/v1/client/requirements/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,getSubmissions:async e=>(await q.get(`/v1/client/jobs/${e}/submissions`)).data,getAllSubmissions:async()=>(await q.get("/v1/client/submissions/all")).data,submitInterviewFeedback:async e=>q.post("/v1/client/interview-feedback",e),submitFinalDecision(e){return q.post("/v1/client/final-decision",e)},getDeployments:async()=>(await q.get("/v1/client/deployments")).data,getInvoices:async()=>(await q.get("/v1/client/invoices")).data,getDashboard:async()=>(await q.get("/v1/client/dashboard")).data,getClientRequirements:async e=>(await q.get(`/v1/client/${e}/requirements`)).data,createClientRequirement:async(e,t)=>q.post(`/v1/client/${e}/requirements`,t)};function lw(){var c,d,u,m,f,y,x,p,h,v,b;const e=Et(),[t,r]=g.useState(null),[s,a]=g.useState(!0),[i,l]=g.useState("");g.useEffect(()=>{o()},[]);async function o(){try{a(!0);const j=await dl.getDashboard();r(j)}catch(j){console.error(j),l("Unable to load dashboard data")}finally{a(!1)}}return s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Loading dashboard"})]})}):i?n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-red-900",children:"Error"}),n.jsx("p",{className:"text-red-700 text-sm",children:i})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Overview of requirements, candidates, deployments & billing"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(wg,{title:"Active Requirements",value:(t==null?void 0:t.requirements)||0,sub:"Open hiring needs",icon:"",color:"indigo",onClick:()=>e("/client/requirements")}),n.jsx(wg,{title:"Candidates Received",value:(t==null?void 0:t.candidates_received)||0,sub:"Total submissions",icon:"",color:"blue"}),n.jsx(wg,{title:"Active Deployments",value:(t==null?void 0:t.active_deployments)||0,sub:"Currently working",icon:"",color:"green",onClick:()=>e("/client/deployments")}),n.jsx(wg,{title:"Pending Invoices",value:(t==null?void 0:t.pending_invoices)||0,sub:"Awaiting payment",icon:"",color:(t==null?void 0:t.pending_invoices)>0?"yellow":"gray",onClick:()=>e("/client/invoices")})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Hiring Pipeline"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ng,{label:"New Submissions",value:((c=t==null?void 0:t.pipeline)==null?void 0:c.new)||0,color:"blue"}),n.jsx(Ng,{label:"Shortlisted",value:((d=t==null?void 0:t.pipeline)==null?void 0:d.shortlisted)||0,color:"indigo"}),n.jsx(Ng,{label:"Interviewing",value:((u=t==null?void 0:t.pipeline)==null?void 0:u.interview)||0,color:"amber"}),n.jsx(Ng,{label:"Selected",value:((m=t==null?void 0:t.pipeline)==null?void 0:m.selected)||0,color:"green"})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["Total candidates in pipeline:"," ",n.jsx("span",{className:"font-bold text-gray-900",children:(((f=t==null?void 0:t.pipeline)==null?void 0:f.new)||0)+(((y=t==null?void 0:t.pipeline)==null?void 0:y.shortlisted)||0)+(((x=t==null?void 0:t.pipeline)==null?void 0:x.interview)||0)+(((p=t==null?void 0:t.pipeline)==null?void 0:p.selected)||0)})]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" SLA Status"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(ow,{label:"Submission SLA",status:(h=t==null?void 0:t.sla)==null?void 0:h.submission}),n.jsx(ow,{label:"Interview SLA",status:(v=t==null?void 0:t.sla)==null?void 0:v.interview}),n.jsx(ow,{label:"Deployment SLA",status:(b=t==null?void 0:t.sla)==null?void 0:b.deployment})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded px-3 py-2",children:n.jsxs("p",{className:"text-xs text-amber-800",children:[n.jsx("span",{className:"font-semibold",children:" Note:"})," Delays may impact delivery timelines. Contact your recruiter for updates."]})})})]})]})]})}const xb={indigo:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700",icon:"bg-indigo-100"},blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",icon:"bg-blue-100"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",icon:"bg-green-100"},yellow:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",icon:"bg-yellow-100"},gray:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",icon:"bg-gray-100"}};function wg({title:e,value:t,sub:r,icon:s,color:a="gray",onClick:i}){const l=xb[a]||xb.gray;return n.jsxs("div",{onClick:i,className:`bg-white border rounded-lg shadow-sm p-5 transition-all ${i?"cursor-pointer hover:shadow-md hover:border-gray-300":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:e}),n.jsx("span",{className:`text-2xl ${l.icon} p-2 rounded-lg`,children:s})]}),n.jsx("p",{className:`text-3xl font-bold ${l.text} mb-1`,children:t}),n.jsx("p",{className:"text-xs text-gray-500",children:r})]})}function Ng({label:e,value:t,color:r="gray"}){const s=xb[r]||xb.gray,i=Math.min(t/50*100,100);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:e}),n.jsx("span",{className:`font-bold text-lg ${s.text}`,children:t})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${s.bg.replace("bg-","bg-")}`,style:{width:`${i}%`,backgroundColor:r==="blue"?"#3b82f6":r==="indigo"?"#6366f1":r==="amber"?"#f59e0b":r==="green"?"#10b981":"#6b7280"}})})]})}function ow({label:e,status:t}){const s={on_time:{label:" On Time",color:"text-green-700",bg:"bg-green-50",border:"border-green-200"},delayed:{label:" Delayed",color:"text-red-700",bg:"bg-red-50",border:"border-red-200"},at_risk:{label:" At Risk",color:"text-amber-700",bg:"bg-amber-50",border:"border-amber-200"}}[t]||{label:"Pending",color:"text-gray-700",bg:"bg-gray-50",border:"border-gray-200"};return n.jsx("div",{className:`rounded-lg border p-3 ${s.bg} ${s.border}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-800",children:e}),n.jsx("span",{className:`text-sm font-bold ${s.color}`,children:s.label})]})})}function aF(){const[e,t]=g.useState(!1),[r,s]=g.useState([]),a=Et();g.useEffect(()=>{i()},[]);async function i(){const o=await dl.getRequirements();s((o==null?void 0:o.requirements)||o||[])}async function l(o){const c=o.target.files[0];if(!c)return;const d=new FormData;d.append("file",c);try{t(!0),await dl.uploadRequirementsExcel(d),alert("Requirements uploaded successfully!"),i()}catch(u){console.error(u),alert("Failed to upload file")}finally{t(!1)}}return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"My Requirements"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>a("/client/requirements/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"+ New Requirement"}),n.jsxs("a",{href:"/templates/requirements_template_lowercase.xlsx",download:!0,className:`\r
    border border-emerald-600\r
    text-emerald-600\r
    hover:bg-emerald-50\r
    px-4 py-2 rounded-md\r
    text-sm font-medium\r
    inline-flex items-center gap-2\r
  `,children:[n.jsx(q7,{size:16}),"Download Template"]}),n.jsxs("label",{className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer",children:["Upload Excel",n.jsx("input",{type:"file",accept:".xlsx,.xls",hidden:!0,onChange:l,disabled:e})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-gray-600 text-sm",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("th",{className:"p-2",children:"Requirement ID"})," ",n.jsx("th",{className:"p-2",children:"Job Title"}),n.jsx("th",{children:"Created On"})," ",n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((o,c)=>n.jsxs("tr",{className:"border-t hover:bg-slate-50 transition",children:[n.jsx("td",{className:"p-2 font-medium",children:c+1})," ",n.jsx("td",{className:"p-2 text-gray-700",children:o.requirement_code||""}),n.jsx("td",{className:"p-2",children:o.title}),n.jsx("td",{className:"text-sm text-gray-700",children:o.created_at?(()=>{const d=new Date(o.created_at),u=d.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),m=d.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${u} | ${m}`})():"-"}),n.jsxs("td",{children:[o.status==="NEW"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:"NEW"}),o.status==="APPROVED"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:"APPROVED"}),o.status==="CONVERTED_TO_JOB"&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"CONVERTED TO JOB"})]}),n.jsx("td",{children:o.job_id?n.jsxs("button",{onClick:()=>a(`/client/jobs/${o.job_id}/submissions`),className:`inline-flex items-center gap-1 \r
             text-blue-600 text-sm font-medium\r
             hover:text-blue-700 hover:underline\r
             cursor-pointer`,children:[n.jsx(pte,{size:15}),"View Submissions"]}):n.jsx("span",{className:"text-gray-400 text-sm italic",children:"Job not created"})})]},o.id))})]})})]})}const Fu={hired:{label:"Hire",icon:"",color:"green",description:"Send offer letters to selected candidates"},rejected:{label:"Reject",icon:"",color:"red",description:"Mark selected candidates as rejected"},shortlisted:{label:"Hold",icon:"",color:"amber",description:"Keep candidates in pending review"}};function x0(){const{jobId:e}=Rr(),[t,r]=g.useState([]),[s,a]=g.useState([]),[i,l]=g.useState(null),[o,c]=g.useState(!1),[d,u]=g.useState("");g.useEffect(()=>{m()},[e]);async function m(){if(e)try{const v=await dl.getSubmissions(e);r(v.submissions||[]),a([]),u("")}catch(v){u("Failed to load submissions"),console.error(v)}}const f=v=>{a(b=>b.includes(v)?b.filter(j=>j!==v):[...b,v])},y=()=>{s.length===t.length?a([]):a(t.map(v=>v.application_id))},x=v=>{s.length!==0&&(l({decision:v,step:"confirm"}),u(""))},p=async()=>{var v,b;if(i){c(!0),u("");try{const{decision:j}=i,_=[];for(const N of s)try{await dl.submitFinalDecision({application_id:N,decision:j})}catch(w){_.push(N),console.error("Failed to update:",N,w)}if(_.length===0)l({...i,step:"success"}),await new Promise(N=>setTimeout(N,1500)),await m();else if(_.length<s.length)u(`Updated ${s.length-_.length}/${s.length} candidates. ${_.length} failed.`),await m();else throw new Error("All updates failed")}catch(j){u(((b=(v=j==null?void 0:j.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to update candidates"),console.error(j)}finally{c(!1),(i==null?void 0:i.step)==="success"&&l(null)}}},h=v=>({pending:"bg-gray-100 text-gray-700",hired:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",shortlisted:"bg-amber-100 text-amber-700"})[v]||"bg-gray-100 text-gray-700";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-900",children:"Candidate Submissions"}),n.jsx("p",{className:"text-gray-600",children:"Review and make final hiring decisions on candidates sent by recruiters"})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Error"}),n.jsx("p",{className:"text-sm mt-1",children:d})]})]}),s.length>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("p",{className:"text-blue-900 font-medium mb-3",children:[s.length," candidate",s.length!==1?"s":""," ","selected"]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(Fu).map(([v,b])=>n.jsxs("button",{onClick:()=>x(v),disabled:o,className:`px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-${b.color}-600 hover:bg-${b.color}-700`,children:[b.icon," ",b.label," (",s.length,")"]},v))})]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left",children:n.jsx("input",{type:"checkbox",checked:s.length===t.length&&t.length>0,onChange:y,className:"cursor-pointer"})}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Candidate"}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Sent On"}),n.jsx("th",{className:"p-3 text-left font-semibold text-gray-900",children:"Status"})]})}),n.jsx("tbody",{children:t.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:4,className:"text-center p-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("p",{className:"text-gray-500 font-medium",children:"No submissions yet"}),n.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Candidates sent by recruiters will appear here"})]})}):t.map(v=>{var b,j;return n.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors ${s.includes(v.application_id)?"bg-blue-50":""}`,children:[n.jsx("td",{className:"p-3",children:n.jsx("input",{type:"checkbox",checked:s.includes(v.application_id),onChange:()=>f(v.application_id),className:"cursor-pointer"})}),n.jsxs("td",{className:"p-3",children:[n.jsx("p",{className:"font-medium text-gray-900",children:v.candidate_name}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:v.candidate_email})]}),n.jsx("td",{className:"p-3 text-gray-600",children:v.sent_to_client_at?new Date(v.sent_to_client_at).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-block px-2.5 py-0.5 rounded-full text-xs font-semibold ${h(v.status)}`,children:((b=v.status)==null?void 0:b.charAt(0).toUpperCase())+((j=v.status)==null?void 0:j.slice(1))||"Pending"})})]},v.application_id)})})]})}),i&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-6 w-full max-w-md",children:[i.step==="confirm"&&n.jsxs(n.Fragment,{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Confirm ",Fu[i.decision].label]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[n.jsxs("p",{className:"text-blue-900",children:[n.jsx("span",{className:"font-semibold",children:s.length})," ","candidate",s.length!==1?"s":""," will be marked as"," ",n.jsx("span",{className:"font-semibold",children:Fu[i.decision].label.toLowerCase()}),"."]}),n.jsx("p",{className:"text-blue-800 text-sm mt-2",children:Fu[i.decision].description})]}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"This action cannot be undone. Do you want to continue?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:p,disabled:o,className:`flex-1 px-4 py-2 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-${Fu[i.decision].color}-600 hover:bg-${Fu[i.decision].color}-700`,children:o?"Processing...":"Confirm"}),n.jsx("button",{onClick:()=>l(null),disabled:o,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"})]})]}),i.step==="success"&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-5xl mb-4",children:""}),n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:[s.length," Candidates Updated"]}),n.jsx("p",{className:"text-gray-600",children:"Decision recorded successfully. Refreshing..."})]})]})})]})}function iF(){const[e,t]=g.useState([]);return g.useEffect(()=>{dl.getDeployments().then(t)},[]),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"Consultant"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Deployed On"})," ",n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map((r,s)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 text-center font-medium",children:s+1}),n.jsx("td",{className:"p-2",children:r.consultant_name}),n.jsx("td",{children:r.role}),n.jsx("td",{className:"text-sm text-gray-700",children:r.start_date?(()=>{const a=new Date(r.start_date),i=a.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),l=a.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${i} | ${l}`})():"-"}),n.jsx("td",{children:r.status})]},r.id))})]})})}function lF(){const[e,t]=g.useState([]);return g.useEffect(()=>{dl.getInvoices().then(t)},[]),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"Invoice #"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map(r=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:r.invoice_number}),n.jsx("td",{children:r.amount}),n.jsx("td",{children:r.status})]},r.id))})]})})}function qBe({onLogout:e}){const t=Et(),r=Xn(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition",i="bg-blue-600 text-white",l="text-slate-200 hover:bg-slate-800",o=()=>r.pathname.includes("requirements")?"Requirements":r.pathname.includes("deployments")?"Deployments":r.pathname.includes("timesheets")?"Timesheets":r.pathname.includes("invoices")?"Invoices":"Dashboard";return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-64 bg-slate-900 text-slate-100 flex flex-col",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-slate-800",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Client Portal"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Manage hiring & billing"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs(cr,{to:"/client/dashboard",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(uf,{size:18}),"Dashboard"]}),n.jsxs(cr,{to:"/client/requirements",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(_l,{size:18}),"Requirements"]}),n.jsxs(cr,{to:"/client/deployments",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(ha,{size:18}),"Deployments"]}),n.jsxs(cr,{to:"/client/timesheets",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(pn,{size:18}),"Timesheets"]}),n.jsxs(cr,{to:"/client/timesheet-history",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(pn,{size:18}),"Timesheet History"]}),n.jsxs(cr,{to:"/client/invoices",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(cn,{size:18}),"Invoices"]})]}),n.jsx("div",{className:"p-4 border-t border-slate-800",children:n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-red-400 hover:text-red-500",children:[n.jsx(ex,{size:16}),"Logout"]})})]}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsx("header",{className:"bg-white border-b px-6 py-4",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:o()})}),n.jsx("main",{className:"flex-1 p-6",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:n.jsx(_o,{})})})]})]})}const fi=({isActive:e})=>`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-semibold transition ${e?"bg-white/20 text-white":"text-white/85 hover:bg-white/10 hover:text-white"}`,Jc=({title:e,children:t})=>n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-xs font-extrabold uppercase tracking-wide text-white/90",children:e}),n.jsx("div",{className:"space-y-1",children:t})]});function GBe(){const e=Et(),t=Xn(),r=t.pathname.includes("/dashboard")?"Dashboard":t.pathname.includes("/candidate-profile")?"Candidate Profile":t.pathname.includes("/assigned-jobs")?"Assigned Jobs":t.pathname.includes("/interviews")?"Interviews":t.pathname.includes("/trackers")?"Trackers":"Recruiter Portal",s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("token"),localStorage.removeItem("candidate_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e("/login",{replace:!0}),window.location.assign("/login")};return n.jsxs("div",{className:"min-h-screen bg-slate-100 flex",children:[n.jsxs("aside",{className:"w-72 shrink-0 bg-gradient-to-b from-purple-700 to-indigo-700 text-white p-4",children:[n.jsxs("div",{className:"mb-4 border-b border-white/20 pb-4",children:[n.jsx("h1",{className:"text-3xl font-extrabold",children:"Recruiter Portal"}),n.jsx("p",{className:"text-sm text-white/80",children:"Manage recruitment & hiring"})]}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs(Jc,{title:"Talent Acquisition",children:[n.jsxs(cr,{to:"/recruiter/dashboard",className:fi,children:[n.jsx(rAe,{size:18})," Dashboard"]}),n.jsxs(cr,{to:"/recruiter/assigned-jobs",className:fi,children:[n.jsx(_l,{size:18})," Assigned Jobs"]}),n.jsxs(cr,{to:"/recruiter/candidate-workflow",className:fi,children:[n.jsx(qr,{size:18})," Candidate Workflow"]})]}),n.jsx(Jc,{title:"Resdex",children:n.jsxs(cr,{to:"/recruiter/resdex/advanced-search",className:fi,children:[n.jsx(Es,{size:18})," Semantic Search"]})}),n.jsx(Jc,{title:"Candidate Management",children:n.jsxs(cr,{to:"/recruiter/candidate-profile",className:fi,children:[n.jsx(Ao,{size:18})," Candidate Profile"]})}),n.jsxs(Jc,{title:"Interviews",children:[n.jsxs(cr,{to:"/recruiter/interviews",className:fi,children:[n.jsx(si,{size:18})," Interviews"]}),n.jsxs(cr,{to:"/recruiter/interviews/calendar",className:fi,children:[n.jsx(pn,{size:18})," Interview Calendar"]}),n.jsxs(cr,{to:"/recruiter/interviews/logs",className:fi,children:[n.jsx(cn,{size:18})," Interview Logs"]})]}),n.jsx(Jc,{title:"Trackers",children:n.jsxs(cr,{to:"/recruiter/trackers",className:fi,children:[n.jsx(_l,{size:18})," Trackers"]})}),n.jsx(Jc,{title:"Reports",children:n.jsxs(cr,{to:"/recruiter/reports",className:fi,children:[n.jsx(I4e,{size:18})," Reports"]})}),n.jsxs(Jc,{title:"Account",children:[n.jsxs(cr,{to:"/recruiter/profile",className:fi,children:[n.jsx(Ao,{size:18})," My Profile"]}),n.jsxs(cr,{to:"/recruiter/settings",className:fi,children:[n.jsx(H1,{size:18})," Settings"]})]})]})]}),n.jsxs("main",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:r}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50",type:"button",children:n.jsx(i4,{size:18})}),n.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 font-semibold hover:bg-slate-50",type:"button",onClick:s,children:[n.jsx(ex,{size:16})," Logout"]})]})]}),n.jsx("div",{className:"p-4",children:n.jsx(_o,{})})]})]})}function JBe({onLogout:e}){const t=Et(),r=Xn(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",i="bg-white/20 backdrop-blur text-white font-semibold border border-white/20",l="text-white/80 hover:bg-white/10 hover:text-white",o=()=>r.pathname.includes("dashboard")?"Dashboard":r.pathname.includes("my-interviews")?"My Interviews":r.pathname.includes("notifications")?"Notifications & Alerts":r.pathname.includes("complete-profile")?"Complete Profile":r.pathname.includes("apply-jobs")?"Apply Jobs":r.pathname.includes("applied-jobs")?"Applied Jobs":r.pathname.includes("my-applications")?"My Applications":"Candidate Portal",c=r.pathname.includes("complete-profile");return g.useEffect(()=>{Array.from(document.querySelectorAll("div")).filter(u=>{const m=u.className||"";return typeof m=="string"&&m.includes("fixed")&&m.includes("inset-0")&&m.includes("bg-black")}).forEach(u=>{u.style.pointerEvents="none",u.style.display="none"})},[]),n.jsxs("div",{className:"min-h-screen flex bg-gray-50 relative z-[9999] pointer-events-auto",children:[n.jsxs("aside",{className:"w-56 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg relative z-[60] pointer-events-auto",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white border-opacity-20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Candidate Portal"}),n.jsx("p",{className:"text-xs text-white text-opacity-80",children:"Explore & apply jobs"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:`text-[11px] font-semibold uppercase tracking-wider text-white/70\r
 mb-2`,children:"Menu"}),n.jsxs(cr,{to:"/candidate/dashboard",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(uf,{size:18}),"Dashboard"]}),n.jsxs(cr,{to:"/candidate/notifications",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(i4,{size:18}),"Notifications & Alerts"]}),n.jsxs(cr,{to:"/candidate/complete-profile",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(Ao,{size:18}),"Complete Profile"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Jobs"}),n.jsxs(cr,{to:"/candidate/apply-jobs",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(ha,{size:18}),"Apply Jobs"]}),n.jsxs(cr,{to:"/candidate/applied-jobs",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(Oi,{size:18}),"Applied Jobs"]}),n.jsxs(cr,{to:"/candidate/my-applications",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(ha,{size:18}),"My Applications"]}),n.jsxs(cr,{to:"/candidate/my-interviews",className:({isActive:d})=>`${a} ${d?i:l}`,children:[n.jsx(BU,{size:18}),"My Interviews"]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative z-[60] pointer-events-auto",children:[n.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0 flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-extrabold text-gray-800",children:o()}),n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-red-600 transition font-semibold",children:[n.jsx(ex,{size:16}),"Logout"]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:c?n.jsx(_o,{}):n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsx(_o,{})})})]})]})}function KBe({onLogout:e}){const t=Et(),r=Xn(),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),t("/login",{replace:!0})},a="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition duration-200",i="!bg-white !text-gray-900 font-bold !shadow-lg",l="text-white hover:bg-white hover:text-gray-900 transition-all duration-200 hover:shadow-md",o=()=>r.pathname.includes("dashboard")?"Dashboard":r.pathname.includes("requirements")?"Requirements":r.pathname.includes("submissions")?"Recruiter Submissions":r.pathname.includes("interview-calendar")?"Interview Calendar":r.pathname.includes("interview-logs")?"Interview Logs":r.pathname.includes("candidate-review")?"Candidate Review":r.pathname.includes("timesheets")&&r.pathname.includes("history")?"Timesheet History":r.pathname.includes("timesheets")?"Timesheets":r.pathname.includes("clients")?"Client Directory":r.pathname.includes("assignments")?"Consultant Assignments":r.pathname.includes("reports")?"Reports":r.pathname.includes("settings")?"Settings":r.pathname.includes("profile")?"My Profile":"Account Manager";return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white border-opacity-20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Account Manager"}),n.jsx("p",{className:"text-xs text-white text-opacity-80",children:"Manage clients & accounts"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Overview"}),n.jsxs(cr,{to:"/account-manager/dashboard",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(uf,{size:18}),"Dashboard"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Pipeline"}),n.jsxs(cr,{to:"/account-manager/requirements",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(cn,{size:18}),"Requirements"]}),n.jsxs(cr,{to:"/account-manager/candidate-review",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(qr,{size:18}),"Candidate Review"]}),null,n.jsxs(cr,{to:"/account-manager/interview-calendar",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(si,{size:18}),"Interview Calendar"]}),n.jsxs(cr,{to:"/account-manager/interview-logs",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(uu,{size:18}),"Interview Logs"]})]}),null,null,n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Reports & Analytics"}),n.jsxs(cr,{to:"/account-manager/reports",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(GAe,{size:18}),"Reports"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-xs font-extrabold uppercase text-white tracking-wider mb-2",children:"Account"}),n.jsxs(cr,{to:"/account-manager/profile",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(Ao,{size:18}),"My Profile"]}),n.jsxs(cr,{to:"/account-manager/settings",className:({isActive:c})=>`${a} ${c?i:l}`,children:[n.jsx(H1,{size:18}),"Settings"]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0 flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-extrabold text-gray-800",children:o()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(AV,{}),n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-red-600 transition font-semibold",children:[n.jsx(ex,{size:16}),"Logout"]})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsx(_o,{})})})]})]})}const oF=[{title:"Overview",defaultOpen:!0,items:[{label:"Dashboard",to:"/dashboard",icon:uf,roles:["admin","recruiter","employee","internal_hr"]}]},{title:"Talent Acquisition",items:[{label:"Jobs",to:"/jobs",icon:ha,roles:["admin","recruiter"]},{label:"Job Submissions",to:"/recruitment/jobs/submissions",icon:_l,roles:["admin","recruiter","account_manager"]}]},{title:"Candidate Management",items:[{label:"Candidate Intake",to:"/candidates",icon:qr,roles:["admin","recruiter"]},{label:"Candidate Pool",to:"/matching",icon:H4e,roles:["admin","recruiter"]},{label:"Candidate Profile",to:"/candidates/:id",icon:Ao,roles:["admin","recruiter"]},{label:"Background Verification",to:"/candidates/verification",icon:k0,roles:["admin","internal_hr"]}]},{title:"Interviews",items:[{label:"Interview Calendar",to:"/interviews/calendar",icon:BU,roles:["admin","recruiter","account_manager"]},{label:"Interview Schedule",to:"/interviews",icon:_l,roles:["admin","recruiter"]},{label:"Interview Logs",to:"/interviews/logs",icon:cn,roles:["admin","recruiter","account_manager"]}]},{title:"Boarding Procedures",items:[{label:"Offer Letter",to:"/offer-letter",icon:D4e,roles:["admin","internal_hr"]},{label:"Onboarding",to:"/onboarding",icon:_l,roles:["admin","internal_hr"]}]},{title:"Consultant Management",items:[{label:"Consultant Pool",to:"/consultants",icon:qr,roles:["admin","consultant_manager","account_manager","internal_hr"]},{label:"Client Management",to:"/clients",icon:yk,roles:["admin","account_manager"]},{label:"Contract Management",to:"/contracts",icon:cn,roles:["admin","account_manager"]},{label:"Consultant Deployments",to:"/consultant-deployments",icon:WR,roles:["admin","account_manager"]}]},{title:"Employee Management",items:[{label:"Employees",to:"/employees",icon:qr,roles:["admin","internal_hr"]},{label:"Employee Dashboard",to:"/employee/dashboard",icon:uf,roles:["employee"]},{label:"Employee Directory",to:"/employees/directory",icon:cn,roles:["admin","internal_hr"]},{label:"Leaves",to:"/leaves",icon:_l,roles:["admin","internal_hr","employee"]},{label:"Attendance",to:"/attendance",icon:_l,roles:["admin","employee","internal_hr","recruiter"]},{label:"Performance",to:"/performance",icon:u4e,roles:["admin","employee","recruiter"]},{label:"Payroll",to:"/payroll",icon:c3e,roles:["admin","internal_hr"]},{label:"Invoices",to:"/invoices",icon:cn,roles:["admin","internal_hr","finance"]},{label:"Alumni",to:"/alumni",icon:eAe,roles:["admin","employee","internal_hr"]}]},{title:"Client Section",items:[{label:"Client List",to:"/clients",icon:yk,roles:["admin","account_manager"]},{label:"Client Requirements",to:"/client/requirements",icon:_l,roles:["client","admin"]},{label:"Client Deployments",to:"/client/deployments",icon:WR,roles:["client","admin"]},{label:"Client Invoices",to:"/client/invoices",icon:cn,roles:["client","admin"]},{label:"Client Timesheets",to:"/client/timesheets",icon:_l,roles:["client","admin"]}]},{title:"MarCom",items:[{label:"Leads",to:"/leads",icon:HR,roles:["admin"]},{label:"Campaigns",to:"/campaigns",icon:HR,roles:["admin"]}]},{title:"Administration",items:[{label:"User Management",to:"/users",icon:ZAe,roles:["admin"]},{label:"Roles",to:"/roles",icon:k0,roles:["admin"]},{label:"Permissions",to:"/permissions",icon:k0,roles:["admin"]},{label:"Roles List",to:"/roles-list",icon:cn,roles:["admin"]},{label:"Permissions List",to:"/permissions-list",icon:cn,roles:["admin"]},{label:"Role-Permission Matrix",to:"/role-permission-matrix",icon:k0,roles:["admin"]},{label:"Settings",to:"/settings",icon:H1,roles:["admin"]}]}],XBe=(e,t)=>!e||e.length===0||t==="consultant"&&e.includes("employee")?!0:e.includes(t);function YBe({onLogout:e,children:t,currentRole:r}){const s=(r||localStorage.getItem("role")||"admin").toLowerCase(),a=Xn(),i=Et(),[l,o]=g.useState(()=>{const x={};return oF.forEach(p=>{x[p.title]=!!p.defaultOpen}),x}),c=g.useMemo(()=>oF.map(x=>{const p=x.items.filter(h=>XBe(h.roles,s));return{...x,items:p}}).filter(x=>x.items.length>0),[s]),d=()=>{const x=a.pathname;return x.includes("/dashboard")?"Admin Dashboard":x.includes("/recruiter/dashboard")?"Recruiter Dashboard":x.includes("/jobs")?"Jobs":x.includes("/recruitment/jobs/submissions")?"Job Submissions":x.includes("/candidates/verification")?"Background Verification":x.includes("/candidates/bulk-actions")?"Bulk Actions":x.includes("/candidates")?"Candidate Intake":x.includes("/matching")?"Candidate Pool":x.includes("/interviews/calendar")?"Interview Calendar":x.includes("/interviews/logs")?"Interview Logs":x.includes("/interviews")?"Interview Schedule":x.includes("/onboarding")?"Onboarding":x.includes("/offer-letter")?"Offer Letter":x.includes("/consultant-deployments")?"Consultant Deployments":x.includes("/consultants")?"Consultant Pool":x.includes("/employees/directory")?"Employee Directory":x.includes("/employee/dashboard")?"Employee Dashboard":x.includes("/employees")?"Employees":x.includes("/leaves")?"Leaves":x.includes("/attendance")?"Attendance":x.includes("/performance")?"Performance":x.includes("/payroll")?"Payroll":x.includes("/invoices")?"Invoices":x.includes("/alumni")?"Alumni":x.includes("/client/requirements")?"Client Requirements":x.includes("/client/deployments")?"Client Deployments":x.includes("/client/invoices")?"Client Invoices":x.includes("/client/timesheets")?"Client Timesheets":x.includes("/clients")?"Client List":x.includes("/leads")?"Leads":x.includes("/campaigns")?"Campaigns":x.includes("/users")?"User Management":x.includes("/roles-list")?"Roles List":x.includes("/permissions-list")?"Permissions List":x.includes("/role-permission-matrix")?"Role-Permission Matrix":x.includes("/roles")?"Roles":x.includes("/permissions")?"Permissions":x.includes("/settings")?"Settings":"Admin Panel"},u="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition duration-200",m="bg-white text-gray-900 font-semibold shadow",f="text-white/90 hover:bg-white/20 hover:text-white transition-all",y=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e&&e(),i("/login",{replace:!0})};return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsxs("aside",{className:"w-72 flex-shrink-0 bg-gradient-to-b from-purple-600 to-emerald-500 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white/20",children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"Admin Portal"}),n.jsx("p",{className:"text-xs text-white/80",children:"Enterprise HR Console"})]}),n.jsx("nav",{className:"flex-1 px-4 py-4 space-y-3 overflow-y-auto",children:c.map(x=>n.jsxs("div",{className:"mb-2",children:[n.jsxs("button",{type:"button",onClick:()=>o(p=>({...p,[x.title]:!p[x.title]})),className:"w-full flex items-center justify-between px-3 py-2 text-white/90 hover:bg-white/10 rounded-lg",children:[n.jsx("span",{className:"text-xs font-extrabold uppercase tracking-wider",children:x.title}),n.jsx("span",{className:"text-xs",children:l[x.title]?"-":"+"})]}),l[x.title]&&n.jsx("div",{className:"mt-2 space-y-1",children:x.items.map(p=>{const h=p.icon;return p.disabled?n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm text-white/50 cursor-not-allowed",children:[n.jsx(h,{size:18}),n.jsx("span",{children:p.label})]},p.label):n.jsxs(cr,{to:p.to,end:p.to==="/interviews"||p.to==="/employees",className:({isActive:v})=>`${u} ${v?m:f}`,children:[n.jsx(h,{size:18}),n.jsx("span",{children:p.label})]},p.label)})})]},x.title))})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 px-6 py-4 flex items-center justify-between text-white shadow-sm",children:[n.jsx("h1",{className:"text-xl font-extrabold text-white",children:d()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search candidates...",className:"bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/30 focus:bg-white/20 transition-all duration-200 w-64"}),n.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),n.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-sm bg-white/20 hover:bg-white/30 text-white border border-white/30 hover:border-white/50 transition-all duration-200 font-semibold px-4 py-2 rounded-lg shadow-sm",children:[n.jsx(ex,{size:16}),"Logout"]})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t||n.jsx(_o,{})})})]})]})}const cw=[{label:"Dashboard",to:"/super-admin/dashboard",icon:uf},{label:"Business Setup",to:"/super-admin/business-setup",icon:BAe},{label:"Admin Management",to:"/super-admin/admin-management",icon:qr},{label:"Roles & Permissions",to:"/super-admin/roles-permissions",icon:k0},{label:"Tracker Metrics",to:"/super-admin/tracker-dashboard",icon:f4e},{label:"Workflow Builder",to:"/super-admin/workflow-builder",icon:Z4e},{label:"User Management",to:"/super-admin/user-management/users",icon:qr},{label:"System Settings",to:"/super-admin/system-settings",icon:H1},{label:"Audit Logs",to:"/super-admin/audit-logs",icon:cn}],ZBe={"/super-admin/dashboard":"Super Admin Dashboard","/super-admin/business-setup":"Business Setup","/super-admin/admin-management":"Admin Management","/super-admin/roles-permissions":"Roles & Permissions","/super-admin/tracker-dashboard":"Tracker Metrics","/super-admin/workflow-builder":"Workflow Builder","/super-admin/user-management/users":"User Management","/super-admin/system-settings":"System Settings","/super-admin/audit-logs":"Audit Logs"};function QBe({onLogout:e,children:t}){const r=Xn(),s=Et(),[a,i]=g.useState(""),[l,o]=g.useState(!1),c=g.useMemo(()=>{const x=ZBe[r.pathname];if(x)return x;const p=cw.find(h=>r.pathname.startsWith(h.to));return p?p.label:"Super Admin"},[r.pathname]),d="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition",u="bg-white text-slate-900 shadow",m="text-white/90 hover:bg-white/15",f=g.useMemo(()=>{const x=a.trim().toLowerCase();return x?cw.filter(p=>p.label.toLowerCase().includes(x)).slice(0,6):[]},[a]),y=()=>{if(f.length===0)return;const x=a.trim(),p=f[0].to;s(x?`${p}?q=${encodeURIComponent(x)}`:p),o(!1)};return n.jsxs("div",{className:"min-h-screen flex bg-slate-100",children:[n.jsxs("aside",{className:"w-72 flex-shrink-0 bg-gradient-to-b from-purple-700 to-emerald-600 text-white flex flex-col shadow-lg",children:[n.jsxs("div",{className:"px-6 py-5 border-b border-white/20",children:[n.jsx("div",{className:"text-lg font-extrabold",children:"ATS-HR"}),n.jsx("div",{className:"text-xs text-white/80",children:"Super Admin - Governance"})]}),n.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:cw.map(x=>{const p=x.icon;return n.jsxs(cr,{to:x.to,className:({isActive:h})=>`${d} ${h?u:m}`,children:[n.jsx(p,{size:18}),n.jsx("span",{children:x.label})]},x.to)})}),n.jsx("div",{className:"px-4 py-4 border-t border-white/20",children:n.jsx("button",{className:"w-full rounded-md bg-white/15 hover:bg-white/25 px-3 py-2 text-sm font-semibold",onClick:e,children:"Logout"})})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center gap-6 justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Super Admin"}),n.jsx("h1",{className:"text-xl font-extrabold text-slate-900",children:c})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-700 border border-slate-200",children:"Production"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:a,onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),120),onChange:x=>{i(x.target.value),o(!0)},onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),y())},placeholder:"Search clients, admins, users",className:"w-64 rounded-md border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),l&&a.trim()&&n.jsx("div",{className:"absolute right-0 top-11 z-10 w-72 overflow-hidden rounded-md border border-slate-200 bg-white shadow-lg",children:f.length===0?n.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"}):f.map(x=>n.jsx("button",{onMouseDown:p=>{p.preventDefault();const h=a.trim();s(h?`${x.to}?q=${encodeURIComponent(h)}`:x.to),o(!1)},className:"block w-full border-b border-slate-100 px-3 py-2 text-left text-xs text-slate-700 hover:bg-slate-50 last:border-b-0",children:x.label},x.to))})]}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Logout"})]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-slate-100",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:t||n.jsx(_o,{})})})]})]})}const cF={purple:"from-purple-50 to-purple-100 border-purple-200 text-purple-700",blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-700",emerald:"from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700",amber:"from-amber-50 to-amber-100 border-amber-200 text-amber-700"},kg=({label:e,value:t,tone:r="purple"})=>{const s=cF[r]||cF.purple;return n.jsxs("div",{className:`rounded-xl border bg-gradient-to-br p-5 shadow-sm ${s}`,children:[n.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:e}),n.jsx("div",{className:"mt-2 text-4xl font-extrabold leading-none",children:t})]})},dF=[{name:"Mon",value:2},{name:"Tue",value:3},{name:"Wed",value:2},{name:"Thu",value:4},{name:"Fri",value:3},{name:"Sat",value:2},{name:"Sun",value:1}];function eUe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function tUe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function rUe(){const[e,t]=g.useState(null),[r,s]=g.useState([]),[a,i]=g.useState("");g.useEffect(()=>{let d=!0;return Promise.allSettled([q.get("/v1/super-admin/dashboard"),q.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(u=>{var y,x;if(!d)return;const m=u[0],f=u[1];if(m.status==="fulfilled"?t(m.value.data||{}):t({}),f.status==="fulfilled"){const p=(x=(y=f.value)==null?void 0:y.data)==null?void 0:x.logs;s(Array.isArray(p)?p:[]),i("")}else s([]),i("Workflow activity unavailable")}),()=>{d=!1}},[]);const l=g.useMemo(()=>{const d=Number((e==null?void 0:e.revenue_mtd)||0);return Number.isFinite(d)?`Rs ${d.toLocaleString("en-IN")}`:"--"},[e==null?void 0:e.revenue_mtd]),o=g.useMemo(()=>{const d=Number((e==null?void 0:e.active_jobs)||0),u=Number((e==null?void 0:e.recruiter_productivity)||0);return dF.map((m,f)=>({...m,value:Math.max(0,m.value+Math.round(d/2)-f%2+u)}))},[e==null?void 0:e.active_jobs,e==null?void 0:e.recruiter_productivity]),c=g.useMemo(()=>{const d=Number((e==null?void 0:e.active_clients)||0);return dF.map((u,m)=>({...u,value:Math.max(1,u.value+m%3+d)}))},[e==null?void 0:e.active_clients]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-8 text-white shadow-lg",children:[n.jsx("h2",{className:"text-4xl font-extrabold",children:"Super Admin Dashboard"}),n.jsx("p",{className:"mt-2 text-white/90",children:"Governance, controls, and platform health"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsx(kg,{label:"Active Clients",value:(e==null?void 0:e.active_clients)??"--",tone:"purple"}),n.jsx(kg,{label:"Active Jobs",value:(e==null?void 0:e.active_jobs)??"--",tone:"blue"}),n.jsx(kg,{label:"Recruiter Productivity",value:(e==null?void 0:e.recruiter_productivity)??"--",tone:"emerald"}),n.jsx(kg,{label:"Revenue (MTD)",value:l,tone:"amber"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-3xl font-semibold text-slate-900",children:"Hiring Funnel Health"}),n.jsx("p",{className:"mb-3 text-sm text-slate-500",children:"Weekly movement across top-of-funnel activity."}),n.jsx("div",{className:"h-52",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(bR,{data:o,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"hiringFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#7c3aed",stopOpacity:.55}),n.jsx("stop",{offset:"95%",stopColor:"#7c3aed",stopOpacity:.05})]})}),n.jsx(lo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(Ka,{dataKey:"name"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(Co,{type:"monotone",dataKey:"value",stroke:"#7c3aed",strokeWidth:2,fill:"url(#hiringFill)"})]})})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-3xl font-semibold text-slate-900",children:"Time-to-Hire Trend"}),n.jsx("p",{className:"mb-3 text-sm text-slate-500",children:"Monitoring turnaround consistency by day."}),n.jsx("div",{className:"h-52",children:n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(bR,{data:c,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"tthFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#0f766e",stopOpacity:.5}),n.jsx("stop",{offset:"95%",stopColor:"#0f766e",stopOpacity:.05})]})}),n.jsx(lo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(Ka,{dataKey:"name"}),n.jsx(Xa,{}),n.jsx(Dn,{}),n.jsx(Co,{type:"monotone",dataKey:"value",stroke:"#0f766e",strokeWidth:2,fill:"url(#tthFill)"})]})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-2xl font-semibold text-red-800",children:"SLA Breach Alerts"}),n.jsx("p",{className:"mt-2 text-4xl font-extrabold text-red-700",children:Number((e==null?void 0:e.sla_breaches)??0)}),n.jsx("p",{className:"mt-1 text-sm text-red-700/80",children:"active alerts"})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg border border-emerald-200 bg-white px-3 py-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Recruiter workflow events"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:r.length})]}),n.jsx("div",{className:"mt-3 space-y-2",children:a?n.jsx("p",{className:"text-sm text-emerald-700/80",children:a}):r.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter activity yet"}):r.slice(0,5).map(d=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:eUe(d.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:tUe(d.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",d.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",d.candidate_id||"--"," | Job: ",d.job_id||"--"]})]},d.id))})]})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-5 shadow-sm",children:[n.jsx("h3",{className:"text-2xl font-semibold text-amber-800",children:"System Warnings"}),n.jsx("p",{className:"mt-2 text-4xl font-extrabold text-amber-700",children:Number((e==null?void 0:e.system_warnings)??0)}),n.jsx("p",{className:"mt-1 text-sm text-amber-700/80",children:"warnings"}),n.jsxs("div",{className:"mt-4 rounded-lg border border-amber-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Governance Snapshot"}),n.jsxs("div",{className:"mt-2 space-y-2 text-sm text-slate-700",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Active Clients"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.active_clients)??"--"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Active Jobs"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.active_jobs)??"--"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Productivity"}),n.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.recruiter_productivity)??"--"})]})]})]})]})]})]})}async function nUe(e,t){return(await q.get("/v1/super-admin/business-setup/summary",{params:{scope:e,tenant_id:e==="tenant"?t:void 0}})).data||{}}async function VV(){var t;return((t=(await q.get("/v1/super-admin/tenants")).data)==null?void 0:t.items)||[]}async function sUe(){var t;return((t=(await q.get("/v1/permissions/me")).data)==null?void 0:t.modules)||{}}async function aUe(e,{scope:t,tenantId:r,page:s=1,limit:a=20,search:i=""}={}){return(await q.get(e,{params:{scope:t,tenant_id:t==="tenant"?r:void 0,page:s,limit:a,search:i}})).data||{items:[]}}async function Ep(e,t){return(await q.post(e,t)).data}async function yf(e,t){return(await q.put(e,t)).data}async function iUe(e,t){return(await q.patch(e,t)).data}async function uA(e,t){return(await q.post(e,t)).data}async function go(e,t){return(await q.get(e,{params:t})).data}const Sg={departments:0,locations:0,designations:0,job_templates:0,hiring_stages:0,branding:0,portal_preferences:0,candidate_email_templates:0,notification_email_templates:0,job_approval_workflows:0,offer_approval_workflows:0,integrations:0},lUe=[{key:"organization_structure",title:"Organization Structure",description:"Define departments, locations, and designations",icon:yk,actionLabel:"Manage",route:"/super-admin/business-setup/org-structure",permission:["org_structure","manage"],bullets:[{label:"Departments",key:"departments"},{label:"Locations",key:"locations"},{label:"Designations",key:"designations"}]},{key:"job_settings",title:"Job Settings",description:"Standardize jobs and configure hiring stages",icon:s4e,actionLabel:"Configure",route:"/super-admin/business-setup/job-settings",permission:["job_settings","manage"],bullets:[{label:"Job Templates",key:"job_templates"},{label:"Hiring Stages",key:"hiring_stages"}]},{key:"company_profile",title:"Company Profile",description:"Set up branding and portal preferences",icon:cAe,actionLabel:"Customize",route:"/super-admin/business-setup/company-profile",permission:["company_profile","manage"],bullets:[{label:"Branding",key:"branding"},{label:"Portal Preferences",key:"portal_preferences"}]},{key:"email_templates",title:"Email Templates",description:"Customize and standardize system emails",icon:uu,actionLabel:"Edit",route:"/super-admin/business-setup/email-templates",permission:["email_templates","manage"],bullets:[{label:"Candidate Emails",key:"candidate_email_templates"},{label:"Notification Emails",key:"notification_email_templates"}]},{key:"approval_workflows",title:"Approval Workflows",description:"Configure multi-step approval chains",icon:dp,actionLabel:"Set Up",route:"/super-admin/business-setup/approval-workflows",permission:["approval_workflows","manage"],bullets:[{label:"Job Approval Workflow",key:"job_approval_workflows"},{label:"Offer Approval Workflow",key:"offer_approval_workflows"}]},{key:"integrations",title:"Integrations",description:"Connect with external recruitment platforms",icon:mAe,actionLabel:"Integrate",route:"/super-admin/business-setup/integrations",permission:["integrations","manage"],bullets:[{label:"LinkedIn/Naukri/Others",key:"integrations"}]}];function oUe(){const e=Et(),[t,r]=g.useState("global"),[s,a]=g.useState(""),[i,l]=g.useState([]),[o,c]=g.useState(Sg),[d,u]=g.useState({}),[m,f]=g.useState(!0),[y,x]=g.useState("");g.useEffect(()=>{let h=!0;return Promise.allSettled([VV(),sUe()]).then(v=>{h&&(v[0].status==="fulfilled"&&l(v[0].value||[]),v[1].status==="fulfilled"&&u(v[1].value||{}))}),()=>{h=!1}},[]),g.useEffect(()=>{let h=!0;async function v(){var b,j;f(!0),x("");try{const _=await nUe(t,s||void 0);h&&c({...Sg,..._||{}})}catch(_){h&&(c(Sg),x(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to load business setup summary"))}finally{h&&f(!1)}}if(t==="tenant"&&!s){c(Sg),f(!1);return}return v(),()=>{h=!1}},[t,s]);const p=g.useMemo(()=>(h,v)=>{const b=String(h||"").toLowerCase(),j=String(v||"").toLowerCase();return(Array.isArray(d==null?void 0:d[b])?d[b]:[]).includes(j)},[d]);return n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Business Setup"}),n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Configure organization hierarchy, job setup, branding, templates, approvals and integrations."}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[n.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Scope"}),n.jsxs("select",{className:"rounded-md border border-slate-300 px-3 py-2 text-sm",value:t,onChange:h=>{r(h.target.value),h.target.value==="global"&&a("")},children:[n.jsx("option",{value:"global",children:"Global"}),n.jsx("option",{value:"tenant",children:"Tenant"})]}),t==="tenant"&&n.jsxs("select",{className:"rounded-md border border-slate-300 px-3 py-2 text-sm",value:s,onChange:h=>a(h.target.value),children:[n.jsx("option",{value:"",children:"Select Tenant"}),i.map(h=>n.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),y&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700",children:y}),n.jsx("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:lUe.map(h=>{const v=h.icon,b=p(h.permission[0],h.permission[1]);return n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"rounded-xl bg-slate-100 p-2.5 text-slate-700",children:n.jsx(v,{size:20})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:h.title}),n.jsx("p",{className:"text-sm text-slate-600",children:h.description})]})]}),n.jsx("div",{className:"my-4 border-b border-slate-100"}),n.jsx("div",{className:"space-y-2",children:h.bullets.map(j=>n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-400"}),n.jsxs("span",{children:[j.label," (",m?"...":Number(o[j.key]||0),")"]})]},j.label))}),n.jsx("div",{className:"mt-4 flex justify-end",children:b?n.jsxs("button",{type:"button",onClick:()=>e(h.route,{state:{scope:t,tenantId:s}}),className:"inline-flex items-center gap-1 rounded-lg border border-slate-300 bg-slate-50 px-3 py-1.5 text-sm font-semibold text-slate-800 hover:bg-slate-100",children:[h.actionLabel," ",n.jsx(KCe,{size:14})]}):n.jsx("span",{className:"text-xs text-slate-500",children:"No permission"})})]},h.key)})})]})}function Wf(){var o,c;const e=Xn(),[t,r]=g.useState(((o=e.state)==null?void 0:o.scope)||"global"),[s,a]=g.useState(((c=e.state)==null?void 0:c.tenantId)||""),[i,l]=g.useState([]);return g.useEffect(()=>{let d=!0;return VV().then(u=>{d&&l(u||[])}).catch(()=>{d&&l([])}),()=>{d=!1}},[]),{scope:t,tenantId:s,tenants:i,setScope:d=>{r(d),d==="global"&&a("")},setTenantId:a}}function Vf({scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}){return n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Scope"}),n.jsxs("select",{className:"rounded-md border border-slate-300 px-3 py-2 text-sm",value:e,onChange:i=>s(i.target.value),children:[n.jsx("option",{value:"global",children:"Global"}),n.jsx("option",{value:"tenant",children:"Tenant"})]}),e==="tenant"&&n.jsxs("select",{className:"rounded-md border border-slate-300 px-3 py-2 text-sm",value:t,onChange:i=>a(i.target.value),children:[n.jsx("option",{value:"",children:"Select Tenant"}),r.map(i=>n.jsx("option",{value:i.id,children:i.name},i.id))]})]})}const uF=[{key:"departments",label:"Departments",fields:["name","code"]},{key:"locations",label:"Locations",fields:["name","city","state","country"]},{key:"designations",label:"Designations",fields:["name","level"]}];function dw(e){const t={};return e.forEach(r=>{t[r]=""}),t}function cUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState("departments"),[o,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState(!1),[y,x]=g.useState(""),[p,h]=g.useState({}),[v,b]=g.useState(null),j=g.useMemo(()=>uF.find(k=>k.key===i),[i]);g.useEffect(()=>{h(dw(j.fields)),b(null)},[j]);const _=async()=>{var k,S;if(e==="tenant"&&!t){c([]);return}f(!0),x("");try{const E=await aUe(`/v1/super-admin/${i}`,{scope:e,tenantId:t,search:d,page:1,limit:100});c(E.items||[])}catch(E){x(((S=(k=E==null?void 0:E.response)==null?void 0:k.data)==null?void 0:S.detail)||"Failed to load records"),c([])}finally{f(!1)}};g.useEffect(()=>{_()},[i,e,t]);const N=async k=>{var S,E;k.preventDefault();try{const T={...p,scope:e,tenant_id:e==="tenant"?t:void 0};v!=null&&v.id?await yf(`/v1/super-admin/${i}/${v.id}`,T):await Ep(`/v1/super-admin/${i}`,T),h(dw(j.fields)),b(null),_()}catch(T){x(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Save failed")}},w=async k=>{var S,E;try{await iUe(`/v1/super-admin/${i}/${k.id}/status`,{is_active:!k.is_active}),_()}catch(T){x(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Status update failed")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Organization Structure"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Manage departments, locations and designations by scope."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),n.jsx("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:uF.map(k=>n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i===k.key?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,onClick:()=>l(k.key),children:k.label},k.key))}),y&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:y}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[n.jsxs("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-slate-600",children:[v?"Edit":"Add"," ",j.label.slice(0,-1)]}),n.jsxs("form",{className:"space-y-3",onSubmit:N,children:[j.fields.map(k=>n.jsx("input",{value:p[k]||"",onChange:S=>h(E=>({...E,[k]:S.target.value})),placeholder:k.replace("_"," "),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm"},k)),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"submit",className:"rounded-md bg-slate-900 px-3 py-2 text-sm font-semibold text-white",children:v?"Update":"Create"}),v&&n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-3 py-2 text-sm",onClick:()=>{b(null),h(dw(j.fields))},children:"Cancel"})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4 lg:col-span-2",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("input",{value:d,onChange:k=>u(k.target.value),placeholder:`Search ${j.label.toLowerCase()}`,className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsx("button",{type:"button",onClick:_,className:"rounded-md border border-slate-300 px-3 py-2 text-sm",children:"Search"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[j.fields.map(k=>n.jsx("th",{className:"px-2 py-2 font-semibold",children:k},k)),n.jsx("th",{className:"px-2 py-2 font-semibold",children:"status"}),n.jsx("th",{className:"px-2 py-2 font-semibold",children:"actions"})]})}),n.jsx("tbody",{children:m?n.jsx("tr",{children:n.jsx("td",{className:"px-2 py-3 text-slate-500",colSpan:j.fields.length+2,children:"Loading..."})}):o.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-2 py-3 text-slate-500",colSpan:j.fields.length+2,children:"No records"})}):o.map(k=>n.jsxs("tr",{className:"border-b border-slate-100",children:[j.fields.map(S=>n.jsx("td",{className:"px-2 py-2",children:k[S]||"--"},S)),n.jsx("td",{className:"px-2 py-2",children:k.is_active?"Active":"Disabled"}),n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>{b(k),h(j.fields.reduce((S,E)=>({...S,[E]:k[E]||""}),{}))},children:"Edit"}),n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>w(k),children:k.is_active?"Disable":"Enable"})]})})]},k.id))})]})})]})]})]})}function dUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState("templates"),[o,c]=g.useState([]),[d,u]=g.useState([]),[m,f]=g.useState(""),[y,x]=g.useState({name:"",employment_type:"FT",default_title:""}),[p,h]=g.useState({name:"",stage_type:"screening",is_default:!1}),v={scope:e,tenant_id:e==="tenant"?t:void 0},b=async()=>{var k,S;if(e==="tenant"&&!t){c([]),u([]);return}f("");try{const[E,T]=await Promise.all([go("/v1/super-admin/job-templates",v),go("/v1/super-admin/hiring-stages",v)]);c((E==null?void 0:E.items)||[]),u((T==null?void 0:T.items)||[])}catch(E){f(((S=(k=E==null?void 0:E.response)==null?void 0:k.data)==null?void 0:S.detail)||"Failed to load job settings")}};g.useEffect(()=>{b()},[e,t]);const j=async k=>{var S,E;k.preventDefault();try{await Ep("/v1/super-admin/job-templates",{...y,scope:e,tenant_id:e==="tenant"?t:void 0,json_config:y}),x({name:"",employment_type:"FT",default_title:""}),b()}catch(T){f(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Failed to create template")}},_=async k=>{var S,E;k.preventDefault();try{await Ep("/v1/super-admin/hiring-stages",{...p,scope:e,tenant_id:e==="tenant"?t:void 0}),h({name:"",stage_type:"screening",is_default:!1}),b()}catch(T){f(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Failed to create stage")}},N=async(k,S)=>{const E=[...d],T=k+S;if(!(T<0||T>=E.length)){[E[k],E[T]]=[E[T],E[k]],u(E);try{await yf("/v1/super-admin/hiring-stages/reorder",{stage_ids:E.map(A=>A.id)}),b()}catch{f("Failed to reorder stages"),b()}}},w=async k=>{try{await uA(`/v1/super-admin/job-templates/${k}/duplicate`,{}),b()}catch{f("Failed to duplicate template")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Job Settings"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Manage job templates and hiring stages."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),n.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="templates"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,onClick:()=>l("templates"),children:"Job Templates"}),n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="stages"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,onClick:()=>l("stages"),children:"Hiring Stages"})]}),m&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:m}),i==="templates"?n.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[n.jsxs("form",{className:"space-y-3 rounded-lg border border-slate-200 p-4",onSubmit:j,children:[n.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Create Template"}),n.jsx("input",{value:y.name,onChange:k=>x(S=>({...S,name:k.target.value})),placeholder:"Template name",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:y.default_title,onChange:k=>x(S=>({...S,default_title:k.target.value})),placeholder:"Default title",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsxs("select",{value:y.employment_type,onChange:k=>x(S=>({...S,employment_type:k.target.value})),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"FT",children:"Full Time"}),n.jsx("option",{value:"Intern",children:"Intern"}),n.jsx("option",{value:"Contract",children:"Contract"})]}),n.jsx("button",{type:"submit",className:"rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",children:"Create"})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 p-4 lg:col-span-2",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[n.jsx("th",{className:"px-2 py-2",children:"Name"}),n.jsx("th",{className:"px-2 py-2",children:"Status"}),n.jsx("th",{className:"px-2 py-2",children:"Actions"})]})}),n.jsx("tbody",{children:o.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-2 py-3 text-slate-500",colSpan:3,children:"No templates"})}):o.map(k=>n.jsxs("tr",{className:"border-b border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:k.name}),n.jsx("td",{className:"px-2 py-2",children:k.is_active?"Active":"Archived"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>w(k.id),children:"Duplicate"})})]},k.id))})]})})]}):n.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[n.jsxs("form",{className:"space-y-3 rounded-lg border border-slate-200 p-4",onSubmit:_,children:[n.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Create Stage"}),n.jsx("input",{value:p.name,onChange:k=>h(S=>({...S,name:k.target.value})),placeholder:"Stage name",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsxs("select",{value:p.stage_type,onChange:k=>h(S=>({...S,stage_type:k.target.value})),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"screening",children:"Screening"}),n.jsx("option",{value:"interview",children:"Interview"}),n.jsx("option",{value:"offer",children:"Offer"})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:p.is_default,onChange:k=>h(S=>({...S,is_default:k.target.checked}))})," Default stage"]}),n.jsx("button",{type:"submit",className:"rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",children:"Create"})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 p-4 lg:col-span-2",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[n.jsx("th",{className:"px-2 py-2",children:"Order"}),n.jsx("th",{className:"px-2 py-2",children:"Name"}),n.jsx("th",{className:"px-2 py-2",children:"Type"}),n.jsx("th",{className:"px-2 py-2",children:"Actions"})]})}),n.jsx("tbody",{children:d.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-2 py-3 text-slate-500",colSpan:4,children:"No stages"})}):d.map((k,S)=>n.jsxs("tr",{className:"border-b border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:k.sort_order}),n.jsxs("td",{className:"px-2 py-2",children:[k.name,k.is_default?" (Default)":""]}),n.jsx("td",{className:"px-2 py-2",children:k.stage_type}),n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>N(S,-1),children:"Up"}),n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>N(S,1),children:"Down"})]})})]},k.id))})]})})]})]})}function uUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState("branding"),[o,c]=g.useState({company_name:"",primary_color:"#6C2BD9",secondary_color:"#0EA5E9",privacy_policy_url:""}),[d,u]=g.useState({candidate_portal_enabled:!0,resume_required:!0,allowed_file_types:"pdf,doc,docx",max_file_size_mb:5}),[m,f]=g.useState(""),[y,x]=g.useState(""),p={scope:e,tenant_id:e==="tenant"?t:void 0},h=async()=>{var j,_,N,w;if(!(e==="tenant"&&!t)){f("");try{const[k,S]=await Promise.all([go("/v1/super-admin/branding",p),go("/v1/super-admin/portal-preferences",p)]);(j=k==null?void 0:k.item)!=null&&j.config_json&&c(E=>({...E,...k.item.config_json})),(_=S==null?void 0:S.item)!=null&&_.config_json&&u(E=>({...E,...S.item.config_json}))}catch(k){f(((w=(N=k==null?void 0:k.response)==null?void 0:N.data)==null?void 0:w.detail)||"Failed to load profile settings")}}};g.useEffect(()=>{h()},[e,t]);const v=async j=>{var _,N;j.preventDefault();try{await yf("/v1/super-admin/branding",{scope:e,tenant_id:e==="tenant"?t:void 0,config_json:o}),x("Branding saved")}catch(w){f(((N=(_=w==null?void 0:w.response)==null?void 0:_.data)==null?void 0:N.detail)||"Failed to save branding")}},b=async j=>{var _,N;j.preventDefault();try{await yf("/v1/super-admin/portal-preferences",{scope:e,tenant_id:e==="tenant"?t:void 0,config_json:d}),x("Portal preferences saved")}catch(w){f(((N=(_=w==null?void 0:w.response)==null?void 0:_.data)==null?void 0:N.detail)||"Failed to save portal preferences")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Company Profile"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Branding and portal preferences for global templates or tenant override."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),n.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="branding"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,onClick:()=>l("branding"),children:"Branding"}),n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="portal"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,onClick:()=>l("portal"),children:"Portal Preferences"})]}),m&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:m}),y&&n.jsx("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:y}),i==="branding"?n.jsxs("form",{className:"grid gap-3 rounded-lg border border-slate-200 p-4 lg:grid-cols-2",onSubmit:v,children:[n.jsx("input",{value:o.company_name||"",onChange:j=>c(_=>({..._,company_name:j.target.value})),placeholder:"Company name",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:o.logo_url||"",onChange:j=>c(_=>({..._,logo_url:j.target.value})),placeholder:"Logo URL",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:o.primary_color||"",onChange:j=>c(_=>({..._,primary_color:j.target.value})),placeholder:"Primary color",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:o.secondary_color||"",onChange:j=>c(_=>({..._,secondary_color:j.target.value})),placeholder:"Secondary color",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:o.favicon_url||"",onChange:j=>c(_=>({..._,favicon_url:j.target.value})),placeholder:"Favicon URL",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:o.email_header||"",onChange:j=>c(_=>({..._,email_header:j.target.value})),placeholder:"Email header text",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("button",{className:"col-span-full w-fit rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",type:"submit",children:"Save Branding"})]}):n.jsxs("form",{className:"grid gap-3 rounded-lg border border-slate-200 p-4 lg:grid-cols-2",onSubmit:b,children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!d.candidate_portal_enabled,onChange:j=>u(_=>({..._,candidate_portal_enabled:j.target.checked}))})," Candidate portal enabled"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!d.resume_required,onChange:j=>u(_=>({..._,resume_required:j.target.checked}))})," Resume required"]}),n.jsx("input",{value:d.allowed_file_types||"",onChange:j=>u(_=>({..._,allowed_file_types:j.target.value})),placeholder:"Allowed file types",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:d.max_file_size_mb||"",onChange:j=>u(_=>({..._,max_file_size_mb:Number(j.target.value)||0})),placeholder:"Max file size (MB)",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:d.privacy_policy_url||"",onChange:j=>u(_=>({..._,privacy_policy_url:j.target.value})),placeholder:"Privacy policy URL",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:d.footer_links||"",onChange:j=>u(_=>({..._,footer_links:j.target.value})),placeholder:"Footer links",className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("button",{className:"col-span-full w-fit rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",type:"submit",children:"Save Preferences"})]})]})}const mUe={candidate:["application_received","interview_scheduled","rejected","offer"],notification:["admin_alert","approval_alert","system_alert"]};function fUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState("candidate"),[o,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState(""),[y,x]=g.useState(""),[p,h]=g.useState(""),[v,b]=g.useState(""),j=g.useMemo(()=>({category:i,scope:e,tenant_id:e==="tenant"?t:void 0}),[i,e,t]),_=async()=>{var E,T;if(e==="tenant"&&!t){c([]);return}h("");try{const A=await go("/v1/super-admin/email-templates",j),C=(A==null?void 0:A.items)||[];c(C),!d&&C.length&&u(C[0].id)}catch(A){h(((T=(E=A==null?void 0:A.response)==null?void 0:E.data)==null?void 0:T.detail)||"Failed to load templates"),c([])}};g.useEffect(()=>{u(""),_()},[i,e,t]),g.useEffect(()=>{const E=o.find(T=>T.id===d);E?(f(E.subject||""),x(E.body_html||"")):(f(""),x(""))},[d,o]);const N=async E=>{try{await Ep("/v1/super-admin/email-templates",{scope:e,tenant_id:e==="tenant"?t:void 0,category:i,key:E,subject:`${i} - ${E}`,body_html:`<p>Hello {{candidate_name}},</p><p>${E}</p>`}),_()}catch{h("Failed to create template")}},w=async()=>{if(d)try{await yf(`/v1/super-admin/email-templates/${d}`,{subject:m,body_html:y}),b("Template updated"),_()}catch{h("Failed to update template")}},k=async()=>{try{await uA("/v1/super-admin/email-templates/test-send",{to_email:"test@example.com"}),b("Test email request sent")}catch{h("Test send failed")}},S=new Map((o||[]).map(E=>[E.key,E]));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Email Templates"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Manage candidate and notification email templates with variables."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="candidate"?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>l("candidate"),children:"Candidate Emails"}),n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="notification"?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>l("notification"),children:"Notification Emails"})]}),p&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:p}),v&&n.jsx("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:v}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("h3",{className:"mb-2 text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Templates"}),n.jsx("div",{className:"space-y-2",children:mUe[i].map(E=>{const T=S.get(E);return T?n.jsx("button",{className:`block w-full rounded px-2 py-2 text-left text-sm ${d===T.id?"bg-slate-900 text-white":"bg-slate-100 text-slate-800"}`,onClick:()=>u(T.id),children:E},E):n.jsxs("button",{className:"block w-full rounded border border-dashed border-slate-300 px-2 py-2 text-left text-sm text-slate-600",onClick:()=>N(E),children:["Create ",E]},E)})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4 lg:col-span-3",children:[n.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Subject"}),n.jsx("input",{value:m,onChange:E=>f(E.target.value),className:"mb-3 w-full rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Subject"}),n.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Body HTML"}),n.jsx("textarea",{value:y,onChange:E=>x(E.target.value),className:"min-h-[240px] w-full rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Use variables like {{candidate_name}}, {{job_title}}, {{company_name}}"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx("button",{type:"button",className:"rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",onClick:w,disabled:!d,children:"Save"}),n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-3 py-2 text-sm",onClick:k,children:"Send Test Email"})]})]})]})]})}function hUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState("job"),[o,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState(`role:account_manager
role:client_admin`),[y,x]=g.useState(""),p=async()=>{var b,j;if(e==="tenant"&&!t){c([]);return}try{const _=await go("/v1/super-admin/approval-workflows",{scope:e,tenant_id:e==="tenant"?t:void 0,workflow_type:i});c((_==null?void 0:_.items)||[])}catch(_){x(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to load workflows"),c([])}};g.useEffect(()=>{p()},[e,t,i]);const h=async b=>{b.preventDefault();try{const j=m.split(`
`).map((_,N)=>_.trim()).filter(Boolean).map((_,N)=>{const[w,k]=_.split(":");return{step_order:N+1,approver_type:w||"role",approver_ref:k||_}});await Ep("/v1/super-admin/approval-workflows",{scope:e,tenant_id:e==="tenant"?t:void 0,type:i,name:d,steps:j}),u(""),p()}catch{x("Failed to create workflow")}},v=async b=>{try{await yf(`/v1/super-admin/approval-workflows/${b.id}`,{is_active:!b.is_active}),p()}catch{x("Failed to update workflow")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Approval Workflows"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Configure multi-step job and offer approvals."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="job"?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>l("job"),children:"Job Approval"}),n.jsx("button",{className:`rounded-md px-3 py-1.5 text-sm font-semibold ${i==="offer"?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>l("offer"),children:"Offer Approval"})]}),y&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:y}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[n.jsxs("form",{className:"space-y-3 rounded-lg border border-slate-200 p-4",onSubmit:h,children:[n.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Create Workflow"}),n.jsx("input",{value:d,onChange:b=>u(b.target.value),placeholder:"Workflow name",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("textarea",{value:m,onChange:b=>f(b.target.value),className:"min-h-[140px] w-full rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"role:account_manager"}),n.jsx("button",{className:"rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",type:"submit",children:"Create"})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 p-4 lg:col-span-2",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[n.jsx("th",{className:"px-2 py-2",children:"Name"}),n.jsx("th",{className:"px-2 py-2",children:"Steps"}),n.jsx("th",{className:"px-2 py-2",children:"Status"}),n.jsx("th",{className:"px-2 py-2",children:"Action"})]})}),n.jsx("tbody",{children:o.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-2 py-3 text-slate-500",colSpan:4,children:"No workflows"})}):o.map(b=>n.jsxs("tr",{className:"border-b border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:b.name}),n.jsx("td",{className:"px-2 py-2",children:(b.steps||[]).length}),n.jsx("td",{className:"px-2 py-2",children:b.is_active?"Active":"Inactive"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>v(b),children:b.is_active?"Disable":"Enable"})})]},b.id))})]})})]})]})}const pUe=["linkedin","naukri","indeed","smtp","sendgrid","google_calendar","webhooks"];function xUe(){const{scope:e,tenantId:t,tenants:r,setScope:s,setTenantId:a}=Wf(),[i,l]=g.useState([]),[o,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState(""),y={scope:e,tenant_id:e==="tenant"?t:void 0},x=async()=>{if(e==="tenant"&&!t){l([]);return}try{const h=await go("/v1/super-admin/integrations",y);l((h==null?void 0:h.items)||[])}catch{f("Failed to load integrations")}};g.useEffect(()=>{x()},[e,t]);const p=async(h,v)=>{try{await uA(`/v1/super-admin/integrations/${h}/${v?"connect":"disconnect"}`,y),x(),u(h);const b=await go(`/v1/super-admin/integrations/${h}/logs`,y);c((b==null?void 0:b.items)||[])}catch{f("Integration action failed")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Integrations"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Connect or disconnect platform integrations per scope."})]}),n.jsx(Vf,{scope:e,tenantId:t,tenants:r,onScopeChange:s,onTenantChange:a}),m&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:m}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[n.jsx("div",{className:"space-y-3 lg:col-span-2",children:pUe.map(h=>{const v=i.find(j=>j.provider===h),b=(v==null?void 0:v.status)==="connected";return n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-white px-4 py-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold capitalize text-slate-900",children:h.replace("_"," ")}),n.jsxs("div",{className:"text-xs text-slate-600",children:["Status: ",(v==null?void 0:v.status)||"disconnected"]})]}),n.jsxs("div",{className:"flex gap-2",children:[b?n.jsx("button",{className:"rounded border border-red-300 px-3 py-1.5 text-xs font-semibold text-red-700",onClick:()=>p(h,!1),children:"Disconnect"}):n.jsx("button",{className:"rounded border border-emerald-300 px-3 py-1.5 text-xs font-semibold text-emerald-700",onClick:()=>p(h,!0),children:"Connect"}),n.jsx("button",{className:"rounded border border-slate-300 px-3 py-1.5 text-xs",onClick:async()=>{u(h);const j=await go(`/v1/super-admin/integrations/${h}/logs`,y);c((j==null?void 0:j.items)||[])},children:"Logs"})]})]},h)})}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:d?`${d} Logs`:"Integration Logs"}),n.jsx("div",{className:"mt-3 space-y-2 text-xs text-slate-700",children:o.length===0?n.jsx("p",{className:"text-slate-500",children:"No logs"}):o.map(h=>n.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 p-2",children:[n.jsx("div",{className:"font-semibold",children:h.status}),n.jsx("div",{children:h.message})]},h.id))})]})]})]})}function gUe(){const[e,t]=g.useState([]),[r,s]=g.useState(""),[a]=Os(),i=(a.get("q")||"").trim().toLowerCase(),l=()=>{q.get("/v1/super-admin/clients").then(d=>t(Array.isArray(d.data)?d.data:[])).catch(()=>t([]))};g.useEffect(()=>{l()},[]);const o=g.useMemo(()=>i?e.filter(d=>[d==null?void 0:d.name,d==null?void 0:d.email,d==null?void 0:d.status,d==null?void 0:d.account_manager_id,d==null?void 0:d.active_jobs,d==null?void 0:d.subscription_plan].join(" ").toLowerCase().includes(i)):e,[e,i]),c=async d=>{const m=!(String((d==null?void 0:d.status)||"").toLowerCase()==="active"),f=window.prompt(`${m?"Activate":"Suspend"} client ${d.name||d.email}. Reason (optional):`,"");s(d.id);try{await q.put(`/v1/super-admin/clients/${d.id}/status`,{is_active:m,reason:f||null}),l()}catch{}finally{s("")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Manage organizations using ATS-HR."}),n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Client Name"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Account Manager"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Active Jobs"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Plan"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),n.jsxs("tbody",{children:[o.map(d=>{const u=String(d.status||"").toLowerCase()==="active",m=r===d.id;return n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:d.name||d.email}),n.jsx("td",{className:"px-4 py-3",children:d.status}),n.jsx("td",{className:"px-4 py-3",children:d.account_manager_id||"?"}),n.jsx("td",{className:"px-4 py-3",children:d.active_jobs}),n.jsx("td",{className:"px-4 py-3",children:d.subscription_plan||"Standard"}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{disabled:m,onClick:()=>c(d),className:`rounded-md px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-60 ${u?"bg-red-600":"bg-emerald-600"}`,children:m?"Saving...":u?"Suspend":"Activate"})})]},d.id)}),o.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-6 text-center text-slate-500",colSpan:"6",children:i?"No clients match this search.":"No clients found."})})]})]})})]})}const mF={full_name:"",username:"",email:"",password:""};function yUe(e){if(!e)return"Never logged in";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()}function vUe(){const[e,t]=g.useState([]),[r,s]=g.useState(!1),[a,i]=g.useState(mF),[l,o]=g.useState(""),[c,d]=g.useState(!1),[u]=Os(),m=(u.get("q")||"").trim().toLowerCase(),f=()=>{q.get("/v1/super-admin/admins").then(p=>t(Array.isArray(p.data)?p.data:[])).catch(()=>t([]))};g.useEffect(()=>{f()},[]);const y=g.useMemo(()=>m?e.filter(p=>[p==null?void 0:p.full_name,p==null?void 0:p.email,p==null?void 0:p.role,p==null?void 0:p.scope,p==null?void 0:p.last_login,p==null?void 0:p.status].join(" ").toLowerCase().includes(m)):e,[e,m]),x=async p=>{var h,v;if(p.preventDefault(),o(""),!a.username||!a.email||!a.password){o("Username, email and password are required.");return}d(!0);try{await q.post("/v1/super-admin/admins",{username:a.username.trim(),email:a.email.trim(),password:a.password,role:"admin",full_name:a.full_name.trim()||null}),i(mF),s(!1),f()}catch(b){o(((v=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:v.detail)||"Failed to create admin.")}finally{d(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm text-slate-500",children:"Govern admin users and access scope."}),n.jsx("button",{className:"rounded-md bg-purple-600 px-4 py-2 text-sm text-white",onClick:()=>{o(""),s(p=>!p)},children:r?"Close":"Create Admin"})]}),r&&n.jsxs("form",{onSubmit:x,className:"rounded-lg border border-purple-200 bg-purple-50 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Full Name",value:a.full_name,onChange:p=>i(h=>({...h,full_name:p.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Username *",value:a.username,onChange:p=>i(h=>({...h,username:p.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Email *",type:"email",value:a.email,onChange:p=>i(h=>({...h,email:p.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Password *",type:"password",value:a.password,onChange:p=>i(h=>({...h,password:p.target.value}))})]}),l&&n.jsx("p",{className:"mt-3 text-sm text-red-600",children:l}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"submit",disabled:c,className:"rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:c?"Creating...":"Save Admin"})})]}),n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Admin Name"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Role"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Scope"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Last Login"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),n.jsxs("tbody",{children:[y.map(p=>n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:p.full_name||p.email}),n.jsx("td",{className:"px-4 py-3",children:p.role}),n.jsx("td",{className:"px-4 py-3",children:p.scope}),n.jsx("td",{className:"px-4 py-3",children:yUe(p.last_login)}),n.jsx("td",{className:"px-4 py-3",children:p.status})]},p.id)),y.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-6 text-center text-slate-500",colSpan:"5",children:m?"No admins match this search.":"No admins found."})})]})]})})]})}const fF=new Set(["super_admin","admin","candidate"]),bUe=[25,50,100,500],uw=["create","view","update","delete"],jUe=new Set(["settings","roles_permissions","system_settings","users"]),hF={super_admin:"Full governance access across tenants and policies.",admin:"Operational administration for hiring workflows.",recruiter:"Day-to-day recruitment and candidate management access.",account_manager:"Client and account ownership operations.",candidate:"Self-service candidate portal permissions."},_Ue={candidates:"Candidates",client:"Clients",finance:"Finance",interviews:"Interviews",job_applications:"Job Applications",jobs:"Jobs"},wUe={create:"Add",view:"View",update:"Edit",delete:"Delete"},NUe={create:"",update:"",view:"",delete:""},Cg={search:"",role_name:"",module_name:"",action_name:"",status:"all",date_from:"",date_to:"",sort_by:"created_at",sort_order:"desc"};function Du(e){if(!e)return"-";try{return new Date(e).toLocaleString()}catch{return"-"}}function kUe(e,t,r="text/plain"){const s=new Blob([t],{type:r}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=e,i.click(),URL.revokeObjectURL(a)}function mA(e){return String(e||"").replace(/_/g," ").trim().replace(/\b\w/g,t=>t.toUpperCase())}function Xl(e){if(!e)return"";const t=String(e).trim().toLowerCase();return _Ue[t]||mA(t)}function Yl(e){if(!e)return"";const t=String(e).trim().toLowerCase();return wUe[t]||mA(t)}function SUe(e){const t=String(e||"").trim().toLowerCase();return`${NUe[t]||""} ${Yl(e)}`.trim()}function pF(e){const r=String(e||"").trim().replace(/^[\u2713\u2714]\s*/u,"").replace(/^check\s+/i,"");return mA(r)}function Ag(e){return Ml(Kt(e).toLowerCase(),"Role name",{pattern:/^[a-z0-9_ ]+$/,patternMessage:"Role name can only contain lowercase letters, numbers, spaces, and underscores."})}function CUe(){var Fa,Ls;const[e]=Os(),t=(e.get("q")||"").trim(),[r,s]=g.useState(t),[a,i]=g.useState(""),[l,o]=g.useState(!1),[c,d]=g.useState(!0),[u,m]=g.useState(!1),[f,y]=g.useState(""),[x,p]=g.useState([]),[h,v]=g.useState([]),[b,j]=g.useState({}),[_,N]=g.useState(""),[w,k]=g.useState(""),[S,E]=g.useState(""),[T,A]=g.useState(""),[C,P]=g.useState(null),[O,R]=g.useState(!1),[F,Q]=g.useState({open:!1,role:null,name:""}),[W,L]=g.useState({open:!1,id:"",role_name:"",module_name:"",action_name:""}),[I,K]=g.useState({module_name:"",action_name:""}),[D,Y]=g.useState(""),[re,B]=g.useState({x:0,y:0}),[G,ce]=g.useState(!1),[ae,fe]=g.useState({}),[ne,he]=g.useState(""),[M,Se]=g.useState("grid"),[me,Pe]=g.useState({}),[ue,ye]=g.useState({}),[Ye,lt]=g.useState({module_name:"",actions:{}}),[xe,Ae]=g.useState(new Set),[$e,Me]=g.useState(Cg),[Fe,We]=g.useState(Cg),[Ze,pt]=g.useState([]),[Ve,Je]=g.useState(1),[Ke,gt]=g.useState(25),[At,Lt]=g.useState(0),[Bt,ar]=g.useState(1),[er,Be]=g.useState({roles:[],modules:[],actions:[]}),[xt,mt]=g.useState(""),[It,Yt]=g.useState([]),[Ne,st]=g.useState(null),[qe,ft]=g.useState([]),kt=g.useRef(null),Oe=g.useRef({originX:0,originY:0,startX:0,startY:0}),je=de=>{ft(Le=>[{text:de,at:new Date().toISOString()},...Le].slice(0,12))},Re=async()=>{var z,pe;const[de,Le]=await Promise.all([q.get("/v1/roles"),q.get("/v1/permissions-matrix/roles-summary",{params:{search:""}})]),rt=Array.isArray(de==null?void 0:de.data)?de.data:Array.isArray((z=de==null?void 0:de.data)==null?void 0:z.roles)?de.data.roles:[];j(rt.reduce((De,ze)=>(ze!=null&&ze.name&&(ze==null?void 0:ze.id)!=null&&(De[ze.name]=ze.id),De),{}));const dt=Array.isArray((pe=Le==null?void 0:Le.data)==null?void 0:pe.items)?Le.data.items:[],le=new Map(rt.map(De=>[De.name,De.id])),Xe=dt.map(De=>({...De,id:le.get(De.name)||null}));v(Xe),!w&&Xe.length&&k(Xe[0].name)},oe=async()=>{var Le;const de=await q.get("/v1/permissions-matrix");fe(((Le=de==null?void 0:de.data)==null?void 0:Le.matrix)||{})},Ue=async(de,Le,rt)=>{m(!0);const dt={...de,search:[de.search,r].filter(Boolean).join(" ").trim(),page:Le,limit:rt};try{const le=await q.get("/v1/permissions-matrix/list",{params:dt}),Xe=(le==null?void 0:le.data)||{};pt(Array.isArray(Xe.items)?Xe.items:[]),Lt(Number(Xe.total||0)),ar(Number(Xe.total_pages||1)),Be(Xe.filters||{roles:[],modules:[],actions:[]}),Ae(new Set)}finally{m(!1)}},Ge=async de=>{var rt;if(!de){Yt([]);return}const Le=await q.get("/v1/permissions-matrix/list",{params:{role_name:de,page:1,limit:500,sort_by:"module_name",sort_order:"asc"}});Yt(Array.isArray((rt=Le==null?void 0:Le.data)==null?void 0:rt.items)?Le.data.items:[])};g.useEffect(()=>{d(!0),Promise.all([Re(),oe(),Ue($e,Ve,Ke),Ge(w)]).catch(de=>{var Le,rt;return i(((rt=(Le=de==null?void 0:de.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Failed to load roles & permissions.")}).finally(()=>d(!1))},[]),g.useEffect(()=>{if(!a)return;const de=Date.now().toString();p(rt=>[...rt,{id:de,text:a}].slice(-4));const Le=setTimeout(()=>{p(rt=>rt.filter(dt=>dt.id!==de))},2600);return()=>clearTimeout(Le)},[a]),g.useEffect(()=>{Ue($e,Ve,Ke).catch(de=>{var Le,rt;i(((rt=(Le=de==null?void 0:de.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Failed to load permission records.")})},[$e,Ve,Ke,r]),g.useEffect(()=>{Ge(w).catch(()=>Yt([]))},[w]),g.useMemo(()=>h.find(de=>de.name===w)||null,[h,w]);const ie=g.useMemo(()=>{const de=[_,r].filter(Boolean).join(" ").toLowerCase().trim();return de?h.filter(Le=>Le.name.toLowerCase().includes(de)):h},[h,_,r]),ge=g.useMemo(()=>{const de=Object.entries(ae||{}).map(([rt,dt])=>({moduleName:rt,actions:Object.entries(dt||{}).map(([le,Xe])=>({actionName:le,roleNames:Array.isArray(Xe)?Xe:[]}))})),Le=[ne,r].filter(Boolean).join(" ").toLowerCase().trim();return Le?de.map(rt=>({...rt,actions:rt.actions.filter(dt=>[rt.moduleName,dt.actionName,...dt.roleNames||[]].join(" ").toLowerCase().includes(Le))})).filter(rt=>rt.actions.length>0||rt.moduleName.toLowerCase().includes(Le)):de},[ae,ne,r]),ut=g.useMemo(()=>Array.from(new Set([...Object.keys(ae||{}),...er.modules||[]])).sort(),[ae,er.modules]),Z=g.useMemo(()=>{const de=Ye.module_name,Le=de?Object.keys(ae[de]||{}):[];return Array.from(new Set([...Le,...uw])).sort()},[Ye.module_name,ae]),H=g.useMemo(()=>Array.from(new Set([...er.actions||[],...uw])).sort(),[er.actions]),V=g.useMemo(()=>Ze.filter(de=>xe.has(de.id)),[Ze,xe]),ee=g.useMemo(()=>{const de=It.reduce((Le,rt)=>{const dt=rt.module_name||"unknown";return Le[dt]||(Le[dt]=[]),Le[dt].push(rt),Le},{});return Object.entries(de).sort(([Le],[rt])=>Le.localeCompare(rt))},[It]),X=g.useMemo(()=>C!=null&&C.name?It.filter(de=>de.role_name===C.name):[],[It,C]),te=g.useMemo(()=>{const de=X.reduce((Le,rt)=>{const dt=rt.module_name||"unknown";return Le[dt]||(Le[dt]=[]),Le[dt].push(rt),Le},{});return Object.entries(de).map(([Le,rt])=>({moduleName:Le,items:[...rt].sort((dt,le)=>(dt.action_name||"").localeCompare(le.action_name||""))})).sort((Le,rt)=>Le.moduleName.localeCompare(rt.moduleName))},[X]),ke=g.useMemo(()=>{const de=C==null?void 0:C.name,Le=[];de&&ge.forEach(Xe=>{Xe.actions.some(pe=>(pe.roleNames||[]).includes(de))&&Le.push(Xe.moduleName)});const rt=Array.from(new Set([...ut||[],...ge.map(Xe=>Xe.moduleName)])),dt=Array.from(new Set(Le)).sort(),le=rt.filter(Xe=>!dt.includes(Xe)).sort();return[...dt,...le]},[C,ge,ut]),ve=g.useMemo(()=>{const de=(I.module_name||"").trim().toLowerCase();if(!de)return[];const Le=ge.find(dt=>String(dt.moduleName||"").trim().toLowerCase()===de),rt=Le?Le.actions.map(dt=>dt.actionName):[];return rt.length>0?Array.from(new Set(rt)).sort():[...uw]},[I.module_name,ge]);g.useMemo(()=>ee.map(([de,Le])=>({moduleName:de,actions:Array.from(new Set(Le.map(rt=>rt.action_name))).sort()})).sort((de,Le)=>de.moduleName.localeCompare(Le.moduleName)),[ee]),g.useMemo(()=>ge.map(de=>{const Le={};return de.actions.forEach(rt=>{Le[rt.actionName]=rt.roleNames||[]}),{moduleName:de.moduleName,canCreate:(Le.create||[]).includes(w),canView:(Le.view||[]).includes(w),canUpdate:(Le.update||[]).includes(w),canDelete:(Le.delete||[]).includes(w)}}),[ge,w]);const J=g.useMemo(()=>{const de=(h||[]).map(rt=>rt.name).filter(Boolean),Le=new Set;return ge.forEach(rt=>{rt.actions.forEach(dt=>{(dt.roleNames||[]).forEach(le=>Le.add(le))})}),Array.from(new Set([...de,...Array.from(Le)])).sort((rt,dt)=>rt.localeCompare(dt))},[h,ge]),be=g.useMemo(()=>ge.map(de=>{const Le={};return J.forEach(rt=>{Le[rt]=[]}),de.actions.forEach(rt=>{(rt.roleNames||[]).forEach(dt=>{Le[dt]||(Le[dt]=[]),Le[dt].push(rt.actionName)})}),Object.keys(Le).forEach(rt=>{Le[rt]=Array.from(new Set(Le[rt])).sort()}),{moduleName:de.moduleName,roleActionMap:Le}}),[ge,J]);Z.every(de=>!!Ye.actions[de]);const we=async()=>{var le,Xe;const de=window.prompt("Create role: enter role name"),Le=Kt(de).toLowerCase(),rt=Ag(Le);if(rt){i(rt);return}if((h||[]).some(z=>Kt(z==null?void 0:z.name).toLowerCase()===Le)){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}o(!0),i("");try{await q.post("/v1/roles",{name:Le,description:""}),k(Le),je(`Created role '${Le}'`),await Re()}catch(z){i(((Xe=(le=z==null?void 0:z.response)==null?void 0:le.data)==null?void 0:Xe.detail)||"Failed to create role.")}finally{o(!1)}},Ie=async(de,Le)=>{let rt=1,dt=1;for(;rt<=dt;){const le=await q.get("/v1/permissions-matrix/list",{params:{role_name:de,page:rt,limit:500,sort_by:"created_at",sort_order:"asc"}}),Xe=(le==null?void 0:le.data)||{},z=Array.isArray(Xe.items)?Xe.items:[];dt=Number(Xe.total_pages||1);for(const pe of z)try{await q.post("/v1/permissions-matrix",{role_name:Le,module_name:pe.module_name,action_name:pe.action_name})}catch{}rt+=1}},He=async(de,Le)=>{var le,Xe;if(!de)return;E("");const rt=(de==null?void 0:de.id)??(b==null?void 0:b[de==null?void 0:de.name]),dt={...de,id:rt};if(!dt.id&&(Le==="edit"||Le==="archive"||Le==="delete")){i("Role action unavailable: role id not found.");return}o(!0),i("");try{if(Le==="edit"){const z=Kt(window.prompt("Rename role",dt.name)).toLowerCase(),pe=Ag(z);if(pe){i(pe);return}if((h||[]).some(ze=>Kt(ze==null?void 0:ze.name).toLowerCase()===z&&Kt(ze==null?void 0:ze.name).toLowerCase()!==Kt(dt.name).toLowerCase())){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}if(!z||z===dt.name)return;await q.put(`/v1/roles/${dt.id}`,{name:z,description:""}),k(z),je(`Renamed role '${dt.name}' -> '${z}'`)}if(Le==="duplicate"){const z=Kt(window.prompt("Duplicate role as",`${dt.name}_copy`)).toLowerCase(),pe=Ag(z);if(pe){i(pe);return}if((h||[]).some(ze=>Kt(ze==null?void 0:ze.name).toLowerCase()===z)){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}await q.post("/v1/roles",{name:z,description:""}),await Ie(dt.name,z),k(z),je(`Duplicated role '${dt.name}' into '${z}'`)}if(Le==="archive"){const z=`${dt.name}_archived_${Date.now().toString().slice(-6)}`;await q.put(`/v1/roles/${dt.id}`,{name:z,description:""}),k(z),je(`Archived role '${dt.name}'`)}if(Le==="delete"){if(fF.has(dt.name)){i("Reserved role cannot be deleted.");return}if(!window.confirm(`Delete role '${dt.name}'? This cannot be undone.`))return;await q.delete(`/v1/roles/${dt.id}`),k(""),je(`Deleted role '${dt.name}'`)}await Promise.all([Re(),oe(),Ue($e,Ve,Ke)])}catch(z){i(((Xe=(le=z==null?void 0:z.response)==null?void 0:le.data)==null?void 0:Xe.detail)||"Role action failed.")}finally{o(!1)}},nt=de=>{k(de),A(Le=>Le===de?"":de)},tt=de=>{k(de.name),A(""),B({x:0,y:0}),K({module_name:"",action_name:""}),Y(""),P(de),Ge(de.name).catch(()=>{})},_e=de=>{A(""),Q({open:!0,role:de,name:(de==null?void 0:de.name)||""})},Qe=async()=>{var Xe,z;const de=F.role;if(!de)return;const Le=Kt(F.name).toLowerCase(),rt=Ag(Le);if(rt){i(rt);return}if((h||[]).some(pe=>Kt(pe==null?void 0:pe.name).toLowerCase()===Le&&Kt(pe==null?void 0:pe.name).toLowerCase()!==Kt(de.name).toLowerCase())){i("Duplicate Feature name under the same Sub-Category is not allowed.");return}if(Le===de.name){Q({open:!1,role:null,name:""});return}const le=(de==null?void 0:de.id)??(b==null?void 0:b[de==null?void 0:de.name]);if(!le){i("Cannot edit role: role id not found.");return}o(!0),i("");try{await q.put(`/v1/roles/${le}`,{name:Le,description:""}),k(Le),Q({open:!1,role:null,name:""}),je(`Renamed role '${de.name}' -> '${Le}'`),await Promise.all([Re(),oe(),Ue($e,Ve,Ke)])}catch(pe){i(((z=(Xe=pe==null?void 0:pe.response)==null?void 0:Xe.data)==null?void 0:z.detail)||"Failed to edit role.")}finally{o(!1)}},U=de=>{L({open:!0,id:(de==null?void 0:de.id)||"",role_name:(de==null?void 0:de.role_name)||w||"",module_name:(de==null?void 0:de.module_name)||"",action_name:(de==null?void 0:de.action_name)||""})},se=async()=>{var rt,dt;if(!(C!=null&&C.name))return;const de=(I.module_name||"").trim().toLowerCase().replace(/\s+/g,"_"),Le=(I.action_name||"").trim().toLowerCase().replace(/\s+/g,"_");if(!de||!Le){Y("Module and action are required.");return}o(!0),i(""),Y("");try{await q.post("/v1/permissions-matrix",{role_name:C.name,module_name:de,action_name:Le}),K({module_name:"",action_name:""}),je(`Created permission '${C.name} | ${de} | ${Le}'`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge(C.name),Re()])}catch(le){const Xe=((dt=(rt=le==null?void 0:le.response)==null?void 0:rt.data)==null?void 0:dt.detail)||"Failed to create permission.";Y(Xe),i(Xe)}finally{o(!1)}},at=async de=>{var rt,dt;if(!(!(de!=null&&de.id)||!window.confirm(`Are you sure you want to delete '${de.module_name} | ${de.action_name}'?`))){o(!0),i("");try{await q.delete(`/v1/permissions-matrix/${de.id}`),je(`Removed permission '${de.id}'`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge((C==null?void 0:C.name)||w),Re()])}catch(le){i(((dt=(rt=le==null?void 0:le.response)==null?void 0:rt.data)==null?void 0:dt.detail)||"Failed to remove permission.")}finally{o(!1)}}},ct=async()=>{var Le,rt;if(!W.id)return;const de={role_name:(W.role_name||"").trim(),module_name:(W.module_name||"").trim(),action_name:(W.action_name||"").trim()};if(!de.role_name||!de.module_name||!de.action_name){i("Role, module and action are required.");return}o(!0),i("");try{await q.put(`/v1/permissions-matrix/${W.id}`,de),L({open:!1,id:"",role_name:"",module_name:"",action_name:""}),je(`Edited permission '${de.role_name} | ${de.module_name} | ${de.action_name}'`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge((C==null?void 0:C.name)||w),Re()])}catch(dt){i(((rt=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Failed to edit permission.")}finally{o(!1)}},Te=de=>{de.preventDefault(),Oe.current={originX:re.x,originY:re.y,startX:de.clientX,startY:de.clientY},ce(!0)};g.useEffect(()=>{if(!G)return;const de=rt=>{const dt=rt.clientX-Oe.current.startX,le=rt.clientY-Oe.current.startY;B({x:Oe.current.originX+dt,y:Oe.current.originY+le})},Le=()=>ce(!1);return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Le),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Le)}},[G]);const Vt=()=>{Je(1),Me({...Fe})},bt=()=>{We(Cg),Me(Cg),Je(1)},$t=de=>{if(de){Ae(new Set(Ze.map(Le=>Le.id)));return}Ae(new Set)},Mt=(de,Le)=>{Ae(rt=>{const dt=new Set(rt);return Le?dt.add(de):dt.delete(de),dt})},br=async()=>{var Le,rt;if(!(!V.length||!window.confirm(`Remove ${V.length} permission record(s)?`))){o(!0),i("");try{await q.post("/v1/permissions-matrix/bulk-delete",{ids:V.map(dt=>dt.id)}),je(`Bulk removed ${V.length} permission(s)`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge(w),Re()])}catch(dt){i(((rt=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Bulk remove failed.")}finally{o(!1)}}},Pr=async de=>{var Le,rt;if(V.length){o(!0),i("");try{await q.post("/v1/permissions-matrix/bulk-lock",{ids:V.map(dt=>dt.id),lock:de}),je(`${de?"Locked":"Unlocked"} ${V.length} permission(s)`),await Ue($e,Ve,Ke)}catch(dt){i(((rt=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Bulk lock action failed.")}finally{o(!1)}}},Rs=async()=>{var Le,rt;if(!V.length)return;const de=(window.prompt("Bulk edit action name (e.g., view/update/delete)")||"").trim();if(de){o(!0),i("");try{for(const dt of V)await q.put(`/v1/permissions-matrix/${dt.id}`,{role_name:dt.role_name,module_name:dt.module_name,action_name:de});je(`Bulk edited ${V.length} permission(s) to action '${de}'`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge(w)])}catch(dt){i(((rt=(Le=dt==null?void 0:dt.response)==null?void 0:Le.data)==null?void 0:rt.detail)||"Bulk edit failed.")}finally{o(!1)}}},jt=async()=>{var de,Le;o(!0),i("");try{const rt={...$e,search:[$e.search,r].filter(Boolean).join(" ").trim()},dt=await q.get("/v1/permissions-matrix/export",{params:rt,responseType:"blob"}),le=URL.createObjectURL(dt.data),Xe=document.createElement("a");Xe.href=le,Xe.download="permissions_export.csv",Xe.click(),URL.revokeObjectURL(le),je("Exported filtered permission records")}catch(rt){i(((Le=(de=rt==null?void 0:rt.response)==null?void 0:de.data)==null?void 0:Le.detail)||"Export failed.")}finally{o(!1)}},gn=()=>{if(!V.length)return;const de=["id,role_name,module_name,action_name,status,last_updated"];V.forEach(Le=>{de.push([Le.id,Le.role_name,Le.module_name,Le.action_name,Le.status,Le.updated_at].map(rt=>`"${String(rt??"").replaceAll('"','""')}"`).join(","))}),kUe("permissions_selected.csv",de.join(`
`),"text/csv"),je(`Exported ${V.length} selected permission(s)`)},js=async(de,Le)=>{var rt,dt;if(mt(""),Le==="history"){try{const le=await q.get(`/v1/permissions-matrix/history/${de.id}`);st((le==null?void 0:le.data)||null)}catch{st({permission_id:de.id,events:[]})}return}o(!0),i("");try{if(Le==="edit"){const le=(window.prompt("Role",de.role_name)||"").trim(),Xe=(window.prompt("Module",de.module_name)||"").trim(),z=(window.prompt("Action",de.action_name)||"").trim();if(!le||!Xe||!z)return;await q.put(`/v1/permissions-matrix/${de.id}`,{role_name:le,module_name:Xe,action_name:z}),je(`Edited permission '${de.id}'`)}if(Le==="remove"){if(!window.confirm("Remove this permission?"))return;await q.delete(`/v1/permissions-matrix/${de.id}`),je(`Removed permission '${de.id}'`)}if(Le==="clone"){const le=(window.prompt("Clone to role",de.role_name)||"").trim();if(!le)return;await q.post("/v1/permissions-matrix",{role_name:le,module_name:de.module_name,action_name:de.action_name}),je(`Cloned permission '${de.id}' to role '${le}'`)}await Promise.all([Ue($e,Ve,Ke),oe(),Ge(w),Re()])}catch(le){i(((dt=(rt=le==null?void 0:le.response)==null?void 0:rt.data)==null?void 0:dt.detail)||"Permission action failed.")}finally{o(!1)}},va=async de=>{var pe,De,ze;const Le=(pe=de.target.files)==null?void 0:pe[0];if(!Le)return;const dt=(await Le.text()).split(/\r?\n/).map(yt=>yt.trim()).filter(Boolean);if(dt.length<=1){i("CSV has no permission rows.");return}const le=dt[0].toLowerCase(),z=le.includes("role")&&le.includes("module")&&le.includes("action")?dt.slice(1):dt;o(!0),i("");try{let yt=0;for(const Ft of z){const tr=Ft.split(",").map(vn=>vn.trim().replace(/^"|"$/g,"")),Xt=tr[0],Ut=tr[1],_r=tr[2];if(!(!Xt||!Ut||!_r))try{await q.post("/v1/permissions-matrix",{role_name:Xt,module_name:Ut,action_name:_r}),yt+=1}catch{}}je(`Imported ${yt} permission(s) from CSV`),i(`Import completed. Added ${yt} permission(s).`),await Promise.all([Ue($e,Ve,Ke),oe(),Ge(w),Re()])}catch(yt){i(((ze=(De=yt==null?void 0:yt.response)==null?void 0:De.data)==null?void 0:ze.detail)||"Import failed.")}finally{o(!1),de.target.value=""}},yn=Ze.length>0&&Ze.every(de=>xe.has(de.id)),Br="w-full rounded-xl border border-slate-200 bg-slate-50/70 py-2.5 pl-10 pr-10 text-sm text-slate-800 shadow-sm outline-none transition focus:border-violet-400 focus:bg-white focus:ring-4 focus:ring-violet-100";return n.jsxs("div",{className:"space-y-4 bg-slate-50/60 p-1",children:[n.jsx("div",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:n.jsxs("div",{className:"flex flex-col gap-3 xl:flex-row xl:items-end xl:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Roles & Permissions"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Manage role access and system security"})]}),n.jsxs("div",{className:"flex w-full flex-col gap-2 xl:w-auto xl:min-w-[560px]",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Es,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:r,onChange:de=>s(de.target.value),placeholder:"Search roles, modules, permissions",className:Br,"aria-label":"Global search"}),r&&n.jsx("button",{type:"button",onClick:()=>s(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear global search",children:n.jsx(Ar,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{Se("grid"),R(!0)},className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50",children:[n.jsx(qR,{className:"h-4 w-4"}),"System Access Overview"]}),n.jsxs("button",{type:"button",onClick:we,disabled:l,className:"inline-flex items-center gap-2 rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-violet-700 disabled:opacity-60",children:[n.jsx(Ya,{className:"h-4 w-4"}),"Create Role"]}),n.jsxs("button",{type:"button",onClick:jt,disabled:l,className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 disabled:opacity-60",children:[n.jsx(up,{className:"h-4 w-4"}),"Export"]}),n.jsxs("button",{type:"button",onClick:()=>{var de;return(de=kt.current)==null?void 0:de.click()},disabled:l,className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 disabled:opacity-60",children:[n.jsx(aAe,{className:"h-4 w-4"}),"Import Permissions"]}),n.jsx("input",{ref:kt,type:"file",accept:".csv,text/csv",className:"hidden",onChange:va})]})]})]})}),n.jsx("div",{className:"fixed right-6 top-6 z-50 space-y-2",children:x.map(de=>n.jsx("div",{className:"rounded-lg bg-slate-900/95 px-3 py-2 text-sm text-white shadow-lg transition-all",children:de.text},de.id))}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Role Management"}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700",children:ie.length})]}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Es,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:_,onChange:de=>N(de.target.value),placeholder:"Search role",className:Br}),_&&n.jsx("button",{type:"button",onClick:()=>N(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear role search",children:n.jsx(Ar,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"max-h-[640px] space-y-2 overflow-auto pr-1",children:[c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"}),n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"}),n.jsx("div",{className:"h-20 animate-pulse rounded-lg bg-slate-100"})]}),!c&&ie.map(de=>{const Le=de.name===w,rt=fF.has(de.name),dt=String(de.name||"").includes("_archived_");return n.jsxs("div",{title:hF[de.name]||"Custom role",className:`relative rounded-lg p-3 shadow-sm ring-1 transition hover:-translate-y-0.5 hover:shadow ${Le?"bg-violet-50 ring-violet-300":"bg-white ring-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>nt(de.name),className:"flex-1 text-left",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qR,{className:`h-4 w-4 ${rt?"text-amber-600":"text-violet-600"}`}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:de.name}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:de.permissions_count||0}),n.jsx("span",{className:`rounded-full px-2 py-0.5 text-[10px] font-semibold ${dt?"bg-slate-100 text-slate-600 ring-1 ring-slate-200":"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"}`,children:dt?"archived":"active"})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Modified: ",Du(de.last_modified)]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>E(le=>le===de.name?"":de.name),className:"rounded-md border border-slate-200 p-1 text-slate-600","aria-label":`Actions for ${de.name}`,children:n.jsx(zR,{className:"h-4 w-4"})}),S===de.name&&n.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-36 rounded-md border border-slate-200 bg-white p-1 shadow-lg",children:[n.jsx("button",{type:"button",onClick:()=>He(de,"edit"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>He(de,"duplicate"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Duplicate"}),n.jsx("button",{type:"button",onClick:()=>He(de,"archive"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Archive"}),n.jsx("button",{type:"button",onClick:()=>He(de,"delete"),className:"w-full rounded px-2 py-1 text-left text-xs text-red-700 hover:bg-red-50",children:"Delete"})]})]})]}),T===de.name&&n.jsxs("div",{className:"mt-3 rounded-xl bg-gradient-to-br from-violet-50 via-white to-slate-50 p-3 shadow-lg ring-1 ring-violet-200 transition-all duration-200",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Quick Actions"}),n.jsx("button",{type:"button",onClick:()=>A(""),className:"rounded-md px-2 py-0.5 text-xs font-semibold text-slate-600 hover:bg-slate-100",children:"Close"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:hF[de.name]||"Custom role with configurable access."}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Permissions: ",de.permissions_count||0," | Updated: ",Du(de.last_modified)]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>tt(de),className:"rounded-md bg-violet-600 px-2 py-1 text-xs font-semibold text-white hover:bg-violet-700",children:"View Details"}),n.jsx("button",{type:"button",onClick:()=>_e(de),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>He(de,"duplicate"),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Duplicate"}),n.jsx("button",{type:"button",onClick:()=>He(de,"archive"),className:"rounded-md bg-white px-2 py-1 text-xs font-semibold text-slate-700 ring-1 ring-slate-200 hover:bg-slate-50",children:"Archive"}),n.jsx("button",{type:"button",onClick:()=>He(de,"delete"),className:"rounded-md bg-red-50 px-2 py-1 text-xs font-semibold text-red-700 ring-1 ring-red-200 hover:bg-red-100",children:"Delete"})]})]})]},de.name)})]})]}),n.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Permission Table"}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700",children:At})]}),n.jsxs("div",{className:"rounded-lg p-3 ring-1 ring-slate-200",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-3",children:[n.jsxs("div",{className:"relative xl:col-span-2",children:[n.jsx(Es,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:Fe.search,onChange:de=>We(Le=>({...Le,search:de.target.value})),placeholder:"Search module, role, action",className:Br}),Fe.search&&n.jsx("button",{type:"button",onClick:()=>We(de=>({...de,search:""})),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear permission table search",children:n.jsx(Ar,{className:"h-4 w-4"})})]}),n.jsxs("select",{value:Fe.role_name,onChange:de=>We(Le=>({...Le,role_name:de.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All roles"}),(er.roles||[]).map(de=>n.jsx("option",{value:de,children:de},de))]}),n.jsxs("select",{value:Fe.module_name,onChange:de=>We(Le=>({...Le,module_name:de.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All modules"}),(er.modules||[]).map(de=>n.jsx("option",{value:de,children:Xl(de)},de))]}),n.jsxs("select",{value:Fe.action_name,onChange:de=>We(Le=>({...Le,action_name:de.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All actions"}),(er.actions||[]).map(de=>n.jsx("option",{value:de,children:Yl(de)},de))]}),n.jsx("input",{type:"datetime-local",value:Fe.date_from,onChange:de=>We(Le=>({...Le,date_from:de.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{type:"datetime-local",value:Fe.date_to,onChange:de=>We(Le=>({...Le,date_to:de.target.value})),className:"rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsxs("select",{value:`${Fe.sort_by}:${Fe.sort_order}`,onChange:de=>{const[Le,rt]=de.target.value.split(":");We(dt=>({...dt,sort_by:Le,sort_order:rt}))},className:"rounded-md border border-slate-200 px-3 py-2 text-sm",children:[n.jsx("option",{value:"created_at:desc",children:"Newest first"}),n.jsx("option",{value:"created_at:asc",children:"Oldest first"}),n.jsx("option",{value:"role_name:asc",children:"Role A-Z"}),n.jsx("option",{value:"module_name:asc",children:"Module A-Z"}),n.jsx("option",{value:"action_name:asc",children:"Action A-Z"})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:bt,className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:"Reset Filters"}),n.jsxs("button",{type:"button",onClick:Vt,className:"inline-flex items-center gap-2 rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-violet-700",children:[n.jsx(W1,{className:"h-4 w-4"}),"Apply Filters"]})]})]}),V.length>0&&n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded-md border border-indigo-200 bg-indigo-50 p-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-indigo-900",children:[V.length," selected"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:Rs,disabled:l,className:"rounded bg-white px-2 py-1 text-xs font-semibold text-slate-700 disabled:opacity-60",children:"Bulk Edit"}),n.jsxs("button",{type:"button",onClick:br,disabled:l,className:"inline-flex items-center gap-1 rounded bg-red-100 px-2 py-1 text-xs font-semibold text-red-700 disabled:opacity-60",children:[n.jsx(ff,{className:"h-3 w-3"}),"Bulk Remove"]}),n.jsx("button",{type:"button",onClick:gn,className:"rounded bg-white px-2 py-1 text-xs font-semibold text-slate-700",children:"Export Selected"}),n.jsxs("button",{type:"button",onClick:()=>Pr(!0),disabled:l,className:"inline-flex items-center gap-1 rounded bg-amber-100 px-2 py-1 text-xs font-semibold text-amber-700 disabled:opacity-60",children:[n.jsx(VR,{className:"h-3 w-3"}),"Lock Permissions"]}),n.jsxs("button",{type:"button",onClick:()=>Pr(!1),disabled:l,className:"inline-flex items-center gap-1 rounded bg-emerald-100 px-2 py-1 text-xs font-semibold text-emerald-700 disabled:opacity-60",children:[n.jsx(xAe,{className:"h-3 w-3"}),"Unlock"]})]})]}),n.jsx("div",{className:"mt-3 max-h-[520px] overflow-x-auto overflow-y-auto rounded-lg ring-1 ring-slate-200",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-100 text-xs uppercase tracking-wide text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:yn,onChange:de=>$t(de.target.checked)})}),n.jsx("th",{className:"px-3 py-2",children:"Role"}),n.jsx("th",{className:"px-3 py-2",children:"Module"}),n.jsx("th",{className:"px-3 py-2",children:"Action"}),n.jsx("th",{className:"px-3 py-2",children:"Assigned By"}),n.jsx("th",{className:"px-3 py-2",children:"Last Updated"}),n.jsx("th",{className:"px-3 py-2",children:"Status"}),n.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),n.jsxs("tbody",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})}),n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})}),n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsx("div",{className:"h-8 animate-pulse rounded bg-slate-100"})})})]}),!u&&Ze.map((de,Le)=>n.jsxs("tr",{className:`border-t border-slate-200 text-slate-800 transition hover:bg-violet-50 ${Le%2?"bg-white":"bg-slate-50/60"}`,children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:xe.has(de.id),onChange:rt=>Mt(de.id,rt.target.checked)})}),n.jsx("td",{className:"px-3 py-2 font-medium",children:de.role_name}),n.jsx("td",{className:"px-3 py-2",children:Xl(de.module_name)}),n.jsx("td",{className:"px-3 py-2",children:Yl(de.action_name)}),n.jsx("td",{className:"px-3 py-2",children:de.assigned_by||"system"}),n.jsx("td",{className:"px-3 py-2",children:Du(de.updated_at||de.created_at)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold ${de.status==="locked"?"bg-amber-50 text-amber-700 ring-1 ring-amber-200":"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"}`,children:de.status||"active"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>mt(rt=>rt===de.id?"":de.id),className:"rounded-md border border-slate-200 p-1 text-slate-600","aria-label":`Actions for permission ${de.id}`,children:n.jsx(zR,{className:"h-4 w-4"})}),xt===de.id&&n.jsxs("div",{className:"absolute right-0 z-30 mt-1 w-40 rounded-md border border-slate-200 bg-white p-1 shadow-lg",children:[n.jsx("button",{type:"button",onClick:()=>js(de,"edit"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Edit permission"}),n.jsx("button",{type:"button",onClick:()=>js(de,"remove"),className:"w-full rounded px-2 py-1 text-left text-xs text-red-700 hover:bg-red-50",children:"Remove permission"}),n.jsx("button",{type:"button",onClick:()=>js(de,"history"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"View audit history"}),n.jsx("button",{type:"button",onClick:()=>js(de,"clone"),className:"w-full rounded px-2 py-1 text-left text-xs hover:bg-slate-100",children:"Clone permission"})]})]})})]},de.id)),!u&&Ze.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-3 py-8 text-center text-sm text-slate-500",children:"No permission records found."})})]})]})}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-xs text-slate-600",children:["Showing ",(Ve-1)*Ke+1,"-",Math.min(Ve*Ke,At)," of ",At]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs text-slate-600",children:"Page size"}),n.jsx("select",{value:Ke,onChange:de=>{gt(Number(de.target.value)),Je(1)},className:"rounded border border-slate-300 px-2 py-1 text-sm",children:bUe.map(de=>n.jsx("option",{value:de,children:de},de))}),n.jsx("button",{type:"button",onClick:()=>Je(de=>Math.max(1,de-1)),disabled:Ve<=1,className:"rounded border border-slate-300 px-2 py-1 text-sm disabled:opacity-40",children:"Prev"}),n.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",Ve," / ",Bt]}),n.jsx("button",{type:"button",onClick:()=>Je(de=>Math.min(Bt,de+1)),disabled:Ve>=Bt,className:"rounded border border-slate-300 px-2 py-1 text-sm disabled:opacity-40",children:"Next"})]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 p-3",children:[n.jsx("p",{className:"mb-2 text-xs font-semibold uppercase text-slate-500",children:"Audit Log"}),n.jsxs("div",{className:"max-h-36 space-y-1 overflow-auto",children:[qe.map((de,Le)=>n.jsxs("p",{className:"text-xs text-slate-600",children:[Du(de.at)," - ",de.text]},`${de.at}-${Le}`)),qe.length===0&&n.jsx("p",{className:"text-xs text-slate-500",children:"No recent activity."})]})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 p-3",children:[n.jsx("p",{className:"mb-2 text-xs font-semibold uppercase text-slate-500",children:"Permission History"}),!Ne&&n.jsx("p",{className:"text-xs text-slate-500",children:"Select a row action: View audit history."}),Ne&&n.jsxs("div",{className:"max-h-36 space-y-1 overflow-auto",children:[(Ne.events||[]).map((de,Le)=>n.jsxs("p",{className:"text-xs text-slate-600",children:[Du(de.at)," - ",de.event," by ",de.by]},`${de.at}-${Le}`)),(!Ne.events||Ne.events.length===0)&&n.jsx("p",{className:"text-xs text-slate-500",children:"No audit events found."})]})]})]})]})]}),O&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-6",children:n.jsxs("div",{className:"flex h-[88vh] w-full max-w-6xl flex-col rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4 flex items-start justify-between rounded-lg bg-slate-50 px-3 py-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"System Access"}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Role Permission Matrix"}),n.jsx("p",{className:"text-sm text-slate-600",children:"System-wide RBAC configuration."})]}),n.jsx("button",{type:"button",onClick:()=>R(!1),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Close"})]}),n.jsxs("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto pr-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Se("list"),className:`rounded px-3 py-1.5 text-sm ${M==="list"?"bg-violet-600 text-white":"bg-slate-100 text-slate-700"}`,children:"List"}),n.jsx("button",{type:"button",onClick:()=>Se("grid"),className:`rounded px-3 py-1.5 text-sm ${M==="grid"?"bg-violet-600 text-white":"bg-slate-100 text-slate-700"}`,children:"Grid"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const de={};ge.forEach(Le=>{de[Le.moduleName]=!0}),Pe(de)},className:"rounded bg-slate-100 px-3 py-1.5 text-sm text-slate-700",children:"Collapse All"}),n.jsx("button",{type:"button",onClick:()=>Pe({}),className:"rounded bg-slate-100 px-3 py-1.5 text-sm text-slate-700",children:"Expand All"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Es,{className:"pointer-events-none absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx("input",{value:ne,onChange:de=>he(de.target.value),placeholder:"Search inside matrix",className:Br}),ne&&n.jsx("button",{type:"button",onClick:()=>he(""),className:"absolute right-2 top-2 rounded-md p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Clear matrix search",children:n.jsx(Ar,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[M==="list"&&ge.map(de=>{const Le=!!me[de.moduleName];return n.jsxs("div",{className:"rounded border border-slate-200 p-2",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(rt=>({...rt,[de.moduleName]:!rt[de.moduleName]})),className:"flex w-full items-center justify-between text-left",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 text-sm font-semibold text-slate-800",children:[jUe.has(de.moduleName)&&n.jsx(VR,{className:"h-3.5 w-3.5 text-amber-600"}),Xl(de.moduleName)]}),Le?n.jsx(U1,{className:"h-4 w-4"}):n.jsx(fo,{className:"h-4 w-4"})]}),!Le&&n.jsx("div",{className:"mt-2 space-y-1",children:de.actions.map(rt=>n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("span",{className:"font-semibold text-slate-700",children:Yl(rt.actionName)})," : ",rt.roleNames.length?rt.roleNames.map(pF).join(", "):"No role"]},`${de.moduleName}-${rt.actionName}`))})]},de.moduleName)}),M==="grid"&&n.jsx("div",{className:"overflow-auto rounded-md ring-1 ring-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-100 text-slate-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"sticky left-0 z-10 min-w-[200px] bg-slate-100 px-3 py-2 text-left font-semibold",children:"Module"}),J.map(de=>n.jsx("th",{className:"min-w-[140px] px-3 py-2 text-left font-semibold",children:pF(de)},`col-${de}`))]})}),n.jsx("tbody",{children:be.map((de,Le)=>n.jsxs("tr",{className:Le%2?"bg-white":"bg-slate-50",children:[n.jsx("td",{className:"sticky left-0 z-10 bg-inherit px-3 py-2 font-semibold text-slate-800",children:Xl(de.moduleName)}),J.map(rt=>{const dt=de.roleActionMap[rt]||[];return n.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:dt.length?dt.map(Yl).join(", "):n.jsx("span",{className:"text-slate-300",children:"-"})},`${de.moduleName}-${rt}`)})]},de.moduleName))})]})})]})]})]})})}),C&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto overscroll-contain bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-6",children:n.jsxs("div",{style:{transform:`translate(${re.x}px, ${re.y}px)`},className:"flex h-[88vh] w-full max-w-5xl flex-col rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200 transition-transform",children:[n.jsxs("div",{onMouseDown:Te,className:"mb-4 flex cursor-move items-start justify-between rounded-lg bg-slate-50 px-2 py-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Role Details"}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:C.name}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Permissions: ",C.permissions_count||0," | Last modified: ",Du(C.last_modified)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>B({x:0,y:0}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Reset Position"}),n.jsx("button",{type:"button",onClick:()=>P(null),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Close"})]})]}),n.jsxs("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto overscroll-contain pr-1",onWheel:de=>de.stopPropagation(),children:[n.jsxs("div",{className:"rounded-lg bg-slate-50 p-3 ring-1 ring-slate-200",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Create Permission"}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-[1fr_1fr_auto]",children:[n.jsx("input",{value:I.module_name,onChange:de=>K(Le=>({...Le,module_name:de.target.value,action_name:""})),list:"details-module-options",placeholder:"Module",className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm"}),n.jsx("input",{value:I.action_name,onChange:de=>K(Le=>({...Le,action_name:de.target.value})),list:ve.length>0?"details-action-options":"action-options",placeholder:(Fa=I.module_name)!=null&&Fa.trim()?"Action":"Select module first",disabled:!((Ls=I.module_name)!=null&&Ls.trim()),className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm"}),n.jsx("button",{type:"button",onClick:se,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Create"})]}),D&&n.jsx("p",{className:"mt-2 text-xs font-semibold text-red-600",children:D}),n.jsx("datalist",{id:"details-module-options",children:(ke.length?ke:ut).map(de=>n.jsx("option",{value:de},`details-module-${de}`))}),n.jsx("datalist",{id:"details-action-options",children:ve.map(de=>n.jsx("option",{value:de},`details-action-${de}`))})]}),n.jsxs("div",{className:"rounded-lg bg-white p-3 ring-1 ring-slate-200",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-900",children:"Role Permissions"}),n.jsxs("div",{className:"space-y-2",children:[te.map(de=>n.jsxs("div",{className:"rounded-lg bg-slate-50 p-3 ring-1 ring-slate-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-slate-900",children:Xl(de.moduleName)}),n.jsxs("p",{className:"text-xs text-slate-500",children:[de.items.length," permissions"]})]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:de.items.map(Le=>n.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-sm ring-1 ring-slate-200",children:[n.jsx("span",{className:"font-medium text-slate-800",children:SUe(Le.action_name)}),n.jsx("button",{type:"button",onClick:()=>U(Le),className:"rounded p-1 text-violet-700 transition hover:bg-violet-100",title:`Edit ${Yl(Le.action_name)} on ${Xl(Le.module_name)}`,"aria-label":`Edit ${Yl(Le.action_name)} on ${Xl(Le.module_name)}`,children:n.jsx(NAe,{className:"h-3.5 w-3.5"})}),n.jsx("button",{type:"button",onClick:()=>at(Le),className:"rounded p-1 text-red-700 transition hover:bg-red-100",title:`Delete ${Yl(Le.action_name)} on ${Xl(Le.module_name)}`,"aria-label":`Delete ${Yl(Le.action_name)} on ${Xl(Le.module_name)}`,children:n.jsx(ff,{className:"h-3.5 w-3.5"})})]},Le.id))})]},de.moduleName)),te.length===0&&n.jsx("p",{className:"py-3 text-sm text-slate-500",children:"No permissions for this role."})]})]})]})]})})}),F.open&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-10",children:n.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Edit Role"}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Update role details"})]}),n.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Role name"}),n.jsx("input",{value:F.name,onChange:de=>Q(Le=>({...Le,name:de.target.value})),className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm",autoFocus:!0}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Q({open:!1,role:null,name:""}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Qe,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Save Changes"})]})]})})}),W.open&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/45 p-4",children:n.jsx("div",{className:"flex min-h-full items-start justify-center py-10",children:n.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-5 shadow-2xl ring-1 ring-violet-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-violet-700",children:"Edit Permission"}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Update permission mapping"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{value:W.role_name,onChange:de=>L(Le=>({...Le,role_name:de.target.value})),placeholder:"role_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{value:W.module_name,onChange:de=>L(Le=>({...Le,module_name:de.target.value})),list:"module-options",placeholder:"module_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"}),n.jsx("input",{value:W.action_name,onChange:de=>L(Le=>({...Le,action_name:de.target.value})),list:"action-options",placeholder:"action_name",className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm"})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>L({open:!1,id:"",role_name:"",module_name:"",action_name:""}),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:ct,disabled:l,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-60",children:"Save Permission"})]})]})})}),n.jsx("datalist",{id:"action-options",children:H.map(de=>n.jsx("option",{value:de},de))}),n.jsx("datalist",{id:"module-options",children:ut.map(de=>n.jsx("option",{value:de},de))})]})}const mw=[{key:"submissions",label:"Submissions",endpoint:"/v1/super-admin/tracker/submissions"},{key:"selections",label:"Selections",endpoint:"/v1/super-admin/tracker/selections"},{key:"channel_partners",label:"Channel Partners",endpoint:"/v1/super-admin/tracker/channel-partners"},{key:"client_invoices",label:"Client Invoices",endpoint:"/v1/super-admin/tracker/client-invoices"},{key:"cp_invoices",label:"CP Invoices",endpoint:"/v1/super-admin/tracker/cp-invoices"}],AUe={"Profile Submitted":"bg-blue-100 text-blue-700",Shortlisted:"bg-purple-100 text-purple-700",Selected:"bg-green-100 text-green-700","Screen Reject Internal":"bg-red-100 text-red-700","Screen Reject Client":"bg-red-100 text-red-700","Interview Scheduled":"bg-indigo-100 text-indigo-700",Duplicate:"bg-slate-100 text-slate-700","Req on Hold":"bg-amber-100 text-amber-700","Interview No Show":"bg-orange-100 text-orange-700",Offered:"bg-teal-100 text-teal-700",Joined:"bg-emerald-100 text-emerald-700","Joining No Show":"bg-rose-100 text-rose-700","Interview Reject":"bg-red-100 text-red-700",Raised:"bg-blue-100 text-blue-700",Sent:"bg-purple-100 text-purple-700",Paid:"bg-emerald-100 text-emerald-700",Pending:"bg-amber-100 text-amber-700",Overdue:"bg-red-100 text-red-700"},xF=["#7c3aed","#2563eb","#10b981","#f59e0b","#ef4444","#0ea5e9"],gF=["#7c3aed","#2563eb","#10b981","#f59e0b","#ef4444","#14b8a6","#6366f1","#84cc16"],EUe=["serial_no","submission_date","client_name","requirement_no","am_name","recruiter_name","candidate_name","skill","total_experience","current_location","notice_period","status","remarks"],TUe=["client_name","am_name","recruiter_name","candidate_name","skill_set","date_of_joining","billing_per_day","ctc_per_month","gp_value","gp_percent","status","bgv_final_dt","po_no"],PUe=["cp_name","candidate_name","skill_set","date_of_joining","cp_billing","routing_fee","infy_billing","margin","status","bgv_with","po_no"],OUe=["client_name","candidate_name","service_month","po_no","invoice_no","invoice_date","invoice_value","gst_amount","total_inv_value","status_display","payment_date"],RUe=["cp_name","candidate_name","service_month","client_inv_no","client_inv_value","client_payment_dt","cp_inv_no","cp_inv_value","payment_status_display","gst_status","net_payable","remarks"],LUe={submissions:EUe,selections:TUe,channel_partners:PUe,client_invoices:OUe,cp_invoices:RUe};function oa(e){return`Rs ${Number(e||0).toLocaleString("en-IN",{maximumFractionDigits:2})}`}function lj(e,t=!1){const r=Number(e||0);return`${t&&r>0?"+":""}${r.toFixed(1)}%`}function IUe(e){return String(e||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function FUe(e){return AUe[e]||"bg-slate-100 text-slate-700"}function DUe({filters:e,setFilters:t,options:r}){const s=(r==null?void 0:r.clients)||[],a=(r==null?void 0:r.ams)||[],i=(r==null?void 0:r.recruiters)||[];return n.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-xl border border-slate-200 bg-slate-50 p-4 md:grid-cols-6",children:[n.jsxs("select",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",value:e.period,onChange:l=>{const o=l.target.value;t(c=>({...c,period:o,...o!=="custom"?{date_from:"",date_to:""}:{}}))},children:[n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"This Week"}),n.jsx("option",{value:"month",children:"This Month"}),n.jsx("option",{value:"custom",children:"Custom Range"})]}),n.jsxs("select",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",value:e.client,onChange:l=>t(o=>({...o,client:l.target.value})),children:[n.jsx("option",{value:"",children:"All clients"}),s.map(l=>n.jsx("option",{value:l,children:l},l))]}),n.jsxs("select",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",value:e.am,onChange:l=>t(o=>({...o,am:l.target.value})),children:[n.jsx("option",{value:"",children:"All AMs"}),a.map(l=>n.jsx("option",{value:l,children:l},l))]}),n.jsxs("select",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",value:e.recruiter,onChange:l=>t(o=>({...o,recruiter:l.target.value})),children:[n.jsx("option",{value:"",children:"All recruiters"}),i.map(l=>n.jsx("option",{value:l,children:l},l))]}),n.jsx("input",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",type:"date",value:e.date_from,onChange:l=>t(o=>({...o,period:"custom",date_from:l.target.value}))}),n.jsx("input",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-sm",type:"date",value:e.date_to,onChange:l=>t(o=>({...o,period:"custom",date_to:l.target.value}))})]})}function os({label:e,value:t,change:r,onClick:s}){return n.jsxs("button",{type:"button",onClick:s,className:"w-full rounded-xl border border-slate-200 bg-white p-4 text-left shadow-sm transition hover:border-violet-300 hover:shadow",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:e}),n.jsx("p",{className:"mt-1 text-3xl font-bold text-slate-900",children:t}),r!=null&&n.jsx("p",{className:`mt-1 text-xs font-semibold ${Number(r)>=0?"text-emerald-700":"text-red-700"}`,children:lj(r,!0)})]})}function $Ue(e,t,r){return r==null||r===""?"-":["billing_per_day","ctc_per_month","gp_value","cp_billing","routing_fee","infy_billing","margin","invoice_value","gst_amount","total_inv_value","client_inv_value","cp_inv_value","net_payable"].includes(t)?oa(r):t==="gp_percent"?lj(r):String(r)}function MUe({activeTab:e,rows:t}){if(!t.length)return null;if(e==="selections"){const r=t.reduce((o,c)=>o+Number(c.billing_per_day||0),0),s=t.reduce((o,c)=>o+Number(c.ctc_per_month||0),0),a=t.reduce((o,c)=>o+Number(c.gp_value||0),0),i=t.filter(o=>o.gp_percent!=null),l=i.length?i.reduce((o,c)=>o+Number(c.gp_percent||0),0)/i.length:0;return n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Summary: Billing/Day ",oa(r)," | CTC/Month ",oa(s)," | GP ",oa(a)," | Avg GP% ",lj(l)]})}if(e==="client_invoices"){const r=t.reduce((i,l)=>i+Number(l.invoice_value||0),0),s=t.reduce((i,l)=>i+Number(l.gst_amount||0),0),a=t.reduce((i,l)=>i+Number(l.total_inv_value||0),0);return n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Summary: Invoice ",oa(r)," | GST ",oa(s)," | Total ",oa(a)]})}return null}function BUe({activeTab:e,rows:t,loading:r,onExportSection:s}){if(r)return n.jsx("p",{className:"text-sm text-slate-500",children:"Loading table..."});if(!t.length)return n.jsx("p",{className:"text-sm text-slate-500",children:"No rows found."});const a=LUe[e]||Object.keys(t[0]||{});return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-100 text-slate-700",children:n.jsx("tr",{children:a.map(i=>n.jsx("th",{className:"whitespace-nowrap px-3 py-2 text-left font-semibold",children:IUe(i)},i))})}),n.jsx("tbody",{children:t.map((i,l)=>n.jsx("tr",{className:l%2?"bg-white":"bg-slate-50",children:a.map(o=>{const c=i[o],d=o.toLowerCase().includes("status"),u=o==="gp_percent",m=Number(c||0),f=m>=25?"text-emerald-700":m>=15?"text-amber-700":"text-red-700";return n.jsx("td",{className:"px-3 py-2 align-top text-slate-800",children:d?n.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold ${FUe(c)}`,children:c||"-"}):u?n.jsx("span",{className:`font-semibold ${f}`,children:lj(c)}):n.jsx("span",{children:$Ue(e,o,c)})},`${l}-${o}`)})},`${i.id||l}`))})]}),n.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-white p-2",children:n.jsxs("button",{type:"button",onClick:s,className:"inline-flex items-center gap-2 rounded-md border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:[n.jsx(up,{className:"h-3.5 w-3.5"}),"Export CSV"]})})]}),n.jsx(MUe,{activeTab:e,rows:t})]})}function UUe(){var ce,ae,fe,ne,he,M,Se,me,Pe,ue,ye,Ye,lt,xe,Ae,$e;const[e,t]=g.useState({period:"month",client:"",am:"",recruiter:"",date_from:"",date_to:""}),[r,s]=g.useState("submissions"),[a,i]=g.useState({status_group:"",status:"",bgv_pending:"",payment_status:"",client_name:"",recruiter_name:""}),[l,o]=g.useState({metrics:{},change_pct:{}}),[c,d]=g.useState({clients:[],ams:[],recruiters:[]}),[u,m]=g.useState({}),[f,y]=g.useState({}),[x,p]=g.useState([]),[h,v]=g.useState([]),[b,j]=g.useState(0),[_,N]=g.useState([]),[w,k]=g.useState([]),[S,E]=g.useState([]),[T,A]=g.useState({page:1,limit:25,search:"",sort_by:"created_at",sort_dir:"desc",items:[],total:0,total_pages:1}),[C,P]=g.useState(!1),[O,R]=g.useState(!1),[F,Q]=g.useState(""),W=g.useMemo(()=>{const Me={...e};return!!(e.date_from||e.date_to)?Me.period="custom":e.period!=="custom"&&(delete Me.date_from,delete Me.date_to),Object.keys(Me).forEach(We=>Me[We]===""&&delete Me[We]),Me},[e]),L=async()=>{var Me,Fe,We,Ze,pt,Ve,Je,Ke;P(!0),Q("");try{const[gt,At,Lt,Bt,ar,er,Be,xt]=await Promise.all([q.get("/v1/super-admin/tracker/submission-kpis",{params:W}),q.get("/v1/super-admin/tracker/selection-kpis",{params:W}),q.get("/v1/super-admin/tracker/invoice-kpis",{params:W}),q.get("/v1/super-admin/tracker/submissions-by-client",{params:W}),q.get("/v1/super-admin/tracker/status-funnel",{params:W}),q.get("/v1/super-admin/tracker/recruiter-leaderboard",{params:W}),q.get("/v1/super-admin/tracker/skills-breakdown",{params:W}),q.get("/v1/super-admin/tracker/am-performance",{params:W})]);o(gt.data||{metrics:{},change_pct:{}}),m(At.data||{}),y(Lt.data||{}),p(((Me=Bt.data)==null?void 0:Me.items)||[]),v(((Fe=ar.data)==null?void 0:Fe.items)||[]),j(((We=ar.data)==null?void 0:We.conversion_pct)||0),N(((Ze=er.data)==null?void 0:Ze.items)||[]),k(((pt=Be.data)==null?void 0:pt.items)||[]),E(((Ve=xt.data)==null?void 0:Ve.items)||[])}catch(gt){Q(((Ke=(Je=gt==null?void 0:gt.response)==null?void 0:Je.data)==null?void 0:Ke.detail)||"Failed to load tracker metrics.")}finally{P(!1)}},I=async()=>{try{const Me=await q.get("/v1/super-admin/tracker/filter-options");d(Me.data||{clients:[],ams:[],recruiters:[]})}catch{d({clients:[],ams:[],recruiters:[]})}},K=async()=>{var Fe,We;const Me=mw.find(Ze=>Ze.key===r);if(Me){R(!0);try{const Ze={...W,...T,page:T.page,limit:T.limit,search:T.search};r==="submissions"&&a.status_group&&(Ze.status_group=a.status_group),r==="submissions"&&a.status&&(Ze.status=a.status),r==="selections"&&a.bgv_pending&&(Ze.bgv_pending=!0),r==="cp_invoices"&&a.payment_status&&(Ze.payment_status=a.payment_status),a.client_name&&(Ze.client=a.client_name),a.recruiter_name&&(Ze.recruiter=a.recruiter_name);const Ve=(await q.get(Me.endpoint,{params:Ze})).data||{};A(Je=>({...Je,items:Ve.items||[],total:Ve.total||0,total_pages:Ve.total_pages||1}))}catch(Ze){Q(((We=(Fe=Ze==null?void 0:Ze.response)==null?void 0:Fe.data)==null?void 0:We.detail)||"Failed to load table."),A(pt=>({...pt,items:[]}))}finally{R(!1)}}};g.useEffect(()=>{L()},[W]),g.useEffect(()=>{I()},[]),g.useEffect(()=>{K()},[r,W,T.page,T.limit,T.sort_by,T.sort_dir,a]);const D=async Me=>{var Ze,pt,Ve;const Fe=(Ze=Me.target.files)==null?void 0:Ze[0];if(!Fe)return;const We=new FormData;We.append("file",Fe);try{await q.post("/v1/super-admin/tracker/submissions/import",We,{headers:{"Content-Type":"multipart/form-data"}}),Q("Tracker imported successfully."),await Promise.all([L(),K(),I()])}catch(Je){Q(((Ve=(pt=Je==null?void 0:Je.response)==null?void 0:pt.data)==null?void 0:Ve.detail)||"Import failed.")}finally{Me.target.value=""}},Y=async()=>{var Me,Fe;try{const We=mw.find(Je=>Je.key===r),Ze=await q.get("/v1/super-admin/tracker/export",{params:{section:(We==null?void 0:We.key)||"submissions"},responseType:"blob"}),pt=URL.createObjectURL(new Blob([Ze.data],{type:"text/csv"})),Ve=document.createElement("a");Ve.href=pt,Ve.download=`${(We==null?void 0:We.key)||"submissions"}.csv`,Ve.click(),URL.revokeObjectURL(pt)}catch(We){Q(((Fe=(Me=We==null?void 0:We.response)==null?void 0:Me.data)==null?void 0:Fe.detail)||"Export failed.")}},re=Me=>{s("submissions"),i(Fe=>({...Fe,status_group:Me,status:"",bgv_pending:"",payment_status:""})),A(Fe=>({...Fe,page:1}))},B=()=>{s("selections"),i(Me=>({...Me,status_group:"",status:"",bgv_pending:"1",payment_status:""})),A(Me=>({...Me,page:1}))},G=()=>{s("cp_invoices"),i(Me=>({...Me,payment_status:"pending",status_group:"",status:"",bgv_pending:""})),A(Me=>({...Me,page:1}))};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-xl border border-slate-200 bg-white p-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Tracker Metrics Dashboard"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Recruitment pipeline, GP, channel partner and invoice intelligence."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white hover:bg-violet-700",children:[n.jsx(UU,{className:"h-4 w-4"}),"Import Tracker",n.jsx("input",{type:"file",accept:".xlsx,.xlsm",className:"hidden",onChange:D})]}),n.jsxs("button",{type:"button",onClick:()=>{i({status_group:"",status:"",bgv_pending:"",payment_status:"",client_name:"",recruiter_name:""}),L()},className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:[n.jsx(AAe,{className:"h-4 w-4"}),"Refresh"]})]})]}),n.jsx(DUe,{filters:e,setFilters:t,options:c}),F&&n.jsx("p",{className:"rounded-md bg-amber-50 px-3 py-2 text-sm text-amber-700",children:F}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4 xl:grid-cols-8",children:[n.jsx(os,{label:"Total Submissions",value:((ce=l.metrics)==null?void 0:ce.total)||0,change:(ae=l.change_pct)==null?void 0:ae.total,onClick:()=>re("total")}),n.jsx(os,{label:"Shortlisted",value:((fe=l.metrics)==null?void 0:fe.shortlisted)||0,change:(ne=l.change_pct)==null?void 0:ne.shortlisted,onClick:()=>re("shortlisted")}),n.jsx(os,{label:"Interviews",value:((he=l.metrics)==null?void 0:he.interviews)||0,change:(M=l.change_pct)==null?void 0:M.interviews,onClick:()=>re("interviews")}),n.jsx(os,{label:"Selected / Offered",value:((Se=l.metrics)==null?void 0:Se.selected)||0,change:(me=l.change_pct)==null?void 0:me.selected,onClick:()=>re("selected")}),n.jsx(os,{label:"Joined",value:((Pe=l.metrics)==null?void 0:Pe.joined)||0,change:(ue=l.change_pct)==null?void 0:ue.joined,onClick:()=>re("joined")}),n.jsx(os,{label:"Rejected (All)",value:((ye=l.metrics)==null?void 0:ye.rejected)||0,change:(Ye=l.change_pct)==null?void 0:Ye.rejected,onClick:()=>re("rejected")}),n.jsx(os,{label:"Duplicates",value:((lt=l.metrics)==null?void 0:lt.duplicates)||0,change:(xe=l.change_pct)==null?void 0:xe.duplicates,onClick:()=>re("duplicates")}),n.jsx(os,{label:"On Hold",value:((Ae=l.metrics)==null?void 0:Ae.on_hold)||0,change:($e=l.change_pct)==null?void 0:$e.on_hold,onClick:()=>re("on_hold")})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsx(os,{label:"Joined Count",value:u.joined||0,onClick:()=>s("selections")}),n.jsx(os,{label:"Total GP",value:oa(u.total_gp),onClick:()=>s("selections")}),n.jsx(os,{label:"Avg GP %",value:`${Number(u.avg_gp_pct||0).toFixed(2)}%`,onClick:()=>s("selections")}),n.jsx(os,{label:"BGV Pending",value:u.bgv_pending||0,onClick:B}),n.jsx(os,{label:"Monthly Billing Value",value:oa(u.monthly_billing),onClick:()=>s("selections")})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsx(os,{label:"Total Invoiced",value:oa(f.total_invoiced),onClick:()=>s("client_invoices")}),n.jsx(os,{label:"Paid",value:oa(f.paid),onClick:()=>s("client_invoices")}),n.jsx(os,{label:"Outstanding",value:oa(f.outstanding),onClick:()=>s("client_invoices")}),n.jsx(os,{label:"GST Total",value:oa(f.gst_total),onClick:()=>s("client_invoices")}),n.jsx(os,{label:"CP Payable Pending",value:oa(f.cp_payable_pending),onClick:G})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-800",children:"Submissions by Client"}),n.jsx("div",{className:"h-64",children:C?n.jsx("p",{className:"text-sm text-slate-500",children:"Loading..."}):n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Jv,{data:x,children:[n.jsx(lo,{strokeDasharray:"3 3"}),n.jsx(Ka,{dataKey:"client_name"}),n.jsx(Xa,{}),n.jsx(Dn,{formatter:(Me,Fe,We)=>{var Ze;return[Me,(Ze=We==null?void 0:We.payload)!=null&&Ze.status_breakdown?JSON.stringify(We.payload.status_breakdown):"count"]}}),n.jsx(Dl,{dataKey:"count",onClick:Me=>{Me!=null&&Me.client_name&&(t(Fe=>({...Fe,client:Me.client_name})),s("submissions"),i(Fe=>({...Fe,client_name:Me.client_name})),A(Fe=>({...Fe,page:1})))},children:x.map((Me,Fe)=>n.jsx(wo,{fill:gF[Fe%gF.length]},Fe))})]})})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsxs("p",{className:"mb-2 text-sm font-semibold text-slate-800",children:["Status Funnel (Conversion ",Number(b||0).toFixed(1),"%)"]}),n.jsx("div",{className:"h-64",children:C?n.jsx("p",{className:"text-sm text-slate-500",children:"Loading..."}):n.jsx(Va,{width:"100%",height:"100%",children:n.jsxs(Kv,{children:[n.jsx(Pi,{data:h,dataKey:"count",nameKey:"status_group",innerRadius:50,outerRadius:90,label:!0,children:h.map((Me,Fe)=>n.jsx(wo,{fill:xF[Fe%xF.length]},Fe))}),n.jsx(Dn,{})]})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-800",children:"Recruiter Leaderboard"}),n.jsx("div",{className:"space-y-2",children:(_||[]).slice(0,8).map(Me=>n.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-md bg-slate-50 px-3 py-2 text-left text-sm hover:bg-slate-100",onClick:()=>{t(Fe=>({...Fe,recruiter:Me.recruiter_name})),s("submissions"),i(Fe=>({...Fe,recruiter_name:Me.recruiter_name})),A(Fe=>({...Fe,page:1}))},children:[n.jsx("span",{className:"font-medium text-slate-800",children:Me.recruiter_name}),n.jsxs("span",{className:"text-slate-600",children:["Joined ",Me.joined," | Conv ",Number(Me.conversion_pct||0).toFixed(1),"%"]})]},Me.recruiter_name))})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-800",children:"Submissions by Skill"}),n.jsx("div",{className:"space-y-2",children:(w||[]).map(Me=>n.jsxs("div",{className:"flex items-center justify-between rounded-md bg-slate-50 px-3 py-2 text-sm",children:[n.jsx("span",{className:"font-medium text-slate-800",children:Me.skill}),n.jsxs("span",{className:"text-slate-600",children:[Me.count," | ",Number(Me.acceptance_rate||0).toFixed(1),"%"]})]},Me.skill))})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-800",children:"AM Performance"}),n.jsx("div",{className:"space-y-2",children:(S||[]).slice(0,8).map(Me=>n.jsxs("div",{className:"rounded-md bg-slate-50 px-3 py-2 text-sm",children:[n.jsx("p",{className:"font-medium text-slate-800",children:Me.am_name}),n.jsxs("p",{className:"text-slate-600",children:["Sub ",Me.submissions," | Sel ",Me.selections," | GP ",oa(Me.total_gp)]})]},Me.am_name))})]})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[mw.map(Me=>n.jsx("button",{type:"button",onClick:()=>{s(Me.key),A(Fe=>({...Fe,page:1}))},className:`rounded-md px-3 py-2 text-sm font-semibold ${r===Me.key?"bg-violet-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:Me.label},Me.key)),n.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-2",children:[n.jsx("input",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",placeholder:"Search candidate/email/skill...",value:T.search,onChange:Me=>A(Fe=>({...Fe,search:Me.target.value,page:1}))}),n.jsxs("select",{className:"rounded-md border border-slate-200 px-3 py-2 text-sm",value:T.limit,onChange:Me=>A(Fe=>({...Fe,page:1,limit:Number(Me.target.value)})),children:[n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),n.jsx(BUe,{activeTab:r,rows:T.items||[],loading:O,onExportSection:Y}),n.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-slate-600",children:[n.jsxs("p",{children:["Showing ",(T.page-1)*T.limit+1," - ",Math.min(T.page*T.limit,T.total||0)," of ",T.total||0]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>A(Me=>({...Me,page:Math.max(1,Me.page-1)})),disabled:T.page<=1,className:"rounded-md border border-slate-300 px-2 py-1 disabled:opacity-40",children:"Prev"}),n.jsxs("span",{children:["Page ",T.page," / ",T.total_pages||1]}),n.jsx("button",{type:"button",onClick:()=>A(Me=>({...Me,page:Math.min(Me.total_pages||1,Me.page+1)})),disabled:T.page>=(T.total_pages||1),className:"rounded-md border border-slate-300 px-2 py-1 disabled:opacity-40",children:"Next"})]})]})]})]})}function zUe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function WUe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function VUe(){const[e,t]=g.useState(null),[r,s]=g.useState([]);g.useEffect(()=>{let i=!0;return Promise.allSettled([q.get("/v1/super-admin/operations-analytics"),q.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(l=>{var d,u,m;if(!i)return;const o=l[0],c=l[1];if(o.status==="fulfilled"?t(((d=o.value)==null?void 0:d.data)||{}):t({}),c.status==="fulfilled"){const f=(m=(u=c.value)==null?void 0:u.data)==null?void 0:m.logs;s(Array.isArray(f)?f:[])}else s([])}),()=>{i=!1}},[]);const a=g.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const l=i.getTime();return r.filter(o=>{const c=new Date((o==null?void 0:o.timestamp)||"").getTime();return Number.isFinite(c)&&c>=l}).length},[r]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Operations Analytics"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Cross-team throughput and recruiter activity"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-xl border border-purple-200 bg-purple-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Jobs"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-purple-700",children:(e==null?void 0:e.total_jobs)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Applications"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-blue-700",children:(e==null?void 0:e.total_applications)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Interviews"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:(e==null?void 0:e.total_interviews)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Recruiter Actions Today"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:a})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Pipeline Throughput"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Current aggregate counts from operations services."}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Applications per Job"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:Number((e==null?void 0:e.total_jobs)||0)>0?(Number((e==null?void 0:e.total_applications)||0)/Number((e==null?void 0:e.total_jobs)||1)).toFixed(2):"0.00"})]}),n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Interviews per Application"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:Number((e==null?void 0:e.total_applications)||0)>0?(Number((e==null?void 0:e.total_interviews)||0)/Number((e==null?void 0:e.total_applications)||1)).toFixed(2):"0.00"})]})]})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:r.length})]}),n.jsx("div",{className:"space-y-2",children:r.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):r.slice(0,8).map(i=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:zUe(i.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:WUe(i.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",i.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",i.candidate_id||"--"," | Job: ",i.job_id||"--"]})]},i.id))})]})]})]})}function HUe(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function qUe(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function fw(e){return`Rs ${Number(e||0).toLocaleString("en-IN")}`}function GUe(){const[e,t]=g.useState(null),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState("all"),[c,d]=g.useState(""),[u,m]=g.useState(""),[f]=Os(),y=(f.get("q")||"").trim().toLowerCase(),x=()=>q.get("/v1/super-admin/finance/summary").then(w=>t(w.data||{})).catch(()=>t({})),p=(w="all")=>{const k=w&&w!=="all"?{status:w}:void 0;return q.get("/v1/invoices",{params:k}).then(S=>{const E=S.data;s(Array.isArray(E)?E:[])}).catch(()=>s([]))};g.useEffect(()=>{let w=!0;return Promise.allSettled([q.get("/v1/super-admin/finance/summary"),q.get("/v1/invoices"),q.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(k=>{var A,C,P,O;if(!w)return;const S=k[0],E=k[1],T=k[2];if(S.status==="fulfilled"?t(((A=S.value)==null?void 0:A.data)||{}):t({}),E.status==="fulfilled"){const R=(C=E.value)==null?void 0:C.data;s(Array.isArray(R)?R:[])}else s([]);if(T.status==="fulfilled"){const R=(O=(P=T.value)==null?void 0:P.data)==null?void 0:O.logs;i(Array.isArray(R)?R:[])}else i([])}),()=>{w=!1}},[]),g.useEffect(()=>{p(l)},[l]);const h=async(w,k)=>{d(w),m("");try{await q.put(`/v1/invoices/${w}/status`,null,{params:{status:k}}),await Promise.allSettled([x(),p(l)]),m(`Invoice status updated to ${k}.`)}catch{m("Failed to update invoice status.")}finally{d("")}},v=Number((e==null?void 0:e.paid_amount)||0),b=Number((e==null?void 0:e.total_amount)||0),j=g.useMemo(()=>b<=0?0:v/b*100,[v,b]),_=g.useMemo(()=>y?r.filter(w=>[w==null?void 0:w.invoice_number,w==null?void 0:w.client_name,w==null?void 0:w.amount,w==null?void 0:w.status,w==null?void 0:w.due_date].join(" ").toLowerCase().includes(y)):r,[r,y]),N=g.useMemo(()=>y?a.filter(w=>[w==null?void 0:w.action,w==null?void 0:w.recruiter_name,w==null?void 0:w.candidate_id,w==null?void 0:w.job_id].join(" ").toLowerCase().includes(y)):a,[a,y]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Finance & Billing"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Invoice exposure, collections, and finance operations"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-xl border border-purple-200 bg-purple-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Invoices"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-purple-700",children:(e==null?void 0:e.total_invoices)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Total Amount"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-blue-700",children:fw(e==null?void 0:e.total_amount)})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Pending Amount"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:fw(e==null?void 0:e.pending_amount)})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Collection Rate"}),n.jsxs("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:[j.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-3",children:[n.jsxs("div",{className:"xl:col-span-2 rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Invoices"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Live invoice table with quick status actions."})]}),n.jsxs("select",{value:l,onChange:w=>o(w.target.value),className:"rounded-md border border-slate-200 px-2 py-1 text-xs",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"sent",children:"Sent"}),n.jsx("option",{value:"paid",children:"Paid"}),n.jsx("option",{value:"overdue",children:"Overdue"})]})]}),u&&n.jsx("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:u}),n.jsx("div",{className:"mt-4 overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Invoice"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Client"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Amount"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Due Date"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Action"})]})}),n.jsxs("tbody",{children:[_.slice(0,12).map(w=>n.jsxs("tr",{className:"border-t border-slate-200",children:[n.jsx("td",{className:"px-3 py-2 font-medium text-slate-900",children:w.invoice_number||w.id}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:w.client_name||"--"}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:fw(w.amount)}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:w.status||"--"}),n.jsx("td",{className:"px-3 py-2 text-slate-700",children:w.due_date||"--"}),n.jsx("td",{className:"px-3 py-2",children:(w.status||"").toLowerCase()==="paid"?n.jsx("span",{className:"rounded bg-emerald-100 px-2 py-1 text-xs font-semibold text-emerald-700",children:"Paid"}):n.jsx("button",{disabled:c===w.id,onClick:()=>h(w.id,"paid"),className:"rounded bg-emerald-600 px-2 py-1 text-xs font-semibold text-white disabled:opacity-50",children:c===w.id?"Saving...":"Mark Paid"})})]},w.id)),_.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-5 text-center text-slate-500",colSpan:"6",children:y?"No invoices match this search.":"No invoice rows available."})})]})]})})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:N.length})]}),n.jsx("div",{className:"space-y-2",children:N.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):N.slice(0,8).map(w=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:HUe(w.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:qUe(w.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",w.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",w.candidate_id||"--"," | Job: ",w.job_id||"--"]})]},w.id))})]})]})]})}function yF(e){return String(e||"").toLowerCase().split("_").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function vF(e){if(!e)return"--";const t=new Date(e);if(Number.isNaN(t.getTime()))return"--";const s=Date.now()-t.getTime(),a=Math.max(1,Math.floor(s/6e4));if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function JUe(){const[e,t]=g.useState(null),[r,s]=g.useState([]),[a,i]=g.useState([]);g.useEffect(()=>{let o=!0;return Promise.allSettled([q.get("/v1/super-admin/compliance/summary"),q.get("/v1/super-admin/audit-logs",{params:{limit:150}}),q.get("/v1/recruiter/workflow-logs",{params:{limit:20}})]).then(c=>{var f,y,x,p;if(!o)return;const d=c[0],u=c[1],m=c[2];if(d.status==="fulfilled"?t(((f=d.value)==null?void 0:f.data)||{}):t({}),u.status==="fulfilled"){const h=(y=u.value)==null?void 0:y.data,v=Array.isArray(h)?h:Array.isArray(h==null?void 0:h.items)?h.items:[];s(v)}else s([]);if(m.status==="fulfilled"){const h=(p=(x=m.value)==null?void 0:x.data)==null?void 0:p.logs;i(Array.isArray(h)?h:[])}else i([])}),()=>{o=!1}},[]);const l=g.useMemo(()=>r.filter(o=>{const c=String((o==null?void 0:o.action)||"").toUpperCase();return c.includes("LOGIN")||c.includes("PASSWORD")||c.includes("PERMISSION")||c.includes("ROLE")||c.includes("LOCK")}).length,[r]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 px-6 py-6 text-white shadow-lg",children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Compliance & Security"}),n.jsx("p",{className:"mt-1 text-white/90",children:"Security posture, access governance, and recruiter activity"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Failed Logins"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-red-700",children:(e==null?void 0:e.failed_logins)??"--"})]}),n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Security Flags"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-amber-700",children:l})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Recruiter Activity Events"}),n.jsx("div",{className:"mt-1 text-3xl font-extrabold text-emerald-700",children:a.length})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-3",children:[n.jsxs("div",{className:"xl:col-span-2 rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Security Timeline"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Recent authentication, permission, and system control events."}),n.jsx("div",{className:"mt-4 space-y-2",children:r.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No compliance events available."}):r.slice(0,12).map(o=>n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:yF(o.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:vF(o.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Actor: ",o.user_id||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Entity: ",o.entity_type||"--",":",o.entity_id||"--"]})]},o.id))})]}),n.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-emerald-800",children:"Activity Tracking"}),n.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:a.length})]}),n.jsx("div",{className:"space-y-2",children:a.length===0?n.jsx("p",{className:"text-sm text-emerald-700/80",children:"No recruiter workflow activity yet"}):a.slice(0,8).map(o=>n.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white p-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:yF(o.action)}),n.jsx("span",{className:"whitespace-nowrap text-xs text-slate-500",children:vF(o.timestamp)})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Recruiter: ",o.recruiter_name||"--"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["Candidate: ",o.candidate_id||"--"," | Job: ",o.job_id||"--"]})]},o.id))})]})]})]})}const HV=[{key:"general",label:"General",route:"/super-admin/system-settings/general"},{key:"security",label:"Security",route:"/super-admin/system-settings/security"},{key:"email",label:"Email",route:"/super-admin/system-settings/email"},{key:"uploads",label:"Uploads",route:"/super-admin/system-settings/uploads"},{key:"feature-flags",label:"Feature Flags",route:"/super-admin/system-settings/feature-flags"},{key:"maintenance",label:"Maintenance",route:"/super-admin/system-settings/maintenance"},{key:"audit-logs",label:"Audit Logs",route:"/super-admin/system-settings/audit-logs"}],KUe={general:"general",security:"security",email:"email",uploads:"uploads",maintenance:"maintenance"};function XUe(e){const t=HV.find(r=>e.startsWith(r.route));return t?t.key:"general"}function YUe(e,t,r){const s=(e.value_type||"string").toLowerCase(),a=e.is_editable===!1;return s==="boolean"?n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!t,disabled:a,onChange:i=>r(i.target.checked)}),n.jsx("span",{children:t?"Enabled":"Disabled"})]}):s==="number"?n.jsx("input",{type:"number",value:t??"",disabled:a,onChange:i=>r(Number(i.target.value||0)),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}):s==="json"?n.jsx("textarea",{value:typeof t=="string"?t:JSON.stringify(t??{},null,2),disabled:a,onChange:i=>{try{r(JSON.parse(i.target.value))}catch{r(i.target.value)}},className:"min-h-[120px] w-full rounded border border-slate-300 px-3 py-2 text-xs font-mono"}):e.is_secret?n.jsx("input",{type:"password",placeholder:"Set new secret",value:t??"",disabled:a,onChange:i=>r(i.target.value),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"}):n.jsx("input",{type:"text",value:t??"",disabled:a,onChange:i=>r(i.target.value),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm"})}function Wo(){const e=Xn(),t=Et(),r=g.useMemo(()=>XUe(e.pathname),[e.pathname]),[s,a]=g.useState([]),[i,l]=g.useState({}),[o,c]=g.useState([]),[d,u]=g.useState([]),[m,f]=g.useState(""),[y,x]=g.useState(!1);g.useEffect(()=>{e.pathname==="/super-admin/system-settings"&&t("/super-admin/system-settings/general",{replace:!0})},[e.pathname,t]),g.useEffect(()=>{if(f(""),r==="feature-flags"){q.get("/v1/super-admin/feature-flags").then(j=>{var _;return c(((_=j.data)==null?void 0:_.items)||[])}).catch(()=>c([]));return}if(r==="audit-logs"){q.get("/v1/super-admin/system-settings/audit").then(j=>{var _;return u(((_=j.data)==null?void 0:_.items)||[])}).catch(()=>u([]));return}const b=KUe[r]||"general";q.get("/v1/super-admin/system-settings",{params:{category:b}}).then(j=>{var w;const _=((w=j.data)==null?void 0:w.items)||[];a(_);const N={};_.forEach(k=>{N[k.key]=k.value}),l(N)}).catch(()=>{a([]),l({})})},[r]);const p=async()=>{var b,j;x(!0),f("");try{const _=s.map(N=>({key:N.key,value:i[N.key],value_type:N.value_type,category:N.category,is_secret:N.is_secret}));await q.put("/v1/super-admin/system-settings",{updates:_}),f("Settings saved")}catch(_){f(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to save settings")}finally{x(!1)}},h=async()=>{var b,j;x(!0),f("");try{await q.put("/v1/super-admin/maintenance",{enabled:!!i["maintenance.enabled"],message:i["maintenance.message"],api_rpm:Number(i["rate_limit.api_rpm"]||0)}),f("Maintenance settings saved")}catch(_){f(((j=(b=_==null?void 0:_.response)==null?void 0:b.data)==null?void 0:j.detail)||"Failed to save maintenance settings")}finally{x(!1)}},v=async(b,j)=>{var _,N,w;x(!0),f("");try{await q.put(`/v1/super-admin/feature-flags/${encodeURIComponent(b)}`,j);const k=await q.get("/v1/super-admin/feature-flags");c(((_=k.data)==null?void 0:_.items)||[]),f(`Feature flag saved: ${b}`)}catch(k){f(((w=(N=k==null?void 0:k.response)==null?void 0:N.data)==null?void 0:w.detail)||`Failed to save ${b}`)}finally{x(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-2",children:HV.map(b=>n.jsx("button",{type:"button",onClick:()=>t(b.route),className:`rounded-md px-3 py-2 text-sm font-semibold ${r===b.key?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:b.label},b.key))}),m&&n.jsx("div",{className:"rounded border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",children:m}),r==="feature-flags"&&n.jsxs("div",{className:"space-y-3",children:[o.map(b=>n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("div",{className:"font-semibold text-slate-900",children:b.key}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!b.enabled,onChange:j=>{const _=j.target.checked;c(N=>N.map(w=>w.key===b.key?{...w,enabled:_}:w))}}),b.enabled?"Enabled":"Disabled"]})]}),n.jsx("textarea",{value:b.description||"",onChange:j=>{const _=j.target.value;c(N=>N.map(w=>w.key===b.key?{...w,description:_}:w))},className:"mb-2 min-h-[72px] w-full rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Description"}),n.jsx("button",{type:"button",onClick:()=>v(b.key,b),className:"rounded bg-slate-900 px-3 py-2 text-sm font-semibold text-white",disabled:y,children:"Save Flag"})]},b.key)),o.length===0&&n.jsx("p",{className:"text-sm text-slate-500",children:"No feature flags found."})]}),r==="audit-logs"&&n.jsxs("div",{className:"overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-100 text-slate-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"When"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Actor"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Action"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Before"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"After"})]})}),n.jsx("tbody",{children:d.map(b=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:b.created_at||"-"}),n.jsx("td",{className:"px-3 py-2",children:b.actor_name||b.actor_id||"-"}),n.jsx("td",{className:"px-3 py-2",children:b.action||"-"}),n.jsx("td",{className:"px-3 py-2 text-xs",children:b.before_json?JSON.stringify(b.before_json):"-"}),n.jsx("td",{className:"px-3 py-2 text-xs",children:b.after_json?JSON.stringify(b.after_json):"-"})]},b.id))})]}),d.length===0&&n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No audit logs found."})]}),!["feature-flags","audit-logs"].includes(r)&&n.jsxs("div",{className:"space-y-3",children:[s.map(b=>n.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[n.jsx("div",{className:"mb-1 text-sm font-semibold text-slate-900",children:b.key}),n.jsx("div",{className:"mb-2 text-xs text-slate-500",children:b.description||"-"}),YUe(b,i[b.key],j=>l(_=>({..._,[b.key]:j})))]},b.key)),s.length===0&&n.jsx("p",{className:"text-sm text-slate-500",children:"No settings found in this category."}),n.jsx("button",{type:"button",onClick:r==="maintenance"?h:p,className:"rounded bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",disabled:y,children:y?"Saving...":"Save Settings"})]})]})}function ZUe({search:e,onSearchChange:t,onExport:r,onRefresh:s}){return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-purple-700 via-indigo-600 to-emerald-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-extrabold",children:"Audit Logs"}),n.jsx("p",{className:"text-white/90",children:"Super Admin Governance"})]}),n.jsx("span",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold",children:"Production"})]})}),n.jsx("div",{className:"rounded-xl border bg-white p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsx("div",{className:"w-full md:max-w-xl",children:n.jsxs("div",{className:"flex h-11 items-center rounded border bg-white px-3 focus-within:border-indigo-400 focus-within:ring-2 focus-within:ring-indigo-100",children:[n.jsx(Es,{size:16,className:"shrink-0 text-slate-400"}),n.jsx("input",{value:e,onChange:a=>t(a.target.value),className:"ml-2 w-full border-0 bg-transparent p-0 text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none",placeholder:"Search actor/email/entity/action/ip"})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 rounded border px-3 py-2 text-sm",children:[n.jsx(up,{size:16}),"Export"]}),n.jsxs("button",{onClick:s,className:"inline-flex items-center gap-2 rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:[n.jsx($l,{size:16}),"Refresh"]})]})]})})]})}function QUe({summary:e,onCardClick:t}){return n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsxs("button",{onClick:()=>t("total"),className:"rounded-xl border bg-white p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Total"}),n.jsx("p",{className:"text-2xl font-extrabold",children:e.total})]}),n.jsxs("button",{onClick:()=>t("critical"),className:"rounded-xl border border-red-200 bg-red-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-red-700",children:"Critical"}),n.jsx("p",{className:"text-2xl font-extrabold text-red-700",children:e.critical})]}),n.jsxs("button",{onClick:()=>t("failed_login"),className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-amber-700",children:"Failed Login"}),n.jsx("p",{className:"text-2xl font-extrabold text-amber-700",children:e.failedLogin})]}),n.jsxs("button",{onClick:()=>t("active_users"),className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-emerald-700",children:"Active Users Today"}),n.jsx("p",{className:"text-2xl font-extrabold text-emerald-700",children:e.activeUsers})]}),n.jsxs("button",{onClick:()=>t("exports"),className:"rounded-xl border border-blue-200 bg-blue-50 p-4 text-left",children:[n.jsx("p",{className:"text-xs uppercase text-blue-700",children:"Exports"}),n.jsx("p",{className:"text-2xl font-extrabold text-blue-700",children:e.exports})]})]})}const gr=e=>String(e??"").trim(),Ys=e=>gr(e).replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),Ik=e=>{const t=gr(e);if(!t)return null;const r=new Date(/(?:[zZ]|[+-]\d{2}(?::?\d{2})?)$/.test(t)?t:`${t}Z`);return Number.isNaN(r.getTime())?null:r},qV=e=>{const t=Ik(e);if(!t)return"--";const r=Math.max(1,Math.floor((Date.now()-t.getTime())/6e4));if(r<60)return`${r}m ago`;const s=Math.floor(r/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},bF=e=>Ik(e)?Ik(e).toLocaleString():"--",eze=(e,t)=>{const r=gr((e==null?void 0:e.action_type)||(e==null?void 0:e.action)||(e==null?void 0:e.event)||"unknown_action").toLowerCase(),s=gr((e==null?void 0:e.status)||((e==null?void 0:e.success)===!1?"failed":"success")).toLowerCase(),a=gr(e==null?void 0:e.severity).toLowerCase()||(r.includes("delete")||r.includes("export")||r.includes("override")?"critical":s==="failed"?"warning":"info");return{id:gr((e==null?void 0:e.id)||(e==null?void 0:e.log_id)||`${r}-${(e==null?void 0:e.timestamp)||t}`),log_id:gr((e==null?void 0:e.log_id)||(e==null?void 0:e.id)),timestamp:(e==null?void 0:e.timestamp)||(e==null?void 0:e.created_at)||null,created_at:(e==null?void 0:e.created_at)||(e==null?void 0:e.timestamp)||null,actor_id:gr((e==null?void 0:e.actor_id)||(e==null?void 0:e.user_id)),actor_name:gr((e==null?void 0:e.actor_name)||(e==null?void 0:e.user_name)||(e==null?void 0:e.username)||(e==null?void 0:e.email)||"System"),actor_role:gr((e==null?void 0:e.actor_role)||(e==null?void 0:e.role)||"unknown"),actor_email:gr((e==null?void 0:e.actor_email)||(e==null?void 0:e.email)),action_type:r,action_label:gr((e==null?void 0:e.action_label)||Ys(r)),module:gr((e==null?void 0:e.module)||(e==null?void 0:e.entity_type)||"system").toLowerCase(),entity_type:gr((e==null?void 0:e.entity_type)||(e==null?void 0:e.resource_type)||"entity").toLowerCase(),entity_id:gr((e==null?void 0:e.entity_id)||(e==null?void 0:e.resource_id)),entity_name:gr((e==null?void 0:e.entity_name)||(e==null?void 0:e.entity_label)),old_value:(e==null?void 0:e.old_value)??(e==null?void 0:e.old_values)??null,new_value:(e==null?void 0:e.new_value)??(e==null?void 0:e.new_values)??null,ip_address:gr((e==null?void 0:e.ip_address)||(e==null?void 0:e.ip)||"--"),user_agent:gr(e==null?void 0:e.user_agent),device:gr(e==null?void 0:e.device),browser:gr(e==null?void 0:e.browser),os:gr(e==null?void 0:e.os),location:gr((e==null?void 0:e.location)||(e==null?void 0:e.geo_location)||(e==null?void 0:e.country)),endpoint:gr((e==null?void 0:e.endpoint)||(e==null?void 0:e.path)),http_method:gr((e==null?void 0:e.http_method)||(e==null?void 0:e.method)).toUpperCase(),response_code:(e==null?void 0:e.response_code)??null,failure_reason:gr((e==null?void 0:e.failure_reason)||(e==null?void 0:e.error_reason)||(e==null?void 0:e.reason)||(e==null?void 0:e.error_message)||(e==null?void 0:e.message)),status:s,severity:a}},Fk={severity:e=>e==="critical"?"bg-purple-100 text-purple-700":e==="error"?"bg-red-100 text-red-700":e==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-700",status:e=>e==="failed"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700",role:e=>e.includes("super")?"bg-violet-100 text-violet-700":e.includes("admin")?"bg-blue-100 text-blue-700":e.includes("recruiter")?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"},tze=e=>{const t=e==null?"":typeof e=="object"?JSON.stringify(e):String(e);return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t};function rze({draft:e,setDraft:t,options:r,groupBy:s,groupOptions:a,onGroupChange:i,onApply:l,onClear:o}){return n.jsxs("div",{className:"rounded-xl border bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm font-semibold",children:[n.jsx(W1,{size:15}),"Filters"]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-4 xl:grid-cols-8",children:[n.jsx("input",{type:"date",value:e.date_from,onChange:c=>t(d=>({...d,date_from:c.target.value})),className:"rounded border px-2 py-2 text-sm"}),n.jsx("input",{type:"date",value:e.date_to,onChange:c=>t(d=>({...d,date_to:c.target.value})),className:"rounded border px-2 py-2 text-sm"}),n.jsxs("select",{value:e.role,onChange:c=>t(d=>({...d,role:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Roles"}),r.roles.map(c=>n.jsx("option",{value:c,children:Ys(c)},c))]}),n.jsx("input",{list:"audit-users",value:e.user_id,onChange:c=>t(d=>({...d,user_id:c.target.value})),className:"rounded border px-2 py-2 text-sm",placeholder:"User"}),n.jsx("datalist",{id:"audit-users",children:r.users.map(c=>n.jsx("option",{value:c},c))}),n.jsxs("select",{value:e.module,onChange:c=>t(d=>({...d,module:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Modules"}),r.modules.map(c=>n.jsx("option",{value:c,children:Ys(c)},c))]}),n.jsxs("select",{value:e.action_type,onChange:c=>t(d=>({...d,action_type:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Actions"}),r.actions.map(c=>n.jsx("option",{value:c,children:Ys(c)},c))]}),n.jsxs("select",{value:e.severity,onChange:c=>t(d=>({...d,severity:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Severity"}),n.jsx("option",{value:"info",children:"Info"}),n.jsx("option",{value:"warning",children:"Warning"}),n.jsx("option",{value:"critical",children:"Critical"})]}),n.jsxs("select",{value:e.status,onChange:c=>t(d=>({...d,status:c.target.value})),className:"rounded border px-2 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"success",children:"Success"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",children:"Group By"}),n.jsx("select",{value:s,onChange:c=>i(c.target.value),className:"rounded border px-2 py-1.5 text-sm",children:a.map(c=>n.jsx("option",{value:c,children:Ys(c)},c))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:o,className:"rounded border px-3 py-1.5 text-sm",children:"Clear"}),n.jsx("button",{onClick:l,className:"rounded bg-indigo-600 px-3 py-1.5 text-sm font-semibold text-white",children:"Apply"})]})]})]})}function Dk(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Eg(e){if(e==null||e==="")return"--";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="number")return String(e);if(typeof e=="string")return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}function jF(e){return e==null?!1:typeof e=="string"?e.trim()!=="":Array.isArray(e)?e.length>0:Dk(e)?Object.keys(e).length>0:!0}function nze(e,t){if(!Dk(e)||!Dk(t))return null;const r=new Set([...Object.keys(e),...Object.keys(t)]),s=[];return r.forEach(a=>{const i=e[a],l=t[a],o=JSON.stringify(i),c=JSON.stringify(l);o!==c&&s.push({key:a,oldValue:i,newValue:l})}),s}function sze({oldValue:e,newValue:t,actionType:r,moduleName:s,endpoint:a,entityType:i}){const l=String(r||"").toLowerCase(),o=String(s||"").toLowerCase(),c=String(a||"").toLowerCase(),d=String(i||"").toLowerCase();if(l.includes("login")||o.includes("auth")||c.includes("/auth/login")||d==="login"||!(jF(e)||jF(t)))return null;const f=nze(e,t);return f&&f.length>0?n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Changes"}),n.jsxs("span",{className:"text-xs text-slate-500",children:[f.length," field",f.length>1?"s":""," changed"]})]}),n.jsx("div",{className:"overflow-hidden rounded-lg border bg-white",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:"Field"}),n.jsx("th",{className:"px-4 py-3",children:"Old"}),n.jsx("th",{className:"px-4 py-3",children:"New"})]})}),n.jsx("tbody",{children:f.map(y=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-4 py-3 align-top font-medium text-slate-900",children:y.key}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("div",{className:"whitespace-pre-wrap rounded-md bg-red-50 px-3 py-2 text-red-700",children:Eg(y.oldValue)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("div",{className:"whitespace-pre-wrap rounded-md bg-emerald-50 px-3 py-2 text-emerald-700",children:Eg(y.newValue)})})]},y.key))})]})})]}):n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Changes"}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border bg-white p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Old Value"}),n.jsx("pre",{className:"mt-2 max-h-64 overflow-auto rounded-md bg-slate-50 p-3 text-xs text-slate-800",children:Eg(e)})]}),n.jsxs("div",{className:"rounded-lg border bg-white p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"New Value"}),n.jsx("pre",{className:"mt-2 max-h-64 overflow-auto rounded-md bg-slate-50 p-3 text-xs text-slate-800",children:Eg(t)})]})]})]})}function _F({active:e,direction:t,onClick:r,children:s}){return n.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1 text-left font-semibold text-slate-700 hover:text-slate-900",type:"button",children:[s,n.jsx(YCe,{size:13,className:e?"text-indigo-600":"text-slate-400"}),e&&n.jsx("span",{className:"text-xs text-indigo-600",children:t==="asc"?"ASC":"DESC"})]})}function wF({row:e,expandedRow:t,selected:r,onToggleExpand:s,onToggleSelect:a,onOpenUser:i,onSeverityClick:l}){const o=t===e.id;return n.jsxs(Ce.Fragment,{children:[n.jsxs("tr",{className:`border-b transition hover:bg-gray-50 ${e.severity==="critical"?"bg-purple-50/30":""}`,children:[n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("input",{type:"checkbox",checked:r.has(e.id),onChange:()=>a(e.id)})}),n.jsx("td",{className:"px-4 py-3 align-top",title:bF(e.timestamp),children:qV(e.timestamp)}),n.jsxs("td",{className:"px-4 py-3 align-top",children:[n.jsx("button",{className:"text-left font-medium hover:underline",onClick:()=>i(e),children:e.actor_name}),n.jsx("div",{className:"mt-1 text-xs text-slate-500",children:Ys(e.actor_role)})]}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs text-slate-700",children:Ys(e.module)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs font-medium ${Fk.status(e.status)}`,children:Ys(e.status)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("button",{onClick:()=>l(e.severity),className:`rounded px-2 py-1 text-xs font-medium ${Fk.severity(e.severity)}`,type:"button",title:`Filter by ${Ys(e.severity)}`,children:Ys(e.severity)})}),n.jsx("td",{className:"px-4 py-3 align-top",children:n.jsx("button",{onClick:()=>s(e.id),className:"cursor-pointer rounded-md p-2 transition hover:bg-gray-200",type:"button",title:o?"Collapse details":"Expand details",children:n.jsx(U1,{className:`transition-transform ${o?"rotate-90":""}`,size:16})})})]}),n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"p-0",children:n.jsx("div",{className:`overflow-hidden transition-all duration-300 ${o?"max-h-96":"max-h-0"}`,children:n.jsxs("div",{className:"bg-gray-50 px-6 py-4 text-sm text-slate-700",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP Address:"})," ",e.ip_address||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Device:"})," ",e.device||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Browser:"})," ",e.browser||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"OS:"})," ",e.os||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"User Agent:"})," ",e.user_agent||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Location:"})," ",e.location||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",e.endpoint||"--"," ",e.http_method?`(${e.http_method})`:""," ",e.response_code?`- ${e.response_code}`:""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Failure Reason:"})," ",e.failure_reason||"--"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created At:"})," ",bF(e.created_at||e.timestamp)]})]}),n.jsx(sze,{oldValue:e.old_value,newValue:e.new_value,actionType:e.action_type,moduleName:e.module,endpoint:e.endpoint,entityType:e.entity_type})]})})})})]},e.id)}function aze({loading:e,error:t,rows:r,groups:s,groupBy:a,expandedRow:i,selected:l,sortBy:o,sortDir:c,allVisibleSelected:d,onToggleSelectAll:u,onSort:m,onToggleExpand:f,onToggleSelect:y,onOpenUser:x,onSeverityClick:p}){const h=n.jsx("thead",{className:"sticky top-0 z-10 bg-gray-100 text-left text-sm font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:n.jsx("input",{type:"checkbox",checked:d,onChange:u})}),n.jsx("th",{className:"px-4 py-3",children:n.jsx(_F,{active:o==="time",direction:c,onClick:()=>m("time"),children:"Time"})}),n.jsx("th",{className:"px-4 py-3",children:n.jsx(_F,{active:o==="user",direction:c,onClick:()=>m("user"),children:"User"})}),n.jsx("th",{className:"px-4 py-3",children:"Module"}),n.jsx("th",{className:"px-4 py-3",children:"Status"}),n.jsx("th",{className:"px-4 py-3",children:"Severity"}),n.jsx("th",{className:"px-4 py-3",children:"Actions"})]})});return n.jsxs("div",{className:"rounded-xl border bg-white",children:[t&&n.jsx("div",{className:"border-b bg-red-50 px-4 py-2 text-sm text-red-700",children:t}),e?n.jsx("div",{className:"p-8 text-center text-slate-600",children:"Loading audit logs..."}):a==="none"?n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[h,n.jsxs("tbody",{children:[r.map(v=>n.jsx(wF,{row:v,expandedRow:i,selected:l,onToggleExpand:f,onToggleSelect:y,onOpenUser:x,onSeverityClick:p},v.id)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-8 text-center text-slate-500",colSpan:7,children:"No logs found."})})]})]})}):n.jsxs("div",{className:"divide-y",children:[s.map(([v,b])=>n.jsxs("div",{children:[n.jsxs("div",{className:"bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-800",children:[v," (",b.length,")"]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[h,n.jsx("tbody",{children:b.map(j=>n.jsx(wF,{row:j,expandedRow:i,selected:l,onToggleExpand:f,onToggleSelect:y,onOpenUser:x,onSeverityClick:p},j.id))})]})})]},v)),s.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-500",children:"No logs found."})]})]})}function ize({user:e,logs:t,onClose:r,onViewFull:s}){if(!e)return null;const a=t.filter(i=>`${i.actor_id} ${i.actor_name} ${i.actor_email}`.toLowerCase().includes((e.actor_id||e.actor_name||e.actor_email||"").toLowerCase()));return n.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-black/30",children:n.jsxs("div",{className:"h-full w-full max-w-md overflow-y-auto bg-white p-5",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"User Activity"}),n.jsx("button",{onClick:r,children:n.jsx(Ar,{size:18})})]}),n.jsxs("div",{className:"rounded border p-3",children:[n.jsx("p",{className:"font-semibold",children:e.actor_name}),n.jsx("p",{className:"text-xs text-slate-600",children:e.actor_email||"--"}),n.jsx("p",{className:`mt-1 inline-flex rounded px-2 py-0.5 text-xs ${Fk.role((e.actor_role||"").toLowerCase())}`,children:Ys(e.actor_role)})]}),n.jsx("div",{className:"mt-4 space-y-2",children:a.slice(0,12).map(i=>n.jsxs("div",{className:"rounded border p-2",children:[n.jsx("p",{className:"text-sm font-semibold",children:i.action_label}),n.jsxs("p",{className:"text-xs text-slate-600",children:[qV(i.timestamp)," - ",Ys(i.module)]})]},i.id))}),n.jsx("button",{onClick:()=>s(e),className:"mt-4 w-full rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:"View Full Logs"})]})})}function lze({open:e,counts:t,onClose:r,onExport:s}){const[a,i]=g.useState("current"),[l,o]=g.useState("csv");if(!e)return null;const c=a==="selected"?t.selected:a==="all"?t.all:t.current;return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:n.jsxs("div",{className:"w-full max-w-md rounded-xl border bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Export Logs"}),n.jsx("button",{onClick:r,children:n.jsx(Ar,{size:18})})]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Records: ",c]}),n.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[n.jsx("button",{onClick:()=>i("current"),className:`rounded border px-2 py-2 text-sm ${a==="current"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Current"}),n.jsx("button",{onClick:()=>i("all"),className:`rounded border px-2 py-2 text-sm ${a==="all"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"All"}),n.jsx("button",{onClick:()=>i("selected"),className:`rounded border px-2 py-2 text-sm ${a==="selected"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Selected"})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[n.jsx("button",{onClick:()=>o("csv"),className:`rounded border px-2 py-2 text-sm ${l==="csv"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"CSV"}),n.jsx("button",{onClick:()=>o("xlsx"),className:`rounded border px-2 py-2 text-sm ${l==="xlsx"?"border-indigo-500 bg-indigo-50 text-indigo-700":""}`,children:"Excel"})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:r,className:"rounded border px-3 py-2 text-sm",children:"Cancel"}),n.jsx("button",{onClick:()=>s(a,l),className:"rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:"Export"})]})]})})}function oze({page:e,totalPages:t,limit:r,pageSizes:s,totalCount:a,onPageChange:i,onLimitChange:l}){return n.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border bg-white p-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{children:"Page Size"}),n.jsx("select",{value:r,onChange:o=>l(Number(o.target.value)),className:"rounded border px-2 py-1",children:s.map(o=>n.jsx("option",{value:o,children:o},o))}),n.jsxs("span",{children:["Total: ",a]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>i(Math.max(1,e-1)),disabled:e===1,className:"rounded border px-3 py-1 text-sm disabled:opacity-40",children:"Prev"}),n.jsxs("span",{className:"text-sm",children:["Page ",e," / ",t]}),n.jsx("button",{onClick:()=>i(Math.min(t,e+1)),disabled:e>=t,className:"rounded border px-3 py-1 text-sm disabled:opacity-40",children:"Next"})]})]})}const cze=e=>Array.isArray(e)?{items:e,total:e.length}:Array.isArray(e==null?void 0:e.items)?{items:e.items,total:Number(e.total??e.items.length)}:{items:[],total:0},dze=async(e={})=>{const t=await q.get("/v1/super-admin/audit-logs",{params:e});return cze(t==null?void 0:t.data)},uze=async(e={})=>q.get("/audit-logs/export",{params:e,responseType:"blob"}),NF=async(e={})=>{try{await q.post("/v1/super-admin/audit-logs",{action_type:"DATA_EXPORT",module:"audit_logs",entity_type:"audit_log_export",status:"success",severity:"warning",...e})}catch{}},Tg={date_from:"",date_to:"",role:"",user_id:"",module:"",action_type:"",severity:"",status:""},mze=["none","role","user","module","action_type","date","severity"],fze=[25,50,100];function kF(e,t,r,s){const a={page:e,limit:t,search:gr(r),...s},i=gr(s==null?void 0:s.date_from),l=gr(s==null?void 0:s.date_to);return i&&(a.date_from=`${i}T00:00:00`),l&&(a.date_to=`${l}T23:59:59`),a}function SF(e){var r,s;const t=(s=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:s.detail;return Array.isArray(t)?t.map(a=>{const i=Array.isArray(a==null?void 0:a.loc)?a.loc.join("."):"";return i?`${i}: ${(a==null?void 0:a.msg)||"Invalid value"}`:(a==null?void 0:a.msg)||"Invalid value"}).join("; "):gr(t||(e==null?void 0:e.message)||"Failed to fetch audit logs")}function hze(e,t){var a;const s=gr((a=e==null?void 0:e.headers)==null?void 0:a["content-disposition"]).match(/filename\*?=(?:UTF-8''|")?([^\";]+)/i);return decodeURIComponent(((s==null?void 0:s[1])||t).replace(/"/g,""))}function CF(e,t){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}function pze(e){const t=["id","log_id","timestamp","created_at","actor_id","actor_name","actor_role","actor_email","action_type","action_label","module","entity_type","entity_id","entity_name","ip_address","device","browser","os","location","endpoint","http_method","response_code","status","severity","failure_reason","old_value","new_value"],r=t.join(","),s=e.map(a=>t.map(i=>{const l=i==="old_value"||i==="new_value"?a[i]??null:a[i];return tze(l)}).join(","));return[r,...s].join(`
`)}function xze(){const[e]=Os(),[t,r]=g.useState([]),[s,a]=g.useState(0),[i,l]=g.useState(!0),[o,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(Tg),[y,x]=g.useState(Tg),[p,h]=g.useState("none"),[v,b]=g.useState(null),[j,_]=g.useState(new Set),[N,w]=g.useState(null),[k,S]=g.useState(!1),[E,T]=g.useState(1),[A,C]=g.useState(50),[P,O]=g.useState(0),[R,F]=g.useState("time"),[Q,W]=g.useState("desc");g.useEffect(()=>{const M=gr(e.get("user_id"));M&&(f(Se=>({...Se,user_id:M})),x(Se=>({...Se,user_id:M})),T(1))},[e]);const L=g.useCallback(async()=>{l(!0),c("");try{const M=kF(E,A,d,y);Object.keys(M).forEach(Pe=>{M[Pe]===""&&delete M[Pe]});const Se=await dze(M),me=((Se==null?void 0:Se.items)||[]).map((Pe,ue)=>eze(Pe,ue));r(me),a(Number((Se==null?void 0:Se.total)??me.length))}catch(M){r([]),a(0),c(SF(M))}finally{l(!1)}},[y,A,E,d]);g.useEffect(()=>{L()},[L,P]);const I=g.useMemo(()=>{const M=Se=>Array.from(new Set(Se.map(gr).filter(Boolean))).sort();return{roles:M(t.map(Se=>Se.actor_role)),users:M(t.map(Se=>Se.actor_id||Se.actor_email||Se.actor_name)),modules:M(t.map(Se=>Se.module)),actions:M(t.map(Se=>Se.action_type))}},[t]),K=g.useMemo(()=>{const M=[...t];return M.sort((Se,me)=>{if(R==="user"){const ye=gr(Se.actor_name).toLowerCase(),Ye=gr(me.actor_name).toLowerCase();return ye<Ye?Q==="asc"?-1:1:ye>Ye?Q==="asc"?1:-1:0}const Pe=Se.timestamp?new Date(Se.timestamp).getTime():0,ue=me.timestamp?new Date(me.timestamp).getTime():0;return Q==="asc"?Pe-ue:ue-Pe}),M},[t,R,Q]),D=g.useMemo(()=>{if(p==="none")return[];const M=K.reduce((Se,me)=>{let Pe="Unknown";return p==="role"&&(Pe=Ys(me.actor_role||"unknown")),p==="user"&&(Pe=me.actor_name||me.actor_email||"Unknown"),p==="module"&&(Pe=Ys(me.module||"unknown")),p==="action_type"&&(Pe=Ys(me.action_type||"unknown")),p==="severity"&&(Pe=Ys(me.severity||"unknown")),p==="date"&&(Pe=me.timestamp?new Date(me.timestamp).toLocaleDateString():"Unknown"),Se.has(Pe)||Se.set(Pe,[]),Se.get(Pe).push(me),Se},new Map);return Array.from(M.entries())},[p,K]),Y=g.useMemo(()=>{const M=K.filter(ye=>ye.severity==="critical").length,Se=K.filter(ye=>ye.status==="failed"&&(ye.action_type.includes("login")||ye.action_label.toLowerCase().includes("login"))).length,me=K.filter(ye=>ye.action_type.includes("export")).length,Pe=new Date().toDateString(),ue=new Set(K.filter(ye=>ye.timestamp?new Date(ye.timestamp).toDateString()===Pe:!1).map(ye=>ye.actor_id||ye.actor_email||ye.actor_name)).size;return{total:s,critical:M,failedLogin:Se,activeUsers:ue,exports:me}},[K,s]),re=g.useMemo(()=>K.length>0&&K.every(M=>j.has(M.id)),[j,K]),B=Math.max(1,Math.ceil(s/A)),G=M=>{b(Se=>Se===M?null:M)},ce=M=>_(Se=>{const me=new Set(Se);return me.has(M)?me.delete(M):me.add(M),me}),ae=async(M,Se)=>{var Pe,ue;const me=M==="all";try{if(me){const ye={...kF(E,A,d,y),format:Se,scope:"all"};Object.keys(ye).forEach(xe=>{ye[xe]===""&&delete ye[xe]});const Ye=await uze(ye),lt=hze(Ye,`audit-logs-all-${new Date().toISOString().slice(0,10)}.${Se==="xlsx"?"xlsx":"csv"}`);CF(Ye.data,lt)}else{const ye=M==="selected"?K.filter(Ae=>j.has(Ae.id)):K,Ye=pze(ye),lt=new Blob([Ye],{type:"text/csv;charset=utf-8;"}),xe=`audit-logs-${M}-${new Date().toISOString().slice(0,10)}.csv`;CF(lt,xe)}await NF({action_label:"Audit Logs Exported",status:"success",severity:"warning",module:"audit_logs",entity_type:"audit_log_export",new_value:{scope:M,format:Se,filters:y,search:gr(d),page:E,limit:A,selected_count:j.size}}),S(!1)}catch(ye){c(SF(ye)),await NF({action_label:"Audit Logs Export Failed",status:"failed",severity:"critical",module:"audit_logs",entity_type:"audit_log_export",new_value:{scope:M,format:Se,error:gr(((ue=(Pe=ye==null?void 0:ye.response)==null?void 0:Pe.data)==null?void 0:ue.detail)||(ye==null?void 0:ye.message)||"unknown_error")}})}},fe=()=>{x(m),T(1)},ne=()=>{f(Tg),x(Tg),u(""),T(1)},he=M=>{if(M==="critical"){f(Se=>({...Se,severity:"critical"})),x(Se=>({...Se,severity:"critical"})),T(1);return}if(M==="failed_login"){f(Se=>({...Se,status:"failed"})),x(Se=>({...Se,status:"failed"})),T(1);return}if(M==="exports"){f(Se=>({...Se,action_type:"data_export"})),x(Se=>({...Se,action_type:"data_export"})),T(1);return}ne()};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(ZUe,{search:d,onSearchChange:M=>{u(M),T(1)},onExport:()=>S(!0),onRefresh:()=>O(M=>M+1)}),n.jsx(QUe,{summary:Y,onCardClick:he}),n.jsx(rze,{draft:m,setDraft:f,options:I,groupBy:p,groupOptions:mze,onGroupChange:h,onApply:fe,onClear:ne}),n.jsx(aze,{loading:i,error:o,rows:K,groups:D,groupBy:p,expandedRow:v,selected:j,sortBy:R,sortDir:Q,allVisibleSelected:re,onToggleSelectAll:()=>_(M=>{const Se=new Set(M);return re?K.forEach(me=>Se.delete(me.id)):K.forEach(me=>Se.add(me.id)),Se}),onSort:M=>{if(R===M){W(Se=>Se==="asc"?"desc":"asc");return}F(M),W(M==="user"?"asc":"desc")},onToggleExpand:G,onToggleSelect:ce,onOpenUser:w,onSeverityClick:M=>{f(Se=>({...Se,severity:M})),x(Se=>({...Se,severity:M})),T(1)}}),n.jsx(oze,{page:E,totalPages:B,limit:A,pageSizes:fze,totalCount:s,onPageChange:T,onLimitChange:M=>{C(M),T(1)}}),n.jsx(ize,{user:N,logs:K,onClose:()=>w(null),onViewFull:M=>{const Se=(M==null?void 0:M.actor_id)||(M==null?void 0:M.actor_email)||(M==null?void 0:M.actor_name)||"";f(me=>({...me,user_id:Se})),x(me=>({...me,user_id:Se})),w(null),T(1)}}),n.jsx(lze,{open:k,counts:{current:K.length,all:s,selected:j.size},onClose:()=>S(!1),onExport:ae})]})}const AF={active:"bg-emerald-100 text-emerald-700",inactive:"bg-slate-200 text-slate-700",suspended:"bg-amber-100 text-amber-700",locked:"bg-red-100 text-red-700",pending:"bg-blue-100 text-blue-700"};function gze({status:e}){const t=String(e||"inactive").toLowerCase();return n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${AF[t]||AF.inactive}`,children:t.charAt(0).toUpperCase()+t.slice(1)})}function g0({label:e,value:t,onChange:r,error:s,type:a="text",placeholder:i="",required:l=!1,disabled:o=!1}){return n.jsxs("label",{className:"block",children:[n.jsxs("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:[e," ",l?n.jsx("span",{className:"text-red-600",children:"*"}):null]}),n.jsx("input",{type:a,value:t??"",onChange:c=>r(c.target.value),placeholder:i,disabled:o,className:`w-full rounded-md border px-3 py-2 text-sm outline-none transition ${s?"border-red-400 focus:ring-2 focus:ring-red-200":"border-slate-300 focus:ring-2 focus:ring-indigo-200"} ${o?"bg-slate-100 text-slate-500":"bg-white"}`}),s?n.jsx("p",{className:"mt-1 text-xs text-red-600",children:s}):null]})}function EF({label:e,value:t,onChange:r,options:s=[],error:a,required:i=!1,disabled:l=!1}){return n.jsxs("label",{className:"block",children:[n.jsxs("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:[e," ",i?n.jsx("span",{className:"text-red-600",children:"*"}):null]}),n.jsxs("select",{value:t??"",onChange:o=>r(o.target.value),disabled:l,className:`w-full rounded-md border px-3 py-2 text-sm outline-none transition ${a?"border-red-400 focus:ring-2 focus:ring-red-200":"border-slate-300 focus:ring-2 focus:ring-indigo-200"} ${l?"bg-slate-100 text-slate-500":"bg-white"}`,children:[n.jsx("option",{value:"",children:"Select"}),s.map(o=>n.jsx("option",{value:o.value,children:o.label},String(o.value)))]}),a?n.jsx("p",{className:"mt-1 text-xs text-red-600",children:a}):null]})}function GV(e){return String(e||"").trim().toLowerCase()}function yze(e){const t=GV(e);if(!t)return"Email is required";if(t.length>254||t.includes(" ")||t.includes("..")||(t.match(/@/g)||[]).length!==1)return"Enter a valid email address";const[r,s]=t.split("@");return!r||!s||!s.includes(".")||!/^[A-Za-z0-9._%+\-]+@[A-Za-z0-9.\-]+\.[A-Za-z]{2,}$/.test(t)?"Enter a valid email address":""}function vze(e){const t=String(e||"");return t?t.length<8||t.length>128?"Password must be 8 to 128 characters":"":"Password is required"}function bze(e){const t=String(e||"").trim();return t?t.length<2?"First name must be at least 2 characters":"":"First name is required"}const jze=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"locked",label:"Locked"},{value:"pending",label:"Pending"}];function _ze({open:e,mode:t="create",initialData:r=null,roles:s=[],onClose:a,onSubmit:i,loading:l=!1,serverError:o=""}){const[c,d]=g.useState(()=>({first_name:(r==null?void 0:r.first_name)||"",last_name:(r==null?void 0:r.last_name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",role:(r==null?void 0:r.role)||"",status:(r==null?void 0:r.status)||"active",password_mode:"generate",password:""})),[u,m]=g.useState({});Ce.useEffect(()=>{e&&(d({first_name:(r==null?void 0:r.first_name)||"",last_name:(r==null?void 0:r.last_name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",role:(r==null?void 0:r.role)||"",status:(r==null?void 0:r.status)||"active",password_mode:"generate",password:""}),m({}))},[e,r]);const f=t==="edit"?"Edit User":"Create User",y=g.useMemo(()=>s.map(h=>({value:String(h.name||h.role||"").toLowerCase(),label:h.name||h.role})),[s]);if(!e)return null;const x=()=>{const h={},v=bze(c.first_name);v&&(h.first_name=v);const b=yze(c.email);if(b&&(h.email=b),c.role||(h.role="Role is required"),t==="create"&&c.password_mode==="manual"){const j=vze(c.password);j&&(h.password=j)}return m(h),Object.keys(h).length===0},p=h=>{if(h.preventDefault(),!x())return;const v={first_name:c.first_name.trim(),last_name:c.last_name.trim(),email:GV(c.email),phone:c.phone.trim(),role:c.role,status:c.status};t==="create"&&(v.password_mode=c.password_mode,c.password_mode==="manual"&&(v.password=c.password)),i(v)};return n.jsxs("div",{className:"fixed inset-0 z-50",children:[n.jsx("button",{className:"absolute inset-0 bg-black/40",onClick:a}),n.jsxs("aside",{className:"absolute right-0 top-0 h-full w-full max-w-xl overflow-y-auto bg-white p-6 shadow-2xl",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:f}),n.jsx("p",{className:"text-sm text-slate-500",children:"Standard SaaS user identity and access controls."}),o?n.jsx("div",{className:"mt-4 rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:o}):null,n.jsxs("form",{className:"mt-5 space-y-4",onSubmit:p,children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx(g0,{label:"First Name",required:!0,value:c.first_name,onChange:h=>d(v=>({...v,first_name:h})),error:u.first_name}),n.jsx(g0,{label:"Last Name",value:c.last_name,onChange:h=>d(v=>({...v,last_name:h}))})]}),n.jsx(g0,{label:"Email",required:!0,value:c.email,onChange:h=>d(v=>({...v,email:h})),error:u.email,disabled:t==="edit"}),n.jsx(g0,{label:"Phone",value:c.phone,onChange:h=>d(v=>({...v,phone:h}))}),n.jsx(EF,{label:"Role",required:!0,value:c.role,onChange:h=>d(v=>({...v,role:h})),options:y,error:u.role}),n.jsx(EF,{label:"Status",value:c.status,onChange:h=>d(v=>({...v,status:h})),options:jze}),t==="create"?n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-700",children:"Password Setup"}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"radio",checked:c.password_mode==="generate",onChange:()=>d(h=>({...h,password_mode:"generate",password:""}))}),"Generate temporary password"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"radio",checked:c.password_mode==="manual",onChange:()=>d(h=>({...h,password_mode:"manual"}))}),"Set password manually"]})]}),c.password_mode==="manual"?n.jsx("div",{className:"mt-3",children:n.jsx(g0,{label:"Password",type:"password",required:!0,value:c.password,onChange:h=>d(v=>({...v,password:h})),error:u.password})}):null]}):null,n.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-4 py-2 text-sm",onClick:a,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:l?"Saving...":t==="edit"?"Save Changes":"Create User"})]})]})]})]})}async function wze(e={}){const t=await q.get("/v1/super-admin/users",{params:e});return(t==null?void 0:t.data)||{items:[],total:0,summary:{}}}async function Nze(e){const t=await q.post("/v1/super-admin/users",e);return t==null?void 0:t.data}async function kze(e,t){const r=await q.put(`/v1/super-admin/users/${e}`,t);return r==null?void 0:r.data}async function TF(e,t){const r=await q.patch(`/v1/super-admin/users/${e}/status`,{status:t});return r==null?void 0:r.data}async function PF(e,t){const r=await q.post(`/v1/super-admin/users/${e}/reset-password`,t);return r==null?void 0:r.data}async function Sze(e){const t=await q.post(`/v1/super-admin/users/${e}/force-logout`);return t==null?void 0:t.data}async function Cze(){const e=await q.get("/v1/roles"),t=e==null?void 0:e.data;return Array.isArray(t)?t:Array.isArray(t==null?void 0:t.roles)?t.roles:Array.isArray(t==null?void 0:t.data)?t.data:[]}const OF={search:"",role:"",status:""};function Aze(e){if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()}function Eze(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState({total_users:0,active_users:0,suspended_locked_users:0}),[i,l]=g.useState([]),[o,c]=g.useState(OF),[d,u]=g.useState(1),[m,f]=g.useState(20),[y,x]=g.useState(1),[p,h]=g.useState(!1),[v,b]=g.useState(!1),[j,_]=g.useState(null),[N,w]=g.useState(!1),[k,S]=g.useState(""),[E,T]=g.useState(""),[A,C]=g.useState(""),[P,O]=g.useState(new Set),R=g.useMemo(()=>t.filter(I=>P.has(I.id)),[t,P]),F=async()=>{var I,K;h(!0),S("");try{const[D,Y]=await Promise.all([wze({page:d,limit:m,...o}),Cze()]);r(Array.isArray(D==null?void 0:D.items)?D.items:[]),a((D==null?void 0:D.summary)||{}),x(Number((D==null?void 0:D.total_pages)||1)),l(Array.isArray(Y)?Y:[])}catch(D){const Y=((K=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:K.detail)||(D==null?void 0:D.message)||"Failed to load users";S(typeof Y=="string"?Y:"Failed to load users")}finally{h(!1)}};g.useEffect(()=>{F()},[d,m,o.search,o.role,o.status]);const Q=async I=>{var K,D;w(!0),S(""),C("");try{if(j)await kze(j.id,I),T("User updated successfully");else{const Y=await Nze(I);T("User created successfully"),Y!=null&&Y.temp_password&&C(Y.temp_password)}b(!1),_(null),await F()}catch(Y){const re=((D=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:D.detail)||(Y==null?void 0:Y.message)||"Unable to save user";S(typeof re=="string"?re:"Unable to save user")}finally{w(!1)}},W=async(I,K)=>{var D,Y;try{if(I==="edit"){_(K),b(!0);return}if(I==="audit"){e(`/super-admin/audit-logs?user_id=${encodeURIComponent(K.id)}`);return}if(I==="reset_password"){if(window.confirm("Set manual password? Click Cancel to generate temporary password.")){const B=window.prompt("Enter new password (8-128 chars)");if(!B)return;const G=await PF(K.id,{mode:"manual",password:B});G!=null&&G.temp_password&&C(G.temp_password)}else{const B=await PF(K.id,{mode:"generate"});B!=null&&B.temp_password&&C(B.temp_password)}T("Password reset triggered")}if(I==="force_logout"){if(!window.confirm("Force logout this user from all sessions?"))return;await Sze(K.id),T("User sessions invalidated")}if(I.startsWith("status:")){const re=I.split(":")[1];if(!window.confirm(`Change status to ${re}?`))return;await TF(K.id,re),T("User status updated")}await F()}catch(re){const B=((Y=(D=re==null?void 0:re.response)==null?void 0:D.data)==null?void 0:Y.detail)||(re==null?void 0:re.message)||"Action failed";S(typeof B=="string"?B:"Action failed")}},L=async()=>{if(R.length!==0&&window.confirm(`Deactivate ${R.length} selected users?`)){for(const I of R)await TF(I.id,"inactive");O(new Set),T("Bulk deactivate completed"),await F()}};return n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"User Management"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Users, role assignment, and account status."}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[n.jsx(yr,{className:"rounded border border-slate-300 px-2 py-1 text-slate-700 hover:bg-slate-50",to:"/super-admin/user-management/users",children:"Users"}),n.jsx(yr,{className:"rounded border border-slate-300 px-2 py-1 text-slate-700 hover:bg-slate-50",to:"/super-admin/roles-permissions",children:"Roles & Permissions"}),n.jsx(yr,{className:"rounded border border-slate-300 px-2 py-1 text-slate-700 hover:bg-slate-50",to:"/super-admin/audit-logs",children:"User Activity"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx($l,{size:15})," Refresh"]}),n.jsxs("button",{onClick:()=>{_(null),b(!0)},className:"inline-flex items-center gap-2 rounded bg-indigo-600 px-3 py-2 text-sm font-semibold text-white",children:[n.jsx(Ya,{size:15})," Create User"]})]})]}),k?n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:k}):null,E?n.jsx("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:E}):null,A?n.jsxs("div",{className:"rounded border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:["Temporary password (show once): ",n.jsx("span",{className:"font-semibold",children:A})]}):null,n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded border bg-white p-4",children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_users)??0})]}),n.jsxs("div",{className:"rounded border bg-white p-4",children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:(s==null?void 0:s.active_users)??0})]}),n.jsxs("div",{className:"rounded border bg-white p-4",children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Suspended / Locked"}),n.jsx("p",{className:"text-2xl font-bold text-amber-700",children:(s==null?void 0:s.suspended_locked_users)??0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 rounded border bg-white p-3 md:grid-cols-4",children:[n.jsx("input",{className:"rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Search name/email",value:o.search,onChange:I=>{u(1),c(K=>({...K,search:I.target.value}))}}),n.jsxs("select",{className:"rounded border border-slate-300 px-3 py-2 text-sm",value:o.role,onChange:I=>{u(1),c(K=>({...K,role:I.target.value}))},children:[n.jsx("option",{value:"",children:"All roles"}),i.map(I=>n.jsx("option",{value:String(I.name||"").toLowerCase(),children:I.name},I.id||I.name))]}),n.jsxs("select",{className:"rounded border border-slate-300 px-3 py-2 text-sm",value:o.status,onChange:I=>{u(1),c(K=>({...K,status:I.target.value}))},children:[n.jsx("option",{value:"",children:"All status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"locked",children:"Locked"}),n.jsx("option",{value:"pending",children:"Pending"})]}),n.jsx("button",{className:"rounded border border-slate-300 px-3 py-2 text-sm",onClick:()=>{c(OF),u(1)},children:"Clear Filters"})]}),n.jsxs("div",{className:"rounded border bg-white p-3",children:[n.jsxs("div",{className:"mb-2 flex justify-between",children:[n.jsxs("p",{className:"text-sm text-slate-500",children:[R.length," selected"]}),n.jsx("button",{disabled:R.length===0,onClick:L,className:"rounded border border-amber-300 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-800 disabled:opacity-50",children:"Bulk Deactivate"})]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-left text-slate-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:t.length>0&&P.size===t.length,onChange:I=>{I.target.checked?O(new Set(t.map(K=>K.id))):O(new Set)}})}),n.jsx("th",{className:"px-3 py-2",children:"Name"}),n.jsx("th",{className:"px-3 py-2",children:"Email"}),n.jsx("th",{className:"px-3 py-2",children:"Role"}),n.jsx("th",{className:"px-3 py-2",children:"Status"}),n.jsx("th",{className:"px-3 py-2",children:"Last Login"}),n.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),n.jsx("tbody",{children:p?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-3 py-6 text-center text-slate-500",children:"Loading users..."})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-3 py-6 text-center text-slate-500",children:"No users found."})}):t.map(I=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:P.has(I.id),onChange:()=>{O(K=>{const D=new Set(K);return D.has(I.id)?D.delete(I.id):D.add(I.id),D})}})}),n.jsx("td",{className:"px-3 py-2 font-medium text-slate-900",children:I.full_name||"--"}),n.jsx("td",{className:"px-3 py-2",children:I.email}),n.jsx("td",{className:"px-3 py-2",children:I.role||"--"}),n.jsx("td",{className:"px-3 py-2",children:n.jsx(gze,{status:I.status})}),n.jsx("td",{className:"px-3 py-2",children:Aze(I.last_login_at)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("edit",I),children:"Edit"}),n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("reset_password",I),children:"Reset Password"}),n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("force_logout",I),children:"Force Logout"}),I.status!=="active"?n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("status:active",I),children:"Activate"}):n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("status:inactive",I),children:"Deactivate"}),I.status!=="suspended"?n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("status:suspended",I),children:"Suspend"}):n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("status:active",I),children:"Unsuspend"}),I.status==="locked"?n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("status:active",I),children:"Unlock"}):null,n.jsx("button",{className:"rounded border px-2 py-1 text-xs",onClick:()=>W("audit",I),children:"Audit Logs"})]})})]},I.id))})]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-slate-500",children:["Page ",d," of ",y]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:m,onChange:I=>{f(Number(I.target.value)),u(1)},className:"rounded border border-slate-300 px-2 py-1 text-sm",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"})]}),n.jsx("button",{disabled:d<=1,onClick:()=>u(I=>Math.max(1,I-1)),className:"rounded border px-3 py-1 text-sm disabled:opacity-50",children:"Prev"}),n.jsx("button",{disabled:d>=y,onClick:()=>u(I=>Math.min(y,I+1)),className:"rounded border px-3 py-1 text-sm disabled:opacity-50",children:"Next"})]})]}),n.jsx(_ze,{open:v,mode:j?"edit":"create",initialData:j,roles:i,onClose:()=>{b(!1),_(null)},onSubmit:Q,loading:N,serverError:k})]})}const Tze=[{key:"list",label:"Workflow List"},{key:"editor",label:"Workflow Editor"},{key:"rules",label:"Automation Rules"},{key:"sla",label:"SLA & Notifications"},{key:"publish",label:"Publish / Versions"}],hw=["candidate_entered_stage","candidate_left_stage","interview_scheduled","offer_created","candidate_rejected","candidate_idle_in_stage","new_application_received"];function RF({value:e}){const t={draft:"bg-amber-100 text-amber-800",published:"bg-emerald-100 text-emerald-800",archived:"bg-slate-200 text-slate-700"};return n.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold ${t[e]||"bg-slate-100 text-slate-700"}`,children:e||"draft"})}function Pze(){const[e,t]=g.useState("list"),[r,s]=g.useState(""),[a,i]=g.useState([]),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState([]),[f,y]=g.useState([]),[x,p]=g.useState([]),[h,v]=g.useState(""),[b,j]=g.useState({name:"",description:"",department:"",job_type:""}),[_,N]=g.useState({stage_name:"",stage_type:"CUSTOM",is_terminal:!1,is_rejection:!1}),[w,k]=g.useState({name:"",trigger:hw[0],condition_json:"{}",action_json:"{}"}),S=g.useMemo(()=>a.find(G=>G.id===l)||null,[a,l]),E=async()=>{var G,ce,ae;try{const fe=await q.get("/v1/super-admin/workflows",{params:{tenant_id:r||void 0}}),ne=((G=fe==null?void 0:fe.data)==null?void 0:G.items)||[];i(ne),!l&&ne.length&&o(ne[0].id)}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to load workflows")}},T=async G=>{var ce,ae,fe;if(G)try{const ne=await q.get(`/v1/super-admin/workflows/${G}/versions`),he=((ce=ne==null?void 0:ne.data)==null?void 0:ce.items)||[];if(m(he),he.length){const M=he.find(Se=>Se.status==="draft");d((M||he[0]).id)}else d("")}catch(ne){v(((fe=(ae=ne==null?void 0:ne.response)==null?void 0:ae.data)==null?void 0:fe.detail)||"Failed to load versions")}},A=async G=>{var ce,ae,fe;if(!G){y([]);return}try{const ne=await q.get(`/v1/super-admin/workflows/workflow-versions/${G}/stages`);y(((ce=ne==null?void 0:ne.data)==null?void 0:ce.items)||[])}catch(ne){v(((fe=(ae=ne==null?void 0:ne.response)==null?void 0:ae.data)==null?void 0:fe.detail)||"Failed to load stages")}},C=async G=>{var ce,ae,fe;if(!G){p([]);return}try{const ne=await q.get(`/v1/super-admin/workflows/workflow-versions/${G}/rules`);p(((ce=ne==null?void 0:ne.data)==null?void 0:ce.items)||[])}catch(ne){v(((fe=(ae=ne==null?void 0:ne.response)==null?void 0:ae.data)==null?void 0:fe.detail)||"Failed to load rules")}};g.useEffect(()=>{E()},[r]),g.useEffect(()=>{l&&T(l)},[l]),g.useEffect(()=>{c&&(A(c),C(c))},[c]);const P=async()=>{var G,ce;if(b.name.trim())try{await q.post("/v1/super-admin/workflows",{...b,tenant_id:r||null}),v("Workflow created"),j({name:"",description:"",department:"",job_type:""}),E()}catch(ae){v(((ce=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:ce.detail)||"Failed to create workflow")}},O=async G=>{var ce,ae;try{await q.put(`/v1/super-admin/workflows/${G}`,{set_default:!0}),v("Default workflow updated"),E()}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to set default workflow")}},R=async G=>{var ce,ae;try{await q.post(`/v1/super-admin/workflows/${G}/duplicate`,{}),v("Workflow duplicated"),E()}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to duplicate workflow")}},F=async G=>{var ce,ae;try{await q.patch(`/v1/super-admin/workflows/${G}/archive`),v("Workflow archived"),E()}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to archive workflow")}},Q=async()=>{var G,ce;if(l)try{await q.post(`/v1/super-admin/workflows/${l}/versions`),v("Draft version created"),T(l)}catch(ae){v(((ce=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:ce.detail)||"Failed to create version")}},W=async G=>{var ce,ae;try{await q.post(`/v1/super-admin/workflows/workflow-versions/${G}/publish`),v("Version published"),T(l),E()}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to publish version")}},L=async(G,ce)=>{var ae,fe;try{await q.post(`/v1/super-admin/workflows/workflow-versions/${G}/rollback`,null,{params:{to:ce}}),v("Rollback completed"),T(l),E()}catch(ne){v(((fe=(ae=ne==null?void 0:ne.response)==null?void 0:ae.data)==null?void 0:fe.detail)||"Failed to rollback")}},I=async()=>{var G,ce;if(!(!c||!_.stage_name.trim()))try{await q.post(`/v1/super-admin/workflows/workflow-versions/${c}/stages`,{stage_name:_.stage_name,stage_key:_.stage_name,is_terminal:_.is_terminal,is_rejection:_.is_rejection,settings_json:{stage_type:_.stage_type,required_fields:[],checklist:[],auto_assign_owner:null}}),N({stage_name:"",stage_type:"CUSTOM",is_terminal:!1,is_rejection:!1}),v("Stage added"),A(c)}catch(ae){v(((ce=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:ce.detail)||"Failed to add stage")}},K=async(G,ce)=>{var ne,he;const ae=G+ce;if(ae<0||ae>=f.length)return;const fe=[...f];[fe[G],fe[ae]]=[fe[ae],fe[G]];try{await q.put(`/v1/super-admin/workflows/workflow-versions/${c}/stages/reorder`,{stage_ids:fe.map(M=>M.id)}),A(c)}catch(M){v(((he=(ne=M==null?void 0:M.response)==null?void 0:ne.data)==null?void 0:he.detail)||"Failed to reorder stages")}},D=async G=>{var ce,ae;try{await q.put(`/v1/super-admin/workflows/workflow-stages/${G.id}`,{stage_name:G.stage_name,is_terminal:G.is_terminal,is_rejection:G.is_rejection,settings_json:G.settings_json||{}}),v("Stage settings saved"),A(c)}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to save stage settings")}},Y=async()=>{var G,ce;if(!(!c||!w.name.trim()))try{await q.post(`/v1/super-admin/workflows/workflow-versions/${c}/rules`,{name:w.name,trigger:w.trigger,condition_json:JSON.parse(w.condition_json||"{}"),action_json:JSON.parse(w.action_json||"{}")}),k({name:"",trigger:hw[0],condition_json:"{}",action_json:"{}"}),v("Rule added"),C(c)}catch(ae){v(((ce=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:ce.detail)||"Invalid rule JSON or create failed")}},re=async G=>{var ce,ae;try{await q.patch(`/v1/super-admin/workflows/workflow-rules/${G}/toggle`),C(c)}catch(fe){v(((ae=(ce=fe==null?void 0:fe.response)==null?void 0:ce.data)==null?void 0:ae.detail)||"Failed to toggle rule")}},B=async()=>{var G,ce;if(c)try{await q.post(`/v1/super-admin/workflows/workflow-versions/${c}/rules`,{name:"SLA Escalation",trigger:"candidate_idle_in_stage",condition_json:{max_hours:48,reminder_after_hours:24,escalate_after_hours:48},action_json:{type:"notify_manager",channels:["in_app","email"]}}),v("SLA rule created"),t("rules"),C(c)}catch(ae){v(((ce=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:ce.detail)||"Failed to create SLA rule")}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Workflow Builder"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Design stages, automations, SLA policies and publish versioned workflows."})]}),n.jsx("input",{value:r,onChange:G=>s(G.target.value),placeholder:"Tenant ID (optional)",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-2",children:Tze.map(G=>n.jsx("button",{type:"button",onClick:()=>t(G.key),className:`rounded-md px-3 py-1.5 text-sm font-semibold ${e===G.key?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:G.label},G.key))}),h&&n.jsx("p",{className:"rounded-md bg-slate-100 px-3 py-2 text-sm text-slate-700",children:h}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-slate-700",children:"Workflows"}),n.jsxs("div",{className:"space-y-2",children:[a.map(G=>n.jsxs("button",{type:"button",onClick:()=>o(G.id),className:`w-full rounded-md border px-3 py-2 text-left text-sm ${l===G.id?"border-violet-500 bg-violet-50":"border-slate-200 bg-white"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:G.name}),n.jsx(RF,{value:G.status})]}),n.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[G.department||"--"," | ",G.job_type||"--"," | v",G.latest_version_no||1]}),n.jsx("div",{className:"mt-2 flex gap-1",children:n.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] ${G.is_default?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:G.is_default?"Default":"Standard"})})]},G.id)),!a.length&&n.jsx("p",{className:"text-xs text-slate-500",children:"No workflows."})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 lg:col-span-2",children:[e==="list"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Create Workflow"}),n.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[n.jsx("input",{value:b.name,onChange:G=>j(ce=>({...ce,name:G.target.value})),placeholder:"Workflow name",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:b.department,onChange:G=>j(ce=>({...ce,department:G.target.value})),placeholder:"Department",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:b.job_type,onChange:G=>j(ce=>({...ce,job_type:G.target.value})),placeholder:"Job Type",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{value:b.description,onChange:G=>j(ce=>({...ce,description:G.target.value})),placeholder:"Description",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"})]}),n.jsx("button",{type:"button",onClick:P,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white",children:"Create Workflow"}),S&&n.jsxs("div",{className:"mt-4 rounded-md border border-slate-200 p-3",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["Selected: ",S.name]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>R(S.id),children:"Duplicate"}),n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>O(S.id),children:"Set Default"}),n.jsx("button",{className:"rounded border border-red-300 px-2 py-1 text-xs text-red-700",onClick:()=>F(S.id),children:"Archive"})]})]})]}),e==="editor"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["Stage Designer ",S?`- ${S.name}`:""]}),n.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[n.jsx("input",{value:_.stage_name,onChange:G=>N(ce=>({...ce,stage_name:G.target.value})),placeholder:"Stage name",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsxs("select",{value:_.stage_type,onChange:G=>N(ce=>({...ce,stage_type:G.target.value})),className:"rounded-md border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{children:"APPLIED"}),n.jsx("option",{children:"SCREENING"}),n.jsx("option",{children:"INTERVIEW"}),n.jsx("option",{children:"OFFER"}),n.jsx("option",{children:"HIRED"}),n.jsx("option",{children:"REJECTED"}),n.jsx("option",{children:"CUSTOM"})]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("input",{type:"checkbox",checked:_.is_terminal,onChange:G=>N(ce=>({...ce,is_terminal:G.target.checked}))})," Terminal"]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("input",{type:"checkbox",checked:_.is_rejection,onChange:G=>N(ce=>({...ce,is_rejection:G.target.checked}))})," Rejection Stage"]})]}),n.jsx("button",{onClick:I,className:"rounded-md bg-slate-900 px-3 py-2 text-sm font-semibold text-white",children:"Add Stage"}),n.jsxs("div",{className:"space-y-2",children:[f.map((G,ce)=>n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("input",{value:G.stage_name,onChange:ae=>{const fe=[...f];fe[ce]={...G,stage_name:ae.target.value},y(fe)},className:"rounded border border-slate-300 px-2 py-1 text-sm"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>K(ce,-1),children:"Up"}),n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>K(ce,1),children:"Down"}),n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>D(G),children:"Save"})]})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Type: ",G.stage_type," | Order: ",G.order_index]})]},G.id)),!f.length&&n.jsx("p",{className:"text-sm text-slate-500",children:"No stages in selected version."})]})]}),e==="rules"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Automation Rules"}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx("input",{value:w.name,onChange:G=>k(ce=>({...ce,name:G.target.value})),placeholder:"Rule name",className:"rounded-md border border-slate-300 px-3 py-2 text-sm"}),n.jsx("select",{value:w.trigger,onChange:G=>k(ce=>({...ce,trigger:G.target.value})),className:"rounded-md border border-slate-300 px-3 py-2 text-sm",children:hw.map(G=>n.jsx("option",{value:G,children:G},G))}),n.jsx("textarea",{value:w.condition_json,onChange:G=>k(ce=>({...ce,condition_json:G.target.value})),className:"min-h-[80px] rounded-md border border-slate-300 px-3 py-2 text-sm",placeholder:'{"department":"IT"}'}),n.jsx("textarea",{value:w.action_json,onChange:G=>k(ce=>({...ce,action_json:G.target.value})),className:"min-h-[80px] rounded-md border border-slate-300 px-3 py-2 text-sm",placeholder:'{"type":"send_email"}'})]}),n.jsx("button",{onClick:Y,className:"rounded-md bg-slate-900 px-3 py-2 text-sm font-semibold text-white",children:"Add Rule"}),n.jsxs("div",{className:"space-y-2",children:[x.map(G=>n.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:G.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Trigger: ",G.trigger]})]}),n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>re(G.id),children:G.is_active?"Disable":"Enable"})]},G.id)),!x.length&&n.jsx("p",{className:"text-sm text-slate-500",children:"No automation rules yet."})]})]}),e==="sla"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"SLA & Notification Policy"}),n.jsx("p",{className:"text-sm text-slate-600",children:"This creates an SLA rule: reminder at 24h and escalation at 48h for idle candidates."}),n.jsx("button",{onClick:B,className:"rounded-md bg-cyan-700 px-3 py-2 text-sm font-semibold text-white",children:"Create Default SLA Rule"})]}),e==="publish"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Versioning"}),n.jsx("button",{onClick:Q,className:"rounded-md bg-violet-600 px-3 py-2 text-sm font-semibold text-white",children:"New Draft Version"})]}),n.jsxs("div",{className:"space-y-2",children:[u.map(G=>n.jsxs("div",{className:`rounded-md border px-3 py-2 ${c===G.id?"border-violet-400 bg-violet-50":"border-slate-200 bg-white"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("button",{className:"text-sm font-semibold text-slate-800",onClick:()=>d(G.id),children:["v",G.version_no]}),n.jsx(RF,{value:G.status})]}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>W(G.id),children:"Publish"}),u[0]&&n.jsx("button",{className:"rounded border border-slate-300 px-2 py-1 text-xs",onClick:()=>L(G.id,G.version_no),children:"Rollback To This"})]})]},G.id)),!u.length&&n.jsx("p",{className:"text-sm text-slate-500",children:"No versions yet."})]})]})]})]})]})}function LF(){const e=Xn(),[t,r]=g.useState({keyword:"",logic:"OR",min_exp:"",max_exp:"",location:""}),[s,a]=g.useState(!1),[i,l]=g.useState([]),[o,c]=g.useState([]),[d,u]=g.useState(!1),[m,f]=g.useState(!1),[y,x]=g.useState(null),[p,h]=g.useState(0),[v,b]=g.useState(1),[j,_]=g.useState(!1),[N,w]=g.useState(!1),[k,S]=g.useState(""),E=20,[T,A]=g.useState(!1),[C,P]=g.useState(null),[O,R]=g.useState(!1),[F,Q]=g.useState(!1),[W,L]=g.useState(null),[I,K]=g.useState(""),[D,Y]=g.useState(!1),[re,B]=g.useState(null),G=g.useMemo(()=>t.keyword||t.min_exp||t.max_exp||t.location,[t]);g.useEffect(()=>{const ue=new URLSearchParams(e.search);if(ue.size===0)return;const ye={keyword:ue.get("keyword")||"",logic:ue.get("logic")||"OR",min_exp:ue.get("min_exp")||"",max_exp:ue.get("max_exp")||"",location:ue.get("location")||""};r(ye),ae(ye)},[e.search]);const ce=ue=>{const{name:ye,value:Ye}=ue.target;r(lt=>({...lt,[ye]:Ye}))},ae=async(ue,ye=1)=>{var lt,xe;const Ye=ue||t;try{f(!0),x(null);const Ae={keyword:Ye.keyword||void 0,logic:Ye.logic,min_exp:Ye.min_exp?parseFloat(Ye.min_exp):void 0,max_exp:Ye.max_exp?parseFloat(Ye.max_exp):void 0,location:Ye.location||void 0,limit:E,offset:(ye-1)*E},$e=await XU(Ae),Me=$e.results.map(Fe=>({id:Fe.id,name:Fe.name,email:Fe.email,phone:Fe.phone,experience:Fe.experience||0,location:Fe.location||"Not specified",skills:Array.isArray(Fe.skills)?Fe.skills:typeof Fe.skills=="string"?Fe.skills.split(",").map(We=>We.trim()):[],salary:Fe.salary||0,profileMatch:85,designation:Fe.designation,employer:Fe.employer,resume_url:Fe.resume_url,status:Fe.status}));c(Me),h($e.total),b(ye),u(!0),l([])}catch(Ae){x(((xe=(lt=Ae.response)==null?void 0:lt.data)==null?void 0:xe.message)||Ae.message||"Failed to search candidates. Please try again."),c([]),h(0),u(!0)}finally{f(!1)}},fe=Math.max(1,Math.ceil(p/E)),ne=ue=>{l(ye=>ye.includes(ue)?ye.filter(Ye=>Ye!==ue):[...ye,ue])},he=()=>{i.length===o.length?l([]):l(o.map(ue=>ue.id))},M=async ue=>{try{R(!0),A(!0);const ye=await KU(ue);P(ye)}catch{P(null)}finally{R(!1)}},Se=(ue,ye)=>{L({id:ue,name:ye}),Q(!0)},me=async()=>{var Ye,lt;const ue=Kt(k),ye=Ml(ue,"Search name");if(ye){x(ye);return}try{_(!0),await q.post("/v1/resdex/saved-search",{name:ue,query:Kt(t.keyword),logic:t.logic,min_exp:t.min_exp||null,max_exp:t.max_exp||null,location:Kt(t.location)||null}),S(""),w(!1)}catch(xe){x(((lt=(Ye=xe.response)==null?void 0:Ye.data)==null?void 0:lt.detail)||"Failed to save search. Please try again.")}finally{_(!1)}},Pe=async()=>{var ue,ye,Ye;if(W)try{Y(!0);const lt=await q.post("/v1/resdex/invite",{candidate_id:W.id,message:I});B(((ue=lt.data)==null?void 0:ue.message)||"Invite sent successfully!"),K(""),setTimeout(()=>{Q(!1),B(null),L(null)},1800)}catch(lt){B({error:((Ye=(ye=lt.response)==null?void 0:ye.data)==null?void 0:Ye.detail)||lt.message||"Failed to send invite"})}finally{Y(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Search Candidates"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Keyword"}),n.jsx("input",{type:"text",name:"keyword",value:t.keyword,onChange:ce,placeholder:"Skills, name, company...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search across name, skills, company, and resume"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search Logic"}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"logic",value:"AND",checked:t.logic==="AND",onChange:ce}),"AND"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"logic",value:"OR",checked:t.logic==="OR",onChange:ce}),"OR"]})]})]}),n.jsxs("button",{onClick:()=>a(ue=>!ue),className:"text-sm text-purple-600 font-semibold flex items-center gap-1",children:[n.jsx(W1,{size:14}),"Advanced Filters"]}),s&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Min Experience"}),n.jsx("input",{type:"number",name:"min_exp",value:t.min_exp,onChange:ce,placeholder:"0",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Max Experience"}),n.jsx("input",{type:"number",name:"max_exp",value:t.max_exp,onChange:ce,placeholder:"50",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",name:"location",value:t.location,onChange:ce,placeholder:"e.g., Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),n.jsx("button",{onClick:()=>ae(t,1),disabled:m,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-700 transition flex items-center justify-center gap-2 disabled:opacity-50",children:m?n.jsxs(n.Fragment,{children:[n.jsx(N_,{size:16,className:"animate-spin"}),"Searching..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Es,{size:16}),"Search"]})}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[n.jsx("span",{children:"Save this search for later use"}),n.jsx("button",{type:"button",onClick:()=>w(ue=>!ue),className:"text-purple-600 font-semibold",children:N?"Cancel":"Save Search"})]}),N&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{value:k,onChange:ue=>S(ue.target.value),onBlur:ue=>S(Kt(ue.target.value)),placeholder:"Search name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),n.jsx("button",{onClick:me,disabled:j,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition disabled:opacity-50",children:j?"Saving...":"Save"})]})]})]})}),n.jsx("div",{className:"lg:col-span-3",children:d?m?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(N_,{size:48,className:"mx-auto text-purple-400 mb-4 animate-spin"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Searching Candidates"}),n.jsx("p",{className:"text-gray-600",children:"Please wait while we search the database..."})]}):y?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Zs,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Search Error"}),n.jsx("p",{className:"text-red-700",children:y}),n.jsx("button",{onClick:()=>ae(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition",children:"Try Again"})]})]})}):o.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(Es,{size:48,className:"mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Results Found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"No candidates match your search criteria. Try adjusting your filters."}),G&&n.jsx("button",{onClick:()=>{r({keyword:"",logic:"OR",min_exp:"",max_exp:"",location:""}),u(!1)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition",children:"Clear Filters"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Search Results"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",o.length," of ",p," candidates"]})]}),n.jsx("button",{onClick:he,className:"px-3 py-2 text-sm font-semibold text-purple-600 hover:bg-purple-50 rounded-lg transition",children:i.length===o.length?"Deselect All":"Select All"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Page ",v," of ",fe]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ae(t,Math.max(1,v-1)),disabled:v===1||m,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),n.jsx("button",{onClick:()=>ae(t,Math.min(fe,v+1)),disabled:v===fe||m,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),n.jsx("div",{className:"space-y-3",children:o.map(ue=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-5 border border-gray-100",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("input",{type:"checkbox",className:"mt-1",checked:i.includes(ue.id),onChange:()=>ne(ue.id)}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:ue.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[ue.designation||"Role not specified","  ",ue.experience," years"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[ue.location,"  ",ue.email]}),ue.skills.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ue.skills.slice(0,6).map(ye=>n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full",children:ye},ye))})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>M(ue.id),className:"px-3 py-2 text-sm font-semibold text-gray-700 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(cl,{size:14}),"View"]}),n.jsxs("button",{onClick:()=>Se(ue.id,ue.name),className:"px-3 py-2 text-sm font-semibold text-white bg-purple-600 rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[n.jsx(Ri,{size:14}),"NVite"]})]})]})},ue.id))})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(Es,{size:48,className:"mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start Searching"}),n.jsx("p",{className:"text-gray-600",children:"Use the filters on the left to search for candidates matching your criteria"})]})})]}),T&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Candidate Profile"}),n.jsx("button",{onClick:()=>A(!1),children:n.jsx(Ar,{size:18})})]}),n.jsx("div",{className:"p-6",children:O?n.jsx("div",{className:"text-center text-gray-600",children:"Loading..."}):C?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Name:"})," ",C.full_name||C.name||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",C.email||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",C.phone||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Date of Birth:"})," ",C.dob||C.date_of_birth||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Location:"})," ",C.current_location||C.currentLocation||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"City:"})," ",C.city||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Pincode:"})," ",C.pincode||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Address:"})," ",C.current_address||C.currentAddress||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Permanent Address:"})," ",C.permanent_address||C.permanentAddress||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Applied Job:"})," ",C.job_title||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Classification:"})," ",C.classification||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Source:"})," ",C.source||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Referral:"})," ",C.referral||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Skills:"})," ",Array.isArray(C.skills)?C.skills.join(", "):C.skills||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Experience (years):"})," ",C.experience_years||C.experience||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Education:"})," ",C.education||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Current Employer:"})," ",C.current_employer||C.currentEmployer||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Previous Employers:"})," ",C.previous_employers||C.previousEmployers||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Notice Period:"})," ",C.notice_period||C.noticePeriod||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Expected CTC:"})," ",C.expected_salary||C.expectedCtc||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Preferred Location:"})," ",C.preferred_location||C.preferredLocation||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Languages Known:"})," ",C.languages_known||C.languagesKnown||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Ready to Relocate:"})," ",C.ready_to_relocate!==void 0?C.ready_to_relocate?"Yes":"No":C.readyToRelocate!==void 0?C.readyToRelocate?"Yes":"No":""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"LinkedIn:"})," ",C.linkedin_url||C.linkedinUrl||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"GitHub:"})," ",C.github_url||C.githubUrl||""]})]}):n.jsx("div",{className:"text-center text-gray-600",children:"No data found."})})]})}),F&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Send NVite"}),n.jsx("button",{onClick:()=>Q(!1),children:n.jsx(Ar,{size:18})})]}),n.jsx("div",{className:"p-6",children:re?n.jsx("div",{className:"text-center",children:re.error?n.jsx("p",{className:"text-red-600",children:re.error}):n.jsx("p",{className:"text-green-600",children:re})}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Candidate: ",W==null?void 0:W.name]}),n.jsx("textarea",{value:I,onChange:ue=>K(ue.target.value),placeholder:"Add a personal message...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:"4"}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx("button",{onClick:()=>Q(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-900 hover:bg-gray-50 transition",children:"Cancel"}),n.jsx("button",{onClick:Pe,disabled:D,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:D?n.jsxs(n.Fragment,{children:[n.jsx(N_,{size:16,className:"animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(uu,{size:16}),"Send Invite"]})})]})]})})]})})]})}function IF(){const e=`Dear {{name}},

Greetings from {{company}}!

We came across your profile and believe you could be a great fit for the position of {{job_title}} at our organization.

 Job Role: {{job_title}}
 Location: {{location}}

If you are interested, we would love for you to apply using the link below:

 Apply Here: {{apply_link}}

Our team will review your application and get in touch if your profile matches our requirements.

Best regards,
{{recruiter}}
{{company}}`,[t,r]=g.useState([]),[s,a]=g.useState([]),[i,l]=g.useState(""),[o,c]=g.useState(new Set),[d,u]=g.useState(""),[m,f]=g.useState(""),[y,x]=g.useState(""),[p,h]=g.useState(""),[v,b]=g.useState(""),[j,_]=g.useState(""),[N,w]=g.useState(e),[k,S]=g.useState(!1),[E,T]=g.useState(!1),[A,C]=g.useState(!1),[P,O]=g.useState(null),[R,F]=g.useState(""),[Q,W]=g.useState([]),[L,I]=g.useState(!1),K=(ne,he="")=>ne==null?he:typeof ne=="object"?ne.full_name?String(ne.full_name):ne.name?String(ne.name):JSON.stringify(ne):String(ne);g.useEffect(()=>{D(),Y(),re();const ne=localStorage.getItem("user");if(ne)try{const he=JSON.parse(ne);_((he==null?void 0:he.full_name)||(he==null?void 0:he.name)||(he==null?void 0:he.email)||""),b((he==null?void 0:he.company_name)||(he==null?void 0:he.company)||"")}catch{_(""),b("")}},[]);async function D(ne=""){var he,M,Se;S(!0),F("");try{const me=await q.get("/v1/candidates",{params:{search:ne||void 0}}),Pe=((he=me.data)==null?void 0:he.data)??me.data??[];r(Array.isArray(Pe)?Pe:[]),c(new Set)}catch(me){F(K((Se=(M=me==null?void 0:me.response)==null?void 0:M.data)==null?void 0:Se.detail,"Failed to load candidates. Please try again."))}finally{S(!1)}}async function Y(){var ne,he;T(!0);try{const M=await Up(),Se=((ne=M.data)==null?void 0:ne.jobs)??((he=M.data)==null?void 0:he.data)??M.data??[];if(a(Array.isArray(Se)?Se:[]),Array.isArray(Se)&&Se.length>0){const me=Se[0];f(me.title||me.job_title||""),x(me.location||"");const Pe=me.job_id||me.id||"";Pe&&h(`${window.location.origin}/careers/${Pe}`)}}catch{a([])}finally{T(!1)}}async function re(){var ne;I(!0);try{const he=await q.get("/v1/resdex/invite");W(((ne=he.data)==null?void 0:ne.results)||[])}catch{W([])}finally{I(!1)}}const B=g.useMemo(()=>{if(!i.trim())return t;const ne=i.toLowerCase();return t.filter(he=>[he.full_name,he.name,he.email,he.phone].filter(Boolean).some(M=>String(M).toLowerCase().includes(ne)))},[t,i]),G=B.length>0&&B.every(ne=>o.has(ne.id??ne._id));function ce(ne){c(he=>{const M=new Set(he);return M.has(ne)?M.delete(ne):M.add(ne),M})}function ae(){c(G?new Set:new Set(B.map(ne=>ne.id??ne._id)))}async function fe(){var ne,he;if(o.size===0){F("Please select at least one candidate.");return}if(!d){F("Please select a job.");return}if(!p){F("Apply link is required.");return}C(!0),F(""),O(null);try{const M={candidate_ids:Array.from(o),job_id:d,job_title:m,job_location:y,apply_link:p,recruiter_name:j||"Recruiter",company_name:v||"Company",message_template:N||""},Se=await q.post("/nvite/send-job-invite",M);O(Se.data),c(new Set),C(!1),re()}catch(M){F(K((he=(ne=M==null?void 0:M.response)==null?void 0:ne.data)==null?void 0:he.detail,"Failed to send job invites. Please try again.")),C(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Send NVite"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Select candidates, choose a job, and send NVites in real time"})]}),n.jsxs("button",{onClick:()=>{D(),Y()},className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx($l,{size:16}),"Refresh"]})]}),R&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Zs,{size:18,className:"mt-0.5"}),n.jsx("span",{children:K(R,"")})]}),P&&n.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oi,{size:18}),"Sent: ",P.sent,"  Failed: ",P.failed]}),Array.isArray(P.details)&&P.details.length>0&&n.jsx("div",{className:"text-sm text-green-800",children:P.details.slice(0,6).map((ne,he)=>n.jsxs("div",{children:[K(ne.candidate),": ",K(ne.status)]},`${ne.candidate}-${he}`))})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"xl:col-span-2 bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(Es,{size:18}),"Candidates"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:i,onChange:ne=>l(ne.target.value),placeholder:"Search by name, email, phone",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),n.jsx("button",{onClick:()=>D(i),className:"px-3 py-2 rounded-lg bg-gray-100 text-sm font-semibold",children:"Search"})]})]}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm text-gray-600",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:G,onChange:ae}),"Select all (",B.length,")"]}),n.jsxs("span",{children:["Selected: ",o.size]})]}),k?n.jsx("div",{className:"text-gray-600",children:"Loading candidates..."}):B.length===0?n.jsx("div",{className:"text-gray-600",children:"No candidates found."}):n.jsx("div",{className:"space-y-2 max-h-[420px] overflow-y-auto",children:B.map(ne=>n.jsxs("label",{className:"flex items-center justify-between gap-3 p-3 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:o.has(ne.id??ne._id),onChange:()=>ce(ne.id??ne._id)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:K(ne.full_name||ne.name)}),n.jsxs("p",{className:"text-xs text-gray-600",children:[K(ne.email),"  ",K(ne.phone)]})]})]}),n.jsx("span",{className:"text-xs text-gray-500",children:K(ne.status)})]},ne.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"NVite Details"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Choose a job and include a short message"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job (optional)"}),n.jsxs("select",{value:d,onChange:ne=>{const he=ne.target.value;u(he);const M=(Array.isArray(s)?s:[]).find(Se=>Se.id===he);if(M){f(M.title||M.job_title||""),x(M.location||"");const Se=M.job_id||M.id||"";Se&&h(`${window.location.origin}/careers/${Se}`)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select job"}),E?n.jsx("option",{children:"Loading jobs..."}):(Array.isArray(s)?s:[]).map(ne=>n.jsx("option",{value:ne.id,children:ne.title||ne.job_title||"Untitled Job"},ne.id))]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Recruiter Name"}),n.jsx("input",{value:j,onChange:ne=>_(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Company Name"}),n.jsx("input",{value:v,onChange:ne=>b(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Title"}),n.jsx("input",{value:m,onChange:ne=>f(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Location"}),n.jsx("input",{value:y,onChange:ne=>x(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Apply Link"}),n.jsx("input",{value:p,onChange:ne=>h(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message Template"}),n.jsx("textarea",{value:N,onChange:ne=>w(ne.target.value),placeholder:"Use {{name}}, {{job_title}}, {{company}}, {{location}}, {{apply_link}}, {{recruiter}}",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"5"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tip: Use ","{{name}}"," to auto-insert candidate name."]})]}),n.jsxs("button",{onClick:fe,disabled:A||o.size===0,className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[n.jsx(Ri,{size:16}),A?"Sending...":"Send NVite"]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"NVite History"}),n.jsxs("button",{onClick:re,className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx($l,{size:16}),"Refresh"]})]}),L?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading invites..."}):Q.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No NVites sent yet."}):n.jsx("div",{className:"divide-y",children:Q.map(ne=>n.jsxs("div",{className:"p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:K(ne.candidate_name||"Candidate")}),n.jsx("p",{className:"text-sm text-gray-600",children:K(ne.job_title||"No job selected")})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-semibold",children:"Status:"})," ",K(ne.status||"sent")]}),n.jsx("div",{className:"text-sm text-gray-500",children:ne.sent_at?new Date(ne.sent_at).toLocaleString():""})]},ne.id))})]})]})}function FF(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState(!1),[i,l]=g.useState(""),[o,c]=g.useState(!1),[d,u]=g.useState(!1),[m,f]=g.useState([]),[y,x]=g.useState({search_name:"",skills:"",location:"",experience_min:"",experience_max:"",folder_id:""});g.useEffect(()=>{p(),h()},[]);async function p(){var k,S,E;a(!0),l("");try{const T=await q.get("/searches");r(((k=T.data)==null?void 0:k.results)||[])}catch(T){l(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Failed to load saved searches. Please try again.")}finally{a(!1)}}async function h(){var k;try{const S=await q.get("/v1/folders");f(((k=S.data)==null?void 0:k.results)||[])}catch(S){console.error("Failed to load folders:",S)}}function v(k){const{name:S,value:E}=k.target;x(T=>({...T,[S]:E}))}async function b(k){var O,R;k.preventDefault();const S=Kt(y.search_name),E=y.folder_id||null,T=Ml(S,"Search name");if(T){l(T);return}if(m3e({list:t,name:S,groupValue:E,nameKey:"search_name",groupKey:"folder_id"})){l("Duplicate Feature name under the same Sub-Category is not allowed.");return}const P={skills:y.skills.split(",").map(F=>F.trim()).filter(Boolean),location:Kt(y.location)||null,experience_min:y.experience_min?Number(y.experience_min):null,experience_max:y.experience_max?Number(y.experience_max):null};u(!0),l("");try{await q.post("/searches/save",{search_name:S,filters:P,folder_id:E}),x({search_name:"",skills:"",location:"",experience_min:"",experience_max:"",folder_id:""}),c(!1),await p()}catch(F){l(((R=(O=F==null?void 0:F.response)==null?void 0:O.data)==null?void 0:R.detail)||"Unable to save search. Please try again.")}finally{u(!1)}}async function j(k){var S,E;if(window.confirm("Delete this saved search?"))try{await q.delete(`/searches/${k}`),await p()}catch(T){l(((E=(S=T==null?void 0:T.response)==null?void 0:S.data)==null?void 0:E.detail)||"Unable to delete saved search. Please try again.")}}async function _(k){var S,E,T;try{const C=((S=(await q.get(`/searches/${k}/run`)).data)==null?void 0:S.filters)||{},P=new URLSearchParams;C.skills&&C.skills.length>0&&P.set("keyword",C.skills.join(" ")),C.location&&P.set("location",C.location),C.experience_min!==null&&C.experience_min!==void 0&&P.set("min_exp",String(C.experience_min)),C.experience_max!==null&&C.experience_max!==void 0&&P.set("max_exp",String(C.experience_max)),e(`/recruiter/resdex/search-resumes?${P.toString()}`)}catch(A){l(((T=(E=A==null?void 0:A.response)==null?void 0:E.data)==null?void 0:T.detail)||"Unable to run search. Please try again.")}}const N=k=>{if(!k)return"No filters";const S=[];return k.skills&&k.skills.length>0&&S.push(`Skills: ${k.skills.join(", ")}`),k.location&&S.push(`Location: ${k.location}`),k.experience_min!==null&&k.experience_min!==void 0&&S.push(`Min Exp: ${k.experience_min}`),k.experience_max!==null&&k.experience_max!==void 0&&S.push(`Max Exp: ${k.experience_max}`),S.length?S.join(" | "):"No filters"},w=m.reduce((k,S)=>(k[S.id]=S.name,k),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Searches"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Save, reuse, and organize your Resdex searches"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:p,className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx($l,{size:16}),"Refresh"]}),n.jsxs("button",{onClick:()=>c(k=>!k),className:"px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 flex items-center gap-2",children:[n.jsx(Ya,{size:16}),"New Search"]})]})]}),i&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Zs,{size:18,className:"mt-0.5"}),n.jsx("span",{children:i})]}),o&&n.jsxs("form",{onSubmit:b,className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Search Name"}),n.jsx("input",{name:"search_name",value:y.search_name,onChange:v,onBlur:k=>x(S=>({...S,search_name:Kt(k.target.value)})),placeholder:"e.g., React Developers Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Skills (comma separated)"}),n.jsx("input",{name:"skills",value:y.skills,onChange:v,placeholder:"React, Node, SQL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Location"}),n.jsx("input",{name:"location",value:y.location,onChange:v,placeholder:"Bangalore",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Experience Min"}),n.jsx("input",{name:"experience_min",type:"number",min:"0",value:y.experience_min,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Experience Max"}),n.jsx("input",{name:"experience_max",type:"number",min:"0",value:y.experience_max,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Folder (optional)"}),n.jsxs("select",{name:"folder_id",value:y.folder_id,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:"Unfiled"}),m.map(k=>n.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 rounded-lg border text-gray-700",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 disabled:opacity-50",children:d?"Saving...":"Save Search"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(Es,{size:18}),"Saved Searches"]}),n.jsx("div",{className:"text-sm text-gray-500",children:s?"Loading...":`${t.length} saved`})]}),s?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading saved searches..."}):t.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No saved searches yet."}):n.jsx("div",{className:"divide-y",children:t.map(k=>n.jsxs("div",{className:"p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.search_name}),n.jsx("p",{className:"text-sm text-gray-600",children:N(k.filters)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Folder: ",k.folder_id?w[k.folder_id]||"Unknown":"Unfiled"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>_(k.id),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Run Search"}),n.jsxs("button",{onClick:()=>j(k.id),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold flex items-center gap-1",children:[n.jsx(ff,{size:14}),"Delete"]})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Results: ",k.result_count||0,"  Created: ",k.created_at?new Date(k.created_at).toLocaleDateString():""]})]},k.id))})]})]})}function DF(){const e=Et(),[t,r]=g.useState([]),[s,a]=g.useState([]),[i,l]=g.useState(!1),[o,c]=g.useState(!1),[d,u]=g.useState(""),[m,f]=g.useState(""),[y,x]=g.useState(""),[p,h]=g.useState(!1),[v,b]=g.useState("list"),[j,_]=g.useState(null),[N,w]=g.useState([]),[k,S]=g.useState(!1);g.useEffect(()=>{E(),T()},[]);async function E(){var L,I,K;l(!0),u("");try{const D=await q.get("/v1/folders");r(((L=D.data)==null?void 0:L.results)||[])}catch(D){u(((K=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:K.detail)||"Failed to load folders. Please try again.")}finally{l(!1)}}async function T(){var L;c(!0);try{const K=((L=(await q.get("/searches")).data)==null?void 0:L.results)||[];return a(K),K}catch(I){return console.error("Failed to load searches:",I),[]}finally{c(!1)}}async function A(L){var B,G;L.preventDefault();const I=Kt(m),K=Kt(y),D=Ml(I,"Folder name");if(D){u(D);return}const Y=Nc(K,{minLength:20});if(Y){u(Y);return}if(t.some(ce=>Kt(ce==null?void 0:ce.name).toLowerCase()===I.toLowerCase())){u("Duplicate Feature name under the same Sub-Category is not allowed.");return}h(!0),u("");try{await q.post("/v1/folders",{name:I,description:K||null}),f(""),x(""),await E()}catch(ce){u(((G=(B=ce==null?void 0:ce.response)==null?void 0:B.data)==null?void 0:G.detail)||"Unable to create folder. Please try again.")}finally{h(!1)}}async function C(L){var I,K;if(window.confirm("Delete this folder? Searches will be moved to Unfiled."))try{await q.delete(`/v1/folders/${L}`),(j==null?void 0:j.id)===L&&(b("list"),_(null),w([])),await E(),await T()}catch(D){u(((K=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:K.detail)||"Unable to delete folder. Please try again.")}}const P=g.useMemo(()=>s.filter(L=>!L.folder_id),[s]);g.useMemo(()=>{const L={};return t.forEach(I=>{L[I.id]=I}),L},[t]);const O=L=>{if(!L)return"No filters";const I=[];return L.skills&&L.skills.length>0&&I.push(`Skills: ${L.skills.join(", ")}`),L.location&&I.push(`Location: ${L.location}`),L.experience_min!==null&&L.experience_min!==void 0&&I.push(`Min Exp: ${L.experience_min}`),L.experience_max!==null&&L.experience_max!==void 0&&I.push(`Max Exp: ${L.experience_max}`),I.length?I.join(" | "):"No filters"};async function R(L){var I,K,D;if(_(L),b("folder"),L.id==="unfiled"){w(P);return}S(!0);try{const Y=await q.get(`/v1/folders/${L.id}/searches`);w(((I=Y.data)==null?void 0:I.results)||[])}catch(Y){u(((D=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:D.detail)||"Unable to load folder contents. Please try again."),w([])}finally{S(!1)}}async function F(L,I){var K,D;try{await q.put(`/searches/${L}/folder`,{folder_id:I||null}),await E();const Y=await T();j&&(j.id==="unfiled"?w(Y.filter(re=>!re.folder_id)):await R(j))}catch(Y){u(((D=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:D.detail)||"Unable to move search. Please try again.")}}async function Q(L){var I,K,D;try{const re=((I=(await q.get(`/searches/${L.id}/run`)).data)==null?void 0:I.filters)||{},B=new URLSearchParams;re.skills&&re.skills.length>0&&B.set("keyword",re.skills.join(" ")),re.location&&B.set("location",re.location),re.experience_min!==null&&re.experience_min!==void 0&&B.set("min_exp",String(re.experience_min)),re.experience_max!==null&&re.experience_max!==void 0&&B.set("max_exp",String(re.experience_max)),e(`/recruiter/resdex/search-resumes?${B.toString()}`)}catch(Y){u(((D=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:D.detail)||"Unable to run search. Please try again.")}}const W=t.length+1;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Folders"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Organize your saved searches into folders"})]}),n.jsxs("button",{onClick:()=>{E(),T()},className:"px-3 py-2 rounded-lg border text-sm font-semibold text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx($l,{size:16}),"Refresh"]})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[n.jsx(Zs,{size:18,className:"mt-0.5"}),n.jsx("span",{children:d})]}),v==="list"&&n.jsxs(n.Fragment,{children:[n.jsxs("form",{onSubmit:A,className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(G4e,{size:18}),"Create Folder"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Folder Name"}),n.jsx("input",{value:m,onChange:L=>f(L.target.value),onBlur:L=>f(Kt(L.target.value)),placeholder:"e.g., Senior Frontend",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description (optional)"}),n.jsx("input",{value:y,onChange:L=>x(L.target.value),onBlur:L=>x(Kt(L.target.value)),placeholder:"Short description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 rounded-lg bg-emerald-600 text-white font-semibold hover:bg-emerald-700 disabled:opacity-50",children:p?"Creating...":"Create Folder"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[n.jsx(K4e,{size:18}),"Your Folders"]}),n.jsx("div",{className:"text-sm text-gray-500",children:i?"Loading...":`${W} folders`})]}),i||o?n.jsx("div",{className:"p-6 text-gray-600",children:"Loading folders..."}):n.jsxs("div",{className:"divide-y",children:[n.jsxs("div",{className:"p-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Unfiled Searches"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Searches without a folder"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[P.length," searches"]}),n.jsx("button",{onClick:()=>R({id:"unfiled",name:"Unfiled Searches"}),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"View"})]})]}),t.length===0?n.jsx("div",{className:"p-10 text-center text-gray-600",children:"No folders yet."}):t.map(L=>n.jsxs("div",{className:"p-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.name}),n.jsx("p",{className:"text-sm text-gray-600",children:L.description||"No description"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[L.search_count," searches"]}),n.jsx("button",{onClick:()=>R(L),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Open"}),n.jsxs("button",{onClick:()=>C(L.id),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold flex items-center gap-1",children:[n.jsx(ff,{size:14}),"Delete"]})]})]},L.id))]})]})]}),v==="folder"&&j&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-5 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{b("list"),_(null),w([])},className:"px-3 py-2 border rounded-lg text-sm flex items-center gap-2",children:[n.jsx(cp,{size:16}),"Back"]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.name}),n.jsx("p",{className:"text-sm text-gray-600",children:j.description||"Saved searches in this folder"})]})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[N.length," searches"]})]}),k?n.jsx("div",{className:"text-sm text-gray-600",children:"Loading searches..."}):N.length===0?n.jsx("div",{className:"text-sm text-gray-600",children:"No searches in this folder."}):n.jsx("div",{className:"divide-y",children:N.map(L=>n.jsx("div",{className:"py-4 flex flex-col gap-2",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:L.search_name}),n.jsx("p",{className:"text-sm text-gray-600",children:O(L.filters)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Results: ",L.result_count||0]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:()=>Q(L),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-semibold",children:"Run Search"}),n.jsxs("select",{value:L.folder_id||"",onChange:I=>F(L.id,I.target.value),className:"px-3 py-2 rounded-lg border text-sm bg-white",children:[n.jsx("option",{value:"",children:"Unfiled"}),t.map(I=>n.jsx("option",{value:I.id,children:I.name},I.id))]}),L.folder_id&&n.jsx("button",{onClick:()=>F(L.id,null),className:"px-3 py-2 rounded-lg bg-red-50 text-red-700 text-sm font-semibold",children:"Remove"})]})]})},L.id))})]})]})}const Vo={experience:{min:"",max:"",type:"total"},location:{current:"",preferred:"",remote:!1},salary:{min:"",max:"",currency:"INR",type:"expected"},keywords:[],companies:[],designations:[],education:{degrees:[],institutions:[],majors:[],topTier:!1},certifications:[],activeCertsOnly:!1},cy=e=>String(e||"").split(",").map(t=>t.trim()).filter(Boolean),Go=e=>Array.isArray(e)?e.map(t=>String(t||"").trim()).filter(Boolean):cy(e),Kc=e=>Go(e).join(", "),pw=(e={})=>{var t,r,s;return{keywords:Kc(e.keywords),companies:Kc(e.companies),designations:Kc(e.designations),certifications:Kc(e.certifications),educationDegrees:Kc((t=e.education)==null?void 0:t.degrees),educationMajors:Kc((r=e.education)==null?void 0:r.majors),educationInstitutions:Kc((s=e.education)==null?void 0:s.institutions)}},$F=(e={},t=[])=>{var r,s,a,i,l,o,c,d,u,m,f,y,x,p;return{...Vo,...e,query:String(e.query||""),keywords:t.length>0?t:Go(e.keywords),companies:Go(e.companies),designations:Go(e.designations),certifications:Go(e.certifications),experience:{...Vo.experience,...e.experience||{},min:String(((r=e==null?void 0:e.experience)==null?void 0:r.min)||""),max:String(((s=e==null?void 0:e.experience)==null?void 0:s.max)||""),type:((a=e==null?void 0:e.experience)==null?void 0:a.type)==="relevant"?"relevant":Vo.experience.type},location:{...Vo.location,...e.location||{},current:String(((i=e==null?void 0:e.location)==null?void 0:i.current)||""),preferred:String(((l=e==null?void 0:e.location)==null?void 0:l.preferred)||""),remote:!!((o=e==null?void 0:e.location)!=null&&o.remote)},salary:{...Vo.salary,...e.salary||{},min:String(((c=e==null?void 0:e.salary)==null?void 0:c.min)||""),max:String(((d=e==null?void 0:e.salary)==null?void 0:d.max)||""),currency:String(((u=e==null?void 0:e.salary)==null?void 0:u.currency)||Vo.salary.currency),type:((m=e==null?void 0:e.salary)==null?void 0:m.type)==="current"?"current":Vo.salary.type},education:{...Vo.education,...e.education||{},degrees:Go((f=e==null?void 0:e.education)==null?void 0:f.degrees),majors:Go((y=e==null?void 0:e.education)==null?void 0:y.majors),institutions:Go((x=e==null?void 0:e.education)==null?void 0:x.institutions),topTier:!!((p=e==null?void 0:e.education)!=null&&p.topTier)},activeCertsOnly:!!e.activeCertsOnly}};function Oze({onSearch:e,loading:t,initialQuery:r="",initialKeywords:s,initialFilters:a=null,showSmartHint:i=!1}){const l=g.useMemo(()=>Array.isArray(s)?s.map(_=>String(_).trim()).filter(Boolean):cy(s),[s]),o=g.useMemo(()=>$F(a||{},l),[a,l]),[c,d]=g.useState(String(r||"")),[u,m]=g.useState(o),[f,y]=g.useState(pw(o));g.useEffect(()=>{d(String(r||"")),m(o),y(pw(o))},[r,o]);const x=(_,N,w)=>{m(k=>({...k,[_]:{...k[_],[N]:w}}))},p=(_,N,w=_)=>{y(k=>({...k,[w]:N})),m(k=>({...k,[_]:cy(N)}))},h=(_,N,w)=>{y(k=>({...k,[w]:N})),m(k=>({...k,education:{...k.education,[_]:cy(N)}}))},v=_=>{_!=null&&_.preventDefault&&_.preventDefault(),e({query:c.trim(),...u})},b=()=>{const _=$F({},[]);d(""),m(_),y(pw(_)),e({query:"",..._})},j=_=>{var k,S;if(_.key!=="Enter")return;const N=String(((k=_.target)==null?void 0:k.tagName)||"").toLowerCase(),w=String(((S=_.target)==null?void 0:S.type)||"").toLowerCase();N!=="textarea"&&N!=="button"&&N!=="select"&&(["checkbox","radio"].includes(w)||(_.preventDefault(),v()))};return n.jsxs("div",{className:"search-filters-panel",onKeyDown:j,children:[n.jsxs("div",{className:"search-filters-panel__header",children:[n.jsx("h3",{children:"Search & Filters"}),i&&n.jsx("p",{className:"smart-fill-hint",children:"AI filters auto-filled from job description"})]}),n.jsxs("div",{className:"filter-section filter-section--quick-search",children:[n.jsx("label",{className:"filter-label filter-label--quick-search",htmlFor:"semantic-quick-search",children:"Quick Search"}),n.jsxs("form",{className:"search-bar-section",onSubmit:v,children:[n.jsx("input",{id:"semantic-quick-search",type:"text",className:"semantic-search-input",placeholder:"e.g., React developer 5 years Bangalore",value:c,onChange:_=>d(_.target.value)}),n.jsx("button",{type:"submit",className:"search-btn",disabled:t,children:t?"Searching...":"Search"})]})]}),n.jsx("div",{className:"filters-divider"}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Keywords & Skills"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"React, Node.js, Python",value:f.keywords,onChange:_=>p("keywords",_.target.value,"keywords")}),n.jsx("small",{className:"filter-hint",children:"Comma-separated"})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Experience (Years)"}),n.jsxs("div",{className:"range-inputs",children:[n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Min",value:u.experience.min,onChange:_=>x("experience","min",_.target.value)}),n.jsx("span",{className:"range-separator",children:"to"}),n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Max",value:u.experience.max,onChange:_=>x("experience","max",_.target.value)})]}),n.jsxs("div",{className:"radio-group",children:[n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"expType",checked:u.experience.type==="total",onChange:()=>x("experience","type","total")}),n.jsx("span",{className:"option-label-text",children:"Total Experience"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"expType",checked:u.experience.type==="relevant",onChange:()=>x("experience","type","relevant")}),n.jsx("span",{className:"option-label-text",children:"Relevant Only"})]})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Location"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Current location",value:u.location.current,onChange:_=>x("location","current",_.target.value)}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Preferred location",value:u.location.preferred,onChange:_=>x("location","preferred",_.target.value)}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.location.remote,onChange:_=>x("location","remote",_.target.checked)}),n.jsx("span",{className:"option-label-text",children:"Open to remote work"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Salary Range"}),n.jsxs("div",{className:"radio-group",children:[n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"salaryType",checked:u.salary.type==="current",onChange:()=>x("salary","type","current")}),n.jsx("span",{className:"option-label-text",children:"Current CTC"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",className:"radio-input",name:"salaryType",checked:u.salary.type==="expected",onChange:()=>x("salary","type","expected")}),n.jsx("span",{className:"option-label-text",children:"Expected CTC"})]})]}),n.jsxs("div",{className:"range-inputs",children:[n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Min",value:u.salary.min,onChange:_=>x("salary","min",_.target.value)}),n.jsx("span",{className:"range-separator",children:"to"}),n.jsx("input",{type:"number",className:"filter-input-small",placeholder:"Max",value:u.salary.max,onChange:_=>x("salary","max",_.target.value)})]}),n.jsxs("select",{className:"filter-select",value:u.salary.currency,onChange:_=>x("salary","currency",_.target.value),children:[n.jsx("option",{value:"INR",children:"INR (LPA)"}),n.jsx("option",{value:"USD",children:"USD (Annual)"}),n.jsx("option",{value:"EUR",children:"EUR (Annual)"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Companies"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Google, Amazon, Microsoft",value:f.companies,onChange:_=>p("companies",_.target.value,"companies")}),n.jsx("small",{className:"filter-hint",children:"Current or previous employers"})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Designation / Role"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Software Engineer, Senior Dev",value:f.designations,onChange:_=>p("designations",_.target.value,"designations")})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Education"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Degree (e.g., B.Tech, MBA)",value:f.educationDegrees,onChange:_=>h("degrees",_.target.value,"educationDegrees")}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Major (e.g., Computer Science)",value:f.educationMajors,onChange:_=>h("majors",_.target.value,"educationMajors")}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"Institution (e.g., IIT, MIT)",value:f.educationInstitutions,onChange:_=>h("institutions",_.target.value,"educationInstitutions")}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.education.topTier,onChange:_=>x("education","topTier",_.target.checked)}),n.jsx("span",{className:"option-label-text",children:"Only top-tier institutions"})]})]}),n.jsxs("div",{className:"filter-section",children:[n.jsx("h4",{className:"filter-section-heading",children:"Certifications"}),n.jsx("input",{type:"text",className:"filter-input",placeholder:"AWS, PMP, Scrum Master",value:f.certifications,onChange:_=>p("certifications",_.target.value,"certifications")}),n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",className:"checkbox-input",checked:u.activeCertsOnly,onChange:_=>m(N=>({...N,activeCertsOnly:_.target.checked}))}),n.jsx("span",{className:"option-label-text",children:"Only active certifications"})]})]}),n.jsxs("div",{className:"filter-actions",children:[n.jsx("button",{type:"button",className:"btn-apply",onClick:v,disabled:t,children:"Apply Filters"}),n.jsxs("button",{type:"button",className:"btn-clear",onClick:b,children:[n.jsx("span",{className:"btn-clear__icon","aria-hidden":"true",children:""}),"Clear All"]})]})]})}const _a=(...e)=>{for(const t of e)if(t!=null&&!(typeof t=="string"&&t.trim()===""))return t;return null},Rze=e=>{if(!e)return null;if(typeof e=="object")return e;if(typeof e!="string")return null;try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}},MF=e=>{if(e==null)return null;const t=String(e).trim();return!t||t==="0"||t.toLowerCase()==="n/a"||t===""||t==="--"?null:t},Lze=e=>{if(e==null||e==="")return null;const t=Number(e);return Number.isFinite(t)?Math.min(100,Math.max(0,Math.round(t))):null},Ize=e=>String(e||"").trim().replace(/_/g," ").replace(/\s+/g," ").split(" ").map(t=>t.toLowerCase()==="am"?"AM":t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "),Fze=e=>!e||typeof e!="string"||!e.includes("@")?"":(e.split("@")[0]||"").replace(/[._-]+/g," ").replace(/\b\w/g,r=>r.toUpperCase()),Dze=e=>{if(!e)return null;const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?e:t.toLocaleString("en-IN")},$ze=e=>String(e).split(" ").map(t=>t.trim()).filter(Boolean).map(t=>t[0]).join("").slice(0,2).toUpperCase(),Mze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M4 5h16a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V7a2 2 0 012-2zm0 2l8 5 8-5H4zm16 10V9l-8 5-8-5v8h16z",fill:"currentColor"})}),Bze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M6.6 10.8a15.6 15.6 0 006.6 6.6l2.2-2.2a1 1 0 011-.25 11.4 11.4 0 003.6.6 1 1 0 011 1v3.4a1 1 0 01-1 1A18 18 0 013 5a1 1 0 011-1h3.4a1 1 0 011 1 11.4 11.4 0 00.6 3.6 1 1 0 01-.24 1z",fill:"currentColor"})}),Uze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M9 3h6a2 2 0 012 2v2h3a2 2 0 012 2v9a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2h3V5a2 2 0 012-2zm0 4h6V5H9v2zm12 4H3v7h18v-7z",fill:"currentColor"})}),zze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M20.6 13.3l-7.3 7.3a2 2 0 01-2.8 0l-8.1-8.1A2 2 0 012 11.1V4a2 2 0 012-2h7.1a2 2 0 011.4.6l8.1 8.1a2 2 0 010 2.8zM7.5 7A1.5 1.5 0 109 8.5 1.5 1.5 0 007.5 7z",fill:"currentColor"})}),Wze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M12 2a7 7 0 00-7 7c0 5 7 13 7 13s7-8 7-13a7 7 0 00-7-7zm0 9a2 2 0 110-4 2 2 0 010 4z",fill:"currentColor"})}),Vze=()=>n.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{d:"M20 6H6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2zm0 2v2h-4a2 2 0 100 4h4v2H6V8h14z",fill:"currentColor"})});function Hze({candidate:e,selected:t,onSelect:r,onViewDetails:s}){var C,P,O,R;const a=Rze(_a(e.parsed_data_json,e.parsedDataJson,e.parsed_data,e.parsedData,(C=e.parsed_resume)==null?void 0:C.data,(P=e.parsed_resume)==null?void 0:P.parsed_data,(O=e.parsedResume)==null?void 0:O.data,(R=e.parsedResume)==null?void 0:R.parsed_data))||{},i=Array.isArray(_a(e.work_history,e.employment_history,e.experience_history,a.work_history,a.work_experience,a.experience))?_a(e.work_history,e.employment_history,e.experience_history,a.work_history,a.work_experience,a.experience):[],l=Array.isArray(i)&&i.length>0?i[0]||{}:{},o=_a(e.id,e._id,e.candidate_id),c=_a(e.full_name,e.name)||Fze(e.email)||"Candidate",d=MF(_a(e.current_role,e.designation,e.designation_title,e.job_title,e.title,a.current_role,a.designation,a.designation_title,a.job_title,a.title,l.role,l.designation,l.title)),u=_a(e.email),m=_a(e.status,e.application_status,a.status),f=m?Ize(m):null,y=_a(e.phone,e.mobile,e.phone_number),x=MF(_a(e.current_location,e.location,e.city)),p=_a(e.experience_years,e.experience),v=p!=null&&String(p).trim()!==""?`${String(p).trim()} years experience`:null,j=(Array.isArray(e.skills)?e.skills:typeof e.skills=="string"?e.skills.split(/,|;/).map(F=>F.trim()).filter(Boolean):[]).slice(0,3),_=_a(e.expected_ctc,e.expected_salary,e.current_ctc),N=Number(String(_??"").replace(/[^0-9.]/g,"")),w=Number.isFinite(N)&&N>0?_:null,k=Lze(_a(e.semantic_score,e.match_score,e.relevance_score)),S=fb(_a(e.photo_url,e.photoUrl,e.avatar_url,e.avatarUrl,e.profile_picture,e.profilePicture,e.photo,e.image_url,e.imageUrl)),E=$ze(c)||"CA",[T,A]=g.useState(!1);return g.useEffect(()=>{A(!1)},[S,o]),n.jsxs("div",{className:`candidate-result-card ${t?"selected":""}`,children:[n.jsxs("div",{className:"card-header",children:[n.jsx("input",{type:"checkbox",className:"card-checkbox",checked:t,onChange:()=>r(o),"aria-label":`Select ${c}`}),n.jsx("div",{className:"card-avatar",children:S&&!T?n.jsx("img",{src:S,alt:`${c} profile`,className:"avatar-image",loading:"lazy",onError:()=>A(!0)}):n.jsx("div",{className:"avatar-placeholder",children:E})}),n.jsxs("div",{className:"card-info",children:[n.jsxs("div",{className:"card-title-row",children:[n.jsx("h3",{className:"card-name",children:c}),f&&n.jsx("span",{className:"card-status-badge",children:f}),k!==null&&k>0&&n.jsxs("span",{className:"match-badge",children:[k,"% Match"]})]}),d&&n.jsx("p",{className:"card-designation",children:d}),n.jsxs("div",{className:"card-contact",children:[u&&n.jsxs("span",{className:"contact-link",children:[n.jsx("span",{className:"contact-icon",children:n.jsx(Mze,{})}),u]}),y&&n.jsxs("span",{className:"contact-link",children:[n.jsx("span",{className:"contact-icon",children:n.jsx(Bze,{})}),y]})]})]})]}),n.jsxs("div",{className:"card-body",children:[v&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(Uze,{})}),n.jsx("span",{children:v})]}),j.length>0&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(zze,{})}),n.jsx("span",{children:j.join(", ")})]}),x&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(Wze,{})}),n.jsx("span",{children:x})]}),w&&n.jsxs("div",{className:"card-detail-row",children:[n.jsx("span",{className:"detail-icon",children:n.jsx(Vze,{})}),n.jsxs("span",{children:["INR ",Dze(w)," LPA"]})]})]}),n.jsx("div",{className:"card-actions",children:n.jsx("button",{type:"button",className:"btn-primary",onClick:()=>s(e),children:"View Details"})})]})}const $u=5,qze=(e,t)=>t<=7?Array.from({length:t},(r,s)=>s+1):e<=4?[1,2,3,4,5,"...",t]:e>=t-3?[1,"...",t-4,t-3,t-2,t-1,t]:[1,"...",e-1,e,e+1,"...",t];function Gze({candidates:e,loading:t,sortBy:r,onSortChange:s,onViewDetails:a}){const[i,l]=g.useState([]),[o,c]=g.useState(1),d=g.useRef(null),u=Math.max(1,Math.ceil(e.length/$u)),m=g.useMemo(()=>{const h=(o-1)*$u;return e.slice(h,h+$u)},[e,o]),f=g.useMemo(()=>qze(o,u),[o,u]),y=e.length?(o-1)*$u+1:0,x=Math.min(o*$u,e.length);g.useEffect(()=>{l([])},[e]),g.useEffect(()=>{c(1)},[e]),g.useEffect(()=>{o>u&&c(u)},[o,u]),g.useEffect(()=>{d.current&&d.current.scrollTo({top:0,behavior:"smooth"})},[o]);const p=h=>{l(v=>v.includes(h)?v.filter(b=>b!==h):[...v,h])};return n.jsxs("div",{className:"candidate-results-list",children:[n.jsxs("div",{className:"results-header",children:[n.jsxs("div",{className:"results-info",children:[n.jsx("span",{className:"results-count",children:t?"Searching...":`${e.length} candidates found`}),!t&&e.length>0&&n.jsxs("span",{className:"results-page-range",children:["Showing ",y,"-",x]}),i.length>0&&n.jsxs("span",{className:"results-selected",children:[i.length," selected"]})]}),n.jsx("div",{className:"results-controls",children:n.jsxs("div",{className:"results-sort-wrap",children:[n.jsx("label",{htmlFor:"results-sort-select",className:"results-sort-label",children:"Sort By"}),n.jsxs("select",{id:"results-sort-select",className:"sort-select",value:r,onChange:h=>s(h.target.value),children:[n.jsx("option",{value:"relevance",children:"Relevance"}),n.jsx("option",{value:"experience",children:"Experience"}),n.jsx("option",{value:"salary",children:"Salary"}),n.jsx("option",{value:"recent",children:"Recently Updated"}),n.jsx("option",{value:"name",children:"Name"})]})]})})]}),n.jsx("div",{className:"results-container",ref:d,children:t?n.jsxs("div",{className:"loading-state",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Searching candidates..."})]}):e.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-icon",children:"No results"}),n.jsx("h3",{children:"No candidates found"}),n.jsx("p",{children:"Try adjusting filters or search keywords."})]}):n.jsx("div",{className:"results-grid",children:m.map(h=>n.jsx(Hze,{candidate:h,selected:i.includes(h.id),onSelect:p,onViewDetails:a},h.id))})}),!t&&e.length>$u&&n.jsxs("div",{className:"results-pagination",children:[n.jsx("button",{type:"button",className:"results-pagination__btn",onClick:()=>c(h=>Math.max(1,h-1)),disabled:o===1,children:"Previous"}),n.jsx("div",{className:"results-pagination__pages",children:f.map((h,v)=>h==="..."?n.jsx("span",{className:"results-pagination__ellipsis",children:"..."},`ellipsis-${v}`):n.jsx("button",{type:"button",className:`results-pagination__page ${o===h?"is-active":""}`,onClick:()=>c(h),"aria-current":o===h?"page":void 0,children:h},h))}),n.jsx("button",{type:"button",className:"results-pagination__btn",onClick:()=>c(h=>Math.min(u,h+1)),disabled:o===u,children:"Next"})]})]})}const ds=e=>String(e||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),Jze=new Set(["a","an","and","or","for","with","in","on","of","to","the","year","years","yr","yrs"]),Kze=new Set(["engineer","developer","manager","analyst","consultant","architect","lead","specialist","designer","administrator","recruiter","executive","officer","intern","qa","tester"]),Pg=e=>e?ds(e).split(" ").filter(Boolean).filter(t=>!Jze.has(t)):[],ih=e=>e?Array.isArray(e)?e:typeof e=="string"?e.split(/,|;|\n/).map(t=>t.trim()).filter(Boolean):[]:[],Wu=e=>e==null?"":typeof e=="string"?e:typeof e=="number"?String(e):typeof e=="object"?e.name||e.title||e.skill||e.label||"":String(e),BF=e=>{if(e==null)return null;const t=Number(String(e).replace(/[^0-9.]/g,""));return Number.isNaN(t)?null:t},Xc=e=>ih(e).map(t=>ds(Wu(t))).filter(Boolean),Xze=e=>e.id||e._id||e.candidate_id||e.candidateId||e.public_id||e.email,wl=(...e)=>{for(const t of e)if(t!=null&&!(typeof t=="string"&&t.trim()===""))return t;return null},Yze=e=>{if(!e)return null;if(typeof e=="object")return e;if(typeof e!="string")return null;try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}},UF=(e={})=>{const t=wl(e.parsed_resume,e.parsedResume),r=wl(t==null?void 0:t.data,t==null?void 0:t.parsed_data,t==null?void 0:t.parsedData,t),s=wl(e.parsed_data_json,e.parsedDataJson,e.parsed_data,e.parsedData,e.resume_data,e.resumeData,r),a=Yze(s)||{};return a&&typeof a=="object"?a:{}},y0=(...e)=>e.flatMap(t=>ih(t)).filter(t=>t!=null),Zze=(e,t,r=2)=>{const s=String(e||""),a=String(t||"");if(!s||!a||Math.abs(s.length-a.length)>r)return Number.MAX_SAFE_INTEGER;const i=Array.from({length:a.length+1},(l,o)=>o);for(let l=1;l<=s.length;l+=1){let o=i[0];i[0]=l;let c=i[0];for(let d=1;d<=a.length;d+=1){const u=i[d];s[l-1]===a[d-1]?i[d]=o:i[d]=Math.min(o+1,i[d]+1,i[d-1]+1),o=u,i[d]<c&&(c=i[d])}if(c>r)return Number.MAX_SAFE_INTEGER}return i[a.length]},xw=(e,t,r=[])=>{if(!e)return!1;if(t.includes(e))return!0;if(e.length<5)return!1;const s=e.length>=8?2:1;return r.some(a=>!a||Math.abs(a.length-e.length)>s?!1:Zze(e,a,s)<=s)};class Qze{buildCandidateText(t){const r=UF(t),s=ih(wl(t.work_history,t.employment_history,t.experience_history,r.work_history,r.work_experience,r.experience)),a=Array.isArray(s)&&s.length>0?s[0]||{}:{},i=y0(t.skills,r.skills,t.skill_set,t.top_skills).map(d=>Wu(d)).join(" "),l=y0(t.certifications,r.certifications,t.certifications_text,r.certifications_text).map(d=>Wu(d)).join(" "),o=[t.current_employer,t.current_company,t.previous_employers,r.current_employer,r.current_company,r.previous_employers,a.company,a.employer,a.organization].join(" "),c=[t.education,t.degree,t.major,t.institution,t.university,r.education,r.degree,r.major,r.institution,r.university].join(" ");return ds([t.full_name,t.name,t.email,t.job_title,t.current_role,t.designation,t.designation_title,t.title,t.professional_summary,t.summary,t.profile_headline,t.experience_years,t.total_experience,r.full_name,r.name,r.job_title,r.current_role,r.designation,r.title,r.professional_summary,r.summary,r.profile_headline,r.experience_years,r.total_experience,t.resume_text,r.resume_text,i,l,o,c,t.current_location,t.preferred_location,t.location,t.city,r.current_location,r.preferred_location,r.location,r.city].join(" "))}matchesArray(t,r=[]){if(!r||r.length===0)return!0;const s=ds(t);return r.some(a=>s.includes(ds(a)))}matchesList(t,r=[]){if(!r||r.length===0)return!0;const s=ih(t).map(a=>ds(Wu(a)));return r.some(a=>s.some(i=>i.includes(ds(a))))}matchesRange(t,r,s){return r===""&&s===""?!0:!(t==null||r!==""&&t<Number(r)||s!==""&&t>Number(s))}isActiveCertification(t){if(!t)return!1;const r=t.expiry_date||t.expiryDate;if(!r)return!0;const s=new Date(r);return Number.isNaN(s.getTime())?!0:s.getTime()>Date.now()}search(t,r={},s=[]){var j,_,N,w,k,S,E,T,A,C,P,O,R,F,Q,W,L;const a=Pg(t),i=Xc(r.keywords),l=Xc(r.companies),o=Xc(r.designations),c=Xc(r.certifications),d=Xc((j=r.education)==null?void 0:j.degrees),u=Xc((_=r.education)==null?void 0:_.majors),m=Xc((N=r.education)==null?void 0:N.institutions),f=((w=r.experience)==null?void 0:w.min)!==""||((k=r.experience)==null?void 0:k.max)!=="",y=((S=r.salary)==null?void 0:S.min)!==""||((E=r.salary)==null?void 0:E.max)!=="",x=!!String(((T=r.location)==null?void 0:T.current)||"").trim(),p=!!String(((A=r.location)==null?void 0:A.preferred)||"").trim(),h=!!((C=r.location)!=null&&C.remote),v=a.length>0||i.length>0||f||y||x||p||h||l.length>0||o.length>0||c.length>0||d.length>0||u.length>0||m.length>0||!!r.activeCertsOnly,b=[];for(const I of s){const K=UF(I),D=this.buildCandidateText(I),Y=ih(wl(I.work_history,I.employment_history,I.experience_history,K.work_history,K.work_experience,K.experience)),re=Array.isArray(Y)&&Y.length>0?Y[0]||{}:{},B=y0(I.skills,K.skills,I.skill_set,I.top_skills).map(Je=>Wu(Je)),G=y0(I.certifications,K.certifications,I.certifications_text,K.certifications_text),ce=y0(I.current_employer,I.current_company,I.previous_employers,K.current_employer,K.current_company,K.previous_employers,re.company,re.employer,re.organization),ae=BF(wl(I.experience_years,I.experience,I.total_experience,I.relevant_experience_years,K.experience_years,K.experience,K.total_experience,K.relevant_experience_years,re.total_experience,re.experience)),fe=BF(((P=r.salary)==null?void 0:P.type)==="current"?wl(I.current_ctc,I.current_salary,K.current_ctc,K.current_salary,re.current_ctc,re.salary):wl(I.expected_ctc,I.expected_salary,K.expected_ctc,K.expected_salary,re.expected_ctc)),ne=ds(wl(I.current_location,I.location,I.city,K.current_location,K.location,K.city,"")),he=ds(wl(I.preferred_location,K.preferred_location,"")),M=I.remote||I.remote_ready||I.preferred_work_mode==="remote"||K.remote||K.remote_ready||K.preferred_work_mode==="remote",Se=ds([I.job_title,I.current_role,I.designation,I.designation_title,I.title,K.job_title,K.current_role,K.designation,K.designation_title,K.title,re.role,re.designation,re.title].join(" ")),me=ds([I.education,I.degree,I.major,I.institution,I.university,K.education,K.degree,K.major,K.institution,K.university].join(" ")),Pe=B.map(Je=>ds(Je)),ue=ce.map(Je=>ds(Wu(Je))),ye=G.map(Je=>typeof Je=="string"?Je:Je.name||""),Ye=ye.map(Je=>ds(Je)),lt=Pg(D),xe=Pg(Se),Ae=a.filter(Je=>xw(Je,D,lt)),$e=a.filter(Je=>Kze.has(Je));if($e.length>0&&!$e.some(Ke=>xw(Ke,Se,xe)))continue;const Me=a.length<=2?a.length:Math.min(a.length,Math.max(2,Math.ceil(a.length*.6)));if(!(a.length===0||Ae.length>=Me)||!this.matchesRange(ae,(O=r.experience)==null?void 0:O.min,(R=r.experience)==null?void 0:R.max)||(F=r.location)!=null&&F.current&&!ne.includes(ds(r.location.current))||(Q=r.location)!=null&&Q.preferred&&!he.includes(ds(r.location.preferred))||h&&!M||!this.matchesRange(fe,(W=r.salary)==null?void 0:W.min,(L=r.salary)==null?void 0:L.max)||!this.matchesList(B,i)||!this.matchesList(ce,l)||!this.matchesArray(Se,o)||d.length&&!this.matchesArray(me,d)||u.length&&!this.matchesArray(me,u)||m.length&&!this.matchesArray(me,m)||c.length&&!this.matchesList(ye,c)||r.activeCertsOnly&&(G.length===0||G.filter(Ke=>this.isActiveCertification(Ke)).length===0))continue;let We=0,Ze=0;const pt=(Je,Ke)=>{if(!Number.isFinite(Je)||Je<=0)return;const gt=Number.isFinite(Ke)?Math.max(0,Math.min(1,Ke)):0;Ze+=Je,We+=gt*Je};if(a.length>0){const Je=Ae.length;pt(35,Je/a.length);const Ke=a.filter(gt=>Pe.some(At=>xw(gt,At,Pg(At)))).length;pt(15,Ke/a.length)}if(i.length>0){const Je=i.filter(Ke=>Pe.some(gt=>gt.includes(Ke))||D.includes(Ke)).length;pt(25,Je/i.length)}if(o.length>0){const Je=o.filter(Ke=>Se.includes(Ke)).length;pt(10,Je/o.length)}if(l.length>0){const Je=l.filter(Ke=>ue.some(gt=>gt.includes(Ke))).length;pt(8,Je/l.length)}if(c.length>0){const Je=c.filter(Ke=>Ye.some(gt=>gt.includes(Ke))).length;pt(8,Je/c.length)}if(d.length>0){const Je=d.filter(Ke=>me.includes(Ke)).length;pt(6,Je/d.length)}if(u.length>0){const Je=u.filter(Ke=>me.includes(Ke)).length;pt(5,Je/u.length)}if(m.length>0){const Je=m.filter(Ke=>me.includes(Ke)).length;pt(6,Je/m.length)}if(x&&pt(6,ne.includes(ds(r.location.current))?1:0),p&&pt(5,he.includes(ds(r.location.preferred))?1:0),h&&pt(4,M?1:0),f&&pt(5,ae!==null?1:0),y&&pt(4,fe!==null?1:0),r.activeCertsOnly){const Je=G.filter(Ke=>this.isActiveCertification(Ke)).length;pt(3,Je>0?1:0)}const Ve=Ze>0?Math.min(100,Math.max(0,Math.round(We/Ze*100))):0;b.push({...I,id:Xze(I),semantic_score:v?Ve:0})}return b}}const eWe=new Qze,tWe=200,rWe=new Set(["interview_scheduled","interview_completed","selected","negotiation","offer_extended","offer_accepted","offer_declined","hired","joined","rejected","client_rejected"]),nWe={interview_scheduled:"Actions disabled: interview already scheduled",interview_completed:"Actions disabled: interview already completed",selected:"Actions disabled: candidate already selected",negotiation:"Actions disabled: candidate is in negotiation stage",offer_extended:"Actions disabled: offer already extended",offer_accepted:"Actions disabled: offer already accepted",offer_declined:"Actions disabled: offer already declined",hired:"Actions disabled: candidate already hired",joined:"Actions disabled: candidate already joined",rejected:"Actions disabled: candidate already rejected",client_rejected:"Actions disabled: candidate already rejected by client"},Og=e=>{const t=Number(String(e??"").replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},sWe=(e,t)=>{const r=[...e];switch(t){case"experience":return r.sort((s,a)=>Og(a.experience_years||a.experience||a.total_experience)-Og(s.experience_years||s.experience||s.total_experience));case"salary":return r.sort((s,a)=>Og(a.expected_ctc||a.expected_salary||a.current_ctc)-Og(s.expected_ctc||s.expected_salary||s.current_ctc));case"recent":return r.sort((s,a)=>new Date(a.updated_at||a.created_at||0).getTime()-new Date(s.updated_at||s.created_at||0).getTime());case"name":return r.sort((s,a)=>String(s.full_name||s.name||"").localeCompare(String(a.full_name||a.name||"")));case"relevance":default:return r.sort((s,a)=>Number(a.semantic_score||a.match_score||0)-Number(s.semantic_score||s.match_score||0))}},aWe=(e,t="Unable to load candidates for semantic search.")=>{var s,a;const r=(a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.detail;if(typeof r=="string"&&r.trim())return r;if(Array.isArray(r)){const i=r.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.msg||l.message)||"").filter(Boolean);if(i.length)return i.join(", ")}return r&&typeof r=="object"?r.msg||r.message||JSON.stringify(r):typeof(e==null?void 0:e.message)=="string"&&e.message.trim()?e.message:t};function zF(){const[e,t]=Os(),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState(!1),[c,d]=g.useState(e.get("q")||""),[u,m]=g.useState("relevance"),[f,y]=g.useState(""),[x,p]=g.useState(null),[h,v]=g.useState(null),[b,j]=g.useState(!1),[_,N]=g.useState(!1),[w,k]=g.useState(null),[S,E]=g.useState(null),[T,A]=g.useState({open:!1,recipient:"am",candidate:null}),C=g.useCallback(async()=>{o(!0),y("");try{const B=await zr.listCandidates({limit:tWe}),G=Array.isArray(B)?B:(B==null?void 0:B.items)||[];s(G),i(G)}catch(B){y(aWe(B)),s([]),i([])}finally{o(!1)}},[]);g.useEffect(()=>{C()},[C]),g.useEffect(()=>{const B=e.get("keywords"),G=B?B.split(",").map(ce=>ce.trim()).filter(Boolean):[];d(e.get("q")||""),p(G.length>0?{keywords:G}:null)},[e]);const P=g.useCallback(({query:B="",...G})=>{const ce=eWe.search(B,G,r);i(ce),d(B);const ae=new URLSearchParams(e);B?ae.set("q",B):ae.delete("q"),t(ae,{replace:!0})},[r,e,t]),O=g.useMemo(()=>sWe(a,u),[a,u]),R=g.useMemo(()=>h?eu(h,!0):null,[h]),F=g.useMemo(()=>{const B=String((h==null?void 0:h.status)||(h==null?void 0:h.application_status)||(R==null?void 0:R.status)||"").trim().toLowerCase();return rWe.has(B)},[h,R]),Q=g.useMemo(()=>{const B=String((h==null?void 0:h.status)||(h==null?void 0:h.application_status)||(R==null?void 0:R.status)||"").trim().toLowerCase();return nWe[B]||""},[h,R]),W=g.useCallback((B,G)=>{const ce=String((G==null?void 0:G.id)||(G==null?void 0:G._id)||(G==null?void 0:G.candidate_id)||"").trim();return ce?B.map(ae=>String((ae==null?void 0:ae.id)||(ae==null?void 0:ae._id)||(ae==null?void 0:ae.candidate_id)||"").trim()!==ce?ae:{...ae,...G}):B},[]),L=g.useCallback(async()=>{if(!h)return;const B=Bs(h);if(B)try{const G=await zr.getCandidateById(B);G&&typeof G=="object"&&(v(ce=>({...ce||{},...G||{}})),s(ce=>W(ce,G)),i(ce=>W(ce,G)))}catch{}},[h,W]),I=g.useCallback(async B=>{const G=(B==null?void 0:B.id)||(B==null?void 0:B.candidate_id)||(B==null?void 0:B._id)||"";if(G){j(!0),v(B);try{const ce=await zr.getCandidateById(G),ae=ce&&typeof ce=="object"?ce.candidate&&typeof ce.candidate=="object"?ce.candidate:ce:null;if(ae){const fe={...B,...ae};v(fe),s(ne=>W(ne,fe)),i(ne=>W(ne,fe))}}catch{v(B)}finally{j(!1)}}},[W]),K=g.useCallback((B,G=null)=>{k(B),E(G||null),N(!0)},[]),D=g.useCallback(B=>{var G,ce,ae,fe,ne,he;return{id:(B==null?void 0:B.account_manager_id)||((G=B==null?void 0:B.account_manager)==null?void 0:G.id)||((ce=B==null?void 0:B.account_manager)==null?void 0:ce.am_id)||"",name:(B==null?void 0:B.account_manager_name)||((ae=B==null?void 0:B.account_manager)==null?void 0:ae.name)||((fe=B==null?void 0:B.account_manager)==null?void 0:fe.am_name)||"",email:(B==null?void 0:B.account_manager_email)||((ne=B==null?void 0:B.account_manager)==null?void 0:ne.email)||((he=B==null?void 0:B.account_manager)==null?void 0:he.am_email)||""}},[]),Y=g.useCallback((B,G)=>{B&&A({open:!0,recipient:G,candidate:B})},[]),re=g.useCallback(async B=>{const G=T.candidate,ce=Bs(G);if(!ce)throw new Error("Candidate ID not found");const ae=(B==null?void 0:B.deliveryMode)||"email",fe=ae==="email"||ae==="both",ne=ae==="portal_note"||ae==="both",he=(B==null?void 0:B.recipient)||T.recipient||"candidate",M=String((B==null?void 0:B.subject)||"").trim(),Se=String((B==null?void 0:B.body)||"").trim(),me=String((B==null?void 0:B.to)||"").trim(),Pe=String((B==null?void 0:B.cc)||"").trim();if(!Se)throw new Error("Message body is required");if(ne){const ue=he==="am"?"Account Manager":"Candidate",ye=M?`[Message to ${ue}] ${M}
${Se}`:`[Message to ${ue}] ${Se}`;await zr.addCandidateNote(ce,{note:ye})}if(fe)if(he==="candidate"){const ue=new FormData;ue.append("subject",M||"Candidate Update"),ue.append("message_body",Se),ue.append("candidate_ids",ce),await q.post("/v1/candidates/email/send",ue,{headers:{"Content-Type":"multipart/form-data"}})}else{const ue=D(G),ye=me||ue.email;if(!ye)throw new Error("Account Manager email is not mapped for this candidate");const Ye=new URLSearchParams;M&&Ye.set("subject",M),Se&&Ye.set("body",Se),Pe&&Ye.set("cc",Pe),window.open(`mailto:${encodeURIComponent(ye)}?${Ye.toString()}`,"_blank")}await C(),await L()},[C,T.candidate,T.recipient,L,D]);return n.jsxs("div",{className:"semantic-search-page",children:[n.jsxs("div",{className:"semantic-search-page__header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"semantic-search-page__title",children:"Semantic Search"}),n.jsx("p",{className:"semantic-search-page__subtitle",children:"Smart filtering and relevance scoring across every candidate profile."})]}),n.jsx("div",{className:"semantic-search-page__header-actions",children:n.jsx("button",{type:"button",className:"semantic-search-refresh",onClick:C,children:"Refresh"})})]}),f&&n.jsx("div",{className:"semantic-search-page__context",children:n.jsx("span",{className:"semantic-search-page__context-text",children:f})}),n.jsxs("div",{className:"semantic-search-page__content",children:[n.jsx(Oze,{onSearch:P,loading:l,initialQuery:c,initialKeywords:x==null?void 0:x.keywords,initialFilters:x,showSmartHint:!1}),n.jsx(Gze,{candidates:O,loading:l,sortBy:u,onSortChange:m,onViewDetails:I})]}),h&&R&&n.jsx(aj,{candidate:h,profile:R,loading:b,onClose:()=>{v(null),j(!1)},onOpenFeedback:K,onMessageAm:B=>Y(B,"am"),onMessageCandidate:B=>Y(B,"candidate"),hideStatusControls:!0,hideSendToAMAction:!0,hideScheduleInterviewAction:!0,hideOpenFullProfileAction:!0,quickActionsDisabled:F,quickActionsDisabledMessage:Q}),_&&w&&n.jsx(p4,{isOpen:_,candidateId:Bs(w),candidateName:w.full_name||w.name||"Candidate",initialData:S,onClose:()=>{N(!1),E(null)},onSuccess:()=>{N(!1),E(null),C(),L()}}),T.open&&T.candidate&&n.jsx(bV,{candidate:T.candidate,recipient:T.recipient,onClose:()=>A({open:!1,recipient:"am",candidate:null}),onSend:async B=>{try{await re(B)}catch(G){alert((G==null?void 0:G.message)||"Failed to send message");return}A({open:!1,recipient:"am",candidate:null})}})]})}const iWe=["JavaScript","Python","Java","C++","C#","TypeScript","Go","Rust","PHP","Ruby","Swift","Kotlin","R","MATLAB","Scala","React","Vue.js","Angular","Next.js","Svelte","Ember.js","HTML5","CSS3","Tailwind CSS","Bootstrap","Material UI","Redux","Vuex","Node.js","Django","Flask","FastAPI","Spring Boot","Express.js","Laravel","ASP.NET","Ruby on Rails",".NET Core","MySQL","PostgreSQL","MongoDB","Redis","Elasticsearch","Firebase","DynamoDB","Oracle","SQL Server","Cassandra","AWS","Azure","Google Cloud","Docker","Kubernetes","Jenkins","GitLab CI/CD","Terraform","Ansible","React Native","Flutter","iOS","Android","Xamarin","Machine Learning","Deep Learning","TensorFlow","PyTorch","Scikit-learn","NLP","Computer Vision","Pandas","NumPy","Git","GitHub","GitLab","Bitbucket","Jira","Confluence","Slack","Figma","Adobe XD","REST API","GraphQL","WebSocket","Microservices","Message Queues","RabbitMQ","Kafka","Nginx","Apache","Linux","Windows","macOS","Leadership","Communication","Team Management","Project Management","Problem Solving","Critical Thinking","Agile","Scrum","Kanban","Cybersecurity","OWASP","SSL/TLS","Authentication","Authorization","Data Encryption"],WF=[...iWe].sort(),lWe=e=>{if(!e||e.trim().length===0)return WF;const t=e.toLowerCase();return WF.filter(r=>r.toLowerCase().includes(t)).slice(0,10)},T0=[{value:"remote",label:"Remote"},{value:"hybrid",label:"Hybrid"},{value:"onsite",label:"Onsite"}],fA=["3 Months","6 Months","12 Months","Full-Time"],hA=["Immediate","15 Days","30 Days","Negotiable"],JV=["INR","USD","EUR","GBP","AUD"],oWe=[{key:"active",label:"Active"},{key:"high_budget",label:"High Budget"},{key:"urgent",label:"Urgent"},{key:"remote",label:"Remote"}],cWe=["aws","azure","gcp","cloud","kubernetes","docker","devops","terraform"],dWe=["sql","mysql","postgres","postgresql","mongodb","oracle","redis","db","database","snowflake"],uWe=["java","spring","node","backend","python","django","flask",".net","dotnet","php","golang","api","microservice"],mWe=new Set(["title","location"]),fWe=new Set(["AI","API","AWS","BA","BI","BPO","CRM","ERP","ETL","GCP","HR","HRMS","IT","L2","L3","ML","PM","PMO","QA","REST","SAP","SRE","SQL","UI","UX"]),$k=/[\u203C-\u3299\uD83C-\uDBFF\uDC00-\uDFFF\uFE0F\u200D]/gu,hWe=/^[A-Za-z0-9 ]+$/,pWe=/^[A-Za-z0-9@.+\-()' ]+$/,VF=/^[A-Za-z0-9,\- ]+$/,KV=/^[A-Za-z0-9+.#/\- ]+$/,Ht=e=>typeof e=="string"?e.replace(/\s+/g," ").trim():e,Vi=e=>typeof e=="string"?e.trim():e,Jo=e=>!e||typeof e!="string"?!1:($k.lastIndex=0,$k.test(e)),dy=e=>typeof e=="string"&&/[@+\d]/.test(e),HF=e=>{if(!e)return!1;const t=String(e).replace(/[^A-Za-z0-9]/g,"");if(!t)return!1;const r=t.toUpperCase();return!!(fWe.has(r)||/\d/.test(t)||/^[A-Z]{2,4}$/.test(e))},xWe=e=>e?HF(e)?e.toUpperCase():/^[A-Za-z]+$/.test(e)?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.split(/([.+#/\-])/).map(t=>!t||/[.+#/\-]/.test(t)?t:HF(t)?t.toUpperCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""):"",sn=e=>{const t=Ht(e);return t?t.split(" ").map(r=>xWe(r)).join(" "):""},P0=e=>{const t=Ht(e);return t?t===sn(t):!1},gw=(e,t,r)=>{if(Number.isFinite(t)||Number.isFinite(r))return{experience_min:Number.isFinite(t)?String(t):"",experience_max:Number.isFinite(r)?String(r):""};const s=Ht(e||"");if(!s)return{experience_min:"",experience_max:""};const a=s.match(/\d+/g)||[];return{experience_min:a[0]||"",experience_max:a[1]||a[0]||""}},qF=e=>{const t=Ht(e||"");if(!t)return{ctc_currency:"INR",ctc_min:"",ctc_max:""};const r=t.match(/\b(INR|USD|EUR|GBP|AUD)\b/i),s=t.replace(/,/g,"").match(/\d+(\.\d+)?/g)||[];return{ctc_currency:r?r[1].toUpperCase():"INR",ctc_min:s[0]||"",ctc_max:s[1]||s[0]||""}},GF=e=>{const t=Ht(e||"");if(!t)return{work_start_time:"",work_end_time:""};const r=t.match(/([01]?\d|2[0-3]):([0-5]\d)\s*-\s*([01]?\d|2[0-3]):([0-5]\d)/);if(r)return{work_start_time:`${r[1].padStart(2,"0")}:${r[2]}`,work_end_time:`${r[3].padStart(2,"0")}:${r[4]}`};const s=i=>{const l=i.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!l)return"";let o=Number(l[1]);const c=l[2],d=l[3].toUpperCase();return d==="AM"&&o===12&&(o=0),d==="PM"&&o!==12&&(o+=12),`${String(o).padStart(2,"0")}:${c}`},a=t.split("-").map(i=>i.trim());return a.length===2?{work_start_time:s(a[0]),work_end_time:s(a[1])}:{work_start_time:"",work_end_time:""}},yw=e=>String(e||"").trim().toLowerCase(),gWe=(e,t,r)=>!t||!r?"":`${e} ${t} - ${r}`,yWe=(e,t)=>e===""&&t===""?"":e!==""&&t!==""?`${e}-${t}`:e||t||"",vw=e=>{const t=Ht(e||"").toLowerCase();return fA.find(r=>r.toLowerCase()===t)||""},bw=e=>{const t=Ht(e||"").toLowerCase();return hA.find(r=>r.toLowerCase()===t)||""},JF=({form:e,clients:t,requirements:r,editingJobId:s})=>{const a={},i={},l=Ht(e.title),o=Ht(e.client_ta),c=Ht(e.location),d=Vi(e.jd_text),u=Vi(e.notes_for_recruiter||""),m=(e.skills||[]).map(k=>Ht(k));if((!l||l.length<3||l.length>80||!hWe.test(l)||/^\d+$/.test(l)||Jo(l))&&(a.title="Enter a valid job title (e.g., Senior React Developer)"),e.client_id?t.some(S=>String(S.id)===String(e.client_id))||(a.client_id="Please select a valid client from the list"):a.client_id="Please select a client",o){const k=dy(o);o.length<2||o.length>60||!pWe.test(o)||Jo(o)?a.client_ta="Client TA must be 2-60 characters (name in Title Case or valid contact details)":!k&&!P0(o)&&(a.client_ta="Client TA name must be in Title Case (e.g., John Smith)")}T0.some(k=>k.value===e.mode)||(a.mode="Select a valid mode");const f=String(e.experience_min??"").trim(),y=String(e.experience_max??"").trim(),x=Number(f),p=Number(y),h=k=>/^\d+$/.test(k);(!f||!y||!h(f)||!h(y)||x<0||p>30||x>p)&&(a.experience="Experience must be between 0 and 30 years"),e.mode!=="remote"?c?(c.length<2||c.length>100||!VF.test(c)||!P0(c)||Jo(c))&&(a.location="Location must be 2-100 characters in Title Case (letters, numbers, commas, hyphens only)"):a.location="Location is required for Hybrid and Onsite jobs":c&&(!VF.test(c)||!P0(c)||Jo(c))&&(a.location="Location must be in Title Case with supported characters only"),e.duration&&!fA.includes(e.duration)&&(a.duration="Select a valid duration");const v=String(e.no_of_positions??"").trim();if(!/^\d+$/.test(v))a.no_of_positions="Number of positions must be a whole number";else{const k=Number(v);(k<1||k>500)&&(a.no_of_positions="Number of positions must be between 1 and 500")}const b=String(e.ctc_min??"").trim(),j=String(e.ctc_max??"").trim();if(!!(b||j)){if(!b||!j)a.ctc_range="Enter both Min CTC and Max CTC";else if(!/^\d+(\.\d{1,2})?$/.test(b)||!/^\d+(\.\d{1,2})?$/.test(j))a.ctc_range="CTC values must be numeric";else{const k=Number(b),S=Number(j);k<0||S<0?a.ctc_range="CTC values cannot be negative":k>S?a.ctc_range="Min CTC cannot be greater than Max CTC":k>0&&(S/k>8||S>1e8)&&(i.ctc_range="Warning: Salary range looks unusually wide. Please verify budget values.")}JV.includes(e.ctc_currency)||(a.ctc_range="Select a valid currency")}const N=e.work_start_time||"",w=e.work_end_time||"";if((N||w)&&(!N||!w?a.work_timings="Select both start and end time":N>=w&&(a.work_timings="Start time must be earlier than end time")),e.joining_preference&&!hA.includes(e.joining_preference)&&(a.joining_preference="Select a valid joining preference"),m.length<1||m.length>30)a.skills="Add at least one valid skill";else{const k=new Set;for(const S of m){if(S.length<2||S.length>30||!KV.test(S)||!P0(S)||Jo(S)){a.skills="Add at least one valid skill";break}const E=S.toLowerCase();if(k.has(E)){a.skills="Duplicate skills are not allowed";break}k.add(E)}}if(d?Jo(d)&&(a.jd_text="Emojis are not allowed in Job Description"):a.jd_text="Job description is required",u){const k=Nc(u,{minLength:20,required:!1,label:"Recruiter notes"});k&&(a.notes_for_recruiter=k)}if(Jo(e.notes_for_recruiter||"")&&(a.notes_for_recruiter="Emojis are not allowed in recruiter notes"),e.client_id&&l){const k=t.find(T=>String(T.id)===String(e.client_id)),S=Ht((k==null?void 0:k.client_name)||(k==null?void 0:k.name)||"").toLowerCase();r.find(T=>{if(s&&String(T.id)===String(s))return!1;const A=Ht(T.job_title||T.title||"").toLowerCase(),C=String(T.client_id||""),P=Ht(T.client_name||"").toLowerCase();return A===l.toLowerCase()&&(C===String(e.client_id)||S&&P===S)})&&(i.duplicate="Potential duplicate detected: same Client + Job Title already exists.")}return{errors:a,warnings:i,isValid:Object.keys(a).length===0}},jw={title:"",client_id:"",client_name:"",client_ta:"",mode:"hybrid",skills:[],jd_text:"",experience_min:"",experience_max:"",location:"",duration:"",no_of_positions:"1",ctc_currency:"INR",ctc_min:"",ctc_max:"",budget:"",work_start_time:"",work_end_time:"",work_timings:"",joining_preference:"",assign_recruiters:[],notes_for_recruiter:"",status:"open"},KF={job_id:"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[],last_date_to_apply:"",status:"draft"};function XF(){var le,Xe;Et();const[e,t]=Os(),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(""),[c,d]=g.useState(yw(e.get("status"))),[u,m]=g.useState(""),[f,y]=g.useState(""),[x,p]=g.useState([]),[h,v]=g.useState(!1),[b,j]=g.useState(!1),[_,N]=g.useState(!1),[w,k]=g.useState(!1),[S,E]=g.useState(null),[T,A]=g.useState("manual"),[C,P]=g.useState(!1),[O,R]=g.useState(null),[F,Q]=g.useState(""),[W,L]=g.useState([]),[I,K]=g.useState(7),[D,Y]=g.useState(5),[re,B]=g.useState(!1),[G,ce]=g.useState([]),[ae,fe]=g.useState(jw),[ne,he]=g.useState(KF),[M,Se]=g.useState(""),[me,Pe]=g.useState(null),[ue,ye]=g.useState(""),[Ye,lt]=g.useState(""),[xe,Ae]=g.useState(""),[$e,Me]=g.useState([]),[Fe,We]=g.useState(!1),Ze=g.useRef(null),pt=g.useRef(null),[Ve,Je]=g.useState([]),[Ke,gt]=g.useState([]),[At,Lt]=g.useState(null),[Bt,ar]=g.useState(!1),[er,Be]=g.useState(!1),[xt,mt]=g.useState(null),[It,Yt]=g.useState(null),[Ne,st]=g.useState({}),[qe,ft]=g.useState({});g.useEffect(()=>{d(yw(e.get("status")))},[e]);const kt=z=>{const pe=yw(z);d(pe);const De=new URLSearchParams(e);pe?De.set("status",pe):De.delete("status"),t(De,{replace:!0})},Oe=g.useMemo(()=>JF({form:ae,clients:Ke,requirements:r,editingJobId:At}),[ae,Ke,r,At]),je=g.useMemo(()=>({...Oe.errors,...qe}),[Oe.errors,qe]),Re=Oe.warnings,oe=Oe.isValid&&Object.keys(qe).length===0,Ue=z=>{p(pe=>pe.includes(z)?pe.filter(De=>De!==z):[...pe,z])},Ge=z=>{const pe=Number(z==null?void 0:z.ctc_max);if(Number.isFinite(pe)&&pe>0)return pe;const De=Ht((z==null?void 0:z.budget)||"");if(!De)return null;const ze=De.replace(/,/g,"").match(/\d+(\.\d+)?/g)||[];if(ze.length===0)return null;const yt=Number(ze[ze.length>1?1:0]);return Number.isFinite(yt)?yt:null},ie=z=>{if(Ht((z==null?void 0:z.joining_preference)||"").toLowerCase()==="immediate")return!0;const De=(z==null?void 0:z.date_created)||(z==null?void 0:z.created_at);if(De){const yt=new Date(De);if(!Number.isNaN(yt.getTime())&&(Date.now()-yt.getTime())/864e5<=7)return!0}const ze=Number((z==null?void 0:z.no_of_positions)||0);return Number.isFinite(ze)&&ze>=5},ge=g.useMemo(()=>{const z=l.trim().toLowerCase();return r.filter(pe=>{var Ut,_r,vn,Kr;const De=Array.isArray(pe.skills)?pe.skills.map(rn=>typeof rn=="string"?rn:(rn==null?void 0:rn.name)||""):[],ze=z?((Ut=pe.job_title||pe.title)==null?void 0:Ut.toLowerCase().includes(z))||((_r=pe.client_name)==null?void 0:_r.toLowerCase().includes(z))||((vn=pe.serial_number)==null?void 0:vn.toLowerCase().includes(z))||De.some(rn=>String(rn).toLowerCase().includes(z)):!0,yt=c?pe.status===c:!0,Ft=u?((Kr=pe.client_name)==null?void 0:Kr.toLowerCase())===u.toLowerCase()||pe.client_id===u:!0,tr=f?pe.mode===f:!0,Xt=x.every(rn=>{if(rn==="active")return["active","open","in_progress"].includes(String(pe.status||"").toLowerCase());if(rn==="remote")return pe.mode==="remote";if(rn==="high_budget"){const ba=Ge(pe);return Number.isFinite(ba)&&ba>=20}return rn==="urgent"?ie(pe):!0});return ze&&yt&&Ft&&tr&&Xt})},[r,l,c,u,f,x]),ut=g.useMemo(()=>r.filter(z=>z.status==="closed"),[r]),Z=g.useMemo(()=>c==="closed"?ge:ge.filter(z=>z.status!=="closed"),[ge,c]),H=async()=>{i(!0);try{const z=await q.get("/v1/job-management/requirements",{params:{status:c||void 0,client_name:u||void 0,search:l||void 0}});s(z.data.jobs||z.data.requirements||[])}catch(z){console.error("Error fetching requirements:",z);try{const pe=await Cs.getAmRequirements({status:c||void 0,client_name:u||void 0,q:l||void 0});s(pe.requirements||[])}catch(pe){console.error("Fallback also failed:",pe)}}finally{i(!1)}},V=async()=>{try{const z=await q.get("/v1/users?role=recruiter");Je(z.data.users||z.data||[])}catch{try{const pe=await q.get("/v1/am/recruiters");Je(pe.data||[])}catch(pe){console.error("Failed to load recruiters",pe)}}},ee=async()=>{var z;try{const pe=await q.get("/v1/am/clients"),ze=(((z=pe.data)==null?void 0:z.clients)||pe.data||[]).map(yt=>({id:yt.id||yt.client_id||Ht(yt.client_name||yt.name||"").toLowerCase().replace(/\s+/g,"_"),client_name:Ht(yt.client_name||yt.name||yt.company_name||"")})).filter(yt=>yt.id&&yt.client_name);gt(ze)}catch(pe){console.error("Failed to load clients",pe),gt([])}},X=async z=>{var pe,De;R(z.id),Q(z.title||z.job_title||""),L([]),K(7),Y(5),P(!0);try{const ze=await q.get("/v1/am/recruiters");ce(((pe=ze.data)==null?void 0:pe.data)||ze.data||[])}catch(ze){console.error("Failed to load recruiters:",ze);try{const yt=await q.get("/v1/users?role=recruiter"),Ft=((De=yt.data)==null?void 0:De.users)||yt.data||[];ce(Ft.map(tr=>({id:tr.id,full_name:tr.full_name||tr.name,email:tr.email,workload:0,status:"available",specialization:[]})))}catch(yt){console.error("Fallback also failed:",yt)}}},te=z=>{let pe=z.client_id||"";const De=Ht(z.client_name||"");if(De&&Ke.length>0){const Ut=Ke.find(_r=>Ht(_r.client_name||_r.name||"").toLowerCase()===De.toLowerCase());Ut&&(pe=Ut.id)}const ze=(()=>{const Ut=String(z.mode||"").toLowerCase();return Ut==="on-site"||Ut==="on site"?"onsite":T0.some(_r=>_r.value===Ut)?Ut:"hybrid"})(),yt=gw(z.experience,Number.isFinite(Number(z.min_experience))?Number(z.min_experience):void 0,Number.isFinite(Number(z.max_experience))?Number(z.max_experience):void 0),Ft=qF(z.budget),tr=GF(z.work_timings),Xt=(Array.isArray(z.skills)?z.skills:[]).map(Ut=>sn(Ht(Ut))).filter(Boolean).slice(0,30);fe({...jw,title:sn(Ht(z.title||z.job_title||"")),client_id:pe,client_name:De,client_ta:(()=>{const Ut=Ht(z.client_ta||"");return dy(Ut)?Ut:sn(Ut)})(),mode:ze,skills:Xt,jd_text:Vi(z.jd_text||z.description||""),experience_min:yt.experience_min,experience_max:yt.experience_max,location:ze==="remote"?"Remote":sn(Ht(z.location||"")),duration:vw(z.duration),no_of_positions:z.no_of_positions&&Number(z.no_of_positions)>0?String(z.no_of_positions):"1",ctc_currency:Ft.ctc_currency,ctc_min:Ft.ctc_min,ctc_max:Ft.ctc_max,budget:Ht(z.budget||""),work_start_time:tr.work_start_time,work_end_time:tr.work_end_time,work_timings:Ht(z.work_timings||""),joining_preference:bw(z.joining_preference),assign_recruiters:(z.recruiters||[]).map(Ut=>Ut.id),notes_for_recruiter:Vi(z.notes_for_recruiter||""),status:z.status||"active"}),st({}),ft({}),lt(""),Me([]),We(!1),Lt(z.id),v(!0)},ke=async()=>{if(W.length===0){mt("Please select at least one recruiter");return}B(!0);try{await q.post("/v1/am/requirements/assign",{requirement_id:O,recruiter_ids:W,sla_deadline_days:parseInt(I),target_cv_count:parseInt(D)}),Yt(`Successfully assigned ${W.length} recruiter(s)!`),P(!1),H(),setTimeout(()=>Yt(null),3e3)}catch(z){console.error("Assignment failed:",z),mt("Failed to assign recruiters. Please try again."),setTimeout(()=>mt(null),3e3)}finally{B(!1)}},ve=z=>{L(pe=>pe.includes(z)?pe.filter(De=>De!==z):[...pe,z])},J=async(z,pe)=>{const De=pe==="closed"?"close":"revoke (reopen)",ze=pe==="closed"?"Are you sure you want to close this requirement? It will be moved to Closed Requirements.":"Are you sure you want to revoke (reopen) this requirement? It will become active again.";if(window.confirm(ze))try{await q.put(`/v1/job-management/requirements/${z}`,{status:pe}),Yt(pe==="closed"?"Requirement closed successfully!":"Requirement revoked (reopened) successfully!"),H(),setTimeout(()=>Yt(null),3e3)}catch(yt){console.error(`Failed to ${De} requirement:`,yt),mt(`Failed to ${De} requirement. Please try again.`),setTimeout(()=>mt(null),3e3)}};g.useEffect(()=>{H(),V(),ee()},[]),g.useEffect(()=>{const z=pe=>{pt.current&&!pt.current.contains(pe.target)&&Ze.current&&!Ze.current.contains(pe.target)&&We(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const be=z=>{st(pe=>({...pe,[z]:!0}))},we=z=>{ft(pe=>{if(!pe||Object.keys(pe).length===0)return pe;const De={...pe};return delete De[z],(z==="experience_min"||z==="experience_max")&&delete De.experience,(z==="ctc_min"||z==="ctc_max"||z==="ctc_currency")&&delete De.ctc_range,(z==="work_start_time"||z==="work_end_time")&&delete De.work_timings,De})},Ie=(z,pe)=>{be(z),we(z),xt&&mt(null);let De=pe;z==="title"?De=String(pe).replace(/[^A-Za-z0-9 ]/g,""):z==="client_ta"?De=String(pe).replace(/[^A-Za-z0-9@.+\-()' ]/g,""):z==="location"?De=String(pe).replace(/[^A-Za-z0-9,\- ]/g,""):z==="experience_min"||z==="experience_max"?De=String(pe).replace(/[^\d]/g,""):z==="no_of_positions"?De=String(pe).replace(/[^\d]/g,""):z==="ctc_min"||z==="ctc_max"?De=String(pe).replace(/[^\d.]/g,"").replace(/^(\d*\.?\d{0,2}).*$/,"$1"):z==="jd_text"||z==="notes_for_recruiter"?De=String(pe).replace($k,""):typeof De=="string"&&(De=String(De)),fe(ze=>{const yt={...ze,[z]:De};return z==="mode"&&De==="remote"&&(yt.location="Remote"),z==="mode"&&De!=="remote"&&Ht(ze.location)==="Remote"&&(yt.location=""),yt})},He=z=>{be(z),we(z),fe(pe=>{const De={...pe};return typeof De[z]=="string"&&(z==="jd_text"||z==="notes_for_recruiter"?De[z]=Vi(De[z]):(De[z]=Ht(De[z]),(mWe.has(z)||z==="client_ta"&&De[z]&&!dy(De[z]))&&(De[z]=sn(De[z])))),De})},nt=(z,pe=null)=>je[z]||(pe?je[pe]:null),tt=(z,pe=null,De="")=>{const ze=!!nt(z,pe),yt=!!Ne[z]||!!Ne[pe];return`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${ze?"border-red-500 focus:ring-red-300":yt?"border-green-500 focus:ring-green-200":"border-gray-300 dark:border-gray-600 focus:ring-purple-200"} ${De}`},_e=z=>{be("skills");let pe=[...ae.skills],De="";z.forEach(ze=>{const yt=sn(Ht(ze||""));if(!yt)return;if(yt.length<2||yt.length>30||!KV.test(yt)||Jo(yt)||!P0(yt)){De="Each skill must be 2-30 characters in Title Case using supported characters";return}if(pe.length>=30){De="Maximum 30 skills are allowed";return}if(pe.some(tr=>tr.toLowerCase()===yt.toLowerCase())){De="Duplicate skills are not allowed";return}pe.push(yt)}),pe.length!==ae.skills.length&&fe(ze=>({...ze,skills:pe})),ft(De?ze=>({...ze,skills:De}):ze=>{const yt={...ze};return delete yt.skills,yt})},Qe=()=>{const z=Ye.split(",").map(pe=>pe.trim()).filter(Boolean);z.length!==0&&(_e(z),lt(""),Me([]),We(!1))},U=z=>{be("skills"),we("skills"),fe(pe=>({...pe,skills:pe.skills.filter(De=>De!==z)}))},se=z=>{we("skills");const pe=String(z).replace(/[^A-Za-z0-9+.#/\- ,]/g,"");if(lt(pe),!pe.trim()){Me([]),We(!1);return}const De=lWe(pe).map(ze=>sn(ze)).filter(ze=>!ae.skills.some(yt=>yt.toLowerCase()===ze.toLowerCase())).slice(0,8);Me(De),We(!0)},at=z=>{(z.key==="Enter"||z.key===",")&&(z.preventDefault(),Qe())},ct=(z,pe)=>{he(De=>({...De,[z]:pe}))},Te=()=>{const z=sn(Ht(xe));z&&!ne.skills.some(pe=>String(pe||"").toLowerCase()===z.toLowerCase())&&(he(pe=>({...pe,skills:[...pe.skills,z]})),Ae(""))},Vt=z=>{he(pe=>({...pe,skills:pe.skills.filter(De=>De!==z)}))},bt=z=>{(z.key==="Enter"||z.key===",")&&(z.preventDefault(),Te())},$t=z=>{const pe=z.target.files[0];if(pe){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(pe.type)){mt("Please upload a PDF or DOCX file");return}if(pe.size>5*1024*1024){mt("File size must be less than 5MB");return}Pe(pe),mt(null)}},Mt=async()=>{if(!me&&!ue.trim()){mt("Please upload a file or paste JD text");return}Be(!0),mt(null);try{let z;if(me){const De=new FormData;De.append("file",me),z=await q.post("/v1/job-management/parse-jd",De,{headers:{"Content-Type":"multipart/form-data"}})}else z=await q.post("/v1/job-management/parse-jd-text",{text:ue});const pe=z.data;fe(De=>{const ze=String(pe.mode||"").toLowerCase(),yt=T0.some(_r=>_r.value===ze)?ze:De.mode,Ft=gw(pe.experience,Number.isFinite(Number(pe.experience_min))?Number(pe.experience_min):void 0,Number.isFinite(Number(pe.experience_max))?Number(pe.experience_max):void 0),tr=qF(pe.budget||pe.ctc||""),Xt=GF(pe.work_timings||""),Ut=(Array.isArray(pe.skills)?pe.skills:[]).map(_r=>sn(Ht(_r))).filter(Boolean).slice(0,30);return{...De,title:sn(Ht(pe.job_title||pe.title||De.title)),mode:yt,skills:Ut.length>0?Ut:De.skills,experience_min:Ft.experience_min||De.experience_min,experience_max:Ft.experience_max||De.experience_max,location:yt==="remote"?"Remote":sn(Ht(pe.location||De.location)),ctc_currency:tr.ctc_currency||De.ctc_currency,ctc_min:tr.ctc_min||De.ctc_min,ctc_max:tr.ctc_max||De.ctc_max,work_start_time:Xt.work_start_time||De.work_start_time,work_end_time:Xt.work_end_time||De.work_end_time,duration:vw(pe.duration||De.duration),joining_preference:bw(pe.joining_preference||De.joining_preference),jd_text:Vi(pe.jd_text||ue||De.jd_text)}}),A("manual"),Yt("JD parsed successfully! Review and edit the fields."),setTimeout(()=>Yt(null),3e3)}catch(z){console.error("Error parsing JD:",z),mt("Failed to parse JD. Please enter manually.")}finally{Be(!1)}},br=()=>{fe(jw),st({}),ft({}),lt(""),Me([]),We(!1),Pe(null),ye(""),Se(""),Lt(null),mt(null),Yt(null)},Pr=()=>{he(KF),Ae(""),mt(null),Yt(null)},Rs=async(z,pe="open")=>{var Ft,tr;z.preventDefault();const De=(ae.skills||[]).map(Xt=>sn(Ht(Xt))).filter(Boolean),ze={...ae,title:sn(Ht(ae.title)),client_ta:(()=>{const Xt=Ht(ae.client_ta);return dy(Xt)?Xt:sn(Xt)})(),location:ae.mode==="remote"?"Remote":sn(Ht(ae.location)),jd_text:Vi(ae.jd_text),notes_for_recruiter:Vi(ae.notes_for_recruiter),skills:De,experience_min:String(ae.experience_min||""),experience_max:String(ae.experience_max||""),ctc_min:String(ae.ctc_min||""),ctc_max:String(ae.ctc_max||""),no_of_positions:String(ae.no_of_positions||"")},yt=JF({form:ze,clients:Ke,requirements:r,editingJobId:At});if(fe(ze),st({title:!0,client_id:!0,client_ta:!0,mode:!0,experience_min:!0,experience_max:!0,location:!0,duration:!0,no_of_positions:!0,ctc_min:!0,ctc_max:!0,ctc_currency:!0,work_start_time:!0,work_end_time:!0,joining_preference:!0,skills:!0,jd_text:!0,notes_for_recruiter:!0}),!yt.isValid){ft({}),mt("Please fix the highlighted fields before submitting.");return}ar(!0),mt(null),ft({});try{const Xt=Ke.find(Sr=>String(Sr.id)===String(ze.client_id)),Ut=Number(ze.experience_min),_r=Number(ze.experience_max),vn=!!(ze.ctc_min&&ze.ctc_max),Kr=vn?gWe(ze.ctc_currency,ze.ctc_min,ze.ctc_max):Ht(ze.budget||""),rn=ze.work_start_time&&ze.work_end_time?`${ze.work_start_time} - ${ze.work_end_time}`:Ht(ze.work_timings||""),ba={job_title:ze.title,date_created:new Date().toISOString().split("T")[0],client_id:ze.client_id||null,client_name:(Xt==null?void 0:Xt.client_name)||(Xt==null?void 0:Xt.name)||ze.client_name||null,client_ta:ze.client_ta||null,mode:ze.mode,skills:ze.skills,jd_text:ze.jd_text,experience:yWe(ze.experience_min,ze.experience_max),experience_min:Ut,experience_max:_r,location:ze.mode==="remote"?"Remote":ze.location||"",duration:ze.duration||null,no_of_positions:Number(ze.no_of_positions)||1,ctc_currency:vn?ze.ctc_currency:null,ctc_min:vn?Number(ze.ctc_min):null,ctc_max:vn?Number(ze.ctc_max):null,budget:Kr,work_start_time:ze.work_start_time||null,work_end_time:ze.work_end_time||null,work_timings:rn||null,joining_preference:ze.joining_preference||null,recruiter_ids:ze.assign_recruiters,am_notes:ze.notes_for_recruiter?[ze.notes_for_recruiter]:null,status:pe||"open"};At?(await q.put(`/v1/job-management/requirements/${At}`,ba),Yt("Job updated successfully!")):(await q.post("/v1/job-management/requirements",ba),Yt("Job created successfully!")),br(),v(!1),H()}catch(Xt){console.error("Failed to save job",Xt);const Ut=(tr=(Ft=Xt.response)==null?void 0:Ft.data)==null?void 0:tr.detail;Ut!=null&&Ut.errors&&typeof Ut.errors=="object"?(ft(Ut.errors),mt(Ut.message||"Please fix highlighted fields and try again."),st(_r=>({..._r,...Object.keys(Ut.errors).reduce((vn,Kr)=>({...vn,[Kr]:!0}),{})}))):mt(typeof Ut=="string"?Ut:"Failed to save job")}finally{ar(!1)}},jt=async(z,pe="active")=>{var rn,ba;z.preventDefault();const De=sn(Ht(ne.title)),ze=Ht(ne.client_display_name),yt=Vi(ne.jd_content),Ft=sn(Ht(ne.location)),tr=Ht(ne.experience),Xt=Ht(ne.ctc),Ut=(ne.skills||[]).map(Sr=>sn(Ht(Sr))).filter(Boolean),_r=Ml(De,"Posting title");if(_r){mt(_r);return}if(!ze){mt("Company display name is required");return}const vn=Nc(yt,{minLength:20,required:!0,label:"Job description"});if(vn){mt(vn);return}if(!Ft){mt("Location is required");return}if(!ne.last_date_to_apply){mt("Last date to apply is required");return}if(r.some(Sr=>{var Do;const zc=Kt((Sr==null?void 0:Sr.job_title)||(Sr==null?void 0:Sr.title)).toLowerCase(),Cn=Kt(((Do=Sr==null?void 0:Sr.client)==null?void 0:Do.client_name)||(Sr==null?void 0:Sr.client_name)||(Sr==null?void 0:Sr.client_display_name)).toLowerCase();return zc===De.toLowerCase()&&Cn===ze.toLowerCase()})){mt("Duplicate Feature name under the same Sub-Category is not allowed.");return}ar(!0),mt(null),he(Sr=>({...Sr,title:De,client_display_name:ze,jd_content:yt,location:Ft,experience:tr,ctc:Xt,skills:Ut}));try{const Sr={job_id:ne.job_id||null,title:De,client_display_name:ze,jd_content:yt,ctc:Xt||"",location:Ft,mode:ne.mode,experience_required:tr||"",skills:Ut,last_date_to_apply:ne.last_date_to_apply};await q.post("/v1/job-management/postings",Sr),Yt("Job posting created successfully!"),Pr(),j(!1)}catch(Sr){console.error("Failed to create posting",Sr),mt(((ba=(rn=Sr.response)==null?void 0:rn.data)==null?void 0:ba.detail)||"Failed to create posting")}finally{ar(!1)}},gn=async()=>{const z=Vi(M);if(!z)return;const pe=Nc(z,{minLength:20,required:!0,label:"Email content"});if(pe){mt(pe);return}Be(!0);try{const De=await Cs.parseRequirementEmail(z);Se(z),fe(ze=>{const yt=gw("",Number.isFinite(Number(De.experience_min))?Number(De.experience_min):void 0,Number.isFinite(Number(De.experience_max))?Number(De.experience_max):void 0),Ft=String(De.mode||"").toLowerCase(),tr=T0.some(Ut=>Ut.value===Ft)?Ft:ze.mode,Xt=(Array.isArray(De.skills_mandatory)?De.skills_mandatory:[]).map(Ut=>sn(Ht(Ut))).filter(Boolean).slice(0,30);return{...ze,title:sn(Ht(De.title||ze.title)),skills:Xt.length>0?Xt:ze.skills,experience_min:yt.experience_min||ze.experience_min,experience_max:yt.experience_max||ze.experience_max,location:tr==="remote"?"Remote":sn(Ht(De.location||ze.location)),mode:tr,duration:vw(De.duration||ze.duration),joining_preference:bw(De.joining_preference||ze.joining_preference),jd_text:Vi(M)}}),N(!1),v(!0),Yt("Email parsed successfully!"),setTimeout(()=>Yt(null),3e3)}catch(De){console.error("Email parse failed",De),mt("Failed to parse email")}finally{Be(!1)}},js=z=>{if(!z)return"--";const pe=new Date(z);return Number.isNaN(pe.getTime())?"--":pe.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},va=z=>{const pe={active:"bg-emerald-50 text-emerald-700 border border-emerald-200",open:"bg-emerald-50 text-emerald-700 border border-emerald-200",in_progress:"bg-sky-50 text-sky-700 border border-sky-200",closed:"bg-red-50 text-red-700 border border-red-200",on_hold:"bg-amber-50 text-amber-700 border border-amber-200",draft:"bg-violet-50 text-violet-700 border border-violet-200"};return n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${pe[z]||pe.active}`,children:(z||"active").replace("_"," ").toUpperCase()})},yn=z=>{const pe={hybrid:"bg-violet-50 text-violet-700 border border-violet-200",remote:"bg-blue-50 text-blue-700 border border-blue-200",onsite:"bg-orange-50 text-orange-700 border border-orange-200",contract:"bg-fuchsia-50 text-fuchsia-700 border border-fuchsia-200"};return n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${pe[z]||pe.hybrid}`,children:(z||"hybrid").toUpperCase()})},Br=z=>{const pe=Ht(z||"").toLowerCase();return pe?cWe.some(De=>pe.includes(De))?"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-500/40 dark:bg-blue-900/20 dark:text-blue-300":dWe.some(De=>pe.includes(De))?"border-teal-200 bg-teal-50 text-teal-700 dark:border-teal-500/40 dark:bg-teal-900/20 dark:text-teal-300":uWe.some(De=>pe.includes(De))?"border-violet-200 bg-violet-50 text-violet-700 dark:border-violet-500/40 dark:bg-violet-900/20 dark:text-violet-300":"border-gray-200 bg-gray-100 text-gray-700 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200":"border-gray-200 bg-gray-100 text-gray-700 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Fa=z=>{var pe;return((pe=z==null?void 0:z.client)==null?void 0:pe.client_name)||(z==null?void 0:z.client_name)||"--"},Ls=z=>{const pe=Ht((z==null?void 0:z.experience)||"");if(pe)return/year|yr/i.test(pe)?pe:`${pe} yrs`;const De=(z==null?void 0:z.min_experience)!==null&&(z==null?void 0:z.min_experience)!==void 0?Number(z.min_experience):null,ze=(z==null?void 0:z.max_experience)!==null&&(z==null?void 0:z.max_experience)!==void 0?Number(z.max_experience):null;return Number.isFinite(De)&&Number.isFinite(ze)?`${De}-${ze} yrs`:Number.isFinite(De)?`${De}+ yrs`:Number.isFinite(ze)?`0-${ze} yrs`:"--"},de=z=>{const pe=Ht((z==null?void 0:z.budget)||"");if(pe)return pe;const De=(z==null?void 0:z.ctc_min)!==null&&(z==null?void 0:z.ctc_min)!==void 0?Number(z.ctc_min):null,ze=(z==null?void 0:z.ctc_max)!==null&&(z==null?void 0:z.ctc_max)!==void 0?Number(z.ctc_max):null,yt=Ht((z==null?void 0:z.ctc_currency)||"INR")||"INR";return Number.isFinite(De)&&Number.isFinite(ze)?`${yt} ${De} - ${ze}`:"--"},Le=z=>(Array.isArray(z==null?void 0:z.skills)?z.skills:[]).map(pe=>Ht(typeof pe=="string"?pe:(pe==null?void 0:pe.name)||"")).filter(Boolean),rt=(z,pe,De=!1)=>{const ze=z.job_title||z.title||"Untitled Role",yt=Fa(z),Ft=Ht(z.location||"")||"--",tr=Ls(z),Xt=de(z),Ut=Le(z),_r=Ut.slice(0,3),vn=Math.max(0,Ut.length-_r.length);return n.jsxs("article",{className:`group h-full min-h-[248px] rounded-xl border p-4 shadow-sm transition-all duration-200 ease-out flex flex-col cursor-pointer ${De?"bg-white dark:bg-gray-800 border-red-100 dark:border-red-900/40 hover:border-red-200 dark:hover:border-red-700/60 hover:shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-500/60 hover:shadow-md hover:-translate-y-0.5"}`,onClick:()=>{E(z),k(!0)},children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"text-[11px] font-medium text-gray-500 dark:text-gray-400",children:["#",z.serial_number||pe+1]}),De?n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold bg-red-50 text-red-700 border border-red-200",children:"CLOSED"}):va(z.status)]}),n.jsx("h3",{className:`text-[19px] font-semibold leading-6 line-clamp-2 ${De?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:ze})]}),yn(z.mode)]}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-x-4 gap-y-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Client"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-gray-900 dark:text-white truncate",children:yt})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-gray-700 dark:text-gray-200 truncate",children:Ft})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsx("p",{className:"mt-1 text-[15px] font-medium text-indigo-700 dark:text-indigo-300 truncate",children:tr})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Budget"}),n.jsx("p",{className:"mt-1 text-[15px] font-semibold text-emerald-700 dark:text-emerald-300 truncate",children:Xt})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2",children:"Skills"}),n.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px]",children:_r.length>0?n.jsxs(n.Fragment,{children:[_r.map((Kr,rn)=>n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-md border text-[11px] font-medium ${Br(Kr)}`,children:Kr},`${z.id||pe}-skill-${rn}`)),vn>0?n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[11px] font-semibold text-gray-500 dark:text-gray-400",children:["+",vn," more"]}):null]}):n.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),n.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-2",children:[n.jsxs("button",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border text-xs font-medium transition-colors ${De?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600":"border-indigo-200 dark:border-indigo-500/50 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-100 dark:hover:bg-indigo-900/30"}`,onClick:Kr=>{Kr.stopPropagation(),E(z),k(!0)},children:[n.jsx(cl,{className:"w-3.5 h-3.5"}),"Details"]}),n.jsx("div",{className:"flex items-center gap-1",children:De?n.jsx("button",{className:"p-1.5 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors",title:"Revoke (Reopen) Requirement",onClick:Kr=>{Kr.stopPropagation(),J(z.id,"active")},children:n.jsx(PAe,{className:"w-4 h-4"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Edit",onClick:Kr=>{Kr.stopPropagation(),te(z)},children:n.jsx(l4,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1.5 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-md transition-colors",title:"Assign Recruiters",onClick:Kr=>{Kr.stopPropagation(),X(z)},children:n.jsx(qr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",title:"Close Requirement",onClick:Kr=>{Kr.stopPropagation(),J(z.id,"closed")},children:n.jsx(ti,{className:"w-4 h-4"})})]})})]})]},z.id)},dt=new Date().toISOString().split("T")[0];return a?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(qs,{className:"w-8 h-8 animate-spin text-purple-600"})}):n.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:["Job Requirements (",r.length,")"]}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage job requirements and postings"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg shadow-sm hover:bg-purple-700 transition-colors",onClick:()=>{br(),v(!0)},children:[n.jsx(Ya,{className:"w-4 h-4"}),"Create Job"]}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>N(!0),children:[n.jsx(uu,{className:"w-4 h-4"}),"Import from Email"]}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>j(!0),children:[n.jsx(Xv,{className:"w-4 h-4"}),"Create Posting"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by title, skill, client...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:l,onChange:z=>o(z.target.value)})]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:u,onChange:z=>m(z.target.value),children:[n.jsx("option",{value:"",children:"All Clients"}),Ke.map(z=>n.jsx("option",{value:z.client_name,children:z.client_name},z.id))]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:c,onChange:z=>kt(z.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"on_hold",children:"On Hold"})]}),n.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-900",value:f,onChange:z=>y(z.target.value),children:[n.jsx("option",{value:"",children:"All Modes"}),n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:oWe.map(z=>{const pe=x.includes(z.key);return n.jsx("button",{type:"button",onClick:()=>Ue(z.key),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition-colors ${pe?"bg-purple-50 dark:bg-purple-900/20 border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:z.label},z.key)})}),Z.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ha,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No requirements found"}),n.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",onClick:()=>{br(),v(!0)},children:[n.jsx(Ya,{className:"w-4 h-4"}),"Create Your First Job"]})]}):n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 auto-rows-fr",children:Z.map((z,pe)=>rt(z,pe,z.status==="closed"))}),ut.length>0&&c!=="closed"&&n.jsxs("div",{className:"mt-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Closed Requirements"}),n.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:ut.length})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 auto-rows-fr",children:ut.map((z,pe)=>rt(z,pe,!0))})]}),w&&S&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:S.job_title||S.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"text-sm text-gray-500",children:["#",S.serial_number||((le=S.id)==null?void 0:le.slice(0,8))]}),va(S.status),yn(S.mode)]})]}),n.jsx("button",{onClick:()=>{k(!1),E(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Ar,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Client"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:((Xe=S.client)==null?void 0:Xe.client_name)||S.client_name||"--"})]}),S.client_ta&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Client TA"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:S.client_ta})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:S.location||"--"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[S.experience||`${S.min_experience||0} - ${S.max_experience||"N/A"}`," ","years"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-semibold",children:S.no_of_positions||1})]}),S.duration&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:S.duration})]}),S.budget&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Budget / CTC"}),n.jsx("p",{className:"text-green-600 dark:text-green-400 mt-1 font-semibold",children:S.budget})]}),S.work_timings&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:S.work_timings})]}),S.joining_preference&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:S.joining_preference})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:js(S.date_created||S.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(S.skills)?S.skills:[]).map((z,pe)=>n.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:typeof z=="string"?z:(z==null?void 0:z.name)||z},pe)),(!S.skills||S.skills.length===0)&&n.jsx("span",{className:"text-gray-400",children:"No skills specified"})]})]}),(S.jd_text||S.description)&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Job Description"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-sm",children:S.jd_text||S.description})})]}),S.notes_for_recruiter&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Notes for Recruiter"}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-sm",children:S.notes_for_recruiter})})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{k(!1),E(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"}),n.jsxs("button",{onClick:()=>{k(!1),X(S)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[n.jsx(qr,{className:"w-4 h-4"}),"Assign Recruiters"]})]})]})}),h&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:At?"Edit Job":"Create New Job"}),n.jsx("p",{className:"text-sm text-gray-500",children:At?"Update job requirement details":"Add a new job requirement"})]}),n.jsx("button",{onClick:()=>{v(!1),br()},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Ar,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"px-6 pt-4 flex gap-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>A("manual"),className:`pb-3 px-1 text-sm font-medium transition-colors ${T==="manual"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Manual Entry"}),n.jsx("button",{onClick:()=>A("import"),className:`pb-3 px-1 text-sm font-medium transition-colors ${T==="import"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Import from JD"})]}),xt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Zs,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:xt}),n.jsx("button",{onClick:()=>mt(null),className:"ml-auto",children:n.jsx(Ar,{className:"w-4 h-4 text-red-600"})})]}),It&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-2",children:[n.jsx(wc,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:It})]}),T==="import"&&n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center mb-4",children:me?n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(cn,{className:"w-8 h-8 text-purple-600"}),n.jsx("span",{className:"text-gray-900 dark:text-white",children:me.name}),n.jsx("button",{onClick:()=>Pe(null),className:"p-1 hover:bg-gray-200 rounded",children:n.jsx(Ar,{className:"w-4 h-4 text-gray-500"})})]}):n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(o4,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag & drop a JD file or click to upload"}),n.jsx("p",{className:"text-sm text-gray-500",children:"PDF, DOCX | Max 5MB"}),n.jsx("input",{type:"file",accept:".pdf,.docx,.doc",onChange:$t,className:"hidden"})]})}),n.jsx("div",{className:"text-center text-gray-500 my-4",children:"OR"}),n.jsx("textarea",{placeholder:"Paste raw JD text here...",value:ue,onChange:z=>ye(z.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{type:"button",onClick:Mt,disabled:er||!me&&!ue.trim(),className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:er?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Parsing JD..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"w-4 h-4"}),"Parse JD"]})})]}),T==="manual"&&n.jsxs("form",{onSubmit:z=>Rs(z,"open"),className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ae.title,onChange:z=>Ie("title",z.target.value),onBlur:()=>He("title"),maxLength:80,placeholder:"e.g., Senior SAP FICO Consultant",className:tt("title")}),nt("title")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("title")}),Re.duplicate&&!nt("title")&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:Re.duplicate})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Client ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:ae.client_id,onChange:z=>{const pe=z.target.value,De=Ke.find(ze=>String(ze.id)===String(pe));Ie("client_id",pe),fe(ze=>({...ze,client_name:(De==null?void 0:De.client_name)||(De==null?void 0:De.name)||""}))},onBlur:()=>be("client_id"),className:tt("client_id"),children:[n.jsx("option",{value:"",children:"Select Client"}),Ke.map(z=>n.jsx("option",{value:z.id,children:z.client_name||z.name},z.id))]}),nt("client_id")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("client_id")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client TA (Contact)"}),n.jsx("input",{type:"text",value:ae.client_ta,onChange:z=>Ie("client_ta",z.target.value),onBlur:()=>He("client_ta"),maxLength:60,placeholder:"Client's HR/TA contact name",className:tt("client_ta")}),nt("client_ta")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("client_ta")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:ae.mode,onChange:z=>Ie("mode",z.target.value),onBlur:()=>be("mode"),className:tt("mode"),children:T0.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))}),nt("mode")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("mode")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience (Years) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"text",value:ae.experience_min,onChange:z=>Ie("experience_min",z.target.value),onBlur:()=>be("experience_min"),placeholder:"Min (0-30)",className:tt("experience_min","experience")}),n.jsx("input",{type:"text",value:ae.experience_max,onChange:z=>Ie("experience_max",z.target.value),onBlur:()=>be("experience_max"),placeholder:"Max (0-30)",className:tt("experience_max","experience")})]}),nt("experience_min","experience")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("experience_min","experience")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location"," ",ae.mode!=="remote"&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ae.location,onChange:z=>Ie("location",z.target.value),onBlur:()=>He("location"),maxLength:100,disabled:ae.mode==="remote",placeholder:"e.g., Bengaluru, India",className:tt("location",null,ae.mode==="remote"?"opacity-80 cursor-not-allowed":"")}),nt("location")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("location")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),n.jsxs("select",{value:ae.duration,onChange:z=>Ie("duration",z.target.value),onBlur:()=>be("duration"),className:tt("duration"),children:[n.jsx("option",{value:"",children:"Select Duration"}),fA.map(z=>n.jsx("option",{value:z,children:z},z))]}),nt("duration")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("duration")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Number of Positions ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ae.no_of_positions,onChange:z=>Ie("no_of_positions",z.target.value),onBlur:()=>be("no_of_positions"),placeholder:"1 - 500",className:tt("no_of_positions")}),nt("no_of_positions")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("no_of_positions")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Budget / CTC"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("select",{value:ae.ctc_currency,onChange:z=>Ie("ctc_currency",z.target.value),onBlur:()=>be("ctc_currency"),className:tt("ctc_currency","ctc_range"),children:JV.map(z=>n.jsx("option",{value:z,children:z},z))}),n.jsx("input",{type:"text",value:ae.ctc_min,onChange:z=>Ie("ctc_min",z.target.value),onBlur:()=>be("ctc_min"),placeholder:"Min CTC",className:tt("ctc_min","ctc_range")}),n.jsx("input",{type:"text",value:ae.ctc_max,onChange:z=>Ie("ctc_max",z.target.value),onBlur:()=>be("ctc_max"),placeholder:"Max CTC",className:tt("ctc_max","ctc_range")})]}),nt("ctc_min","ctc_range")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("ctc_min","ctc_range")}),!nt("ctc_min","ctc_range")&&Re.ctc_range&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:Re.ctc_range})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Timings"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"time",value:ae.work_start_time,onChange:z=>Ie("work_start_time",z.target.value),onBlur:()=>be("work_start_time"),className:tt("work_start_time","work_timings")}),n.jsx("input",{type:"time",value:ae.work_end_time,onChange:z=>Ie("work_end_time",z.target.value),onBlur:()=>be("work_end_time"),className:tt("work_end_time","work_timings")})]}),nt("work_start_time","work_timings")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("work_start_time","work_timings")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Joining Preference"}),n.jsxs("select",{value:ae.joining_preference,onChange:z=>Ie("joining_preference",z.target.value),onBlur:()=>be("joining_preference"),className:tt("joining_preference"),children:[n.jsx("option",{value:"",children:"Select Joining Preference"}),hA.map(z=>n.jsx("option",{value:z,children:z},z))]}),nt("joining_preference")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("joining_preference")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Skills ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:ae.skills.map((z,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300 rounded-full text-sm",children:[z,n.jsx("button",{type:"button",onClick:()=>U(z),children:n.jsx(Ar,{className:"w-3 h-3"})})]},pe))}),n.jsxs("div",{className:"flex gap-2 relative",children:[n.jsx("input",{ref:Ze,type:"text",value:Ye,onChange:z=>se(z.target.value),onKeyDown:at,onFocus:()=>{$e.length>0&&We(!0)},onBlur:()=>{be("skills"),setTimeout(()=>We(!1),100)},placeholder:"Type a skill and press Enter",className:tt("skills")}),n.jsx("button",{type:"button",onClick:Qe,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300",children:n.jsx(Ya,{className:"w-5 h-5"})}),Fe&&$e.length>0&&n.jsx("div",{ref:pt,className:"absolute z-20 top-[42px] left-0 right-14 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-44 overflow-y-auto",children:$e.map(z=>n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onMouseDown:pe=>pe.preventDefault(),onClick:()=>{_e([z]),lt(""),We(!1),Me([])},children:z},z))})]}),n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[ae.skills.length,"/30 skills added"]}),nt("skills")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("skills")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:ae.jd_text,onChange:z=>Ie("jd_text",z.target.value),onBlur:()=>He("jd_text"),rows:8,placeholder:"Enter the full job description...",className:tt("jd_text")}),nt("jd_text")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("jd_text")})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes for Recruiter (Internal)"}),n.jsx("textarea",{value:ae.notes_for_recruiter,onChange:z=>Ie("notes_for_recruiter",z.target.value),onBlur:()=>He("notes_for_recruiter"),rows:3,placeholder:"Private instructions for assigned recruiters...",className:tt("notes_for_recruiter")}),nt("notes_for_recruiter")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:nt("notes_for_recruiter")})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("button",{type:"button",onClick:()=>{v(!1),br()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:z=>Rs(z,"draft"),disabled:Bt||!oe,className:"px-4 py-2 border border-purple-600 text-purple-600 rounded-lg hover:bg-purple-50 disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:Bt||!oe,className:"flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:Bt?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),At?"Updating...":"Creating..."]}):At?"Update Job":"Publish Job"})]})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Job Posting"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Create an external job posting for candidates"})]}),n.jsx("button",{onClick:()=>{j(!1),Pr()},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Ar,{className:"w-5 h-5 text-gray-500"})})]}),xt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Zs,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:xt}),n.jsx("button",{onClick:()=>mt(null),className:"ml-auto",children:n.jsx(Ar,{className:"w-4 h-4 text-red-600"})})]}),n.jsxs("form",{onSubmit:z=>jt(z,"active"),className:"p-6",children:[n.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Existing Job (Optional)"}),n.jsxs("select",{value:ne.job_id,onChange:z=>{const pe=z.target.value;if(pe){const De=r.find(ze=>ze.id===pe||ze.id===Number(pe));De&&he(ze=>{var yt;return{...ze,job_id:pe,title:De.job_title||De.title||"",client_display_name:((yt=De.client)==null?void 0:yt.client_name)||De.client_name||"",jd_content:De.jd_text||De.description||"",ctc:De.budget||"",location:De.location||"",mode:De.mode||"hybrid",experience:De.experience||"",skills:De.skills||[]}})}else ct("job_id","")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"-- Create standalone posting --"}),r.map(z=>{var pe;return n.jsxs("option",{value:z.id,children:[z.job_title||z.title," -"," ",((pe=z.client)==null?void 0:pe.client_name)||z.client_name||"Unknown"]},z.id)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Posting Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ne.title,onChange:z=>ct("title",z.target.value),onBlur:z=>ct("title",sn(Ht(z.target.value))),required:!0,placeholder:"e.g., Senior Software Engineer",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Company Display Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ne.client_display_name,onChange:z=>ct("client_display_name",z.target.value),onBlur:z=>ct("client_display_name",Kt(z.target.value)),required:!0,placeholder:"e.g., Leading IT MNC",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ne.location,onChange:z=>ct("location",z.target.value),onBlur:z=>ct("location",sn(Ht(z.target.value))),required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Mode"}),n.jsxs("select",{value:ne.mode,onChange:z=>ct("mode",z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Experience"}),n.jsx("input",{type:"text",value:ne.experience,onChange:z=>ct("experience",z.target.value),onBlur:z=>ct("experience",Kt(z.target.value)),placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"CTC / Salary Range"}),n.jsx("input",{type:"text",value:ne.ctc,onChange:z=>ct("ctc",z.target.value),onBlur:z=>ct("ctc",Kt(z.target.value)),placeholder:"e.g., INR 15-20 LPA",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Last Date to Apply ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:ne.last_date_to_apply,onChange:z=>ct("last_date_to_apply",z.target.value),required:!0,min:dt,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:ne.skills.map((z,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[z,n.jsx("button",{type:"button",onClick:()=>Vt(z),children:n.jsx(Ar,{className:"w-3 h-3"})})]},pe))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:xe,onChange:z=>Ae(z.target.value),onKeyPress:bt,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{type:"button",onClick:Te,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg",children:n.jsx(Ya,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:ne.jd_content,onChange:z=>ct("jd_content",z.target.value),onBlur:z=>ct("jd_content",Kt(z.target.value)),required:!0,rows:8,placeholder:"Enter the job description that will be visible to candidates...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This description will be visible to candidates. Remove any confidential information."})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),Pr()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:z=>jt(z,"draft"),disabled:Bt,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:Bt,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:Bt?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Publishing..."]}):"Publish Posting"})]})]})]})}),_&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Import from Email"}),n.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Ar,{className:"w-5 h-5 text-gray-500"})})]}),xt&&n.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-2",children:[n.jsx(Zs,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:xt})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white min-h-[200px]",placeholder:"Paste raw email content here...",value:M,onChange:z=>Se(z.target.value),onBlur:z=>Se(Kt(z.target.value))}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>N(!1),children:"Cancel"}),n.jsx("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",onClick:gn,disabled:er||!M.trim(),children:er?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Parsing..."]}):"Parse Requirement"})]})]})]})}),C&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Assign Recruiters"}),n.jsxs("p",{className:"text-purple-200 text-sm mt-1",children:["Job: ",n.jsx("span",{className:"font-semibold",children:F})]})]}),n.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Ar,{className:"w-6 h-6 text-white"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Available Recruiters"}),n.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:[G.length," Total"]})]}),G.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(qr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No recruiters available"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:G.map(z=>{var De;const pe=W.includes(z.id);return n.jsxs("div",{onClick:()=>ve(z.id),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${pe?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-200":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-purple-300"}`,children:[pe&&n.jsx(wc,{className:"absolute top-3 right-3 text-purple-600",size:20}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 flex items-center justify-center font-bold text-sm",children:((De=z.full_name)==null?void 0:De.charAt(0))||"R"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:z.full_name}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:z.email})]})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400",children:[n.jsx(ha,{size:14}),n.jsxs("span",{children:[z.workload||0," Active Jobs"]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${z.status==="busy"?"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:z.status||"available"})]}),z.specialization&&z.specialization.length>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-1",children:z.specialization.slice(0,3).map(ze=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-[10px]",children:ze},ze))})]},z.id)})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5 space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"SLA & Targets"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"1st CV Deadline (Days)"}),n.jsx("input",{type:"number",value:I,onChange:z=>K(z.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target CV Count"}),n.jsx("input",{type:"number",value:D,onChange:z=>Y(z.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"1"})]})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 flex gap-3",children:[n.jsx(Zs,{className:"text-blue-500 shrink-0",size:20}),n.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 leading-relaxed",children:["Assigning multiple recruiters activates"," ",n.jsx("b",{children:"competitive sourcing mode"}),". First to submit quality profiles wins the slot."]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[n.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:["Selected (",W.length,")"]}),n.jsxs("ul",{className:"space-y-2 max-h-40 overflow-y-auto",children:[G.filter(z=>W.includes(z.id)).map(z=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z.full_name}),n.jsx("button",{onClick:pe=>{pe.stopPropagation(),ve(z.id)},className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},z.id)),W.length===0&&n.jsx("li",{className:"text-sm text-gray-400 italic",children:"No recruiters selected"})]})]})]})]})}),n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-between",children:[n.jsx("button",{onClick:()=>P(!1),className:"px-5 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),n.jsx("button",{onClick:ke,disabled:re||W.length===0,className:`px-6 py-2.5 rounded-lg font-semibold transition-all flex items-center gap-2 ${re||W.length===0?"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-200 dark:shadow-purple-900/30"}`,children:re?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(qr,{className:"w-4 h-4"}),"Assign ",W.length," Recruiter",W.length!==1?"s":""]})})]})]})})]})}const XV=new Set(["selected","rejected","negotiation","hired","offer_declined"]),Rg=({stage:e})=>{const t=e?e.replace(/_/g," "):"",r=XV.has(e)?"bg-gray-100 text-gray-700":e==="client_shortlisted"?"bg-emerald-100 text-emerald-700":e==="am_shortlisted"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700";return n.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:t})};function YF(){var re;const{id:e}=Rr(),[t,r]=g.useState(!0),[s,a]=g.useState(null),[i,l]=g.useState("submissions"),[o,c]=g.useState([]),[d,u]=g.useState(!1),[m,f]=g.useState([]),[y,x]=g.useState(""),[p,h]=g.useState({open:!1,submissionId:null,stage:"",title:""}),[v,b]=g.useState({rating:4,strengths:"",concerns:"",free_text:""}),[j,_]=g.useState({open:!1,submissionId:null}),[N,w]=g.useState("selected"),[k,S]=g.useState(""),E=async()=>{var B;r(!0);try{const G=await Cs.getAmRequirementDetail(e);a(G)}catch(G){console.error("Failed to load from workflow API, trying job-management...",G);try{const ce=await q.get(`/v1/job-management/requirements/${e}`),ae=((B=ce.data)==null?void 0:B.job)||ce.data;ae&&a({requirement:{id:ae.id,title:ae.title||ae.job_title,description:ae.description||ae.jd_text,client_name:ae.client_name||null,client_contact:ae.client_ta,status:ae.status,skills_mandatory:ae.skills||[],skills_good_to_have:[],experience_min:ae.min_experience||0,experience_max:ae.max_experience,location_details:{city:ae.location,type:ae.mode},positions_count:ae.no_of_positions||1,budget:ae.budget,duration:ae.duration,work_timings:ae.work_timings,joining_preference:ae.joining_preference,notes_for_recruiter:ae.notes_for_recruiter,mode:ae.mode,jd_text:ae.jd_text||ae.description,created_at:ae.created_at,updated_at:ae.updated_at},assignments:ae.assignments||[],submissions:[]})}catch(ce){console.error("Fallback also failed:",ce)}}finally{r(!1)}},T=async()=>{try{const B=await q.get("/v1/am/recruiters");c(B.data||[])}catch(B){console.error("Failed to load recruiters",B)}};g.useEffect(()=>{E(),T()},[]);const A=s==null?void 0:s.requirement,C=(s==null?void 0:s.submissions)||[],P=(s==null?void 0:s.assignments)||[],O=g.useMemo(()=>C.filter(B=>["recruiter_review","sent_to_am","am_shortlisted","am_rejected"].includes(B.stage)),[C]),R=g.useMemo(()=>C.filter(B=>["sent_to_client","client_shortlisted","client_rejected"].includes(B.stage)),[C]),F=g.useMemo(()=>C.filter(B=>["client_shortlisted","interview_scheduled","interview_completed"].includes(B.stage)),[C]),Q=g.useMemo(()=>C.filter(B=>XV.has(B.stage)),[C]),W=(B,G,ce)=>{h({open:!0,submissionId:B,stage:G,title:ce}),b({rating:4,strengths:"",concerns:"",free_text:""})},L=async()=>{if(p.submissionId)try{await Cs.updateSubmissionStage(p.submissionId,{stage:p.stage,...v}),h({open:!1,submissionId:null,stage:"",title:""}),E()}catch(B){console.error("Failed to add note",B),alert("Failed to add note")}},I=async(B,G)=>{try{await Cs.updateSubmissionStage(B,{stage:G}),E()}catch(ce){console.error("Stage update failed",ce),alert("Stage update failed")}},K=async()=>{if(j.submissionId)try{await Cs.updateSubmissionStage(j.submissionId,{stage:N,free_text:k||void 0,rating:k?4:void 0}),_({open:!1,submissionId:null}),S(""),E()}catch(B){console.error("Failed to update decision",B),alert("Failed to update decision")}},D=async()=>{if(m.length!==0)try{await Cs.assignRecruiters(e,{recruiter_ids:m,notes:y}),f([]),x(""),u(!1),E()}catch(B){console.error("Failed to assign recruiter",B),alert("Failed to assign recruiter")}},Y=(B,G)=>{const ce=B.filter(ae=>ae.note_stage===G);return ce.length?ce[ce.length-1]:null};return t?n.jsx("p",{children:"Loading requirement..."}):A?n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded shadow",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Requirement Info"}),n.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Title:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.title})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Client:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.client_name||""})]}),A.client_contact&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Client TA:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.client_contact})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Status:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:Gs(A.status)})]}),A.mode&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Mode:"})," ",n.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded text-xs uppercase",children:A.mode})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Experience:"})," ",n.jsxs("span",{className:"text-gray-900 dark:text-white",children:[A.experience_min||0," -"," ",A.experience_max||""," yrs"]})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Location:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:((re=A.location_details)==null?void 0:re.city)||A.location_details||""})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Positions:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.positions_count||1})]}),A.budget&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Budget:"})," ",n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:A.budget})]}),(A.ctc_min||A.ctc_max)&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"CTC Range:"})," ",n.jsxs("span",{className:"text-gray-900 dark:text-white",children:[A.ctc_min||""," - ",A.ctc_max||""]})]}),A.duration&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Duration:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.duration})]}),A.work_timings&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Work Timings:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.work_timings})]}),(A.urgency||A.joining_preference)&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Joining:"})," ",n.jsx("span",{className:"text-gray-900 dark:text-white",children:A.joining_preference||A.urgency})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Skills:"}),n.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(A.skills_mandatory||[]).map((B,G)=>n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-xs",children:typeof B=="string"?B:(B==null?void 0:B.name)||B},G)),(A.skills_good_to_have||[]).map((B,G)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-full text-xs",children:typeof B=="string"?B:(B==null?void 0:B.name)||B},`gth-${G}`))]})]}),(A.description||A.jd_text)&&n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Job Description:"}),n.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg whitespace-pre-wrap",children:A.jd_text||A.description})]}),A.notes_for_recruiter&&n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400 text-sm",children:"Notes for Recruiter:"}),n.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-200 dark:border-amber-800",children:A.notes_for_recruiter})]})]}),n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Assignments"}),n.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400",onClick:()=>u(!0),children:"Assign Recruiter"})]}),n.jsx("div",{className:"mt-3 space-y-2 text-sm",children:P.length===0?n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recruiters assigned"}):P.map(B=>n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:B.recruiter_name||"Recruiter"}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",new Date(B.assigned_at).toLocaleDateString()]}),B.notes&&n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:B.notes})]},B.id))})]})]}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("div",{className:"flex gap-2 mb-4",children:[{key:"submissions",label:"Recruiter Submissions"},{key:"client",label:"Sent to Client"},{key:"interviews",label:"Interview Stage"},{key:"closed",label:"Closed"}].map(B=>n.jsx("button",{onClick:()=>l(B.key),className:`px-3 py-2 rounded text-sm font-medium ${i===B.key?"bg-purple-600 text-white":"bg-gray-100 text-gray-600"}`,children:B.label},B.key))}),i==="submissions"&&n.jsx("div",{className:"space-y-3",children:O.length===0?n.jsx("p",{className:"text-gray-500",children:"No submissions yet."}):O.map(B=>{const G=Y(B.notes,"call_feedback");return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:B.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",B.match_score||0,"%"]})]}),n.jsx(Rg,{stage:B.stage})]}),G&&n.jsxs("div",{className:"mt-3 bg-gray-50 p-3 rounded text-sm",children:[n.jsx("p",{className:"font-medium",children:"Recruiter Call Feedback"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Rating: ",G.rating||""]}),n.jsx("p",{className:"mt-1",children:G.free_text})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[B.stage==="recruiter_review"||B.stage==="sent_to_am"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>I(B.id,"am_shortlisted"),children:"AM Shortlist"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded text-xs",onClick:()=>I(B.id,"am_rejected"),children:"AM Reject"})]}):null,n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>W(B.id,B.stage,"Add AM Feedback"),children:"Add AM Feedback"}),B.stage==="am_shortlisted"&&n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>I(B.id,"sent_to_client"),children:"Send to Client"})]})]},B.id)})}),i==="client"&&n.jsx("div",{className:"space-y-3",children:R.length===0?n.jsx("p",{className:"text-gray-500",children:"No candidates sent to client yet."}):R.map(B=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:B.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",B.match_score||0,"%"]})]}),n.jsx(Rg,{stage:B.stage})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[B.stage==="sent_to_client"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-3 py-1 bg-emerald-600 text-white rounded text-xs",onClick:()=>I(B.id,"client_shortlisted"),children:"Client Shortlisted"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded text-xs",onClick:()=>I(B.id,"client_rejected"),children:"Client Rejected"})]}),n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>W(B.id,B.stage,"Add Client Feedback"),children:"Add Client Feedback"})]})]},B.id))}),i==="interviews"&&n.jsx("div",{className:"space-y-3",children:F.length===0?n.jsx("p",{className:"text-gray-500",children:"No candidates in interview stage."}):F.map(B=>{var ce;const G=(ce=B.interviews)==null?void 0:ce[0];return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:B.candidate_name||"Candidate"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Match: ",B.match_score||0,"%"]})]}),n.jsx(Rg,{stage:B.stage})]}),G&&n.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Scheduled: ",G.interview_date," ",G.interview_time," (",G.interview_mode,")"]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[G&&!G.client_informed&&n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>Cs.markClientInformed(G.id).then(E),children:"Mark Client Informed"}),n.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>_({open:!0,submissionId:B.id}),children:"Enter Final Decision"})]})]},B.id)})}),i==="closed"&&n.jsx("div",{className:"space-y-3",children:Q.length===0?n.jsx("p",{className:"text-gray-500",children:"No closed candidates yet."}):Q.map(B=>n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:B.candidate_name||"Candidate"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Final Stage"})]}),n.jsx(Rg,{stage:B.stage})]})},B.id))})]})]}),d&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Assign Recruiters"}),n.jsx("button",{className:"text-gray-500",onClick:()=>u(!1),children:"Close"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-auto border rounded p-2",children:o.map(B=>n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:m.includes(B.id),onChange:()=>f(G=>G.includes(B.id)?G.filter(ce=>ce!==B.id):[...G,B.id])}),B.full_name||B.email]},B.id))}),n.jsx("textarea",{className:"w-full p-2 border rounded mt-3",placeholder:"Notes for recruiter",value:y,onChange:B=>x(B.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>u(!1),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded",onClick:D,children:"Assign"})]})]})}),p.open&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:p.title}),n.jsx("button",{className:"text-gray-500",onClick:()=>h({open:!1,submissionId:null,stage:"",title:""}),children:"Close"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Rating (1-5)"}),n.jsx("input",{type:"number",min:"1",max:"5",className:"w-full p-2 border rounded",value:v.rating,onChange:B=>b(G=>({...G,rating:Number(B.target.value)}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Strengths"}),n.jsx("input",{className:"w-full p-2 border rounded",value:v.strengths,onChange:B=>b(G=>({...G,strengths:B.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Concerns"}),n.jsx("input",{className:"w-full p-2 border rounded",value:v.concerns,onChange:B=>b(G=>({...G,concerns:B.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:v.free_text,onChange:B=>b(G=>({...G,free_text:B.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>h({open:!1,submissionId:null,stage:"",title:""}),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:L,children:"Save Note"})]})]})}),j.open&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Final Decision"}),n.jsx("button",{className:"text-gray-500",onClick:()=>_({open:!1,submissionId:null}),children:"Close"})]}),n.jsx("label",{className:"text-sm font-medium",children:"Decision"}),n.jsxs("select",{className:"w-full p-2 border rounded mt-1",value:N,onChange:B=>w(B.target.value),children:[n.jsx("option",{value:"selected",children:"Selected"}),n.jsx("option",{value:"rejected",children:"Rejected"}),n.jsx("option",{value:"negotiation",children:"Negotiation"}),n.jsx("option",{value:"hired",children:"Hired"}),n.jsx("option",{value:"offer_declined",children:"Offer Declined"})]}),n.jsx("label",{className:"text-sm font-medium mt-3 block",children:"Notes"}),n.jsx("textarea",{className:"w-full p-2 border rounded min-h-[80px]",value:k,onChange:B=>S(B.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>_({open:!1,submissionId:null}),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded",onClick:K,children:"Save Decision"})]})]})})]}):n.jsx("p",{children:"Requirement not found"})}function ZF(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState(7),[u,m]=g.useState(5),[f,y]=g.useState(!0),[x,p]=g.useState(!1);g.useEffect(()=>{h()},[]);const h=async()=>{var j,_;try{y(!0);const[N,w]=await Promise.all([q.get("/v1/am/recruiters"),q.get(`/v1/recruiter/jobs/${e}`)]);i(((j=N.data)==null?void 0:j.data)||[]),s(w.data),(_=w.data)!=null&&_.recruiters&&o(w.data.recruiters.map(k=>k.id))}catch(N){console.error("Failed to load assignment data:",N)}finally{y(!1)}},v=j=>{o(_=>_.includes(j)?_.filter(N=>N!==j):[..._,j])},b=async()=>{if(l.length===0){alert("Please select at least one recruiter");return}try{p(!0);const j=(r==null?void 0:r.requirement_id)||(r==null?void 0:r.id);await q.post("/v1/am/requirements/assign",{requirement_id:j,recruiter_ids:l,sla_deadline_days:parseInt(c),target_cv_count:parseInt(u)}),alert("Recruiters Assigned & SLA Set! "),t(-1)}catch(j){console.error("Assignment failed:",j),alert("Failed to assign. Check console.")}finally{p(!1)}};return f?n.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading recruiters..."}):n.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assign Recruiters"}),n.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Job: ",n.jsx("span",{className:"font-semibold text-purple-700",children:r==null?void 0:r.title})," (",r==null?void 0:r.job_id,")"]})]}),n.jsx("button",{onClick:()=>t(-1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Cancel"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-gray-400",children:"Available Recruiters"}),n.jsxs("span",{className:"text-xs text-gray-500",children:[a.length," Total"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(j=>{var N,w;const _=l.includes(j.id);return n.jsxs("div",{onClick:()=>v(j.id),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${_?"border-purple-600 bg-purple-50 ring-2 ring-purple-100":"border-gray-100 bg-white hover:border-gray-300"}`,children:[_&&n.jsx(dp,{className:"absolute top-3 right-3 text-purple-600",size:20}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 text-purple-700 flex items-center justify-center font-bold text-sm",children:((N=j.full_name)==null?void 0:N.charAt(0))||"R"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:j.full_name}),n.jsx("p",{className:"text-xs text-gray-500",children:j.email})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-gray-600",children:[n.jsx(ha,{size:14,className:"text-gray-400"}),n.jsxs("span",{children:[j.workload," Active Jobs"]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${j.status==="busy"?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600"}`,children:j.status})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex flex-wrap gap-1",children:((w=j.specialization)==null?void 0:w.map(k=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-[10px] font-medium",children:k},k)))||n.jsx("span",{className:"text-[10px] text-gray-400",children:"No specialization data"})})]},j.id)})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm space-y-6",children:[n.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-gray-400",children:"SLA & Targets"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1st CV Deadline (Days)"}),n.jsxs("div",{className:"relative",children:[n.jsx(pn,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),n.jsx("input",{type:"number",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"7"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target CV Count"}),n.jsxs("div",{className:"relative",children:[n.jsx(mf,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),n.jsx("input",{type:"number",value:u,onChange:j=>m(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"5"})]})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl flex gap-3",children:[n.jsx(Zs,{className:"text-blue-500 shrink-0",size:20}),n.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed",children:["Assigning multiple recruiters activates ",n.jsx("b",{children:"competitive sourcing mode"}),". First to submit quality profiles wins the slot."]})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{onClick:b,disabled:x||l.length===0,className:`w-full py-3 rounded-xl font-bold text-sm transition-all ${x||l.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-100"}`,children:x?"Processing...":`Assign ${l.length} Recruiter${l.length>1?"s":""}`})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[n.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Selection Summary"}),n.jsxs("ul",{className:"space-y-2",children:[a.filter(j=>l.includes(j.id)).map(j=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-700 font-medium",children:j.full_name}),n.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-100 px-2 py-0.5 rounded uppercase",children:"Selected"})]},j.id)),l.length===0&&n.jsx("li",{className:"text-sm text-gray-400 italic",children:"No recruiters selected"})]})]})]})]})]})}function vWe(){const{jobId:e}=Rr(),[t,r]=g.useState(!0),[s,a]=g.useState([]),i=async()=>{try{const l=await q.get("/v1/am/recruiter-submissions",{params:{job_id:e}});a(l.data.submissions||[])}catch(l){console.error("Failed to load submissions:",l),alert("Failed to fetch recruiter submissions")}finally{r(!1)}};return g.useEffect(()=>{i()},[]),t?n.jsx("h2",{children:"Loading..."}):n.jsxs("div",{className:"p-6 bg-white shadow rounded",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Recruiter Submissions  Job: ",e]}),s.length?n.jsxs("table",{className:"w-full border",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 border",children:"Candidate"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Status"}),n.jsx("th",{className:"p-2 border",children:"Fit Score"}),n.jsx("th",{className:"p-2 border",children:"Submitted"})]})}),n.jsx("tbody",{children:s.map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2",children:l.candidate_name}),n.jsx("td",{className:"border p-2",children:l.email}),n.jsx("td",{className:"border p-2",children:Gs(l.status)}),n.jsx("td",{className:"border p-2",children:l.fit_score||"N/A"}),n.jsx("td",{className:"border p-2",children:Zp(l.submitted_at)})]},l.application_id))})]}):n.jsx("p",{children:"No submissions found"})]})}const QF=[{id:"cookieman",name:"CookieMan"},{id:"itc_infotech",name:"ITC Infotech"},{id:"itc_ltd",name:"ITC Ltd"},{id:"tcl",name:"TCL"},{id:"tctsl",name:"TCTSL"}],eD={sent_to_am:{label:"Sent to AM",color:"bg-teal-100 text-teal-700",icon:Ri},am_viewed:{label:"Sent to AM",color:"bg-cyan-100 text-cyan-700",icon:cl},am_shortlisted:{label:"AM Shortlisted",color:"bg-green-100 text-green-700",icon:mf},am_hold:{label:"AM Hold",color:"bg-amber-100 text-amber-700",icon:pn},am_rejected:{label:"AM Rejected",color:"bg-red-100 text-red-700",icon:ti},sent_to_client:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:Ri},client_viewed:{label:"Sent to Client",color:"bg-orange-100 text-orange-700",icon:cl},client_shortlisted:{label:"Client Shortlisted",color:"bg-green-100 text-green-700",icon:Oi},client_hold:{label:"Client Hold",color:"bg-amber-100 text-amber-700",icon:pn},client_rejected:{label:"Client Rejected",color:"bg-red-100 text-red-700",icon:ti},interview_scheduled:{label:"Interview Scheduled",color:"bg-violet-100 text-violet-700",icon:si},interview_completed:{label:"Interview Done",color:"bg-violet-100 text-violet-700",icon:Oi},selected:{label:"Selected",color:"bg-emerald-100 text-emerald-700",icon:mf},negotiation:{label:"Negotiation",color:"bg-yellow-100 text-yellow-700",icon:Qp},hired:{label:"Hired",color:"bg-green-100 text-green-700",icon:WU}},nd=[{id:"inbox",label:"Inbox (Sent to AM)",statuses:["sent_to_am","am_viewed"],icon:Ri},{id:"shortlisted",label:"AM Shortlisted",statuses:["am_shortlisted"],icon:mf},{id:"am_hold",label:"AM Hold",statuses:["am_hold"],icon:pn},{id:"rejected",label:"AM Rejected",statuses:["am_rejected"],icon:ti},{id:"sent_to_client",label:"Sent to Client",statuses:["sent_to_client"],icon:df},{id:"client_shortlisted",label:"Client Shortlisted",statuses:["client_shortlisted"],icon:Oi},{id:"interview_scheduled",label:"Interview Scheduled",statuses:["interview_scheduled","interview_completed"],icon:si},{id:"client_hold",label:"Client Hold",statuses:["client_hold"],icon:pn},{id:"client_rejected",label:"Client Rejected",statuses:["client_rejected"],icon:ti}],bWe=new Set(["closed","cancelled","canceled","archived","inactive","deleted","filled","completed"]),Tr=e=>{const t=String(e||"").trim().toLowerCase();if(!t)return"";const r=t.replace(/[\s-]+/g,"_");return r==="hold_revisit"?"am_hold":r==="am_viewed"?"sent_to_am":r==="client_viewed"?"sent_to_client":r.startsWith("interview_schedule")?"interview_scheduled":r.startsWith("interview_complete")?"interview_completed":r},jWe=Array.from(new Set(nd.flatMap(e=>e.statuses.map(t=>Tr(t))))),_w=3e4,_We=8e3,wWe=60,tD=8,NWe=new Set([401,403,404,405,422]),kWe=new Set(["sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed","selected","negotiation","hired"]),SWe=e=>{const t=String((e==null?void 0:e.message)||"").toLowerCase();return(e==null?void 0:e.code)==="ECONNABORTED"||t.includes("timeout")},Mu=e=>{var t;return NWe.has((t=e==null?void 0:e.response)==null?void 0:t.status)||SWe(e)},Gt=e=>String(e||"").trim().toLowerCase(),CWe=/^[a-z]{2,6}-c-\d{3,}$/i,AWe=e=>CWe.test(String(e||"").trim()),v0=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=new Set([e==null?void 0:e.application_id,e==null?void 0:e.applicationId,t==null?void 0:t.application_id,t==null?void 0:t.applicationId].map(a=>Gt(a)).filter(Boolean)),s=[e==null?void 0:e.candidate_uuid,t==null?void 0:t.candidate_uuid,e==null?void 0:e.candidate_id,t==null?void 0:t.candidate_id,e==null?void 0:e.id,t==null?void 0:t.id];for(const a of s){const i=String(a||"").trim();if(i&&!r.has(Gt(i))&&!AWe(i))return i}return""},$a=e=>String(e||"").trim().toLowerCase().replace(/\s+/g,"_"),Lg=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),Ig=e=>Array.isArray(e)?e:Array.isArray(e==null?void 0:e.requirements)?e.requirements:Array.isArray(e==null?void 0:e.jobs)?e.jobs:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.data)?e.data:[],EWe=e=>{var i;const t=(e==null?void 0:e.job_id)||(e==null?void 0:e.requirement_id)||(e==null?void 0:e.id),r=String(t||"").trim(),s=(e==null?void 0:e.client_name)||(e==null?void 0:e.client_display_name)||(e==null?void 0:e.company_name)||((i=e==null?void 0:e.client)==null?void 0:i.name)||"",a=(e==null?void 0:e.client_id)||$a(s);return{...e,id:r,job_id:String((e==null?void 0:e.job_id)||r||""),requirement_id:String((e==null?void 0:e.requirement_id)||r||""),title:(e==null?void 0:e.title)||(e==null?void 0:e.job_title)||(e==null?void 0:e.requirement_title)||(e==null?void 0:e.requirement_code)||"Untitled Requirement",requirement_code:(e==null?void 0:e.requirement_code)||(e==null?void 0:e.job_id)||r,client_name:s||"Client not specified",client_id:a,status:Tr((e==null?void 0:e.status)||"open")}},TWe=e=>!bWe.has(Tr(e==null?void 0:e.status)),PWe={sent_to_am:10,am_shortlisted:20,am_hold:30,am_rejected:40,sent_to_client:50,client_shortlisted:60,client_hold:70,client_rejected:80,interview_scheduled:90,interview_completed:100,selected:110,negotiation:120,hired:130},gb=e=>PWe[Tr(e)]||0,OWe=(e=[])=>{const t=new Map;return e.forEach(r=>{const s=Gt((r==null?void 0:r.candidate_id)||(r==null?void 0:r.id)),a=Gt((r==null?void 0:r.job_id)||(r==null?void 0:r.requirement_id)),i=Gt(r==null?void 0:r.application_id),l=s&&a&&`${s}::${a}`||i||s;if(!l)return;if(!t.has(l)){t.set(l,r);return}const o=t.get(l),c=gb((o==null?void 0:o.status)||(o==null?void 0:o.stage)),d=gb((r==null?void 0:r.status)||(r==null?void 0:r.stage));if(d>c){t.set(l,r);return}if(d<c)return;const u=new Date((o==null?void 0:o.updated_at)||(o==null?void 0:o.submitted_at)||0).getTime();new Date((r==null?void 0:r.updated_at)||(r==null?void 0:r.submitted_at)||0).getTime()>=u&&t.set(l,r)}),Array.from(t.values()).sort((r,s)=>new Date((s==null?void 0:s.updated_at)||(s==null?void 0:s.submitted_at)||0).getTime()-new Date((r==null?void 0:r.updated_at)||(r==null?void 0:r.submitted_at)||0).getTime())},RWe=(e=[])=>e.reduce((t,r)=>{const s=Tr((r==null?void 0:r.status)||(r==null?void 0:r.stage));return s&&(t[s]=(t[s]||0)+1),t},{}),LWe=e=>{if(!e)return{};if(typeof e=="object")return e;if(typeof e!="string")return{};try{const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch{return{}}},IWe=e=>{var t;return e?Array.isArray(e)?e:Array.isArray(e.feedbacks)?e.feedbacks:Array.isArray((t=e.data)==null?void 0:t.feedbacks)?e.data.feedbacks:Array.isArray(e.items)?e.items:e.feedback&&typeof e.feedback=="object"?[e.feedback]:[]:[]},YV=(e,t=0)=>{const r=LWe((e==null?void 0:e.meta)||(e==null?void 0:e.metadata)||(e==null?void 0:e.note_meta)||(e==null?void 0:e.payload)),s=e!=null&&e.ratings&&typeof e.ratings=="object"?e.ratings:r!=null&&r.ratings&&typeof r.ratings=="object"?r.ratings:{};return{id:(e==null?void 0:e.id)||(e==null?void 0:e.feedback_id)||(e==null?void 0:e.note_id)||`feedback-${t}`,decision:(e==null?void 0:e.decision)||(r==null?void 0:r.decision)||(e==null?void 0:e.status)||(e==null?void 0:e.note_type)||"",call_type:(e==null?void 0:e.call_type)||(r==null?void 0:r.call_type)||"Call Feedback",call_date:(e==null?void 0:e.call_date)||(e==null?void 0:e.created_at)||(e==null?void 0:e.updated_at)||(e==null?void 0:e.timestamp)||"",rating:Number((e==null?void 0:e.rating)||(r==null?void 0:r.rating)||0),ratings:s,salary_alignment:(e==null?void 0:e.salary_alignment)||(r==null?void 0:r.salary_alignment)||"",candidate_intent:(e==null?void 0:e.candidate_intent)||(r==null?void 0:r.candidate_intent)||"",strengths:(e==null?void 0:e.strengths)||(r==null?void 0:r.strengths)||"",concerns:(e==null?void 0:e.concerns)||(r==null?void 0:r.concerns)||"",additional_notes:(e==null?void 0:e.additional_notes)||(r==null?void 0:r.additional_notes)||"",rejection_reason:(e==null?void 0:e.rejection_reason)||(r==null?void 0:r.rejection_reason)||"",summary:(e==null?void 0:e.summary)||(e==null?void 0:e.free_text)||(e==null?void 0:e.note)||(e==null?void 0:e.note_text)||(e==null?void 0:e.content)||(r==null?void 0:r.summary)||(r==null?void 0:r.free_text)||"",recruiter_name:(e==null?void 0:e.recruiter_name)||(e==null?void 0:e.created_by_name)||(e==null?void 0:e.author_name)||"",source:(e==null?void 0:e.source)||(e==null?void 0:e.note_stage)||(e!=null&&e.note_type?"note":"call_feedback")}},ZV=(e=[])=>{const t=e.map((s,a)=>YV(s,a)).filter(s=>{const a=s.rating>0||Object.values(s.ratings||{}).some(i=>Number(i)>0);return!!(s.summary||s.decision||s.strengths||s.concerns||s.additional_notes||a)}),r=new Map;return t.forEach(s=>{const a=`${s.id}::${s.call_date}::${s.summary}`;r.has(a)||r.set(a,s)}),Array.from(r.values()).sort((s,a)=>{const i=new Date(s.call_date||0).getTime();return new Date(a.call_date||0).getTime()-i})},FWe=e=>{const r=(Array.isArray(e==null?void 0:e.notes)?e.notes:[]).filter(a=>String((a==null?void 0:a.note_stage)||"").toLowerCase()==="call_feedback").map(a=>YV(a)),s=[...Array.isArray(e==null?void 0:e.feedbacks)?e.feedbacks:[],...Array.isArray(e==null?void 0:e.call_feedbacks)?e.call_feedbacks:[],...e!=null&&e.latest_call_feedback?[e.latest_call_feedback]:[],...e!=null&&e.call_feedback?[e.call_feedback]:[]];return e!=null&&e.feedback_summary&&!s.length&&!r.length&&s.push({summary:e.feedback_summary,decision:e.decision||e.feedback_decision||"Send to AM",call_date:e.submitted_at||e.updated_at||e.created_at,source:"summary"}),ZV([...s,...r])},DWe=e=>{if(!e)return"Date not available";const t=new Date(e);return Number.isNaN(t.getTime())?"Date not available":t.toLocaleString()},$We=e=>{const t=e!=null&&e.ratings&&typeof e.ratings=="object"?Object.values(e.ratings).map(r=>Number(r)).filter(r=>r>0):[];return t.length>0?(t.reduce((r,s)=>r+s,0)/t.length).toFixed(1):Number(e==null?void 0:e.rating)>0?Number(e.rating).toFixed(1):""},Td=e=>e==null?!1:typeof e=="string"?e.trim()!=="":!0,zt=(...e)=>{for(const t of e)if(Td(t))return typeof t=="string"?t.trim():t;return""},rD=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]/g,"").trim(),nD=(e,t={})=>{const r=rD(e);return r?[t==null?void 0:t.full_name,t==null?void 0:t.candidate_name,t==null?void 0:t.name,String((t==null?void 0:t.email)||"").split("@")[0],t==null?void 0:t.public_id,t==null?void 0:t.id,t==null?void 0:t.candidate_id].map(rD).filter(Boolean).some(a=>a?!!(r===a||a.length>=7&&r.includes(a)||r.length>=7&&a.includes(r)):!1):!1},MWe=e=>{if(!Td(e))return"--";const t=String(e).trim();return t?/yr|year/i.test(t)?t:`${t} yrs`:"--"},pA=e=>String(e||"").trim().split(/[\s_]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),BWe=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e==null?void 0:e.id,e==null?void 0:e.candidate_id,e==null?void 0:e.application_id,e==null?void 0:e.public_id,e==null?void 0:e.email,e==null?void 0:e.candidate_email,t==null?void 0:t.id,t==null?void 0:t.candidate_id,t==null?void 0:t.public_id,t==null?void 0:t.email,t==null?void 0:t.candidate_email];return Array.from(new Set(r.map(s=>String(s||"").trim().toLowerCase()).filter(Boolean)))},UWe=(e={})=>{const t=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},r=[e,t];return r.some(o=>Td(zt(o==null?void 0:o.interview_id,o==null?void 0:o.next_interview_id,o==null?void 0:o.latest_interview_id,o==null?void 0:o.upcoming_interview_id)))||r.some(o=>{const c=zt(o==null?void 0:o.scheduled_at,o==null?void 0:o.interview_scheduled_at,o==null?void 0:o.next_interview_date,o==null?void 0:o.interview_date,o==null?void 0:o.interview_datetime);if(!c)return!1;const d=new Date(c).getTime();return Number.isFinite(d)&&d>0})||r.some(o=>{const c=Number(zt(o==null?void 0:o.interview_count,o==null?void 0:o.interviews_count,o==null?void 0:o.scheduled_interviews_count,o==null?void 0:o.upcoming_interviews_count,o==null?void 0:o.total_interviews)||0);return Number.isFinite(c)&&c>0})?!0:[e==null?void 0:e.interviews,t==null?void 0:t.interviews,e==null?void 0:e.interview_logs,t==null?void 0:t.interview_logs].some(o=>!Array.isArray(o)||o.length===0?!1:o.some(c=>{const d=Tr((c==null?void 0:c.status)||(c==null?void 0:c.stage)||"");if(["cancelled","rejected","no_show"].includes(d))return!1;const u=zt(c==null?void 0:c.scheduled_at,c==null?void 0:c.interview_date,c==null?void 0:c.interview_datetime);if(u){const m=new Date(u).getTime();if(Number.isFinite(m)&&m>0)return!0}return Td(zt(c==null?void 0:c.id,c==null?void 0:c.interview_id,c==null?void 0:c.uuid))}))},Fg=(e={},t="")=>{const r=Tr(t||(e==null?void 0:e.status)||(e==null?void 0:e.stage)||"");if(r!=="interview_scheduled"||UWe(e))return r;const s=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},a=!!zt(e==null?void 0:e.interview_scheduling_ready,s==null?void 0:s.interview_scheduling_ready),i=String(zt(e==null?void 0:e.interview_scheduling_note,s==null?void 0:s.interview_scheduling_note)||"").trim();return!a&&i?"interview_scheduled":"client_shortlisted"},zWe=(e=[])=>{const t=new Map,r=new Map,s=(a,i)=>{if(!a)return!0;const l=new Date((a==null?void 0:a.scheduledAt)||0).getTime();return new Date(i||0).getTime()>=l};return e.forEach(a=>{var m,f,y,x,p,h,v,b,j,_,N,w,k,S,E,T,A,C,P,O,R;const i=Tr((a==null?void 0:a.status)||"scheduled");if(["cancelled","rejected","no_show"].includes(i))return;const l=i==="completed"?"interview_completed":"interview_scheduled",o=zt(a==null?void 0:a.scheduled_at,a==null?void 0:a.scheduledAt,a==null?void 0:a.start_time,a==null?void 0:a.start_at),c=Array.from(new Set([(m=a==null?void 0:a.candidate)==null?void 0:m.id,a==null?void 0:a.candidate_id,(f=a==null?void 0:a.candidate)==null?void 0:f.candidate_id,(y=a==null?void 0:a.candidate)==null?void 0:y.public_id,a==null?void 0:a.candidate_public_id,a==null?void 0:a.candidate_email,(x=a==null?void 0:a.candidate)==null?void 0:x.email,(h=(p=a==null?void 0:a.submission)==null?void 0:p.candidate)==null?void 0:h.id,(v=a==null?void 0:a.submission)==null?void 0:v.candidate_id,(j=(b=a==null?void 0:a.submission)==null?void 0:b.candidate)==null?void 0:j.candidate_id,(N=(_=a==null?void 0:a.submission)==null?void 0:_.candidate)==null?void 0:N.public_id,(k=(w=a==null?void 0:a.submission)==null?void 0:w.candidate)==null?void 0:k.email].map(F=>String(F||"").trim().toLowerCase()).filter(Boolean))),d=Array.from(new Set([(S=a==null?void 0:a.job)==null?void 0:S.id,a==null?void 0:a.job_id,a==null?void 0:a.requirement_id,(E=a==null?void 0:a.job)==null?void 0:E.job_id,(A=(T=a==null?void 0:a.submission)==null?void 0:T.job)==null?void 0:A.id,(C=a==null?void 0:a.submission)==null?void 0:C.job_id,(P=a==null?void 0:a.submission)==null?void 0:P.requirement_id,(R=(O=a==null?void 0:a.submission)==null?void 0:O.job)==null?void 0:R.job_id].map(F=>String(F||"").trim().toLowerCase()).filter(Boolean)));if(!c.length)return;const u={status:l,scheduledAt:o||null,interviewStatus:i,interviewId:zt(a==null?void 0:a.id,a==null?void 0:a.interview_id)};d.length>0&&c.forEach(F=>{d.forEach(Q=>{const W=`${F}::${Q}`,L=t.get(W);s(L,o)&&t.set(W,u)})}),c.forEach(F=>{const Q=r.get(F);s(Q,o)&&r.set(F,u)})}),{byCandidateJob:t,byCandidate:r}},WWe=e=>{var t,r;return e?Array.isArray(e)?e:Array.isArray(e==null?void 0:e.interview_logs)?e.interview_logs:Array.isArray((t=e==null?void 0:e.data)==null?void 0:t.interview_logs)?e.data.interview_logs:Array.isArray(e==null?void 0:e.interviews)?e.interviews:Array.isArray((r=e==null?void 0:e.data)==null?void 0:r.interviews)?e.data.interviews:Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e==null?void 0:e.data)?e.data:[]:[]},sD={shortlisted:{label:"Shortlisted",icon:Oi,markerClass:"bg-green-50 border-green-200 text-green-700",badgeClass:"bg-green-50 border-green-200 text-green-700",latestClass:"ring-2 ring-green-200 border-green-200 shadow-md"},sent:{label:"Sent to Client",icon:Ri,markerClass:"bg-blue-50 border-blue-200 text-blue-700",badgeClass:"bg-blue-50 border-blue-200 text-blue-700",latestClass:"ring-2 ring-blue-200 border-blue-200 shadow-md"},hold:{label:"On Hold",icon:pn,markerClass:"bg-orange-50 border-orange-200 text-orange-700",badgeClass:"bg-orange-50 border-orange-200 text-orange-700",latestClass:"ring-2 ring-orange-200 border-orange-200 shadow-md"},rejected:{label:"Rejected",icon:ti,markerClass:"bg-red-50 border-red-200 text-red-700",badgeClass:"bg-red-50 border-red-200 text-red-700",latestClass:"ring-2 ring-red-200 border-red-200 shadow-md"}},VWe=e=>{const t=Tr(e);return t.includes("reject")?"rejected":t.includes("hold")?"hold":t.includes("shortlist")||["selected","hired","joined","offer_accepted"].includes(t)?"shortlisted":"sent"},HWe=(e={})=>{const t=Tr(e==null?void 0:e.status);if(t==="am_rejected")return"Account Manager";if(t==="client_rejected")return"Client";const r=pA(zt(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")||String(zt(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name,e==null?void 0:e.created_by_name)).trim().toLowerCase().includes("client")?"Client":""},xA=(e={})=>{const t=pA(zt(e==null?void 0:e.role,e==null?void 0:e.actor_role,e==null?void 0:e.actor_type)).toLowerCase();if(t.includes("account manager"))return"Account Manager";if(t.includes("client"))return"Client";if(t.includes("recruiter"))return"Recruiter";if(t.includes("candidate"))return"Candidate";const r=String(zt(e==null?void 0:e.by,e==null?void 0:e.user,e==null?void 0:e.actor_name,e==null?void 0:e.created_by_name)).trim().toLowerCase();return r.includes("account manager")?"Account Manager":r.includes("client")?"Client":r.includes("recruiter")?"Recruiter":r.includes("candidate")?"Candidate":""},qWe=(e={})=>{const t=Tr(e==null?void 0:e.status);return t==="am_hold"||t==="hold_revisit"?"Account Manager":t==="client_hold"?"Client":xA(e)},GWe=(e={})=>{const t=Tr(e==null?void 0:e.status);return t==="am_shortlisted"?"Account Manager":t==="client_shortlisted"?"Client":xA(e)},JWe=(e={})=>{const t=Tr(e==null?void 0:e.status),r=xA(e);return r||(t==="sent_to_client"?"Account Manager":t==="sent_to_am"?"Recruiter":t==="client_viewed"?"Client":t==="am_viewed"?"Account Manager":"")},KWe=(e={},t="sent")=>{if(t==="hold"){const s=qWe(e);return s?`On Hold by ${s}`:"On Hold"}if(t==="shortlisted"){const s=GWe(e);return s?`Shortlisted by ${s}`:"Shortlisted"}if(t==="sent"){const s=Tr(e==null?void 0:e.status),a=JWe(e);return s==="sent_to_am"||s==="am_viewed"?a&&a!=="Account Manager"?`Sent to Account Manager by ${a}`:"Sent to Account Manager":s==="sent_to_client"||s==="client_viewed"?a&&a!=="Client"?`Sent to Client by ${a}`:"Sent to Client":a?`Sent by ${a}`:"Sent"}const r=HWe(e);return r?`Rejected by ${r}`:"Rejected"},XWe=e=>{if(!e)return"Date unavailable";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Date unavailable";const r=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t);return`${r}  ${s}`},YWe=e=>{const t=String(e||"").trim();return!t||/status\s+changed\s+from/i.test(t)||/(?:from|to)\s+[a-z]+_[a-z0-9_]+/i.test(t)||/\b[a-z]+_[a-z0-9_]+\b/i.test(t)?"":t};function ZWe({candidate:e,onAction:t,onViewProfile:r,onViewFeedback:s,onViewTimeline:a}){var N;const i=e.status||"sent_to_am",l=Tr(i),o=eD[l]||eD.sent_to_am,c=e.is_final,d=(e==null?void 0:e.candidate)||(e==null?void 0:e.candidate_details)||(e==null?void 0:e.profile)||{},u=zt(e.email,d.email,e.candidate_email),m=zt(e.phone,d.phone,e.mobile,e.phone_number),f=zt(e.current_location,e.currentLocation,e.location,e.city,e.preferred_location,d.current_location,d.location,d.city),y=zt(e.experience_years,e.experience,e.total_experience,d.experience_years,d.experience,d.total_experience),x=zt(e.current_employer,e.current_company,d.current_employer,d.current_company),p=zt(e.current_designation,e.designation,e.job_title,e.requirement_title,e.role,d.current_designation,d.designation,d.role),h=nD(x,e)?"":x,v=nD(p,e)?"":p,b=h||v,j=h?df:Ao,_=zt(e.expected_ctc,e.expected_salary,e.expectedCtc,d.expected_ctc,d.expected_salary,d.expectedCtc);return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.full_name||e.candidate_name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.public_id||((N=e.id)==null?void 0:N.slice(0,8))})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.color}`,children:o.label})]}),(e.client_name||e.job_title||e.requirement_title||e.recruiter_name||e.submitted_by_name)&&n.jsxs("div",{className:"mb-3 p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:[e.client_name&&n.jsxs("div",{className:"flex items-center gap-1 text-green-700 dark:text-green-300 text-sm mb-1",children:[n.jsx(df,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium truncate",children:e.client_name})]}),(e.job_title||e.requirement_title)&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-700 dark:text-purple-300 text-sm mb-1",children:[n.jsx(cn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium truncate",children:e.job_title||e.requirement_title})]}),(e.recruiter_name||e.submitted_by_name)&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400 text-xs",children:[n.jsx(Ao,{className:"w-3 h-3"}),n.jsxs("span",{children:["Sent by:"," ",e.recruiter_name||e.submitted_by_name]})]}),e.submitted_at&&n.jsxs("div",{className:"flex items-center gap-1 text-purple-500 dark:text-purple-400 text-xs mt-1",children:[n.jsx(pn,{className:"w-3 h-3"}),n.jsx("span",{children:new Date(e.submitted_at).toLocaleDateString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(uu,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:u||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(V1,{className:"w-3 h-3"}),n.jsx("span",{children:m||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx($c,{className:"w-3 h-3"}),n.jsx("span",{children:f||"--"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(ha,{className:"w-3 h-3"}),n.jsx("span",{children:MWe(y)})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[Ce.createElement(j,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",children:b||"Not Provided"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[n.jsx(Qp,{className:"w-3 h-3"}),n.jsx("span",{children:_||"--"})]})]}),e.skills&&e.skills.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.skills.slice(0,5).map((w,k)=>n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:typeof w=="string"?w:w==null?void 0:w.name},k)),e.skills.length>5&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.skills.length-5]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>{r&&r(e),i==="sent_to_am"&&t(e,"am_view")},className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:[n.jsx(cl,{className:"w-3 h-3"}),"View Detail"]}),n.jsxs("button",{onClick:()=>s&&s(e),className:"flex items-center gap-1 px-3 py-1.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg text-sm hover:bg-emerald-100 transition-colors",children:[n.jsx(zU,{className:"w-3 h-3"}),"View Feedback"]}),n.jsxs("button",{onClick:()=>a&&a(e),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-200 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:[n.jsx(pn,{className:"w-3 h-3"}),"Timeline"]}),c&&n.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-500 rounded-lg text-sm",children:[n.jsx(Zs,{className:"w-3 h-3"}),"Final Status"]})]})]})}function QWe(){var ar,er,Be,xt,mt,It,Yt;const e=Et(),[t,r]=Os(),s=t.get("tab")||"inbox",a=s==="viewed"?"inbox":s==="client_viewed"?"sent_to_client":["interview_scheduled","interview_completed"].includes(s)?"interview_scheduled":s,i=nd.some(Ne=>Ne.id===a)?a:"inbox",[l,o]=g.useState([]),[c,d]=g.useState([]),[u,m]=g.useState(QF),[f,y]=g.useState({}),[x,p]=g.useState(!0),[h,v]=g.useState(!1),[b,j]=g.useState(""),[_,N]=g.useState(i),[w,k]=g.useState(t.get("requirement")||"all"),[S,E]=g.useState(t.get("client")||"all"),[T,A]=g.useState(!1),[C,P]=g.useState(""),[O,R]=g.useState(null),[F,Q]=g.useState(null),[W,L]=g.useState(!1),[I,K]=g.useState({open:!1,candidate:null,loading:!1,error:"",feedbacks:[]}),[D,Y]=g.useState({open:!1,candidate:null,loading:!1,error:"",items:[]}),re=g.useRef(0),B=g.useRef({}),G=g.useRef({}),ce=g.useRef(new Set),ae=g.useRef(""),fe=g.useRef(new Set),ne=(Ne={},st=_w)=>({...Ne||{},timeout:typeof(Ne==null?void 0:Ne.timeout)=="number"&&Ne.timeout>0?Ne.timeout:st}),he=(Ne,st={},qe=_w)=>q.get(Ne,ne(st,qe)),M=(Ne,st,qe={},ft=_w)=>q.post(Ne,st,ne(qe,ft)),Se=g.useMemo(()=>{const Ne={};return(Array.isArray(c)?c:[]).forEach(qe=>{const ft=$a(qe.client_id||qe.client_name),kt=Gt(qe.id||qe.job_id||qe.requirement_id);ft&&(Ne[ft]||(Ne[ft]=[]),kt&&Ne[ft].push(kt))}),Ne},[c]),me=g.useMemo(()=>{const Ne=Array.isArray(c)?c:[];if(S==="all")return Ne;const st=Se[$a(S)]||[];return Ne.filter(qe=>st.includes(Gt(qe.id||qe.job_id||qe.requirement_id)))},[c,S,Se]),Pe=async(Ne=[])=>{if(!Array.isArray(Ne)||Ne.length===0)return Ne;const st=Oe=>{var je,Re,oe;return Array.from(new Set([Gt(v0(Oe)),Gt(Oe==null?void 0:Oe.candidate_id),Gt(Oe==null?void 0:Oe.candidate_uuid),Gt(Oe==null?void 0:Oe.id),Gt((je=Oe==null?void 0:Oe.candidate)==null?void 0:je.candidate_id),Gt((Re=Oe==null?void 0:Oe.candidate)==null?void 0:Re.candidate_uuid),Gt((oe=Oe==null?void 0:Oe.candidate)==null?void 0:oe.id),Gt(Oe==null?void 0:Oe.public_id)].filter(Boolean)))},qe=Oe=>{const je=v0(Oe);return je?[je]:[]},ft=Oe=>{const je=Td(zt(Oe==null?void 0:Oe.current_location,Oe==null?void 0:Oe.location,Oe==null?void 0:Oe.city,Oe==null?void 0:Oe.preferred_location)),Re=Td(zt(Oe==null?void 0:Oe.experience_years,Oe==null?void 0:Oe.experience,Oe==null?void 0:Oe.total_experience)),oe=Td(zt(Oe==null?void 0:Oe.current_employer,Oe==null?void 0:Oe.current_company,Oe==null?void 0:Oe.current_designation,Oe==null?void 0:Oe.designation,Oe==null?void 0:Oe.role));return!(je&&Re&&oe)},kt=Array.from(new Set(Ne.filter(ft).flatMap(qe).filter(Boolean))).filter(Oe=>{const je=Gt(Oe);return!(!je||G.current[je]||ce.current.has(je))}).slice(0,wWe);if(kt.length>0)for(let Oe=0;Oe<kt.length;Oe+=tD){const je=kt.slice(Oe,Oe+tD);(await Promise.allSettled(je.map(oe=>he(`/v1/candidates/${oe}`,{},_We)))).forEach((oe,Ue)=>{var ut,Z,H,V,ee;const Ge=je[Ue],ie=Gt(Ge);if(oe.status!=="fulfilled"){const X=(Z=(ut=oe.reason)==null?void 0:ut.response)==null?void 0:Z.status;ie&&[400,404,422].includes(X)&&ce.current.add(ie);return}const ge=((V=(H=oe.value)==null?void 0:H.data)==null?void 0:V.data)??((ee=oe.value)==null?void 0:ee.data)??null;ge&&typeof ge=="object"?ie&&(G.current[ie]=ge,ce.current.delete(ie)):ie&&ce.current.add(ie)})}return Ne.map(Oe=>{const Re=st(Oe).find(ge=>G.current[ge]);if(!Re)return Oe;const oe=G.current[Re];if(!oe||typeof oe!="object")return Oe;const Ue=(oe==null?void 0:oe.candidate)||(oe==null?void 0:oe.candidate_details)||(oe==null?void 0:oe.profile)||{},Ge=eu(oe,!0)||{},ie=zt(Oe==null?void 0:Oe.current_designation,Oe==null?void 0:Oe.designation,Oe==null?void 0:Oe.role,oe==null?void 0:oe.current_designation,oe==null?void 0:oe.designation,oe==null?void 0:oe.role,Ue==null?void 0:Ue.current_designation,Ue==null?void 0:Ue.designation,Ue==null?void 0:Ue.role,Ge==null?void 0:Ge.designation,Ge==null?void 0:Ge.currentRole);return{...Oe,email:zt(Oe==null?void 0:Oe.email,oe==null?void 0:oe.email,oe==null?void 0:oe.candidate_email,Ue==null?void 0:Ue.email,Ge==null?void 0:Ge.email),phone:zt(Oe==null?void 0:Oe.phone,oe==null?void 0:oe.phone,oe==null?void 0:oe.mobile,oe==null?void 0:oe.phone_number,Ue==null?void 0:Ue.phone,Ue==null?void 0:Ue.mobile,Ge==null?void 0:Ge.phone),current_location:zt(Oe==null?void 0:Oe.current_location,Oe==null?void 0:Oe.location,Oe==null?void 0:Oe.city,Oe==null?void 0:Oe.preferred_location,oe==null?void 0:oe.current_location,oe==null?void 0:oe.location,oe==null?void 0:oe.city,oe==null?void 0:oe.preferred_location,Ue==null?void 0:Ue.current_location,Ue==null?void 0:Ue.location,Ue==null?void 0:Ue.city,Ue==null?void 0:Ue.preferred_location,Ge==null?void 0:Ge.location,Ge==null?void 0:Ge.city,Ge==null?void 0:Ge.preferredLocation),experience_years:zt(Oe==null?void 0:Oe.experience_years,Oe==null?void 0:Oe.experience,Oe==null?void 0:Oe.total_experience,oe==null?void 0:oe.experience_years,oe==null?void 0:oe.experience,oe==null?void 0:oe.total_experience,Ue==null?void 0:Ue.experience_years,Ue==null?void 0:Ue.experience,Ue==null?void 0:Ue.total_experience,Ge==null?void 0:Ge.totalExperience),current_employer:zt(Oe==null?void 0:Oe.current_employer,Oe==null?void 0:Oe.current_company,oe==null?void 0:oe.current_employer,oe==null?void 0:oe.current_company,Ue==null?void 0:Ue.current_employer,Ue==null?void 0:Ue.current_company,Ge==null?void 0:Ge.currentCompany),current_designation:ie,designation:zt(Oe==null?void 0:Oe.designation,ie),expected_ctc:zt(Oe==null?void 0:Oe.expected_ctc,Oe==null?void 0:Oe.expected_salary,oe==null?void 0:oe.expected_ctc,oe==null?void 0:oe.expected_salary,Ue==null?void 0:Ue.expected_ctc,Ue==null?void 0:Ue.expected_salary,Ge==null?void 0:Ge.expectedCtcDisplay)}})};g.useEffect(()=>{if(w==="all"||!c.length)return;const Ne=Gt(w);me.some(qe=>Gt(qe.id||qe.job_id||qe.requirement_id)===Ne)||(k("all"),r({tab:_,client:S,requirement:"all"}))},[_,me,c.length,S,w,r]);const ue=()=>{if(C.trim()){const Ne={id:C.toLowerCase().replace(/\s+/g,"_"),name:C.trim()};m([...u,Ne]),P(""),A(!1)}},ye=async Ne=>{var st;R(Ne),L(!0);try{const qe=v0(Ne);if(!qe){Q(Ne);return}const ft=await q.get(`/v1/candidates/${qe}`),kt=((st=ft==null?void 0:ft.data)==null?void 0:st.data)??(ft==null?void 0:ft.data)??{},Oe=Gt(qe);Oe&&kt&&typeof kt=="object"&&(G.current[Oe]=kt),Q(kt)}catch(qe){console.error("Failed to fetch candidate details:",qe),Q(Ne)}finally{L(!1)}},Ye=()=>{R(null),Q(null)},lt=()=>{K({open:!1,candidate:null,loading:!1,error:"",feedbacks:[]})},xe=async Ne=>{var je,Re,oe;const st=v0(Ne),qe=FWe(Ne);if(K({open:!0,candidate:Ne,loading:!0,error:"",feedbacks:qe}),!st){K(Ue=>({...Ue,loading:!1,error:qe.length?"":"Candidate id missing, unable to fetch recruiter feedback"}));return}const ft=[`/v1/recruiter/candidates/${st}/call-feedback`,`/v1/am/candidates/${st}/call-feedback`,`/v1/candidates/${st}/call-feedback`];let kt=[],Oe="";for(const Ue of ft)try{const Ge=await q.get(Ue);if(kt=ZV(IWe(Ge==null?void 0:Ge.data)),kt.length>0)break}catch(Ge){const ie=(je=Ge==null?void 0:Ge.response)==null?void 0:je.status;if(ie===401||ie===403||ie===404)continue;Oe=((oe=(Re=Ge==null?void 0:Ge.response)==null?void 0:Re.data)==null?void 0:oe.detail)||(Ge==null?void 0:Ge.message)||"Failed to fetch recruiter feedback"}K(Ue=>({...Ue,loading:!1,feedbacks:kt.length>0?kt:Ue.feedbacks,error:kt.length>0?"":Oe&&Ue.feedbacks.length===0?Oe:""}))},Ae=()=>{Y({open:!1,candidate:null,loading:!1,error:"",items:[]})},$e=async Ne=>{var je,Re,oe,Ue,Ge;const st=(Ne==null?void 0:Ne.full_name)||(Ne==null?void 0:Ne.candidate_name)||"Candidate",qe=Array.from(new Set([Ne==null?void 0:Ne.candidate_id,Ne==null?void 0:Ne.id,Ne==null?void 0:Ne.application_id,Ne==null?void 0:Ne.candidate_uuid,Ne==null?void 0:Ne.public_id,(je=Ne==null?void 0:Ne.candidate)==null?void 0:je.candidate_id,(Re=Ne==null?void 0:Ne.candidate)==null?void 0:Re.id].filter(Boolean).map(ie=>String(ie).trim())));if(Y({open:!0,candidate:{...Ne||{},full_name:st},loading:!0,error:"",items:[]}),qe.length===0){Y(ie=>({...ie,loading:!1,error:"Candidate id missing, unable to load timeline"}));return}const ft=ie=>{var ut;const ge=(ie==null?void 0:ie.timeline)||((ut=ie==null?void 0:ie.data)==null?void 0:ut.timeline)||(ie==null?void 0:ie.data)||ie||[];return Array.isArray(ge)?ge:[]};let kt=[],Oe="";for(const ie of qe){const ge=[`/workflow/candidates/${ie}/timeline`,`/v1/workflow/candidates/${ie}/timeline`,`/v1/candidates/${ie}/timeline`];for(const ut of ge)try{const Z=await q.get(ut),H=ft(Z==null?void 0:Z.data);if(H.length>0){kt=H;break}kt.length||(kt=H)}catch(Z){const H=(oe=Z==null?void 0:Z.response)==null?void 0:oe.status;if(H===401||H===403||H===404)continue;Oe=((Ge=(Ue=Z==null?void 0:Z.response)==null?void 0:Ue.data)==null?void 0:Ge.detail)||(Z==null?void 0:Z.message)||"Failed to load timeline"}if(kt.length>0)break}Y(ie=>({...ie,loading:!1,items:kt,error:kt.length?"":Oe}))},Me=(Ne,st)=>{const qe=Ne&&typeof Ne=="object"?Ne:{id:Ne},ft=Fg(qe,st);if(!ft)return;const kt=Gt((qe==null?void 0:qe.candidate_id)||(qe==null?void 0:qe.id)),Oe=Gt(qe==null?void 0:qe.application_id),je=Gt((qe==null?void 0:qe.job_id)||(qe==null?void 0:qe.requirement_id)),Re=Fg(qe,qe==null?void 0:qe.status),oe=nd.find(ie=>ie.id===_),Ue=new Set(((oe==null?void 0:oe.statuses)||[]).map(Tr));kt&&(B.current[kt]=ft);const Ge=ie=>{if(Oe)return Gt(ie==null?void 0:ie.application_id)===Oe;const ge=Gt((ie==null?void 0:ie.id)||(ie==null?void 0:ie.candidate_id)),ut=Gt((ie==null?void 0:ie.job_id)||(ie==null?void 0:ie.requirement_id));return ge===kt&&(!je||ut===je)};o(ie=>{const ge=[];return ie.forEach(ut=>{if(!Ge(ut)){ge.push(ut);return}Ue.has(ft)&&ge.push({...ut,status:ft,updated_at:new Date().toISOString()})}),ge}),y(ie=>{const ge={...ie||{}};return Re&&(ge[Re]=Math.max(0,(ge[Re]||0)-1)),ge[ft]=(ge[ft]||0)+1,ge}),R(ie=>ie&&Ge(ie)?{...ie,status:ft}:ie),Q(ie=>ie&&{...ie,status:ft})};g.useEffect(()=>{We(),Fe()},[]),g.useEffect(()=>{Ke()},[_,w,S,c]);const Fe=async()=>{var Ne;try{const st=await q.get("/v1/am/clients"),qe=Array.isArray((Ne=st.data)==null?void 0:Ne.clients)?st.data.clients:Array.isArray(st.data)?st.data:[];if(qe.length>0){const ft=qe.map(Oe=>({id:String(Oe.id||Oe.client_id||"").trim(),name:Oe.name||Oe.client_name||Oe.full_name})).filter(Oe=>Oe.name),kt=[...QF];ft.forEach(Oe=>{kt.find(je=>{var Re;return je.name.toLowerCase()===((Re=Oe.name)==null?void 0:Re.toLowerCase())})||kt.push({id:Oe.id||$a(Oe.name),name:Oe.name})}),m(kt)}}catch{}},We=async()=>{var je,Re;const[Ne,st]=await Promise.allSettled([q.get("/v1/am/requirements"),q.get("/v1/job-management/requirements",{params:{skip:0,limit:200}})]),qe=[];Ne.status==="fulfilled"?qe.push(...Ig((je=Ne.value)==null?void 0:je.data)):console.error("Failed to fetch requirements from /v1/am/requirements:",Ne.reason),st.status==="fulfilled"?qe.push(...Ig((Re=st.value)==null?void 0:Re.data)):console.error("Failed to fetch requirements from /v1/job-management/requirements:",st.reason);const ft=qe.map(EWe).filter(oe=>Gt(oe.id)),Oe=Array.from(new Map(ft.map(oe=>[Gt(oe.id),oe])).values()).filter(TWe);d(Oe),m(oe=>{const Ue=[...oe];return Oe.forEach(Ge=>{if(!Ge.client_name)return;const ie=String(Ge.client_name).trim();if(!ie)return;Ue.find(ut=>$a(ut.name)===$a(ie))||Ue.push({id:Ge.client_id||$a(ie),name:ie})}),Ue})},Ze=async(Ne=[],st=[])=>{var je;const qe=new Set(st.map(Tr)),ft=$a(S),kt=new Set((Se[ft]||[]).map(Gt)),Oe=[];for(const Re of Ne){const oe=Gt(Re);if(!oe)continue;let Ue;try{Ue=await he(`/v1/recruiter/jobs/${oe}/submissions`)}catch{try{Ue=await he(`/v1/jobs/${oe}/submissions`)}catch(ut){Mu(ut)||console.warn(`Failed to fetch submissions for requirement ${oe}:`,ut);continue}}const Ge=c.find(ge=>Gt(ge.id||ge.job_id||ge.requirement_id)===oe);Ig((je=Ue==null?void 0:Ue.data)!=null&&je.candidates?Ue.data:Ue==null?void 0:Ue.data).forEach(ge=>{var He,nt,tt;const ut=Gt((ge==null?void 0:ge.job_id)||(ge==null?void 0:ge.requirement_id)||((He=ge==null?void 0:ge.requirement)==null?void 0:He.id)||((nt=ge==null?void 0:ge.job)==null?void 0:nt.id));if(ut&&ut!==oe)return;const Z=Tr((ge==null?void 0:ge.status)||(ge==null?void 0:ge.stage));if(!qe.has(Z))return;const H=ut||oe,V=$a((ge==null?void 0:ge.client_id)||(ge==null?void 0:ge.client_name)||(Ge==null?void 0:Ge.client_id)||(Ge==null?void 0:Ge.client_name));if(ft!=="all"&&(kt.size>0&&(!H||!kt.has(H))||kt.size===0&&V!==ft))return;const ee=(ge==null?void 0:ge.candidate_id)||((tt=ge==null?void 0:ge.candidate)==null?void 0:tt.id)||(ge==null?void 0:ge.candidate_uuid)||(ge==null?void 0:ge.id)||(ge==null?void 0:ge.application_id);if(!ee)return;const X=(ge==null?void 0:ge.candidate)||(ge==null?void 0:ge.candidate_details)||(ge==null?void 0:ge.profile)||{},te=zt(ge==null?void 0:ge.email,X==null?void 0:X.email,ge==null?void 0:ge.candidate_email),ke=zt(ge==null?void 0:ge.phone,X==null?void 0:X.phone,ge==null?void 0:ge.mobile,ge==null?void 0:ge.phone_number),ve=zt(ge==null?void 0:ge.experience_years,ge==null?void 0:ge.experience,ge==null?void 0:ge.total_experience,X==null?void 0:X.experience_years,X==null?void 0:X.experience,X==null?void 0:X.total_experience),J=zt(ge==null?void 0:ge.current_location,ge==null?void 0:ge.location,ge==null?void 0:ge.city,X==null?void 0:X.current_location,X==null?void 0:X.location,X==null?void 0:X.city),be=zt(ge==null?void 0:ge.current_employer,ge==null?void 0:ge.current_company,X==null?void 0:X.current_employer,X==null?void 0:X.current_company),we=zt(ge==null?void 0:ge.current_designation,ge==null?void 0:ge.designation,ge==null?void 0:ge.role,X==null?void 0:X.current_designation,X==null?void 0:X.designation,X==null?void 0:X.role),Ie=zt(ge==null?void 0:ge.expected_ctc,ge==null?void 0:ge.expected_salary,X==null?void 0:X.expected_ctc,X==null?void 0:X.expected_salary);Oe.push({...ge,id:ee,candidate_id:ee,application_id:(ge==null?void 0:ge.application_id)||(ge==null?void 0:ge.id),public_id:ge==null?void 0:ge.public_id,full_name:(ge==null?void 0:ge.candidate_name)||(ge==null?void 0:ge.full_name),email:te,phone:ke,status:Z,skills:(ge==null?void 0:ge.skills)||[],job_id:H,requirement_id:H,job_title:(Ge==null?void 0:Ge.title)||(ge==null?void 0:ge.job_title)||(ge==null?void 0:ge.requirement_title),requirement_title:(Ge==null?void 0:Ge.title)||(ge==null?void 0:ge.requirement_title)||(ge==null?void 0:ge.job_title),client_name:(Ge==null?void 0:Ge.client_name)||(ge==null?void 0:ge.client_name),client_id:(Ge==null?void 0:Ge.client_id)||(ge==null?void 0:ge.client_id),recruiter_name:(ge==null?void 0:ge.recruiter_name)||(ge==null?void 0:ge.submitted_by_name),submitted_by_name:(ge==null?void 0:ge.submitted_by_name)||(ge==null?void 0:ge.recruiter_name),submitted_at:(ge==null?void 0:ge.submitted_at)||(ge==null?void 0:ge.sent_to_am_at)||(ge==null?void 0:ge.created_at),updated_at:(ge==null?void 0:ge.updated_at)||(ge==null?void 0:ge.sent_to_am_at),match_score:ge==null?void 0:ge.match_score,experience_years:ve,current_location:J,current_employer:be,current_designation:we,designation:we,expected_ctc:Ie,notes:Array.isArray(ge==null?void 0:ge.notes)?ge.notes:[],latest_call_feedback:(ge==null?void 0:ge.latest_call_feedback)||(ge==null?void 0:ge.call_feedback)||null})})}return Oe},pt=async(Ne=[])=>{var Oe,je,Re,oe,Ue,Ge;const st=Array.from(new Set(Ne.map(Tr).filter(Boolean)));if(!st.length)return[];const qe=new Set(st),ft=(ie={},ge="")=>{var Ie,He,nt,tt,_e,Qe,U,se,at,ct;const ut=Tr((ie==null?void 0:ie.status)||(ie==null?void 0:ie.stage)||ge);if(!ut||!qe.has(ut))return null;const Z=Gt((ie==null?void 0:ie.job_id)||(ie==null?void 0:ie.requirement_id)||((Ie=ie==null?void 0:ie.requirement)==null?void 0:Ie.id)||((He=ie==null?void 0:ie.job)==null?void 0:He.id)),H=c.find(Te=>Gt(Te.id||Te.job_id||Te.requirement_id)===Z),V=(ie==null?void 0:ie.candidate)||(ie==null?void 0:ie.candidate_details)||(ie==null?void 0:ie.profile)||{},ee=(ie==null?void 0:ie.candidate_id)||(ie==null?void 0:ie.candidate_uuid)||((nt=ie==null?void 0:ie.candidate)==null?void 0:nt.id)||((tt=ie==null?void 0:ie.candidate)==null?void 0:tt.candidate_id)||(ie==null?void 0:ie.id)||(ie==null?void 0:ie.application_id);if(!ee)return null;const X=zt(ie==null?void 0:ie.email,V==null?void 0:V.email,ie==null?void 0:ie.candidate_email),te=zt(ie==null?void 0:ie.phone,V==null?void 0:V.phone,ie==null?void 0:ie.mobile,ie==null?void 0:ie.phone_number),ke=zt(ie==null?void 0:ie.experience_years,ie==null?void 0:ie.experience,ie==null?void 0:ie.total_experience,V==null?void 0:V.experience_years,V==null?void 0:V.experience,V==null?void 0:V.total_experience),ve=zt(ie==null?void 0:ie.current_location,ie==null?void 0:ie.location,ie==null?void 0:ie.city,V==null?void 0:V.current_location,V==null?void 0:V.location,V==null?void 0:V.city),J=zt(ie==null?void 0:ie.current_employer,ie==null?void 0:ie.current_company,V==null?void 0:V.current_employer,V==null?void 0:V.current_company),be=zt(ie==null?void 0:ie.current_designation,ie==null?void 0:ie.designation,ie==null?void 0:ie.role,V==null?void 0:V.current_designation,V==null?void 0:V.designation,V==null?void 0:V.role),we=zt(ie==null?void 0:ie.expected_ctc,ie==null?void 0:ie.expected_salary,V==null?void 0:V.expected_ctc,V==null?void 0:V.expected_salary);return{...ie,id:ee,candidate_id:ee,application_id:(ie==null?void 0:ie.application_id)||(ie==null?void 0:ie.id)||`${ee}-${Z||"no-job"}`,full_name:(ie==null?void 0:ie.candidate_name)||(ie==null?void 0:ie.full_name)||(V==null?void 0:V.full_name)||(V==null?void 0:V.name)||"",public_id:(ie==null?void 0:ie.public_id)||(V==null?void 0:V.public_id),email:X,phone:te,status:ut,skills:(ie==null?void 0:ie.skills)||(V==null?void 0:V.skills)||[],job_id:Z||(ie==null?void 0:ie.job_id)||(ie==null?void 0:ie.requirement_id),requirement_id:Z||(ie==null?void 0:ie.requirement_id)||(ie==null?void 0:ie.job_id),job_title:(H==null?void 0:H.title)||(ie==null?void 0:ie.job_title)||(ie==null?void 0:ie.requirement_title)||((_e=ie==null?void 0:ie.job)==null?void 0:_e.title)||((Qe=ie==null?void 0:ie.requirement)==null?void 0:Qe.title),requirement_title:(H==null?void 0:H.title)||(ie==null?void 0:ie.requirement_title)||(ie==null?void 0:ie.job_title)||((U=ie==null?void 0:ie.requirement)==null?void 0:U.title)||((se=ie==null?void 0:ie.job)==null?void 0:se.title),client_name:(H==null?void 0:H.client_name)||(ie==null?void 0:ie.client_name)||((at=ie==null?void 0:ie.client)==null?void 0:at.name),client_id:(H==null?void 0:H.client_id)||(ie==null?void 0:ie.client_id)||((ct=ie==null?void 0:ie.client)==null?void 0:ct.id),recruiter_name:(ie==null?void 0:ie.recruiter_name)||(ie==null?void 0:ie.submitted_by_name),submitted_by_name:(ie==null?void 0:ie.submitted_by_name)||(ie==null?void 0:ie.recruiter_name),submitted_at:(ie==null?void 0:ie.submitted_at)||(ie==null?void 0:ie.created_at)||(ie==null?void 0:ie.updated_at),updated_at:(ie==null?void 0:ie.updated_at)||(ie==null?void 0:ie.submitted_at)||(ie==null?void 0:ie.created_at),match_score:ie==null?void 0:ie.match_score,experience_years:ke,current_location:ve,current_employer:J,current_designation:be,designation:be,expected_ctc:we,notes:Array.isArray(ie==null?void 0:ie.notes)?ie.notes:[],latest_call_feedback:(ie==null?void 0:ie.latest_call_feedback)||(ie==null?void 0:ie.call_feedback)||null}};try{const ie=await he("/workflow/candidates",{params:{limit:200}}),ge=((Oe=ie==null?void 0:ie.data)==null?void 0:Oe.candidates)||((je=ie==null?void 0:ie.data)==null?void 0:je.items)||((Re=ie==null?void 0:ie.data)==null?void 0:Re.data)||[];return(Array.isArray(ge)?ge:[]).map(Z=>ft(Z)).filter(Boolean)}catch(ie){Mu(ie)||console.warn("Failed to fetch workflow candidates in bulk:",ie)}const kt=[];for(const ie of st)try{const ge=await he("/workflow/candidates",{params:{status:ie,limit:200}}),ut=((oe=ge==null?void 0:ge.data)==null?void 0:oe.candidates)||((Ue=ge==null?void 0:ge.data)==null?void 0:Ue.items)||((Ge=ge==null?void 0:ge.data)==null?void 0:Ge.data)||[];(Array.isArray(ut)?ut:[]).forEach(H=>{const V=ft(H,ie);V&&kt.push(V)})}catch(ge){Mu(ge)||console.warn(`Failed to fetch workflow candidates for status "${ie}"`,ge)}return kt},Ve=async()=>{var Re;const Ne=[{endpoint:"/v1/am/interview-logs"}],st=fe.current,qe=ae.current,ft=[];if(qe&&!st.has(qe)){const oe=Ne.find(Ue=>Ue.endpoint===qe);oe&&ft.push(oe)}Ne.forEach(oe=>{st.has(oe.endpoint)||ft.some(Ue=>Ue.endpoint===oe.endpoint)||ft.push(oe)});const kt=[];let Oe=!1;for(const{endpoint:oe,params:Ue}of ft)try{const Ge=Ue&&Object.keys(Ue).length>0?{params:Ue}:void 0,ie=await he(oe,Ge);Oe=!0,ae.current=oe;const ge=WWe(ie==null?void 0:ie.data);ge.length>0&&kt.push(...ge)}catch(Ge){const ie=(Re=Ge==null?void 0:Ge.response)==null?void 0:Re.status;if((ie===404||ie===405||ie===422)&&(st.add(oe),ae.current===oe&&(ae.current="")),ie===401||ie===403||ie===404||ie===405||ie===422)continue;Mu(Ge)||console.warn(`Failed to fetch interviews from ${oe}:`,Ge)}const je=new Map;return kt.forEach(oe=>{var H,V,ee,X,te,ke,ve,J,be,we,Ie,He,nt,tt,_e,Qe,U,se,at,ct,Te;const Ue=Gt(zt(oe==null?void 0:oe.candidate_id,(H=oe==null?void 0:oe.candidate)==null?void 0:H.id,(V=oe==null?void 0:oe.candidate)==null?void 0:V.candidate_id,(ee=oe==null?void 0:oe.candidate)==null?void 0:ee.public_id,oe==null?void 0:oe.candidate_public_id,oe==null?void 0:oe.candidate_email,(X=oe==null?void 0:oe.candidate)==null?void 0:X.email,(te=oe==null?void 0:oe.submission)==null?void 0:te.candidate_id,(ve=(ke=oe==null?void 0:oe.submission)==null?void 0:ke.candidate)==null?void 0:ve.id,(be=(J=oe==null?void 0:oe.submission)==null?void 0:J.candidate)==null?void 0:be.candidate_id,(Ie=(we=oe==null?void 0:oe.submission)==null?void 0:we.candidate)==null?void 0:Ie.public_id,(nt=(He=oe==null?void 0:oe.submission)==null?void 0:He.candidate)==null?void 0:nt.email)),Ge=Gt(zt(oe==null?void 0:oe.job_id,(tt=oe==null?void 0:oe.job)==null?void 0:tt.id,oe==null?void 0:oe.requirement_id,(_e=oe==null?void 0:oe.job)==null?void 0:_e.job_id,(Qe=oe==null?void 0:oe.submission)==null?void 0:Qe.job_id,(se=(U=oe==null?void 0:oe.submission)==null?void 0:U.job)==null?void 0:se.id,(at=oe==null?void 0:oe.submission)==null?void 0:at.requirement_id,(Te=(ct=oe==null?void 0:oe.submission)==null?void 0:ct.job)==null?void 0:Te.job_id)),ie=Gt(zt(oe==null?void 0:oe.id,oe==null?void 0:oe.interview_id))||`${Ue||"unknown-candidate"}::${Ge||"unknown-job"}::${String(zt(oe==null?void 0:oe.scheduled_at,oe==null?void 0:oe.start_time,oe==null?void 0:oe.created_at)||"").trim()}`,ge=je.get(ie),ut=new Date(zt(ge==null?void 0:ge.scheduled_at,ge==null?void 0:ge.updated_at,ge==null?void 0:ge.created_at)||0).getTime(),Z=new Date(zt(oe==null?void 0:oe.scheduled_at,oe==null?void 0:oe.updated_at,oe==null?void 0:oe.created_at)||0).getTime();(!ge||Z>=ut)&&je.set(ie,oe)}),{records:Array.from(je.values()),hasReachableInterviewSource:Oe}},Je=async(Ne=[])=>{if(!Array.isArray(Ne)||Ne.length===0)return Ne;let st={byCandidateJob:new Map,byCandidate:new Map};try{const{records:qe}=await Ve();st=zWe(qe)}catch(qe){console.warn("Failed to build AM interview status overlay:",qe)}return Ne.map(qe=>{var je,Re;const ft=BWe(qe),kt=Array.from(new Set([Gt((qe==null?void 0:qe.job_id)||(qe==null?void 0:qe.requirement_id)),Gt(((je=qe==null?void 0:qe.job)==null?void 0:je.id)||((Re=qe==null?void 0:qe.requirement)==null?void 0:Re.id))].filter(Boolean)));let Oe=null;for(const oe of ft){for(const Ue of kt){const Ge=st.byCandidateJob.get(`${oe}::${Ue}`);if(Ge){Oe=Ge;break}}if(Oe)break}if(!Oe)for(const oe of ft){const Ue=st.byCandidate.get(oe);if(Ue){Oe=Ue;break}}return Oe?{...qe,status:Oe.status,stage:Oe.status,interview_status:Oe.interviewStatus,interview_id:(qe==null?void 0:qe.interview_id)||Oe.interviewId,interview_scheduled_at:Oe.scheduledAt||(qe==null?void 0:qe.interview_scheduled_at)||(qe==null?void 0:qe.scheduled_at),interview_scheduling_ready:!1}:qe})},Ke=async()=>{var ut,Z,H;const Ne=++re.current,st=()=>re.current===Ne;p(!0);const qe=nd.find(V=>V.id===_),ft=((qe==null?void 0:qe.statuses)||["sent_to_am"]).map(Tr),kt=new Set(ft),Oe=new Set(jWe),je=Gt(w),Re=Lg((ut=c.find(V=>Gt(V.id||V.job_id||V.requirement_id)===je))==null?void 0:ut.title),oe=$a(S),Ue=new Set((Se[oe]||[]).map(Gt)),Ge=V=>{var ee,X;return Gt((V==null?void 0:V.job_id)||(V==null?void 0:V.requirement_id)||((ee=V==null?void 0:V.requirement)==null?void 0:ee.id)||((X=V==null?void 0:V.job)==null?void 0:X.id))},ie=V=>{const ee=Ge(V),X=Lg((V==null?void 0:V.requirement_title)||(V==null?void 0:V.job_title));if(je!=="all"){if(ee){if(ee!==je)return!1}else if(!Re||X!==Re)return!1}if(oe!=="all"){if(Ue.size>0){if(!ee||!Ue.has(ee))return!1}else if($a((V==null?void 0:V.client_id)||(V==null?void 0:V.client_name))!==oe)return!1}return!0},ge=(V=[])=>{if(!st())return;const ee=OWe(V).map(X=>{var we;const te=Fg(X,((we=X==null?void 0:X.status)==null?void 0:we.value)||(X==null?void 0:X.status)||(X==null?void 0:X.stage)),ke=Gt((X==null?void 0:X.candidate_id)||(X==null?void 0:X.id)),ve=ke?B.current[ke]:"",J=ve?Fg({...X,status:ve,stage:ve},ve):"",be=J&&gb(J)>=gb(te)?J:te;return{...X,id:(X==null?void 0:X.candidate_id)||(X==null?void 0:X.id)||(X==null?void 0:X.application_id),status:be}}).filter(X=>Gt(X.id)).filter(X=>Oe.has(Tr(X.status))).filter(ie);y(RWe(ee)),o(ee.filter(X=>kt.has(Tr(X.status))))};try{let V=[];try{const ve=(((Z=(await he("/v1/am/submissions")).data)==null?void 0:Z.submissions)||[]).filter(J=>Oe.has(Tr((J==null?void 0:J.status)||(J==null?void 0:J.stage)))).filter(ie).map(J=>{var ct;const be=Ge(J),we=c.find(Te=>Gt(Te.id||Te.job_id||Te.requirement_id)===be),Ie=(J==null?void 0:J.candidate)||(J==null?void 0:J.candidate_details)||(J==null?void 0:J.profile)||{},He=(J==null?void 0:J.candidate_id)||(J==null?void 0:J.candidate_uuid)||((ct=J==null?void 0:J.candidate)==null?void 0:ct.id)||(J==null?void 0:J.application_id),nt=zt(J==null?void 0:J.email,Ie==null?void 0:Ie.email,J==null?void 0:J.candidate_email),tt=zt(J==null?void 0:J.phone,Ie==null?void 0:Ie.phone,J==null?void 0:J.mobile,J==null?void 0:J.phone_number),_e=zt(J==null?void 0:J.experience_years,J==null?void 0:J.experience,J==null?void 0:J.total_experience,Ie==null?void 0:Ie.experience_years,Ie==null?void 0:Ie.experience,Ie==null?void 0:Ie.total_experience),Qe=zt(J==null?void 0:J.current_location,J==null?void 0:J.location,J==null?void 0:J.city,Ie==null?void 0:Ie.current_location,Ie==null?void 0:Ie.location,Ie==null?void 0:Ie.city),U=zt(J==null?void 0:J.current_employer,J==null?void 0:J.current_company,Ie==null?void 0:Ie.current_employer,Ie==null?void 0:Ie.current_company),se=zt(J==null?void 0:J.current_designation,J==null?void 0:J.designation,J==null?void 0:J.role,Ie==null?void 0:Ie.current_designation,Ie==null?void 0:Ie.designation,Ie==null?void 0:Ie.role),at=zt(J==null?void 0:J.expected_ctc,J==null?void 0:J.expected_salary,Ie==null?void 0:Ie.expected_ctc,Ie==null?void 0:Ie.expected_salary);return{...J,id:He,candidate_id:He,application_id:(J==null?void 0:J.application_id)||(J==null?void 0:J.id)||`${He}-${be}`,full_name:(J==null?void 0:J.candidate_name)||(J==null?void 0:J.full_name)||"",public_id:J==null?void 0:J.public_id,email:nt,phone:tt,status:Tr((J==null?void 0:J.status)||(J==null?void 0:J.stage)||"sent_to_am"),skills:(J==null?void 0:J.skills)||[],job_id:be,requirement_id:be,job_title:(we==null?void 0:we.title)||(J==null?void 0:J.job_title)||(J==null?void 0:J.requirement_title),requirement_title:(we==null?void 0:we.title)||(J==null?void 0:J.requirement_title)||(J==null?void 0:J.job_title),client_name:(we==null?void 0:we.client_name)||(J==null?void 0:J.client_name),client_id:(we==null?void 0:we.client_id)||(J==null?void 0:J.client_id),recruiter_name:(J==null?void 0:J.recruiter_name)||(J==null?void 0:J.submitted_by_name),submitted_by_name:(J==null?void 0:J.submitted_by_name)||(J==null?void 0:J.recruiter_name),submitted_at:(J==null?void 0:J.submitted_at)||(J==null?void 0:J.sent_to_am_at)||(J==null?void 0:J.created_at),updated_at:(J==null?void 0:J.updated_at)||(J==null?void 0:J.submitted_at),match_score:J==null?void 0:J.match_score,experience_years:_e,current_location:Qe,current_employer:U,current_designation:se,designation:se,expected_ctc:at,notes:Array.isArray(J==null?void 0:J.notes)?J.notes:[],latest_call_feedback:(J==null?void 0:J.latest_call_feedback)||(J==null?void 0:J.call_feedback)||null}}).filter(J=>Gt(J.id));V.push(...ve)}catch(te){Mu(te)||console.warn("AM submissions endpoint failed, loading requirement-wise submissions:",te)}const ee=je!=="all"?[je]:V.length===0?me.map(te=>Gt(te.id||te.job_id||te.requirement_id)):[];if(ee.length>0){const te=je!=="all"?ee:ee.slice(0,20),ke=await Ze(te,ft);V.push(...ke)}if(V.length===0||ft.some(te=>kWe.has(te))){const te=await pt(ft);V.push(...te)}if(V.length>0){const te=await Pe(V),ke=await Je(te);ge(ke);return}try{const te=await he("/workflow/candidates",{params:{limit:200}}),ke=Array.isArray((H=te==null?void 0:te.data)==null?void 0:H.candidates)?te.data.candidates:[];if(ke.length>0){const ve=await Pe(ke),J=await Je(ve);ge(J)}}catch(te){Mu(te)||console.warn("Workflow fallback endpoint failed:",te)}}catch(V){console.error("Failed to fetch candidates:",V);try{const ee=await he("/v1/candidates"),X=Ig(ee.data),te=await Pe(X),ke=await Je(te);ge(ke)}catch(ee){console.error("Fallback also failed:",ee),st()&&(y({}),o([]))}}finally{st()&&p(!1)}},gt=async(Ne,st,qe=null)=>{var ft,kt,Oe;v(!0);try{const je=Ne&&typeof Ne=="object"?Ne:{id:Ne},Re=v0(je),oe=(je==null?void 0:je.job_id)||(je==null?void 0:je.requirement_id)||(w!=="all"?w:null);if(!Re){alert("Candidate internal id missing. Please refresh the page and open this candidate again.");return}let Ue="",Ge={};switch(st){case"am_view":Ue=`/workflow/candidates/${Re}/am-view`,Ge={job_id:oe};break;case"am_shortlist":Ue=`/workflow/candidates/${Re}/am-shortlist`,Ge={job_id:oe};break;case"am_hold":Ue=`/workflow/candidates/${Re}/am-hold`,Ge={job_id:oe};break;case"am_reject":Ue=`/workflow/candidates/${Re}/reject`,Ge={rejection_type:"am",job_id:oe};break;case"send_to_client":Ue=`/workflow/candidates/${Re}/send-to-client`,Ge={job_id:oe};break;case"client_decision":Ue=`/workflow/candidates/${Re}/client-decision`,Ge={decision:qe,job_id:oe};break;case"mark_interview_ready":if(Tr((je==null?void 0:je.status)||(je==null?void 0:je.stage))!=="client_shortlisted"){alert("Interview scheduling can be enabled only when candidate is Client Shortlisted.");return}Ue=`/workflow/candidates/${Re}/mark-interview-ready`,Ge={job_id:oe,notes:qe&&typeof qe=="object"&&String(qe.notes||"").trim()||void 0};break;default:console.error("Unknown action:",st);return}const ie=await M(Ue,Ge),ge=Tr((ft=ie==null?void 0:ie.data)==null?void 0:ft.status),ut=st==="client_decision"?`client_${Tr(qe)}`:{am_view:"am_viewed",am_shortlist:"am_shortlisted",am_hold:"am_hold",am_reject:"am_rejected",send_to_client:"sent_to_client",mark_interview_ready:"client_shortlisted"}[st]||"",Z=ge||ut;Z&&Me(je,Z),await Ke()}catch(je){console.error("Action failed:",je),alert(((Oe=(kt=je.response)==null?void 0:kt.data)==null?void 0:Oe.detail)||"Action failed")}finally{v(!1)}},At=g.useMemo(()=>{var je;const Ne=Gt(w),st=Lg((je=c.find(Re=>Gt(Re.id||Re.job_id||Re.requirement_id)===Ne))==null?void 0:je.title),qe=$a(S),ft=new Set((Se[qe]||[]).map(Gt)),kt=b.trim().toLowerCase(),Oe=l.filter(Re=>{var ie,ge;const oe=Gt((Re==null?void 0:Re.job_id)||(Re==null?void 0:Re.requirement_id)||((ie=Re==null?void 0:Re.requirement)==null?void 0:ie.id)||((ge=Re==null?void 0:Re.job)==null?void 0:ge.id)),Ue=Lg((Re==null?void 0:Re.requirement_title)||(Re==null?void 0:Re.job_title));return Ne==="all"||(oe?oe===Ne:!!(st&&Ue===st))?qe!=="all"?ft.size>0?!!(oe&&ft.has(oe)):$a((Re==null?void 0:Re.client_id)||(Re==null?void 0:Re.client_name))===qe:!0:!1});return kt?Oe.filter(Re=>{var oe,Ue,Ge,ie,ge,ut,Z,H;return((oe=Re.full_name)==null?void 0:oe.toLowerCase().includes(kt))||((Ue=Re.email)==null?void 0:Ue.toLowerCase().includes(kt))||((Ge=Re.phone)==null?void 0:Ge.includes(kt))||((ie=Re.job_title)==null?void 0:ie.toLowerCase().includes(kt))||((ge=Re.requirement_title)==null?void 0:ge.toLowerCase().includes(kt))||((ut=Re.recruiter_name)==null?void 0:ut.toLowerCase().includes(kt))||((Z=Re.submitted_by_name)==null?void 0:Z.toLowerCase().includes(kt))||((H=Re.skills)==null?void 0:H.some(V=>(typeof V=="string"?V:(V==null?void 0:V.name)||"").toLowerCase().includes(kt)))}):Oe},[l,Se,c,b,S,w]),Lt=g.useMemo(()=>{if(!Array.isArray(D.items))return[];const Ne=st=>{const qe=(st==null?void 0:st.at)||(st==null?void 0:st.created_at)||(st==null?void 0:st.updated_at)||null;if(!qe)return 0;const ft=new Date(qe).getTime();return Number.isFinite(ft)?ft:0};return[...D.items].sort((st,qe)=>Ne(qe)-Ne(st))},[D.items]),Bt=Ne=>Ne.statuses.reduce((st,qe)=>st+(f[qe]||0),0);return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Candidate Review"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review candidates submitted by recruiters and track client decisions"})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, email, phone, skills...",value:b,onChange:Ne=>j(Ne.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.jsxs("button",{onClick:()=>{We(),Ke()},className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx($l,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.jsx(df,{className:"w-3 h-3 inline mr-1"}),"Client"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:S,onChange:Ne=>{E(Ne.target.value),k("all"),r({tab:_,client:Ne.target.value,requirement:"all"})},className:"appearance-none w-48 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Clients"}),u.map((Ne,st)=>n.jsx("option",{value:Ne.id,children:Ne.name},`${Ne.id||"client"}-${Ne.name||"name"}-${st}`))]}),n.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),n.jsx("button",{onClick:()=>A(!0),className:"flex items-center gap-1 px-3 py-2.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Add new client",children:n.jsx(Ya,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.jsx(W1,{className:"w-3 h-3 inline mr-1"}),"Requirement"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:w,onChange:Ne=>{k(Ne.target.value),r({tab:_,client:S,requirement:Ne.target.value})},className:"appearance-none w-64 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Requirements"}),me.map((Ne,st)=>{var qe;return n.jsx("option",{value:Ne.id,children:Ne.title||Ne.requirement_code||`REQ-${(qe=Ne.id)==null?void 0:qe.slice(0,8)}`},`${Ne.id||"req"}-${Ne.requirement_code||Ne.title||st}`)})]}),n.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:_,onChange:Ne=>{N(Ne.target.value),r({tab:Ne.target.value,client:S,requirement:w})},className:"appearance-none w-56 pl-4 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer",children:nd.map(Ne=>{const st=Bt(Ne);return n.jsxs("option",{value:Ne.id,children:[Ne.label," ",st>0?`(${st})`:""]},Ne.id)})}),n.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 ml-auto flex-wrap",children:[S!=="all"&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg",children:[n.jsx(df,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300 max-w-[150px] truncate",children:((ar=u.find(Ne=>Ne.id===S))==null?void 0:ar.name)||"Selected Client"}),n.jsx("button",{onClick:()=>{E("all"),k("all"),r({tab:_,client:"all",requirement:"all"})},className:"ml-1 text-green-400 hover:text-green-600",children:n.jsx(Ar,{className:"w-4 h-4"})})]}),w!=="all"&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-lg",children:[n.jsx(cn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),n.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 max-w-[200px] truncate",children:((er=c.find(Ne=>Gt(Ne.id||Ne.job_id||Ne.requirement_id)===Gt(w)))==null?void 0:er.title)||"Selected Requirement"}),n.jsx("button",{onClick:()=>{k("all"),r({tab:_,client:S,requirement:"all"})},className:"ml-1 text-purple-400 hover:text-purple-600",children:n.jsx(Ar,{className:"w-4 h-4"})})]}),(()=>{const Ne=nd.find(ft=>ft.id===_),st=(Ne==null?void 0:Ne.icon)||Ri,qe=Bt(Ne);return n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsx(st,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:Ne==null?void 0:Ne.label}),qe>0&&n.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-white rounded-full text-xs font-medium",children:qe})]})})(),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[At.length," candidate",At.length!==1?"s":""]})]})]}),x?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx(qs,{className:"w-8 h-8 animate-spin text-blue-600"}),n.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading candidates..."})]}):At.length===0?n.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsx(qr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No candidates found"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:b?"Try adjusting your search terms":`No candidates in ${(Be=nd.find(Ne=>Ne.id===_))==null?void 0:Be.label} stage`})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:At.map((Ne,st)=>n.jsx(ZWe,{candidate:Ne,onAction:gt,onViewProfile:ye,onViewFeedback:xe,onViewTimeline:$e},Ne.application_id||`${Ne.id||"candidate"}-${Ne.job_id||Ne.requirement_id||"no-job"}-${st}`))}),D.open&&n.jsx("div",{className:"fixed inset-0 z-[96] bg-black/50 flex items-center justify-center p-4",onClick:Ne=>{Ne.target===Ne.currentTarget&&Ae()},children:n.jsxs("div",{className:"w-full max-w-3xl max-h-[86vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Status Timeline"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:((xt=D.candidate)==null?void 0:xt.full_name)||((mt=D.candidate)==null?void 0:mt.candidate_name)||"Candidate"})]}),n.jsx("button",{type:"button",onClick:Ae,className:"p-1.5 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Close timeline",children:n.jsx(Ar,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-6 py-4 overflow-y-auto space-y-4",children:[D.loading&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Loading timeline..."]}),!D.loading&&D.error&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:border-red-900/40 dark:text-red-300",children:D.error}),!D.loading&&Lt.length===0&&n.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 text-sm text-gray-600 dark:text-gray-300",children:"No timeline entries found."}),!D.loading&&Lt.length>0&&n.jsx("div",{className:"space-y-4",children:Lt.map((Ne,st)=>{const qe=VWe(Ne==null?void 0:Ne.status),ft=sD[qe]||sD.sent,kt=ft.icon,Oe=KWe(Ne,qe),je=zt(Ne==null?void 0:Ne.by,Ne==null?void 0:Ne.user,Ne==null?void 0:Ne.actor_name,Ne==null?void 0:Ne.created_by_name),Re=pA(zt(Ne==null?void 0:Ne.role,Ne==null?void 0:Ne.actor_role)),oe=YWe((Ne==null?void 0:Ne.note)||(Ne==null?void 0:Ne.message)||(Ne==null?void 0:Ne.summary)),Ue=XWe((Ne==null?void 0:Ne.at)||(Ne==null?void 0:Ne.created_at)||(Ne==null?void 0:Ne.updated_at)),Ge=st===0;return n.jsxs("div",{className:"relative pl-12",children:[st<Lt.length-1&&n.jsx("span",{className:"absolute left-[17px] top-10 bottom-[-16px] w-px bg-gray-200 dark:bg-gray-700"}),n.jsx("span",{className:`absolute left-0 top-2 flex h-9 w-9 items-center justify-center rounded-full border ${ft.markerClass}`,children:n.jsx(kt,{className:"h-4 w-4"})}),n.jsxs("div",{className:`rounded-xl border bg-white dark:bg-gray-900 px-4 py-3 shadow-sm ${Ge?ft.latestClass:"border-gray-200 dark:border-gray-700"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold ${ft.badgeClass}`,children:Oe}),Ge&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-semibold text-gray-600 dark:bg-gray-800 dark:text-gray-300",children:"Latest"})]}),n.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:Ue})]}),(je||Re)&&n.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[je||"System",Re?`  ${Re}`:""]}),oe&&n.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:oe})]})]},Ne.id||`${Ne.status||"status"}-${Ne.at||st}`)})})]})]})}),I.open&&n.jsx("div",{className:"fixed inset-0 z-[95] bg-black/50 flex items-center justify-center p-4",onClick:Ne=>{Ne.target===Ne.currentTarget&&lt()},children:n.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 max-h-[88vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recruiter Feedback"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:((It=I.candidate)==null?void 0:It.full_name)||((Yt=I.candidate)==null?void 0:Yt.candidate_name)||"Candidate"})]}),n.jsx("button",{type:"button",onClick:lt,className:"p-1.5 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Close feedback",children:n.jsx(Ar,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-6 py-4 overflow-y-auto space-y-4",children:[I.loading&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Loading feedback..."]}),!I.loading&&I.error&&I.feedbacks.length===0&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:border-red-900/40 dark:text-red-300",children:I.error}),!I.loading&&I.feedbacks.length===0&&n.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 text-sm text-gray-600 dark:text-gray-300",children:"No recruiter feedback found for this candidate."}),!I.loading&&I.feedbacks.map((Ne,st)=>{const qe=$We(Ne);return n.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-900/20",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:Ne.decision||"Feedback"}),qe&&n.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",children:["Rating: ",qe,"/5"]})]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:DWe(Ne.call_date)})]}),Ne.summary&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Summary"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:Ne.summary})]}),(Ne.strengths||Ne.concerns||Ne.additional_notes)&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Ne.strengths&&n.jsxs("div",{className:"rounded-md bg-emerald-50 dark:bg-emerald-900/20 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300 uppercase mb-1",children:"Strengths"}),n.jsx("p",{className:"text-sm text-emerald-900 dark:text-emerald-100",children:Ne.strengths})]}),Ne.concerns&&n.jsxs("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-red-700 dark:text-red-300 uppercase mb-1",children:"Concerns"}),n.jsx("p",{className:"text-sm text-red-900 dark:text-red-100",children:Ne.concerns})]}),Ne.additional_notes&&n.jsxs("div",{className:"rounded-md bg-gray-50 dark:bg-gray-800 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase mb-1",children:"Additional Notes"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:Ne.additional_notes})]})]}),(Ne.salary_alignment||Ne.candidate_intent)&&n.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[Ne.salary_alignment&&n.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-violet-100 text-violet-700 dark:bg-violet-900/20 dark:text-violet-300",children:["Salary: ",Ne.salary_alignment]}),Ne.candidate_intent&&n.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-cyan-100 text-cyan-700 dark:bg-cyan-900/20 dark:text-cyan-300",children:["Intent: ",Ne.candidate_intent]})]})]},`${Ne.id}-${st}`)})]})]})}),O&&F&&(()=>{const Ne=Tr((O==null?void 0:O.status)||(F==null?void 0:F.status)),st=Ne==="am_shortlisted",qe=Ne==="am_hold",ft=Ne==="am_rejected",kt=Ne==="am_shortlisted",Oe=["interview_scheduled","interview_completed"].includes(Ne),je=["sent_to_client","client_shortlisted","client_hold","client_rejected","interview_scheduled","interview_completed"].includes(Ne),Re=Ne==="client_shortlisted",oe=Ne==="client_hold",Ue=Ne==="client_rejected",Ge=!!(O!=null&&O.interview_scheduling_ready||F!=null&&F.interview_scheduling_ready),ie=je&&!Oe,ge={...O||{},...F||{},status:Tr(O==null?void 0:O.status)||Tr(F==null?void 0:F.status)||(F==null?void 0:F.status),job_id:(F==null?void 0:F.job_id)||(O==null?void 0:O.job_id)||(O==null?void 0:O.requirement_id),requirement_id:(F==null?void 0:F.requirement_id)||(O==null?void 0:O.requirement_id)||(O==null?void 0:O.job_id),job_title:(F==null?void 0:F.job_title)||(F==null?void 0:F.requirement_title)||(O==null?void 0:O.job_title)||(O==null?void 0:O.requirement_title),requirement_title:(F==null?void 0:F.requirement_title)||(F==null?void 0:F.job_title)||(O==null?void 0:O.requirement_title)||(O==null?void 0:O.job_title),client_name:(F==null?void 0:F.client_name)||(O==null?void 0:O.client_name),client_id:(F==null?void 0:F.client_id)||(O==null?void 0:O.client_id)};return n.jsx(aj,{candidate:ge,profile:eu(ge,!0),loading:W,onClose:Ye,onPreviewResume:ut=>window.open(ut,"_blank"),hideFeedbackSection:!0,customQuickActions:[...ft||st||je?[]:[{label:"AM Shortlist",variant:"success",onClick:()=>{gt(O,"am_shortlist")}}],...ft||je?[]:[{label:"Send to Client",variant:"primary",disabled:h||!kt,onClick:()=>{gt(O,"send_to_client")}}],...!ft&&!st&&!qe&&!je?[{label:"AM Hold",variant:"warning",onClick:()=>{gt(O,"am_hold")}}]:[],...ft||st||je?[]:[{label:"AM Reject",variant:"danger",onClick:()=>{gt(O,"am_reject")}}],...ft||Re||Ue||Oe?[]:[{label:"Client Shortlisted",variant:"success",disabled:h||!ie,onClick:()=>{gt(O,"client_decision","shortlisted")}},...oe?[]:[{label:"Client Hold",variant:"warning",disabled:h||!ie,onClick:()=>{gt(O,"client_decision","hold")}}],{label:"Client Rejected",variant:"danger",disabled:h||!ie,onClick:()=>{gt(O,"client_decision","rejected")}}],...ft||!Re||Ge?[]:[{label:"Interview Scheduling Ready",variant:"primary",disabled:h,onClick:()=>{const Z=window.prompt("Add internal note for recruiter (optional)","Client shortlisted candidate. Marked Interview Scheduling Ready for recruiter.");Z!==null&&gt(O,"mark_interview_ready",{notes:Z})}}],...ft||!Re||!Ge?[]:[{label:"Interview Scheduling Ready",variant:"success",disabled:!0,onClick:()=>{}}],{label:"Message Recruiter",variant:"primary",onClick:ut=>{const Z=F==null?void 0:F.recruiter_email;Z?window.location.href=`mailto:${Z}?subject=Regarding Candidate: ${(F==null?void 0:F.full_name)||(F==null?void 0:F.candidate_name)}`:alert("Recruiter contact not available")}},{label:"Open Full Profile",variant:"ghost",onClick:()=>{Ye(),e(`/candidates/${O.id}`)}}]})})(),T&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Client"}),n.jsx("button",{onClick:()=>{A(!1),P("")},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:n.jsx(Ar,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client Name"}),n.jsx("input",{type:"text",value:C,onChange:Ne=>P(Ne.target.value),placeholder:"Enter client name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>{A(!1),P("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ue,disabled:!C.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Client"})]})]})})]})}const eVe=e=>{switch((e||"").toLowerCase()){case"active":return{label:"Active",className:"bg-green-100 text-green-800"};case"closed":return{label:"Closed",className:"bg-red-100 text-red-800"};case"on_hold":case"on hold":return{label:"On Hold",className:"bg-yellow-100 text-yellow-800"};case"draft":return{label:"Draft",className:"bg-gray-100 text-gray-700"};default:return{label:"Active",className:"bg-green-100 text-green-800"}}};function aD(){var _,N;const e=(w,k)=>w==null||k===null||k===void 0?"Not specified":`${w} - ${k} yrs`,{id:t}=Rr(),r=Et(),[s,a]=g.useState(!0),[i,l]=g.useState([]),[o,c]=g.useState(null),[d,u]=g.useState(!1),[m,f]=g.useState(null),[y,x]=g.useState(""),[p,h]=g.useState(""),v=w=>{if(!w)return;const k=new URLSearchParams;k.set("jobId",w.id||w.job_id),w.title&&k.set("jobTitle",w.title),k.set("tab","sent_to_am"),r(`/recruiter/candidate-workflow?${k.toString()}`)};g.useEffect(()=>{b()},[]);async function b(){var w;try{const k=await Up(),S=((w=k==null?void 0:k.data)==null?void 0:w.jobs)||[];l(S)}catch(k){console.error("Failed to load assigned jobs",k)}finally{a(!1)}}const j=async w=>{const k=(w==null?void 0:w.id)||(w==null?void 0:w.job_id)||"";if(!k)return;h(""),x(k);const S=new URLSearchParams;try{const{analysis:E,query:T,keywords:A}=OV(w),C=RV(E);T&&S.set("q",T),A.length&&S.set("keywords",A.join(",")),(w!=null&&w.job_id||w!=null&&w.id)&&S.set("job_id",w.job_id||w.id),w!=null&&w.title&&S.set("job_title",w.title),C&&S.set("analysis",C),S.set("auto_search","1"),r(`/recruiter/resdex/advanced-search?${S.toString()}`)}catch{h("Unable to analyze this JD. Please try manual search.")}finally{x("")}};return s?n.jsx("div",{className:"p-6 text-center",children:"Loading job details..."}):i.length===0?n.jsx("div",{className:"p-6 text-center text-gray-600",children:"No assigned jobs found"}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Assigned Jobs"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Jobs assigned to you by Account Managers"}),p&&n.jsx("p",{className:"text-amber-700 mt-2 text-sm",children:p})]}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Job Title"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Department"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Experience"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Account Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y",children:i.map(w=>{var k,S;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:[n.jsx("div",{children:w.title}),n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",w.job_id]})]}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.location||""}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.department||""}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e(w.min_experience,w.max_experience)}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((k=w.account_manager)==null?void 0:k.name)||((S=w.account_manager)==null?void 0:S.am_name)||""}),n.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{const E=eVe(w.status);return n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${E.className}`,children:E.label})})()}),n.jsx("td",{className:"px-6 py-4 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>c(w),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 transition",children:"View Details"}),n.jsx("button",{onClick:()=>v(w),className:"px-3 py-1 bg-indigo-600 text-white rounded text-xs font-medium hover:bg-indigo-700 transition",children:"View Submissions"}),n.jsx("button",{onClick:()=>j(w),disabled:y===(w.id||w.job_id),className:"px-3 py-1 bg-purple-600 text-white rounded text-xs font-medium hover:bg-purple-700 transition disabled:opacity-60 disabled:cursor-not-allowed",children:y===(w.id||w.job_id)?"Analyzing JD...":"Smart Search"}),n.jsx("button",{onClick:()=>{f(w),u(!0)},className:"px-3 py-1 bg-green-600 text-white rounded text-xs font-medium hover:bg-green-700 transition",children:"+ Add New Candidate"})]})})]},w.id)})})]})})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-emerald-500 p-6 text-white flex justify-between items-center sticky top-0",children:[n.jsx("h2",{className:"text-2xl font-bold",children:o.title}),n.jsx("button",{onClick:()=>c(null),className:"text-2xl font-bold hover:text-gray-200 transition",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Role Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Role"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Location"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.location||"N/A"})]})]})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Experience & Compensation"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Experience"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e(o.min_experience,o.max_experience)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"CTC"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.salary_range||"Not specified"})]})]})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Job Description"}),n.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:o.description||"No description available"})]}),n.jsxs("div",{className:"border-b pb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Required Skills"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(o.skills||[]).length>0?(o.skills||[]).map((w,k)=>n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold",children:w},k)):n.jsx("p",{className:"text-gray-500",children:"No skills specified"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Department"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:o.department||"N/A"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:o.status||"N/A"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded col-span-2",children:[n.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Account Manager"}),n.jsx("p",{className:"text-gray-900 font-semibold",children:((_=o.account_manager)==null?void 0:_.name)||((N=o.account_manager)==null?void 0:N.am_name)||""})]})]})]}),n.jsx("button",{onClick:()=>c(null),className:"w-full px-4 py-3 bg-purple-600 text-white font-semibold rounded hover:bg-purple-700 transition",children:"Close"})]})]})}),d&&n.jsx(TV,{isOpen:d,onClose:()=>u(!1),job:m})]})}function tVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const rVe=g.forwardRef(tVe);function nVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const sVe=g.forwardRef(nVe);function aVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const iVe=g.forwardRef(aVe);function lVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const iD=g.forwardRef(lVe);function oVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const cVe=g.forwardRef(oVe);function dVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const lD=g.forwardRef(dVe);function uVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const ww=g.forwardRef(uVe);function mVe({title:e,titleId:t,...r},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const oD=g.forwardRef(mVe);function fVe(){const e=Et(),[t,r]=g.useState(!1),[s,a]=g.useState("basic"),[i,l]=g.useState({title:"",description:"",skills_mandatory:[],skills_good_to_have:[],experience_min:0,experience_max:"",ctc_min:"",ctc_max:"",location_details:{city:"",type:"On-site"},certifications:[],positions_count:1,interview_stages:["Screening","Technical","HR"],urgency:"Normal",target_start_date:"",department:"",reporting_manager:"",priority:"Medium"}),[o,c]=g.useState({mandatory:"",good:""}),d=p=>{const{name:h,value:v}=p.target;if(h.includes(".")){const[b,j]=h.split(".");l({...i,[b]:{...i[b],[j]:v}})}else l({...i,[h]:v})},u=p=>{const h=p==="mandatory"?o.mandatory:o.good;if(!h)return;const v=p==="mandatory"?"skills_mandatory":"skills_good_to_have";i[v].includes(h)||l({...i,[v]:[...i[v],h]}),c({...o,[p]:""})},m=(p,h)=>{const v=p==="mandatory"?"skills_mandatory":"skills_good_to_have";l({...i,[v]:i[v].filter(b=>b!==h)})},f=async()=>{if(!i.description){alert("Please paste a Job Description first!");return}r(!0);try{const h=(await dl.parseJD(i.description)).data;l(v=>{var b,j;return{...v,skills_mandatory:[...new Set([...v.skills_mandatory,...h.skills_mandatory||[]])],skills_good_to_have:[...new Set([...v.skills_good_to_have,...h.skills_good_to_have||[]])],experience_min:h.experience_min||v.experience_min,experience_max:h.experience_max||v.experience_max,ctc_min:h.ctc_min||v.ctc_min,ctc_max:h.ctc_max||v.ctc_max,urgency:h.urgency||v.urgency,location_details:{...v.location_details,city:((b=h.location_details)==null?void 0:b.city)||v.location_details.city,type:((j=h.location_details)==null?void 0:j.type)||v.location_details.type}}}),alert("AI has successfully extracted requirements from the JD!"),a("skills")}catch(p){console.error("AI Parsing Error:",p),alert("Failed to parse JD. But you can still fill it manually.")}finally{r(!1)}},y=async p=>{var h,v;p.preventDefault(),r(!0);try{await dl.createRequirement(i),alert("Requirement Created Successfully!"),e("/client/requirements")}catch(b){console.error("Submission Error:",b),alert(((v=(h=b.response)==null?void 0:h.data)==null?void 0:v.detail)||"Failed to create requirement")}finally{r(!1)}},x=({icon:p,title:h,subtitle:v})=>n.jsxs("div",{className:"flex items-center space-x-3 mb-6 border-b pb-4",children:[n.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600",children:n.jsx(p,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:h}),n.jsx("p",{className:"text-sm text-gray-500",children:v})]})]});return n.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Post New Requirement"}),n.jsx("p",{className:"text-gray-500 mt-1",children:"Detailed intake for faster and better matching"})]}),n.jsx("button",{onClick:()=>e(-1),className:"text-gray-500 hover:text-gray-700 font-medium",children:"Cancel"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"md:col-span-1 space-y-2",children:[["basic","description","skills","experience","logistics","process"].map(p=>n.jsx("button",{onClick:()=>a(p),className:`w-full text-left px-4 py-3 rounded-xl font-medium transition-all ${s===p?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"text-gray-600 hover:bg-gray-100"}`,children:p.charAt(0).toUpperCase()+p.slice(1)},p)),n.jsxs("div",{className:"mt-8 p-4 bg-amber-50 rounded-xl border border-amber-100",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-amber-700 mb-2",children:[n.jsx(ww,{className:"w-5 h-5"}),n.jsx("span",{className:"font-bold text-sm",children:"AI Tip"})]}),n.jsx("p",{className:"text-xs text-amber-600 leading-relaxed",children:"Adding mandatory vs good-to-have skills helps our matching engine prioritize candidates better."})]})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-sm border p-8 space-y-8",children:[s==="basic"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:rVe,title:"Basic Details",subtitle:"Core information about the position"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Job Title*"}),n.jsx("input",{name:"title",required:!0,value:i.title,onChange:d,placeholder:"e.g. Senior Fullstack Engineer",className:"w-full border-gray-200 rounded-lg p-2.5 focus:ring-2 focus:ring-indigo-500 transition-all border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Department"}),n.jsx("input",{name:"department",value:i.department,onChange:d,placeholder:"e.g. Engineering",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Positions Count"}),n.jsx("input",{type:"number",name:"positions_count",value:i.positions_count,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Urgency"}),n.jsxs("select",{name:"urgency",value:i.urgency,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"Immediate"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Flexible"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"High"}),n.jsx("option",{children:"Medium"}),n.jsx("option",{children:"Low"})]})]})]})]}),s==="description"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:iD,title:"Job Description",subtitle:"Detailed role responsibilities"}),n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{name:"description",rows:12,value:i.description,onChange:d,placeholder:"Paste the full job description here...",className:"w-full border-gray-200 rounded-xl p-4 focus:ring-2 focus:ring-indigo-500 transition-all border"}),n.jsxs("button",{type:"button",onClick:f,className:"absolute bottom-4 right-4 bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg font-bold text-sm flex items-center space-x-2 border border-indigo-100 hover:bg-indigo-100 transition-colors",children:[n.jsx(ww,{className:"w-4 h-4"}),n.jsx("span",{children:"AI Parse JD"})]})]})]}),s==="skills"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:ww,title:"Skills & Qualifications",subtitle:"What skills should the candidate have?"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mandatory Skills"}),n.jsxs("div",{className:"flex space-x-2 mb-3",children:[n.jsx("input",{value:o.mandatory,onChange:p=>c({...o,mandatory:p.target.value}),onKeyPress:p=>p.key==="Enter"&&(p.preventDefault(),u("mandatory")),placeholder:"Add skill and press Enter",className:"flex-1 border-gray-200 rounded-lg p-2 border text-sm"}),n.jsx("button",{type:"button",onClick:()=>u("mandatory"),className:"p-2 bg-indigo-600 text-white rounded-lg",children:n.jsx(lD,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills_mandatory.map(p=>n.jsxs("span",{className:"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1 border border-indigo-100",children:[n.jsx("span",{children:p}),n.jsx(oD,{className:"w-3 h-3 cursor-pointer hover:text-indigo-900",onClick:()=>m("mandatory",p)})]},p))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Good to Have Skills"}),n.jsxs("div",{className:"flex space-x-2 mb-3",children:[n.jsx("input",{value:o.good,onChange:p=>c({...o,good:p.target.value}),onKeyPress:p=>p.key==="Enter"&&(p.preventDefault(),u("good")),placeholder:"Add skill...",className:"flex-1 border-gray-200 rounded-lg p-2 border text-sm"}),n.jsx("button",{type:"button",onClick:()=>u("good"),className:"p-2 bg-emerald-600 text-white rounded-lg",children:n.jsx(lD,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills_good_to_have.map(p=>n.jsxs("span",{className:"bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1 border border-emerald-100",children:[n.jsx("span",{children:p}),n.jsx(oD,{className:"w-3 h-3 cursor-pointer hover:text-emerald-900",onClick:()=>m("good",p)})]},p))})]})]})]}),s==="experience"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:sVe,title:"Experience & Compensation",subtitle:"Expectations and budget"}),n.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider",children:"Experience (Years)"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),n.jsx("input",{type:"number",name:"experience_min",value:i.experience_min,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),n.jsx("input",{type:"number",name:"experience_max",value:i.experience_max,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider",children:"Salary / CTC Range"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),n.jsx("input",{type:"number",name:"ctc_min",value:i.ctc_min,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),n.jsx("input",{type:"number",name:"ctc_max",value:i.ctc_max,onChange:d,className:"w-full border-gray-200 rounded-lg p-2 border"})]})]})]})]})]}),s==="logistics"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:cVe,title:"Location & Logistics",subtitle:"Where and how will they work?"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"City / Base Location"}),n.jsx("input",{name:"location_details.city",value:i.location_details.city,onChange:d,placeholder:"e.g. Hyderabad, India",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work Type"}),n.jsxs("select",{name:"location_details.type",value:i.location_details.type,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border",children:[n.jsx("option",{children:"On-site"}),n.jsx("option",{children:"Remote"}),n.jsx("option",{children:"Hybrid"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Target Start Date"}),n.jsx("input",{type:"date",name:"target_start_date",value:i.target_start_date,onChange:d,className:"w-full border-gray-200 rounded-lg p-2.5 border"})]})]})]}),s==="process"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsx(x,{icon:iD,title:"Process & Reporting",subtitle:"Interview stages and management"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Reporting Manager"}),n.jsx("input",{name:"reporting_manager",value:i.reporting_manager,onChange:d,placeholder:"Name of hiring manager",className:"w-full border-gray-200 rounded-lg p-2.5 border"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Interview Stages"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:["Screening","Technical Round 1","Technical Round 2","Management","HR"].map(p=>n.jsxs("label",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg border cursor-pointer hover:bg-white transition-colors",children:[n.jsx("input",{type:"checkbox",checked:i.interview_stages.includes(p),onChange:h=>{h.target.checked?l({...i,interview_stages:[...i.interview_stages,p]}):l({...i,interview_stages:i.interview_stages.filter(v=>v!==p)})},className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:p})]},p))})]})]})]}),n.jsxs("div",{className:"pt-6 border-t flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-gray-500",children:s!=="process"&&n.jsxs("button",{type:"button",onClick:()=>{const p=["basic","description","skills","experience","logistics","process"];a(p[p.indexOf(s)+1])},className:"flex items-center space-x-1 text-indigo-600 font-bold hover:text-indigo-800",children:[n.jsx("span",{children:"Next Section"}),n.jsx(iVe,{className:"w-4 h-4"})]})}),n.jsx("button",{type:"submit",disabled:t,className:`px-8 py-3 rounded-xl font-bold text-white shadow-xl transition-all ${t?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200 hover:-translate-y-0.5"}`,children:t?"Creating...":"Confirm & Post Requirement"})]})]})})]})]})}const cD={open:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",closed:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300"},hVe={hybrid:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",remote:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300",onsite:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",contract:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},dD=({userRole:e="recruiter"})=>{const t=Et(),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(null),[c,d]=g.useState(0),[u,m]=g.useState(""),[f,y]=g.useState(""),[x,p]=g.useState(""),[h,v]=g.useState(""),[b,j]=g.useState("assigned"),[_,N]=g.useState([]),[w,k]=g.useState(0),[S]=g.useState(20),E=async()=>{i(!0);try{const W=new URLSearchParams;W.append("skip",w*S),W.append("limit",S),f&&W.append("status",f),x&&W.append("client_id",x),h&&W.append("mode",h);const L=await q.get(`/v1/job-management/requirements?${W}`);s(L.data.jobs||[]),d(L.data.total||0)}catch(W){console.error("Error fetching jobs:",W),o("Failed to load jobs")}finally{i(!1)}},T=async()=>{try{const W=await q.get("/v1/clients");N(W.data.clients||W.data||[])}catch(W){console.error("Error fetching clients:",W)}};g.useEffect(()=>{E(),T()},[w,f,x,h]);const A=g.useMemo(()=>{if(!u)return r;const W=u.toLowerCase();return r.filter(L=>{var I,K,D,Y;return((I=L.title)==null?void 0:I.toLowerCase().includes(W))||((K=L.job_title)==null?void 0:K.toLowerCase().includes(W))||((D=L.skills)==null?void 0:D.some(re=>re.toLowerCase().includes(W)))||((Y=L.location)==null?void 0:Y.toLowerCase().includes(W))})},[r,u]),C=g.useMemo(()=>e!=="recruiter"?[]:A.filter(W=>W.is_assigned),[A,e]),P=g.useMemo(()=>e!=="recruiter"?A:A.filter(W=>!W.is_assigned),[A,e]),O=e==="recruiter"?b==="assigned"?C:P:A,R=()=>{t(e==="account_manager"?"/am/jobs/new":"/recruiter/jobs/new")},F=W=>{t(e==="account_manager"?`/am/jobs/${W}`:`/recruiter/jobs/${W}`)},Q=W=>{t(e==="account_manager"?`/am/jobs/${W}/edit`:`/recruiter/jobs/${W}/edit`)};return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e==="account_manager"?"Jobs / Requirements":"Jobs"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[c," total jobs"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Ya,{className:"w-4 h-4"}),"Create New Job"]}),n.jsxs("button",{onClick:()=>t(e==="account_manager"?"/am/jobs/posting/new":"/recruiter/jobs/posting/new"),className:"flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",children:[n.jsx(cn,{className:"w-4 h-4"}),"Create Job Posting"]})]})]}),e==="recruiter"&&n.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>j("assigned"),className:`pb-3 px-1 font-medium transition-colors ${b==="assigned"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"My Assigned Jobs"}),n.jsx("button",{onClick:()=>j("all"),className:`pb-3 px-1 font-medium transition-colors ${b==="all"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"All Jobs (Read-Only)"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by skill, role, client...",value:u,onChange:W=>m(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex gap-3 flex-wrap",children:[n.jsxs("select",{value:x,onChange:W=>p(W.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Clients"}),_.map(W=>n.jsx("option",{value:W.id,children:W.client_name},W.id))]}),n.jsxs("select",{value:f,onChange:W=>y(W.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"closed",children:"Closed"}),n.jsx("option",{value:"on_hold",children:"On Hold"})]}),n.jsxs("select",{value:h,onChange:W=>v(W.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[n.jsx("option",{value:"",children:"All Modes"}),n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]})]}),n.jsx("div",{className:"flex gap-2 mt-4 flex-wrap",children:_.slice(0,6).map(W=>n.jsx("button",{onClick:()=>p(x===W.id?"":W.id),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${x===W.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"}`,children:W.client_name},W.id))})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[a?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Loading jobs..."})]}):l?n.jsx("div",{className:"p-8 text-center text-red-500",children:l}):O.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(ha,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No jobs found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"S#"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Job Title"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mode"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Skills"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Exp"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Positions"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:O.map((W,L)=>{var I,K;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>F(W.id),children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:W.serial_number||L+1}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:W.date_created?new Date(W.date_created).toLocaleDateString():"-"}),n.jsxs("td",{className:"px-4 py-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.title||W.job_title}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:W.job_id})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((I=W.client)==null?void 0:I.client_name)||W.company_name||"-"}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:W.mode&&n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${hVe[W.mode]||"bg-gray-100 text-gray-800"}`,children:W.mode})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(W.skills||[]).slice(0,3).map((D,Y)=>n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 text-xs rounded",children:D},Y)),(W.skills||[]).length>3&&n.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 text-xs rounded",children:["+",W.skills.length-3]})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:W.experience||`${W.min_experience||0}-${W.max_experience||0} yrs`}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx($c,{className:"w-4 h-4"}),W.location||"-"]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:W.no_of_positions||1}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${cD[W.status]||cD.open}`,children:((K=W.status)==null?void 0:K.replace("_"," "))||"Open"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:D=>D.stopPropagation(),children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>F(W.id),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"View",children:n.jsx(cl,{className:"w-4 h-4"})}),(e==="account_manager"||W.is_assigned)&&n.jsx("button",{onClick:()=>Q(W.id),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"Edit",children:n.jsx(l4,{className:"w-4 h-4"})}),e==="account_manager"&&n.jsx("button",{onClick:()=>t(`/am/jobs/${W.id}/assign`),className:"p-1 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",title:"Assign Recruiter",children:n.jsx(Yv,{className:"w-4 h-4"})})]})})]},W.id)})})]})}),c>S&&n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",w*S+1," to"," ",Math.min((w+1)*S,c)," of ",c," jobs"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k(Math.max(0,w-1)),disabled:w===0,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("button",{onClick:()=>k(w+1),disabled:(w+1)*S>=c,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})},Nw=[{key:"job_title",label:"Job Title",default:!0},{key:"client_name",label:"Client Name",default:!0},{key:"location",label:"Location",default:!0},{key:"mode",label:"Work Mode",default:!0},{key:"experience",label:"Experience",default:!0},{key:"skills",label:"Required Skills",default:!0},{key:"budget",label:"CTC / Budget",default:!0},{key:"duration",label:"Duration",default:!1},{key:"work_timings",label:"Work Timings",default:!1},{key:"joining_preference",label:"Joining Preference",default:!1},{key:"no_of_positions",label:"No of Positions",default:!1},{key:"jd_text",label:"Job Description",default:!0}],pVe=({job:e,candidate:t=null,onClose:r})=>{const[s,a]=g.useState(Nw.filter(T=>T.default).map(T=>T.key)),[i,l]=g.useState(""),[o,c]=g.useState([]),[d,u]=g.useState(!1),[m,f]=g.useState(!1),[y,x]=g.useState(!1),[p,h]=g.useState(!1);g.useEffect(()=>{v()},[]);const v=async()=>{try{const T=await q.get(`/v1/job-management/requirements/${e.id}/templates`);c(T.data||[])}catch(T){console.error("Error fetching templates:",T)}},b=T=>{a(A=>A.includes(T)?A.filter(C=>C!==T):[...A,T])},j=()=>{a(Nw.map(T=>T.key))},_=()=>{a([])},N=T=>{a(T.visible_fields||[]),u(!1)},w=()=>{var A;const T=[];if(s.includes("job_title")&&T.push(` *Job Title:* ${e.title||e.job_title||"N/A"}`),s.includes("client_name")&&T.push(` *Company:* ${((A=e.client)==null?void 0:A.client_name)||"Confidential"}`),s.includes("location")&&T.push(` *Location:* ${e.location||"N/A"}`),s.includes("mode")&&T.push(` *Work Mode:* ${(e.mode||"hybrid").charAt(0).toUpperCase()+(e.mode||"hybrid").slice(1)}`),s.includes("experience")&&T.push(` *Experience:* ${e.experience||"N/A"}`),s.includes("skills")){const C=Array.isArray(e.skills)?e.skills.join(", "):e.skills||"N/A";T.push(` *Skills:* ${C}`)}return s.includes("budget")&&T.push(` *CTC:* ${e.budget||"As per market standards"}`),s.includes("duration")&&T.push(` *Duration:* ${e.duration||"Permanent"}`),s.includes("work_timings")&&T.push(` *Work Timings:* ${e.work_timings||"Standard"}`),s.includes("joining_preference")&&T.push(` *Joining:* ${e.joining_preference||"Flexible"}`),s.includes("no_of_positions")&&T.push(` *Positions:* ${e.no_of_positions||1}`),s.includes("jd_text")&&(T.push(""),T.push("*Job Description:*"),T.push(e.jd_text||e.description||"Please contact for detailed JD")),T.join(`
`)},k=async()=>{const T=w();try{await navigator.clipboard.writeText(T),f(!0),setTimeout(()=>f(!1),2e3)}catch(A){console.error("Failed to copy:",A)}},S=async()=>{if(i.trim()){x(!0);try{await q.post(`/v1/job-management/requirements/${e.id}/templates`,{template_name:i.trim(),visible_fields:s}),h(!0),l(""),v(),setTimeout(()=>h(!1),2e3)}catch(T){console.error("Error saving template:",T)}finally{x(!1)}}},E=()=>{var C;const T=`
      <html>
        <head>
          <title>Job Details - ${e.title||e.job_title}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
            h1 { color: #4F46E5; margin-bottom: 20px; }
            .field { margin-bottom: 12px; }
            .label { font-weight: bold; color: #374151; }
            .value { color: #1F2937; }
            .jd { margin-top: 20px; padding: 15px; background: #F9FAFB; border-radius: 8px; white-space: pre-wrap; }
          </style>
        </head>
        <body>
          <h1>${e.title||e.job_title}</h1>
          ${s.includes("client_name")?`<div class="field"><span class="label">Company:</span> <span class="value">${((C=e.client)==null?void 0:C.client_name)||"Confidential"}</span></div>`:""}
          ${s.includes("location")?`<div class="field"><span class="label">Location:</span> <span class="value">${e.location||"N/A"}</span></div>`:""}
          ${s.includes("mode")?`<div class="field"><span class="label">Work Mode:</span> <span class="value">${e.mode||"Hybrid"}</span></div>`:""}
          ${s.includes("experience")?`<div class="field"><span class="label">Experience:</span> <span class="value">${e.experience||"N/A"}</span></div>`:""}
          ${s.includes("skills")?`<div class="field"><span class="label">Skills:</span> <span class="value">${Array.isArray(e.skills)?e.skills.join(", "):e.skills}</span></div>`:""}
          ${s.includes("budget")?`<div class="field"><span class="label">CTC:</span> <span class="value">${e.budget||"As per market"}</span></div>`:""}
          ${s.includes("duration")?`<div class="field"><span class="label">Duration:</span> <span class="value">${e.duration||"Permanent"}</span></div>`:""}
          ${s.includes("work_timings")?`<div class="field"><span class="label">Work Timings:</span> <span class="value">${e.work_timings||"Standard"}</span></div>`:""}
          ${s.includes("joining_preference")?`<div class="field"><span class="label">Joining:</span> <span class="value">${e.joining_preference||"Flexible"}</span></div>`:""}
          ${s.includes("no_of_positions")?`<div class="field"><span class="label">Positions:</span> <span class="value">${e.no_of_positions||1}</span></div>`:""}
          ${s.includes("jd_text")?`<div class="jd"><strong>Job Description:</strong><br/>${e.jd_text||e.description||"N/A"}</div>`:""}
        </body>
      </html>
    `,A=window.open("","_blank");A.document.write(T),A.document.close(),A.print()};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Customize & Send to Candidate"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select fields to include in the job summary"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(Ar,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row max-h-[calc(90vh-140px)] overflow-hidden",children:[n.jsxs("div",{className:"w-full md:w-1/2 p-4 border-r border-gray-200 dark:border-gray-700 overflow-y-auto",children:[o.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:()=>u(!d),className:"flex items-center justify-between w-full p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Saved Templates (",o.length,")"]}),d?n.jsx(z1,{className:"w-4 h-4 text-gray-500"}):n.jsx(fo,{className:"w-4 h-4 text-gray-500"})]}),d&&n.jsx("div",{className:"mt-2 space-y-2",children:o.map(T=>n.jsx("button",{onClick:()=>N(T),className:"w-full p-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:T.template_name},T.id))})]}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("button",{onClick:j,className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:_,className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Deselect All"})]}),n.jsx("div",{className:"space-y-2",children:Nw.map(T=>n.jsxs("label",{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${s.includes(T.key)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-indigo-300"}`,children:[n.jsx("input",{type:"checkbox",checked:s.includes(T.key),onChange:()=>b(T.key),className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.label})]},T.key))}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:i,onChange:T=>l(T.target.value),placeholder:"Template name...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.jsx("button",{onClick:S,disabled:!i.trim()||y,className:"flex items-center gap-1 px-3 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 disabled:opacity-50",children:p?n.jsx(wc,{className:"w-4 h-4"}):n.jsx(RAe,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"w-full md:w-1/2 p-4 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Preview"}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 min-h-[300px]",children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 font-sans",children:w()||"Select fields to generate preview"})})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),n.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:[n.jsx(cn,{className:"w-4 h-4"}),"Generate PDF"]}),n.jsx("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:m?n.jsxs(n.Fragment,{children:[n.jsx(wc,{className:"w-4 h-4"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(A4e,{className:"w-4 h-4"}),"Copy to Clipboard"]})})]})]})})},uD=({userRole:e="recruiter"})=>{var C;const{id:t}=Rr(),r=Et(),[s,a]=g.useState(null),[i,l]=g.useState(!0),[o,c]=g.useState(null),[d,u]=g.useState("recruiters"),[m,f]=g.useState(!1),[y,x]=g.useState(!1),[p,h]=g.useState(null),[v,b]=g.useState([]),[j,_]=g.useState([]),[N,w]=g.useState([]);g.useEffect(()=>{k()},[t]),g.useEffect(()=>{s&&S()},[s,d]);const k=async()=>{try{l(!0);const P=await q.get(`/v1/job-management/requirements/${t}`);a(P.data),b(P.data.assignments||[])}catch(P){console.error("Error fetching job:",P),c("Failed to load job details")}finally{l(!1)}},S=async()=>{try{if(d==="candidates"){const P=await q.get(`/v1/job-management/requirements/${t}/candidates`);_(P.data.candidates||[])}else if(d==="postings"){const P=await q.get(`/v1/job-management/requirements/${t}/postings`);w(P.data||[])}}catch(P){console.error("Error fetching tab data:",P)}},E=P=>{const O={open:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",in_progress:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",closed:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",on_hold:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300",draft:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O[P]||O.open}`,children:(P||"open").replace("_"," ").toUpperCase()})},T=P=>{const O={hybrid:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",remote:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300",onsite:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",contract:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300"};return n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${O[P]||O.hybrid}`,children:(P||"hybrid").toUpperCase()})},A=(P=null)=>{h(P),x(!0)};return i?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:n.jsx(qs,{className:"w-8 h-8 animate-spin text-indigo-600"})}):o||!s?n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsx("button",{onClick:()=>r(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:n.jsx(cp,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})}),n.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg p-6 flex items-center gap-3",children:[n.jsx(Zs,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),n.jsx("p",{className:"text-red-700 dark:text-red-300",children:o||"Job not found"})]})]}):n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>r(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(cp,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.title||s.job_title}),E(s.status)]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.serial_number?`#${s.serial_number}  `:"",((C=s.client)==null?void 0:C.client_name)||"No Client","  Created"," ",new Date(s.date_created||s.created_at).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[e==="account_manager"&&n.jsxs(n.Fragment,{children:[n.jsxs(yr,{to:`${e==="account_manager"?"/am":"/recruiter"}/jobs/${t}/edit`,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(l4,{className:"w-4 h-4"}),"Edit Job"]}),n.jsxs("button",{onClick:()=>r(`/am/jobs/${t}/assign`),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Yv,{className:"w-4 h-4"}),"Assign Recruiter"]})]}),e==="recruiter"&&n.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Ri,{className:"w-4 h-4"}),"Customize & Send"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Job Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ha,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mode"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:T(s.mode)})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx($c,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.location||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Experience"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.experience||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Qp,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Budget / CTC"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.budget||"Not specified"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No of Positions"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.no_of_positions||1})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(si,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Duration"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.duration||"Permanent"})]})]}),s.work_timings&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Work Timings"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.work_timings})]})]}),s.joining_preference&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(si,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Joining Preference"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.joining_preference})]})]}),s.client_ta&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client TA"}),n.jsx("p",{className:"text-gray-900 dark:text-white",children:s.client_ta})]})]})]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Required Skills"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(s.skills||[]).map((P,O)=>n.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded text-sm",children:P},O)),(!s.skills||s.skills.length===0)&&n.jsx("span",{className:"text-gray-400",children:"No skills specified"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("button",{onClick:()=>f(!m),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(cn,{className:"w-5 h-5 text-gray-400"}),n.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Job Description"})]}),m?n.jsx(z1,{className:"w-5 h-5 text-gray-400"}):n.jsx(fo,{className:"w-5 h-5 text-gray-400"})]}),m&&n.jsx("div",{className:"p-4 pt-0 border-t border-gray-200 dark:border-gray-700",children:n.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-700 dark:text-gray-300",children:s.jd_text||s.description||"No job description available"})})})]}),e==="recruiter"&&s.notes_for_recruiter&&n.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Notes from AM"}),n.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:s.notes_for_recruiter})]})]}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>u("recruiters"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="recruiters"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(qr,{className:"w-4 h-4 inline-block mr-2"}),"Assigned Recruiters (",v.length,")"]}),n.jsxs("button",{onClick:()=>u("candidates"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="candidates"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(qr,{className:"w-4 h-4 inline-block mr-2"}),"Candidates Pipeline (",j.length,")"]}),n.jsxs("button",{onClick:()=>u("postings"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${d==="postings"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[n.jsx(Xv,{className:"w-4 h-4 inline-block mr-2"}),"Job Postings (",N.length,")"]})]}),n.jsxs("div",{className:"p-6",children:[d==="recruiters"&&n.jsx("div",{children:v.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(qr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recruiters assigned yet"}),e==="account_manager"&&n.jsxs("button",{onClick:()=>r(`/am/jobs/${t}/assign`),className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[n.jsx(Ya,{className:"w-4 h-4"}),"Assign Recruiter"]})]}):n.jsx("div",{className:"space-y-3",children:v.map(P=>{var O,R,F;return n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-medium",children:((R=(O=P.recruiter)==null?void 0:O.full_name)==null?void 0:R.charAt(0))||"R"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((F=P.recruiter)==null?void 0:F.full_name)||"Unknown Recruiter"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Assigned"," ",new Date(P.assigned_at||P.created_at).toLocaleDateString()]})]})]}),n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${P.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:P.status||"Active"})]},P.id)})})}),d==="candidates"&&n.jsx("div",{children:j.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(qr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No candidates in pipeline yet"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Candidate"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Submitted By"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),n.jsx("tbody",{children:j.map(P=>n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.email})]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded text-xs",children:P.status||"Submitted"})}),n.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:P.submitted_by||"Unknown"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:n.jsx(cl,{className:"w-4 h-4"})})})]},P.id))})]})})}),d==="postings"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsxs(yr,{to:`${e==="account_manager"?"/am":"/recruiter"}/jobs/${t}/posting/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[n.jsx(Ya,{className:"w-4 h-4"}),"Create Posting"]})}),N.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Xv,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No job postings created yet"})]}):n.jsx("div",{className:"space-y-3",children:N.map(P=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.title}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[P.client_display_name,"  Expires"," ",new Date(P.last_date_to_apply).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${P.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":P.status==="expired"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:P.status||"Draft"}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:n.jsx(cl,{className:"w-4 h-4"})})]})]},P.id))})]})]})]})})]}),y&&n.jsx(pVe,{job:s,candidate:p,onClose:()=>x(!1)})]})},mD=({userRole:e="recruiter"})=>{const t=Et(),[r,s]=g.useState("manual"),[a,i]=g.useState(!1),[l,o]=g.useState(null),[c,d]=g.useState(!1),[u,m]=g.useState({date_created:new Date().toISOString().split("T")[0],client_id:"",client_ta:"",job_title:"",mode:"hybrid",skills:[],jd_text:"",experience:"",location:"",duration:"",no_of_positions:1,budget:"",work_timings:"",joining_preference:"",recruiter_ids:[],am_notes:[]}),[f,y]=g.useState(""),[x,p]=g.useState(null),[h,v]=g.useState(""),[b,j]=g.useState(!1),[_,N]=g.useState({}),[w,k]=g.useState([]),[S,E]=g.useState([]);g.useEffect(()=>{T(),e==="account_manager"&&A()},[e]);const T=async()=>{try{const I=await q.get("/v1/clients");k(I.data.clients||I.data||[])}catch(I){console.error("Error fetching clients:",I)}},A=async()=>{try{const I=await q.get("/v1/users?role=recruiter");E(I.data.users||I.data||[])}catch(I){console.error("Error fetching recruiters:",I)}},C=I=>{const{name:K,value:D}=I.target;m(Y=>({...Y,[K]:D}))},P=()=>{f.trim()&&!u.skills.includes(f.trim())&&(m(I=>({...I,skills:[...I.skills,f.trim()]})),y(""))},O=I=>{m(K=>({...K,skills:K.skills.filter(D=>D!==I)}))},R=I=>{(I.key==="Enter"||I.key===",")&&(I.preventDefault(),P())},F=I=>{m(K=>{const D=K.recruiter_ids.includes(I)?K.recruiter_ids.filter(Y=>Y!==I):[...K.recruiter_ids,I];return{...K,recruiter_ids:D}})},Q=I=>{const K=I.target.files[0];if(K){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(K.type)){o("Please upload a PDF or DOCX file");return}if(K.size>5*1024*1024){o("File size must be less than 5MB");return}p(K),o(null)}},W=async()=>{if(!x&&!h.trim()){o("Please upload a file or paste JD text");return}j(!0),o(null);try{let I;if(x){const D=new FormData;D.append("file",x),I=await q.post("/v1/job-management/parse-jd",D,{headers:{"Content-Type":"multipart/form-data"}})}else I=await q.post("/v1/job-management/parse-jd-text",{text:h});const K=I.data;N(K),m(D=>({...D,job_title:K.job_title||D.job_title,skills:K.skills||D.skills,experience:K.experience||D.experience,location:K.location||D.location,mode:K.mode||D.mode,jd_text:K.jd_text||h||D.jd_text}))}catch(I){console.error("Error parsing JD:",I),o("Failed to parse JD. Please try again or enter manually.")}finally{j(!1)}},L=async(I,K="open")=>{var D,Y;if(I.preventDefault(),!u.job_title.trim()){o("Job title is required");return}if(!u.jd_text.trim()){o("Job description is required");return}if(u.skills.length===0){o("At least one skill is required");return}i(!0),o(null);try{const re={...u,status:K},B=await q.post("/v1/job-management/requirements",re);d(!0),setTimeout(()=>{t(e==="account_manager"?"/am/jobs":"/recruiter/jobs")},1500)}catch(re){console.error("Error creating job:",re),o(((Y=(D=re.response)==null?void 0:D.data)==null?void 0:Y.detail)||"Failed to create job. Please try again.")}finally{i(!1)}};return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(cp,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create New Job"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add a new job requirement"})]})]}),c&&n.jsxs("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-3",children:[n.jsx(wc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Job created successfully! Redirecting..."})]}),l&&n.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-3",children:[n.jsx(Zs,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-700 dark:text-red-300",children:l}),n.jsx("button",{onClick:()=>o(null),className:"ml-auto",children:n.jsx(Ar,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]}),n.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>s("manual"),className:`pb-3 px-1 font-medium transition-colors ${r==="manual"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"Manual Entry"}),n.jsx("button",{onClick:()=>s("import"),className:`pb-3 px-1 font-medium transition-colors ${r==="import"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"Import from JD"})]}),n.jsxs("form",{onSubmit:I=>L(I,"open"),children:[r==="import"&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upload or Paste JD"}),n.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center mb-4",children:x?n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(cn,{className:"w-8 h-8 text-indigo-600"}),n.jsx("span",{className:"text-gray-900 dark:text-white",children:x.name}),n.jsx("button",{type:"button",onClick:()=>p(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",children:n.jsx(Ar,{className:"w-4 h-4 text-gray-500"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(o4,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag & drop a JD file or click to upload"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"PDF, DOCX  Max 5MB"}),n.jsx("input",{type:"file",accept:".pdf,.docx,.doc",onChange:Q,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),n.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 my-4",children:"OR"}),n.jsx("textarea",{placeholder:"Paste raw JD text here...",value:h,onChange:I=>v(I.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:W,disabled:b||!x&&!h.trim(),className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Parsing JD..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"w-4 h-4"}),"Parse JD"]})}),Object.keys(_).length>0&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:n.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 flex items-center gap-2",children:[n.jsx(wc,{className:"w-4 h-4"}),"Fields auto-filled from JD. Review and edit below."]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",name:"date_created",value:u.date_created,onChange:C,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Client ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"client_id",value:u.client_id,onChange:C,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select Client"}),w.map(I=>n.jsx("option",{value:I.id,children:I.client_name},I.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client TA (Contact)"}),n.jsx("input",{type:"text",name:"client_ta",value:u.client_ta,onChange:C,placeholder:"Client's HR/TA contact name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Title ",n.jsx("span",{className:"text-red-500",children:"*"}),_.job_title&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"job_title",value:u.job_title,onChange:C,required:!0,placeholder:"e.g., Senior SAP FICO Consultant",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"mode",value:u.mode,onChange:C,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience ",n.jsx("span",{className:"text-red-500",children:"*"}),_.experience&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"experience",value:u.experience,onChange:C,required:!0,placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"}),_.location&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("input",{type:"text",name:"location",value:u.location,onChange:C,required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),n.jsx("input",{type:"text",name:"duration",value:u.duration,onChange:C,placeholder:"e.g., 6 months, Full-time permanent",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["No of Positions ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"no_of_positions",value:u.no_of_positions,onChange:C,required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Budget / CTC ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"budget",value:u.budget,onChange:C,required:!0,placeholder:"e.g., 15-20 LPA",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Work Timings"}),n.jsx("input",{type:"text",name:"work_timings",value:u.work_timings,onChange:C,placeholder:"e.g., 5:30 AM - 2:30 PM (Australian Shift)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Joining Preference"}),n.jsx("input",{type:"text",name:"joining_preference",value:u.joining_preference,onChange:C,placeholder:"e.g., Immediate joiners only",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Skills ",n.jsx("span",{className:"text-red-500",children:"*"}),_.skills&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"Auto-filled"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:u.skills.map((I,K)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[I,n.jsx("button",{type:"button",onClick:()=>O(I),className:"hover:text-indigo-900 dark:hover:text-indigo-100",children:n.jsx(Ar,{className:"w-3 h-3"})})]},K))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:f,onChange:I=>y(I.target.value),onKeyPress:R,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:n.jsx(Ya,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"jd_text",value:u.jd_text,onChange:C,required:!0,rows:10,placeholder:"Enter the full job description...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),e==="account_manager"&&S.length>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign Recruiters"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(I=>n.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-colors ${u.recruiter_ids.includes(I.id)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-300 dark:border-gray-600 hover:border-indigo-300"}`,children:[n.jsx("input",{type:"checkbox",checked:u.recruiter_ids.includes(I.id),onChange:()=>F(I.id),className:"rounded text-indigo-600 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:I.full_name||I.email})]},I.id))})]}),e==="account_manager"&&n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes for Recruiter (Internal)"}),n.jsx("textarea",{name:"notes_for_recruiter",value:u.notes_for_recruiter||"",onChange:I=>m(K=>({...K,notes_for_recruiter:I.target.value})),rows:3,placeholder:"Private instructions for assigned recruiters...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:I=>L(I,"draft"),disabled:a,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:a?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Publish Job"})]})]})]})]})},fD=({userRole:e="recruiter"})=>{const{jobId:t}=Rr(),[r]=Os(),s=t||r.get("jobId"),a=Et(),[i,l]=g.useState(!1),[o,c]=g.useState(!1),[d,u]=g.useState(null),[m,f]=g.useState(!1),[y,x]=g.useState({job_id:s||"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[],last_date_to_apply:"",status:"draft"}),[p,h]=g.useState(""),[v,b]=g.useState([]);g.useEffect(()=>{j(),s&&_(s)},[s]);const j=async()=>{try{const C=await q.get("/v1/job-management/requirements");b(C.data.jobs||C.data||[])}catch(C){console.error("Error fetching jobs:",C)}},_=async C=>{c(!0);try{const O=(await q.get(`/v1/job-management/requirements/${C}`)).data;x(R=>{var F;return{...R,job_id:C,title:O.title||O.job_title||"",client_display_name:((F=O.client)==null?void 0:F.client_name)||"",jd_content:O.jd_text||O.description||"",ctc:O.budget||"",location:O.location||"",mode:O.mode||"hybrid",experience:O.experience||"",skills:O.skills||[]}})}catch(P){console.error("Error fetching job details:",P)}finally{c(!1)}},N=C=>{const{name:P,value:O}=C.target;x(R=>({...R,[P]:O}))},w=C=>{const P=C.target.value;P?_(P):x(O=>({...O,job_id:"",title:"",client_display_name:"",jd_content:"",ctc:"",location:"",mode:"hybrid",experience:"",skills:[]}))},k=()=>{p.trim()&&!y.skills.includes(p.trim())&&(x(C=>({...C,skills:[...C.skills,p.trim()]})),h(""))},S=C=>{x(P=>({...P,skills:P.skills.filter(O=>O!==C)}))},E=C=>{(C.key==="Enter"||C.key===",")&&(C.preventDefault(),k())},T=async(C,P="draft")=>{var O,R;if(C.preventDefault(),!y.title.trim()){u("Title is required");return}if(!y.jd_content.trim()){u("Job description is required");return}if(!y.last_date_to_apply){u("Last date to apply is required");return}l(!0),u(null);try{const F={...y,status:P,job_id:y.job_id||null},Q=y.job_id?`/v1/job-management/requirements/${y.job_id}/postings`:"/v1/job-management/postings";await q.post(Q,F),f(!0),setTimeout(()=>{a(y.job_id?`${e==="account_manager"?"/am":"/recruiter"}/jobs/${y.job_id}`:`${e==="account_manager"?"/am":"/recruiter"}/jobs`)},1500)}catch(F){console.error("Error creating posting:",F),u(((R=(O=F.response)==null?void 0:O.data)==null?void 0:R.detail)||"Failed to create posting. Please try again.")}finally{l(!1)}},A=new Date().toISOString().split("T")[0];return n.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(cp,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Job Posting"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create an external job posting for candidates"})]})]}),m&&n.jsxs("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center gap-3",children:[n.jsx(wc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Job posting created successfully! Redirecting..."})]}),d&&n.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg flex items-center gap-3",children:[n.jsx(Zs,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-700 dark:text-red-300",children:d}),n.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:n.jsx(Ar,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]}),n.jsx("form",{onSubmit:C=>T(C,"active"),children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Existing Job (Optional)"}),n.jsxs("select",{name:"job_id",value:y.job_id,onChange:w,disabled:!!s,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-100 dark:disabled:bg-gray-600",children:[n.jsx("option",{value:"",children:"-- Create standalone posting --"}),v.map(C=>{var P;return n.jsxs("option",{value:C.id,children:[C.title||C.job_title," -"," ",((P=C.client)==null?void 0:P.client_name)||"Unknown Client"]},C.id)})]}),o&&n.jsxs("p",{className:"mt-2 text-sm text-indigo-600 flex items-center gap-2",children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Loading job details..."]}),y.job_id&&!o&&n.jsxs("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[n.jsx(wc,{className:"w-4 h-4"}),"Fields auto-filled from linked job"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Posting Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"title",value:y.title,onChange:N,required:!0,placeholder:"e.g., Senior Software Engineer",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Company Display Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"client_display_name",value:y.client_display_name,onChange:N,required:!0,placeholder:"e.g., Leading IT MNC or actual company name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Location ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"location",value:y.location,onChange:N,required:!0,placeholder:"e.g., Bengaluru, India",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Work Mode ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"mode",value:y.mode,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"hybrid",children:"Hybrid"}),n.jsx("option",{value:"remote",children:"Remote"}),n.jsx("option",{value:"onsite",children:"On-site"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Experience ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"experience",value:y.experience,onChange:N,required:!0,placeholder:"e.g., 5-8 years",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["CTC / Salary Range ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"ctc",value:y.ctc,onChange:N,required:!0,placeholder:"e.g., 15-20 LPA or As per market standards",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Last Date to Apply ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",name:"last_date_to_apply",value:y.last_date_to_apply,onChange:N,required:!0,min:A,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Required Skills ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.skills.map((C,P)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full text-sm",children:[C,n.jsx("button",{type:"button",onClick:()=>S(C),className:"hover:text-indigo-900 dark:hover:text-indigo-100",children:n.jsx(Ar,{className:"w-3 h-3"})})]},P))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:p,onChange:C=>h(C.target.value),onKeyPress:E,placeholder:"Type a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:n.jsx(Ya,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Job Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"jd_content",value:y.jd_content,onChange:N,required:!0,rows:10,placeholder:"Enter the job description that will be visible to candidates...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This description will be visible to candidates. Remove any confidential information."})]}),n.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>a(-1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:C=>T(C,"draft"),disabled:i,className:"px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors disabled:opacity-50",children:"Save as Draft"}),n.jsx("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Publishing..."]}):"Publish Posting"})]})]})})]})};function xVe(){const e=Et(),t=({isActive:s})=>`block px-4 py-2 rounded-md text-sm font-medium transition ${s?"bg-blue-600 text-white":"text-gray-200 hover:bg-gray-700"}`;function r(){localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),e("/login",{replace:!0}),window.location.reload()}return n.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[n.jsxs("aside",{className:"w-64 bg-gray-900 text-white flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-700",children:[n.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Vendor Portal"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supply Partner Access"})]}),n.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[n.jsx(cr,{to:"/vendor/dashboard",className:t,children:"Dashboard"}),n.jsx(cr,{to:"/vendor/candidates",className:t,children:"Candidates"}),n.jsx(cr,{to:"/vendor/bgv-assigned",className:t,children:"Assigned BGV"}),n.jsx(cr,{to:"/vendor/documents",className:t,children:"Documents"}),n.jsx(cr,{to:"/vendor/profile",className:t,children:"Profile"})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-700",children:n.jsx("button",{onClick:r,className:"w-full text-left text-sm px-4 py-2 rounded-md text-red-400 hover:bg-red-500/10 hover:text-red-300 transition",children:"Logout"})}),n.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 text-center",children:[" ",new Date().getFullYear()," ATS Platform"]})]}),n.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n.jsx(_o,{})})]})}function dx(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function gVe(e){if(!e)throw new Error("formData is required");const t=await q.post("/v1/vendor/candidates",e,{headers:{"Content-Type":"multipart/form-data"}});return dx(t)}async function yVe(){const e=await q.get("/v1/vendor/candidates");return dx(e)}async function vVe(){const e=await q.get("/v1/vendor/dashboard");return dx(e)}async function bVe(){const e=await q.get("/v1/vendor/profile");return dx(e)}async function jVe(e){if(!e)throw new Error("payload is required");const t=await q.put("/v1/vendor/profile",e);return dx(t)}function hD(){var o,c,d,u,m,f,y;const[e,t]=g.useState(null),[r,s]=g.useState(!0),[a,i]=g.useState("");g.useEffect(()=>{l()},[]);async function l(){try{s(!0);const x=await vVe();t(x)}catch(x){console.error(x),i("Unable to load dashboard data")}finally{s(!1)}}return r?n.jsx("div",{className:"text-sm text-gray-500",children:"Loading vendor dashboard"}):a?n.jsx("div",{className:"text-sm text-red-600",children:a}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Dashboard"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Overview of your candidate supply, deployments, and payouts"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Dg,{title:"Candidates Supplied",value:e.total_candidates,sub:"Total profiles submitted"}),n.jsx(Dg,{title:"Active Deployments",value:e.active_deployments,sub:"Currently working",highlight:!0}),n.jsx(Dg,{title:"Pending Timesheets",value:e.pending_timesheets,sub:"Awaiting approval",warning:e.pending_timesheets>0}),n.jsx(Dg,{title:"Expected Payout",value:`${_Ve(e.expected_payout)}`,sub:"Based on approved work",success:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Supply Pipeline Snapshot"}),n.jsx($g,{label:"New / Screening",value:((o=e.pipeline)==null?void 0:o.new)||0}),n.jsx($g,{label:"Shortlisted",value:((c=e.pipeline)==null?void 0:c.shortlisted)||0}),n.jsx($g,{label:"Interviewing",value:((d=e.pipeline)==null?void 0:d.interview)||0}),n.jsx($g,{label:"Selected",value:((u=e.pipeline)==null?void 0:u.selected)||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Compliance Status"}),n.jsx(kw,{label:"GST / Agreement",status:(m=e.compliance)==null?void 0:m.gst}),n.jsx(kw,{label:"Insurance",status:(f=e.compliance)==null?void 0:f.insurance}),n.jsx(kw,{label:"Tax Documents",status:(y=e.compliance)==null?void 0:y.tax}),n.jsx("p",{className:"text-xs text-gray-400 mt-3",children:" Payouts may be held if documents expire or are rejected."})]})]})]})}function Dg({title:e,value:t,sub:r,highlight:s,warning:a,success:i}){let l="text-gray-800";return s&&(l="text-indigo-600"),a&&(l="text-yellow-600"),i&&(l="text-green-600"),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:`text-2xl font-semibold ${l}`,children:t}),n.jsx("p",{className:"text-xs text-gray-400",children:r})]})}function $g({label:e,value:t}){return n.jsxs("div",{className:"flex justify-between text-sm py-1",children:[n.jsx("span",{className:"text-gray-600",children:e}),n.jsx("span",{className:"font-medium text-gray-800",children:t})]})}function kw({label:e,status:t}){const r=t==="approved"?"text-green-600":t==="rejected"?"text-red-600":"text-yellow-600";return n.jsxs("div",{className:"flex justify-between text-sm py-1",children:[n.jsx("span",{className:"text-gray-600",children:e}),n.jsx("span",{className:`font-medium ${r}`,children:t||"pending"})]})}function _Ve(e=0){return Number(e).toLocaleString("en-IN")}function wVe({onSuccess:e}){const[t,r]=g.useState({full_name:"",email:"",phone:"",experience_years:"",billing_rate:"",skills:""}),[s,a]=g.useState(null),[i,l]=g.useState(!1),[o,c]=g.useState(""),[d,u]=g.useState("");function m(y){const{name:x,value:p}=y.target;r(h=>({...h,[x]:p}))}async function f(y){if(y.preventDefault(),c(""),u(""),!s){c("Resume is required");return}try{l(!0);const x=new FormData;x.append("full_name",t.full_name),x.append("email",t.email),x.append("phone",t.phone),x.append("experience_years",t.experience_years),x.append("billing_rate",t.billing_rate),x.append("skills",t.skills),x.append("resume",s),await gVe(x),u("Candidate uploaded successfully"),r({full_name:"",email:"",phone:"",experience_years:"",billing_rate:"",skills:""}),a(null),e&&e()}catch(x){console.error(x),c("Failed to upload candidate")}finally{l(!1)}}return n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-medium mb-3",children:"Upload New Candidate"}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("input",{name:"full_name",value:t.full_name,onChange:m,placeholder:"Full Name",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"email",type:"email",value:t.email,onChange:m,placeholder:"Email",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"phone",value:t.phone,onChange:m,placeholder:"Phone",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"experience_years",type:"number",value:t.experience_years,onChange:m,placeholder:"Experience (years)",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"billing_rate",type:"number",value:t.billing_rate,onChange:m,placeholder:"Billing Rate",required:!0,className:"border rounded px-3 py-2 text-sm"}),n.jsx("input",{name:"skills",value:t.skills,onChange:m,placeholder:"Skills (comma separated)",className:"border rounded px-3 py-2 text-sm"})]}),n.jsx("div",{children:n.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:y=>a(y.target.files[0]),className:"text-sm"})}),o&&n.jsx("p",{className:"text-sm text-red-600",children:o}),d&&n.jsx("p",{className:"text-sm text-green-600",children:d}),n.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm disabled:opacity-60",children:i?"Uploading...":"Upload Candidate"})]})]})}const NVe={new:{label:"New",className:"bg-gray-100 text-gray-700"},screened:{label:"Screened",className:"bg-blue-100 text-blue-700"},shortlisted:{label:"Shortlisted",className:"bg-indigo-100 text-indigo-700"},interview:{label:"Interview",className:"bg-purple-100 text-purple-700"},selected:{label:"Selected",className:"bg-green-100 text-green-700"},rejected:{label:"Rejected",className:"bg-red-100 text-red-700"}};function kVe({status:e}){const t=NVe[e]||{label:e||"Unknown",className:"bg-gray-100 text-gray-600"};return n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${t.className}`,children:t.label})}function SVe({candidate:e}){return n.jsxs("div",{className:"border rounded-lg p-4 flex justify-between items-start",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:e.full_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[e.email,"  ",e.phone]}),e.experience_years!==void 0&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Experience: ",e.experience_years," years"]}),e.skills&&e.skills.length>0&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Skills:"," ",Array.isArray(e.skills)?e.skills.join(", "):e.skills]}),e.billing_rate&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Billing Rate: ",e.billing_rate]})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[n.jsx(kVe,{status:e.status}),n.jsx("span",{className:"text-[10px] text-gray-400",children:"Source: Vendor"})]})]})}function CVe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState("");g.useEffect(()=>{l()},[]);async function l(){try{s(!0),i("");const o=await yVe();t((o==null?void 0:o.data)??[])}catch(o){console.error(o),i("Failed to load candidates")}finally{s(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Candidates"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload and track candidates submitted by your organization."})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx(wVe,{onSuccess:l})}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h2",{className:"text-md font-medium mb-4",children:"Uploaded Candidates"}),r&&n.jsx("p",{className:"text-sm text-gray-500",children:"Loading candidates..."}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),!r&&e.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No candidates uploaded yet."}),n.jsx("div",{className:"grid gap-3",children:e.map(o=>n.jsx(SVe,{candidate:o},o.id))})]})]})}function QV(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)}async function AVe(e){if(!e)throw new Error("formData is required");const t=await q.post("/v1/vendor/documents",e,{headers:{"Content-Type":"multipart/form-data"}});return QV(t)}async function EVe(){const e=await q.get("/v1/vendor/documents");return QV(e)}function TVe({onSuccess:e}){const[t,r]=g.useState(""),[s,a]=g.useState(null),[i,l]=g.useState(!1),[o,c]=g.useState(""),[d,u]=g.useState("");async function m(f){if(f.preventDefault(),c(""),u(""),!t){c("Please select a document type");return}if(!s){c("Please select a file");return}try{l(!0);const y=new FormData;y.append("document_type",t),y.append("file",s),await AVe(y),u("Document uploaded successfully"),r(""),a(null),e&&e()}catch(y){console.error(y),c("Failed to upload document")}finally{l(!1)}}return n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-medium mb-3",children:"Upload Compliance Document"}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsx("div",{className:"flex flex-col gap-2",children:n.jsxs("select",{value:t,onChange:f=>r(f.target.value),className:"border rounded p-2",required:!0,children:[n.jsx("option",{value:"",children:"Select Document Type"}),n.jsx("option",{value:"GST",children:"GST Certificate"}),n.jsx("option",{value:"NDA",children:"NDA"}),n.jsx("option",{value:"Insurance",children:"Insurance"}),n.jsx("option",{value:"Other",children:"Other"})]})}),n.jsx("div",{className:"flex flex-col gap-2",children:n.jsx("input",{type:"file",onChange:f=>a(f.target.files[0]),className:"border rounded p-2",required:!0})}),o&&n.jsx("p",{className:"text-sm text-red-600",children:o}),d&&n.jsx("p",{className:"text-sm text-green-600",children:d}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:i,children:i?"Uploading...":"Upload Document"})]})]})}function PVe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState("");g.useEffect(()=>{l()},[]);async function l(){try{s(!0),i("");const o=await EVe();t(o||[])}catch(o){console.error(o),i("Failed to load documents")}finally{s(!1)}}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Compliance Documents"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload required documents for compliance and payments."})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx(TVe,{onSuccess:l})}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("h2",{className:"text-md font-medium mb-4",children:"Uploaded Documents"}),r&&n.jsx("p",{className:"text-sm text-gray-500",children:"Loading documents..."}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),!r&&e.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No documents uploaded yet."}),n.jsx("div",{className:"space-y-3",children:e.map(o=>n.jsxs("div",{className:"border rounded-md p-3 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.document_type}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded on ",new Date(o.created_at).toLocaleDateString()]})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o.status==="approved"?"bg-green-100 text-green-700":o.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:o.status})]},o.id))})]})]})}function OVe(){const[e,t]=g.useState(null),[r,s]=g.useState(!0),[a,i]=g.useState(!1),[l,o]=g.useState(""),[c,d]=g.useState("");g.useEffect(()=>{u()},[]);async function u(){try{s(!0);const y=await bVe();t(y)}catch(y){console.error(y),o("Failed to load vendor profile")}finally{s(!1)}}function m(y){const{name:x,value:p}=y.target;t(h=>({...h,[x]:p}))}async function f(){try{i(!0),o(""),d("");const y={company_name:e.company_name,primary_contact_name:e.primary_contact_name,primary_contact_email:e.primary_contact_email,primary_contact_phone:e.primary_contact_phone};await jVe(y),d("Profile updated successfully")}catch(y){console.error(y),o("Failed to update profile")}finally{i(!1)}}return r?n.jsx("p",{className:"text-sm text-gray-500",children:"Loading profile"}):e?n.jsxs("div",{className:"max-w-3xl space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Vendor Profile"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Company and contact information"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Company Details"}),n.jsx(Mg,{label:"Company Name",name:"company_name",value:e.company_name,onChange:m}),n.jsx(pD,{label:"GST Number",value:e.gst_number}),n.jsx(pD,{label:"Payment Terms",value:e.payment_terms})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Primary Contact"}),n.jsx(Mg,{label:"Contact Name",name:"primary_contact_name",value:e.primary_contact_name,onChange:m}),n.jsx(Mg,{label:"Contact Email",name:"primary_contact_email",value:e.primary_contact_email,onChange:m}),n.jsx(Mg,{label:"Contact Phone",name:"primary_contact_phone",value:e.primary_contact_phone,onChange:m}),l&&n.jsx("p",{className:"text-sm text-red-600",children:l}),c&&n.jsx("p",{className:"text-sm text-green-600",children:c}),n.jsx("button",{onClick:f,disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm disabled:opacity-60",children:a?"Saving...":"Save Changes"})]})]}):n.jsx("p",{className:"text-sm text-red-600",children:"Unable to load profile"})}function pD({label:e,value:t}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:"text-sm font-medium text-gray-800",children:t||""})]})}function Mg({label:e,name:t,value:r,onChange:s}){return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("input",{name:t,value:r||"",onChange:s,className:"border rounded px-3 py-2 text-sm w-full"})]})}function RVe(){const[e,t]=g.useState(!0),[r,s]=g.useState([]);g.useEffect(()=>{a()},[]);async function a(){var i;try{const l=await q.get("/v1/vendor/bgv/assigned");s(((i=l==null?void 0:l.data)==null?void 0:i.items)||[])}catch(l){console.error("Failed to load assigned candidates",l),alert("Failed to load assigned candidates")}finally{t(!1)}}return n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Assigned BGV Candidates"}),e?n.jsx("p",{children:"Loading..."}):r.length===0?n.jsx("div",{className:"p-6 bg-yellow-50 border rounded",children:"No candidates assigned for BGV yet."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(i=>n.jsxs("div",{className:"p-4 border rounded shadow bg-white",children:[n.jsx("h2",{className:"text-lg font-semibold",children:i.full_name}),n.jsx("p",{className:"text-sm text-gray-600",children:i.email}),n.jsxs("p",{className:"mt-2",children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{className:"px-2 py-1 rounded bg-gray-100",children:i.bgv_status||"new"})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Assigned: ",i.bgv_assigned_at||"-"]}),n.jsx("div",{className:"mt-3",children:i.bgv_report_url?n.jsx("a",{href:i.bgv_report_url,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-green-600 text-white rounded",children:"View Report"}):n.jsx("button",{onClick:()=>window.location.href=`/vendor/bgv-submit/${i.id}`,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Submit Report"})})]},i.id))})]})}function LVe(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState("clear"),[a,i]=g.useState(""),[l,o]=g.useState(null),[c,d]=g.useState(!1);async function u(m){if(m.preventDefault(),!l)return alert("Please upload report file");const f=new FormData;f.append("status",r),f.append("remarks",a),f.append("file",l);try{d(!0),await q.post(`/v1/vendor/bgv/${e}/submit`,f,{headers:{"Content-Type":"multipart/form-data"}}),alert("Report submitted successfully"),t("/vendor/bgv-assigned")}catch(y){console.error(y),alert("Failed to submit report")}finally{d(!1)}}return n.jsxs("div",{className:"max-w-xl bg-white p-6 rounded shadow",children:[n.jsx("h1",{className:"text-xl font-bold mb-4",children:"Submit BGV Report"}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{children:"Status*"}),n.jsxs("select",{className:"w-full border p-2 rounded",value:r,onChange:m=>s(m.target.value),children:[n.jsx("option",{value:"clear",children:"Clear"}),n.jsx("option",{value:"red_flag",children:"Red Flag"}),n.jsx("option",{value:"insufficient",children:"Insufficient"})]})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Remarks"}),n.jsx("textarea",{className:"w-full border p-2 rounded",rows:"3",value:a,onChange:m=>i(m.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Upload Report*"}),n.jsx("input",{type:"file",className:"w-full",onChange:m=>o(m.target.files[0])})]}),n.jsx("button",{disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:c?"Submitting...":"Submit Report"})]})]})}function xD(){const[e,t]=g.useState({}),[r,s]=g.useState(!0),[a,i]=g.useState("organization"),[l,o]=g.useState(""),[c,d]=g.useState(!1),[u,m]=g.useState(""),[f,y]=g.useState(""),[x,p]=g.useState(!1),[h,v]=g.useState(!1),[b,j]=g.useState(""),[_,N]=g.useState(""),[w,k]=g.useState(null),S=g.useRef(null),[E,T]=g.useState({}),[A,C]=g.useState(""),[P,O]=g.useState("");g.useEffect(()=>{R()},[]);const R=async()=>{var ne,he,M,Se,me,Pe;try{const ue=await q.get("/v1/settings");t(ue.data);const ye=((M=(he=(ne=ue.data)==null?void 0:ne.access)==null?void 0:he.two_factor)==null?void 0:M.value)||((Pe=(me=(Se=ue.data)==null?void 0:Se.security)==null?void 0:me.two_factor)==null?void 0:Pe.value)||{};T(ye),s(!1)}catch(ue){console.error("Error loading settings:",ue),s(!1)}},F=async(ne,he,M)=>{try{await q.put("/v1/settings",{module_name:ne,setting_key:he,setting_value:M}),o("Settings saved successfully!"),setTimeout(()=>o(""),3e3),R()}catch(Se){console.error("Error saving settings:",Se),o("Error saving settings")}},Q=[{id:"organization",label:"Organization Profile",icon:""},{id:"access",label:"Access & Roles",icon:""},{id:"recruitment",label:"Recruitment Automation",icon:""},{id:"employee",label:"Employee Management",icon:""},{id:"payroll",label:"Payroll & Finance",icon:""},{id:"communications",label:"Communications",icon:""},{id:"ai",label:"AI & Data Governance",icon:""},{id:"integrations",label:"Integrations & Audit",icon:""},{id:"data",label:"Data Operations",icon:""}],W=()=>{var M;const he=((M=(e.organization||{}).profile)==null?void 0:M.value)||{};return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),n.jsx("input",{type:"text",placeholder:"ATS HR Solutions",value:he.company_name||"",onChange:Se=>F("organization","profile",{...he,company_name:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Industry"}),n.jsxs("select",{value:he.industry||"",onChange:Se=>F("organization","profile",{...he,industry:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Industry"}),n.jsx("option",{value:"technology",children:"Technology"}),n.jsx("option",{value:"finance",children:"Finance"}),n.jsx("option",{value:"healthcare",children:"Healthcare"}),n.jsx("option",{value:"manufacturing",children:"Manufacturing"}),n.jsx("option",{value:"retail",children:"Retail"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Size"}),n.jsxs("select",{value:he.company_size||"",onChange:Se=>F("organization","profile",{...he,company_size:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Size"}),n.jsx("option",{value:"1-10",children:"1-10 employees"}),n.jsx("option",{value:"11-50",children:"11-50 employees"}),n.jsx("option",{value:"51-200",children:"51-200 employees"}),n.jsx("option",{value:"201-500",children:"201-500 employees"}),n.jsx("option",{value:"500+",children:"500+ employees"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),n.jsxs("select",{value:he.timezone||"",onChange:Se=>F("organization","profile",{...he,timezone:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"",children:"Select Timezone"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsx("option",{value:"EST",children:"EST (Eastern)"}),n.jsx("option",{value:"PST",children:"PST (Pacific)"}),n.jsx("option",{value:"IST",children:"IST (India)"}),n.jsx("option",{value:"GMT",children:"GMT (London)"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),n.jsx("textarea",{placeholder:"Company address",value:he.address||"",onChange:Se=>F("organization","profile",{...he,address:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:2})]})]})]})})},L=()=>{var Se,me,Pe;const he=((Se=(e.access||{}).security)==null?void 0:Se.value)||{},M=((Pe=(me=e==null?void 0:e.access)==null?void 0:me.roles)==null?void 0:Pe.value)||(E==null?void 0:E.roles)||{admin:"Admin",recruiter:"Recruiter",account_manager:"Account Manager",internal_hr:"Internal HR",consultant:"Consultant",employee:"Employee",accounts:"Accounts",consultant_support:"Consultant Support",candidate:"Candidate"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Security Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin users"})]}),n.jsx("input",{type:"checkbox",checked:he.require_2fa||!1,onChange:ue=>F("access","security",{...he,require_2fa:ue.target.checked}),className:"w-5 h-5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),n.jsx("input",{type:"number",min:"15",max:"480",value:he.session_timeout||60,onChange:ue=>F("access","security",{...he,session_timeout:parseInt(ue.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Password Length"}),n.jsx("input",{type:"number",min:"6",max:"20",value:he.min_password_length||8,onChange:ue=>F("access","security",{...he,min_password_length:parseInt(ue.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Role Permissions Matrix"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Current role-based access control is predefined. Contact support for custom role creation."}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left",children:"Module"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Admin"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Recruiter"}),n.jsx("th",{className:"px-4 py-2 text-center",children:"Employee"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200",children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Talent Acquisition"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Employee Management"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" View Only"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Self Only"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"Finance & Payroll"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:"User Management"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" Full Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"}),n.jsx("td",{className:"px-4 py-2 text-center",children:" No Access"})]})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for sensitive roles. Users in enabled roles must configure an authenticator app on next login."})]}),P&&n.jsx("span",{className:"text-sm text-red-600",children:P})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Description"}),n.jsx("th",{className:"px-4 py-2 text-center font-medium text-gray-500",children:"Require 2FA"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.keys(M).map(ue=>{var lt;const ye=!!E[ue],Ye=((lt=M[ue])==null?void 0:lt.name)||M[ue]||ue.replace(/_/g," ");return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 font-medium text-gray-900 capitalize",children:Ye}),n.jsx("td",{className:"px-4 py-2 text-gray-500",children:ue==="admin"?"Full platform access":ue==="recruiter"?"Manages talent pipeline":ue==="accounts"?"Finance & payroll operations":"Application user"}),n.jsx("td",{className:"px-4 py-2 text-center",children:n.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:ye,disabled:A===ue,onChange:xe=>K(ue,xe.target.checked)}),A===ue&&n.jsx("span",{className:"text-xs text-gray-500",children:"Saving"})]})})]},ue)})})]})})]})]})},I=()=>{var he,M,Se,me,Pe,ue,ye,Ye;const ne=e.recruitment||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Auto Screening"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Enable Auto Screening"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Automatically screen candidates using AI"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:((M=(he=ne.auto_screening_enabled)==null?void 0:he.value)==null?void 0:M.enabled)||!1,onChange:lt=>{var xe,Ae;return F("recruitment","auto_screening_enabled",{enabled:lt.target.checked,threshold:((Ae=(xe=ne.auto_screening_enabled)==null?void 0:xe.value)==null?void 0:Ae.threshold)||70})},className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screening Threshold (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:((me=(Se=ne.auto_screening_enabled)==null?void 0:Se.value)==null?void 0:me.threshold)||70,onChange:lt=>{var xe,Ae;return F("recruitment","auto_screening_enabled",{enabled:((Ae=(xe=ne.auto_screening_enabled)==null?void 0:xe.value)==null?void 0:Ae.enabled)||!0,threshold:parseInt(lt.target.value)})},className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interview Configuration"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Text Interviews"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Enable text-based AI interviews"})]}),n.jsx("input",{type:"checkbox",checked:((ue=(Pe=ne.interview_modes)==null?void 0:Pe.value)==null?void 0:ue.text)||!1,onChange:lt=>{var xe;return F("recruitment","interview_modes",{...(xe=ne.interview_modes)==null?void 0:xe.value,text:lt.target.checked})},className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Video Interviews"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Enable video-based AI interviews"})]}),n.jsx("input",{type:"checkbox",checked:((Ye=(ye=ne.interview_modes)==null?void 0:ye.value)==null?void 0:Ye.video)||!1,onChange:lt=>{var xe;return F("recruitment","interview_modes",{...(xe=ne.interview_modes)==null?void 0:xe.value,video:lt.target.checked})},className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Lead Scoring Rules"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure automatic lead qualification scoring"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"LinkedIn profile present"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+20 points"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Email engagement (opens/clicks)"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+30 points"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Referred by employee"}),n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"+40 points"})]})]})]})]})},K=async(ne,he)=>{var M,Se;O(""),C(ne);try{await q.put("/v1/settings/2fa",{role:ne,enabled:he}),T(me=>({...me,[ne]:he}))}catch(me){console.error("Failed to update two-factor setting",me),O(((Se=(M=me==null?void 0:me.response)==null?void 0:M.data)==null?void 0:Se.detail)||"Unable to update the two-factor requirement right now.")}finally{C("")}},D=()=>{var Se,me;const ne=e.leaves||{},he=((Se=ne.leave_policy)==null?void 0:Se.value)||{},M=((me=ne.approval_workflow)==null?void 0:me.value)||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Leave Allocation (Days per Year)"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(he).filter(([Pe])=>Pe!=="auto_approve_threshold").map(([Pe,ue])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 capitalize",children:Pe.replace("_"," ")}),n.jsx("input",{type:"number",value:ue,onChange:ye=>F("leaves","leave_policy",{...he,[Pe]:parseInt(ye.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},Pe))})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Approval Workflow"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Require Manager Approval"}),n.jsx("p",{className:"text-sm text-gray-600",children:"All leave requests need manager approval"})]}),n.jsx("input",{type:"checkbox",checked:M.requires_manager_approval||!1,onChange:Pe=>F("leaves","approval_workflow",{...M,requires_manager_approval:Pe.target.checked}),className:"w-5 h-5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auto-approve leaves up to (days)"}),n.jsx("input",{type:"number",value:M.auto_approve_days||2,onChange:Pe=>F("leaves","approval_workflow",{...M,auto_approve_days:parseInt(Pe.target.value)}),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Management"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review Cycle Frequency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"semi-annual",children:"Semi-Annual"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Enable Self-Assessment"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Allow employees to self-evaluate"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Probation Settings"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Probation Period (days)"}),n.jsx("input",{type:"number",defaultValue:90,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})},Y=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Configuration"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pay Frequency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"biweekly",children:"Bi-weekly"}),n.jsx("option",{value:"weekly",children:"Weekly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"USD",children:"USD ($)"}),n.jsx("option",{value:"EUR",children:"EUR ()"}),n.jsx("option",{value:"GBP",children:"GBP ()"}),n.jsx("option",{value:"INR",children:"INR ()"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fiscal Year Start"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"january",children:"January"}),n.jsx("option",{value:"april",children:"April"}),n.jsx("option",{value:"july",children:"July"}),n.jsx("option",{value:"october",children:"October"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Calculation Method"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"automatic",children:"Automatic"}),n.jsx("option",{value:"manual",children:"Manual"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Standard Deduction Types"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Income Tax"}),n.jsx("span",{className:"text-blue-600",children:"Percentage-based"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Provident Fund (PF)"}),n.jsx("span",{className:"text-blue-600",children:"Percentage-based"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Health Insurance"}),n.jsx("span",{className:"text-blue-600",children:"Fixed Amount"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsx("span",{children:"Loans & Advances"}),n.jsx("span",{className:"text-blue-600",children:"One-time"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Settings"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Invoice Number Format"}),n.jsx("input",{type:"text",placeholder:"INV-{YYYY}-{MM}-{###}",defaultValue:"INV-{YYYY}-{MM}-{###}",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Placeholders: ","{YYYY}"," year, ","{MM}"," month, ","{###}"," auto-increment"]})]})]})]}),re=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Configuration (SMTP)"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"SMTP Host"}),n.jsx("input",{type:"text",placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"SMTP Port"}),n.jsx("input",{type:"number",placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Encryption"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"tls",children:"TLS"}),n.jsx("option",{value:"ssl",children:"SSL"}),n.jsx("option",{value:"none",children:"None"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),n.jsx("input",{type:"text",placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),n.jsx("input",{type:"password",placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Provider (Twilio)"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account SID"}),n.jsx("input",{type:"text",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auth Token"}),n.jsx("input",{type:"password",placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"WhatsApp Business API"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number ID"}),n.jsx("input",{type:"text",placeholder:"123456789012345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Account ID"}),n.jsx("input",{type:"text",placeholder:"123456789012345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Slack Integration"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook URL"}),n.jsx("input",{type:"url",placeholder:"https://hooks.slack.com/services/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Candidate stage change notifications"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Leave request notifications"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Performance review reminders"}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]})]}),B=()=>{var M;const he=((M=(e.ai||{}).models)==null?void 0:M.value)||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AI Models Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Resume Parser Model"}),n.jsxs("select",{value:he.resume_parser||"local-nlp-v1",onChange:Se=>F("ai","models",{...he,resume_parser:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"local-nlp-v1",children:"Local NLP v1 (No API costs)"}),n.jsx("option",{value:"local-nlp-v2",children:"Local NLP v2 (Improved accuracy)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interview Bot Model"}),n.jsxs("select",{value:he.interview_bot||"local-llm-v1",onChange:Se=>F("ai","models",{...he,interview_bot:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"local-llm-v1",children:"Local LLM v1 (Fast, basic)"}),n.jsx("option",{value:"local-llm-v2",children:"Local LLM v2 (Slower, better)"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Bias Detection"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Monitor AI decisions for bias"})]}),n.jsx("input",{type:"checkbox",checked:he.bias_detection==="enabled",onChange:Se=>F("ai","models",{...he,bias_detection:Se.target.checked?"enabled":"disabled"}),className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Governance & Privacy"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data Retention Period (days)"}),n.jsx("input",{type:"number",defaultValue:365,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep candidate/employee data after departure"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Anonymize PII in Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Remove personally identifiable information from analytics"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Explainable AI"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Provide explanations for all AI decisions"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Resume Data Extraction"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure which data fields to extract from resumes"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Skills","Experience","Education","Certifications","Projects","Languages"].map(Se=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:Se})]},Se))})]})]})},G=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Third-Party Integrations"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Connect external services to Akshu HR"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"SMTP Email"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Configure in Communications tab"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Slack"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Team notifications"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Twilio SMS"}),n.jsx("p",{className:"text-xs text-gray-500",children:"SMS notifications"})]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"API Keys & Webhooks"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"API Key (for external integrations)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:"ak_live_xxxxxxxxxxxxxxxxxxxxxxxx",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Regenerate"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook Endpoint"}),n.jsx("input",{type:"url",placeholder:"https://your-domain.com/webhooks/akshu-hr",className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive real-time event notifications"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Audit Logs"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Total events logged"}),n.jsx("span",{className:"font-semibold",children:"1,247"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"User actions tracked"}),n.jsx("span",{className:"font-semibold",children:"892"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"System events"}),n.jsx("span",{className:"font-semibold",children:"355"})]})]}),n.jsx("button",{className:"mt-4 w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Export Audit Logs"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Backup & Export"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:"Automatic Backups"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Daily backup at 2:00 AM UTC"})]}),n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),n.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Create Manual Backup Now"}),n.jsx("button",{className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Export All Data (CSV)"})]})]})]}),ce=async()=>{var ne,he;if(m(""),!f.trim()){p(!0);return}d(!0);try{const M=await q.get("/v1/jobs/export",{params:{format:"xlsx",password:f},responseType:"blob"}),Se=new Blob([M.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),me=window.URL.createObjectURL(Se),Pe=document.createElement("a");Pe.href=me,Pe.setAttribute("download",`jobs-export-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(Pe),Pe.click(),Pe.parentNode.removeChild(Pe),window.URL.revokeObjectURL(me)}catch(M){console.error("Job export failed",M),m(((he=(ne=M==null?void 0:M.response)==null?void 0:ne.data)==null?void 0:he.detail)||"Failed to export jobs. Please try again.")}finally{d(!1),y(""),p(!1)}},ae=async ne=>{var M,Se;if(ne.preventDefault(),N(""),j(""),!w){N("Please select a CSV or XLSX file before uploading.");return}const he=new FormData;he.append("file",w),v(!0);try{await q.post("/v1/jobs/bulk",he,{headers:{"Content-Type":"multipart/form-data"}}),j("Bulk jobs uploaded successfully."),k(null),S.current&&(S.current.value="")}catch(me){console.error("Bulk upload failed",me),N(((Se=(M=me==null?void 0:me.response)==null?void 0:M.data)==null?void 0:Se.detail)||"Failed to upload jobs. Please review the file and try again.")}finally{v(!1)}},fe=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Export Jobs"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download the latest job postings in Excel format for offline audits or sharing."}),n.jsxs("div",{className:"mb-4 border border-dashed border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Password protection required"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admins must set a download password before exporting to ensure the XLSX file stays secure."}),n.jsx("button",{type:"button",onClick:()=>{p(!0),m("")},className:"mt-3 text-sm text-indigo-600 hover:underline",children:"Set password & export"})]}),u&&n.jsx("div",{className:"mb-3 rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:u}),n.jsx("button",{onClick:()=>{x||p(!0)},disabled:c,className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",children:c?"Preparing file...":"Export Jobs (.xlsx)"})]}),x&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Protect Export"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter a password that will encrypt the XLSX download. Recipients must use it to open the file."}),n.jsx("input",{type:"password",value:f,onChange:ne=>y(ne.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Enter password"}),n.jsxs("div",{className:"flex gap-3 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{p(!1),y("")},className:"px-4 py-2 border rounded text-gray-600",children:"Cancel"}),n.jsx("button",{type:"button",disabled:!f||c,onClick:ce,className:"px-4 py-2 rounded bg-indigo-600 text-white disabled:opacity-60",children:c?"Encrypting...":"Export with password"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bulk Job Upload"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload multiple job postings at once using a CSV or Excel template. Ensure required headings like title, department, location, and status are present."}),n.jsxs("form",{className:"space-y-4",onSubmit:ae,children:[n.jsxs("div",{children:[n.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",ref:S,onChange:ne=>{var he;k(((he=ne.target.files)==null?void 0:he[0])||null),N(""),j("")},className:"w-full rounded border border-gray-300 px-3 py-2"}),w&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",n.jsx("strong",{children:w.name})]})]}),_&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:_}),b&&n.jsx("div",{className:"rounded border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-700",children:b}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"submit",disabled:h,className:"flex-1 rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700 disabled:opacity-60",children:h?"Uploading...":"Upload Jobs"}),n.jsx("button",{type:"button",onClick:()=>{k(null),N(""),j(""),S.current&&(S.current.value="")},className:"rounded border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50",children:"Clear"})]})]})]})]});return r?n.jsx("div",{className:"p-8",children:"Loading settings..."}):n.jsxs("div",{className:"max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"System Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure your HR platform modules and preferences"})]}),l&&n.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:l}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:n.jsx("div",{className:"flex overflow-x-auto",children:Q.map(ne=>n.jsxs("button",{onClick:()=>i(ne.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 transition-all whitespace-nowrap ${a===ne.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"text-lg",children:ne.icon}),n.jsx("span",{className:"font-medium text-sm",children:ne.label})]},ne.id))})}),n.jsxs("div",{className:"p-8",children:[a==="organization"&&W(),a==="access"&&L(),a==="recruitment"&&I(),a==="employee"&&D(),a==="payroll"&&Y(),a==="communications"&&re(),a==="ai"&&B(),a==="integrations"&&G(),a==="data"&&fe()]})]})]})}function IVe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(!1),[l,o]=g.useState(null),[c,d]=g.useState([]),[u,m]=g.useState(""),f=Et(),y=async()=>{try{const h=localStorage.getItem("access_token"),v=await q.get("/v1/client/master",{headers:{Authorization:`Bearer ${h}`}});t(v.data||[])}catch(h){console.error("Failed to load clients",h)}finally{s(!1)}};if(g.useEffect(()=>{y()},[]),r)return n.jsx("div",{className:"p-4",children:"Loading clients..."});const x=async h=>{var v;try{const b=localStorage.getItem("access_token");o(h),m(((v=h.account_manager)==null?void 0:v.id)||""),i(!0);const j=await q.get("/v1/client/admin/account-managers",{headers:{Authorization:`Bearer ${b}`}});d(j.data||[])}catch(b){console.error("Failed to load account managers",b),alert("Failed to load account managers")}},p=async()=>{if(!u){alert("Please select an Account Manager");return}try{const h=localStorage.getItem("access_token");await q.put(`/v1/client/master/${l.id}/assign-account-manager`,{account_manager_id:u},{headers:{Authorization:`Bearer ${h}`}}),alert("Account Manager assigned successfully"),i(!1),y()}catch(h){console.error("Assign failed",h),alert("Failed to assign Account Manager")}};return n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsx("h1",{className:"text-2xl font-bold",children:"Client List"})}),e.length===0?n.jsx("div",{className:"text-gray-500",children:"No clients found"}):n.jsx("div",{className:"mt-6 rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 border",children:"S. No."})," ",n.jsx("th",{className:"p-2 border",children:"Name"}),n.jsx("th",{className:"p-2 border",children:"Email"}),n.jsx("th",{className:"p-2 border",children:"Company"}),n.jsx("th",{className:"p-2 border",children:"Account Manager"}),n.jsx("th",{className:"p-2 border",children:"Status"}),n.jsx("th",{className:"p-2 border",children:"Action"})]})}),n.jsx("tbody",{children:e.map((h,v)=>{var b,j;return n.jsxs("tr",{className:"border hover:bg-slate-50 transition",children:[n.jsx("td",{className:"p-2 border text-center font-medium",children:v+1}),n.jsx("td",{className:"p-2 border",children:h.name||"N/A"}),n.jsx("td",{className:"p-2 border",children:h.email||"N/A"}),n.jsx("td",{className:"p-2 border",children:h.company_name||"N/A"}),n.jsx("td",{className:"p-2 border",children:(b=h.account_manager)!=null&&b.name?n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:h.account_manager.name}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:"Not Assigned"})}),n.jsx("td",{className:"p-2 border",children:h.is_active?n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Active"}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-200 text-gray-600",children:"Inactive"})}),n.jsxs("td",{className:"p-2 border text-center space-x-2",children:[n.jsx("button",{onClick:()=>f(`/clients/${h.id}/requirements`),className:"px-3 py-1.5 rounded-md text-sm bg-slate-100 text-slate-700 hover:bg-slate-200",children:"View"}),n.jsx("button",{onClick:()=>x(h),className:"px-3 py-1.5 rounded-md text-sm bg-blue-600 text-white hover:bg-blue-700",children:(j=h.account_manager)!=null&&j.id?"Change Account Manager":"Assign Account Manager"})]})]},h.id)})})]})}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl w-[400px] shadow-lg",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Assign Account Manager"}),n.jsxs("p",{className:"text-sm mb-2",children:["Client:"," ",n.jsx("b",{children:(l==null?void 0:l.company_name)||(l==null?void 0:l.name)})]}),n.jsxs("select",{className:"w-full border p-2 rounded mb-4",value:u,onChange:h=>m(h.target.value),children:[n.jsx("option",{value:"",children:"Select Account Manager"}),c.map(h=>n.jsx("option",{value:h.id,children:h.full_name},h.id))]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>i(!1),children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded",onClick:p,children:"Assign"})]})]})})]})}function gD(){const{clientId:e}=Rr(),[t,r]=g.useState([]),s=Et();g.useEffect(()=>{a()},[]);async function a(){try{const i=await dl.getClientRequirements(e);r(i||[])}catch(i){console.error("Failed to load client requirements",i)}}return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Client Requirements"}),n.jsx("button",{onClick:()=>s(`/clients/${e}/requirements/create`),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ New Requirement"})]}),n.jsx("div",{className:"bg-white rounded shadow",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2",children:"S. No."})," ",n.jsx("th",{className:"p-2",children:"Requirement ID"})," ",n.jsx("th",{className:"p-2",children:"Job Title"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created"})]})}),n.jsx("tbody",{children:t.length===0?n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:3,children:"No requirements found"})}):t.map((i,l)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 text-center font-medium",children:l+1}),n.jsx("td",{className:"p-2 text-gray-700",children:i.requirement_code||""}),n.jsx("td",{className:"p-2",children:i.title}),n.jsx("td",{children:i.status||"N/A"}),n.jsx("td",{className:"text-sm text-gray-700",children:i.created_at?(()=>{const o=new Date(i.created_at),c=o.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),d=o.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase();return`${c} | ${d}`})():"-"})]},i.requirement_code))})]})})]})}function yD(){const{clientId:e}=Rr(),t=Et(),[r,s]=g.useState({title:"",skills:"",location:"",budget:"",duration:"",sla:""});function a(l){s({...r,[l.target.name]:l.target.value})}async function i(){try{await dl.createClientRequirement(e,{...r,skills:r.skills.split(",").map(l=>l.trim())}),alert("Requirement created successfully"),t(`/clients/${e}/requirements`)}catch(l){console.error("Requirement create failed",l),alert("Failed to create requirement")}}return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow p-6 rounded",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create Requirement"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Job Title"}),n.jsx("input",{name:"title",className:"border p-2 w-full rounded",placeholder:"e.g. Python Developer",value:r.title,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Location"}),n.jsx("input",{name:"location",className:"border p-2 w-full rounded",placeholder:"e.g. Bangalore",value:r.location,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Skills"}),n.jsx("input",{name:"skills",className:"border p-2 w-full rounded",placeholder:"e.g. Python, Django, AWS",value:r.skills,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Budget"}),n.jsx("input",{name:"budget",className:"border p-2 w-full rounded",placeholder:"e.g. 12 LPA",value:r.budget,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"Duration"}),n.jsx("input",{name:"duration",className:"border p-2 w-full rounded",placeholder:"e.g. 6 Months",value:r.duration,onChange:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold",children:"SLA"}),n.jsx("input",{name:"sla",className:"border p-2 w-full rounded",placeholder:"e.g. 30 Days",value:r.sla,onChange:a})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:i,className:"bg-green-600 text-white px-5 py-2 rounded",children:"Save"}),n.jsx("button",{onClick:()=>t(-1),className:"bg-gray-300 px-5 py-2 rounded",children:"Cancel"})]})]})}function FVe(){const{clientId:e}=Rr();return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-4 border-b mb-4 pb-2",children:[n.jsx(cr,{to:`/clients/${e}/requirements`,className:({isActive:t})=>t?"font-bold text-blue-600":"text-gray-600",children:"Requirements"}),n.jsx(cr,{to:`/clients/${e}/requirements/create`,className:({isActive:t})=>t?"font-bold text-blue-600":"text-gray-600",children:"+ Create Requirement"})]}),n.jsx(_o,{})]})}function DVe({candidate:e,offer:t}){return e?n.jsxs("div",{className:"p-8 bg-white border rounded text-sm leading-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-lg font-bold",children:"ASUUKI PRIVATE LIMITED"}),n.jsx("p",{children:"Off# 216, Prajay Corporate House, 1-10-64, Chikoti Gardens, Begumpet, Hyderabad, Telangana  500016"}),n.jsx("p",{children:"www.asuuki.com | hr@asuuki.com"})]}),n.jsxs("p",{className:"mb-4",children:[n.jsx("b",{children:"Date:"})," ",new Date().toLocaleDateString()]}),n.jsx("p",{className:"mb-4",children:n.jsxs("b",{children:["Dear ",e.full_name,","]})}),n.jsx("p",{children:"Welcome to Asuuki Private Limited!"}),n.jsxs("p",{children:["We have greatly enjoyed our recent discussions with you and are pleased to offer you the role of ",n.jsx("b",{children:t.job_title}),' with Asuuki Private Limited ("Asuuki"). Your place of posting will be'," ",n.jsx("b",{children:t.work_location}),"."]}),n.jsxs("p",{children:["Your Annual Gross remuneration package inclusive of all perks and details of your salary package is mentioned in Annexure  A of this letter. Your total CTC will be"," ",n.jsxs("b",{children:[t.currency," ",t.compensation]}),"."]}),n.jsxs("p",{children:["You are expected to join on ",n.jsx("b",{children:t.start_date}),". If you are unable to join by this date, please notify us immediately to seek an extension."]}),n.jsxs("p",{children:["You will be on probation for a period of ",n.jsx("b",{children:t.probation_period})," ","from your joining date. During probation, your employment may be terminated by either party with one months notice."]}),n.jsx("p",{children:"You are required to maintain the confidentiality of company information, and any work developed during employment remains the intellectual property of the company."}),n.jsx("p",{children:"At the time of joining, you need to bring the documents mentioned in Annexure B for verification."}),n.jsxs("p",{children:["Please sign the duplicate copy of this letter in token of your acceptance of the above on or before ",n.jsx("b",{children:t.acceptance_deadline}),"."]}),n.jsx("p",{className:"mt-6",children:"We look forward to working with you and wish you success in your career with us."}),n.jsxs("p",{className:"mt-6",children:["For Asuuki Private Limited,",n.jsx("br",{}),n.jsx("b",{children:"Shekhar Singh"}),n.jsx("br",{}),"HR Manager"]})]}):n.jsx("div",{className:"p-6 border rounded text-gray-500",children:"Select candidate to preview offer letter"})}const $Ve=e=>q.post("/v1/offers/send",e);function MVe({candidate:e,onClose:t}){const[r,s]=g.useState({});async function a(i){await $Ve(i),alert("Offer letter sent successfully"),t==null||t()}return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(MV,{candidate:e,onClose:t,setExternalForm:s,onSubmit:a}),n.jsx(DVe,{candidate:e,offer:r})]})}const vu=e=>{var t;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??null:null},BVe=async(e,t)=>{const r=await q.post(`/v1/timesheets/deployments/${e}`,t);return vu(r)},UVe=async e=>{const t=await q.post(`/v1/timesheets/${e}/submit`);return vu(t)},zVe=async()=>(await q.get("/v1/timesheets/consultant")).data,WVe=async()=>{const e=await q.get("/v1/timesheets/am/timesheets");return vu(e)},VVe=async e=>{const t=await q.post(`/v1/timesheets/${e}/am-approve`);return vu(t)},eH=async(e,t)=>{const r=await q.post(`/v1/timesheets/${e}/reject`,{reason:t});return vu(r)},tH=async()=>{const e=await q.get("/v1/timesheets/client");return vu(e)},HVe=async e=>{const t=await q.post(`/v1/timesheets/${e}/client-approve`);return vu(t)},qVe=e=>({draft:" Draft",submitted:" Submitted",am_approved:" AM Approved",client_approved:" Client Approved",rejected:" Rejected",locked:" Locked"})[e]||e;function GVe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),a=Et(),i=async()=>{var l;try{const o=await zVe();t((o==null?void 0:o.timesheets)||((l=o==null?void 0:o.data)==null?void 0:l.timesheets)||[])}catch{alert("Failed to load timesheets")}finally{s(!1)}};return g.useEffect(()=>{i()},[]),g.useEffect(()=>{const l=()=>i();return window.addEventListener("focus",l),()=>window.removeEventListener("focus",l)},[]),r?n.jsx("p",{children:"Loading..."}):n.jsxs("div",{style:{padding:20},children:[n.jsx("h2",{children:"My Timesheets"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[n.jsxs("p",{style:{color:"#555"},children:["Total Timesheets: ",e.length]}),n.jsx("button",{style:{padding:"8px 16px",background:"#2563eb",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},onClick:()=>a("/consultant/timesheets/new"),children:"+ Create Timesheet"})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:12},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f9fafb"},children:[n.jsx("th",{style:Bg,children:"Period"}),n.jsx("th",{style:Bg,children:"Total Hours"}),n.jsx("th",{style:Bg,children:"Status"}),n.jsx("th",{style:Bg,children:"Action"})]})}),n.jsx("tbody",{children:e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:40,color:"#777"},children:n.jsxs("div",{children:[n.jsx("p",{children:"No timesheets created yet."}),n.jsx("button",{style:{marginTop:12,padding:"8px 16px",background:"#2563eb",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},onClick:()=>a("/consultant/timesheets/new"),children:"+ Create First Timesheet"})]})})}):e.map(l=>n.jsxs("tr",{children:[n.jsxs("td",{style:Ug,children:[l.period_start,"  ",l.period_end]}),n.jsx("td",{style:Ug,children:l.total_hours}),n.jsx("td",{style:Ug,children:qVe(l.status)}),n.jsx("td",{style:Ug,children:(l.status==="draft"||l.status==="rejected")&&n.jsx("button",{style:{padding:"4px 10px",background:"#fde68a",border:"1px solid #f59e0b",borderRadius:4,cursor:"pointer"},onClick:()=>a(`/consultant/timesheets/edit/${l.id}`),children:"Edit"})})]},l.id))})]})]})}const Bg={border:"1px solid #e5e7eb",padding:"10px",textAlign:"left",fontWeight:600},Ug={border:"1px solid #e5e7eb",padding:"10px"};function vD(){const{id:e}=Rr(),t=Et(),[r,s]=g.useState(null),[a,i]=g.useState(""),[l,o]=g.useState("weekly"),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,y]=g.useState([{work_date:"",hours:0,description:""}]),[x,p]=g.useState(null),[h,v]=g.useState("draft"),[b,j]=g.useState(!1),_=!["draft","rejected"].includes(h);g.useEffect(()=>{e?w(e):N()},[e]);const N=async()=>{var C,P,O;try{const R=await q.get("/v1/consultant/dashboard"),F=((C=R.data)==null?void 0:C.active_deployment)||((O=(P=R.data)==null?void 0:P.data)==null?void 0:O.active_deployment);if(!F){alert("No active deployment found");return}s(F),i(F.id)}catch(R){console.error(R),alert("Failed to load deployment")}},w=async C=>{var P,O,R,F;try{const Q=await q.get(`/v1/timesheets/${C}`),W=((P=Q.data)==null?void 0:P.data)||Q.data;p(W.id),i(W.deployment_id),o(W.period_type),d((O=W.period_start)==null?void 0:O.slice(0,10)),m((R=W.period_end)==null?void 0:R.slice(0,10)),v(W.status),y((F=W.entries)!=null&&F.length?W.entries.map(L=>{var K,D,Y;const I=(K=L.work_date)==null?void 0:K.slice(0,10);return I<((D=W.period_start)==null?void 0:D.slice(0,10))||I>((Y=W.period_end)==null?void 0:Y.slice(0,10))?{...L,work_date:""}:{...L,work_date:I}}):[{work_date:"",hours:0,description:""}])}catch(Q){console.error(Q),alert("Failed to load timesheet")}},k=()=>{y([...f,{work_date:"",hours:0,description:""}])},S=(C,P,O)=>{const R=[...f];R[C][P]=O,y(R)},E=async()=>{if(console.log(" SAVE CLICKED"),console.log("deploymentId:",a),console.log("current timesheetId BEFORE save:",x),!a){alert("No deployment found");return}if(u<c){alert("End date cannot be before start date");return}for(let C of f){if(!C.work_date){alert("Work date is required");return}if(C.work_date<c||C.work_date>u){alert("Work date must be within selected period");return}}try{j(!0);const P=await BVe(a,{period_type:l,period_start:c,period_end:u,entries:f});console.log(" SAVE RESPONSE ID:",P.id),v("draft"),p(P.id),t(`/consultant/timesheets/edit/${P.id}`),alert("Timesheet saved as draft")}catch(C){console.error(C),alert("Failed to save timesheet")}finally{j(!1)}},T=async()=>{var C,P,O,R,F,Q;if(console.log(" SUBMIT CLICKED"),console.log("timesheetId at submit time:",x),!x){alert("Timesheet ID missing");return}try{j(!0);const W=await q.get(`/v1/timesheets/${x}`);if((((P=(C=W.data)==null?void 0:C.data)==null?void 0:P.status)||((O=W.data)==null?void 0:O.status))!=="draft"){alert("Timesheet already submitted");return}await UVe(x),alert("Timesheet submitted successfully"),t("/consultant/timesheets")}catch(W){console.error(((R=W.response)==null?void 0:R.data)||W),alert(((Q=(F=W.response)==null?void 0:F.data)==null?void 0:Q.detail)||"Submit failed")}finally{j(!1)}},A=f.reduce((C,P)=>C+Number(P.hours||0),0);return n.jsx("div",{style:{padding:24},children:n.jsxs("div",{style:{maxWidth:900,margin:"0 auto",background:"#fff",padding:24,borderRadius:8,boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:[n.jsx("h2",{style:{marginBottom:4},children:e?"Edit Timesheet":"New Timesheet"}),_&&n.jsx("p",{style:{color:"#dc2626",marginBottom:12},children:"This timesheet has been submitted and is read-only."}),r&&n.jsxs("p",{style:{color:"#555",marginBottom:20},children:[n.jsx("b",{children:"Client:"})," ",r.client_name,"  | ",n.jsx("b",{children:"Role:"})," ",r.role]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("label",{children:"Period Type"}),n.jsxs("select",{value:l,disabled:_,onChange:C=>o(C.target.value),style:Bu,children:[n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Start Date"}),n.jsx("input",{type:"date",value:c,disabled:_,onChange:C=>d(C.target.value),style:Bu})]}),n.jsxs("div",{children:[n.jsx("label",{children:"End Date"}),n.jsx("input",{type:"date",value:u,disabled:_,onChange:C=>m(C.target.value),style:Bu})]})]}),n.jsx("h4",{style:{marginBottom:8},children:"Work Entries"}),n.jsxs("table",{style:JVe,children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f9fafb"},children:[n.jsx("th",{style:Sw,children:"Date"}),n.jsx("th",{style:Sw,children:"Hours"}),n.jsx("th",{style:Sw,children:"Description"})]})}),n.jsx("tbody",{children:f.map((C,P)=>n.jsxs("tr",{children:[n.jsx("td",{style:Cw,children:n.jsx("input",{type:"date",value:C.work_date,min:c,max:u,disabled:_,onChange:O=>S(P,"work_date",O.target.value),style:Bu})}),n.jsx("td",{style:Cw,children:n.jsx("input",{type:"number",value:C.hours,disabled:_,onChange:O=>S(P,"hours",Number(O.target.value)),style:Bu})}),n.jsx("td",{style:Cw,children:n.jsx("input",{value:C.description,disabled:_,onChange:O=>S(P,"description",O.target.value),style:Bu})})]},P))})]}),!_&&n.jsx("button",{onClick:k,style:YVe,children:"+ Add Row"}),n.jsxs("p",{style:{marginTop:16},children:[n.jsx("b",{children:"Total Hours:"})," ",A]}),n.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:12},children:[!e&&["draft","rejected"].includes(h)&&n.jsx("button",{onClick:E,disabled:b,style:XVe,children:"Save Draft"}),h==="draft"&&n.jsx("button",{onClick:T,disabled:b,style:KVe,children:"Submit"})]})]})})}const Bu={width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:4},JVe={width:"100%",borderCollapse:"collapse"},Sw={border:"1px solid #e5e7eb",padding:10,textAlign:"left"},Cw={border:"1px solid #e5e7eb",padding:8},KVe={background:"#2563eb",color:"#fff",padding:"8px 16px",border:"none",borderRadius:4,cursor:"pointer"},XVe={background:"#e5e7eb",padding:"8px 16px",border:"none",borderRadius:4,cursor:"pointer"},YVe={marginTop:8,background:"transparent",border:"none",color:"#2563eb",cursor:"pointer"};function ZVe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(""),[l,o]=g.useState(null),c=async()=>{try{s(!0);const m=await WVe();t((m==null?void 0:m.timesheets)||[])}catch(m){console.error(m),alert("Failed to load timesheets")}finally{s(!1)}};g.useEffect(()=>{c()},[]);const d=async m=>{if(window.confirm("Approve this timesheet?"))try{await VVe(m),alert("Timesheet approved"),c()}catch(f){console.error(f),alert("Approval failed")}},u=async()=>{if(!a.trim()){alert("Please enter rejection reason");return}try{await eH(l,a),alert("Timesheet rejected"),o(null),i(""),c()}catch(m){console.error(m),alert("Reject failed")}};return r?n.jsx("p",{style:{padding:24},children:"Loading timesheets..."}):n.jsxs("div",{style:{padding:24,maxWidth:1200,margin:"0 auto"},children:[n.jsx("h2",{style:{marginBottom:20},children:"Pending Timesheets"}),e.length===0&&n.jsxs("div",{style:{background:"#ffffff",border:"1px dashed #e5e7eb",borderRadius:12,padding:"48px 24px",textAlign:"center",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),n.jsx("h3",{style:{fontSize:18,color:"#111827",marginBottom:6},children:"No Pending Timesheets"}),n.jsxs("p",{style:{fontSize:14},children:["All submitted timesheets have been reviewed.",n.jsx("br",{}),"New submissions will appear here."]})]}),e.map(m=>{var f;return n.jsxs("div",{style:QVe,children:[n.jsxs("div",{style:eHe,children:[n.jsxs("div",{children:[n.jsx("h3",{style:{margin:0,fontSize:18},children:m.consultant_name||""}),n.jsx("span",{style:tHe,children:"Consultant"})]}),n.jsx("span",{style:rHe,children:Gs(m.status)===""?"Submitted":Gs(m.status)})]}),n.jsxs("div",{style:nHe,children:[n.jsxs("p",{children:[n.jsx("b",{children:"Client:"})," ",m.client_name||""]}),n.jsxs("p",{children:[n.jsx("b",{children:"Period:"})," ",Aw(m.period_start)," "," ",Aw(m.period_end)]}),n.jsxs("div",{style:sHe,children:[" Total Hours: ",m.total_hours]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("h4",{style:{marginBottom:8},children:"Entries"}),n.jsxs("table",{style:aHe,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:Ew,children:"Date"}),n.jsx("th",{style:Ew,children:"Hours"}),n.jsx("th",{style:Ew,children:"Description"})]})}),n.jsx("tbody",{children:(f=m.entries)==null?void 0:f.map(y=>n.jsxs("tr",{children:[n.jsx("td",{style:Tw,children:Aw(y.work_date)}),n.jsx("td",{style:Tw,children:y.hours}),n.jsx("td",{style:Tw,children:y.description})]},y.id))})]})]})]}),n.jsxs("div",{style:iHe,children:[n.jsx("button",{style:lHe,onClick:()=>d(m.id),children:"Approve"}),n.jsx("button",{style:bD,onClick:()=>o(m.id),children:"Reject"})]})]},m.id)}),l&&n.jsx("div",{style:cHe,children:n.jsxs("div",{style:dHe,children:[n.jsx("h3",{style:{marginTop:0},children:"Reject Timesheet"}),n.jsx("textarea",{rows:4,placeholder:"Enter rejection reason",value:a,onChange:m=>i(m.target.value),style:uHe}),n.jsxs("div",{style:{marginTop:14,textAlign:"right"},children:[n.jsx("button",{onClick:()=>o(null),style:oHe,children:"Cancel"}),n.jsx("button",{onClick:u,style:bD,children:"Reject"})]})]})})]})}const Aw=e=>e?new Date(e).toLocaleDateString("en-GB"):"",QVe={background:"#fff",borderRadius:10,padding:18,marginBottom:18,boxShadow:"0 4px 10px rgba(0,0,0,0.08)"},eHe={display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},tHe={fontSize:13,color:"#6b7280"},rHe={background:"#fef3c7",color:"#92400e",padding:"4px 12px",borderRadius:999,fontSize:12,fontWeight:500},nHe={marginTop:14},sHe={marginTop:6,fontSize:16,fontWeight:600,color:"#111827"},aHe={width:"100%",borderCollapse:"collapse",marginTop:8},Ew={textAlign:"left",padding:"8px",fontSize:13,background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},Tw={padding:"8px",fontSize:14,borderBottom:"1px solid #e5e7eb"},iHe={marginTop:16,display:"flex",gap:10},lHe={background:"#16a34a",color:"#fff",border:"none",padding:"8px 18px",borderRadius:6,cursor:"pointer",fontWeight:500},bD={background:"#dc2626",color:"#fff",border:"none",padding:"8px 18px",borderRadius:6,cursor:"pointer",fontWeight:500},oHe={background:"#e5e7eb",border:"none",padding:"8px 18px",borderRadius:6,marginRight:8},cHe={position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center"},dHe={background:"#fff",padding:20,borderRadius:10,width:420},uHe={width:"100%",padding:10,borderRadius:6,border:"1px solid #d1d5db"},mHe={submitted:"bg-blue-100 text-blue-700",am_approved:"bg-yellow-100 text-yellow-800",client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"},fHe={submitted:"Submitted",am_approved:"AM Approved",client_approved:"Client Approved",rejected:"Rejected"};function hHe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(null),[l,o]=g.useState(""),[c,d]=g.useState(!1),[u,m]=g.useState(""),f=async()=>{try{s(!0);const b=await tH(),j=((b==null?void 0:b.timesheets)||[]).filter(_=>_.status==="am_approved");t(j)}catch(b){console.error(b),alert("Failed to load timesheets")}finally{s(!1)}};g.useEffect(()=>{f()},[]);const y=b=>b.trim()?b.trim().length<10?"Reason must be at least 10 characters":b.trim().length>500?"Reason must not exceed 500 characters":"":"Rejection reason is required",x=b=>{const j=b.target.value;o(j),u&&m(y(j))},p=async b=>{if(window.confirm("Approve this timesheet?"))try{await HVe(b),alert("Timesheet approved successfully!"),f()}catch{alert("Failed to approve timesheet")}},h=async()=>{const b=y(l);if(b){m(b);return}d(!0);try{await eH(a,l.trim()),alert("Timesheet rejected successfully!"),i(null),o(""),m(""),f()}catch{alert("Failed to reject timesheet")}finally{d(!1)}},v=()=>{i(null),o(""),m("")};return r?n.jsx("p",{className:"text-gray-500",children:"Loading timesheets..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-900",children:"Pending Timesheets"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve timesheets submitted by consultants"})]}),e.length===0&&n.jsxs("div",{className:"mt-6 border-2 border-dashed border-gray-200 rounded-xl p-16 text-center bg-white",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("span",{className:"text-6xl",children:""})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"No Pending Timesheets"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["All submitted timesheets have been reviewed.",n.jsx("br",{}),"New submissions will appear here."]})]}),e.map(b=>{var j;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6 max-w-4xl hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-bold text-gray-900",children:b.consultant_name||"Consultant"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[b.period_start,"  ",b.period_end]})]}),n.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-semibold uppercase ${mHe[b.status]||"bg-gray-100 text-gray-600"}`,children:fHe[b.status]||b.status})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Hours"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[b.total_hours," hrs"]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Timesheet Entries"}),n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:((j=b.entries)==null?void 0:j.length)>0?b.entries.map(_=>n.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 px-3 py-2 rounded border border-gray-200",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.work_date}),n.jsx("p",{className:"text-gray-600 text-xs mt-1 truncate max-w-md",children:_.description||"No description"})]}),n.jsxs("span",{className:"font-semibold text-gray-900 whitespace-nowrap ml-2",children:[_.hours," hrs"]})]},_.id)):n.jsx("p",{className:"text-gray-500 text-sm",children:"No entries"})})]}),b.status==="am_approved"&&n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>p(b.id),className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:" Approve"}),n.jsx("button",{onClick:()=>i(b.id),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors",children:" Reject"})]})]},b.id)}),a&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Reject Timesheet"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rejection Reason *"}),n.jsx("textarea",{className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none ${u?"border-red-500 ring-2 ring-red-200":"border-gray-300"}`,placeholder:"Please provide a detailed reason for rejection (10-500 characters)",value:l,onChange:x,rows:"4"}),u&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:u}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/500 characters"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:h,disabled:c||u!==""||!l.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Rejecting...":"Confirm Reject"}),n.jsx("button",{onClick:v,disabled:c,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"})]})]})})]})}const pHe={client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"};function xHe(){const[e,t]=g.useState([]),[r,s]=g.useState(!0);g.useEffect(()=>{a()},[]);const a=async()=>{const i=await tH(),l=((i==null?void 0:i.timesheets)||[]).filter(o=>o.status!=="am_approved");t(l),s(!1)};return r?n.jsx("p",{className:"text-gray-500",children:"Loading history..."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Timesheet History"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Approved and rejected timesheets"})]}),e.length===0&&n.jsx("div",{className:"bg-white border rounded-lg p-6 text-gray-500",children:"No history available"}),e.length>0&&n.jsx("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3",children:"Consultant"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Period"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Total Hours"}),n.jsx("th",{className:"text-left px-4 py-3",children:"Status"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:i.consultant_name}),n.jsxs("td",{className:"px-4 py-3 text-gray-600",children:[i.period_start,"  ",i.period_end]}),n.jsx("td",{className:"px-4 py-3",children:i.total_hours}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${pHe[i.status]}`,children:i.status.replace("_"," ").toUpperCase()})})]},i.id))})]})})]})}function jD(){const[e,t]=g.useState([]),[r,s]=g.useState(!0);g.useEffect(()=>{a()},[]);async function a(){var i;try{const l=await q.get("/v1/timesheets/am/history");t(((i=l.data)==null?void 0:i.timesheets)||[])}catch{alert("Failed to load history")}finally{s(!1)}}return r?n.jsx("p",{children:"Loading history..."}):n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Timesheet History"}),e.length===0?n.jsx("p",{className:"text-gray-500",children:"No history found"}):n.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-gray-100 text-sm",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Consultant"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),n.jsx("th",{className:"px-4 py-3",children:"Period"}),n.jsx("th",{className:"px-4 py-3",children:"Hours"}),n.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:i.consultant_name||""}),n.jsx("td",{className:"px-4 py-3",children:i.client_name||""}),n.jsxs("td",{className:"px-4 py-3 text-center",children:[_D(i.period_start),"  ",_D(i.period_end)]}),n.jsx("td",{className:"px-4 py-3 text-center font-semibold",children:i.total_hours}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx(gHe,{status:i.status})})]},i.id))})]})})]})}const _D=e=>e?new Date(e).toLocaleDateString("en-GB"):"";function gHe({status:e}){const t={am_approved:"bg-blue-100 text-blue-700",client_approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"};return n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t[e]||"bg-gray-100 text-gray-600"}`,children:Gs(e)===""?"Submitted":Gs(e)})}function Ho({children:e}){return n.jsx(TJ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e})}function yHe(){const[e,t]=g.useState(!!localStorage.getItem("access_token")),[r,s]=g.useState(localStorage.getItem("role")),a=()=>{t(!0),s(localStorage.getItem("role"))},i=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("role"),localStorage.removeItem("user"),t(!1),s(null)};return e?r&&r.toLowerCase()==="candidate"?n.jsx(Ho,{children:n.jsxs(Mo,{children:[n.jsxs(Ee,{path:"/candidate",element:n.jsx(JBe,{onLogout:i}),children:[n.jsx(Ee,{index:!0,element:n.jsx(Ln,{to:"dashboard",replace:!0})}),n.jsx(Ee,{path:"dashboard",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"notifications",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"complete-profile",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"apply-jobs",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"applied-jobs",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"my-interviews",element:n.jsx(g7e,{})}),n.jsx(Ee,{path:"my-interviews/:interviewId",element:n.jsx(w7e,{})}),n.jsx(Ee,{path:"profile",element:n.jsx(iy,{})}),n.jsx(Ee,{path:"profile/:id",element:n.jsx(iy,{})}),n.jsx(Ee,{path:"portal",element:n.jsx(Ln,{to:"dashboard",replace:!0})}),n.jsx(Ee,{path:"jobs",element:n.jsx(Ln,{to:"dashboard",replace:!0})}),n.jsx(Ee,{path:"applications",element:n.jsx(Ln,{to:"dashboard",replace:!0})})]}),n.jsx(Ee,{path:"/interviews/:id",element:n.jsx(FCe,{})}),n.jsx(Ee,{path:"/interviews/:id/feedback",element:n.jsx(w_,{})}),n.jsx(Ee,{path:"/live-interviews/:id/detail",element:n.jsx(P_,{})}),n.jsx(Ee,{path:"/interviews/:id/detail",element:n.jsx(ng,{})}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/candidate/dashboard",replace:!0})})]})}):r==="super_admin"?n.jsx(Ho,{children:n.jsx(QBe,{onLogout:i,children:n.jsxs(Mo,{children:[n.jsx(Ee,{path:"/super-admin",element:n.jsx(Ln,{to:"/super-admin/dashboard",replace:!0})}),n.jsx(Ee,{path:"/super-admin/dashboard",element:n.jsx(rUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup",element:n.jsx(oUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/org-structure",element:n.jsx(cUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/job-settings",element:n.jsx(dUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/company-profile",element:n.jsx(uUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/email-templates",element:n.jsx(fUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/approval-workflows",element:n.jsx(hUe,{})}),n.jsx(Ee,{path:"/super-admin/business-setup/integrations",element:n.jsx(xUe,{})}),n.jsx(Ee,{path:"/super-admin/clients",element:n.jsx(gUe,{})}),n.jsx(Ee,{path:"/super-admin/admin-management",element:n.jsx(vUe,{})}),n.jsx(Ee,{path:"/super-admin/roles-permissions",element:n.jsx(CUe,{})}),n.jsx(Ee,{path:"/super-admin/tracker-dashboard",element:n.jsx(UUe,{})}),n.jsx(Ee,{path:"/super-admin/workflow-builder",element:n.jsx(Pze,{})}),n.jsx(Ee,{path:"/super-admin/operations-analytics",element:n.jsx(VUe,{})}),n.jsx(Ee,{path:"/super-admin/finance-billing",element:n.jsx(GUe,{})}),n.jsx(Ee,{path:"/super-admin/compliance-security",element:n.jsx(JUe,{})}),n.jsx(Ee,{path:"/super-admin/system-settings",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/general",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/security",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/email",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/uploads",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/feature-flags",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/maintenance",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/system-settings/audit-logs",element:n.jsx(Wo,{})}),n.jsx(Ee,{path:"/super-admin/user-management/users",element:n.jsx(Eze,{})}),n.jsx(Ee,{path:"/super-admin/users",element:n.jsx(Ln,{to:"/super-admin/user-management/users",replace:!0})}),n.jsx(Ee,{path:"/super-admin/audit-logs",element:n.jsx(xze,{})}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/super-admin/dashboard",replace:!0})})]})})}):r==="vendor"?n.jsx(Ho,{children:n.jsxs(Mo,{children:[n.jsxs(Ee,{path:"/vendor",element:n.jsx(xVe,{}),children:[n.jsx(Ee,{index:!0,element:n.jsx(hD,{})}),n.jsx(Ee,{path:"dashboard",element:n.jsx(hD,{})}),n.jsx(Ee,{path:"candidates",element:n.jsx(CVe,{})}),n.jsx(Ee,{path:"documents",element:n.jsx(PVe,{})}),n.jsx(Ee,{path:"profile",element:n.jsx(OVe,{})}),n.jsx(Ee,{path:"bgv-assigned",element:n.jsx(RVe,{})}),n.jsx(Ee,{path:"bgv-submit/:id",element:n.jsx(LVe,{})})]}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/vendor/dashboard",replace:!0})})]})}):r==="client"?n.jsx(Ho,{children:n.jsxs(Mo,{children:[n.jsxs(Ee,{path:"/client",element:n.jsx(qBe,{onLogout:i}),children:[n.jsx(Ee,{index:!0,element:n.jsx(lw,{})}),n.jsx(Ee,{path:"dashboard",element:n.jsx(lw,{})}),n.jsx(Ee,{path:"requirements",element:n.jsx(aF,{})}),n.jsx(Ee,{path:"requirements/create",element:n.jsx(fVe,{})}),n.jsx(Ee,{path:"timesheets",element:n.jsx(hHe,{})}),n.jsx(Ee,{path:"timesheet-history",element:n.jsx(xHe,{})}),n.jsx(Ee,{path:"jobs/:jobId/submissions",element:n.jsx(x0,{})}),n.jsx(Ee,{path:"submissions",element:n.jsx(x0,{})}),n.jsx(Ee,{path:"deployments",element:n.jsx(iF,{})}),n.jsx(Ee,{path:"invoices",element:n.jsx(lF,{})})]}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/client/dashboard",replace:!0})})]})}):r==="recruiter"?n.jsx(Ho,{children:n.jsxs(Mo,{children:[n.jsxs(Ee,{path:"/recruiter",element:n.jsx(GBe,{onLogout:i}),children:[n.jsx(Ee,{index:!0,element:n.jsx(nw,{})}),n.jsx(Ee,{path:"dashboard",element:n.jsx(nw,{})}),n.jsx(Ee,{path:"assigned-jobs",element:n.jsx(YI,{})}),n.jsx(Ee,{path:"assigned-jobs/:id",element:n.jsx(aD,{})}),n.jsx(Ee,{path:"requirements",element:n.jsx(JI,{})}),n.jsx(Ee,{path:"requirements/:requirementId",element:n.jsx(KI,{})}),n.jsx(Ee,{path:"profile",element:n.jsx(ZI,{})}),n.jsx(Ee,{path:"my-profile",element:n.jsx(ZI,{})}),n.jsx(Ee,{path:"settings",element:n.jsx(V9e,{})}),n.jsx(Ee,{path:"trackers",element:n.jsx(vBe,{})}),n.jsx(Ee,{path:"reports",element:n.jsx(jBe,{})}),n.jsx(Ee,{path:"job-management",element:n.jsx(dD,{userRole:"recruiter"})}),n.jsx(Ee,{path:"job-management/:id",element:n.jsx(uD,{userRole:"recruiter"})}),n.jsx(Ee,{path:"job-management/new",element:n.jsx(mD,{userRole:"recruiter"})}),n.jsx(Ee,{path:"job-management/:jobId/posting/new",element:n.jsx(fD,{userRole:"recruiter"})}),n.jsx(Ee,{path:"jobs",element:n.jsx(j_,{})}),n.jsx(Ee,{path:"candidates",element:n.jsx(Y_,{})}),n.jsx(Ee,{path:"candidates/:id",element:n.jsx(Y_,{})}),n.jsx(Ee,{path:"candidate-profile",element:n.jsx(HI,{})}),n.jsx(Ee,{path:"candidate-profile/:id",element:n.jsx(iy,{})}),n.jsx(Ee,{path:"matching",element:n.jsx(qI,{})}),n.jsx(Ee,{path:"jobs/:id/submissions",element:n.jsx(F_,{})}),n.jsx(Ee,{path:"resdex/search-resumes",element:n.jsx(LF,{})}),n.jsx(Ee,{path:"resdex/advanced-search",element:n.jsx(zF,{})}),n.jsx(Ee,{path:"resdex/send-nvite",element:n.jsx(IF,{})}),n.jsx(Ee,{path:"resdex/manage-searches",element:n.jsx(FF,{})}),n.jsx(Ee,{path:"resdex/folders",element:n.jsx(DF,{})}),n.jsx(Ee,{path:"interviews",element:n.jsx(SR,{})}),n.jsx(Ee,{path:"interviews/calendar",element:n.jsx(A_,{})}),n.jsx(Ee,{path:"interviews/logs",element:n.jsx(T_,{})}),n.jsx(Ee,{path:"interview-calendar",element:n.jsx(A_,{})}),n.jsx(Ee,{path:"interview-logs",element:n.jsx(T_,{})}),n.jsx(Ee,{path:"interviews/:id",element:n.jsx(ng,{})}),n.jsx(Ee,{path:"interviews/:id/detail",element:n.jsx(ng,{})}),n.jsx(Ee,{path:"live-interviews/:id/detail",element:n.jsx(P_,{})}),n.jsx(Ee,{path:"interviews/:id/feedback",element:n.jsx(w_,{})}),n.jsx(Ee,{path:"candidates/:id/interviews",element:n.jsx(aL,{})}),n.jsx(Ee,{path:"onboarding",element:n.jsx(CR,{})}),n.jsx(Ee,{path:"employees",element:n.jsx(AR,{})}),n.jsx(Ee,{path:"employee/dashboard",element:n.jsx(TR,{})}),n.jsx(Ee,{path:"employees/directory",element:n.jsx(ER,{})}),n.jsx(Ee,{path:"employees/:id",element:n.jsx(__,{})}),n.jsx(Ee,{path:"candidate-workflow",element:n.jsx(rF,{})})]}),n.jsx(Ee,{path:"/campaigns",element:n.jsx($R,{})}),n.jsx(Ee,{path:"/leads",element:n.jsx(MR,{})}),n.jsx(Ee,{path:"/leaves",element:n.jsx(RR,{})}),n.jsx(Ee,{path:"/attendance",element:n.jsx(LR,{})}),n.jsx(Ee,{path:"/performance",element:n.jsx(IR,{})}),n.jsx(Ee,{path:"/alumni",element:n.jsx(PR,{})}),n.jsx(Ee,{path:"/finance",element:n.jsx(OR,{})}),n.jsx(Ee,{path:"/users",element:n.jsx(DR,{})}),n.jsx(Ee,{path:"/roles",element:n.jsx(eL,{})}),n.jsx(Ee,{path:"/permissions",element:n.jsx(tL,{})}),n.jsx(Ee,{path:"/roles-list",element:n.jsx(rL,{})}),n.jsx(Ee,{path:"/permissions-list",element:n.jsx(nL,{})}),n.jsx(Ee,{path:"/role-permission-matrix",element:n.jsx(sL,{})}),n.jsx(Ee,{path:"/settings",element:n.jsx(xD,{})}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/recruiter/dashboard",replace:!0})})]})}):r==="account_manager"?n.jsx(Ho,{children:n.jsx(GI,{children:n.jsx(iL,{children:n.jsxs(Mo,{children:[n.jsxs(Ee,{path:"/account-manager",element:n.jsx(KBe,{onLogout:i}),children:[n.jsx(Ee,{index:!0,element:n.jsx(O_,{})}),n.jsx(Ee,{path:"dashboard",element:n.jsx(O_,{})}),n.jsx(Ee,{path:"requirements",element:n.jsx(XF,{})}),n.jsx(Ee,{path:"requirements/:id",element:n.jsx(YF,{})}),n.jsx(Ee,{path:"submissions",element:n.jsx(NEe,{})}),n.jsx(Ee,{path:"interview-calendar",element:n.jsx(hEe,{})}),n.jsx(Ee,{path:"interview-logs",element:n.jsx(_Ee,{})}),n.jsx(Ee,{path:"candidate-review",element:n.jsx(QWe,{})}),n.jsx(Ee,{path:"assignments",element:n.jsx(mL,{})}),n.jsx(Ee,{path:"assign/:id",element:n.jsx(ZF,{})}),n.jsx(Ee,{path:"timesheets",element:n.jsx(SEe,{})}),n.jsx(Ee,{path:"timesheet-history",element:n.jsx(jD,{})}),n.jsx(Ee,{path:"clients",element:n.jsx(aEe,{})}),n.jsx(Ee,{path:"reports",element:n.jsx(EEe,{})}),n.jsx(Ee,{path:"profile",element:n.jsx(CEe,{})}),n.jsx(Ee,{path:"settings",element:n.jsx(AEe,{})}),n.jsx(Ee,{path:"job-management",element:n.jsx(dD,{userRole:"account_manager"})}),n.jsx(Ee,{path:"job-management/:id",element:n.jsx(uD,{userRole:"account_manager"})}),n.jsx(Ee,{path:"job-management/new",element:n.jsx(mD,{userRole:"account_manager"})}),n.jsx(Ee,{path:"job-management/:jobId/posting/new",element:n.jsx(fD,{userRole:"account_manager"})})]}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/account-manager/dashboard",replace:!0})})]})})})}):n.jsx(Ho,{children:n.jsx(GI,{children:n.jsx(iL,{children:n.jsx(YBe,{onLogout:i,children:n.jsxs(Mo,{children:[n.jsx(Ee,{path:"/offers/send/:candidateId",element:n.jsx(MVe,{})}),n.jsx(Ee,{path:"/consultant/dashboard",element:n.jsx(VBe,{})}),n.jsx(Ee,{path:"/consultant/timesheets",element:n.jsx(GVe,{})}),n.jsx(Ee,{path:"/consultant/timesheets/new",element:n.jsx(vD,{})}),n.jsx(Ee,{path:"/consultant/timesheets/edit/:id",element:n.jsx(vD,{})}),n.jsx(Ee,{path:"/account-manager/timesheets",element:n.jsx(ZVe,{})}),n.jsx(Ee,{path:"/account-manager/timesheet-history",element:n.jsx(jD,{})}),n.jsx(Ee,{path:"/consultant/profile",element:n.jsx(HBe,{})}),n.jsx(Ee,{path:"/client/dashboard",element:n.jsx(lw,{})}),n.jsx(Ee,{path:"/client/requirements",element:n.jsx(aF,{})}),n.jsx(Ee,{path:"/settings",element:n.jsx(xD,{})}),n.jsx(Ee,{path:"/client/jobs/:jobId/submissions",element:n.jsx(x0,{})}),n.jsx(Ee,{path:"/client/deployments",element:n.jsx(iF,{})}),n.jsx(Ee,{path:"/client/invoices",element:n.jsx(lF,{})}),n.jsx(Ee,{path:"/dashboard",element:r==="admin"?n.jsx(lCe,{}):n.jsx(Ln,{to:r==="account_manager"?"/account-manager/dashboard":r==="consultant"?"/consultant/dashboard":"/",replace:!0})}),n.jsx(Ee,{path:"/clients",element:n.jsx(IVe,{})}),n.jsxs(Ee,{path:"/clients/:clientId",element:n.jsx(FVe,{}),children:[n.jsx(Ee,{index:!0,element:n.jsx(gD,{})}),n.jsx(Ee,{path:"requirements",element:n.jsx(gD,{})}),n.jsx(Ee,{path:"requirements/create",element:n.jsx(yD,{})})]}),n.jsx(Ee,{path:"/clients/:clientId/requirements/create",element:n.jsx(yD,{})}),n.jsx(Ee,{path:"/candidate-dashboard",element:n.jsx(Cu,{})}),n.jsx(Ee,{path:"/jobs",element:n.jsx(j_,{})}),n.jsx(Ee,{path:"/recruitment/jobs",element:n.jsx(j_,{})}),n.jsx(Ee,{path:"/recruitment/jobs/create",element:n.jsx(TEe,{})}),n.jsx(Ee,{path:"/recruitment/jobs/:id",element:n.jsx(Wj,{})}),n.jsx(Ee,{path:"/recruitment/jobs/:id/edit",element:n.jsx(OEe,{})}),n.jsx(Ee,{path:"/recruitment/jobs/:id/match",element:n.jsx(LEe,{})}),n.jsx(Ee,{path:"/recruitment/jobs/:id/submissions",element:n.jsx(F_,{})}),n.jsx(Ee,{path:"/recruitment/jobs/submissions",element:n.jsx(F_,{})}),n.jsx(Ee,{path:"/recruiter/jobs/:id",element:n.jsx(aD,{})}),n.jsx(Ee,{path:"/candidates",element:n.jsx(Y_,{})}),n.jsx(Ee,{path:"/candidates/:id",element:n.jsx(HI,{})}),n.jsx(Ee,{path:"/matching",element:n.jsx(qI,{})}),n.jsx(Ee,{path:"/candidates/verification",element:n.jsx(UMe,{})}),n.jsx(Ee,{path:"/interviews",element:n.jsx(SR,{})}),n.jsx(Ee,{path:"/interviews/logs",element:n.jsx(T_,{})}),n.jsx(Ee,{path:"/interviews/:id",element:n.jsx(ICe,{})}),n.jsx(Ee,{path:"/interviews/:id/detail",element:n.jsx(ng,{})}),n.jsx(Ee,{path:"/live-interviews/:id/detail",element:n.jsx(P_,{})}),n.jsx(Ee,{path:"/interviews/:id/feedback",element:n.jsx(w_,{})}),n.jsx(Ee,{path:"/recruiter/dashboard",element:n.jsx(nw,{})}),n.jsx(Ee,{path:"/recruiter/assigned-jobs",element:n.jsx(YI,{})}),n.jsx(Ee,{path:"/recruiter/candidate-workflow",element:n.jsx(rF,{})}),n.jsx(Ee,{path:"/recruiter/resdex/search-resumes",element:n.jsx(LF,{})}),n.jsx(Ee,{path:"/recruiter/resdex/advanced-search",element:n.jsx(zF,{})}),n.jsx(Ee,{path:"/recruiter/resdex/send-nvite",element:n.jsx(IF,{})}),n.jsx(Ee,{path:"/recruiter/resdex/manage-searches",element:n.jsx(FF,{})}),n.jsx(Ee,{path:"/recruiter/resdex/folders",element:n.jsx(DF,{})}),n.jsx(Ee,{path:"/recruiter/requirements",element:n.jsx(JI,{})}),n.jsx(Ee,{path:"/recruiter/requirements/:requirementId",element:n.jsx(KI,{})}),n.jsx(Ee,{path:"/recruitment/jobs/:id",element:n.jsx(D9e,{})}),n.jsx(Ee,{path:"/matching",element:n.jsx(D3e,{})}),n.jsx(Ee,{path:"/candidates/bulk-actions",element:n.jsx(BMe,{})}),n.jsx(Ee,{path:"/interviews/calendar",element:n.jsx(A_,{})}),n.jsx(Ee,{path:"/candidates/:id/interviews",element:n.jsx(aL,{})}),n.jsx(Ee,{path:"/onboarding",element:n.jsx(CR,{})}),n.jsx(Ee,{path:"/employees",element:n.jsx(AR,{})}),n.jsx(Ee,{path:"/employee/dashboard",element:n.jsx(TR,{})}),n.jsx(Ee,{path:"/employees/directory",element:n.jsx(ER,{})}),n.jsx(Ee,{path:"/employees/:id",element:n.jsx(__,{})}),n.jsx(Ee,{path:"/campaigns",element:n.jsx($R,{})}),n.jsx(Ee,{path:"/leads",element:n.jsx(MR,{})}),n.jsx(Ee,{path:"/leaves",element:n.jsx(RR,{})}),n.jsx(Ee,{path:"/attendance",element:n.jsx(LR,{})}),n.jsx(Ee,{path:"/performance",element:n.jsx(IR,{})}),n.jsx(Ee,{path:"/alumni",element:n.jsx(PR,{})}),n.jsx(Ee,{path:"/finance",element:n.jsx(OR,{})}),n.jsx(Ee,{path:"/users",element:n.jsx(DR,{})}),n.jsx(Ee,{path:"/roles",element:n.jsx(eL,{})}),n.jsx(Ee,{path:"/permissions",element:n.jsx(tL,{})}),n.jsx(Ee,{path:"/roles-list",element:n.jsx(rL,{})}),n.jsx(Ee,{path:"/permissions-list",element:n.jsx(nL,{})}),n.jsx(Ee,{path:"/role-permission-matrix",element:n.jsx(sL,{})}),n.jsx(Ee,{path:"/careers",element:n.jsx(Bj,{})}),n.jsx(Ee,{path:"/careers/job/:id",element:n.jsx(Wj,{})}),n.jsx(Ee,{path:"/consultants",element:n.jsx(_Be,{})}),n.jsx(Ee,{path:"/consultants/:id",element:n.jsx(DBe,{})}),n.jsx(Ee,{path:"/consultants/:id/deploy",element:n.jsx(MBe,{})}),n.jsx(Ee,{path:"/consultant-deployments",element:n.jsx(BBe,{})}),n.jsx(Ee,{path:"/consultant-deployments/:id",element:n.jsx(zBe,{})}),n.jsx(Ee,{path:"/consultants/:id",element:n.jsx(__,{})}),n.jsx(Ee,{path:"/offer-letter",element:n.jsx(MV,{})}),n.jsx(Ee,{path:"/",element:r==="vendor"?n.jsx(Ln,{to:"/vendor/dashboard",replace:!0}):r==="employee"?n.jsx(Ln,{to:"/employee/dashboard",replace:!0}):r==="recruiter"?n.jsx(Ln,{to:"/recruiter/dashboard",replace:!0}):r==="account_manager"?n.jsx(Ln,{to:"/account-manager/dashboard",replace:!0}):r==="client"?n.jsx(Ln,{to:"/client/dashboard",replace:!0}):r==="consultant"?n.jsx(Ln,{to:"/consultant/dashboard",replace:!0}):n.jsx(Ln,{to:"/dashboard",replace:!0})}),n.jsx(Ee,{path:"/account-manager/dashboard",element:n.jsx(O_,{})}),n.jsx(Ee,{path:"/account-manager/assignments",element:n.jsx(mL,{})}),n.jsx(Ee,{path:"/account-manager/requirements",element:n.jsx(XF,{})}),n.jsx(Ee,{path:"/account-manager/submissions",element:n.jsx(x0,{})}),n.jsx(Ee,{path:"/account-manager/feedback",element:n.jsx(x0,{})}),n.jsx(Ee,{path:"/account-manager/requirements/:id",element:n.jsx(YF,{})}),n.jsx(Ee,{path:"/account-manager/assign/:id",element:n.jsx(ZF,{})}),n.jsx(Ee,{path:"/account-manager/requirement/:jobId/submissions",element:n.jsx(vWe,{})})]})})})})}):n.jsx(Ho,{children:n.jsxs(Mo,{children:[n.jsx(Ee,{path:"/login",element:n.jsx(bX,{onLogin:a})}),n.jsx(Ee,{path:"/register",element:n.jsx(jX,{})}),n.jsx(Ee,{path:"/forgot-password",element:n.jsx(Yee,{})}),n.jsx(Ee,{path:"/",element:n.jsx(Bj,{})}),n.jsx(Ee,{path:"/careers",element:n.jsx(Bj,{})}),n.jsx(Ee,{path:"/careers/job/:id",element:n.jsx(Wj,{})}),n.jsx(Ee,{path:"/careers/register",element:n.jsx(gte,{})}),n.jsx(Ee,{path:"/careers/login",element:n.jsx(yte,{onLogin:a})}),n.jsx(Ee,{path:"*",element:n.jsx(Ln,{to:"/careers",replace:!0})})]})})}const vHe=g.createContext({labels:{},loading:!1,refreshLabels:async()=>{}});function bHe({children:e}){const t=g.useMemo(()=>({labels:{},loading:!1,refreshLabels:async()=>{}}),[]);return n.jsx(vHe.Provider,{value:t,children:e})}const rH=document.getElementById("root");if(!rH)throw new Error("Root element (#root) not found in index.html");I8(rH).render(n.jsx(Ce.StrictMode,{children:n.jsx(bHe,{children:n.jsx(yHe,{})})}));export{ux as c,jHe as g};
